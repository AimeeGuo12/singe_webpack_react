/*! @ncctag content */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("@platform/api/index"),require("@platform/base/index"),require("react-dom"),require("@platform/template/index")):"function"==typeof define&&define.amd?define(["react","@platform/api/index","@platform/base/index","react-dom","@platform/template/index"],t):"object"==typeof exports?exports["@platform/form/index"]=t(require("react"),require("@platform/api/index"),require("@platform/base/index"),require("react-dom"),require("@platform/template/index")):e["@platform/form/index"]=t(e.React,e["@platform/api/index"],e["@platform/base/index"],e.ReactDOM,e["@platform/template/index"])}(window,(function(e,t,r,n,o){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="../../../../platform/",r(r.s=1897)}({0:function(t,r){t.exports=e},1:function(e,r){e.exports=t},106:function(e,t,r){"use strict";r.r(t),r.d(t,"HotKeys",(function(){return S})),r.d(t,"withHotKeys",(function(){return j})),r.d(t,"FocusTrap",(function(){return w})),r.d(t,"HotKeyMapMixin",(function(){return x}));var n=r(2),o=r.n(n),i=r(0),a=r.n(i),u=r(20),c=r.n(u),l=r(6),s=r.n(l),f=r(63),d=r.n(f),p=r(64),m=r.n(p),y=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},g=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},_=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},w=function(e){function t(){return y(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,i.Component),v(t,[{key:"render",value:function(){var e=this.props,t=e.component,r=e.children,n=g(e,["component","children"]);return a.a.createElement(t,b({tabIndex:"-1"},n),r)}}]),t}();function O(e,t){return!c()(e,t)}w.propTypes={onFocus:o.a.func,onBlur:o.a.func,component:o.a.oneOfType([o.a.func,o.a.string]),children:o.a.node},w.defaultProps={component:"div"};var S=function(e){function t(e,r){y(this,t);var n=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.onFocus=n.onFocus.bind(n),n.onBlur=n.onBlur.bind(n),n}return h(t,i.Component),v(t,[{key:"getChildContext",value:function(){return{hotKeyParent:this,hotKeyMap:this.__hotKeyMap__}}},{key:"componentWillMount",value:function(){this.updateMap()}},{key:"updateMap",value:function(){var e=this.buildMap();return!c()(e,this.__hotKeyMap__)&&(this.__hotKeyMap__=e,!0)}},{key:"buildMap",value:function(){var e=this.context.hotKeyMap||{},t=this.props.keyMap||{};return b({},e,t)}},{key:"getMap",value:function(){return this.__hotKeyMap__}},{key:"componentDidMount",value:function(){var e=r(107);this.__mousetrap__=new e(this.props.attach||s.a.findDOMNode(this)),this.updateHotKeys(!0)}},{key:"componentDidUpdate",value:function(e){this.updateHotKeys(!1,e)}},{key:"componentWillUnmount",value:function(){this.context.hotKeyParent&&this.context.hotKeyParent.childHandledSequence(null),this.__mousetrap__&&this.__mousetrap__.reset()}},{key:"updateHotKeys",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.props.handlers,n=void 0===r?{}:r,o=t.handlers,i=void 0===o?n:o,a=this.updateMap();(e||a||O(n,i))&&(this.context.hotKeyParent&&this.context.hotKeyParent.childHandledSequence(null),this.syncHandlersToMousetrap())}},{key:"syncHandlersToMousetrap",value:function(){var e=this,t=this.props.handlers,r=void 0===t?{}:t,n=this.getMap(),o=[],i=this.__mousetrap__;Object.keys(r).forEach((function(t){var i=r[t];(function(e,t){var r=e[t];return r?Array.isArray(r)?r:[r]:[t]})(n,t).forEach((function(t){var r=void 0;m()(t)&&(r=t.action,t=t.sequence),o.push({callback:function(t,r){if((d()(e.props.focused)?e.props.focused:e.__isFocused__)&&r!==e.__lastChildSequence__)return e.context.hotKeyParent&&e.context.hotKeyParent.childHandledSequence(r),i(t,r)},action:r,sequence:t})}))})),i.reset(),o.forEach((function(e){var t=e.sequence,r=e.callback,n=e.action;return i.bind(t,r,n)}))}},{key:"childHandledSequence",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.__lastChildSequence__=e,this.context.hotKeyParent&&this.context.hotKeyParent.childHandledSequence(e)}},{key:"render",value:function(){var e=this.props,t=(e.keyMap,e.handlers,e.focused,e.attach,e.children),r=g(e,["keyMap","handlers","focused","attach","children"]);return a.a.createElement(w,b({},r,{onFocus:this.onFocus,onBlur:this.onBlur}),t)}},{key:"onFocus",value:function(){var e;this.__isFocused__=!0,this.props.onFocus&&(e=this.props).onFocus.apply(e,arguments)}},{key:"onBlur",value:function(){var e;this.__isFocused__=!1,this.props.onBlur&&(e=this.props).onBlur.apply(e,arguments),this.context.hotKeyParent&&this.context.hotKeyParent.childHandledSequence(null)}}]),t}();S.propTypes={keyMap:o.a.object,handlers:o.a.object,focused:o.a.bool,attach:o.a.any,children:o.a.node,onFocus:o.a.func,onBlur:o.a.func},S.childContextTypes={hotKeyParent:o.a.any,hotKeyMap:o.a.object},S.contextTypes={hotKeyParent:o.a.any,hotKeyMap:o.a.object};var j=function(e){return function(t){return function(r){function n(e){y(this,n);var t=_(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t._setRef=t._setRef.bind(t),t.state={handlers:{}},t}return h(n,i.PureComponent),v(n,[{key:"componentDidMount",value:function(){this.setState({handlers:this._ref.hotKeyHandlers})}},{key:"_setRef",value:function(e){this._ref=e}},{key:"render",value:function(){var r=this.state.handlers;return a.a.createElement(S,{component:"document-fragment",keyMap:e,handlers:r},a.a.createElement(t,b({ref:this._setRef},this.props)))}}]),n}()}};function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{contextTypes:{hotKeyMap:o.a.object},childContextTypes:{hotKeyMap:o.a.object},getChildContext:function(){return{hotKeyMap:this.__hotKeyMap__}},componentWillMount:function(){this.updateMap()},updateMap:function(){var e=this.buildMap();return!c()(e,this.__hotKeyMap__)&&(this.__hotKeyMap__=e,!0)},buildMap:function(){var t=this.context.hotKeyMap||{},r=this.props.keyMap||{};return b({},t,e,r)},getMap:function(){return this.__hotKeyMap__}}}},107:function(e,t,r){var n;!function(o,i,a){if(o){for(var u,c={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},l={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},s={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},f={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},d=1;d<20;++d)c[111+d]="f"+d;for(d=0;d<=9;++d)c[d+96]=d.toString();h.prototype.bind=function(e,t,r){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,r),this},h.prototype.unbind=function(e,t){return this.bind.call(this,e,(function(){}),t)},h.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},h.prototype.reset=function(){return this._callbacks={},this._directMap={},this},h.prototype.stopCallback=function(e,t){if((" "+t.className+" ").indexOf(" mousetrap ")>-1)return!1;if(function e(t,r){return null!==t&&t!==i&&(t===r||e(t.parentNode,r))}(t,this.target))return!1;if("composedPath"in e&&"function"==typeof e.composedPath){var r=e.composedPath()[0];r!==e.target&&(t=r)}return"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},h.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},h.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(c[t]=e[t]);u=null},h.init=function(){var e=h(i);for(var t in e)"_"!==t.charAt(0)&&(h[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},h.init(),o.Mousetrap=h,e.exports&&(e.exports=h),void 0===(n=function(){return h}.call(t,r,t,e))||(e.exports=n)}function p(e,t,r){e.addEventListener?e.addEventListener(t,r,!1):e.attachEvent("on"+t,r)}function m(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return c[e.which]?c[e.which]:l[e.which]?l[e.which]:String.fromCharCode(e.which).toLowerCase()}function y(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function v(e,t,r){return r||(r=function(){if(!u)for(var e in u={},c)e>95&&e<112||c.hasOwnProperty(e)&&(u[c[e]]=e);return u}()[e]?"keydown":"keypress"),"keypress"==r&&t.length&&(r="keydown"),r}function b(e,t){var r,n,o,i=[];for(r=function(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus")).split("+")}(e),o=0;o<r.length;++o)n=r[o],f[n]&&(n=f[n]),t&&"keypress"!=t&&s[n]&&(n=s[n],i.push("shift")),y(n)&&i.push(n);return{key:n,modifiers:i,action:t=v(n,i,t)}}function h(e){var t=this;if(e=e||i,!(t instanceof h))return new h(e);t.target=e,t._callbacks={},t._directMap={};var r,n={},o=!1,a=!1,u=!1;function c(e){e=e||{};var t,r=!1;for(t in n)e[t]?r=!0:n[t]=0;r||(u=!1)}function l(e,r,o,i,a,u){var c,l,s,f,d=[],p=o.type;if(!t._callbacks[e])return[];for("keyup"==p&&y(e)&&(r=[e]),c=0;c<t._callbacks[e].length;++c)if(l=t._callbacks[e][c],(i||!l.seq||n[l.seq]==l.level)&&p==l.action&&("keypress"==p&&!o.metaKey&&!o.ctrlKey||(s=r,f=l.modifiers,s.sort().join(",")===f.sort().join(",")))){var m=!i&&l.combo==a,v=i&&l.seq==i&&l.level==u;(m||v)&&t._callbacks[e].splice(c,1),d.push(l)}return d}function s(e,r,n,o){t.stopCallback(r,r.target||r.srcElement,n,o)||!1===e(r,n)&&(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}(r),function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}(r))}function f(e){"number"!=typeof e.which&&(e.which=e.keyCode);var r=m(e);r&&("keyup"!=e.type||o!==r?t.handleKey(r,function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}(e),e):o=!1)}function d(e,t,i,a){function l(t){return function(){u=t,++n[e],clearTimeout(r),r=setTimeout(c,1e3)}}function f(t){s(i,t,e),"keyup"!==a&&(o=m(t)),setTimeout(c,10)}n[e]=0;for(var d=0;d<t.length;++d){var p=d+1===t.length?f:l(a||b(t[d+1]).action);v(t[d],p,a,e,d)}}function v(e,r,n,o,i){t._directMap[e+":"+n]=r;var a,u=(e=e.replace(/\s+/g," ")).split(" ");u.length>1?d(e,u,r,n):(a=b(e,n),t._callbacks[a.key]=t._callbacks[a.key]||[],l(a.key,a.modifiers,{type:a.action},o,e,i),t._callbacks[a.key][o?"unshift":"push"]({callback:r,modifiers:a.modifiers,action:a.action,seq:o,level:i,combo:e}))}t._handleKey=function(e,t,r){var n,o=l(e,t,r),i={},f=0,d=!1;for(n=0;n<o.length;++n)o[n].seq&&(f=Math.max(f,o[n].level));for(n=0;n<o.length;++n)if(o[n].seq){if(o[n].level!=f)continue;d=!0,i[o[n].seq]=1,s(o[n].callback,r,o[n].combo,o[n].seq)}else d||s(o[n].callback,r,o[n].combo);var p="keypress"==r.type&&a;r.type!=u||y(e)||p||c(i),a=d&&"keydown"==r.type},t._bindMultiple=function(e,t,r){for(var n=0;n<e.length;++n)v(e[n],t,r)},p(e,"keypress",f),p(e,"keydown",f),p(e,"keyup",f)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},11:function(e,t){e.exports=o},13:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n={form:"form",cardTable:"cardTable",editTable:"editTable"}},16:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(1);function o(e){var t=e.querySelector("div");if(t&&t.attributes){var r=Object.values(t.attributes).find((function(e){if(e&&e.value.startsWith(n.config.hotKeyModuleIdPrefix))return e}));return r&&r.value}}},17:function(e,t,r){"use strict";r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return y}));var n=r(16),o=r(49),i=r(33),a=r(9),u=r(13),c=r(1);function l(e){var t=e.eventTarget,r=e.ViewModel,o=e.moduleId,a=e.orderOfHotKey,u="TD"===t.tagName?t:s(t);if(u){var l=u.nextElementSibling,v=u.parentElement,b=f(v),h=l&&l.querySelector('[tabindex="0"]');if(b!==u)if(null===h||Object(i.a)(h))d({td:l,ViewModel:r,moduleId:o,orderOfHotKey:a});else{var g=Object(n.a)(l);g&&(r.enterTriggerCellId=g),y({div:h,ViewModel:r})}else v===v.parentElement.lastElementChild?function(e){var t=e.currentModuleId,r=e.ViewModel,o=e.orderOfHotKey;o&&0===o.length?function(e){var t=e.currentModuleId,r=e.ViewModel,o="".concat(c.config.hotKeyModuleIdPrefix,"-").concat(t),i=document.querySelector("#".concat(o," table tbody tr")).querySelectorAll("td"),a=Array.prototype.find.call(i,(function(e){return null!==e.querySelector('[tabindex="0"]')})),u=Object(n.a)(a);u&&(r.enterTriggerCellId=u);var l=a.querySelector('[tabindex="0"]');l&&y({div:l,ViewModel:r})}({currentModuleId:t,ViewModel:r}):o&&m({currentModuleId:t,ViewModel:r,orderOfHotKey:o})}({currentModuleId:o,ViewModel:r,orderOfHotKey:a}):p({tr:v,ViewModel:r,moduleId:o,orderOfHotKey:a})}else console.warn("not find parentTd, next hotkey invalid")}function s(e){for(;e.parentElement;)if("TD"===(e=e.parentElement).tagName)return e;return null}function f(e){return e.lastElementChild.className.includes("fixed")?e.lastElementChild.previousElementSibling:e.lastElementChild}function d(e){var t=e.td,r=e.ViewModel,o=e.moduleId,a=e.orderOfHotKey,u=t.nextElementSibling,c=u&&u.parentElement,l=c&&f(c),s=t.querySelector('[tabindex="0"]'),m=u&&u.querySelector('[tabindex="0"]');if(l===u&&null===m||l===t&&null===s)p({tr:c,ViewModel:r,moduleId:o,orderOfHotKey:a});else if(null===m||Object(i.a)(m))d({td:u,ViewModel:r,moduleId:o,orderOfHotKey:a});else{var v=Object(n.a)(u);v&&(r.enterTriggerCellId=v),y({div:m,ViewModel:r})}}function p(e){var t=e.tr,r=e.ViewModel,o=e.moduleId,i=e.orderOfHotKey,a=t&&t.nextElementSibling;if(null!==a)if("-1"!==a.getAttribute("tabindex")){var u=a.querySelector('td [tabindex="0"]'),c=s(u),l=Object(n.a)(c);l&&(r.enterTriggerCellId=l),y({div:u,ViewModel:r})}else p({tr:a,ViewModel:r,moduleId:o,orderOfHotKey:i});else i&&m({currentModuleId:o,ViewModel:r,orderOfHotKey:i})}function m(e){var t=e.currentModuleId,r=e.ViewModel,i=e.orderOfHotKey,c=function(e,t){var r=t.length,n=t.indexOf(e)+1===r?0:t.indexOf(e)+1;return t[n]}(t,i),l=a.d[c];if(void 0!==l){var f=l.type;if(f===u.a.cardTable||f===u.a.editTable){var p=a.d[l.activeTable],m=document.querySelector("div[".concat(p.firstItem,"]")),v=m.querySelector('[tabindex="0"]');if(null===v){d({td:m.parentElement,ViewModel:r,moduleId:p.moduleId,orderOfHotKey:i})}else{var b=s(v),h=Object(n.a)(b);h&&(r.enterTriggerCellId=h),y({div:v,ViewModel:r})}}else Object(o.b)(l,c)}}function y(e){var t=e.div,r=e.ViewModel;null!==t&&(r.shouldAutoFocus=!0,t.ncExecuteFocus=!0,t.focus(),delete t.ncExecuteFocus)}},1780:function(e,t,r){},1897:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),i=r(5),a=r.n(i),u=r(11);function c(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var o=w(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _(this,r)}}function _(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(r,e);var t=g(r);function r(){var e;b(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).store={},e.items="_FORM_ITEMS_",e.layout=Symbol("form layout"),e.status=Symbol("form status"),e.getHooks=function(){return{getItemValue:e.getItemValue,getAllFormValue:e.getAllFormValue,setItemValue:e.setItemValue,setAllFormValue:e.setAllFormValue,setCtx:e.setCtx,reset:e.reset,setWrapper:e.setWrapper,getStatus:e.getStatus,setStatus:e.setStatus,closeArea:e.closeArea,openArea:e.openArea,emptyAllFormValue:e.emptyAllFormValue,setMeta:e.setMeta,cancel:e.cancel,countFormWidth:e.countFormWidth,setItemAttribute:e.setItemAttribute,getItemAttribute:e.getItemAttribute,isCheckNow:e.isCheckNow,replaceItem:e.replaceItem,getMetaItems:e.getMetaItems,getOldValue:e.getOldValue,setOldValue:e.setOldValue,forceUpdate:e.forceUpdate,setAreaVisible:e.setAreaVisible,getAreaVisible:e.getAreaVisible,getInnerHooks:e.getInnerHooks}},e.getInnerHooks=function(){return{setInitialValues:e.setInitialValues,getItem:e.getItem,getStore:e.getStore,setStore:e.setStore,getSingleForm:e.getSingleForm,getFormItem:e.getFormItem,getAllFormItem:e.getAllFormItem,getFormRelations:e.getFormRelations,getFormList:e.getFormList,getLayout:e.getLayout,setLayout:e.setLayout,getFormTabs:e.getFormTabs,setFormTabs:e.setFormTabs,countFormWidth:e.countFormWidth,setJson:e.setJson,getJson:e.getJson,getReplaceItem:e.getReplaceItem,initMeta:e.initMeta}},e.getStore=function(t){return e.get(t)},e.setStore=function(t,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=e.set(t,r);return n&&e.forceUpdate(),o},e.setInitialValues=function(t,r){if(t&&0!==Object.keys(t).length){var n=t.formrelation,o=t.formassociatedrelation,i=t.pageid,a=!1,u=[r],c=[r],l={},s={},f={};if(o&&o.hasOwnProperty(r)&&Array.isArray(o[r].formtabs)&&(u=c=o[r].formtabs,a=!0),n)if(a){var d=[];u.map((function(e){d.push(e),Array.isArray(n[e])&&(d=d.concat(n[e]),l[e]=n[e])})),u=d}else Array.isArray(n[r])&&(u=u.concat(n[r]));u.forEach((function(n){if("form"===t[n].moduletype){var o,i,a=t[n],u=a.items,c=a.status,l=a.isunfold,d=a.areaVisible,p=v(a,["items","status","isunfold","areaVisible"]);r===n&&(f[e.status]||(f[e.status]=e.getStore([e.status])||c||"browse")),f[n]=m(m({},p),{},{items:[],isunfold:null!==(o=e.getStore([n,"__dirty__"]))&&void 0!==o&&o.hasOwnProperty("isunfold")?e.getStore([n,"isunfold"]):l,areaVisible:null!==(i=e.getStore([n,"__dirty__"]))&&void 0!==i&&i.hasOwnProperty("areaVisible")?e.getStore([n,"areaVisible"]):d,__dirty__:e.getStore([n,"__dirty__"])});var y=e.getStore([e.items]);u.forEach((function(t){if(t.belongTo=n,e.getStore([e.items,t.attrcode,"fieldValue"]))t.fieldValue=e.getStore([e.items])[t.attrcode]&&e.getStore([e.items])[t.attrcode].fieldValue;else{var r=null;"add"===f[e.status]&&(r=t.initialvalue||null),r="checkbox_switch"===t.itemtype||"switch"===t.itemtype?r||{display:(e.getStore(["json"])||{})["page-form-0004"],value:!1}:"switch_browse"===t.itemtype?r||{value:!1}:r||{display:null,value:null},t.fieldValue=r,t.formOldValues=r.value?{value:r.value}:{value:null},t.formBack=r,"residtxt"===t.itemtype&&Array.isArray(t.languageMeta)&&t.languageMeta.map((function(e){var r="1"==e.index?"":e.index;return t.attrcode+r})).forEach((function(e){e!==t.attrcode&&(s[e]={fieldValue:{display:"",value:""}})}))}t.disabled,t.visible,t.required,t.verify;var o=v(t,["disabled","visible","required","verify"]);s[t.attrcode]=m(m({__origin__:{}},null==y?void 0:y[t.attrcode]),o),["disabled","visible","required","verify"].forEach((function(r){var n;e.getStore([e.items,t.attrcode,"__dirty__",r])?s[t.attrcode][r]=null==y||null===(n=y[t.attrcode])||void 0===n?void 0:n[r]:s[t.attrcode][r]=t[r];s[t.attrcode].__origin__[r]=t[r]})),t.verify=!0,f[n].items.push(t.attrcode)}))}})),f[e.items]=m(m({},e.getStore([e.items])||{}),s),f[e.layout]=e.getStore([e.layout])||{width:50,column:2},f.formList=u,f.tabsId=c,f.mainId=r,f.formRelation=l,f.activeTab=c[0],f.isTabsForm=a,f.pageid=i,e.store=Object.assign(e.store,f),e.hasRender=!0,console.log("Form ".concat(r,"'s store: "),e.store)}},e.getStatus=function(){return e.get([e.status])},e.setStatus=function(t){return e.setStore([e.status],t)},e.getLayout=function(){return e.get([e.layout])},e.setLayout=function(t){return e.setStore([e.layout],t)},e.getSingleForm=function(t){return e.get([t,"items"])},e.getFormItem=function(t){return e.get([e.items,t])},e.getAllFormItem=function(){return e.get([e.items])},e.getFormRelations=function(){return e.get("formRelation")},e.getFormList=function(){return e.get("formList")},e.setFormTabs=function(t){return e.setStore(["activeTab"],t)},e.getFormTabs=function(){return e.get(["activeTab"])},e.countFormWidth=function(t,r){if(!r){var n=e.get(["mainId"]),o=document.getElementById(n);o&&(r=o.offsetWidth)}var i={width:50,column:2};if(r){var a=50,u=2;r<600&&(a=100,u=1),r>=600&&r<900&&(a=50,u=2),r>=900&&r<1230&&(a=33.333333,u=3),r>=1230&&r<1820&&(a=25,u=4),r>=1820&&(a=20,u=5),i.width=a,i.column=u,e.setLayout(i)}},e.setJson=function(t){e.setStore(["json"],t)},e.getJson=function(){return e.get(["json"])||{}},e.getItemValue=function(t,r){var n;if(r){var o=e.get([e.items,t,"languageMeta"]);o?(n={},o.forEach((function(r){var o="1"===r.index?"":r.index;n[t+o]=e.get([e.items,t+o,"fieldValue"])||{display:null,value:null}}))):n=e.get([e.items,t,"fieldValue"])||{display:null,value:null}}else n=e.get([e.items,t,"fieldValue"])||{display:null,value:null};return n},e.setItemValue=function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.cancel,i=n.inner,a=void 0!==i&&i,u=e.getStore([e.items,t,"fieldValue"]),c=e.setStore([e.items,t,"fieldValue"],r,!1);return a||(e.setOldValue(t,u),o||e.setStore([e.items,t,"formBack"],r,!1)),e.updateItem([t]),c},e.getOldValue=function(t){return e.getStore([e.items,t,"formOldValues"])},e.setOldValue=function(t,r){e.setStore([e.items,t,"formOldValues"],r,!1)},e.setItemAttribute=function(t,r,n){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(r&&"object"===d(r)){var i=r;r=t;for(var a=0,u=Object.keys(i);a<u.length;a++){var c=u[a];e.setItemAttribute(c,r,i[c],!1)}}else e.get([e.items,t])?(e.setStore([e.items,t,r],n,!1),e.setStore([e.items,t,"__dirty__",r],!0,!1)):console.warn("form"+t+"不存在");o&&e.forceUpdate()},e.getItemAttribute=function(t,r){return e.get([e.items,t,r])},e.setAllFormValue=function(t,r,n,o,i){for(var a=0,u=Object.entries(t);a<u.length;a++){var c=l(u[a],2),s=c[0],f=c[1];e.setItemValue(s,f,{cancel:!1,inner:s===o})}e.forceUpdate(i)},e.getAllFormValue=function(){for(var t={},r=0,n=Object.entries(e.get([e.items])||{});r<n.length;r++){var o=l(n[r],2),i=o[0],a=o[1];i&&(t[i]=a.fieldValue||{display:null,value:null})}return t},e.openArea=function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.setStore([t,"isunfold"],!0,r);return e.setStore([t,"__dirty__","isunfold"],!0,!1),n},e.closeArea=function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.setStore([t,"isunfold"],!1,r);return e.setStore([t,"__dirty__","isunfold"],!1,!1),n},e.setAreaVisible=function(t,r){e.setStore([t,"areaVisible"],r,!0),e.setStore([t,"__dirty__","areaVisible"],!0,!1)},e.getAreaVisible=function(t){return!1!==e.getStore([t,"areaVisible"])},e.isCheckNow=function(){var t="",r="",n=e.getStore("tabsId"),o=e.getStore("formRelation"),i=e.getStore([e.items]),a=[],u=[],l=[],s=["switch","switch_browse","radio","checkbox_switch"],f=["input","number","textarea"],d=[],p=new Set,m=!1;return(e.getStore(["formList"])||[]).forEach((function(t){e.getAreaVisible(t)&&(d=d.concat(e.getStore([t]).items||[]))})),d.forEach((function(r){var n=i[r],o=n.label,c=n.required,d=n.visible,m=n.belongTo,y=n.reg,v=n.fieldValue,b=n.itemtype,h=n.maxlength;if(d){var g=null==v?void 0:v.value,_=!1;c&&[null,void 0,""].includes(g)&&!s.includes(b)&&(_=!0,a.push(o)),g&&y&&!y.test(g)&&(_=!0,u.push(o)),h&&f.includes(b)&&g&&String(g).length>h&&(_=!0,l.push(o)),e.setStore([e.items,r,"verify"],!_,!1),_&&(t||(t=m),p.add(m))}})),r=n.includes(t)?t:n.find((function(e){return Array.isArray(o[e])&&o[e].includes(t)})),c(p).forEach((function(t){m=!0,e.openArea(t,!1)})),r&&e.setStore("activeTab",r,!1),e.forceUpdate(),{requiredItems:a,regItems:u,maxItems:l,hasError:m}},e.cancel=function(){for(var t=e.get([e.items])||{},r=0,n=Object.keys(t);r<n.length;r++){var o=n[r];e.setStore([e.items,o,"fieldValue"],e.get([e.items,o,"formBack"]),!1),e.setStore([e.items,o,"verify"],!0,!1)}e.setStore([e.status],"browse",!1),e.forceUpdate()},e.emptyAllFormValue=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=["switch","switch_browse","checkbox_switch"],o=e.get([e.items]);o&&Object.keys(o).forEach((function(i){var a=e.getStore([e.items,i,"initialvalue"]);t.includes(i)||(n.includes(o[i].itemtype)?e.setStore([e.items,i,"fieldValue"],a||{value:!1,display:"否"},!1):e.setStore([e.items,i,"fieldValue"],a||{value:null,display:null},!1),r&&e.setStore([e.items,i,"formBack"],{value:null,display:null},!1))})),e.forceUpdate()},e.reset=function(){e.store={}},e.getCtx=function(){},e.setCtx=function(t){e.ctx=t},e.setMeta=function(t,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];console.log("Form ".concat(r,"'s meta: "),t);var o=r||e.getStore("mainId");e.setInitialValues(t,o),n&&e.forceUpdate()},e.replaceItem=function(t,r){e.setStore(["replaceItem",t],r)},e.getReplaceItem=function(t){return e.getStore(["replaceItem",t])},e.setWrapper=function(t){e.wrapper=t},e.getMetaItems=function(t){return(e.getStore([t])&&e.getStore([t]).items||[]).map((function(t){var r=e.getStore([e.items,t]),n=(r.__dirty__,r.__origin__,v(r,["__dirty__","__origin__"])),o=["disabled","visible","required","verify"].reduce((function(r,n){return r[n]=e.getStore([e.items,t,"__origin__",n]),r}),{});return m(m({},n),o)}))},e.initMeta=function(){e.store={},e.forceUpdate()},e}return r}(u.BaseStore),S=Object(u.hookFactory)(O);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=P(e);if(t){var o=P(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return E(this,r)}}function E(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?M(e):t}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var K=function(e){return function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(u,t);var r,n,i,a=k(u);function u(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this,e)).refresh=function(){t.setState((function(e){return{resetCount:e.resetCount+1}}))},t.state={resetCount:0},null===t.props.store)throw Error("正在创建formID为".concat(t.props.name,"的表单, 还未通过use.form注册,请先注册此ID"));return t.props.store.setWrapper(M(t)),t}return r=u,(n=[{key:"render",value:function(){var t=this.state.resetCount;return o.a.createElement(e,x({},this.props,{key:t}))}}])&&I(r.prototype,n),i&&I(r,i),u}(n.Component)},C=r(6),A=n.createContext(),V=r(3);function H(e){return-1===e.indexOf(".")?e:e.replace(/\./g,"_")}function F(e){var t=e.visibleState,r=e.moduleId,n=e.attrCode;return t[r]?!1===t[r][n]:!1===t[n]}var q=r(1);function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function D(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var z=["uap/refer/riart/userDefaultRefer/index","uapbd/refer/psninfo/PsndocRiartTreeGridRef/index","uap/refer/riart/userAllTableRef/index","uapbd/refer/psninfo/PsndocTreeGridRef/index"];var $,J=function(e){var t=e.label,r=e.attrcode,i=e.width,a=e.leftSpaceCol,c=e.isnextrow,l=e.singleWidth,s=e.required,f=e.itemtype,d=e.verify,p=e.errorMsg,m=e.errormessage,y=e.languageMeta,v=e.singleFormCode,b=e.hyperlinkflag,h=e.renderStatus,g=e.refpath,_=e.color,w=e.render,O=e.fastToNext,S=e.canBeEditedWhenBrowse,j=e.maxlength,x=Object(n.useContext)(A),I=x.areaId,T=x.form,k=x.onAfterEvent,E=x.onBeforeEvent,M=(x.config,T.getItemValue),P=T.setItemValue,K=T.getStatus,C=T.getInnerHooks,F=T.getAllFormValue,N=T.setOldValue,B=C(),U=B.getJson,$=B.getReplaceItem,J=B.getStore,G=K(),Z=U(),X=!["switch_browse","attachment"].includes(f)&&"browse"===G&&!S,Y=0;c&&(Y=Number(a)*l);var Q="";if(t&&X&&(Q=":"),!1===d&&(X?p=null:0==W(document.querySelectorAll(".refer-pop-window ")).filter((function(e){return"flex"===e.style.display})).length&&(p=o.a.createElement("span",{style:{color:"red",fontSize:"10px"},className:"input-error-message"},m||Z["page-form-0008"]))),e.renderItem=function(e){var t;if(e.isEdit&&(t="edit"===h&&"function"==typeof w?w(M(r),F()):$(r)))return t},"switch_browse"===f){var ee=J(["FormInstance","props","config"]);e.cancelPSwitch=ee.cancelPSwitch,e.disabled=ee.editSwitch?e.disabled:"browse"!==G||e.disabled}"attachment"===f&&(e.disableModify="browse"!==G||e.disabled);var te,re=o.a.createElement("div",{className:"form-item-errormsg"},p),ne=!1;"refer"===f&&(M(r)||{}).value&&window.top.ImTool&&z.includes(g)&&(ne=!0),"number"===f&&(null!=(te=(M(r)||{}).scale)&&"-1"!=te&&-1!=te||(te=e.scale),null!=te&&"-1"!=te&&-1!=te||(te=0),e.scale=Number(te));var oe=o.a.createElement(u.Item,R({},e,{useTitle:!0,placeholder:"",browse:X,maxlength:j,isCheckChinese:!!j,setFieldValue:function(t){var r,n=t.value,o=t.attrcode,i=t.componentValue;if(r="refer"===e.itemtype?L(L({},n),i):n,"input"===f&&["vchangerate","vqtunitrate"].includes(o)){var a;if(null!==(a=r)&&void 0!==a&&a.value&&!/^[0-9\/\.]+$/.test(r.value))return}P(o,r,{inner:!0})},getFieldValue:function(e){var t=e.attrcode,r=M(t);return["checkbox_switch","switch","switch_browse"].includes(f)&&X&&(r.display=r.value?Z["page-form-0007"]:Z["page-form-0004"]),r},onBeforeEvent:function(){var t,n=(t=regeneratorRuntime.mark((function t(n){var o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=n.value,i=n.event,"function"!=typeof E){t.next=8;break}return t.next=4,E(I,r,o,F(),e,i);case 4:return t.t0=t.sent,t.abrupt("return",!1!==t.t0);case 8:return t.abrupt("return",!0);case 9:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(e){D(i,n,o,a,u,"next",e)}function u(e){D(i,n,o,a,u,"throw",e)}a(void 0)}))});return function(e){return n.apply(this,arguments)}}(),onAfterEvent:function(t){var n,o=t.value,i=t.oldValue,a=t.componentValue;if("residtxt"===f){if(null===(n=o[r])||void 0===n||!n.value){var u,c=Object(q.getLangCode)(),l=(null===(u=y.find((function(e){return e.languageCode===c})))||void 0===u?void 0:u.index)||"",s=a[r+l];P(r,s)}}else if("input"===f&&["vchangerate","vqtunitrate"].includes(r)){var d;if(null!==(d=o)&&void 0!==d&&d.value&&!/^([1-9][0-9]*|0)(\.\d{1,})?(\/)(([1-9][0-9]*)(\.\d{1,})?|(\d\.\d{1,}))$/.test(o.value)){o={value:""};var p=Z["page-form-0009"],m=Z["page-form-0011"];return Object(q.toast)({mark:"form_onBlur",color:"danger",title:p,content:" ".concat(m,'"1/2"')}),void P(r,o,{inner:!0})}}N(r,i),"function"==typeof k&&k({areaId:I,attrcode:r,curMetaItem:e,value:"refer"==e.itemtype?L(L({},o),a):o,oldValue:i,componentValue:a,allValue:F(),singleFormCode:v})},onEnter:function(e){e.e;window.triggerOnEnter||(console.log("formitem enter trigger@baseComponent"),window.triggerOnEnter=!0,setTimeout((function(){O(r);window.triggerOnEnter=!1}),20))},path:[r]}));X&&"function"==typeof w&&(oe=w(M(r),F()));var ie=H(r);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{style:{width:String(Y)+"%"},className:"leftspace form-item"}),o.a.createElement("div",{style:{width:String(i)+"%"},className:"".concat(ie," js-type-").concat(f," form-item"),fieldid:Object(q.getSysFieldid)(r),hotkeytag:"".concat(v,"-").concat(r)},o.a.createElement("div",{className:"form-item-label",style:{color:_},title:t},!X&&s&&o.a.createElement("span",{className:"u-mast"},"*"),t,o.a.createElement("span",{className:"form-item-colon"},Q)),o.a.createElement(V.Tooltip,{placement:"top",inverse:!0,overlay:re,trigger:["hover","focus"],id:"top",className:"".concat(!1!==d||X?"form-item-hide-tip":"form-item-show-tip")},o.a.createElement("div",{className:"form-item-control ".concat(!1===d?"verify-error":"")},o.a.createElement("div",{className:"form-component-item-wrapper ".concat(f,"-wrapper ").concat(G),onKeyDown:function(e){if("Enter"===e.key){if(window.triggerOnEnter)return;window.triggerOnEnter=!0,e.stopPropagation(),console.log("formitem enter trigger@itemSpan"),setTimeout((function(){O(r);window.triggerOnEnter=!1}),20)}}},X?b?o.a.createElement("a",{style:{cursor:"pointer"},onClick:function(){return function(e,t,r,n,o,i){e&&"browse"===r&&Object(q.linkTo)(n,o,t,i)}(b,r,G,J(["pageid"]),v,(M(r)||{}).value)}},oe):o.a.createElement("span",{className:"form-item-pre"},oe):oe,X&&ne?o.a.createElement("i",{className:"iconfont icon-renyuan imrefer",onClick:function(){return function(e,t){Object(q.ajax)({url:"/nccloud/platform/login/openim.do",data:{userid:e},success:function(e){if(e&&e.data){if(window.top.ImTool&&window.top.ImTool.dispatch("switchChatTo",{yht_id:e.data,type:"chat"}),window.top.document.getElementById("ykj-frame")&&"none"==window.top.document.getElementById("ykj-frame").style.display){var r=window.top.document.getElementById("imBtnForNcc");r&&r.click()}}else e.success&&!e.data&&Object(q.toast)({mark:"userim-wraning",color:"danger",title:t["page-form-0009"],content:t["page-form-0012"]})},error:function(){console.log("IM")}})}((M(r)||{}).value,Z)}}):null)))))},G=r(362);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=ne(e);if(t){var o=ne(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return te(this,r)}}function te(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?re(e):t}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var oe=Object(G.a)($=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(a,e);var t,r,n,i=ee(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).calcWidth=function(){var e,r=t.state.prevWidth,n=null===(e=Object(C.findDOMNode)(re(t)))||void 0===e?void 0:e.offsetWidth;if(r!==(n=n+32+30)){q.PubSub.publishSync("beforeAreaChangeComplete",!0);var o={width:50,column:2};if(n){var i=50,a=2;n<600&&(i=100,a=1),n>=600&&n<=1024&&(i=50,a=2),n>=1025&&n<=1439&&(i=33.333333,a=3),n>=1440&&n<=1919&&(i=25,a=4),n>=1920&&(i=20,a=5),o.width=i,o.column=a,t.setState({layout:o})}t.setState({prevWidth:n},(function(){q.PubSub.publish("areaChangeComplete",!0)}))}},t.renderSingle=function(){var e=t.props,r=e.form,n=e.list,i=void 0===n?[]:n,a=e.name,u=e.fastToNext,c=(e.getHotKeyConfig,r.getInnerHooks()),l=c.getFormItem,s=(c.getLayout,t.state.layout),f=0,d=0,p=0;return(i=i.filter((function(e){return 1==l(e).visible}))).map((function(e,t){var r=l(e),n=s.column,i=1;if(r.colnum&&Number(r.colnum)>1&&(i=r.colnum<n?Number(r.colnum):n),0===t)p=n-i,f=i;else if(d=p,f+=i,i>p||r.isnextrow)f+=p,p=n-i;else{var c=f%n;p=0,0!=c&&(p=n-c)}var m=i*s.width;return o.a.createElement(J,X({},r,{key:r.attrcode,width:m,leftSpaceCol:d,singleWidth:s.width,singleFormCode:a,fastToNext:u}))}))},t.state={layout:{width:50,column:2}},t}return t=a,(r=[{key:"componentDidMount",value:function(){this.calcWidth(),window.addEventListener("resize",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,r=null;return function(){for(var n=this,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];r&&(clearTimeout(r),r=null),r=setTimeout((function(){e.apply(n,i)}),t)}}(this.calcWidth))}},{key:"componentDidUpdate",value:function(){this.calcWidth()}},{key:"render",value:function(){var e=this.props.className;return o.a.createElement("div",{className:"group-form-item lightapp-component-form ".concat(e)},this.renderSingle())}}])&&Y(t.prototype,r),n&&Y(t,n),a}(n.Component))||$,ie=r(361),ae=r(9),ue={refer:function(e,t){var r=document.getElementById("form_".concat(e)),n=r&&r.querySelector(".".concat(t,".form-item")),o=n&&n.querySelector("input[tabindex='0']"),i=n&&n.querySelector("span[tabindex='0']"),a=n&&n.querySelector(".template-item-wrapper[tabindex='0']");a?(a.fromProgram=!0,a.focus(),n=null):o?(o.fromProgram=!0,o.focus(),n=null):i?(i.fromProgram=!0,i.focus(),n=null):n&&n.addEventListener("DOMSubtreeModified",(function e(t){!function(e,t,r){var n=r.target.querySelector("input[tabindex='0']");n&&setTimeout((function(){n.fromProgram=!0,n.focus(),e&&e.removeEventListener("DOMSubtreeModified",t),n=null,e=null}))}(n,e,t)}));o=null,i=null},input:pe,textarea:function(e,t){var r=document.getElementById("form_".concat(e)),n=r&&r.querySelector(".".concat(t,".form-item .template-item-wrapper[tabindex='0']"));n&&(n.fromProgram=!0,n.focus());n=null},select:me,radio:me,checkbox:me,switch:ye,switch_browse:ye,normal:pe},ce=0,le=function(e,t,r){var n=t.disabled||{},o=t.visible||{},i=t.form,a=e.attrcode;return"label"===e.itemtype||(function(e,t){var r=t.attrcode;return!0===e[r]&&(!0===e[r]||!0===t.disabled)}(n,e)||!i[a]||function(e,t,r){return F({visibleState:e,moduleId:r,attrCode:t.attrcode})||!1===t.visible}(o,e,r))},se=function e(t,r){var n=t.indexOf(r);if(-1===n||n===t.length-1)return null;var o=t[n===t.length-1?0:n+1],i=ae.d[o];if(!i||!i.activeTable)return e(t,o);var a=i.activeTable,u=ae.d[a];if(i.type&&"cardTable"===i.type&&a){var c=document.querySelector("#hot-key-".concat(o," #js_cardTable_").concat(o," #js_lightTabs_header_").concat(o," .active a"))||document.querySelector("#hot-key-".concat(o," .active a"));return c?(c.focus(),{type:"table",id:o}):e(t,o)}var l=u.firstItem,s=document.querySelector("div[".concat(l,'] div[tabindex="0"]'));return s?(q.ViewModel.shouldAutoFocus=!0,s.ncExecuteFocus=!0,s.focus(),delete s.ncExecuteFocus,setTimeout((function(){q.ViewModel.shouldAutoFocus=!1}),100),{type:"table",id:o}):e(t,o)},fe=function(e,t,r){return e[t].items.find((function(e,n){return!le(e,r,t)&&e}))},de=function(e,t){var r=H(e.attrcode);void 0===ue[e.itemtype]?ue.normal(t,r):ue[e.itemtype](t,r)};function pe(e,t){var r=document.getElementById("form_".concat(e)),n=r&&r.querySelector(".".concat(t,".form-item .template-item-wrapper[tabindex='0']"));n&&(n.fromProgram=!0,n.focus()),n=null}function me(e,t){var r=document.getElementById("form_".concat(e)),n=r&&r.querySelector(".".concat(t,".form-item")),o=n&&n.querySelector(".template-item-wrapper[tabindex='0']")||n.querySelector("input");o&&(o.fromProgram=!0,o.focus()),n=null,o=null}function ye(e,t){var r=document.getElementById("form_".concat(e)),n=r&&r.querySelector(".".concat(t,".form-item .template-item-wrapper[tabindex='0']"));n&&(n.fromProgram=!0,n.focus()),n=null}var ve,be=function e(t){var r=t.states,n=t.meta,o=t.moduleId,i=t.attrcode,a=t.head,u=t.formrelation,c=void 0===u?[]:u,l=t.orderOfHotKey,s=void 0===l?[]:l,f=t.opened;if(!r||!n)return{type:"other",id:o};var d=null;if(!i&&void 0!==f){var p=o===a?0:c.indexOf(o)+1,m=c[p];if(!0===f)return(d=fe(n,o,r))?{type:"form",item:d,last:!0,id:o}:e({states:r,meta:n,moduleId:o,attrcode:i,head:a,formrelation:c,orderOfHotKey:s,opened:!1});if(m&&!0!==f)return{type:"icon",id:m};if(!m&&!0!==f){var y=se(s,a);return d=fe(n,a,r),!y&&d?{type:"form",last:!0,item:d,id:a}:y||e({})}}if(d=function(e){var t=e.states,r=e.meta,n=e.moduleId,o=e.attrcode,i=null,a=99999,u=r[n].items,c=u.length,l=(t||{}).disabled||{},s=(t||{}).visible||{};return u.find((function(e,r){if(c===r+1)return!1;if(e.attrcode==o||r===a){if(i=u[r+1],!(le(i,t,n)||"label"===i.itemtype||!1===i.visible&&F({visibleState:s,moduleId:n,attrCode:i.attrcode})||!0===i.disabled&&!1!==l[i.attrcode]))return!0;a=r+1,i=null}return!1})),i}({states:r,meta:n,moduleId:o,attrcode:i}))return{type:"form",item:d,id:o};var v=c.length,b=0===s.length||1===s.length&&s[0]===a,h=0===v;if(a===o&&h&&b||c[v-1]===o&&b)return console.log("只有单表 没有分组和表格 或者 没有表格 当前为最后一个表单分组， 跳转到首个表单！！"),(d=fe(n,a,r))?{type:"form",last:!0,item:d,id:a}:{}||e({});if(h&&!b||c[v-1]===o&&!b){console.log("当前主表单  并且没有子表单分组  有表格区 或者 最后一个子表单 有表格区域, 跳转到表格区");var g=se(s,a);return d=fe(n,a,r),!g&&d?{type:"form",last:!0,item:d,id:a}:g||e({})}if(v>0&&c.indexOf(o)!==v-1){var _,w,O=o;return _=O===a?0:c.indexOf(O)+1,(w=c[_])?{type:"icon",id:w}:{}||e({})}return null},he=function(e){var t=e.states,r=e.meta,n=e.moduleId,o=e.attrcode,i=e.head,a=e.formrelation,u=void 0===a?[]:a,c=e.orderOfHotKey,l=void 0===c?[]:c,s=e.opened,f=e.onLastFormEnter,d=be({states:t,meta:r,moduleId:n,attrcode:o,head:i,formrelation:u,orderOfHotKey:l,opened:s});if(!d)return null;if(!0===d.last&&f)return console.log("form last",d),"function"==f&&!1===f();if("form"===d.type){if(console.log("form",d),8===ce)return document.activeElement.blur(),console.log(ce),void setTimeout((function(){return ce=0}),500);de(d.item,d.id),function(e){ae.d[e.id]&&ae.d[e.id].firstItem===e.item.attrcode&&ce++}(d)}if("icon"===d.type){console.log("icon",d);var p=document.querySelector("#toggleIcon2".concat(d.id));p&&p.focus()}return"other"===d.type&&function e(t){if(!t)return!1;var r=t.querySelector('input,a,textarea,[tabindex]:not([tabindex="-1"]');if(!r)return e(r.nextElementSibling||r.parentElement);r.focus()}(document.activeElement),d};function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e){return function(e){if(Array.isArray(e))return we(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return we(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return we(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Te(e);if(t){var o=Te(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return xe(this,r)}}function xe(e,t){return!t||"object"!==ge(t)&&"function"!=typeof t?Ie(e):t}function Ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}r(1780);var ke=V.Tabs.TabPane,Ee={nextTabHandler:["shift+right"],prevTabHandler:["shift+left"]};var Me=Object(u.ItemProvider)(ve=K(ve=Object(ie.a)(ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(u,e);var t,r,n,i=je(u);function u(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).fastToNext=function(e,r,n,o){var i=t.props.getHotKeyConfig,a=(void 0===i?function(){}:i)()||{},u=a.meta,c=a.orderOfHotKey,l=a.onLastFormEnter,s=e.getInnerHooks(),f=s.getStore,d=s.getAllFormItem,p=f("mainId"),m=d()||{},y={disabled:{},visible:{},form:{}};for(var v in m){var b=m[v];y.disabled[b.attrcode]=!!b.disabled,y.visible[b.attrcode]=!!b.visible,y.form[b.attrcode]=b}var h={states:y,meta:u,moduleId:r,attrcode:n,head:p||r,formrelation:u&&u.formrelation?u.formrelation[p||r]:[p||r],orderOfHotKey:c,onLastFormEnter:l,opened:o};he(h)},t.toggleArea=function(e,r){var n=t.props.store,o=n.openArea,i=n.closeArea;q.PubSub.publishSync("beforeAreaChangeComplete",!0),r?i(e):o(e),setTimeout((function(){q.PubSub.publish("areaChangeComplete",!0)}),0)},t.renderForm=function(e){var r=t.props,n=r.store,i=r.name,u=r.config,c=r.getHotKeyConfig,l=n.getInnerHooks(),s=l.getStore,f=l.getJson,d=l.getSingleForm,p=l.getFormItem,m=s(["isTabsForm"]),y=f(),v=[],b=e||i;if(e){var h=s(["formRelation"])[e];v=Array.isArray(h)?[e].concat(h):[e]}else v=s(["formList"])||[];return o.a.createElement("div",{className:"group-form-wrapper"},v.map((function(e){var r=d(e)||[];r=r.filter((function(e){return 1==(p(e)||{}).visible}));var l=s([e,"areaVisible"]);if((l=void 0===l||l)&&0!==r.length){var f=s([e,"isunfold"]);f=!!(s(["tabsId"])||[]).includes(e)||(void 0===f||f);var v=a()({"show-form":f,"hide-form":!f}),h=a()({rightForm:e==i&&u&&u.headLeftArea&&"function"==typeof u.headLeftArea}),g=m&&b===e?o.a.Fragment:V.ScrollElement;return o.a.createElement(o.a.Fragment,null,o.a.createElement(g,{name:e},o.a.createElement("div",{className:"group-form-wrapper cf",id:"form_".concat(e)},e==i&&u&&u.headLeftArea&&"function"==typeof u.headLeftArea&&o.a.createElement("div",{className:"left-defined-area"},u.headLeftArea()),b!==e&&o.a.createElement("div",{className:"group-form-name"},o.a.createElement("div",{className:"operator",fieldid:Object(q.getSysFieldid)("".concat(b&&e,"_group")),tabIndex:0,id:"toggleIcon2".concat(e),onClick:t.toggleArea.bind(Ie(t),e,f),onKeyDown:function(r){32===r.keyCode&&(r.preventDefault(),r.target.click()),13===r.keyCode&&(r.preventDefault(),t.fastToNext(n,e,null,f))}},o.a.createElement(V.Tooltip,{placement:"top",overlay:f?y["form-group-close"]:y["form-group-expand"],delayHide:1,delayShow:1e3},o.a.createElement("span",{className:"name"},o.a.createElement("span",{className:"name-icon"},f?"-":"+"),s([e,"name"]))),o.a.createElement("span",{className:"line-wrap"},o.a.createElement("span",{className:"line"})))),f&&o.a.createElement("div",{className:"group-form-item ".concat(v," ").concat(h)},e==i&&u&&u.headTopArea&&"function"==typeof u.headTopArea&&o.a.createElement("div",{className:"top-defined-area"},u.headTopArea()),o.a.createElement(oe,{form:n,name:e,className:v,list:r,fastToNext:function(r){t.fastToNext(n,e,r)},getHotKeyConfig:c})))))}})))},t.renderTabForm=function(){var e=t.props.store,r=e.getInnerHooks(),n=r.getStore,i=r.getFormTabs,a=r.setFormTabs,u=r.getSingleForm,c=r.getFormItem,l=r.getFormRelations,s=n(["tabsId"]),f=i(),d=l(),p=e.getStatus();return o.a.createElement(V.HotKeys,{keyMap:Ee,handlers:{nextTabHandler:function(){var e=s.indexOf(f)+1;e>s.length-1&&(e=0),a(s[e])},prevTabHandler:function(){var e=s.indexOf(f)-1;e<0&&(e=s.length-1),a(s[e])}}},s.reduce((function(e,t){return o.a.createElement(V.ScrollElement,{name:t,id:t},e)}),o.a.createElement(V.Tabs,{activeKey:f,onChange:function(e){return a(e)}},s.map((function(e){var r=d[e]||[],i=!1,a=!1;return"browse"!==p&&[e].concat(_e(r)).some((function(e){return u(e).some((function(e){var t=c(e);return t.visible&&!t.disabled&&(i=!0),!1===t.verify&&(a=!0),i&&a}))})),o.a.createElement(ke,{key:e,tab:o.a.createElement("div",null,i&&o.a.createElement("i",{className:"iconfont icon-yebj"}),n([e]).name,a&&o.a.createElement("i",{className:"iconfont icon-djgantanhao"}))},t.renderForm(e))})))))},t.renderDom=function(){return(0,t.props.store.getInnerHooks().getStore)(["isTabsForm"])?t.renderTabForm():t.renderForm()};var r=e.store,n=(e.config,e.name);if(n&&r){var c=r.getInnerHooks().setStore;c(["mainId"],n,!1),c(["FormInstance"],Ie(t),!1)}return t.prevFormHeight=0,t.state={prevWidth:""},t.uniqueKey="xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Object(q.getSafeRandom)()|0;return("x"==e?t:3&t|8).toString(16)})),window[t.uniqueKey]=r.getInstance(),t}return t=u,(r=[{key:"UNSAFE_componentWillMount",value:function(){var e=this.props.store.getInnerHooks().setJson;Object(q.getMultiLang)({moduleId:"page_form",callback:e})}},{key:"componentDidUpdate",value:function(e,t){var r=this.props.store;e.formStatusChanged(e,r.getStatus())}},{key:"componentWillUnmount",value:function(){delete window[this.uniqueKey]}},{key:"render",value:function(){var e=this.props,t=e.store,r=e.config,n=e.name,i=r.onAfterEvent,a=r.onBeforeEvent;return o.a.createElement(A.Provider,{value:{areaId:n,form:t,onAfterEvent:i,onBeforeEvent:a,config:r}},o.a.createElement("div",{id:"form_".concat(n),fieldid:Object(q.getSysFieldid)("".concat(r&&r.fieldid||n,"_form-area")),className:"platform-component-form",uniqueKey:this.uniqueKey},this.renderDom()))}}])&&Oe(t.prototype,r),n&&Oe(t,n),u}(u.BaseComponent))||ve)||ve)||ve;Me.displayName="Form",Me.useForm=S;t.default=Me},19:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));r(1),r(6),r(9);var n={refer:function(e){var t=e&&document.querySelector(e),r=t&&t.querySelector("input[tabindex='0']"),n=t&&t.querySelector("span[tabindex='0']");r?(r.focus(),t=null):n?(n.focus(),t=null):t&&t.addEventListener("DOMSubtreeModified",(function e(r){!function(e,t,r){var n=r.target.querySelector("input[tabindex='0']");n&&setTimeout((function(){n.focus(),e&&e.removeEventListener("DOMSubtreeModified",t),n=null,e=null}))}(t,e,r)}));r=null,n=null},input:o,textarea:function(e){var t=e&&document.querySelector(e),r=t&&t.querySelector("textarea");r&&r.focus(),t=null,r=null},select:function(e){var t=e&&document.querySelector(e),r=t&&t.querySelector(".u-select-selection[tabindex]")||t.querySelector("input");r&&r.focus(),t=null,r=null},switch:i,switch_browse:i,normal:o};function o(e){var t=e&&document.querySelector(e),r=t&&t.querySelector("input");r&&r.focus(),t=null,r=null}function i(e){var t=e&&document.querySelector(e),r=t&&t.querySelector("span[tabindex]");r&&r.focus(),t=null,r=null}},2:function(e,t,r){e.exports=r(69)()},20:function(e,t,r){(function(e,r){var n="[object Arguments]",o="[object Map]",i="[object Object]",a="[object Set]",u=/^\[object .+?Constructor\]$/,c=/^(?:0|[1-9]\d*)$/,l={};l["[object Float32Array]"]=l["[object Float64Array]"]=l["[object Int8Array]"]=l["[object Int16Array]"]=l["[object Int32Array]"]=l["[object Uint8Array]"]=l["[object Uint8ClampedArray]"]=l["[object Uint16Array]"]=l["[object Uint32Array]"]=!0,l[n]=l["[object Array]"]=l["[object ArrayBuffer]"]=l["[object Boolean]"]=l["[object DataView]"]=l["[object Date]"]=l["[object Error]"]=l["[object Function]"]=l[o]=l["[object Number]"]=l[i]=l["[object RegExp]"]=l[a]=l["[object String]"]=l["[object WeakMap]"]=!1;var s="object"==typeof e&&e&&e.Object===Object&&e,f="object"==typeof self&&self&&self.Object===Object&&self,d=s||f||Function("return this")(),p=t&&!t.nodeType&&t,m=p&&"object"==typeof r&&r&&!r.nodeType&&r,y=m&&m.exports===p,v=y&&s.process,b=function(){try{return v&&v.binding&&v.binding("util")}catch(e){}}(),h=b&&b.isTypedArray;function g(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function _(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function w(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var O,S,j,x=Array.prototype,I=Function.prototype,T=Object.prototype,k=d["__core-js_shared__"],E=I.toString,M=T.hasOwnProperty,P=(O=/[^.]+$/.exec(k&&k.keys&&k.keys.IE_PROTO||""))?"Symbol(src)_1."+O:"",K=T.toString,C=RegExp("^"+E.call(M).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),A=y?d.Buffer:void 0,V=d.Symbol,H=d.Uint8Array,F=T.propertyIsEnumerable,q=x.splice,R=V?V.toStringTag:void 0,D=Object.getOwnPropertySymbols,N=A?A.isBuffer:void 0,L=(S=Object.keys,j=Object,function(e){return S(j(e))}),B=be(d,"DataView"),W=be(d,"Map"),U=be(d,"Promise"),z=be(d,"Set"),$=be(d,"WeakMap"),J=be(Object,"create"),G=we(B),Z=we(W),X=we(U),Y=we(z),Q=we($),ee=V?V.prototype:void 0,te=ee?ee.valueOf:void 0;function re(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ne(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function oe(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ie(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new oe;++t<r;)this.add(e[t])}function ae(e){var t=this.__data__=new ne(e);this.size=t.size}function ue(e,t){var r=je(e),n=!r&&Se(e),o=!r&&!n&&xe(e),i=!r&&!n&&!o&&Me(e),a=r||n||o||i,u=a?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],c=u.length;for(var l in e)!t&&!M.call(e,l)||a&&("length"==l||o&&("offset"==l||"parent"==l)||i&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||_e(l,c))||u.push(l);return u}function ce(e,t){for(var r=e.length;r--;)if(Oe(e[r][0],t))return r;return-1}function le(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":R&&R in Object(e)?function(e){var t=M.call(e,R),r=e[R];try{e[R]=void 0;var n=!0}catch(e){}var o=K.call(e);n&&(t?e[R]=r:delete e[R]);return o}(e):function(e){return K.call(e)}(e)}function se(e){return Ee(e)&&le(e)==n}function fe(e,t,r,u,c){return e===t||(null==e||null==t||!Ee(e)&&!Ee(t)?e!=e&&t!=t:function(e,t,r,u,c,l){var s=je(e),f=je(t),d=s?"[object Array]":ge(e),p=f?"[object Array]":ge(t),m=(d=d==n?i:d)==i,y=(p=p==n?i:p)==i,v=d==p;if(v&&xe(e)){if(!xe(t))return!1;s=!0,m=!1}if(v&&!m)return l||(l=new ae),s||Me(e)?me(e,t,r,u,c,l):function(e,t,r,n,i,u,c){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new H(e),new H(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Oe(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case o:var l=_;case a:var s=1&n;if(l||(l=w),e.size!=t.size&&!s)return!1;var f=c.get(e);if(f)return f==t;n|=2,c.set(e,t);var d=me(l(e),l(t),n,i,u,c);return c.delete(e),d;case"[object Symbol]":if(te)return te.call(e)==te.call(t)}return!1}(e,t,d,r,u,c,l);if(!(1&r)){var b=m&&M.call(e,"__wrapped__"),h=y&&M.call(t,"__wrapped__");if(b||h){var g=b?e.value():e,O=h?t.value():t;return l||(l=new ae),c(g,O,r,u,l)}}if(!v)return!1;return l||(l=new ae),function(e,t,r,n,o,i){var a=1&r,u=ye(e),c=u.length,l=ye(t).length;if(c!=l&&!a)return!1;var s=c;for(;s--;){var f=u[s];if(!(a?f in t:M.call(t,f)))return!1}var d=i.get(e);if(d&&i.get(t))return d==t;var p=!0;i.set(e,t),i.set(t,e);var m=a;for(;++s<c;){f=u[s];var y=e[f],v=t[f];if(n)var b=a?n(v,y,f,t,e,i):n(y,v,f,e,t,i);if(!(void 0===b?y===v||o(y,v,r,n,i):b)){p=!1;break}m||(m="constructor"==f)}if(p&&!m){var h=e.constructor,g=t.constructor;h==g||!("constructor"in e)||!("constructor"in t)||"function"==typeof h&&h instanceof h&&"function"==typeof g&&g instanceof g||(p=!1)}return i.delete(e),i.delete(t),p}(e,t,r,u,c,l)}(e,t,r,u,fe,c))}function de(e){return!(!ke(e)||function(e){return!!P&&P in e}(e))&&(Ie(e)?C:u).test(we(e))}function pe(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||T,t!==n)return L(e);var t,r,n,o=[];for(var i in Object(e))M.call(e,i)&&"constructor"!=i&&o.push(i);return o}function me(e,t,r,n,o,i){var a=1&r,u=e.length,c=t.length;if(u!=c&&!(a&&c>u))return!1;var l=i.get(e);if(l&&i.get(t))return l==t;var s=-1,f=!0,d=2&r?new ie:void 0;for(i.set(e,t),i.set(t,e);++s<u;){var p=e[s],m=t[s];if(n)var y=a?n(m,p,s,t,e,i):n(p,m,s,e,t,i);if(void 0!==y){if(y)continue;f=!1;break}if(d){if(!g(t,(function(e,t){if(a=t,!d.has(a)&&(p===e||o(p,e,r,n,i)))return d.push(t);var a}))){f=!1;break}}else if(p!==m&&!o(p,m,r,n,i)){f=!1;break}}return i.delete(e),i.delete(t),f}function ye(e){return function(e,t,r){var n=t(e);return je(e)?n:function(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}(n,r(e))}(e,Pe,he)}function ve(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function be(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return de(r)?r:void 0}re.prototype.clear=function(){this.__data__=J?J(null):{},this.size=0},re.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},re.prototype.get=function(e){var t=this.__data__;if(J){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return M.call(t,e)?t[e]:void 0},re.prototype.has=function(e){var t=this.__data__;return J?void 0!==t[e]:M.call(t,e)},re.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=J&&void 0===t?"__lodash_hash_undefined__":t,this},ne.prototype.clear=function(){this.__data__=[],this.size=0},ne.prototype.delete=function(e){var t=this.__data__,r=ce(t,e);return!(r<0)&&(r==t.length-1?t.pop():q.call(t,r,1),--this.size,!0)},ne.prototype.get=function(e){var t=this.__data__,r=ce(t,e);return r<0?void 0:t[r][1]},ne.prototype.has=function(e){return ce(this.__data__,e)>-1},ne.prototype.set=function(e,t){var r=this.__data__,n=ce(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},oe.prototype.clear=function(){this.size=0,this.__data__={hash:new re,map:new(W||ne),string:new re}},oe.prototype.delete=function(e){var t=ve(this,e).delete(e);return this.size-=t?1:0,t},oe.prototype.get=function(e){return ve(this,e).get(e)},oe.prototype.has=function(e){return ve(this,e).has(e)},oe.prototype.set=function(e,t){var r=ve(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},ie.prototype.add=ie.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ie.prototype.has=function(e){return this.__data__.has(e)},ae.prototype.clear=function(){this.__data__=new ne,this.size=0},ae.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},ae.prototype.get=function(e){return this.__data__.get(e)},ae.prototype.has=function(e){return this.__data__.has(e)},ae.prototype.set=function(e,t){var r=this.__data__;if(r instanceof ne){var n=r.__data__;if(!W||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new oe(n)}return r.set(e,t),this.size=r.size,this};var he=D?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,n=null==e?0:e.length,o=0,i=[];++r<n;){var a=e[r];t(a,r,e)&&(i[o++]=a)}return i}(D(e),(function(t){return F.call(e,t)})))}:function(){return[]},ge=le;function _e(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||c.test(e))&&e>-1&&e%1==0&&e<t}function we(e){if(null!=e){try{return E.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Oe(e,t){return e===t||e!=e&&t!=t}(B&&"[object DataView]"!=ge(new B(new ArrayBuffer(1)))||W&&ge(new W)!=o||U&&"[object Promise]"!=ge(U.resolve())||z&&ge(new z)!=a||$&&"[object WeakMap]"!=ge(new $))&&(ge=function(e){var t=le(e),r=t==i?e.constructor:void 0,n=r?we(r):"";if(n)switch(n){case G:return"[object DataView]";case Z:return o;case X:return"[object Promise]";case Y:return a;case Q:return"[object WeakMap]"}return t});var Se=se(function(){return arguments}())?se:function(e){return Ee(e)&&M.call(e,"callee")&&!F.call(e,"callee")},je=Array.isArray;var xe=N||function(){return!1};function Ie(e){if(!ke(e))return!1;var t=le(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Te(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function ke(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ee(e){return null!=e&&"object"==typeof e}var Me=h?function(e){return function(t){return e(t)}}(h):function(e){return Ee(e)&&Te(e.length)&&!!l[le(e)]};function Pe(e){return null!=(t=e)&&Te(t.length)&&!Ie(t)?ue(e):pe(e);var t}r.exports=function(e,t){return fe(e,t)}}).call(this,r(31),r(47)(e))},21:function(e,t,r){"use strict";e.exports=r(106)},3:function(e,t){e.exports=r},31:function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},33:function(e,t,r){"use strict";function n(e){return"INPUT"===e.tagName&&(!(!e||!0!==e.disabled)||void 0)}r.d(t,"a",(function(){return n}))},34:function(e,t,r){"use strict";r.d(t,"b",(function(){return g})),r.d(t,"a",(function(){return O}));var n=r(9),o=r(13),i=r(1),a=r(17),u=r(16),c=r(33),l=r(49);function s(e){var t=e.eventTarget,r=e.ViewModel,n=e.moduleId,o=e.orderOfHotKey,l="TD"===t.tagName?t:Object(i.findParentTd)(t);if(l){var s=l.previousElementSibling,y=l.parentElement,v=f(y),b=s&&s.querySelector('[tabindex="0"]');if(v!==l)if(null===b||Object(c.a)(b))p({td:s,ViewModel:r,moduleId:n,orderOfHotKey:o});else{var h=Object(u.a)(s);h&&(r.enterTriggerCellId=h),Object(a.a)({div:b,ViewModel:r})}else y===y.parentElement.lastElementChild?function(e){var t=e.currentModuleId,r=e.ViewModel,n=e.orderOfHotKey;n&&0===n.length?function(e){var t=e.currentModuleId,r=e.ViewModel,n="".concat(i.config.hotKeyModuleIdPrefix,"-").concat(t),o=document.querySelectorAll("#".concat(n," table tbody tr.u-table-row")),c=o[o.length-1],l=function(e){for(var t=e.length;t>-1;t--)if(null!==e[t].querySelector('[tabindex="0"]'))return e[t]}(o[c].querySelectorAll("td")),s=Object(u.a)(l);s&&(r.enterTriggerCellId=s);var f=l.querySelector('[tabindex="0"]');f&&Object(a.a)({div:f,ViewModel:r})}({currentModuleId:t,ViewModel:r}):n&&d({currentModuleId:t,ViewModel:r,orderOfHotKey:n})}({currentModuleId:n,ViewModel:r,orderOfHotKey:o}):m({tr:y,ViewModel:r,moduleId:n,orderOfHotKey:o})}else console.warn("not find parentTd, prev hotkey invalid")}function f(e){var t=e.querySelectorAll("td");return Array.prototype.find.call(t,(function(e){return!e.className.includes("fixed")}))}function d(e){var t=e.currentModuleId,r=e.ViewModel,c=e.orderOfHotKey,s=function(e,t){var r=t.length,n=t.indexOf(e),o=n-1<-1?t[r-1]:n-1;return t[o]}(t,c),f=n.d[s];if(void 0!==f){var d=f.type;if(d===o.a.cardTable||d===o.a.editTable){var m=n.d[f.activeTable],y=document.querySelector("div[".concat(m.lastItem,"]")),v=y.querySelector('[tabindex="0"]');if(null===v){p({td:y.parentElement,ViewModel:r,moduleId:m.moduleId,orderOfHotKey:c})}else{var b=Object(i.findParentTd)(v),h=Object(u.a)(b);h&&(r.enterTriggerCellId=h),Object(a.a)({div:v,ViewModel:r})}}else Object(l.a)(f,s)}}function p(e){var t=e.td,r=e.ViewModel,n=e.moduleId,o=e.orderOfHotKey,i=t.previousElementSibling,l=i&&i.parentElement,s=l&&f(l),d=t.querySelector('[tabindex="0"]'),y=i&&i.querySelector('[tabindex="0"]');if(s===i&&null===y||s===t&&null===d)m({tr:l,ViewModel:r,moduleId:n,orderOfHotKey:o});else if(null===y||Object(c.a)(y))p({td:i,ViewModel:r,moduleId:n,orderOfHotKey:o});else{var v=Object(u.a)(i);v&&(r.enterTriggerCellId=v),Object(a.a)({div:y,ViewModel:r})}}function m(e){var t=e.tr,r=e.ViewModel,n=e.moduleId,o=e.orderOfHotKey,c=t&&t.previousElementSibling;if(null!==c)if("-1"!==c.getAttribute("tabindex")){var l=c.querySelectorAll('td [tabindex="0"]'),s=l[l.length-1],f=Object(i.findParentTd)(s),p=Object(u.a)(f);p&&(r.enterTriggerCellId=p),Object(a.a)({div:s,ViewModel:r})}else m({tr:c,ViewModel:r,moduleId:n,orderOfHotKey:o});else o&&d({currentModuleId:n,ViewModel:r,orderOfHotKey:o})}var y=r(50);function v(e){var t=e.eventTarget,r=e.ViewModel,n=(e.moduleId,e.orderOfHotKey,"TD"===t.tagName?t:Object(i.findParentTd)(t)),o=n.parentElement.previousElementSibling,c=1;if(null!==o){"-1"===o.getAttribute("tabindex")&&(c=Object(y.a)(o,c,"up"));var l=Object(u.a)(n);if(!l)return console.warn("not find cell identity!");var s=l&&l.split("-"),f=Number(s.pop())-c;if(f>-1){s.push(f);var d=s.join("-");r.upStairsCellIdentity=s;var p=document.querySelector("div[".concat(d,'="').concat(d,'"] [tabindex="0"], div[').concat(d,'="').concat(d,'"][tabindex="0"]'));Object(a.a)({div:p,ViewModel:r})}}}function b(e){var t=e.eventTarget,r=e.ViewModel,n=e.moduleId,o="TD"===t.tagName?t:Object(i.findParentTd)(t),c=o.parentElement.nextElementSibling,l=1;if(null!==c){"-1"===c.getAttribute("tabindex")&&(l=Object(y.a)(c,l,"down"));var s=Object(u.a)(o);if(!s)return console.warn("not find cell identity!");var f=s&&s.split("-"),d=Number(f.pop())+l;"".concat(i.config.hotKeyModuleIdPrefix,"-").concat(n);f.push(d);var p=f.join("-");r.upStairsCellIdentity=p;var m=document.querySelector("div[".concat(p,'="').concat(p,'"] [tabindex="0"], div[').concat(p,'="').concat(p,'"][tabindex="0"]'));Object(a.a)({div:m,ViewModel:r})}}var h={37:function(e){var t=e.eventTarget,r=e.ViewModel,n=e.moduleId,o=e.orderOfHotKey;if(e.itemType===i.config.hotKeyDatePicker)return void s({eventTarget:t,ViewModel:r,moduleId:n,orderOfHotKey:o});var a=setTimeout((function(){s({eventTarget:t,ViewModel:r,moduleId:n}),clearTimeout(a)}))},38:function(e){var t=e.eventTarget,r=e.ViewModel,n=e.moduleId,o=e.orderOfHotKey;if(e.itemType===i.config.hotKeyDatePicker)return void v({eventTarget:t,ViewModel:r,moduleId:n,orderOfHotKey:o});var a=setTimeout((function(){v({eventTarget:t,ViewModel:r,moduleId:n,orderOfHotKey:o}),clearTimeout(a)}))},39:function(e){var t=e.eventTarget,r=e.ViewModel,n=e.moduleId,o=e.orderOfHotKey;if(e.itemType===i.config.hotKeyDatePicker)return void Object(a.b)({eventTarget:t,ViewModel:r,moduleId:n,orderOfHotKey:o});var u=setTimeout((function(){Object(a.b)({eventTarget:t,ViewModel:r,moduleId:n}),clearTimeout(u)}))},40:function(e){var t=e.eventTarget,r=e.ViewModel,n=e.moduleId,o=e.orderOfHotKey;if(e.itemType===i.config.hotKeyDatePicker)return void b({eventTarget:t,ViewModel:r,moduleId:n,orderOfHotKey:o});var a=setTimeout((function(){b({eventTarget:t,ViewModel:r,moduleId:n,orderOfHotKey:o}),clearTimeout(a)}))}};function g(e,t,r){var a="shift+down"===r?1:-1,u=n.e.indexOf(e)+a,c=n.e[u];if(t.target){var l=null;!_(c)&&n.d[c].firstItem&&(l=n.d[c].firstItem);var s=document.querySelector("div[field=".concat(l,"]"));s&&s&&s.contains(t.target)||t.target.blur()}_(c)?function(e){var t=e.key,r=e.moduleId,o="shift+down"===t?"lastItem":"firstItem";if(function(e){var t=n.d[e];return t&&(t.parent||t.children)}(r))return void function(e,t){var r=i.ViewModel.tableActiveKey||e;i.PubSub.publish("autoFocus",{data:n.d[r][t],moduleId:e})}(r,o);i.PubSub.publish("autoFocus",{data:n.d[r][o],moduleId:r})}({key:r,moduleId:e}):!function(e,t,r){var i=n.d[t].type,a=n.d[r].type,u=[];i===o.a.form?u=function(e,t,r){var n,i=e._this.myTable;n=t===o.a.cardTable?i[r].state.table.rows:t===o.a.editTable?i.myEditTable[r].state.table.rows:e._this.state.meta[r].items;return n}(e,a,r):(i===o.a.cardTable||i===o.a.editTable)&&(u=w(e,a,r));return 0===u.length}(this.props,e,c)?i.PubSub.publish("autoFocus",{data:n.d[c].firstItem,moduleId:e}):g.call(this,c,t,r)}function _(e){return void 0===n.d[e]}function w(e,t,r){var n=e.pageScope.myTable;return t===o.a.cardTable?n[r].state.table.rows:t===o.a.editTable?n.myEditTable[r].state.table.rows:e.pageScope.state.meta[r].items}function O(e){var t=e.eventTarget,r=e.ViewModel,n=e.moduleId,o=e.orderOfHotKey,i=e.itemType,a=e.keyCode;h[a]({eventTarget:t,ViewModel:r,moduleId:n,orderOfHotKey:o,itemType:i})}},361:function(e,t,r){"use strict";var n=r(0),o=r.n(n),i=r(21),a=r(9),u=r(44),c=r(34),l=r(66),s=r(1);r(701);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t.a=function(e){return function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(h,t);var r,n,f,v=y(h);function h(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=v.call(this,e)).formStatusChanged=t.formStatusChanged.bind(b(t)),t}return r=h,(n=[{key:"componentDidMount",value:function(){var e=this;this.autoFocusToken=s.PubSub.subscribe("autoFocus-IoC",(function(){var t=e.props.store.getStatus();Object(u.c)({props:e.props,autoFocusDeferred:!1,status:t})||"browse"===t||a.a.form(e.props,!0)}))}},{key:"componentWillUnmount",value:function(){Object(a.b)(this.props.moduleId||this.props.name),this.autoFocusToken&&s.PubSub.subscribe(this.autoFocusToken)}},{key:"formStatusChanged",value:function(e,t){"browse"===t?Object(a.b)(e.moduleId||e.name):this.judgeCreateKeyMap(e,t)}},{key:"judgeCreateKeyMap",value:function(e,t){var r=(e.getHotKeyConfig?e.getHotKeyConfig():{}).autoFocusDeferred,n=void 0!==r&&r;Object(u.c)({props:e,autoFocusDeferred:n,status:t})||a.a.form(e)}},{key:"render",value:function(){var t=this.props.name;return o.a.createElement(i.HotKeys,{keyMap:l.a,handlers:{shiftUp:c.b.bind(this,t),shiftDown:c.b.bind(this,t)},id:"".concat(s.config.hotKeyModuleIdPrefix,"-").concat(t)},o.a.createElement(e,d({},this.props,{formStatusChanged:this.formStatusChanged})))}}])&&p(r.prototype,n),f&&p(r,f),h}(n.Component)}},362:function(e,t,r){"use strict";var n=r(0),o=r.n(n),i=r(1),a=r(19);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t.a=function(e){return function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,t);var r,n,u,d=f(p);function p(){return c(this,p),d.apply(this,arguments)}return r=p,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.name,r=e.form;this.autoFocusToken=i.PubSub.subscribe("autoFocus",(function(e,n){var o=n.data,i=n.id,u='[hotkeytag="'.concat(t,"-").concat(o,'"]'),c="normal";r&&o&&(r.setItemAttribute(o,"autoFocus",!0),c=r.getItemAttribute(o,"itemtype")),console.log(u,r,i,o,c),i?t===i&&(console.log(i),void 0===a.a[c]?a.a.normal(u):a.a[c](u)):o&&(void 0===a.a[c]?a.a.normal(u):a.a[c](u))}))}},{key:"componentWillUnmount",value:function(){this.autoFocusToken&&i.PubSub.subscribe(this.autoFocusToken)}},{key:"render",value:function(){return o.a.createElement(e,this.props)}}])&&l(r.prototype,n),u&&l(r,u),p}(n.Component)}},44:function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i}));function n(e){var t=e.props,r=e.autoFocusDeferred,n=e.status,o=t.name,i=t.getHotKeyConfig?t.getHotKeyConfig():{},a=i.withHotKeyChange,u=i.meta;if(!t.getHotKeyConfig)return console.warn("some form hotkey invalid");var c,l=u[o]&&u[o].moduletype;return c=n||(u[o]&&u[o].status||"browse"),!(void 0!==o&&!1!==a&&void 0!==l&&!r&&"browse"!==c)}function o(e){var t=e.name,r=e.high_hotkey,n=(e.getHotKeyConfig,e.getHotKeyConfig?e.getHotKeyConfig():{}),o=n.withHotKeyChange,i=n.meta;if(!e.getHotKeyConfig)return console.warn("some form hotkey invalid");var a=r.store;r.tableId;if(!a)return!0;var u="edit"!==a.getTableProps("status"),c=a.getData(),l=i[t]&&i[t].items;return c=void 0===c?[]:c,u||0===c.length||!o||void 0===l}function i(e,t){var r=e.name,n=e.high_hotkey,o=(e.getHotKeyConfig,e.getHotKeyConfig?e.getHotKeyConfig():{}),i=o.withHotKeyChange,a=o.meta;if(!e.getHotKeyConfig)return console.warn("some form hotkey invalid");var u=n.store;n.tableId;if(!u)return!0;var c="edit"!==u.getTableProps("status"),l=u.getData(),s=a[r]&&a[r].items;return l=void 0===l?[]:l,t||c||0===l.length||!i||void 0===s}},47:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},49:function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return a}));var n=r(1),o=r(19);function i(e,t){var r=document.querySelector("#".concat(n.config.hotKeyModuleIdPrefix,"-").concat(t)),i=function(e){return Array.prototype.find.call(e.classList,(function(e){return e.startsWith("js-type")})).split("-").pop()}(r.querySelector(".".concat(e.firstItem)));void 0===o.a[i]?o.a.normal(r):o.a[i](r)}function a(e,t){}},5:function(e,t,r){var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)&&n.length){var a=o.apply(null,n);a&&e.push(a)}else if("object"===i)for(var u in n)r.call(n,u)&&n[u]&&e.push(u)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},50:function(e,t,r){"use strict";function n(e,t,r){for(var n=e,o=t;null!==n&&"-1"===n.getAttribute("tabindex");)o+=1,n="up"===r?n.previousElementSibling:n.nextElementSibling;return o}r.d(t,"a",(function(){return n}))},6:function(e,t){e.exports=n},63:function(e,t){var r=Object.prototype.toString;e.exports=function(e){return!0===e||!1===e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Boolean]"==r.call(e)}},64:function(e,t){e.exports=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}},66:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n={shiftUp:{sequence:"shift+up",action:"keydown"},shiftDown:{sequence:"shift+down",action:"keydown"},tab:{sequence:"tab",action:"keydown"}}},69:function(e,t,r){"use strict";var n=r(70);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,r,o,i,a){if(a!==n){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return r.PropTypes=r,r}},70:function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},701:function(e,t,r){},9:function(e,t,r){"use strict";r.d(t,"a",(function(){return w})),r.d(t,"d",(function(){return u})),r.d(t,"e",(function(){return s})),r.d(t,"b",(function(){return h})),r.d(t,"c",(function(){return g})),r.d(t,"f",(function(){return _}));var n=["input","textarea","number","refer","datepicker","datetimepicker","timepicker","select","switch","residtxt","checkbox_switch"],o=["refer","datepicker","input","datetimepicker","timepicker","select","number","residtxt","checkbox_switch","rangepicker","datePickerNoTimeZone","TZDatePickerStart","TZDatePickerStart","switch"],i=r(13),a=r(1);var u={},c={},l={},s=[],f=a.config.hotKeyModuleIdPrefix;function d(e,t){return void 0===u[e]&&s[0]===e||t}function p(e,t){var r=n.includes(e.itemtype)&&!0!==e.disabled&&!1!==e.visible,o=!(!c[t]||!0!==c[t][e.attrcode]);return r&&!o}function m(e,t,r){return t.reduce((function(t,r){return r.children?m(e,r.children,t):!function(e,t){if(l[e]){if(!1===l[e][t.attrcode])return!1;if(!0===l[e][t.attrcode])return!0}return o.includes(t.itemtype)&&!1!==t.visible&&!0!==t.disabled&&void 0!==t.attrcode}(e,r)||t.push(r.attrcode),t}),r)}function y(e){var t=e.moduleId,r=e.availableItems,n=e.lastRowIndex,o=e.moduleType,i=e.force,c="".concat(f,"-").concat(t,"-").concat(r[0],"-0"),l=r.length-1,d="".concat(f,"-").concat(t,"-").concat(r[l],"-").concat(n);!function(e){var t=e.orderOfHotKey,r=e.moduleId,n=e.firstItem,o=e.force;(function(e){var t=e.orderOfHotKey,r=void 0===t?[]:t,n=e.moduleId,o=e.force;return r[0]===n&&void 0===u[n]||o})({orderOfHotKey:t,moduleId:r,force:o})&&a.PubSub.publish("autoFocus",{data:n,moduleId:r})}({orderOfHotKey:s,moduleId:t,firstItem:c,force:i}),u[t]={firstItem:c,lastItem:d,type:o,activeTable:t}}function v(e,t){var r=(e.getHotKeyConfig?e.getHotKeyConfig():{}).meta;if(!e.getHotKeyConfig)return console.warn("some form hotkey invalid");var n=r.gridrelation&&r.gridrelation[t].tabRelation;return!!(n&&n.length>1)}function b(e,t,r){var n=(e.getHotKeyConfig?e.getHotKeyConfig():{}).meta;if(!e.getHotKeyConfig)return console.warn("some form hotkey invalid");n.gridrelation[t].tabRelation.forEach((function(e){if(e!==t){var o=n[e]&&n[e].items,a=o&&m(t,o,[]),c=n[e].code,l="".concat(f,"-").concat(t,"-").concat(a[0],"-0"),s=a[a.length-1],d="".concat(f,"-").concat(t,"-").concat(s,"-").concat(r);u[c]={firstItem:l,lastItem:d,type:i.a.cardTable,parent:t}}}))}function h(e){delete u[e]}function g(e){return u[e]&&u[e].firstItem}function _(e){var t=e.moduleId,r=e.activeKey,n=u[t];n&&(n.activeTable=r)}var w={form:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.name,n=e.getHotKeyConfig?e.getHotKeyConfig():{},o=n.meta,c=n.orderOfHotKey;if(!e.getHotKeyConfig)return console.warn("some form hotkey invalid");var l=o[r].items;s=c;var f=l.filter((function(e){return p(e,r)})).map((function(e){return e.attrcode}));if(d(r,t)){u[r]={firstItem:f[0],type:i.a.form};var m=f[0];a.PubSub.publish("autoFocus",{data:m})}},table:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(e.name,e.high_hotkey),n=(e.getHotKeyConfig,e.getHotKeyConfig?e.getHotKeyConfig():{}),o=(n.withHotKeyChange,n.meta),a=n.orderOfHotKey;if(!e.getHotKeyConfig||!a)return console.warn("some form hotkey invalid");s=a;var c=r.store,l=r.tableId,f=o[l]&&o[l].items,d=c.getData(),p=d.length-1,h=f&&m(l,f,[]);d&&0===d.length||(y({tableId:l,availableItems:h,lastRowIndex:p,moduleType:i.a.cardTable,force:t}),v(e,l)&&u[l]&&(b(e,l,p),u[l].children=o.gridrelation[l].tabRelation))},editTable:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(e.name,e.high_hotkey),n=(e.getHotKeyConfig,e.getHotKeyConfig?e.getHotKeyConfig():{}),o=(n.withHotKeyChange,n.meta),a=n.orderOfHotKey;if(!e.getHotKeyConfig||!a)return console.warn("some form hotkey invalid");s=a;var u=r.store,c=r.tableId,l=o[c]&&o[c].items,f=u.getData(),d=f.length-1,p=l&&m(c,l,[]);f&&0===f.length||y({tableId:c,availableItems:p,lastRowIndex:d,moduleType:i.a.editTable,force:t})}}}})}));
//# sourceMappingURL=index.js.map