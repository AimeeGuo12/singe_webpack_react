/*! @ncctag content */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@platform/api/index"),require("@platform/components/index"),require("@platform/table-core/index"),require("react"),require("@platform/base/index"),require("@platform/card-table/index"),require("@platform/form/index"),require("@platform/simple-table/index"),require("@platform/edit-table/index"),require("@platform/transfer-table/index"),require("@platform/tree-table/index"),require("babel-polyfill")):"function"==typeof define&&define.amd?define(["@platform/api/index","@platform/components/index","@platform/table-core/index","react","@platform/base/index","@platform/card-table/index","@platform/form/index","@platform/simple-table/index","@platform/edit-table/index","@platform/transfer-table/index","@platform/tree-table/index","babel-polyfill"],t):"object"==typeof exports?exports["nc-lightapp-front"]=t(require("@platform/api/index"),require("@platform/components/index"),require("@platform/table-core/index"),require("react"),require("@platform/base/index"),require("@platform/card-table/index"),require("@platform/form/index"),require("@platform/simple-table/index"),require("@platform/edit-table/index"),require("@platform/transfer-table/index"),require("@platform/tree-table/index"),require("babel-polyfill")):e["nc-lightapp-front"]=t(e["@platform/api/index"],e["@platform/components/index"],e["@platform/table-core/index"],e.React,e["@platform/base/index"],e["@platform/card-table/index"],e["@platform/form/index"],e["@platform/simple-table/index"],e["@platform/edit-table/index"],e["@platform/transfer-table/index"],e["@platform/tree-table/index"],e["babel-polyfill"])}(window,(function(e,t,r,a,n,o,i,l,c,u,s,d){return function(e){var t={};function r(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(a,n,function(t){return e[t]}.bind(null,n));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="../../../../platform/",r(r.s=16)}([function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t){e.exports=a},function(e,t){e.exports=n},function(e,t){e.exports=o},function(e,t){e.exports=i},function(e,t){e.exports=l},function(e,t){e.exports=c},function(e,t,r){"use strict";var a=Object.prototype.hasOwnProperty,n=Array.isArray,o=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),i=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},a=0;a<e.length;++a)void 0!==e[a]&&(r[a]=e[a]);return r};e.exports={arrayToObject:i,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],a=0;a<t.length;++a)for(var o=t[a],i=o.obj[o.prop],l=Object.keys(i),c=0;c<l.length;++c){var u=l[c],s=i[u];"object"==typeof s&&null!==s&&-1===r.indexOf(s)&&(t.push({obj:i,prop:u}),r.push(s))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(n(r)){for(var a=[],o=0;o<r.length;++o)void 0!==r[o]&&a.push(r[o]);t.obj[t.prop]=a}}}(t),e},decode:function(e,t,r){var a=e.replace(/\+/g," ");if("iso-8859-1"===r)return a.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(a)}catch(e){return a}},encode:function(e,t,r){if(0===e.length)return e;var a=e;if("symbol"==typeof e?a=Symbol.prototype.toString.call(e):"string"!=typeof e&&(a=String(e)),"iso-8859-1"===r)return escape(a).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var n="",i=0;i<a.length;++i){var l=a.charCodeAt(i);45===l||46===l||95===l||126===l||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122?n+=a.charAt(i):l<128?n+=o[l]:l<2048?n+=o[192|l>>6]+o[128|63&l]:l<55296||l>=57344?n+=o[224|l>>12]+o[128|l>>6&63]+o[128|63&l]:(i+=1,l=65536+((1023&l)<<10|1023&a.charCodeAt(i)),n+=o[240|l>>18]+o[128|l>>12&63]+o[128|l>>6&63]+o[128|63&l])}return n},isBuffer:function(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},maybeMap:function(e,t){if(n(e)){for(var r=[],a=0;a<e.length;a+=1)r.push(t(e[a]));return r}return t(e)},merge:function e(t,r,o){if(!r)return t;if("object"!=typeof r){if(n(t))t.push(r);else{if(!t||"object"!=typeof t)return[t,r];(o&&(o.plainObjects||o.allowPrototypes)||!a.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(r);var l=t;return n(t)&&!n(r)&&(l=i(t,o)),n(t)&&n(r)?(r.forEach((function(r,n){if(a.call(t,n)){var i=t[n];i&&"object"==typeof i&&r&&"object"==typeof r?t[n]=e(i,r,o):t.push(r)}else t[n]=r})),t):Object.keys(r).reduce((function(t,n){var i=r[n];return a.call(t,n)?t[n]=e(t[n],i,o):t[n]=i,t}),l)}}},function(e,t,r){"use strict";var a=r(21),n=r(22),o=r(11);e.exports={formats:o,parse:n,stringify:a}},function(e,t,r){"use strict";var a=String.prototype.replace,n=/%20/g,o=r(9),i={RFC1738:"RFC1738",RFC3986:"RFC3986"};e.exports=o.assign({default:i.RFC3986,formatters:{RFC1738:function(e){return a.call(e,n,"+")},RFC3986:function(e){return String(e)}}},i)},function(e,t,r){"use strict";var a={};r.r(a),r.d(a,"name",(function(){return p})),r.d(a,"emptyf",(function(){return h})),r.d(a,"enable",(function(){return b})),r.d(a,"default",(function(){return g}));var n={};r.r(n),r.d(n,"createForm",(function(){return k})),r.d(n,"getAllFormValue",(function(){return F})),r.d(n,"setAllFormValue",(function(){return B})),r.d(n,"getFormItemsValue",(function(){return V})),r.d(n,"setFormItemsValue",(function(){return N})),r.d(n,"getFormItemsDisabled",(function(){return U})),r.d(n,"setFormItemsDisabled",(function(){return K})),r.d(n,"setFormItemsRequired",(function(){return _})),r.d(n,"getFormItemsRequired",(function(){return q})),r.d(n,"getFormItemsVisible",(function(){return H})),r.d(n,"setFormItemsVisible",(function(){return L})),r.d(n,"setFormItemsVerify",(function(){return J})),r.d(n,"getFormItemsVerify",(function(){return G})),r.d(n,"EmptyAllFormValue",(function(){return z})),r.d(n,"isCheckNow",(function(){return W})),r.d(n,"openArea",(function(){return Q})),r.d(n,"closeArea",(function(){return $})),r.d(n,"setAreaVisible",(function(){return Y})),r.d(n,"getAreaVisible",(function(){return X})),r.d(n,"setActiveTab",(function(){return Z})),r.d(n,"getActiveTab",(function(){return ee})),r.d(n,"cancel",(function(){return te})),r.d(n,"setFormStatus",(function(){return re})),r.d(n,"getFormStatus",(function(){return ae})),r.d(n,"checkRequired",(function(){return ne})),r.d(n,"resetItemWidth",(function(){return oe})),r.d(n,"setFormItemAutoFocus",(function(){return ie})),r.d(n,"updateForm",(function(){return le})),r.d(n,"getAllFormValueSimple",(function(){return ce})),r.d(n,"setItemsVisible",(function(){return de})),r.d(n,"getResidtxtLang",(function(){return fe})),r.d(n,"setFormPopConfirmSwitchTips",(function(){return pe})),r.d(n,"setFormItemFocus",(function(){return he})),r.d(n,"focusFormItem",(function(){return be})),r.d(n,"focusFormNextItem",(function(){return ge})),r.d(n,"updateDataByRefresh",(function(){return ve})),r.d(n,"clearFormVerify",(function(){return me}));var o={};r.r(o),r.d(o,"createCardTable",(function(){return Ye})),r.d(o,"setLayout",(function(){return Ze})),r.d(o,"setTabsTableData",(function(){return et})),r.d(o,"resetTabsTableData",(function(){return tt})),r.d(o,"getTabsTableData",(function(){return rt})),r.d(o,"setTabsTableStatus",(function(){return at})),r.d(o,"setTabsTableShow",(function(){return nt})),r.d(o,"setTabsTableActive",(function(){return ot})),r.d(o,"getTabsTableActive",(function(){return it})),r.d(o,"checkAllTabsRequire",(function(){return ct})),r.d(o,"saveChangedRowsOldValue",(function(){return ut})),r.d(o,"getChangedRowsOldValue",(function(){return st})),r.d(o,"delChangedRowsOldValue",(function(){return dt})),r.d(o,"setTableData",(function(){return ft})),r.d(o,"getStatus",(function(){return pt})),r.d(o,"clearRequiredStatus",(function(){return ht})),r.d(o,"setStatus",(function(){return bt})),r.d(o,"getAllRows",(function(){return gt})),r.d(o,"getVisibleRows",(function(){return vt})),r.d(o,"getChangedRows",(function(){return mt})),r.d(o,"getNumberOfRows",(function(){return yt})),r.d(o,"getAllData",(function(){return wt})),r.d(o,"toggleRowView",(function(){return Ot})),r.d(o,"addRow",(function(){return St})),r.d(o,"delRowByRowId",(function(){return Ct})),r.d(o,"delRowsByIndex",(function(){return Tt})),r.d(o,"setValByKeyAndIndex",(function(){return At})),r.d(o,"setValByKeyAndRowId",(function(){return It})),r.d(o,"resetTableData",(function(){return Dt})),r.d(o,"updateTableData",(function(){return xt})),r.d(o,"getValByKeyAndIndex",(function(){return Et})),r.d(o,"getValByKeyAndRowId",(function(){return jt})),r.d(o,"setEditableByRowId",(function(){return Pt})),r.d(o,"setEditableByIndex",(function(){return Rt})),r.d(o,"pasteRow",(function(){return kt})),r.d(o,"getCheckedRows",(function(){return Bt})),r.d(o,"selectAllRows",(function(){return Ft})),r.d(o,"selectRowsByIndex",(function(){return Mt})),r.d(o,"unSelectRowsByIndex",(function(){return Vt})),r.d(o,"reverseSelected",(function(){return Nt})),r.d(o,"filterEmptyRows",(function(){return Ut})),r.d(o,"filterEmptyGrandRows",(function(){return Kt})),r.d(o,"getAllRowsRemoveKeys",(function(){return _t})),r.d(o,"closeExpandedRow",(function(){return qt})),r.d(o,"getCacheData",(function(){return Ht})),r.d(o,"focusRowByIndex",(function(){return Lt})),r.d(o,"getMixinMetaData",(function(){return Jt})),r.d(o,"getFilterRows",(function(){return Gt})),r.d(o,"setFiltrateTableData",(function(){return zt})),r.d(o,"batchChangeTableData",(function(){return Wt})),r.d(o,"updateDataByIndexs",(function(){return Qt})),r.d(o,"insertDataByIndexs",(function(){return $t})),r.d(o,"setRowStatusByIndexs",(function(){return Yt})),r.d(o,"insertRowsAfterIndex",(function(){return Xt})),r.d(o,"setTdEditByIndex",(function(){return Zt})),r.d(o,"setValByKeysAndIndex",(function(){return er})),r.d(o,"setAllCheckboxAble",(function(){return tr})),r.d(o,"setMulTablesData",(function(){return rr})),r.d(o,"getRowsByIndexs",(function(){return ar})),r.d(o,"getAllTableRequire",(function(){return nr})),r.d(o,"getTableItemData",(function(){return or})),r.d(o,"setColScale",(function(){return ir})),r.d(o,"checkVisible",(function(){return lr})),r.d(o,"getChildTableRequired",(function(){return cr})),r.d(o,"checkChildTableRequired",(function(){return ur})),r.d(o,"checkTableRequired",(function(){return sr})),r.d(o,"setAllKeysVal",(function(){return dr})),r.d(o,"setClickRowIndex",(function(){return fr})),r.d(o,"getClickRowIndex",(function(){return pr})),r.d(o,"setSaveData",(function(){return hr})),r.d(o,"getDataByIndex",(function(){return br})),r.d(o,"updateDataByRowId",(function(){return gr})),r.d(o,"getRowStatus",(function(){return vr})),r.d(o,"getCurrentIndex",(function(){return mr})),r.d(o,"updateDiffDataByRowId",(function(){return yr})),r.d(o,"moveRow",(function(){return wr})),r.d(o,"setRowEditByIndex",(function(){return Or})),r.d(o,"setModelEdit",(function(){return Sr})),r.d(o,"setColVisibleByKey",(function(){return Tr})),r.d(o,"setColsValue",(function(){return Ar})),r.d(o,"openModel",(function(){return Ir})),r.d(o,"closeModel",(function(){return Dr})),r.d(o,"hideColByKey",(function(){return xr})),r.d(o,"setColumn",(function(){return Er})),r.d(o,"showColByKey",(function(){return jr})),r.d(o,"getColValue",(function(){return Pr})),r.d(o,"setColValue",(function(){return Rr})),r.d(o,"openListView",(function(){return kr})),r.d(o,"openMaxTable",(function(){return Br})),r.d(o,"isMaxView",(function(){return Fr})),r.d(o,"getMetaValByKey",(function(){return Mr})),r.d(o,"setColEditableByKey",(function(){return Vr})),r.d(o,"updateTableHeight",(function(){return Nr})),r.d(o,"getModalDataByIndex",(function(){return Ur})),r.d(o,"showEditAreaKey",(function(){return Kr})),r.d(o,"toggleCardTable",(function(){return _r})),r.d(o,"setQueryCondition",(function(){return qr})),r.d(o,"setGrandTableData",(function(){return Hr})),r.d(o,"getAllGrandData",(function(){return Lr})),r.d(o,"getViewGrandData",(function(){return Jr})),r.d(o,"delCacheGrandData",(function(){return Gr})),r.d(o,"getRowIdFromPkcode",(function(){return zr})),r.d(o,"saveFilterCustomColData",(function(){return $r})),r.d(o,"getSideParentCurrentIndex",(function(){return Yr})),r.d(o,"updateTable",(function(){return Xr})),r.d(o,"updateAfterBatchChange",(function(){return Zr})),r.d(o,"updateAndAddRows",(function(){return ea})),r.d(o,"updateDataByRefresh",(function(){return ta})),r.d(o,"refresh",(function(){return ra}));var i={};r.r(i),r.d(i,"createSimpleTable",(function(){return Sa})),r.d(i,"setAllTableData",(function(){return Ca})),r.d(i,"getTablePageInfo",(function(){return Ta})),r.d(i,"openModel",(function(){return Aa})),r.d(i,"closeModal",(function(){return Ia})),r.d(i,"setTableRender",(function(){return Da})),r.d(i,"setColScale",(function(){return xa})),r.d(i,"checkVisible",(function(){return Ea})),r.d(i,"getAllTableData",(function(){return ja})),r.d(i,"setTableValueByKeyAndRecord",(function(){return Pa})),r.d(i,"hideColByKey",(function(){return Ra})),r.d(i,"showColByKey",(function(){return ka})),r.d(i,"getCheckedRows",(function(){return Ba})),r.d(i,"selectAllRows",(function(){return Fa})),r.d(i,"reverseSelected",(function(){return Ma})),r.d(i,"deleteTableRowsByIndex",(function(){return Va})),r.d(i,"deleteTableRowsByRowId",(function(){return Na})),r.d(i,"addRow",(function(){return Ua})),r.d(i,"setTableValueBykey",(function(){return Ka})),r.d(i,"setTableValueDisabled",(function(){return _a})),r.d(i,"setTableValueRequired",(function(){return qa})),r.d(i,"focusRowByIndex",(function(){return Ha})),r.d(i,"updateDataByIndexs",(function(){return La})),r.d(i,"setValByKeyAndRowId",(function(){return Ja})),r.d(i,"selectTableRows",(function(){return Ga})),r.d(i,"getPks",(function(){return za})),r.d(i,"hasCacheData",(function(){return Wa})),r.d(i,"deleteCacheId",(function(){return Qa})),r.d(i,"addCacheId",(function(){return $a})),r.d(i,"updateTableData",(function(){return Ya})),r.d(i,"setClickRowIndex",(function(){return Xa})),r.d(i,"getClickRowIndex",(function(){return Za})),r.d(i,"setValByKeyAndIndex",(function(){return en})),r.d(i,"updateDiffDataByIndex",(function(){return tn})),r.d(i,"updateTableHeight",(function(){return rn})),r.d(i,"beforeAreaChangeHeight",(function(){return an})),r.d(i,"getSortParam",(function(){return nn})),r.d(i,"updateDataByRefresh",(function(){return on})),r.d(i,"saveFilterCustomColData",(function(){return ln}));var l={};r.r(l),r.d(l,"saveChangedRowsOldValue",(function(){return Vn})),r.d(l,"getChangedRowsOldValue",(function(){return Nn})),r.d(l,"delChangedRowsOldValue",(function(){return Un})),r.d(l,"createEditTable",(function(){return Kn})),r.d(l,"delRow",(function(){return _n})),r.d(l,"deleteTableRowsByIndex",(function(){return qn})),r.d(l,"deleteTableRowsByRowId",(function(){return Hn})),r.d(l,"getAllRows",(function(){return Ln})),r.d(l,"getVisibleRows",(function(){return Jn})),r.d(l,"getNumberOfRows",(function(){return Gn})),r.d(l,"getAllData",(function(){return zn})),r.d(l,"getViewData",(function(){return Wn})),r.d(l,"getAllRowsRemoveKeys",(function(){return Qn})),r.d(l,"addRow",(function(){return $n})),r.d(l,"filterEmptyRows",(function(){return Yn})),r.d(l,"getCurrentRecord",(function(){return Xn})),r.d(l,"focusRowByIndex",(function(){return Zn})),r.d(l,"setRowByIndex",(function(){return eo})),r.d(l,"setEditableRowByRowId",(function(){return to})),r.d(l,"setEditableRowByIndex",(function(){return ro})),r.d(l,"setEditableRowKeyByRowId",(function(){return ao})),r.d(l,"getFilterRows",(function(){return no})),r.d(l,"setFiltrateTableData",(function(){return oo})),r.d(l,"moveRow",(function(){return io})),r.d(l,"setRowStatus",(function(){return lo})),r.d(l,"getRowStatus",(function(){return co})),r.d(l,"getClickRowIndex",(function(){return uo})),r.d(l,"setClickRowIndex",(function(){return so})),r.d(l,"setRowPosition",(function(){return fo})),r.d(l,"insertRowsAfterIndex",(function(){return po})),r.d(l,"insertDataByIndexs",(function(){return ho})),r.d(l,"updateRows",(function(){return bo})),r.d(l,"updateRowsProps",(function(){return go})),r.d(l,"resetTableCaches",(function(){return vo})),r.d(l,"updateDataByIndexs",(function(){return mo})),r.d(l,"getColValue",(function(){return yo})),r.d(l,"setColValue",(function(){return wo})),r.d(l,"setColScale",(function(){return Oo})),r.d(l,"hideColByKey",(function(){return So})),r.d(l,"showColByKey",(function(){return Co})),r.d(l,"setValByKeyAndIndex",(function(){return To})),r.d(l,"setValByKeyAndRowId",(function(){return Ao})),r.d(l,"getValByKeyAndIndex",(function(){return Io})),r.d(l,"getValByKeyAndRowId",(function(){return Do})),r.d(l,"setEditableByKey",(function(){return xo})),r.d(l,"setEditableRowKeyByIndex",(function(){return Eo})),r.d(l,"checkVisible",(function(){return jo})),r.d(l,"setTableData",(function(){return Po})),r.d(l,"cancelEdit",(function(){return Ro})),r.d(l,"clearRequiredStatus",(function(){return ko})),r.d(l,"setStatus",(function(){return Bo})),r.d(l,"getStatus",(function(){return Fo})),r.d(l,"getChangedRows",(function(){return Mo})),r.d(l,"pasteRow",(function(){return Vo})),r.d(l,"getCacheDataById",(function(){return No})),r.d(l,"getCacheForEditModal",(function(){return Uo})),r.d(l,"setColEditableByKey",(function(){return Ko})),r.d(l,"updateTableData",(function(){return _o})),r.d(l,"checkRequired",(function(){return qo})),r.d(l,"updateDifference",(function(){return Ho})),r.d(l,"updateTable",(function(){return Lo})),r.d(l,"setEditableKeyEdit",(function(){return Jo})),r.d(l,"updateTableHeight",(function(){return Go})),r.d(l,"updateDataByRowId",(function(){return zo})),r.d(l,"getCheckedRows",(function(){return Wo})),r.d(l,"selectAllRows",(function(){return Qo})),r.d(l,"reverseSelected",(function(){return $o})),r.d(l,"openModel",(function(){return Yo})),r.d(l,"closeModel",(function(){return Xo})),r.d(l,"batchChangeTableData",(function(){return Zo})),r.d(l,"setCheckboxDisabled",(function(){return ei})),r.d(l,"setAllCheckboxAble",(function(){return ti})),r.d(l,"selectTableRows",(function(){return ri})),r.d(l,"getTableItemData",(function(){return ai})),r.d(l,"getTablePageInfo",(function(){return ni})),r.d(l,"setCheckboxFix",(function(){return oi})),r.d(l,"getSortParam",(function(){return ii})),r.d(l,"updateDataByRefresh",(function(){return li})),r.d(l,"saveFilterCustomColData",(function(){return ci})),r.d(l,"updateAfterBatchChange",(function(){return ui})),r.d(l,"updateAndAddRows",(function(){return si}));var c=r(3),u=r.n(c),s=r(6),d=r.n(s),f=r(0),p="NCCExtend",h=function(){},b=window.NCCExtendEable||!0,g={name:p,emptyf:h,enable:b};function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=p,O=function(e,t,r){return e&&"function"==typeof e[t]?e[t]:r||h},S=function(e,t,r){return"templateAlreadyLoaded"===t&&console.log("二开相关回调方法",a,t),!e||e[p]&&"{}"!==JSON.stringify(e[p])||(e=window),e&&e[p]?O(e[p],t,r):r||h},C={onAfterEvent:"after",onBeforeEvent:"before",onEditTableAfterEvent:"after",onEditTableBeforeEvent:"before",onFormAfterEvent:"after",onFormBeforeEvent:"before",onCardTableAfterEvent:"after",onCardTableBeforeEvent:"before"};function T(e){return Object.prototype.toString.call(e).slice(8,-1)}var A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;if("{}"===JSON.stringify(e[p])&&(e=window),!(e[p]&&t&&t.attrcode&&t.fxType))return r();var n=t.attrcode,o=t.moduleId,i=void 0===o?"":o,l=t.fxType,c=void 0===l?"onAfterEvent":l,u=t.fxParams,s=void 0===u?{}:u,d=e[p],f=m(m(m({},C),d.defaultFxConfig||{}),d[i+"-"+n]||{});if(a=a||S(e,c),"mixin"===f[c])return a(s,r);if("replace"===f[c])return a(s);if("before"===f[c]){var h=a(s);return"AsyncFunction"===T(h)?new Promise((function(e){h().then((function(t){r(),e(t)}))})):"Promise"===T(h)?new Promise((function(e){h.then((function(t){r(),e(t)}))})):r()}var b=r();return"AsyncFunction"===T(b)?new Promise((function(e){b().then((function(t){a(s),e(t)}))})):"Promise"===T(b)?new Promise((function(e){b.then((function(t){a(s),e(t)}))})):a(s)};function I(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw o}}}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P(e){if(this.formDataSource&&this.formDataSource[e])return this.formDataSource[e];throw Error("正在调用formID为".concat(e,"的表单的API, 但此表单还未通过use.form注册,请先注册此ID，才能正常调用API"))}function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=E({},e);return r.onBeforeEvent=function(){for(var r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];var o={areaId:a[0],itemId:a[1],methods:t.output,form:a[3],item:a[2]};return A(t,{moduleId:a[0],attrcode:a[1],fxType:"onFormBeforeEvent",fxParams:o},(function(){var r;return"function"!=typeof e.onBeforeEvent||(r=e.onBeforeEvent).call.apply(r,[t,E(E({},t.props),t.output)].concat(a))}))},r.onAfterEvent=function(r){var a=r.areaId,n=r.attrcode,o=r.curMetaItem,i=r.value,l=r.oldValue,c=r.componentValue,u=r.allValue,s=r.singleFormCode;if(o.editAfterFlag&&Object(f.isFunction)(t.handleRelationItems))t.handleRelationItems({type:"form",areaCode:a,formMetaCode:s,key:n,value:i,callback:function(){var r={areaId:a,itemId:n,methods:t.output,form:u,finalValue:i,oldValue:l,val:c};A(t,{moduleId:a,attrcode:n,fxType:"onFormAfterEvent",fxParams:r},(function(){"function"==typeof e.onAfterEvent&&e.onAfterEvent.call(t,E(E({},t.props),t.output),a,n,i,l,c,u)}))}});else{var d={areaId:a,itemId:n,methods:t.output,form:u,finalValue:i,oldValue:l,val:c};A(t,{moduleId:a,attrcode:n,fxType:"onFormAfterEvent",fxParams:d},(function(){"function"==typeof e.onAfterEvent&&e.onAfterEvent.call(t,E(E({},t.props),t.output),a,n,i,l,c,u)}))}},r}function k(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=P.call(this,e);return u.a.createElement(d.a,{key:e,store:a,name:e,formComponentUpdate:function(r){S(t,"updateForm")({form:r,moduleId:e,page:t,useOn:"create"})},config:R(r,this),getHotKeyConfig:function(){return{autoFocusDeferred:t.autoFocusDeferred,meta:t.state.meta,withHotKeyChange:t.withHotKeyChange,orderOfHotKey:t.orderOfHotKey,onLastFormEnter:r.onLastFormEnter}}})}function B(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,o=0,i=Object.keys(e);o<i.length;o++){var l=i[o],c=e[l].rows[0].values,u=P.call(this,l);u.setAllFormValue(c,t,r,a,n)}}function F(e){if(Array.isArray(e)){var t,r={},a=I(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;r[n]=M.call(this,n)}}catch(e){a.e(e)}finally{a.f()}return r}return M.call(this,e)}function M(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=P.call(this,e),a=t?ue(e,r.getAllFormValue()):ye(e,r.getAllFormValue()),n={values:a},o=r.getStatus();return"add"==o?n.status="2":"edit"==o&&(n.status="1"),{areaType:"form",rows:[n]}}function V(e,t){var r=P.call(this,e);if(r){if(Array.isArray(t)){return t.map((function(e){return r.getItemValue(e)}))}return r.getItemValue(t,!0)}if(Array.isArray(t)){return t.map((function(){return{display:null,value:null}}))}return{display:null,value:null}}function N(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=P.call(this,e),n=!1,o=0,i=Object.keys(t);o<i.length;o++){var l=i[o],c=a.getItemAttribute(l,"itemtype");"number"===c&&(n=!0),a.setItemValue(l,E({},t[l]),{cancel:r})}n&&a.forceUpdate()}function U(e,t){var r=P.call(this,e);if(Array.isArray(t)){return t.map((function(e){return!!r.getItemAttribute(e,"disabled")}))}return!!r.getItemAttribute(t,"disabled")}function K(e,t){P.call(this,e).setItemAttribute("disabled",t)}function _(e,t){P.call(this,e).setItemAttribute("required",t)}function q(e,t){var r=P.call(this,e);if(Array.isArray(t)){return t.map((function(e){return!!r.getItemAttribute(e,"required")}))}return!!r.getItemAttribute(t,"required")}function H(e,t){var r=P.call(this,e);if(Array.isArray(t)){return t.map((function(e){return!!r.getItemAttribute(e,"visible")}))}return!!r.getItemAttribute(t,"visible")}function L(e,t){P.call(this,e).setItemAttribute("visible",t)}function J(e,t){var r=P.call(this,e);if(Array.isArray(t)){return t.map((function(e){return!!r.getItemAttribute(e,"verify")}))}return!!r.getItemAttribute(t,"verify")}function G(e,t){P.call(this,e).setItemAttribute("verify",t)}function z(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=P.call(this,e);a.emptyAllFormValue(t,r)}function W(e){var t,r=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"danger",n=[],o=[],i=[],l=!0;if(Array.isArray(e))e.forEach((function(e,a){var l=P.call(r,e);0===a&&(t=l);var c=l.isCheckNow();n=n.concat(c.requiredItems),o=o.concat(c.regItems),i=i.concat(c.maxItems)}));else{var c=P.call(this,e);t=c;var u=c.isCheckNow();n=u.requiredItems,o=u.regItems,i=u.maxItems}if(n.length||o.length||i.length){l=!1;var s=t.getInnerHooks().getJson(),d="";n.length&&(d+="".concat(s["page-form-0001"],"：").concat(n.join(", "),"\n")),o.length&&(d+="".concat(s["page-form-0002"],"：").concat(o.join(", "),"\n")),i.length&&(d+="".concat(s["page-form-0010"],"：").concat(i.join(", "))),Object(f.toast)({mark:"form_isCheckNow",color:a,title:s["page-form-0009"],content:d})}return l}function Q(e,t){var r=P.call(this,e);r&&r.openArea(t)}function $(e,t){var r=P.call(this,e);r&&r.closeArea(t)}function Y(e,t,r){var a=P.call(this,e);a&&a.setAreaVisible(t,r)}function X(e,t,r){var a=P.call(this,e);a&&a.getAreaVisible(t,r)}function Z(e,t){var r=P.call(this,e);r&&r.getInnerHooks().setFormTabs(t)}function ee(e){var t=P.call(this,e);t&&t.getInnerHooks().getFormTabs()}function te(e){if(Array.isArray(e)){var t,r=I(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;P.call(this,a).cancel()}}catch(e){r.e(e)}finally{r.f()}}else{P.call(this,e).cancel()}}function re(e,t){P.call(this,e).setStatus(t)}function ae(e){return P.call(this,e).getStatus()}function ne(){return!1}function oe(e){P.call(this,e).countFormWidth()}function ie(e,t){var r=P.call(this,e);console.log(e),r.getInnerHooks().setStore("autoFocusFormItem",t)}function le(e){console.log(e)}function ce(e){if(!Array.isArray(e))return M.call(this,e,!0);var t,r={},a=I(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;return r[n]=M.call(this,n,!0),r}}catch(e){a.e(e)}finally{a.f()}}function ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={};for(var a in t)se(t[a].value)?r[a]={}:r[a]={value:t[a].value};return r}function se(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return!(null!=e&&!r.find((function(t){return t==e})))}function de(e,t){L.call(this,e,t)}function fe(e,t){return t}function pe(e){}function he(e,t){e&&t&&f.PubSub.publish("autoFocus",{data:t})}function be(e){}function ge(e){}function ve(e,t,r){var a=P.call(this,e);if(a&&t){var n=F.call(this,e),o=(n=(n=n.rows?n.rows[0]:{}).values?n.values:{})[r]?n[r].value||n[r].display||n[r]:"";if(r&&o==t[r]){for(var i in t)n[i]=E(E({},n[i]),{},{value:t[i]});a.setAllFormValue(n)}console.log("update form data by pkname:",r)}}function me(e){}function ye(e,t){var r={};for(var a in t){var n=null;t[a]&&("String"===Object.prototype.toString.call(t[a].value).slice(8,-1)&&(t[a].value=t[a].value.trim()),n={display:t[a].display,value:t[a].value},t[a].hasOwnProperty("scale")&&(n.scale=t[a].scale)),r[a]=n}return r}function we(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Oe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Se(){return this.register("form"),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?we(Object(r),!0).forEach((function(t){Oe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):we(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({store:d.a.useForm},Ce.call(this,n))}function Ce(e){for(var t={},r=0,a=Object.keys(e);r<a.length;r++){var n=a[r];t[n]=e[n].bind(this)}return t}Se.component=d.a,Se.displayName="Form",Se.unfinished=[];var Te=r(5),Ae=r.n(Te),Ie=r(2);function De(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function xe(e){return function(e){if(Array.isArray(e))return Pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||je(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],a=!0,n=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){n=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(n)throw o}}return r}(e,t)||je(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){if(e){if("string"==typeof e)return Pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pe(e,t):void 0}}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Re(e,t,r,a,n,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(a,n)}function ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(r),!0).forEach((function(t){Fe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Me=Ie.utils.isFunction,Ve=Ie.utils.isArray,Ne=Ie.utils.isObject,Ue=Ie.utils.warningOnce,Ke=Ie.utils.isString,_e=Ie.utils.isUndefined,qe=Ie.utils.isWrong,He=Ae.a.useCardTable,Le=Ae.a.TabsTableStore,Je=Ie.CONFIG.ROW_STATUS;function Ge(e,t,r){var a=r.grandGroup,n=[];Ve(a)&&t&&a.forEach((function(r){if(n.push(r.grandTableId),!e.cardTableDataSource[r.grandTableId]){var a=t.getStore("grandTableStore");a[r.grandTableId]=Le(),e.cardTableDataSource[r.grandTableId]=a[r.grandTableId],t.setStore("grandTableStore",a,!1)}t.setStore("grandTableIds",n,!1)}))}function ze(e,t,r){var a=this;return"onRowClick"===e?function(e,r,n,o){return t.call(a,Be(Be({},a.props),a.output),e,r,n,o)}:"onRowDoubleClick"===e?function(e,r,n){return t.call(a,Be(Be({},a.props),a.output),e,r,n)}:"modelSave"===e?function(e){return t.call(a,Be(Be({},a.props),a.output),e)}:"modelClose"===e?function(){return t.call(a,Be(Be({},a.props),a.output))}:"modelFooter"===e||"modelDelRowBefore"===e||"modelAddRow"===e?function(e,r,n){return t.call(a,Be(Be({},a.props),a.output),e,r,n)}:"modelDelRow"===e||"modelAddRowBefore"===e?function(e,r){return t.call(a,Be(Be({},a.props),a.output),e,r)}:"onAfterEvent"===e?function(e,r){e.currentName;var n=e.moduleId,o=e.record,i=e.rowKey,l=e.rowKeyValue,c=e.rowIndex,u=e.attrcode,s=e.column,d=e.value,f=void 0===d?{}:d,p=e.oldValue,h=void 0===p?{}:p,b=e.componentValue,g=e.event,v=e.triggerType,m=void 0===v?"onChange":v,y=e.isTriggerModal,w=void 0!==y&&y,O=e.activeCode;r||console.warn("not find current currentStore !!!");var S=f.value;if("input"===s.itemtype&&["vchangerate","vqtunitrate"].includes(u)){if(S&&S.length<1e3&&!/^([1-9][0-9]*|0)(\.\d{1,})?(\/)(([1-9][0-9]*)(\.\d{1,})?|(\d\.\d{1,}))$/.test(S))return w||r.setCellProps(l,u,{isEdit:!1}),void r.setCellProps(l,u,{value:null})}var C=[],T=s.isMultiSelectedEnabled;if(s.refcode){var I=s.refcode.replace(".js","");I.startsWith("/")&&(I=I.substring(1));var D=window[I]&&window[I].default();D&&D.props&&D.props.isMultiSelectedEnabled&&(T=D.props.isMultiSelectedEnabled)}var x=[];if(T&&h){var E=Ke(h.value)?h.value.split(","):Ve(h.value)?h.value:[h.value];(Ke(f.value)?f.value.split(","):Ve(f.value)?f.value:[f.value]).forEach((function(e,t){C.push({rowid:o.rowid,newvalue:{value:e||""},oldvalue:{value:E[0]||""}})}))}else C.push({rowid:o[i],newvalue:{value:S||""},oldvalue:{value:h.value||""}});if(r.saveRowOldValue(o[i],u,x.length>0?x[0]:S),s.editAfterFlag&&a.handleRelationItems)a.handleRelationItems({type:"table",areaCode:n,key:u,changedrows:C,index:c,rowid:o[i],record:o,tableMetaCode:O,column:s,callback:function(){var e={moduleId:n,record:o,attrcode:u,methods:a.output,rows:r.getViewData(),index:c,val:"refer"===s.itemtype||"residtxt"===s.itemtype?b:f.value,changedRows:C,actionTag:"onBlur"===m?"blur":"change"};A(a,{moduleId:n,attrcode:u,fxType:"onCardTableAfterEvent",fxParams:e},(function(){return t(Be(Be({},a.props),a.output),n,u,"refer"===s.itemtype||"residtxt"===s.itemtype?b:f.value,C,c,o,w?"model":"line","onBlur"===m?"blur":"change",r.getViewData(),g)}))}});else{var j={moduleId:n,record:o,attrcode:u,methods:a.output,rows:r.getViewData(),index:c,val:"refer"===s.itemtype||"residtxt"===s.itemtype?b:f.value,changedRows:C,actionTag:"onBlur"===m?"blur":"change"};A(a,{moduleId:n,attrcode:u,fxType:"onCardTableAfterEvent",fxParams:j},(function(){return t(Be(Be({},a.props),a.output),n,u,"refer"===s.itemtype||"residtxt"===s.itemtype?b:f.value,C,c,o,w?"model":"line","onBlur"===m?"blur":"change",r.getViewData(),g)}))}}:"onBeforeEvent"===e?function(){var e,r=(e=regeneratorRuntime.mark((function e(r){var n,o,i,l,c,u,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.moduleId,o=r.record,r.rowKey,r.rowKeyValue,i=r.rowIndex,l=r.attrcode,r.column,r.value,r.event,r.triggerType,c=r.isTriggerModal,u=void 0!==c&&c,console.log(o,l,"编辑前"),s={moduleId:n,record:o,attrcode:l,methods:a.output,val:o.values[l],index:i,areaTag:u?"model":"line"},e.next=5,A(a,{moduleId:n,attrcode:l,fxType:"onCardTableBeforeEvent",fxParams:s},(function(){return t(Be(Be({},a.props),a.output),n,l,o.values[l],i,o,u?"model":"line")}));case 5:return e.t0=e.sent,e.abrupt("return",!1!==e.t0);case 7:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(a,n){var o=e.apply(t,r);function i(e){Re(o,a,n,i,l,"next",e)}function l(e){Re(o,a,n,i,l,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}():"onSelected"===e?function(e,r,n,o){return t.call(a,Be(Be({},a.props),a.output),e,r,n,o)}:"onCellKeyDown"===e?function(e,r,n,o,i,l){return t.call(a,Be(Be({},a.props),a.output),e,r,n,o,i,l)}:"onBatchSelected"===e?function(e,r){return t.call(a,Be(Be({},a.props),a.output),e,r)}:"onSelectedAll"===e||"selectedChange"===e?(r&&"selectedChange"===e&&(r.selectedChange=t),function(e,r,n){return t.call(a,Be(Be({},a.props),a.output),e,r,n)}):"onTabChange"===e||"onHeadAngleToggle"===e?(r&&"onHeadAngleToggle"===e&&(r.onHeadAngleToggle=t),function(e,r){return t.call(a,Be(Be({},a.props),a.output),e,r)}):("statusChange"===e&&(r.statusChange=t),"tableStatusChanged"===e&&(r.tableStatusChanged=t),"onBodyScroll"===e?function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.call.apply(t,[a,Be(Be({},a.props),a.output)].concat(r))}:t)}function We(e,t){"moduleId"===t&&(e.name=e.moduleId),"isAddRow"===t&&(e.autoAddRow.enabled=e.isAddRow),"addRowCallback"===t&&(e.autoAddRow.callback=e.addRowCallback.bind(this)),"addRowDefaultValue"===t&&(e.autoAddRow.defaultValue=e.addRowDefaultValue),"rowClassList"===t&&(e.rowClassnName=e.rowClassList),"height"===t&&(e.bodyStyle={minHeight:e.height||300},e.scroll={x:!0,y:e.height||300},delete e.height),"setCellClass"===t&&(e.cellClassName=function(t,r,a){return Me(e.setCellClass)&&e.setCellClass(r,t,a)}),"alloweFilter"===t&&(e.high_filter={alloweFilter:e.alloweFilter})}function Qe(e){var t=this;e.onChange=function(r){r.rowKey,r.rowKeyValue;var a=r.rowIndex,n=(r.attrcode,r.value),o=r.column;r.e;if("input"===o.itemtype&&["vchangerate","vqtunitrate"].includes(o.attrcode)){if(n&&!/^[0-9\/\.]+$/.test(n))return}if(Me(e.inputChange)&&!e.inputChange.call(t,{index:a,item:o,valueChange:n.value}))return},e.autoAddRow=e.autoAddRow||{},e.onAfterEvent=e.onAfterEvent||function(){},e.onBeforeEvent=e.onBeforeEvent||function(){}}function $e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,a=this;for(var n in e){var o=e[n];if(Ne(o))for(var i in Qe.call(a,o),o)"grandGroup"===i&&Ve(o[i])&&o[i].forEach((function(e){var t=e.grandTableConfig,r=e.grandTableId;$e.call(a,Fe({},r,t),{},r)})),We.call(a,o,i),Me(o[i])&&(o[i]=ze.call(a,i,o[i],t[n],r))}return e}function Ye(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this,n=a.cardTableDataSource[e],o=Object.assign({},r);if(n||(n=He(),a.cardTableDataSource[e]=n,a.myTableData[e]&&(n.setTableData(a.myTableData[e]),n.setTableProps("focusIndex",-1,!1),delete a.myTableData[e])),Ne(o.multiConfig)){for(var i in o.multiConfig)a.cardTableDataSource[i]=a.cardTableDataSource[i]||He(),n.addTabStore(i,a.cardTableDataSource[i]);var l=n.getTabsStores();o.multiConfig=$e.call(a,o.multiConfig,l,e)}Ne(o.multiConfig)&&!o.multiConfig[e]&&(o.multiConfig[e]=o),o=$e.call(a,Fe({},e,o),Fe({},e,n),e)[e]||o,Ge(a,n,Ne(o.multiConfig)&&o.multiConfig[e]?o.multiConfig[e]:o);var c={};return a.state.renderItem&&a.state.renderItem.table&&(c=a.state.renderItem.table||{}),n.setConfig(o),u.a.createElement(Ae.a,{afterLangload:function(e,t){a.cardTableDataSource._langJson=e||{}},onCellHyperlinkTo:function(e,t,r,n){Object(f.linkTo)(a.state.meta.pageid,n,t,r.value)},name:e,store:n,config:o,multiConfig:o.multiConfig||{},renderItems:c,mountChildrenStore:function(e,t){a.cardTableDataSource[e]=t(a.cardTableDataSource[e]),o.multiConfig&&o.multiConfig[e]&&Ge(a,a.cardTableDataSource[e],o.multiConfig[e])},cardTableComponentUpdate:function(e,t){S(a,"updateEditTable")({pageScope:a,data:t,props:e,useOn:"create"})},getHotKeyConfig:function(){return{autoFocusDeferred:t.autoFocusDeferred,meta:t.state.meta,withHotKeyChange:t.withHotKeyChange,orderOfHotKey:t.orderOfHotKey,onLastFormEnter:r.onLastFormEnter}}})}var Xe=function(e){var t=this.cardTableDataSource[e];if(t)return t;Ue(!1,"所操作的表格中无ID为".concat(e,"的数据"))};function Ze(e,t){var r=Xe.call(this,e);r&&r.setLayout(t)}function et(e,t){var r=Xe.call(this,e);r&&r.setTabsTableData(t,!0,e)}function tt(e){var t=Xe.call(this,e);t&&t.resetTabsTableData(!1,e)}function rt(e){var t=Xe.call(this,e);if(t)return t.getTabsTableData(e)}function at(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Xe.call(this,e);if(a){var n=this;return a.setTabsTableStatus(r,!1,e,(function(e,a,o){"browse"!==o&&"browse"==r[e]&&(Object(f.clearOneTypeToast)("danger"),ht.call(n||t,e))}))}}function nt(e,t){var r=Xe.call(this,e);if(r)return r.setTabsTableShow(e,t,!this.isUpdatePage)}function ot(e,t){var r=Xe.call(this,e);if(r)return r.setTabsTableActive(e,t,!this.isUpdatePage)}function it(e){var t=Xe.call(this,e);if(t)return t.getTabsTableActive(e)}function lt(e){var t=e.items,r=e.rows,a=e.allToast,n=e.rowKey,o={},i=[];return t.forEach((function(e){var t=e.attrcode;r.forEach((function(e){var r=e.values;_e(r[t])&&(r[t]={})}))})),r.forEach((function(e,r){var l=[],c=e.values;Object.entries(c).forEach((function(r){var a=Ee(r,2),c=a[0],u=a[1].value;Ke(u)&&(u=u.trim()),qe(u)&&t.forEach((function(t){var r=t.attrcode,a=t.required,u=t.label;a&&r===c&&(l.push(u),o[e[n]]=o[e[n]]||{},o[e[n]][t.attrcode]=t.attrcode,i.length||(i=[e[n],t.attrcode]))}))})),l.length>0&&(a["第".concat(r+1,"行")]=l)})),{tabToast:a,validateFailed:o,firstValidateFaild:i}}function ct(e){var t=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=Xe.call(this,e);if(!a)return!1;var n=a.getMeta()||this.state.meta,o=this.cardTableDataSource._langJson||{},i=n.gridrelation,l=n.containerrelation,c={},u={},s=[],d={},p=l[e],h=[];Array.isArray(p)&&p.length&&p.forEach((function(e){h.push.apply(h,xe(e))}));var b=h.reduce((function(e,r){var a=i[r],o=Xe.call(t,r);if(!o||!a)return e;var l=o.getViewData("filter"),c=(a.initialTabRelation||a.tabRelation).reduce((function(e,t){var r=n[t].name,a=o.getArrayMeta(t)||[];return a=a.filter((function(e){return e.visible})),e[t]={name:r,items:a},e}),{});return e[r]={tabRelationMuster:c,rows:l},e}),{}),g=function(e){var r=b[e],a=Xe.call(t,e),n=a?a.getTableProps("rowKey"):"rowid";c[e]=c[e]||{},u[e]=u[e]||[];var o=r.tabRelationMuster,i=r.rows;Object.entries(o).forEach((function(t){var r=Ee(t,2),a=r[0],o=r[1],l=o.name,f=lt({items:o.items,rows:i,allToast:{},rowKey:n}),p=f.tabToast,h=f.validateFailed,b=f.firstValidateFaild;c[e][a]=c[e][a]||{},Object.keys(p).length&&(c[e][a]=h,u[e].length||(u[e]=[a].concat(xe(b))),s.push(a),d["".concat(l,"(页签)")]=p)}))};for(var v in b)g(v);if(s.length){for(var m in console.log(c,u),c){var y=Xe.call(this,m),w=c[m],O=!1;if(y&&w){for(var S in console.log(y),y.setCache("validateFailed",c),y.setCache("firstValidateFaild",u),w){var C=w[S];if(C)for(var T in C)if(T){var A=C[T];if(A)for(var I in A)y.setCellProps(T,I,{validated:!1},!1);O=!0}}O&&y.refresh()}}if(u&&r){var D=h?Ve(h)?h:[h]:h||this.orderOfHotKey,x=null,E=null;D.some((function(e){var t=u[e];if(t&&t.length>0)return x="#js_lightTabs_header_".concat(e,' [name="').concat(t[0],'"] a'),E='.table-cell-wrapper[cellselectorkey="'.concat(t[1],"@").concat(t[2],'"] [tabindex="0"]'),!0}));var j=document.querySelector(x);j&&j.click(),setTimeout((function(){var e=document.querySelector(E);e&&(e.ncExecuteFocus=!0,e.focus(),e.ncExecuteFocus=!1)}),300),console.log(D,u,x,E)}var P=Object.entries(d).reduce((function(e,t){var r=Ee(t,2),a=r[0],n=r[1];return e.push("".concat(a," :")),Object.entries(n).forEach((function(t){var r=Ee(t,2),a=r[0],n=r[1];e.push("".concat(a,": ").concat(n.join(", ")))})),e}),[]);return Object(f.toast)({content:"".concat(o&&o.table_no_empty,"："),color:"danger",TextArr:[o.table0022,o.table0023,o.table0024],groupOperation:!0,groupOperationMsg:P,mark:"edit-table-toastx"}),a.setStore("errorTabIds",s),P&&P.length>0&&a.setCache("errorContent",P),!1}return a.setStore("errorTabIds",[]),a.setCache("errorContent",[]),!0}function ut(e,t,r,a){var n=Xe.call(this,e);n&&n.saveRowOldValue(t,r,a)}function st(e,t,r){var a=Xe.call(this,e);if(a)return a.getRowOldValue(t,r)}function dt(e,t,r){var a=Xe.call(this,e);a&&a.deleteRowOldValue(t,r)}function ft(e,t,r){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(t&&t.rows&&Ve(t.rows)){var o=Xe.call(this,e);if(!o)return this.myTableData[e]=t,void(Me(r)&&r.call(this,Be(Be({},this.props),this.output),e,t));t=o.setTableData(t,{isCache:a,isTop:n,shouldForceUpdate:!this.isUpdatePage}),Me(o.selectedChange)&&o.selectedChange(Be(Be({},this.props),this.output),e,0),Me(r)&&r.call(this,Be(Be({},this.props),this.output),e,t)}else Ue(t,"传入的第二个参数为所设置的数据，数据格式是对象，且有个rows属性，rows的内容是数组")}function pt(e){var t=Xe.call(this,e);if(t)return t.getTableProps("status")}function ht(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=Xe.call(this,e);if(r){var a=r.getCache("validateFailed")||{};for(var n in a){var o=Xe.call(this,n),i=a[n];if(o&&i){for(var l in i){var c=i[l];if(c)for(var u in c)if(u){var s=c[u];if(s)for(var d in s)o.setCellProps(u,d,{validated:!0},!1)}}o.setCache("validateFailed",null),o.setCache("firstValidateFaild",null)}r.setCache("validateFailed",null),r.setCache("firstValidateFaild",null)}if(t&&r){var f=r.getStore("grandTableStore")||{},p=r.getCache("grandValidateFailed")||{};for(var h in f){var b=f[h];for(var g in p){var v=p[g];if(b&&v){var m=v[h];if(m){for(var y in m){var w=m[y];if(w)for(var O in w)if(O){var S=w[O];if(S)for(var C in S)b.setCellProps(O,C,{validated:!0},!1)}}b.setCache("validateFailed",null)}}}}r.setCache("grandValidateFailed",null)}}}function bt(e,t){var r=Xe.call(this,e);r&&("browse"!==(r.getTableProps("status")||"browse")&&"browse"==t&&(Object(f.clearOneTypeToast)("danger"),ht.call(this,e)),"edit"===t&&r.setStore("expandedRowKeys",[],!this.isUpdatePage),r.setTableStatus(t,{shouldForceUpdate:!this.isUpdatePage}),Me(r.tableStatusChanged)&&r.tableStatusChanged(e,{props:r,status:t}))}function gt(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Xe.call(this,e);return r?r.getAllRows(t):[]}function vt(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Xe.call(this,e);return r?r.getVisibleRows(t):[]}function mt(e){var t=Xe.call(this,e);return t?t.getChangedRows():[]}function yt(e,t){return Xe.call(this,e)?t?gt.call(this,e,!1).length:vt.call(this,e,!1).length:0}function wt(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=gt.call(this,e,t),a={areaType:"table",rows:r,areacode:null};return a}function Ot(e,t){var r=Xe.call(this,e);return r?r.toggleRowView(t):[]}function St(e,t,r){var a=this,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4?arguments[4]:void 0,i=arguments.length>6?arguments[6]:void 0,l=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],c=Xe.call(this,e);c&&(t=_e(t)?yt.call(this,e,!1):t,r||(r={}),c.addTableRow(t,r,!this.isUpdatePage&&l,{autoFocus:n,isAutoAddRow:i,callback:function(){Me(o)&&o.call(a,e,t,{rows:c.getViewData()}),f.PubSub.publish("heightToScroll",!0)}}))}function Ct(e,t,r,a){var n=Xe.call(this,e);n&&(n.deleteTableRows({rowKeyValues:t},a,!1),n.clearValidated(),Me(r)&&r.call(this,e,t,n.getStore()),f.PubSub.publish("heightToScroll",!0))}function Tt(e,t,r,a){var n=Xe.call(this,e);if(n){var o=n.deleteTableRows({rowIndexs:t},a,!1);n.clearValidated(),Me(r)&&r.call(this,e,t,n.getStore(),o),f.PubSub.publish("heightToScroll",!0)}}function At(e,t,r,a,n){var o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],i=Xe.call(this,e);if(i){var l=i.getData();l.length?i.setValByKeyAndIndex(t,r,a,{isSetEdit:!0,isUpdateBatch:o,shouldForceUpdate:!this.isUpdatePage}):console.warn("empty data cant setting value")}}function It(e,t,r,a,n){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],i=Xe.call(this,e);i&&i.setValByKeyAndRowId(t,r,a,{isUpdateBatch:o,shouldForceUpdate:!1})}function Dt(e,t){var r=Xe.call(this,e);r&&(Object(f.clearOneTypeToast)("danger"),r.resetTableData({shouldForceUpdate:!this.isUpdatePage}))}function xt(e,t,r){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(Ne(t)&&Ve(t.rows)){var n=Xe.call(this,e);n&&(n.updateTableData(t,a,!this.isUpdatePage),n.selectedChange&&n.selectedChange(Be(Be({},this.props),this.output),e,0))}else Ue(t,"传入的第二个参数为所设置的数据，数据格式是对象，且有个rows属性，rows的内容是数组")}function Et(e,t,r){var a=Xe.call(this,e);if(a)return a.getValByKeyAndIndex(t,r)}function jt(e,t,r){var a=Xe.call(this,e);if(a)return a.getValByKeyAndRowKey(t,r)}function Pt(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=Xe.call(this,e);n&&n.setCellsProps({rowKeyValues:[t],attrcodes:0===r?void 0:r,value:{disabled:!a},shouldForceUpdate:!this.isUpdatePage})}function Rt(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=Xe.call(this,e);n&&n.setCellsProps({rowIndexs:t,attrcodes:0===r?void 0:r,value:{disabled:!a},shouldForceUpdate:!this.isUpdatePage})}function kt(e,t,r){var a=Xe.call(this,e);if(a){var n=a.getRows({rowIndexs:[t]})[0];t=void 0===t?0:t+1,a.pasteRow({copyRow:n,index:t,excludeKeys:r})}}function Bt(e){var t=Xe.call(this,e);return t?t.getSelectedRows():[]}function Ft(e,t){var r=this,a=Xe.call(this,e);return a?a.setAllRowsSelected(t,!this.isUpdatePage,(function(){var t=a.getSelectedRows().length;Me(a.selectedChange)&&a.selectedChange(Be(Be({},r.props),r.output),e,t)})):[]}function Mt(e,t){var r=Xe.call(this,e);if(r){r.setRowsSelected({rowIndexs:t},!0);var a=r.getSelectedRows().length;Me(r.selectedChange)&&r.selectedChange(Be(Be({},this.props),this.output),e,a)}}function Vt(e,t){var r=Xe.call(this,e);if(r){r.setRowsSelected(t,!1);var a=r.getSelectedRows().length;Me(r.selectedChange)&&r.selectedChange(Be(Be({},this.props),this.output),e,a)}}function Nt(e){var t=Xe.call(this,e);if(t){t.reverseRowsSelected(!this.isUpdatePage);var r=t.getSelectedRows().length;Me(t.selectedChange)&&t.selectedChange(Be(Be({},this.props),this.output),e,r)}}function Ut(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"except",a=Xe.call(this,e);a&&a.removeEmptyRows({keys:t,rule:r})}function Kt(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Xe.call(this,e);a&&a.filterEmptyGrandRows(t,r)}function _t(e,t){var r=Xe.call(this,e);if(r)return r.getAllRowsRemoveKeys(t)}function qt(e){var t=Xe.call(this,e);if(!t)return[];t.setStore("expandedRowKeys",[])}function Ht(e){var t=Xe.call(this,e);return t?JSON.parse(JSON.stringify(t.getCache(["base"]))):[]}function Lt(e,t){var r=Xe.call(this,e);if(!r)return[];r.setTableProps("focusIndex",t,!1),r.setTableProps("currentIndex",t,!0,(function(){r.setTableProps("focusIndex",-1,!1)}))}function Jt(e){var t=Xe.call(this,e);return t?t.getMixinMetaOfData():[]}function Gt(e,t,r,a){var n=Xe.call(this,e);if(!n)return[];var o=Object(f.getCookie)("langCode")||"simpchn";return n.getFilterRows(t,r,o)}function zt(e,t,r,a){var n=Xe.call(this,e);if(!n)return[];var o=Object(f.getCookie)("langCode")||"simpchn";return n.setFiltrateTableData(t,r,a,o,e)}function Wt(e){var t=Xe.call(this,e);return t?t.batchChangeTableData():null}function Qt(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Xe.call(this,e);if(!a)return[];a.updateTableDataByIndexs(t,r,!this.isUpdatePage),a.clearValidated()}function $t(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Xe.call(this,e);return a?(a.insertDataByIndexs(t,r,!this.isUpdatePage),{rows:a.getData()}):[]}function Yt(e,t){var r=Xe.call(this,e);if(!r)return[];r.setRowStatusByIndexs(t,!0)}function Xt(e,t,r){var a=Xe.call(this,e);if(!a)return[];a.insertRowsAfterIndex(t,r)}function Zt(e,t,r){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=Xe.call(this,e);if(!o)return[];o.setCellProps({attrcode:r,rowIndex:t,shouldForceUpdate:n,value:{isEdit:a}})}function er(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Xe.call(this,e);if(!a)return[];var n=a.getRows({rowIndexs:[t]})[0];a.getTableProps("rowKey");if(!n)return console.warn("unknow row data");for(var o in n.status==Je.origin&&a.setRowProps({rowIndex:t},{status:Je.edit},!1),r)a.setCellValue({attrcode:o,rowIndex:t,shouldForceUpdate:!1,value:r[o]});this.isUpdatePage||a.refresh()}function tr(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=Xe.call(this,e);if(r){var a=r.getCheckInfo();a.disabledAll=!t,r.setCheckInfo({checkInfo:a,shouldForceUpdate:!1});var n=r.getData(),o=r.getTableProps("rowKey");n.forEach((function(e){r.setRowProps({rowKeyValue:e[o]},{disabled:!t},!1)})),this.isUpdatePage||r.refresh()}}function rr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var r in e){var a=Xe.call(this,r);if(!a)return[];var n=JSON.parse(JSON.stringify(e[r]));n.rows=a.formatData(n.rows),a.setCache(["base"],JSON.parse(JSON.stringify(n))),a.setCache(["all"],null);var o=a.getData();a.clearRowsOldValue({rows:o}),a.setData({data:n.rows,shouldForceUpdate:!0});var i=a.getData();a.saveRowsOldValue({rows:i}),Me(t)&&t()}}function ar(e,t){var r=Xe.call(this,e);return r?r.getRows({rowIndexs:t}):[]}function nr(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a={key:{},label:{},ids:[]};if(!Ve(e)&&!Ke(e)&&!_e(e))return Ue(!Ve(e)&&!Ke(e)&&!_e(e),"不传检测所有表，传入字符串检测当前表，传入数组检测数组中的每一项，其他格式错误"),a;var n=this.cardTableDataSource._langJson||{},o=this.state.meta,i=o.gridrelation,l=o.containerrelation;l&&console.log("current meta include mutil containerrelation"),e=_e(e)?null:Ve(e)?e:[e];var c={},u={},s=function(l){var s=i[l];a.key[l]={};var d=o[l].name||n.table0010;c[l]=c[l]||{},u[l]=u[l]||[];var f=Xe.call(t,l),p=f?f.getTableProps("rowKey"):"rowid";e?e.includes(l)&&a.ids.push(d):a.ids.push(d);var h="".concat(n.table007,"_")+d+" > ";a.label[h]={};var b=gt.call(t,l).filter((function(e){return e.status!=Je.delete})),g=s.tabRelation,v=void 0===g?[]:g;v.length&&v.forEach((function(e){var t=e+"_TAB",i=o[e].name||n.table009,s="".concat(i,"(").concat(n.table008,")")+" ： ";a.key[l][t]={},a.label[h][s]={},c[l][e]={};var d=Ne(o[e])?o[e].items:[];r&&(d=d.getArrayData?d.getArrayData():Wr(d)),(d=d.getArrayData?d.getArrayData():d).forEach((function(r){r.required&&r.visible&&b.length>0&&b.forEach((function(o,i){var d="".concat(n.table_first).concat(i+1).concat(n.table_row,"：");if(a.key[l][t][i]=a.key[l][t][i]||{},a.label[h][s][d]=a.label[h][s][d]||{},o.values[r.attrcode]){var f=o.values[r.attrcode].value;qe(f)&&(a.key[l][t][i][r.attrcode]=r.label,a.label[h][s][d][r.label]=" 为空",c[l][e][o[p]]=c[l][e][o[p]]||{},c[l][e][o[p]][r.attrcode]=r.attrcode,u[l].length||(u[l]=[e,o[p],r.attrcode]))}else a.key[l][t][i][r.attrcode]=r.label,a.label[h][s][d][r.label]=" 为空",c[l][e][o[p]]=c[l][e][o[p]]||{},c[l][e][o[p]][r.attrcode]=r.attrcode,u[l].length||(u[l]=[e,o[p],r.attrcode])}))}))}))};for(var d in i)s(d);return a.validateFailed=c,a.firstValidateFaild=u,a}function or(e){var t=Xe.call(this,e);if(t)return t.getCache("oldBatchData")}function ir(e){var t=this;e.forEach((function(e){var r=e.areacode,a=e.fieldcode,n=e.scale;t.state.meta[r].items.forEach((function(e){e.attrcode===a&&(e.scale=n)}))})),this.meta.setMeta(this.state.meta)}function lr(e,t){var r=!1;return this.state.meta[e].items.forEach((function(e){var a=e.visible,n=e.attrcode,o=e.children;_e(o)?t===n&&a&&(r=!0):o.forEach((function(e){var a=e.visible;t===n&&a&&(r=!0)}))})),r}function cr(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t||console.log("not get tableId");var r=this.cardTableDataSource._langJson||{},a=this.state.meta,n=a.gridrelation,o=a.containerrelation;o&&console.log("current meta include mutil containerrelation");var i=[],l=function(o){var l=t[o]||[],c=Xe.call(e,o),u=c&&c.getViewData("filter");if(u){var s=c.getStore("grandTable")||{},d=c.getTableProps("rowKey")||"rowid",f=[];u.forEach((function(t,o){var i=s[t[d]]||{};if(i){var c={key:{},label:{},ids:[]},u={},p={};l.forEach((function(t){var o=n[t]||{};c.key[t]={};var l=a[t].name||r.table0010;u[t]=u[t]||{},p[t]=p[t]||{};var s=Xe.call(e,t),d=s?s.getTableProps("rowKey"):d;c.ids.push(l);var f="".concat(r.table007,"_")+l+" > ";c.label[f]={};var h=((i[t]||{}).rows||[]).filter((function(e){return e.status!=Je.delete})),b=o.tabRelation,g=void 0===b?[t]:b;g.length&&g.forEach((function(e){var n=e+"_TAB",o=a[e].name||r.table009,i="".concat(o,"(").concat(r.table008,")")+" ： ";c.key[t][n]={},c.label[f][i]={},u[t][e]={};var l=Ne(a[e])?a[e].items:[];(l=(l=l.getArrayData?l.getArrayData():Wr(l)).getArrayData?l.getArrayData():l).forEach((function(a){a.required&&a.visible&&h.length>0&&h.forEach((function(o,l){var s="".concat(r.table_first).concat(l+1).concat(r.table_row,"：");if(c.key[t][n][l]=c.key[t][n][l]||{},c.label[f][i][s]=c.label[f][i][s]||{},o.values[a.attrcode]){var h=o.values[a.attrcode].value;qe(h)&&(c.key[t][n][l][a.attrcode]=a.label,c.label[f][i][s][a.label]=" 为空",u[t][e][o[d]]=u[t][e][o[d]]||{},u[t][e][o[d]][a.attrcode]=a.attrcode,Object.keys(p[t]).length||(p[t][e]={},p[t][e][o[d]]=a.attrcode))}else c.key[t][n][l][a.attrcode]=a.label,c.label[f][i][s][a.label]=" 为空",u[t][e][o[d]]=u[t][e][o[d]]||{},u[t][e][o[d]][a.attrcode]=a.attrcode,Object.keys(p[t]).length||(p[t][e]={},p[t][e][o[d]]=a.attrcode)}))}))}))})),c.validateFailed=u,c.firstValidateFaild=p,f.push({index:o,rowKeyValue:t[d],info:"".concat(r.table_first).concat(o+1).concat(r.table_row,"："),errorInfo:c})}})),i.push({id:o,info:a[o].name||r.table0010,row:f})}};for(var c in t)l(c);return i}function ur(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"rowid",n=cr.call(this,t,a),o=this.cardTableDataSource._langJson||{},i=!1,l=[],c={isNoRequired:!1};return n.forEach((function(t){if(c[t.id]={},t.row){var r={};if(t.row.forEach((function(e){var a=t.info+e.info;l.push(">>> "+a);var n=e.errorInfo,u=n.label,s=n.ids,d=n.validateFailed,f=void 0===d?{}:d;n.firstValidateFaild;r[e.rowKeyValue]=f;var p={isNoRequired:!1};Object.keys(u).filter((function(e){return s.some((function(t){return e.startsWith("".concat(o.table007,"_").concat(t))}))})).forEach((function(e){var t=u[e];p[e]={},Object.keys(t).forEach((function(r){p[e][r]={childRequiredRows:[]};var a=t[r],n="";Object.keys(a).length>0&&Object.keys(a).filter((function(e){return Object.keys(a[e]).length})).length&&(n=r),l.push(n),Object.keys(a).forEach((function(t,n){if(Object.keys(a[t]).length>0){p[e][r].childRequiredRows.push(n),i=!0;var o=t+"".concat(Object.keys(a[t]).map((function(e){return"[".concat(e,"]")})).join("，"),"；");l.push(o)}}))}))})),c[t.id][e.index]=p})),i){var a=Xe.call(e,t.id);a&&a.setCache("grandValidateFailed",r)}}})),!i||(Object(f.toast)({content:o.table_no_empty+"：",color:"danger",groupOperation:!0,isNode:!0,TextArr:[o.table0022,o.table0023,o.table0024],groupOperationMsg:l.filter((function(e){return e})),mark:"card-table-toastx"}),r?!r:c)}function sr(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=this.cardTableDataSource._langJson||{},o=nr.call(this,e,t),i=o.label,l=o.ids,c=o.validateFailed,u=void 0===c?{}:c,s=o.firstValidateFaild,d=void 0===s?{}:s,p=!1,h=[],b={isNoRequired:!1};if(Object.keys(i).filter((function(e){return l.some((function(t){return e.startsWith("".concat(n.table007,"_").concat(t))}))})).forEach((function(e){var t=i[e];b[e]={},Object.keys(t).forEach((function(r){b[e][r]={requiredRows:[]};var a=t[r],n="";Object.keys(a).length>0&&Object.keys(a).filter((function(e){return Object.keys(a[e]).length})).length&&(n=r),h.push(n),Object.keys(a).forEach((function(t,n){if(Object.keys(a[t]).length>0){b[e][r].requiredRows.push(n),p=!0;var o=t+"".concat(Object.keys(a[t]).map((function(e){return"[".concat(e,"]")})).join("，"),"；");h.push(o)}}))}))})),p){for(var g in console.log(u),u){var v=Xe.call(this,g),m=u[g],y=!1;if(v&&m){for(var w in v.setCache("validateFailed",u),v.setCache("firstValidateFaild",d),m){var O=m[w];if(O)for(var S in O)if(S){var C=O[S];if(C)for(var T in C)v.setCellProps(S,T,{validated:!1},!1);y=!0}}y&&v.refresh()}}if(d&&a){var A=e?Ve(e)?e:[e]:e||this.orderOfHotKey,I=null,D=null;A.some((function(e){var t=d[e];if(t&&t.length>0)return I="#js_lightTabs_header_".concat(e,' [name="').concat(t[0],'"] a'),D='.table-cell-wrapper[cellselectorkey="'.concat(t[1],"@").concat(t[2],'"] [tabindex="0"]'),!0}));var x=document.querySelector(I);x&&x.click(),setTimeout((function(){var e=document.querySelector(D);e&&(e.ncExecuteFocus=!0,e.focus(),e.ncExecuteFocus=!1)}),300),console.log(A,d,I,D)}return Object(f.toast)({content:n.table_no_empty+"：",color:"danger",groupOperation:!0,isNode:!0,TextArr:[n.table0022,n.table0023,n.table0024],groupOperationMsg:h.filter((function(e){return e})),mark:"card-table-toastx"}),r?!r:b}return!0}function dr(e,t){var r=Xe.call(this,e);return r?r.setRowsCellValue({rows:t,shouldForceUpdate:!this.isUpdatePage}):[]}function fr(e,t){var r=Xe.call(this,e);if(!r)return[];r.setTableProps("currentInfo",t,!1)}function pr(e){var t=Xe.call(this,e);return t?t.getTableProps("currentInfo"):[]}function hr(e,t){var r=Xe.call(this,e);if(!r)return[];r.setRowsCellValue({rows:t.rows,shouldForceUpdate:!this.isUpdatePage}),r.setCache(["base"],{rows:t.rows}),r.setCache(["all"],null)}function br(e,t){if(e&&void 0!==t)return gt.call(this,e)[t]}function gr(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=Xe.call(this,e);return n?(n.updateTableDataByRowId(t,a,!this.isUpdatePage,r),n.clearValidated(),{rows:n.getData()}):[]}function vr(e,t){var r=Xe.call(this,e);return r?r.getRowProps({rowIndex:t},"status"):[]}function mr(e){var t=Xe.call(this,e);return t?t.getTableProps("currentIndex"):[]}function yr(e,t){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],n=Xe.call(this,e);if(!n)return[];var o=n.getTableProps("rowKey");if(Array.isArray(t.rows)){var i=gt.call(this,e),l={},c=[];i.map((function(e){l[e[o]]=e,e.status==Je.delete&&c.push(e)})),t.rows.map((function(r,i){var c=t.rows[i],u=c.values,s=r[o];if(s&&l[s]){var d=c.status,f=void 0===d||d==Je.origin?Je.edit:d;Object.keys(u).forEach((function(e){u[e]=Be(Be(Be({},l[s].values[e]),{display:null,value:null,scale:-1}),u[e])})),t.rows[i]=Be(Be({},l[s]),c),t.rows[i].values=Be(Be({},l[s].values),u),t.rows[i].status=f}else{if(c.rowid=n.generateRowKey(),a)c.status=Je.add,n.getArrayMeta(e).forEach((function(e){var t=e.initialvalue,r=e.attrcode,a=Ne(t),n=c.values[r];if(n&&a){var o=n.display,i=n.scale,l=n.value,u={display:o||t.display,scale:i||t.scale,value:l||t.value};Object.assign(n,u)}}))}})),r&&(t.rows=t.rows.concat(c)),n.setTableData(t,{isCache:!1,isDel:!0,shouldForceUpdate:!this.isUpdatePage});var u=n.getStore();return{rows:u.data,checkInfo:u.checkInfo}}}function wr(e,t,r){var a=Xe.call(this,e);a&&a.moveRow(t,r)}function Or(e){var t=e.tableId,r=e.index,a=e.flag,n=Xe.call(this,t);n&&n.setRowsCellPropsByIndex(r,{disabled:!a})}function Sr(e,t,r){var a=this,n=Xe.call(this,e);if(n){Ke(t)&&(t=[t]);var o=n.getMeta();if(o&&o.gridrelation&&o.gridrelation[e]){var i=o.gridrelation[e].destEditAreaCode;Ve(i)&&i.forEach((function(e){Ve(t)&&t.forEach((function(t){o=Cr.call(a,e,o,t,{disabled:!r})}))}))}n.setStore(["meta"],o)}}function Cr(e,t,r,a){var n=t[e]&&t[e].items;if(Ve(n)){var o=n.findIndex((function(e){return e.attrcode===r}));-1!==o&&(n[o]=Be(Be({},n[o]),a))}return t}function Tr(e,t){var r=this,a=Xe.call(this,e);if(a&&Ne(t)){var n=t.hideKeys,o=t.showKeys,i=a.getMeta(),l="",c=[];i.gridrelation&&i.gridrelation[e]&&(l=i.gridrelation[e].destBrowseAreaCode,c=i.gridrelation[e].destEditAreaCode),Ve(n)&&n.length&&n.forEach((function(t){a.setColumn(e,Fe({},t,{visible:!1}),!1),l&&(i=Cr.call(r,l,i,t,{visible:!1})),Ve(c)&&c.length&&c.forEach((function(e){i=Cr.call(r,e,i,t,{visible:!1})}))})),Ve(o)&&o.length>0&&o.forEach((function(t){a.setColumn(e,Fe({},t,{visible:!0}),!1),l&&(i=Cr.call(r,l,i,t,{visible:!0})),Ve(c)&&c.length>0&&c.forEach((function(e){i=Cr.call(r,e,i,t,{visible:!0})}))})),a.setStore(["meta"],i)}}function Ar(e,t){var r=Xe.call(this,e);if(r){var a=gt.call(this,e);a.length&&(a=a.map((function(e){return e.status===Je.origin&&(e.status=Je.edit),e})),Ve(t)&&t.length&&t.forEach((function(t){var a=t.key,n=t.data,o=void 0===n?{}:n;r.setColumn(e,Fe({},a,o),!1)}))),r.refresh()}}function Ir(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"browse",r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,o=Xe.call(this,e);if(o){var i=o.getMeta(),l=[];i.gridrelation&&i.gridrelation[e]&&(l=i.gridrelation[e].destEditAreaCode);var c=l.every((function(e){return!i[e].areaVisible}));c?Object(f.toast)({color:"danger",groupOperation:!0,isNode:!0,mark:"card-table-toastx"}):(o.showSideBox(t,r,a),Me(n)&&n())}}function Dr(e){var t=Xe.call(this,e);t&&t.closeSideBox()}function xr(e,t){var r=Xe.call(this,e);r&&(Ke(t)&&(t=[t]),t.forEach((function(t){r.setColumn(e,Fe({},t,{visible:!1}),!1)})),r.refresh())}function Er(e,t,r){var a=Xe.call(this,e);a&&a.setColumn(e,t,r)}function jr(e,t){var r=Xe.call(this,e);r&&(Ke(t)&&(t=[t]),t.forEach((function(t){r.setColumn(e,Fe({},t,{visible:!0}),!1)})),r.refresh())}function Pr(e,t){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=Xe.call(this,e);if(a){var n=gt.call(this,e),o=[];return n.forEach((function(e){(r||e.status!==Je.delete)&&o.push(e.values[t])})),JSON.parse(JSON.stringify(o))}}function Rr(e,t,r){var a=this,n=r.display,o=r.value,i=r.scale,l=Xe.call(this,e);if(l){var c=gt.call(this,e);c=c.map((function(r){var l=r.rowid,c=r.status;return c==Je.delete||(c==Je.origin&&(r.status=Je.edit),Ne(r.values[t])||(r.values[t]={}),_e(o)||(r.values[t].value=o,ut.call(a,e,l,t,o)),!_e(n)&&(r.values[t].display=n),!_e(i)&&(r.values[t].scale=i)),r})),l.setData({data:c})}}function kr(e,t,r){var a=Xe.call(this,e);a&&a.openListView(t)}function Br(e,t){var r=Xe.call(this,e);r&&r.openMaxView(t)}function Fr(e){var t=Xe.call(this,e);if(t)return t.isMaxView()}function Mr(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Xe.call(this,e);if(a){var n=a.getMeta()[e].items;if(Ve(n)){var o=[];return(o=r?Wr(n).filter((function(e){return e.attrcode===t})):n.filter((function(e){return e.attrcode===t}))).length>0?o[0]:null}return null}}function Vr(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Xe.call(this,e);if(a){var n=a.getMeta(),o=n&&n[e]&&n[e].items,i=n.gridrelation&&n.gridrelation[e]&&n.gridrelation[e].destEditAreaCode;if(Ve(o)){var l=function e(t,a){t.map((function(t){t.children&&e(t.children,a),(t.attrcode===a||a.includes(t.attrcode))&&(t.disabled=r,i&&i.forEach((function(e){n[e].items.forEach((function(e){e.attrcode===t.attrcode&&(e.disabled=r)}))})))}))};l(o,t),a.setMeta(n)}}}function Nr(){f.PubSub.publish("otherComplete",!0)}function Ur(e,t){var r=Xe.call(this,e);if(r){var a=gt.call(this,e),n=Qr(r,e).map((function(e){return e.attrcode})),o={};if(a[t]&&a[t].values){var i=a[t].values;for(var l in i)n.includes(l)&&(o[l]=i[l])}return o}}function Kr(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Xe.call(this,e);if(a){var n=a.getMeta(),o=Qr(a,e),i=["string"==typeof t,Ve(t)],l=i[0],c=i[1];o&&(l||c)&&(o.map((function(e){l&&e.attrcode===t&&(e.visible=r),c&&t.includes(e.attrcode)&&(e.visible=r)})),a.setMeta(n))}}function _r(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(e=Ve(e)?e:[e]).forEach((function(e){var a=Xe.call(t,e);if(a){var n=a.getStore("tableSwitch").tableVisible;a.toggleTableShow(r),n!==r&&Me(a.onHeadAngleToggle)&&a.onHeadAngleToggle(Be(Be({},t.props),t.output),e,r)}}))}function qr(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Object.keys(t),n=Xe.call(this,e);if(n){var o=n.getMeta(),i=o.gridrelation[e];i.tabRelation.forEach((function(e){o[e].items.forEach((function(e){a.forEach((function(r){var a=e.attrcode,n=e.children;_e(n)?r===a&&(e.queryCondition=t[r]):n.forEach((function(a){var n=a.attrcode;r===n&&(e.queryCondition=t[r])}))}))}))})),Ve(i.destEditAreaCode)&&i.destEditAreaCode.forEach((function(e){o[e].items.forEach((function(e){a.forEach((function(r){r===e.attrcode&&(e.queryCondition=t[r])}))}))})),n.setMeta(o,e,r&&!this.isUpdatePage)}}function Hr(e){var t=e.rowid,r=e.parentId,a=e.tableId,n=e.data,o=e.shouldForceUpdate,i=e.callback,l=e.isCache,c=void 0===l||l,u=(e.isTop,e.isDiffUpdate),s=void 0!==u&&u;if(Xe.call(this,a)){var d=Xe.call(this,r);d&&(d.setGrandTableData({tableId:a,rowid:t,data:n,isCache:c,shouldForceUpdate:o,isDiffUpdate:s}),Me(i)&&i(Be(Be({},this.props),this.output),a))}}function Lr(e){var t=e.parentId,r=e.isDeepCopy,a=Xe.call(this,t);if(a)return a.getAllGrandData(r)}function Jr(e){var t=e.parentId,r=e.view,a=Xe.call(this,t);if(a)return a.getViewGrandData(r)}function Gr(e){var t=e.parentId,r=e.rowidList,a=void 0===r?[]:r,n=e.delAll,o=void 0!==n&&n,i=Xe.call(this,t);i&&i.deleteGrandData({rowidList:a,delAll:o})}function zr(e){var t=e.parentId,r=e.plcodeValue,a=Xe.call(this,t);if(a){var n=a.getStore("cardTable_pkcode"),o=gt.call(this,t),i="";return o&&o.forEach((function(e){e.values[n]&&e.values[n].value===r&&(i=e.rowid)})),i}}function Wr(e){if(!Ve(e))return[];var t=[];return function e(r){r.forEach((function(r){var a=r.children,n=(r.title,De(r,["children","title"]));a||t.push(n),a&&e(a)}))}(e),t}function Qr(e,t){var r=e.getMeta(),a=r.gridrelation.hasOwnProperty(t)&&r.gridrelation[t].destEditAreaCode?r.gridrelation[t].destEditAreaCode:[];return"[object Array]"!==Object.prototype.toString.call(a)&&(a=Array(a)),a.reduce((function(e,t){var a=r[t]?r[t].items:[];return e=[].concat(xe(e),xe(a))}),[])}function $r(e,t){var r=t.attrcode,a=t.rowId,n=t.value,o=Xe.call(this,e);o&&o.setCache(["customColData",r,a],n)}function Yr(e){var t=Xe.call(this,e);if(t)return t.getStore(["tableSideBox","index"])}function Xr(e,t){var r=this;(e=Array.isArray(e)?e:[e]).forEach((function(e){var t=Xe.call(r,e);if(t){var a=t.getData();t.saveRowsOldValue({rows:a}),t.getStore("activeTableCode")===e&&t.refresh()}}))}function Zr(e){var t=e.areaCode,r=Xe.call(this,t);if(r)return r.updateAfterBatchChange(this,e)}function ea(e){var t=e.tableId,r=Xe.call(this,t);if(r)return r._updateAndAddRows(e)}function ta(e,t,r,a){var n=Xe.call(this,e);if(n&&Array.isArray(r)){var o=gt.call(this,e,!1),i=r.length;o.map((function(e,n){for(var o=e.values,l=0;l<i;l++)if(o[t]&&o[t].value===r[l][t]){for(var c in r[l])o[c]?o[c].value=r[l][c]:o[c]={value:r[l][c]},"saga_status"===c&&"1"===r[l][c]&&a&&(o.saga_errormesg=a);break}return e})),n.setData({data:o})}}function ra(e){var t=Xe.call(this,e);t&&t.anoterTable()}function aa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function na(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oa(){return this.register("cardTable"),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?aa(Object(r),!0).forEach((function(t){na(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},ia.call(this,o))}function ia(e){for(var t={},r=0,a=Object.keys(e);r<a.length;r++){var n=a[r];t[n]=e[n].bind(this)}return t}oa.component=Ae.a,oa.displayName="CardTable",oa.unfinished=["updateTable","getTableItemData","checkTableRequired"];var la=r(7),ca=r.n(la);function ua(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return sa(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sa(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw o}}}}function sa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function da(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function fa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?da(Object(r),!0).forEach((function(t){pa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):da(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ha(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var ba=ca.a.useSimpleTable,ga=Ie.utils.isObject,va=Ie.utils.warningOnce,ma=Ie.utils.isUndefined,ya=Ie.utils.isWrong,wa=Ie.utils.getPageSizeStorage;function Oa(e){var t=this.tableDataSource[e];if(t)return t;va(!1,"所操作的表格中无ID为".concat(e,"的数据"))}function Sa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this,a=r.tableDataSource[e];a||(a=ba(),r.myTableData[e]&&(a.setTableProps("focusIndex",-1,!1),delete r.myTableData[e]));var n=t.onRowClick,o=t.onRowDoubleClick,i=t.selectedChange,l=t.onSelected,c=t.onSelectedAll,s=t.handlePageInfoChange,d=t.onBatchSelected,p=t.tableModelConfirm,h=ha(t,["onRowClick","onRowDoubleClick","selectedChange","onSelected","onSelectedAll","handlePageInfoChange","onBatchSelected","tableModelConfirm"]);h.onBatchSelected=!!d&&function(t){return d&&d(fa(fa({},r.props),r.output),e,t)};var b=a.getMeta(e);return b&&a.setStore(["modelDatas","modelColumn"],b),h.high_filter=h.high_filter||{alloweFilter:h.alloweFilter},u.a.createElement(ca.a,{store:a,name:e,output:r.output,afterLangload:function(e){r.tableDataSource._langJson=e||{}},onRowClick:function(t,a,o){if(n)return n.call(r,fa(fa({},r.props),r.output),e,t,a,o)},onRowDoubleClick:function(e,t,a){if(o)return o.call(r,e,t,fa(fa({},r.props),r.output),a)},onSelected:function(e,t,a,n){l&&l.call(r,fa(fa({},r.props),r.output),e,t,a,n)},selectedChange:function(e,t,a){i&&i.call(r,fa(fa({},r.props),r.output),e,t,a)},onSelectedAll:function(e,t,a){c&&c.call(r,fa(fa({},r.props),r.output),e,t,a)},onPageInfoChange:function(e,a){s&&s(fa(fa({},r.props),r.output),t,e,a)},tableModelConfirm:function(e,t){p&&p(fa(fa({},r.props),r.output),e,t)},onCellHyperlinkTo:function(e,t,a,n){Object(f.linkTo)(r.state.meta.pageid,n,t,a.value)},config:h})}function Ca(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Oa.call(this,e),n=wa(this.state.meta,e);if(a){a.setStore("filterReset",!0,!1,(function(){a.setStore("filterReset",!1,!1)})),a.resetFilter(e,!1);var o=a.getStore(["allpks"]),i=a.getStore(["alltss"]),l=[],c=a.getStore(["pageInfo"]);if(t.hasOwnProperty("pageInfo")&&!ya(t.pageInfo)?(c=t.pageInfo).pageIndex=Number(t.pageInfo.pageIndex)+1:t.rows&&0==t.rows.length?c={pageSize:n,pageIndex:1,total:0,totalPage:1}:o.length>0||(c={pageSize:n,pageIndex:1}),a.setStore("pageInfo",c,!1),t.allpks?o=t.allpks:t.rows&&0==t.rows.length&&(o=[]),a.setStore("allpks",o,!1),t.alltss&&(i=t.alltss),a.setStore("alltss",i,!1),r){var u=a.getStore("props");u.focusIndex=0,a.setStore("props",u,!1)}var s=a.getStore(["checkInfo","crossPageSelectIndex"]),d=a.getStore(["checkInfo","checkedAllpage"]);if(s.size){var p=new Set(s),h=new Set;p.forEach((function(e){-1!==o.indexOf(e)&&h.add(e)})),s=h}var b={checkedAll:!1,indeterminate:!1,selectIndex:new Set,disabledAll:!1,checkedAllpage:d,crossPageSelectIndex:s};a.setStore(["checkInfo"],b,!1);var g=a.getArrayMeta(e);g&&a.clearSortStatus({columns:g}),l=t.rows.map((function(e){return e.rowId=e.rowId||String((new Date).getTime()).slice(-5)+Object(f.getSafeRandom)().toString(12),e})),a.setData(l,!0,(function(){a.setTableProps("focusIndex",-1,!1),a.setStore("filterReset",!1,!1)}));var v=a.getConfig(),m=v.crossPageSelect,y=v.pkname;if(m&&y)if(d)a.setSelect(void 0,"allpage");else{var w=a.getData(),O=[];w.forEach((function(e){if(!e.values[y])return console.error("行数据中没有pkname为".concat(y,"的value")),void console.log(e);var t=e.values[y].value;s.has(t)&&O.push(e.rowId)})),a.setSelect(O,"set")}}else this.myTableData[e]=t}function Ta(e){var t=Oa.call(this,e),r=wa(this.state.meta,e);if(!t)return{pageIndex:0,pageSize:r};var a=t.getStore("pageInfo"),n=a.pageIndex,o=void 0===n?0:n,i=a.pageSize,l=void 0===i?r:i;return{pageIndex:o>0?o-1:0,pageSize:l=Number(l)}}function Aa(e,t,r,a){var n=Oa.call(this,e);n&&n.openModal(t,r,a)}function Ia(e){var t=Oa.call(this,e);t&&t.closeModel()}function Da(e,t,r){var a=Oa.call(this,e);a&&a.setColumn(e,t,{render:r})}function xa(e){var t=this;e.forEach((function(e){var r=e.areacode,a=e.fieldcode,n=e.scale,o=Oa.call(t,r);if(o){var i=o.getMeta();i[r].items.forEach((function(e){e.attrcode===a&&(e.scale=n)})),o.setMeta(i)}}))}function Ea(e,t){var r=Oa.call(this,e);if(r){var a=!1;return r.getMeta(e).forEach((function(e){var r=e.visible,n=e.attrcode,o=e.children;ma(o)?t===n&&r&&(a=!0):o.forEach((function(e){var r=e.visible;t===n&&r&&(a=!0)}))})),a}}function ja(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=Oa.call(this,e);if(r){var a={pageInfo:r.getStore("pageInfo"),rows:r.getStore("rows"),model:r.getStore("modelDatas","showModal"),operType:r.getStore("modelDatas","operType"),checkedAll:r.getStore("checkInfo","checkedAll"),allpks:r.getStore("allpks")};return t?JSON.parse(JSON.stringify(a)):a}}function Pa(e,t,r){var a=Oa.call(this,e);if(a){var n=fa(fa({},t),r),o=t.attrcode.value,i=a.getStore("rows");i.map((function(e){e.values.attrcode&&o==e.values.attrcode.value&&(e.values=fa({},n))})),a.setData(i)}}function Ra(e,t){var r=Oa.call(this,e);r&&r.showColumn(e,t,!1)}function ka(e,t){var r=Oa.call(this,e);r&&r.showColumn(e,t,!0)}function Ba(e){var t=Oa.call(this,e);if(t){var r=t.getStore(["checkInfo","selectIndex"]),a=t.getStore(["rows"]);0===r.size&&a.length&&a.forEach((function(e){e.selected&&r.add(e.rowId)}));var n=[],o=t.getConfig(),i=o.crossPageSelect,l=o.pkname;if(i&&l){var c=t.getStore(["checkInfo","crossPageSelectIndex"]),u=t.getStore(["pageInfo"]).pageSize;u=Number(u);var s=t.getStore(["allpks"]),d=t.getStore(["alltss"]),f=[];a.forEach((function(e){var t=e.values[l].value;f.push(t)})),c.forEach((function(e){var t,r=f.indexOf(e);if(-1!==r){var o=s.indexOf(e);t={data:a[r],index:o%u,pageIndex:Math.floor(o/u)}}else{var i=s.indexOf(e);-1!==i&&(t={data:{pk:s[i],ts:d[i]},index:i%u,pageIndex:Math.floor(i/u)})}n.push(t)}))}else{t.getFilterData().forEach((function(e,t){if(r.has(e.rowId)){var a={data:e,index:t};n.push(a)}}))}return n}}function Fa(e,t){var r=Oa.call(this,e);if(r){var a=r.getConfig(),n=a.crossPageSelect,o=a.pkname;if(n&&o)if(t){var i=r.getStore("allpks");r.setStore(["checkInfo","crossPageSelectIndex"],new Set(i),!1)}else r.setStore(["checkInfo","crossPageSelectIndex"],new Set,!1);t?r.setSelect(void 0,"all"):r.setSelect(void 0,"clear")}}function Ma(e){var t=Oa.call(this,e);t&&t.setSelect(void 0,"reverse")}function Va(e,t){var r=Oa.call(this,e);r&&r.deleteTableRows(t)}function Na(e,t){var r=Oa.call(this,e);r&&r.deleteTableRows(t,"rowId")}function Ua(e,t,r){var a=Oa.call(this,e);a&&a.addTableRows(t.rows,r)}function Ka(e,t,r,a){var n=Oa.call(this,e);n&&("refer"==a?n.setStore(["modelDatas","record",t],{display:r.refname,value:r.refpk},!0):n.setStore(["modelDatas","record",t],{value:r,display:null},!0))}function _a(e,t,r){var a=Oa.call(this,e);a&&a.setColumn(e,t,{disabled:r})}function qa(e,t,r){var a=Oa.call(this,e);a&&a.setColumn(e,t,{required:r})}function Ha(e,t){var r=Oa.call(this,e);r&&(r.setTableProps("focusIndex",t,!1),r.setTableProps("currentIndex",t,!0,(function(){r.setTableProps("focusIndex",-1,!1)})))}function La(e,t){var r=Oa.call(this,e);if(r&&Array.isArray(t)){var a=r.getData(),n=[];return t.forEach((function(e){var t=e.index,r=e.data;if(t<0)console.error("index =".concat(t,",小于0"));else if(ga(r)){var o=a[t];a[t]=Object.assign(o,r),n.push(a[t].rowId)}})),r.setData(a,!1),r.setSelect(n,"delete"),!1}}function Ja(e,t,r,a){var n=Oa.call(this,e);if(n)return n.setCellValue({value:a,rowId:t,attrcode:r}),!1}function Ga(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=Oa.call(this,e);if(o){var i=Array.isArray(t)?t:[t],l=un.call(this,e,i),c=n.pattern;r?o.setSelect(l,c||"set"):o.setSelect(l,"delete"),a&&va(!1,"还没写")}}function za(e,t,r){var a=Oa.call(this,e);if(a){for(var n=a.getStore(["pageInfo"]),o=a.getStore(["allpks"]),i=n.pageIndex,l=n.pageSize,c=[],u=Number(ma(t)?i:t),s=Number(ma(r)?l:r),d=(u-1)*s,f=d;f<d+s&&o[f];f++)c.push(o[f]);return c}}function Wa(e){if(e){var t=f.ViewModel.getData(e);if(t&&t.simpleTable&&t.simpleTable.rows&&t.simpleTable.rows.length)return!0}return!1}function Qa(e,t){var r=Oa.call(this,e);if(r){var a=r.getStore(["allpks"]);Array.isArray(a)&&a.length&&("string"==typeof t&&(a=a.filter((function(e){return e!=t}))),Array.isArray(t)&&t.length&&(a=a.filter((function(e){return!t.includes(e)}))),r.setStore(["allpks"],a))}}function $a(e,t){var r=Oa.call(this,e);if(r){var a=r.getStore(["allpks"]);Array.isArray(a)&&(a.includes(t)||a.push(t),r.setStore(["allpks"],a))}}function Ya(e,t){var r=Oa.call(this,e);if(r&&(ga(t)&&Array.isArray(t.rows))){var a=r.getData();a.forEach((function(e){var r,a=ua(t.rows);try{var n=function(){var t=r.value;e.rowId==t.rowId&&Object.keys(e).forEach((function(r){ma(t[r])?delete e[r]:e[r]=t[r]}))};for(a.s();!(r=a.n()).done;)n()}catch(e){a.e(e)}finally{a.f()}})),cn.call(this,e,a,!0),r.setData(a,!1)}}function Xa(e,t){var r=Oa.call(this,e);r&&r.setTableProps("currentInfo",t)}function Za(e){var t=Oa.call(this,e);if(t)return t.getTableProps("currentInfo")}function en(e,t,r,a){var n=Oa.call(this,e);if(n)return n.setCellValue({value:a,index:t,attrcode:r}),!1}function tn(e,t){var r=Oa.call(this,e);if(r){var a=r.getData();Array.isArray(t)&&(t.forEach((function(e){var t=e.index,r=e.values;ga(r)&&Object.keys(r).forEach((function(e){a[t].values[e]=fa(fa({},a[t].values[e]),r[e])}))})),r.setData(a))}}function rn(){f.PubSub.publish("otherComplete",!0)}function an(){f.PubSub.publishSync("beforeAreaChangeComplete",!0)}function nn(e){var t=Oa.call(this,e);if(t)return t.getStore(["sortParam"])}function on(e,t,r,a){var n=Oa.call(this,e);if(n&&Array.isArray(r)){var o=n.getData(),i=r.length,l=o.map((function(e){for(var n=e.values,o=0;o<i;o++)if(n[t]&&n[t].value===r[o][t]){for(var l in r[o])n[l]?n[l].value=r[o][l]:n[l]={value:r[o][l]},"saga_status"===l&&"1"===r[o][l]&&a&&(n.saga_errormesg=a);break}return e}));n.setData({data:l})}}function ln(e,t){var r=t.attrcode,a=t.rowId,n=t.value,o=Oa.call(this,e);o&&o.setCache(["customColData",r,a],n)}function cn(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Oa.call(this,e),n=new Set,o=!1,i=!1;t.forEach((function(e,t){e.selected&&n.add(t)}));var l=n.size,c=t.length;l&&(l===c?i=!0:l<c&&(o=!0)),a.setStore(["checkInfo","indeterminate"],o,!1),a.setStore(["checkInfo","checkedAll"],i,r)}function un(e,t){var r=Oa.call(this,e).getData(),a=[];return r.forEach((function(e,r){t.includes(r)&&a.push(e.rowId)})),a}function sn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function dn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fn(){return this.register("table"),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sn(Object(r),!0).forEach((function(t){dn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},pn.call(this,i))}function pn(e){for(var t={},r=0,a=Object.keys(e);r<a.length;r++){var n=a[r];t[n]=e[n].bind(this)}return t}fn.component=ca.a,fn.displayName="SimpleTable",fn.unfinished=["simpleTableUnFinishedApi"];var hn=r(8),bn=r.n(hn);function gn(e){return function(e){if(Array.isArray(e))return vn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return vn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function mn(){return(mn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function yn(e,t,r,a,n,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(a,n)}function wn(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var o=e.apply(t,r);function i(e){yn(o,a,n,i,l,"next",e)}function l(e){yn(o,a,n,i,l,"throw",e)}i(void 0)}))}}function On(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Sn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?On(Object(r),!0).forEach((function(t){Cn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):On(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Cn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tn(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var An=bn.a.useEditTable,In=Ie.utils.isFunction,Dn=Ie.utils.isArray,xn=Ie.utils.isObject,En=Ie.utils.warningOnce,jn=Ie.utils.isString,Pn=Ie.utils.isUndefined,Rn=(Ie.utils.isPromise,Ie.utils.isWrong),kn=(Ie.utils.isNumber,Ie.utils.getPageSizeStorage),Bn=Ie.CONFIG.ROW_STATUS,Fn=function(e){var t=this.editTableDataSource[e];if(t)return t;En(!1,"所操作的表格中无ID为".concat(e,"的数据"))},Mn=function(e,t,r){var a=Fn.call(this,e);if(a){var n=a.getData([Bn.delete,Bn.filter]);return isNaN(t)||t>n.length||t<0?(En(t,"传入的第二个参数为行index值，须为大于等于0且小于等于总行数减一的整数"),-1):t}};function Vn(e,t,r,a){var n=Fn.call(this,e);n&&n.saveRowOldValue(t,r,a)}function Nn(e,t,r){var a=Fn.call(this,e);if(a)return a.getRowOldValue(t,r)}function Un(e,t,r){var a=Fn.call(this,e);a&&a.deleteRowOldValue(t,r)}function Kn(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this,n=a.editTableDataSource[e];n||(n=An(),a.editTableDataSource[e]=n,console.warn("没有store 请检查下  use方法"),a.editTableDataSource.myEditData=a.editTableDataSource.myEditData||{},a.editTableDataSource.myEditData[e]&&(n.setTableData(a.editTableDataSource.myEditData[e]),n.setTableProps("focusIndex",-1,!1),delete a.editTableDataSource.myEditData[e]));var o=r.onRowClick,i=r.onRowDoubleClick,l=r.statusChange,c=r.onSelected,s=r.onSelectedAll,d=r.selectedChange,p=r.onBeforeEvent,h=r.onAfterEvent,b=(r.inputChange,r.rowClassList),g=r.isAddRow,v=r.addRowCallback,m=r.addRowDefaultValue,y=r.showPagination,w=r.handlePageInfoChange,O=r.height,C=r.adaptionHeight,T=r.setCellClass,I=r.onBatchSelected,D=r.alloweFilter,x=r.onCloseModel,E=r.tableModelConfirm,j=r.fieldid,P=Tn(r,["onRowClick","onRowDoubleClick","statusChange","onSelected","onSelectedAll","selectedChange","onBeforeEvent","onAfterEvent","inputChange","rowClassList","isAddRow","addRowCallback","addRowDefaultValue","showPagination","handlePageInfoChange","height","adaptionHeight","setCellClass","onBatchSelected","alloweFilter","onCloseModel","tableModelConfirm","fieldid"]);n.setConfig(r),In(l)&&(n.statusChange=r.statusChange=l.bind(this)),In(d)&&(n.selectedChange=r.selectedChange=d.bind(this)),In(c)&&(n.onSelected=r.onSelected=c.bind(this));var R={};a.state.renderItem&&a.state.renderItem.table&&(R=(a.state.renderItem.table||{})[e]||{});var k=!(!Pn(O)||!C);return u.a.createElement(bn.a,mn({onCloseModel:function(t){In(x)&&x.call(a,Sn(Sn({},a.props),a.output),e,t)},tableModelConfirm:function(t){In(E)&&E.call(a,Sn(Sn({},a.props),a.output),e,t)},fieldid:j,cellClassName:function(e){var t=e.record,r=e.rowIndex,a=e.attrcode;return In(T)&&T(r,t,a)},onRowClick:function(t,r,n){return In(o)&&o.call(a,Sn(Sn({},a.props),a.output),e,t,r,n)},onRowDoubleClick:function(e,t,r){return In(i)&&i.call(a,e,t,Sn(Sn({},a.props),a.output),r)},onSelected:function(e,t,r,n,o){In(c)&&c.call(a,Sn(Sn({},a.props),a.output),e,t,n,r,o)},selectedChange:function(e,t,r){In(d)&&d.call(a,Sn(Sn({},a.props),a.output),e,t,r)},onSelectedAll:function(e,t,r){In(s)&&s.call(a,Sn(Sn({},a.props),a.output),e,t,r)},autoAddRow:{enabled:g,callback:function(t){v&&v(e,t)},defaultValue:m},onChange:function(e){e.rowKey,e.rowKeyValue;var t=e.rowIndex,a=(e.attrcode,e.value),n=e.column;e.e;if("input"===n.itemtype&&["vchangerate","vqtunitrate"].includes(n.attrcode)){if(a&&!/^[0-9\/\.]+$/.test(a))return}if(In(r.inputChange)&&!r.inputChange({index:t,item:n,valueChange:a.value}))return},onBeforeEvent:function(){var t=wn(regeneratorRuntime.mark((function t(r){var n,o,i,l,c,u,s,d,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.record,r.rowKey,r.rowKeyValue,o=r.rowIndex,i=r.attrcode,l=r.column,c=r.value,u=void 0===c?{}:c,r.event,s=r.triggerType,void 0===s?"onChange":s,d=r.isTriggerModal,void 0!==d&&d,f={moduleId:e,record:n,attrcode:i,methods:a.output,column:l,index:o,val:n.values[i]},t.next=4,A(a,{moduleId:e,attrcode:i,fxType:"onEditTableBeforeEvent",fxParams:f},(function(){return!In(p)||p(Sn(Sn({},a.props),a.output),e,l,o,u,n)}));case 4:return t.t0=t.sent,t.abrupt("return",!1!==t.t0);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onAfterEvent:function(t){var r=t.record,o=t.rowKey,i=t.rowKeyValue,l=t.rowIndex,c=t.attrcode,u=t.column,s=t.value,d=void 0===s?{}:s,f=t.oldValue,p=void 0===f?{}:f,b=t.componentValue,g=t.event,v=t.triggerType,m=void 0===v?"onChange":v,y=t.isTriggerModal,w=void 0!==y&&y,O=d.value;if("input"===u.itemtype&&["vchangerate","vqtunitrate"].includes(c)){if(O&&O.length<1e3&&!/^([1-9][0-9]*|0)(\.\d{1,})?(\/)(([1-9][0-9]*)(\.\d{1,})?|(\d\.\d{1,}))$/.test(O))return w||n.setCellProps(i,c,{isEdit:!1}),void n.setCellProps(i,c,{value:null})}var S=[],C=u.isMultiSelectedEnabled;if(u.refcode){var T=u.refcode.replace(".js","");T.startsWith("/")&&(T=T.substring(1));var I=window[T]&&window[T].default();I&&I.props&&I.props.isMultiSelectedEnabled&&(C=I.props.isMultiSelectedEnabled)}var D=[];if(C&&p){var x=jn(p.value)?p.value.split(","):Dn(p.value)?p.value:[p.value];(D=jn(d.value)?d.value.split(","):Dn(d.value)?d.value:[d.value]).forEach((function(e,t){S.push({rowid:r.rowid,newvalue:{value:e||""},oldvalue:{value:x[0]||""}})}))}else S.push({rowid:r[o],newvalue:{value:O||""},oldvalue:{value:p.value||""}});if(n.saveRowOldValue(r[o],c,D.length>0?D[0]:O),u.editAfterFlag&&a.handleRelationItems)a.handleRelationItems({type:"table",areaCode:e,key:c,changedrows:S,index:l,rowid:r[o],record:r,column:u,callback:function(){var t={moduleId:e,record:r,attrcode:c,methods:a.output,val:"refer"===u.itemtype||"residtxt"===u.itemtype?b:d.value,changedRows:S,index:l,type:"table",actionTag:"onBlur"===m?"blur":"change"};A(a,{moduleId:e,attrcode:c,fxType:"onEditTableAfterEvent",fxParams:t},(function(){In(h)&&h(Sn(Sn({},a.props),a.output),e,c,"refer"===u.itemtype||"residtxt"===u.itemtype?b:d.value,S,l,r,w?"modal":"line","onBlur"===m?"blur":"change",g)}))}});else{var E={moduleId:e,record:r,attrcode:c,methods:a.output,val:"refer"===u.itemtype||"residtxt"===u.itemtype?b:d.value,changedRows:S,index:l,type:"table",actionTag:"onBlur"===m?"blur":"change"};A(a,{moduleId:e,attrcode:c,fxType:"onEditTableAfterEvent",fxParams:E},(function(){console.log("onAfterEvent","onAfterEventonAfterEventonAfterEventonAfterEventonAfterEvent"),In(h)&&h(Sn(Sn({},a.props),a.output),e,c,"refer"===u.itemtype||"residtxt"===u.itemtype?b:d.value,S,l,r,w?"modal":"line","onBlur"===m?"blur":"change",g)}))}},rowClassName:b,store:n,editTableComponentUpdate:function(e){S(a,"updateEditTable")({pageScope:a,data:n.getViewData(),props:e,useOn:"create"})},afterLangload:function(e,t){a.editTableDataSource._langJson=e||{}},onBatchSelected:!!I&&function(t){return I&&I(Sn(Sn({},a.props),a.output),e,t)},showPagination:y,onPageInfoChange:function(e,t){In(w)&&w(Sn(Sn({},a.props),a.output),r,e,t)},tableId:e,bodyStyle:{minHeight:r.height||300},useFixedHeader:!0,scroll:{x:!0,y:r.height||300},adaptionHeight:k,onCellHyperlinkTo:function(e,t,r,n){Object(f.linkTo)(a.state.meta.pageid,n,t,r.value)},renderItems:R,high_filter:{alloweFilter:D},getHotKeyConfig:function(){return{autoFocusDeferred:t.autoFocusDeferred,meta:t.state.meta,withHotKeyChange:t.withHotKeyChange,orderOfHotKey:t.orderOfHotKey,onLastFormEnter:r.onLastFormEnter}}},P))}function _n(e,t,r){var a=Fn.call(this,e);a&&a.deleteTableRows({rowIndexs:t},r)}function qn(e,t,r,a){var n=Fn.call(this,e);if(n){n.deleteTableRows({rowIndexs:t},r);var o=n.getSelectedRows().length;In(n.selectedChange)&&n.selectedChange(Sn(Sn({},this.props),this.output),e,o),In(a)&&a()}}function Hn(e,t,r){var a=Fn.call(this,e);if(a){a.deleteTableRows({rowKeyValues:t},r);var n=a.getSelectedRows().length;In(a.selectedChange)&&a.selectedChange(Sn(Sn({},this.props),this.output),e,n)}}function Ln(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=Fn.call(this,e);return r?r.getAllRows(t):this.editTableDataSource.myEditData[e]?this.editTableDataSource.myEditData[e].rows:[]}function Jn(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Fn.call(this,e);return a?a.getVisibleRows(t,r):[]}function Gn(e,t){return Fn.call(this,e)?t?Ln.call(this,e,!1).length:Jn.call(this,e,!1).length:0}function zn(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=Ln.call(this,e,t),a={areaType:"table",rows:r,areacode:null};return a}function Wn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",r=Fn.call(this,e);if(!r)return 0;var a=r.getViewData(t);return a}function Qn(e,t){var r=Fn.call(this,e);if(r)return r.getAllRowsRemoveKeys(t)}function $n(e,t){var r=this,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,l=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],c=Fn.call(this,e);c&&(n||(n={}),c.addTableRow(t,n,!this.isUpdatePage&&l,{autoFocus:a,isAutoAddRow:i,callback:function(){o&&o.call(r,e)}}),In(c.statusChange)&&c.statusChange(c.getTableProps("status")))}function Yn(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"except",a=Fn.call(this,e);a&&a.removeEmptyRows({keys:t,rule:r,shouldForceUpdate:!this.isUpdatePage})}function Xn(e){var t=Fn.call(this,e);if(t)return Ln.call(this,e)[t.getTableProps("currentIndex")]}function Zn(e,t,r){var a=Fn.call(this,e);if(!a)return[];var n=a.getTableProps("rowKey");a.setSelectedIndex([],"clear"),a.setSelectedIndex([{rowKey:n,rowIndex:t,pattern:"add"}]),a.setTableProps("focusIndex",t,!1),t=a.getTrueRowIndex({rowIndex:t}),a.setTableProps("currentIndex",t,!0,(function(){a.setTableProps("focusIndex",-1,!1),In(r)&&r()}))}function eo(e,t,r){var a=Fn.call(this,e);a&&a.updateTableDataByIndexs([{index:r,data:t}])}function to(e,t,r){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=Fn.call(this,e);n&&n.setRowsCellPropsByKey(t,{disabled:!r},!this.isUpdatePage&&a)}function ro(e,t,r){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=Fn.call(this,e);n&&n.setRowsCellPropsByIndex(t,{disabled:!r},!this.isUpdatePage&&a)}function ao(e,t,r,a){var n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=Fn.call(this,e);o&&o.setCellsProps({rowKeyValues:t,attrcodes:r,value:{disabled:!a},shouldForceUpdate:!this.isUpdatePage&&n})}function no(e,t,r){var a=Fn.call(this,e);if(a){var n=Object(f.getCookie)("langCode")||"simpchn";return a.getFilterRows(t,r,n)}}function oo(e,t,r,a){var n=Fn.call(this,e);if(!n)return[];var o=Object(f.getCookie)("langCode")||"simpchn";return n.setFiltrateTableData(t,r,a,o,e)}function io(e,t,r){var a=Fn.call(this,e);a&&a.moveRow(t,r)}function lo(e,t,r){var a=Fn.call(this,e);if(!a)return[];a.setRowsProps({rowIndexs:t},{status:r},!this.isUpdatePage)}function co(e,t){var r=Fn.call(this,e);return r?r.getRowProps({rowIndex:t},"status"):[]}function uo(e){var t=Fn.call(this,e);return t?t.getTableProps("currentInfo"):[]}function so(e,t){var r=Fn.call(this,e);return r?r.setTableProps("currentInfo",t,!1):[]}function fo(e,t,r){var a=Fn.call(this,e);return a?a.setRowPosition(t,r):[]}function po(e,t,r){var a=Fn.call(this,e);if(!a)return[];a.insertRowsAfterIndex(t,r)}function ho(e,t){var r=Fn.call(this,e);return r?(r.insertDataByIndexs(t,!1,!0),{rows:r.getData()}):[]}function bo(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Fn.call(this,e);if(!a)return[];a.updateRows(t,r)}function go(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=Fn.call(this,e);if(!n)return[];n.updateRowsProps(t,r,a)}function vo(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=Fn.call(this,e);if(!r)return[];r.resetTableCaches(t)}function mo(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=Fn.call(this,e);if(!a)return[];a.updateTableDataByIndexs(t,r,!0)}function yo(e,t){var r=Fn.call(this,e);if(r){var a=r.getData(),n={value:[],display:[]};return a.find((function(e){n.value.push(e.values[t].value),e.values[t].display&&n.display.push(e.values[t].display)})),n}}function wo(e,t,r){var a=this,n=r.display,o=r.value,i=r.scale,l=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],c=Fn.call(this,e);if(c){var u=c.getData();u.find((function(r){var c=r.status,u=r.rowid;c!=Bn.delete&&(c==Bn.origin&&l&&(r.status=Bn.edit),xn(r.values[t])||(r.values[t]={}),Pn(o)||(r.values[t].value=o,Vn.call(a,e,u,t,o)),!Pn(n)&&(r.values[t].display=n),!Pn(i)&&(r.values[t].scale=i))})),c.setData({data:u})}}function Oo(e){var t=this;e.forEach((function(e){var r=e.areacode,a=e.fieldcode,n=e.scale;t.state.meta[r].items.forEach((function(e){e.attrcode===a&&(e.scale=n)}))})),this.meta.setMeta(this.state.meta)}function So(e,t){var r=Fn.call(this,e);r&&(jn(t)&&(t=[t]),t.forEach((function(t){r.setColumn(e,Cn({},t,{visible:!1}),!1)})),r.refresh())}function Co(e,t){var r=Fn.call(this,e);r&&(jn(t)&&(t=[t]),t.forEach((function(t){r.setColumn(e,Cn({},t,{visible:!0}),!1)})),r.refresh())}function To(e,t,r,a){var n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=Fn.call(this,e);i&&i.setValByKeyAndIndex(t,r,a,{isSetEdit:n,isUpdateBatch:o,shouldForceUpdate:!this.isUpdatePage})}function Ao(e,t,r,a){var n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=Fn.call(this,e);if(i&&t){var l=i.getRows({rowKeyValues:t})[0];l&&i.setValByKeyAndRowId(t,r,a,{isSetEdit:n,isUpdateBatch:o,shouldForceUpdate:!this.isUpdatePage})}}function Io(e,t,r){var a=Fn.call(this,e);if(a)if(0!==a.getData().length){if(-1!==(t=Mn.call(this,e,t)))return a.getValByKeyAndIndex(t,r)}else console.log("无数据")}function Do(e,t,r){var a=Fn.call(this,e);if(a&&t)return a.getValByKeyAndRowKey(t,r)}function xo(e,t,r,a){var n=Fn.call(this,e);n&&n.setCellProps(t,r,{disabled:!a},!this.isUpdatePage)}function Eo(e,t,r,a){var n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=Fn.call(this,e);o&&o.setCellsProps({rowIndexs:t,attrcodes:r,value:{disabled:!a},shouldForceUpdate:!this.isUpdatePage&&n})}function jo(e,t){var r=Fn.call(this,e);if(r)return(r.getColumn(e,t)||{}).visible}function Po(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t&&t.rows&&Array.isArray(t.rows)){var n=Fn.call(this,e);if(!n)return this.editTableDataSource.myEditData=this.editTableDataSource.myEditData||{},void(this.editTableDataSource.myEditData[e]=t);t=n.setTableData(t,{isCache:r,isTop:a}),this.editTableDataSource.myEditData=this.editTableDataSource.myEditData||{},this.editTableDataSource.myEditData[e]=t,In(n.selectedChange)&&n.selectedChange(Sn(Sn({},this.props),this.output),e,0)}else En(t,"传入的第二个参数为所设置的数据，数据格式是对象，且有个rows属性，rows的内容是数组")}function Ro(e,t){var r=Fn.call(this,e);r&&(r.setTableProps("status","browse",!1),Object(f.clearOneTypeToast)("danger"),ko.call(this,e),Po.call(this,e,JSON.parse(JSON.stringify(r.getCache(["afterDel"])||r.getCache(["base"])||{rows:[]}))),f.PubSub.publish("areaChangeComplete",!0),t&&t.call(this))}function ko(e){var t=Fn.call(this,e);if(t){var r=t.getCache("validateFailed")||{},a=function(e){(r[e]||[]).forEach((function(r){t.setCellProps(e,r,{validated:!0},!1)}))};for(var n in r)a(n);t.setCache("validateFailed",null),t.setCache("firstValidateFaild",null)}}function Bo(e,t,r){var a=Fn.call(this,e);a&&("browse"!==(a.getTableProps("status")||"browse")&&"browse"==t&&(Object(f.clearOneTypeToast)("danger"),ko.call(this,e)),a.setTableStatus(t,{shouldForceUpdate:!this.isUpdatePage}),In(a.statusChange)&&a.statusChange(t),In(r)&&r.call(this,e,t,JSON.parse(JSON.stringify(a.getCache(["base"]))),a))}function Fo(e){var t=Fn.call(this,e);if(t)return t.getTableProps("status")||"browse"}function Mo(e){var t=Fn.call(this,e);return t?t.getChangedRows():[]}function Vo(e,t,r){var a=Fn.call(this,e);a&&(r=void 0===r?0:r+1,a.pasteRow({copyRow:t,index:r}))}function No(e){var t=Fn.call(this,e);if(t){var r=t.getCache(["base"])||{};return JSON.parse(JSON.stringify(r))}}function Uo(e){var t=Fn.call(this,e);if(t){var r=t.getCache(["beforeEdit"])||{};return JSON.parse(JSON.stringify(r))}}function Ko(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Fn.call(this,e);if(a){var n=a.getMeta(),o=n&&n[e]&&n[e].items,i=n.gridrelation&&n.gridrelation[e]&&n.gridrelation[e].destEditAreaCode;if(Dn(o)){var l=function e(t,a){t.map((function(t){t.children&&e(t.children,a),(t.attrcode===a||a.includes(t.attrcode))&&(t.disabled=r,i&&i.forEach((function(e){n[e].items.forEach((function(e){e.attrcode===t.attrcode&&(e.disabled=r)}))})))}))};l(o,t),a.setMeta(n)}}}function _o(e,t,r){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(xn(t)&&Dn(t.rows)){var n=Fn.call(this,e);n&&(n.updateTableData(t,a),In(r)&&r())}else En(t,"传入的第二个参数为所设置的数据，数据格式是对象，且有个rows属性，rows的内容是数组")}function qo(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Fn.call(this,e);if(a){var n=a.getCache("langJson"),o=a.getArrayMeta(e);if(!o)return En(!1,"所操作的表格中无ID为".concat(e,"的meta")),!1;if(Dn(t)){var i={},l={},c=null,u=a.getTableProps("rowKey");if((o=o.filter((function(e){return e.visible}))).forEach((function(e){var r=e.attrcode,n=e.required,o=e.label;n&&t.forEach((function(e,t){var n=e.status,s=e.values,d=void 0===s?{}:s;if(n!==Bn.delete){Pn(d[r])&&(d[r]={});var f=d[r].value;(Rn(f)||Dn(f)&&0===f.length)&&(i[t]=i[t]||[],i[t].push("[".concat(o,"]")),c||(c=[e[u],r]),l[e[u]]=l[e[u]]||[],l[e[u]].push(r),a.setCache("validateFailed",l),a.setCellProps(e[u],r,{validated:!1},!1))}}))})),Object.keys(i).length>0){var s="";if(console.log(a,l,c,"validateFailed"),l&&a.refresh(),c&&r){var d=document.querySelector('.table-cell-wrapper[cellselectorkey="'.concat(c[0],"@").concat(c[1],'"] [tabindex="0"]'));d&&(d.ncExecuteFocus=!0,d.focus(),d.ncExecuteFocus=!1)}return Object.keys(i).forEach((function(e){s+="".concat(n&&n.table_first).concat(+e+1," ").concat(n&&n.table_row,": ").concat(i[e].join("，"),"；")})),Object(f.toast)({content:"".concat(n&&n.table_no_empty,"："),color:"danger",TextArr:[n.table0022,n.table0023,n.table0024],groupOperation:!0,groupOperationMsg:s.split("；").map((function(e){return e?e+"；":e})),mark:"edit-table-toastx"}),!1}return!0}return En(!1,"所传入的第二个参数rows应是数组，请传入数组"),!1}}function Ho(e,t){var r=this,a=Fn.call(this,e);if(a&&Array.isArray(t.rows)){var n=Ln.call(this,e,!1);t.rows.map((function(t){var a=t.rowid,o=t.values,i=t.status;if(xn(o)){var l=void 0===i||i==Bn.origin?Bn.edit:i;n.map((function(t){if(t.rowid==a){t.status=l,Object.keys(o).forEach((function(e){t.values[e]=o[e]}));var n=t.values,i=t.rowid;for(var c in n){var u=n[c]?n[c].value:null;Vn.call(r,e,i,c,u)}}}))}})),a.refresh()}}function Lo(e){var t=Fn.call(this,e);if(t){t.setTableProps("focusIndex",-1,!1);var r=t.getData();t.saveRowsOldValue({rows:r}),t.refresh()}}function Jo(e,t){var r=Fn.call(this,e);if(r){var a=r.getData();if(!a.length||!t.length)return console.log("empty data");var n=r.getTableProps("rowKey");a.forEach((function(e,r){t.forEach((function(t){t.index;var r=t.keys;if(t[n]===e[n]){var a=e.values;Object.keys(r).forEach((function(e){xn(a[e])||(a[e]={});var t=r[e]?"off":"on";a[e].disabled=t}))}}))})),r.setData({data:a,shouldForceUpdate:!this.isUpdatePage})}}function Go(){f.PubSub.publish("otherComplete",!0)}function zo(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=Fn.call(this,e);if(!n)return[];n.updateTableDataByRowId(t,r,!this.isUpdatePage,a)}function Wo(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=Fn.call(this,e);return r?r.getSelectedRows(t):[]}function Qo(e,t){var r=this,a=Fn.call(this,e);if(!a)return[];var n=a.getConfig(),o=n.crossPageSelect,i=n.pkname;if(o&&i)if(t){var l=a.getStore("allpks");a.setStore(["checkInfo","crossPageSelectIndex"],new Set(l),!1),a.setStore(["checkInfo","checkedAllpage"],!0,!1)}else a.setStore(["checkInfo","crossPageSelectIndex"],new Set,!1),a.setStore(["checkInfo","checkedAllpage"],!1,!1);return a.setAllRowsSelected(t,!this.isUpdatePage,(function(){var t=a.getSelectedRows().length;In(a.selectedChange)&&a.selectedChange(Sn(Sn({},r.props),r.output),e,t)}))}function $o(e){var t=Fn.call(this,e);if(!t)return[];t.reverseRowsSelected(!this.isUpdatePage);var r=t.getSelectedRows().length;In(t.selectedChange)&&t.selectedChange(Sn(Sn({},this.props),this.output),e,r)}function Yo(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0,n=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=Fn.call(this,e);if(o){var i=o.getStore("sideBoxConfig")||{};i=Sn(Sn({},i),{},{show:!0});var l=document.getElementsByTagName("html");if(l[0].style.overflow="hidden","edit"==t){i.record=r,i.index=a,i.operateType=t,i.status="open";var c=o.getViewData();o.setCache(["beforeEdit"],JSON.parse(JSON.stringify({rows:c})))}else if("add"==t){i.operateType=t,i.status="open";var u=Jn.call(this,e,!1,!1).length,s=o.addTableRow(u,{},!1,{autoFocus:n});i.record=s}o.setStore("sideBoxConfig",i)}}function Xo(e){var t=Fn.call(this,e);if(t){var r=t.getStore("sideBoxConfig")||{};return r=Sn(Sn({},r),{},{show:!1,status:"close"}),t.setStore("sideBoxConfig",r),document.getElementsByTagName("html")[0].style.overflow="",!1}}function Zo(e){var t=Fn.call(this,e);return t?t.batchChangeTableData():null}function ei(e,t,r){var a=Fn.call(this,e);if(a){var n=a.getViewData("filter");if(Array.isArray(t)){var o=!0;if(t.forEach((function(e){n.length-1>=e&&e>=0?a.setRowProps({rowIndex:e},{disabled:!r},!1):(o=!1,En(!1,"所传入的数组中，数值不符合要求"))})),o){if(gn(new Set(t)).length===n.length){var i=a.getCheckInfo();i.disabledAll=!r,a.setCheckInfo({checkInfo:i,shouldForceUpdate:!1})}return a.refresh(),!0}return!1}return n.length-1>=t&&t>=0?(a.setRowProps({rowIndex:t},{disabled:!r},!0),!0):void 0}}function ti(e,t){var r=Fn.call(this,e);if(r){var a=r.getCheckInfo();a.disabledAll=!t,r.setCheckInfo({checkInfo:a,shouldForceUpdate:!1});var n=r.getData(),o=r.getTableProps("rowKey");n.forEach((function(e){r.setRowProps({rowKeyValue:e[o]},{disabled:!t},!1)})),r.refresh()}}function ri(e,t,r){var a=Fn.call(this,e);a&&a.setRowsSelected({rowIndexs:t},r)}function ai(e){var t=Fn.call(this,e);if(t)return t.getCache("oldBatchData")}function ni(e){var t=Fn.call(this,e);if(t){var r=kn(this.state.meta,e),a=t.getPageInfo(),n=a.pageIndex,o=void 0===n?0:n,i=a.pageSize;return{pageIndex:o>0?o-1:0,pageSize:void 0===i?r:i}}}function oi(e,t){var r=Fn.call(this,e);r&&r.refresh()}function ii(e){var t=Fn.call(this,e);if(t)return t.getStore(["sortParam"])}function li(e,t,r,a){var n=Fn.call(this,e);if(n&&Array.isArray(r)){var o=Ln.call(this,e,!1),i=r.length;o.map((function(e,n){for(var o=e.values,l=0;l<i;l++)if(o[t]&&o[t].value===r[l][t]){for(var c in r[l])o[c]?o[c].value=r[l][c]:o[c]={value:r[l][c]},"saga_status"===c&&"1"===r[l][c]&&a&&(o.saga_errormesg=a);break}return e})),n.setData({data:o})}}function ci(e,t){var r=t.attrcode,a=t.rowId,n=t.value,o=Fn.call(this,e);o&&o.setCache(["customColData",r,a],n)}function ui(e){var t=e.areaCode,r=Fn.call(this,t);if(r)return r.updateAfterBatchChange(this,e)}function si(e){var t=e.tableId,r=Fn.call(this,t);if(r)return r._updateAndAddRows(e)}function di(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function fi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pi(){return this.register("editTable"),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?di(Object(r),!0).forEach((function(t){fi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):di(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},hi.call(this,l))}function hi(e){var t={};for(var r in e)t[r]=e[r].bind(this);return t}pi.component=bn.a,pi.displayName="EditTable",pi.unfinished=["editTableUnFinishedApi"];var bi=r(14),gi=r.n(bi),vi=r(15),mi=r.n(vi);function yi(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function wi(e){var t="",r=Object(f.getAppUrl)().pageurl,a=(t=decodeURIComponent(decodeURIComponent(r))).match(/ifr=\/nccloud\/resources\/(\S*).html/)||t.match(/ifr=\/(\S*).html/);return(a&&a[1]&&a[1].split("/")||["none+","none+"])[e]}function Oi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log(e,"页面基础信息");var t=wi(0),r=wi(1),a=e.appcode||f.pageTo.getAppCode(),n=e.pagecode||f.pageTo.getPageCode();return t&&r&&a&&n?"extend_".concat(t,"/").concat(r,"/").concat(a,"/").concat(n):null}var Si=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"install",value:function(e,t){var r=t.billinfo;if(!b)return console.log("本页面禁止加载二开文件~"),!1;this.billinfo=r;var a=Oi(r);if(a){var n="../../../../".concat("NCCExtend","/").concat(a,"/index.js"),o="".concat("NCCExtend","/").concat(a,"/index");if(console.log(n),!function(e){var t=document.getElementsByTagName("script");return-1!==Array.from(t).map((function(e){return e.getAttribute("src")})).findIndex((function(t){return t===e}))}(n)){var i=document.createElement("script");i.type="text/javascript",i.src=n,i.readyState?i.addEventListener("readstatechange",(function e(){"loaded"!==i.readyState&&"complete"!==i.readyState||i.removeEventListener("readstatechange",e)})):i.addEventListener("load",(function(){var t=null;window[o]instanceof Object&&window[o].default instanceof Object?t=window[o].default:window.NCCExtend instanceof Object&&(t=window.NCCExtend),t&&(t.dataAlreadyLoaded&&"function"==typeof t.dataAlreadyLoaded&&(f.ViewModel.dataAlreadyLoaded=t.dataAlreadyLoaded),t.templateAlreadyLoaded&&"function"==typeof t.templateAlreadyLoaded&&(f.ViewModel.templateAlreadyLoaded=t.templateAlreadyLoaded),t.beforeAjaxSend&&"function"==typeof t.beforeAjaxSend&&(f.ViewModel.beforeAjaxSend=t.beforeAjaxSend),t.localExtendRouter&&"function"==typeof t.localExtendRouter&&(f.ViewModel.localExtendRouter=t.localExtendRouter),e(t))})),i.addEventListener("error",(function(){console.log("file load error NCCExtend "+n)}));try{document.body&&document.body.appendChild(i)}catch(e){console.log("script load error , not found src")}}}}},{key:"removeScript",value:function(e){var t=document.querySelector('[src="'.concat(e,'"]'));t&&document.body.removeChild(t)}},{key:"unstall",value:function(){var e=Oi(this.billinfo);e&&(window.NCCExtend&&(window.NCCExtend=null),this.removeScript("../../../../".concat("NCCExtend","/").concat(e,"/index.js")))}}])&&yi(t.prototype,r),a&&yi(t,a),e}()),Ci=r(1),Ti=r(10),Ai=r.n(Ti);function Ii(e){return(Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Di(){return(Di=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function xi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],a=!0,n=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){n=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(n)throw o}}return r}(e,t)||ji(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ei(e){return function(e){if(Array.isArray(e))return Pi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ji(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ji(e,t){if(e){if("string"==typeof e)return Pi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pi(e,t):void 0}}function Pi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Ri(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ki(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ri(Object(r),!0).forEach((function(t){Bi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ri(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Bi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mi(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Vi(e,t,r){return t&&Mi(e.prototype,t),r&&Mi(e,r),e}function Ni(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ui(e,t)}function Ui(e,t){return(Ui=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ki(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=Hi(e);if(t){var n=Hi(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return _i(this,r)}}function _i(e,t){return!t||"object"!==Ii(t)&&"function"!=typeof t?qi(e):t}function qi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hi(e){return(Hi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Li(e,t){var r=this,a={};return!Array.isArray(t)&&(t=[t]),t.forEach((function(t){t?Object.keys(t).forEach((function(e){a[e]=t[e].bind(r)})):console.warn("".concat(e,"组件没有加载"))})),a}t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.initTemplate,r=e.mutiLangCode,a=e.billinfo,n=e.domainName,o=e.hashChangeCallBack,i=e.relationAfterEventCallBack,l=e.orderOfHotKey,s=e.appAutoFocus,d=e.historyBack;return function(e){return function(c){Ni(h,c);var p=Ki(h);function h(e){var t;return Fi(this,h),(t=p.call(this,e)).use={search:function(){}},t.componentNames=[],t.register=function(e,r){t.componentNames.push(e),t.use[e]=t.use[e]||function(){for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];n.forEach((function(a){t[e+"DataSource"]=t[e+"DataSource"]||{},t[e+"DataSource"][a]=t[e+"DataSource"][a]||(r||t[e]._store)()}))}},t.formDataSource={},t.simpleTableDataSource={},t.editTableDataSource={},t.cardTableDataSource={},t.searchDataSource={},t.treeTableDataSource={},t.metaData={},t.beforeUpdatePage=function(){t.isUpdatePage=!0},t.updatePage=function(e,r,a,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];t.isUpdatePage=!1,a&&Array.isArray(a),e&&t.form.updateForm(e),r&&t.cardTable.updateTable(r,o),n&&t.editTable.updateTable(n,o)},t.keyDownHandle=function(e){[e.keyCode,e.which,e.charCode].find((function(e){return 9===e||13===e}))&&(f.ViewModel.shouldAutoFocus=!0),setTimeout((function(){f.ViewModel.shouldAutoFocus=!1}),300)},t.disableHistory=function(){history.pushState(null,null,document.URL)},t.isIE=function(){var e=navigator.userAgent,t=!1;return e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1&&!isOpera&&(t=!0),e.indexOf("Trident")>-1&&(t=!0),t},t.startPerMonitor=function(){if(console.log("sprBegin---"),t.listenSprNum=1,window.top.sys_monitor){var e=qi(t);window.top.addEventListener("modifySPR",t.handleModifySPR,!1),window.top.sys_monitor.getbMonitor&&window.top.sys_monitor.getbMonitor()&&!t.isIE()&&window.top.sys_monitor.initMonitor(e,!1)}},t.handleModifySPR=function(e){(console.log("111--",e.data,t.listenSprNum),e.data.spr&&1==t.listenSprNum&&window.top.sys_monitor)?(window.top.sys_monitor.startMonitor(),window.top.sys_monitor.getbMonitor()&&(t.listenSprNum+=1,window.top.sys_monitor.initMonitor(that))):t.listenSprNum=1},t.setPageStatus=function(e,r){if(["edit","add","browse"].includes(e)){var a=window.location.hash.split("?"),n=Ai.a.parse(a[1]);n=ki(ki({},n),{},{type:e,id:r}),a[1]=Ai.a.stringify(n),window.location.hash=a.join("?"),t.setState({status:e},(function(){}))}},t.getPageStatus=function(){return t.state.status},t.endMonitor=function(){window.top.sys_monitor&&window.top.sys_monitor.endMonitor&&window.top.sys_monitor.endMonitor()},t.myState={oprationIndex:-1,buttonsComponent:{},buttonsLangJson:{lang:null,intl:null},stopOprationBtnsRenderAreas:{},oprationButtons:{},appButtons:{},buttons:[],btnInfo:{},transferTable:{totalTemplateKeys:{columns:[],bodyColumn:[],fullColumns:[]}},status:{totalStatusOfTransferTable:!1,headTotalStatusOfTransferTable:!1,fullTotalStatusOfTransferTable:!1,bodyTotalStatusOfTransferTable:!1,traversalStatus:!1},intl:{},jsonIntl:{},transferList:{},search:{keySessionS:[]}},t.myForm={},t.myCrossServiceBtn={},t.myCrossServiceState={},t.nativeSocketBillInfo={},t.syncTreeDataSource={},t.asyncTreeDataSource={},t.globalPageCode="",a&&a.pagecode&&(t.globalPageCode=a.pagecode),t.hashChangeCallBack=o,t.relationAfterEventCallBack=i,t.myCardPagination,t.myTable={myEditTable:{},myMulTable:{}},t.myTableData={myEditData:{},myMulData:{}},t.infoExchangeController=ki({onHeightChange:function(e){if(!e)return!1}},f.PubSub),t.orderOfHotKey=l||[],t.withHotKeyChange=t.orderOfHotKey.length>0,t.appAutoFocus=!1!==s,t.autoFocusDeferred=!1,t.state={status:status,meta:{},form:{},cardPagination:{},formBack:{},formGroupData:{},showFormIcon:{},groupsId:[],button:{},buttons:[],btnInfo:{},table:{},anchorNav:{},dragDown:{},insertTable:{},transferTable:{},transferList:{},renderItem:{},treeData:{},modal:{},tableModeldata:{},treeTableCol:{},referItem:{},intl:{},formItemWidth:{},autoFocusFormItem:{},tabOrder:[],tab:"",tabData:{}},t.billinfo=a,t.currentBill={},t.context={},t.formItemAttrFlag={},t.meta={getMeta:function(){for(var e=t.state.meta,r={},a=function(){var a=o[n];if(r[a]=e[a],e[a]&&e[a].items&&("table"===e[a].moduletype&&(r[a].items=e[a].items.get?e[a].items.get():e[a].items),"form"===e[a].moduletype)){var i=t.formDataSource||{},l={};if(i[a])l=i[a];else{var c=e&&e.formrelation||{};Object.keys(c).forEach((function(t){if(Array.isArray(c[t])&&c[t].includes(a)&&i[t])l=i[t];else{var r=e&&e.formassociatedrelation||{};Object.keys(r).forEach((function(e){Array.isArray(r[e].formtabs)&&r[e].formtabs.includes(t)&&(l=i[e])}))}}))}if(l&&"function"==typeof l.getMetaItems){var u=l.getMetaItems(a)||[];0!==u.length&&(r[a].items=u)}else r[a].items=e[a].items}},n=0,o=Object.keys(e);n<o.length;n++)a();return r},setMeta:function(e,r){Object.keys(e).forEach((function(r){e[r]&&e[r].moduletype&&t.componentNames.find((function(a){var n=t[a+"DataSource"];if(n&&n[r])return n[r].setMeta(e,r,!1,t.app_context),!0}))})),t.setState({meta:e},(function(){r&&r()}))},addMeta:function(e,r){if(e.gridrelation&&t.state.meta.gridrelation)for(var a in t.state.meta.gridrelation)e.gridrelation[a]||(e.gridrelation[a]=t.state.meta.gridrelation[a]);if(e.formrelation&&t.state.meta.formrelation)for(var n in t.state.meta.formrelation)e.formrelation[n]||(e.formrelation[n]=t.state.meta.formrelation[n]);if(e.containerrelation&&t.state.meta.containerrelation)for(var o in t.state.meta.containerrelation)e.containerrelation[o]||(e.containerrelation[o]=t.state.meta.containerrelation[o]);if(e.formassociatedrelation&&t.state.meta.formassociatedrelation)for(var i in t.state.meta.formassociatedrelation)e.formassociatedrelation[i]||(e.formassociatedrelation[i]=t.state.meta.formassociatedrelation[i]);t.meta.setMeta(Object.assign(t.state.meta,e),r)},removeMeta:function(e){t.state.meta.hasOwnProperty(e)&&(delete t.state.meta[e],t.setState({meta:t.state.meta}))},multipleMeta:function(e){var t=e.gridMultiple;if(t){var r=Object.keys(t);r.length&&r.forEach((function(t){e.gridMultiple[t].map((function(r){var a={label:r.name,attrcode:r.code,visible:!0,children:[]},n={};r.children.map((function(r){e[t].items.map((function(o,i){o.attrcode==r&&(a.children.push(o),n[t]?e[t].items.splice(i,1):e[t].items.splice(i,1,a),n[t]=!0)}))}))}))}))}return e},handleMultiple:function(e,r){if(r){var a=Object.keys(r);a.length&&a.forEach((function(a){r[a].map((function(r){t.meta.handleChildMultiple(e,a,r)}))}))}return e},handleChildMultiple:function(e,r,a){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!!Object(f.isUndefined)(a.visible)||!!a.visible,i={label:a.name,attrcode:a.code,visible:o,children:[]},l={};return a.children.map((function(a){e[r].items.map((function(o,c){if(o.attrcode==a)i.children.push(o),n&&!l[r]?e[r].items.splice(c,1,i):e[r].items.splice(c,1),l[r]=!0;else if(Object(f.isObj)(a)&&a.hasOwnProperty("children")){var u=t.meta.handleChildMultiple(e,r,a,!1);u.children.length>0&&i.children.push(u)}}))})),i},renderTabs:function(e,r,a,n){a=a&&Array.isArray(a)?a:r,e.gridrelation[r&&r[0]||"tab"].tabRelation=Ei(a),e.gridrelation["extra_&&&"]=ki({},e.gridrelation[r&&r[0]||"tab"]),e["extra_&&&"]={items:[]},t.setState({meta:e,tabOrder:r,tab:a[0]},(function(){n&&n()}))}},t.primordialTable={},t.batchData={},t.editTableInitValue={},t.tableChangedRowsOldValue={},t.formOldValues={},t.formItemAttrFlag={},t.formStatusFlag={},t.formSetFormValues={},t.formsetFormVisible={},t.setFormVisibleByForm={},t.copyMetaBeforePkorg={},t.form=Ji.call(qi(t),Se),t.table=Ji.call(qi(t),fn),t.editTable=Ji.call(qi(t),pi),t.cardTable=Ji.call(qi(t),oa),t.treeTableManyCol=Ji.call(qi(t),mi.a),t.search=Li.call(qi(t),"search",Ci.CreateSearch),t.cardPagination=Li.call(qi(t),"cardPagination",Ci.CardPagination),t.BillHeadInfo=Li.call(qi(t),"BillHeadInfo",Ci.BillHeadInfo),t.socket=Li.call(qi(t),"socket",Ci.Socket),t.button=Li.call(qi(t),"button",[Ci.CrossServiceBtns,Ci.Button,Ci.ButtonApp]),t.DragWidthCom=Ci.DragWidthCom,t.insertTable=Li.call(qi(t),"insertTable",Ci.InsertTable),t.transferTable=Li.call(qi(t),"transferTable",gi.a),t.asyncTree=Li.call(qi(t),"asyncTree",Ci.AsyncTree),t.syncTree=Li.call(qi(t),"syncTree",Ci.SyncTree),t.downLoad=function(e){var t=e.data,r=e.url;Object(f.formDownload)({params:t,url:r,enctype:1})},t.modal=Li.call(qi(t),"modal",Ci.CreateModal),t.NCmodal=Li.call(qi(t),"NCmodal",Ci.CreateNCModal),t.renderItem=function(e,r,a,n){if("form"===e){var o=t[e+"DataSource"]||{},i={};if(o[r])i=o[r];else{var l=t.state.meta&&t.state.meta.formrelation;l&&Object.keys(l||{}).forEach((function(e){Array.isArray(l[e])&&l[e].includes(r)&&o[e]&&(i=o[e])}))}"function"==typeof i.replaceItem&&i.replaceItem(a,n)}else{var c=t.state.renderItem;t.state.renderItem[e]=t.state.renderItem[e]||{},t.state.renderItem[e][r]=t.state.renderItem[e][r]||{},t.state.renderItem[e][r][a]=n,t.setState({renderItem:c})}},t.getPageDataByMeta=function(){var e=t.meta.getMeta(),r={};for(var a in e)e[a].moduletype&&"form"===e[a].moduletype?r[a]=t.form.getAllFormValue(a):e[a].moduletype&&"table"===e[a].moduletype&&(r[a]=t.editTable.getAllRows(a));return r},t.createMasterChildData=function(e,r,a,n,o){var i={pageid:e,head:{},body:{}},l=t.meta.getMeta();return t.currentBill&&t.currentBill.templetid?i.templetid=t.currentBill.templetid:i.templetid=l.pageid&&l.pageid,l[r]&&l[r].moduletype&&"form"===l[r].moduletype&&(i.head[r]=t.form.getAllFormValue(r),i.head[r].areacode=r),l[a]&&l[a].moduletype&&"table"===l[a].moduletype&&(i.body[a]=o?{areaType:"table",rows:o,areacode:null}:n&&"editTable"===n?t.editTable.getAllData(a):t.cardTable.getAllData(a),i.body[a].areacode=a),i},t.createTabsMasterChildData=function(e,r,a){var n={pageid:e,head:{},body:{}},o=t.meta.getMeta();return n.templetid=o.pageid&&o.pageid,o[r]&&o[r].moduletype&&"form"===o[r].moduletype&&(n.head[r]=t.form.getAllFormValue(r),n.head[r].areacode=r),o[a]&&o[a].moduletype&&"table"===o[a].moduletype&&(n.body[a]=t.cardTable.getAllTabsData(a),n.body[a].areacode=a),n},t.createMasterChildDataSimple=function(e,r,a,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i={pageid:e,head:{},body:{}},l=t.meta.getMeta();return t.currentBill&&t.currentBill.templetid?i.templetid=t.currentBill.templetid:i.templetid=l.pageid&&l.pageid,l[r]&&l[r].moduletype&&"form"===l[r].moduletype&&(i.head[r]=t.form.getAllFormValueSimple(r),i.head[r].areacode=r),l[a]&&l[a].moduletype&&"table"===l[a].moduletype&&(i.body[a]=n&&"editTable"===n?Object(f.delEmptyData)(t.editTable.getAllData(a),"inner_use",o):Object(f.delEmptyData)(t.cardTable.getAllData(a),"inner_use",o),i.body[a].areacode=a),i},t.requestMeta=function(e,r,a,n,o){var i=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=arguments.length>6?arguments[6]:void 0;t.globalPageCode=a;var c=[{rqUrl:"/platform/templet/querypage.do",rqJson:'{\n  "pagecode": "'.concat(a,'",\n  "appcode": "').concat(r,'"\n}'),rqCode:"template"},{rqUrl:"/platform/appregister/queryallbtns.do",rqJson:'{\n  "pagecode": "'.concat(a,'",\n  "appcode": "').concat(r,'"\n}'),rqCode:"button"},{rqUrl:"/platform/appregister/queryappcontext.do",rqJson:'{\n  "appcode": "'.concat(l||r,'"}'),rqCode:"context"}];o&&(c[0]={rqUrl:"/platform/templet/querypage.do",rqJson:'{\n  "pagecode": "'.concat(a,'",\n  "appcode": "').concat(r,'",\n  "templetid": "').concat(o,'"\n}'),rqCode:"template"}),e&&e.reqDataQuerypage&&(c[0]=e.reqDataQuerypage),e&&e.reqDataQueryallbtns&&(c[1]=e.reqDataQueryallbtns);var u="0"!=localStorage.getItem("storeCipher"),s=Object(f.getMetaKey)(r,a),d=new f.gzip;t.myState.search.keySessionS.push(s);var p={};if(i)if(p=Object(f.getGlobalStorage)("localStorage",s),p=u?p&&d.unzip(p):p&&JSON.parse(p)){var h="";p.template&&p.template.ts&&(h=p.template.ts),c[0].rqJson='{\n  "pagecode": "'.concat(a,'",\n  "appcode": "').concat(r,'"\n, \n  "compareTs":true\n, \n  "ts":"').concat(h,'"\n}'),t.refreshMeta(d,p,c,n,u,s,r,a,!0)}else t.refreshMeta(d,{},c,n,u,s,r,a,!1);else t.refreshMeta(d,{},c,n,u,s,r,a,!1)},t.refreshMeta=function(e,r,a,n,o,i,l,c,u){Object(f.ajax)({url:"/nccloud/platform/pub/mergerequest.do",data:a,sysAppcode:l,success:function(a){if(a.data){var s="";if(t.app_context=a.data.context,r.context=a.data.context,r.button=a.data.button,a.data.template){for(var d=a.data,p=d.template,h=0,b=Object.keys(p);h<b.length;h++){var g=b[h];p[g].moduletype&&"table"===p[g].moduletype&&(p[g].appcode=l,p[g].pagecode=c,p[g].templateCode=p.code,p[g].pageid=p.pageid)}s=JSON.stringify(d),S(qi(t),"templateAlreadyLoaded")(d),n&&"function"==typeof n&&n(d)}else s=JSON.stringify(r),S(qi(t),"templateAlreadyLoaded")(r),n&&"function"==typeof n&&n(r);var v=s;if(o)v=s&&e.zip(s);try{Object(f.setGlobalStorage)("localStorage",i,v)}catch(e){Object.keys(localStorage).forEach((function(e){e.includes("appTempletStorage_")&&delete localStorage[e]})),Object(f.setGlobalStorage)("localStorage",i,v)}}else u||(S(qi(t),"templateAlreadyLoaded")(r),n&&"function"==typeof n&&n(r))}})},t.createUIDom=function(e,r,a){if(window.actionName="合并请求",e.billtype){Object(f.ajax)({url:"/nccloud/platform/pub/getappurl.do",method:"post",data:{billpk:null,billtypecode:e.billtype,pagecode:e.pagecode||null,sence:e.sence||"1"},success:function(n){if(n.success&&n.data&&n.data.appPageVO){var o=n.data.appcode,i=e.pagecode||n.data.appPageVO.pagecode;t.requestMeta(e,o,i,r,null,a)}}})}else{var n=Object(f.getAppReqParam)(),o=n.appcode,i=n.pagecode,l=n.ssc_templetid,c=e.pagecode||i,u=e.appcode||o;t.requestMeta(e,u,c,r,l,a,o)}},t.createExtCardDataSimple=function(e,r,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={pageid:e,head:{},bodys:{}},i=t.meta.getMeta();return t.currentBill&&t.currentBill.templetid?o.templetid=t.currentBill.templetid:o.templetid=i.pageid&&i.pageid,i[r]&&i[r].moduletype&&"form"===i[r].moduletype&&(o.head[r]=t.form.getAllFormValueSimple(r),o.head[r].areacode=r),a&&a instanceof Array&&a.length>0&&a.forEach((function(e){i[e]&&i[e].moduletype&&"table"===i[e].moduletype&&(o.bodys[e]=Object(f.delEmptyData)(t.cardTable.getAllData(e),"inner_use",n),o.bodys[e].areacode=e)})),o},t.createExtCardData=function(e,r,a,n){var o={pageid:e,head:{},bodys:{}},i=t.meta.getMeta();return t.currentBill&&t.currentBill.templetid?o.templetid=t.currentBill.templetid:o.templetid=i.pageid&&i.pageid,i[r]&&i[r].moduletype&&"form"===i[r].moduletype&&(o.head[r]=t.form.getAllFormValue(r),o.head[r].areacode=r),a&&a instanceof Array&&a.length>0&&a.forEach((function(e){i[e]&&i[e].moduletype&&"table"===i[e].moduletype&&(o.bodys[e]=n?{areaType:"table",rows:n,areacode:null}:t.cardTable.getAllData(e),o.bodys[e].areacode=e)})),o},t.createTabsCardData=function(e,r,a){var n={pageid:e,head:{},bodys:{}},o=t.state,i=o.tabData,l=o.tabOrder,c=o.tab,u=l[0],s=t.myTable[u].state.table,d=t.meta.getMeta();return d[r]&&d[r].moduletype&&"form"===d[r].moduletype&&(n.head[r]=t.form.getAllFormValue(r),n.head[r].areacode=r),a&&a instanceof Array&&a.length>0&&a.forEach((function(e){d[e]&&d[e].moduletype&&"table"===d[e].moduletype&&(n.bodys[e]={rows:JSON.parse(JSON.stringify(e===c?s.rows:i[e].rows)),areaType:"table",areacode:e})})),n},t.getSearchParam=function(e){return f.pageTo.getSearchParam(e)},t.pushTo=function(e,r){f.pageTo.pushTo(e,r,t.hashChangeCallBack)},t.linkTo=function(e,r){f.pageTo.linkTo(e,r,t.hashChangeCallBack)},t.openTo=function(e,t,r){f.pageTo.openTo(e,t,r)},t.specialOpenTo=function(e,t,r,a){f.pageTo.specialOpenTo(e,t,r,a)},t.setHashChangeCallback=function(e){e&&"function"==typeof e&&(t.hashChangeCallBack=e)},t.setRelationAfterEventCallBack=function(e){e&&"function"==typeof e&&(t.relationAfterEventCallBack=e)},t.setRelationItemBillinfo=function(e){e&&(t.billinfo=e)},t.linkBack=function(){f.pageTo.linkBack()},t.openOut=function(e){f.pageTo.openOut(e)},t.getUrlParam=function(e){return f.pageTo.getUrlParam.call(qi(t),e)},t.setUrlParam=function(e){f.pageTo.setUrlParam(e,t.hashChangeCallBack)},t.delUrlParam=function(e){f.pageTo.delUrlParam(e,t.hashChangeCallBack)},t.addUrlParam=function(e){f.pageTo.addUrlParam(e,t.hashChangeCallBack)},t.getAppCode=function(){return f.pageTo.getAppCode()},t.getPageCode=function(){return f.pageTo.getPageCode()},t.createFormAfterEventData=function(e,r,a,n,o,i){var l={pageid:e},c=t.meta.getMeta();t.currentBill&&t.currentBill.templetid?l.templetid=t.currentBill.templetid:l.templetid=c.pageid&&c.pageid,c&&c[r]&&c[r].moduletype&&"form"===c[r].moduletype&&(l[r]=t.form.getAllFormValue(r),l[r].areacode=r);var u={attrcode:n,newvalue:o,oldvalue:t.formDataSource[a]?t.formDataSource[a].getOldValue(n):null,form:l};return i&&(u.areacode=i),u},t.createHeadAfterEventData=function(e,r,a,n,o,i,l,c){var u={};"string"==typeof a?u=t.createMasterChildData(e,r,a,c):a instanceof Array&&(u=t.createExtCardData(e,r,a));var s={attrcode:o,newvalue:i,oldvalue:t.formDataSource[n]?t.formDataSource[n].getOldValue(o):null,card:u};return l&&(s.areacode=l),s},t.createTabsAfterEventData=function(e,r,a,n,o,i,l,c){var u={};"string"==typeof a?u=t.createMasterChildData(e,r,a,c):a instanceof Array&&(u=t.createTabsCardData(e,r,a));var s={attrcode:o,newvalue:i,oldvalue:t.formDataSource[n]?t.formDataSource[n].getOldValue(o):null,card:u};return l&&(s.areacode=l),s},t.createGridAfterEventData=function(e,r,a,n,o,i,l,c,u){var s={pageid:e},d=t.meta.getMeta();return t.currentBill&&t.currentBill.templetid?s.templetid=t.currentBill.templetid:s.templetid=d.pageid&&d.pageid,d&&d[r]&&d[r].moduletype&&"table"===d[r].moduletype&&(s[r]=c?{areaType:"table",rows:c,areacode:null}:l&&"cardTable"===l?t.cardTable.getAllData(r):t.editTable.getAllData(r),s[r].areacode=u||r),{attrcode:n,changedrows:o,grid:s,index:i}},t.createBodyAfterEventData=function(e,r,a,n,o,i,l,c,u,s){return"string"==typeof a?{attrcode:o,changedrows:i,card:t.createMasterChildData(e,r,a,c,u),index:l}:a instanceof Array?{areacode:s||n,attrcode:o,changedrows:i,card:t.createExtCardData(e,r,a,u),index:l}:void 0},t.createTabsBodyAfterEventData=function(e,r,a,n,o,i,l,c){var u={};return"string"==typeof a?{attrcode:o,changedrows:i,card:u=t.createTabsMasterChildData(e,r,a,c),index:l}:a instanceof Array?(u=t.createTabsCardData(e,r,a),{areacode:t.state.tab,attrcode:o,changedrows:i,card:u,index:l}):void 0},t.createCurrentRowAfterEventData=function(e,r,a,n,o,i,l){var c={pageid:e,head:{}},u={},s=t.meta.getMeta();return s[r]&&s[r].moduletype&&"form"===s[r].moduletype&&(c.head[r]=t.form.getAllFormValue(r),c.head[r].areacode=r),s[n]&&s[n].moduletype&&"table"===s[n].moduletype&&(u[n]=t.cardTable.getDataByIndex(n,l),u[n].areacode=n),"string"==typeof a&&(c.body=u),Array.isArray(a)&&(c.bodys=u),{areacode:n,attrcode:o,changedrows:i,card:c,index:l}},t.getrelationItems=function(e){if(e&&e instanceof Array){var t=[];return e.forEach((function(e){e.editAfterFlag&&!0===e.editAfterFlag&&t.push(e.attrcode)})),t}},t.createGridAfterEventRecord=function(e,r,a,n,o,i,l){var c={pageid:e},u=t.meta.getMeta();return t.currentBill&&t.currentBill.templetid?c.templetid=t.currentBill.templetid:c.templetid=u.pageid&&u.pageid,u&&u[r]&&u[r].moduletype&&"table"===u[r].moduletype&&(c[r]={rows:[i]},c[r].areacode=l||r),{attrcode:n,changedrows:o,grid:c,index:0}},t.createHeadAfterEventRecord=function(e,r,a,n,o,i,l){var c={pageid:e,head:{}},u=t.meta.getMeta();t.currentBill&&t.currentBill.templetid?c.templetid=t.currentBill.templetid:c.templetid=u.pageid&&u.pageid,u[r]&&u[r].moduletype&&"form"===u[r].moduletype&&(c.head[r]=t.form.getAllFormValue(r),c.head[r].areacode=r),"string"==typeof a?(c.body={},u[a]&&u[a].moduletype&&"table"===u[a].moduletype&&(c.body[a]={rows:[]},c.body[a].areacode=a)):a instanceof Array&&(c.bodys={},a&&a instanceof Array&&a.length>0&&a.forEach((function(e){u[e]&&u[e].moduletype&&"table"===u[e].moduletype&&(c.bodys[e]={rows:[]},c.bodys[e].areacode=e)})));var s={attrcode:o,newvalue:i,oldvalue:t.formDataSource[n]?t.formDataSource[n].getOldValue(o):null,card:c};return l&&(s.areacode=l),s},t.createBodyAfterEventRecord=function(e,r,a,n,o,i,l,c){var u={pageid:e,head:{}},s=t.meta.getMeta();return t.currentBill&&t.currentBill.templetid?u.templetid=t.currentBill.templetid:u.templetid=s.pageid&&s.pageid,s[r]&&s[r].moduletype&&"form"===s[r].moduletype&&(u.head[r]=t.form.getAllFormValue(r),u.head[r].areacode=r),"string"==typeof a?(u.body={},s[a]&&s[a].moduletype&&"table"===s[a].moduletype&&(u.body[a]={rows:[l]},u.body[a].areacode=c||a),{attrcode:o,changedrows:i,card:u,index:0}):a instanceof Array?(u.bodys={},a&&a instanceof Array&&a.length>0&&a.forEach((function(e){s[e]&&s[e].moduletype&&"table"===s[e].moduletype&&(u.bodys[e]=e==n?{rows:[l]}:{rows:[]},u.bodys[e].areacode=e==n&&c||e)})),{areacode:c||n,attrcode:o,changedrows:i,card:u,index:0}):void 0},t.handleSumChildCol=function(e,r){var a=e.split("->sumchildcol"),n=a[0],o=a[1].split("(")[1].split(")")[0],i=xi(n.split("."),2),l=i[0],c=i[1],u=xi(o.split("."),2),s=u[0],d=u[1],p=0;if("editTable"===r){var h=t.editTable.getColValue(s,d);if(h&&Array.isArray(h.value))h.value.forEach((function(e){p=Object(f.sum)(p,e)}))}else{var b=t.cardTable.getColValue(s,d);b&&Array.isArray(b)&&b.forEach((function(e){e&&e.value&&(p=Object(f.sum)(p,e.value))}))}t.form.setFormItemsValue(l,Bi({},c,{value:p}))},t.handleRelationItems=function(e){var r=e.type,a=void 0===r?"table":r,n=e.areaCode,o=e.key,i=e.value,l=e.callback,c=e.changedrows,u=e.index,s=e.rowid,d=e.formMetaCode,p=e.record,h=e.tableMetaCode,b=e.rows,g=e.column;if(t.billinfo){if(t.currentBill=JSON.parse(JSON.stringify(t.billinfo)),t.billinfo instanceof Array&&t.billinfo.length)for(var v=0;v<t.billinfo.length;v++){if("form"===a&&n===t.billinfo[v].headcode){t.currentBill=t.billinfo[v];break}if("table"===a){var m=t.billinfo[v].bodycode;if("string"==typeof m&&n===m){t.currentBill=t.billinfo[v];break}if(m instanceof Array&&m.includes(n)){t.currentBill=t.billinfo[v];break}}}var y,w,O,S,C=t.currentBill,T=C.billtype,A=C.pagecode,I=C.headcode,D=C.bodycode,x=C.tabletype,E=void 0===x?"":x,j=C.tabs;if(void 0!==j&&j)return void t.handleTabRelationItems(e);if("findByRelation"===D){var P=t.meta.getMeta();P&&P.gridrelation&&(D=Object.keys(P.gridrelation))}if(A||(A=t.getSearchParam("p")),"form"===T||"grid"===T)if("form"===a)y="/nccloud/platform/pub/formafteredit.do",w=t.createFormAfterEventData(A,n,n,o,i,d);else if("table"===a)if(y="/nccloud/platform/pub/gridafteredit.do",p){var R=JSON.parse(JSON.stringify(p||{}));w=t.createGridAfterEventRecord(A,n,n,o,c,R,h)}else w=t.createGridAfterEventData(A,n,n,o,c,u,E,b,h);if("card"===T||"extcard"===T)if("[object Object]"===Object.prototype.toString.call(D)?1==(S=Object.keys(D)).length&&(S=S[0]):S=D,"form"===a)y="/nccloud/platform/pub/cardheadafteredit.do","extcard"===T&&(y="/nccloud/platform/pub/extcardheadafteredit.do"),w=t.createHeadAfterEventRecord(A,I,S,n,o,i,d);else if("table"===a){if(g&&g.editformula&&"string"==typeof g.editformula){var k=g.editformula;if(k.length<1e3&&/\S+.\S+->sumchildcol(\S+.\S+)\S+/.test(k)){if(!k.includes(";"))return void t.handleSumChildCol(k,E);var B=k.split(";"),F=0;if(B.forEach((function(e){e.length<1e3&&/\S+.\S+->sumchildcol(\S+.\S+)\S+/.test(e)&&(F++,t.handleSumChildCol(e,E))})),F===B.length)return}}if(y="/nccloud/platform/pub/cardbodyafteredit.do","extcard"===T&&(y="/nccloud/platform/pub/extcardbodyafteredit.do"),p){var M=JSON.parse(JSON.stringify(p||{}));w=t.createBodyAfterEventRecord(A,I,S,n,o,c,M,h)}else w=t.createBodyAfterEventData(A,I,S,n,o,c,u,E,b,h)}O=function(e){var r,i={};("form"===T&&"form"===a&&e.data&&e.data&&e.data[n]&&t.form.setAllFormValue(Bi({},n,e.data[n]),!1,!1,o),"grid"===T&&"table"===a&&e.data&&e.data&&e.data[n]&&(E&&"cardTable"===E?(b?t.cardTable.updateAndAddRows({rows:e.data[n].rows,tableId:n}):t.cardTable.updateDataByRowId(n,e.data[n],!1,!1),i[n]="cardTable"):(t.editTable.updateDataByRowId(n,e.data[n],!1,!1),i[n]="editTable")),"card"===T||"extcard"===T)&&(e.data&&e.data.head&&e.data.head[I]&&t.form.setAllFormValue(Bi({},I,e.data.head[I]),!1,!1,o),"table"===a&&("[object Object]"===Object.prototype.toString.call(D)?1==(r=Object.keys(D)).length&&(r=r[0]):r=D,"string"==typeof r?e.data&&e.data.body&&e.data.body&&(E&&"editTable"===E&&e.data.body[r]?(i[r]="editTable",t.editTable.updateDataByRowId(r,e.data.body[r],!1,!1)):(i[r]="cardTable",h&&e.data.body[h]&&!e.data.body[r]&&(e.data.body[r]=e.data.body[h]),b?t.cardTable.updateAndAddRows({rows:e.data.body[r].rows,tableId:r}):t.cardTable.updateDataByRowId(r,e.data.body[r],!1,!1))):r instanceof Array&&r.forEach((function(r){e.data&&e.data.bodys&&(E&&"editTable"===E&&e.data.bodys[r]?(i[r]="editTable",t.editTable.updateDataByRowId(r,e.data.bodys[r],!1,!1)):(i[r]="cardTable",h&&e.data.bodys[h]&&!e.data.bodys[r]&&(e.data.bodys[r]=e.data.bodys[h]),b&&r===n?t.cardTable.updateAndAddRows({rows:e.data.bodys[r].rows,tableId:r}):t.cardTable.updateDataByRowId(r,e.data.bodys[r],!1,!1)))}))));e.formulamsg&&e.formulamsg instanceof Array&&e.formulamsg.length>0&&t.dealFormulamsg(e.formulamsg,i,null,null,u),Object(f.isFunction)(l)&&l(qi(t)),e&&"function"==typeof t.relationAfterEventCallBack&&t.relationAfterEventCallBack(t.output,o,n,w,e.data,u,s)},y&&w&&O&&Object(f.ajax)({url:y,method:"post",async:!1,data:w,success:O})}else Object(f.isFunction)(l)&&l(qi(t))},t.dealFormulamsg=function(e,r,a,n,o){if(!r){var i=t.billinfo.bodycode;"[object Object]"===Object.prototype.toString.call(i)&&(r=i)}if(e&&e instanceof Array&&e.length>0){var l=[],c=0,u=0;e.forEach((function(e){if("5"===e.type){var a=t.meta.getMeta();if(e.render&&a[e.render.areacode]){var n=a[e.render.areacode].items.findIndex((function(t){return t.attrcode===e.render.attrcode}));-1!==n&&e.render&&e.render.color&&(a[e.render.areacode].items[n].color=e.render.color,t.meta.setMeta(a))}}if("3"===e.type||"4"===e.type){var i=t.meta.getMeta();if(e.render&&i[e.render.areacode])if(-1!=i[e.render.areacode].items.findIndex((function(t){return t.attrcode===e.render.attrcode})))if("form"===i[e.render.areacode].moduletype){var u=e.render.areacode,s=i[u].relationcode?i[u].relationcode:u;t.form.setFormItemsDisabled(s,Bi({},e.render.attrcode,!e.render.editflag))}else"table"===i[e.render.areacode].moduletype&&r&&r[e.render.areacode]&&("editTable"===r[e.render.areacode]&&t.editTable.setEditableRowKeyByIndex(e.render.areacode,void 0===o?+e.render.rownum:o,e.render.attrcode,e.render.editflag),"cardTable"===r[e.render.areacode]&&t.cardTable.setEditableByIndex(e.render.areacode,void 0===o?+e.render.rownum:o,e.render.attrcode,e.render.editflag))}"1"===e.type&&e.message&&l.push({title:"提示",color:"info",content:e.message,noCancelBtn:!0,type:"1"}),"0"===e.type&&e.message&&(c++,l.push({title:"确认",color:"success",content:e.message,noCancelBtn:!1,type:"0"}))})),0===c&&"function"==typeof a&&n&&a(n),function e(t,r){r<t.length&&Object(Ci.promptBox)({title:t[r].title,color:t[r].color,content:t[r].content,noCancelBtn:t[r].noCancelBtn,beSureBtnClick:function(){"0"===t[r].type&&++u===c&&a&&n&&a(n),e(t,++r)},cancelBtnClick:function(){"0"===t[r].type&&u>0&&u--,e(t,++r)}})}(l,0)}},t.validateToSave=function(e,r,a,n){n||(n=t.billinfo.billtype);var o=t.meta.getMeta();o&&o.validateFlag?new Promise((function(t){Object(f.ajax)({url:"/nccloud/platform/formula/validate.do",data:{type:n,userJson:JSON.stringify(e)},success:function(e){e.success&&t(e.formulamsg)}})})).then((function(n){n&&n!=={}?t.dealFormulamsg.call(qi(t),n,a,r,e):r(e)})):r(e)},t.handleTabRelationItems=function(e){var r=e.type,a=void 0===r?"table":r,n=e.areaCode,o=e.key,i=e.value,l=e.callback,c=e.changedrows,u=e.index,s=e.rowid,d=e.formMetaCode,p=e.record;if(t.billinfo){var h,b,g,v,m=t.billinfo,y=m.billtype,w=m.pagecode,O=m.headcode,S=m.bodycode,C=m.tabletype,T=void 0===C?"":C;if("findByRelation"===S){var A=t.meta.getMeta();A&&A.gridrelation&&(S=Object.keys(A.gridrelation))}if(w||(w=t.getSearchParam("p")),"form"!==y&&"grid"!==y||("form"===a?(h="/nccloud/platform/pub/formafteredit.do",b=t.createFormAfterEventData(w,n,n,o,i)):"table"===a&&(h="/nccloud/platform/pub/gridafteredit.do",b=t.createGridAfterEventData(w,n,n,o,c,u,T))),"card"===y||"extcard"===y)if("[object Object]"===Object.prototype.toString.call(S)?1==(v=Object.keys(S)).length&&(v=v[0]):v=S,"form"===a){if(h="/nccloud/platform/pub/cardheadafteredit.do","extcard"===y&&(h="/nccloud/platform/pub/extcardheadafteredit.do"),b=t.createTabsAfterEventData(w,O,v,n,o,i,d,T),"card"===y)for(var I in b.card.body)b.card.body[I]=ki(ki({},b.card.body[I]),{},{rows:[]})}else"table"===a&&(h="/nccloud/platform/pub/cardbodyafteredit.do","extcard"===y&&(h="/nccloud/platform/pub/extcardbodyafteredit.do"),b=t.createTabsBodyAfterEventData(w,O,v,n,o,c,u,T),"card"===y&&p&&"editTable"!=T&&(b.card.body[v]=ki(ki({},b.card.body[v]),{},{rows:[p]}),b.index=0));g=function(e){var r={};if("form"===y&&"form"===a&&e.data&&e.data&&e.data[n]&&t.form.setAllFormValue(Bi({},n,e.data[n]),!1,!1,o),"grid"===y&&"table"===a&&e.data&&e.data&&e.data[n]&&T&&"cardTable"===T&&(t.cardTable.updateTabDataByIndexs(n,[{index:u,data:e.data[n].rows[u]}]),r[n]="cardTable"),("card"===y||"extcard"===y)&&(e.data&&e.data.head&&e.data.head[O]&&t.form.setAllFormValue(Bi({},O,e.data.head[O]),!1,!1,o),"table"===a))if("string"==typeof S)e.data&&e.data.body&&e.data.body[S]&&T&&"cardTable"===T&&(r[S]="cardTable",t.cardTable.updateTabDataByIndexs(S,[{index:u,data:e.data.body[S].rows[0]}]));else if(S instanceof Array)S.forEach((function(a){e.data&&e.data.bodys&&e.data.bodys[a]&&T&&"cardTable"===T&&(r[a]="cardTable",t.cardTable.updateTabDataByIndexs(a,[{index:u,data:e.data.bodys[a].rows[u]}]))}));else if("[object Object]"===Object.prototype.toString.call(S))if(Object.keys(S).length>1)Object.keys(S).forEach((function(a){e.data&&e.data.bodys&&e.data.bodys[a]&&T&&"cardTable"===T&&(r[a]="cardTable",t.cardTable.updateTabDataByIndexs(a,[{index:u,data:e.data.bodys[a].rows[u]}]))}));else if(1==Object.keys(S).length){var i=Object.keys(S)[0];e.data&&e.data.body&&e.data.body[i]&&T&&"cardTable"===T&&(r[i]="cardTable",t.cardTable.updateTabDataByIndexs(i,[{index:u,data:e.data.body[i].rows[0]}]))}e.formulamsg&&e.formulamsg instanceof Array&&e.formulamsg.length>0&&t.dealTabFormulamsg(e.formulamsg,r),l(),e&&"function"==typeof t.relationAfterEventCallBack&&t.relationAfterEventCallBack(t.output,o,n,b,e.data,u,s)},h&&b&&g&&Object(f.ajax)({url:h,method:"post",async:!1,data:b,success:g})}else l()},t.dealTabFormulamsg=function(e,r,a,n){if(!r){var o=t.billinfo.bodycode;"[object Object]"===Object.prototype.toString.call(o)&&(r=o)}if(e&&e instanceof Array&&e.length>0){var i=[],l=0,c=0;e.forEach((function(e){if("5"===e.type){var o=t.meta.getMeta();if(e.render&&o[e.render.areacode]){var c=o[e.render.areacode].items.findIndex((function(t){return t.attrcode===e.render.attrcode}));-1!==c&&e.render&&e.render.color&&(o[e.render.areacode].items[c].color=e.render.color,t.meta.setMeta(o))}}if("3"===e.type||"4"===e.type){var u=t.meta.getMeta();if(e.render&&u[e.render.areacode])-1!=u[e.render.areacode].items.findIndex((function(t){return t.attrcode===e.render.attrcode}))&&("form"===u[e.render.areacode].moduletype?t.form.setFormItemsDisabled(e.render.areacode,Bi({},e.render.attrcode,!e.render.editflag)):"table"===u[e.render.areacode].moduletype&&r&&r[e.render.areacode]&&("editTable"===r[e.render.areacode]&&t.editTable.setEditableRowKeyByIndex(e.render.areacode,+e.render.rownum,e.render.attrcode,e.render.editflag),"cardTable"===r[e.render.areacode]&&t.cardTable.setTabTdEditByIndex(e.render.areacode,+e.render.rownum,e.render.attrcode,e.render.editflag)))}"1"===e.type&&e.message&&(i.push({title:"提示",color:"info",content:e.message,noCancelBtn:!0,type:"1"}),a&&n&&a(n)),"2"===e.type&&e.message&&i.push({title:"错误",color:"danger",content:e.message,noCancelBtn:!0,type:"2"}),"0"===e.type&&e.message&&(l++,i.push({title:"确认",color:"success",content:e.message,noCancelBtn:!1,type:"0"}))})),0===l&&a&&"function"==typeof a&&n&&a(n),function e(t,r){r<t.length&&Object(Ci.promptBox)({title:t[r].title,color:t[r].color,content:t[r].content,noCancelBtn:t[r].noCancelBtn,beSureBtnClick:function(){"0"===t[r].type&&++c===l&&a&&n&&a(n),e(t,++r)},cancelBtnClick:function(){"0"===t[r].type&&c>0&&c--,e(t,++r)}})}(i,0)}},t.validateToTabSave=function(e,r,a,n){n||(n=t.billinfo.billtype);var o=t.meta.getMeta();o&&o.validateFlag?new Promise((function(t){Object(f.ajax)({url:"/nccloud/platform/formula/validate.do",data:{type:n,userJson:JSON.stringify(e)},success:function(e){e.success&&t(e.formulamsg)}})})).then((function(n){n&&n!=={}?t.dealTabFormulamsg.call(qi(t),n,a,r,e):r(e)})):r(e)},t.initMetaByPkorg=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pk_org",r=t.meta.getMeta();if(Object.keys(r).length){var a=function(a){if("formrelation"!==a&&"gridrelation"!==a&&r[a]&&r[a].items&&r[a].items instanceof Array){var n=t.isTableEditForm(a,r);if(t.copyMetaBeforePkorg[a]=t.copyMetaBeforePkorg[a]||{},r[a].items.map((function(o){var i=o.disabled;o.attrcode&&o.attrcode!==e&&("form"!=r[a].moduletype||n)&&(o.disabled=!0),t.copyMetaBeforePkorg[a][o.attrcode]=i})),"form"===r[a].moduletype&&!n&&t.formDataSource[a]){var o=t.formDataSource[a].getInnerHooks().getAllFormItem(),i=Object.keys(o).reduce((function(t,r){var a,n;r!==e?t[r]=!0:t[r]=!(null===(a=o[r])||void 0===a||null===(n=a.__origin__)||void 0===n||!n.disabled);return t}),{});t.formDataSource[a].setItemAttribute("disabled",i)}}};for(var n in r)a(n)}t.meta.setMeta(r)},t.isTableEditForm=function(e,t){var r=!1;if(t.gridrelation&&Object.keys(t.gridrelation).length)for(var a in t.gridrelation)if(t.gridrelation[a].destEditAreaCode&&Array.isArray(t.gridrelation[a].destEditAreaCode)&&t.gridrelation[a].destEditAreaCode.includes(e)){r=!0;break}return r},t.MutiInit=Li.call(qi(t),"MutiInit",Ci.mutiInit),t.MultiInit=Li.call(qi(t),"MultiInit",{getMultiLang:f.getMultiLang}),t.ViewModel=f.ViewModel,t.resMetaAfterPkorgEdit=function(){var e=t.meta.getMeta();if(e){var r=function(r){if("formrelation"!==r&&"gridrelation"!==r&&e[r]&&e[r].items&&e[r].items instanceof Array)if("form"!==e[r].moduletype||t.isTableEditForm(r,e))e[r].items=e[r].items.map((function(e){return t.copyMetaBeforePkorg[r]&&t.copyMetaBeforePkorg[r].hasOwnProperty(e.attrcode)&&(e.disabled=!!t.copyMetaBeforePkorg[r][e.attrcode]),e}));else if(t.formDataSource[r]){var a=t.formDataSource[r].getInnerHooks().getFormList().reduce((function(e,r){return Object.assign(e,t.copyMetaBeforePkorg[r]),e}),{});t.formDataSource[r].setItemAttribute("disabled",a)}};for(var a in e)r(a);t.meta.setMeta(e)}},t[w]={},t.output={use:t.use,cardPagination:t.cardPagination,editTable:t.editTable,form:t.form,table:t.table,search:t.search,button:t.button,meta:t.meta,insertTable:t.insertTable,transferTable:t.transferTable,asyncTree:t.asyncTree,syncTree:t.syncTree,modal:t.modal,ncmodal:t.modal,setPageStatus:t.setPageStatus,getPageStatus:t.getPageStatus,renderItem:t.renderItem,getPageDataByMeta:t.getPageDataByMeta,createTabsMasterChildData:t.createTabsMasterChildData,createMasterChildData:t.createMasterChildData,createMasterChildDataSimple:t.createMasterChildDataSimple,createExtCardDataSimple:t.createExtCardDataSimple,createUIDom:t.createUIDom,createFormAfterEventData:t.createFormAfterEventData,createGridAfterEventData:t.createGridAfterEventData,createHeadAfterEventData:t.createHeadAfterEventData,createTabsAfterEventData:t.createTabsAfterEventData,createBodyAfterEventData:t.createBodyAfterEventData,createTabsBodyAfterEventData:t.createTabsBodyAfterEventData,createExtCardData:t.createExtCardData,createTabsCardData:t.createTabsCardData,createCurrentRowAfterEventData:t.createCurrentRowAfterEventData,linkTo:t.linkTo,openTo:t.openTo,specialOpenTo:t.specialOpenTo,setHashChangeCallback:t.setHashChangeCallback,setRelationAfterEventCallBack:t.setRelationAfterEventCallBack,getUrlParam:t.getUrlParam,setUrlParam:t.setUrlParam,addUrlParam:t.addUrlParam,delUrlParam:t.delUrlParam,treeTableManyCol:t.treeTableManyCol,initMetaByPkorg:t.initMetaByPkorg,resMetaAfterPkorgEdit:t.resMetaAfterPkorgEdit,downLoad:t.downLoad,cardTable:t.cardTable,MutiInit:t.MutiInit,MultiInit:t.MultiInit,DragWidthCom:t.DragWidthCom,getSearchParam:t.getSearchParam,checkNode:t.checkNode,dealFormulamsg:t.dealFormulamsg,validateToSave:t.validateToSave,dealTabFormulamsg:t.dealTabFormulamsg,validateToTabSave:t.validateToTabSave,linkBack:t.linkBack,openOut:t.openOut,ViewModel:t.ViewModel,pushTo:t.pushTo,handleRelationItems:t.handleRelationItems,handleTabRelationItems:t.handleTabRelationItems,getAppCode:t.getAppCode,getPageCode:t.getPageCode,beforeUpdatePage:t.beforeUpdatePage,updatePage:t.updatePage,BillHeadInfo:t.BillHeadInfo,setRelationItemBillinfo:t.setRelationItemBillinfo,findFocusModuleId:f.findFocusModuleId.bind(qi(t)),controlAutoFocus:f.controlAutoFocus.bind(qi(t)),executeAutoFocus:f.executeAutoFocus,getFocusRowIndex:f.getFocusRowIndex,getAuthorityOfNotification:f.getAuthorityOfNotification,noticeToUser:f.noticeToUser,PubSub:f.PubSub,multiCardTable:t.multiCardTable,socket:t.socket},t}return Vi(h,[{key:"UNSAFE_componentWillMount",value:function(){var e=this,a=function(){t&&"function"==typeof t&&t(ki(ki({},e.props),e.output))};r?(this.MutiInit||(this.MutiInit=Li.call(this,"MutiInit",Ci.mutiInit)),this.MutiInit.init(r,a,n)):a()}},{key:"componentDidMount",value:function(){var e=this;if(this.startPerMonitor(),window===top||d||(this.disableHistory(),window.addEventListener("popstate",this.disableHistory)),Si.install((function(t){e[w]=Object.assign({},t),O(t,"UIExtend")(e.output),O(t,"currentPageDidMount")(e.output)}),{billinfo:this.billinfo}),document&&document.body){document.body.tabindex="0",document.body.setAttribute("tabindex",0);var t=document.querySelector("#app");t&&Object(f.isIE)()?(t.tabindex="0",t.setAttribute("tabindex",0),this.appAutoFocus&&t.focus(),setTimeout((function(){t.tabindex="-1",t.setAttribute("tabindex",-1)}),500)):this.appAutoFocus&&document.body.focus()}document&&document.addEventListener("keydown",this.keyDownHandle)}},{key:"componentWillUnmount",value:function(){S(this,"beforeUnMountEvent")(this.output),Si.unstall(),document&&document.removeEventListener("keydown",this.keyDownHandle),window!==top&&window.removeEventListener("popstate",this.disableHistory),window.top.sys_monitor&&window.top.removeEventListener("modifySPR",this.handleModifySPR,!1)}},{key:"render",value:function(){var t=!0;return window.top.sys_monitor&&!this.isIE()&&window.top.sys_monitor.getbMonitor&&f.isIE&&(t=window.top.sys_monitor.getbMonitor()),t?u.a.createElement(e,Di({},this.props,this.output,{endMonitor:this.endMonitor,ref:"monitorpage"})):u.a.createElement(e,Di({},this.props,this.output))}}]),h}(c.Component)}};function Ji(e){var t=e.component,r=e.displayName,a=e.unfinished,n=e.call(this),o={};if(!t){var i={};Object.keys(n).forEach((function(e){i[e]=function(){console.warn("".concat(r,"组件没有被加载，当前调用的api是").concat(e))}})),n=i}return Array.isArray(a)&&a.forEach((function(e){o[e]=function(){console.warn("".concat(r,"组件的").concat(e,"方法还没有完成"))}})),n._store=t&&t["use"+r]||function(){},Object.assign(o,n)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var a=r(3),n=r.n(a),o={};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function u(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=p(e);if(t){var n=p(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return f(this,r)}}function f(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v={};var m=function(e,t){return function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(p,r);var a,i,c,f=d(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=f.call(this,e)).state={loaded:!1,args:[]},t}return a=p,(i=[{key:"componentDidMount",value:function(){var r=this;Array.isArray(e)?Promise.all(e.map((function(e){var t,r;return v[e]?(t=v[e],r=e):/\.js$/.test(e)?(t=e,r=e.substr(0,e.length-3)):(t=e+".js",r=e),new Promise((function(e){!function(e,t){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){throw e};if(o[e]&&o[e].script){if(o[e].loaded)return void t();r=o[e].script}else(r=document.createElement("script")).type="text/javascript",r.src=e,document.body.appendChild(r),o[e]=r;r.addEventListener("load",(function(){t(),o[e].loaded=!0})),r.addEventListener("error",(function(){a(),o[e].loaded=!0}))}(t,(function(){var t=null;try{t=window[r].default}catch(e){}e(t)}),(function(){e(null)}))}))}))).then((function(e){r.setState({loaded:!0,App:t.apply(void 0,l(e))})})):this.setState({loaded:!0,App:t()})}},{key:"render",value:function(){var e=this.state,t=e.loaded,r=e.App;return t?n.a.createElement(r,this.props):null}}])&&u(a.prototype,i),c&&u(a,c),p}(a.Component)};m.setConfig=function(e){v=b(b({},v),e)}},function(e,t){e.exports=u},function(e,t){e.exports=s},function(e,t,r){"use strict";r.r(t),r.d(t,"base",(function(){return v})),r.d(t,"tableTotal",(function(){return O})),r.d(t,"DragWithCom",(function(){return g}));r(17);var a=r(12);r.d(t,"createPage",(function(){return a.a}));var n=r(1);r.d(t,"promptBox",(function(){return n.promptBox})),r.d(t,"print",(function(){return n.print})),r.d(t,"printer",(function(){return n.printer})),r.d(t,"ConnectSocket",(function(){return n.ConnectSocket})),r.d(t,"output",(function(){return n.output}));var o=r(4);r.d(t,"high",(function(){return n}));var i=r(0);for(var l in i)["default","createPage","base","high","promptBox","print","printer","ConnectSocket","output","tableTotal","DragWithCom","useJS"].indexOf(l)<0&&function(e){r.d(t,e,(function(){return i[e]}))}(l);var c=r(13);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],a=!0,n=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(e){n=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(n)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}r.d(t,"useJS",(function(){return c.a})),console.log("%c platform was built from ".concat("develop-nccnative\n"," at: ").concat("2021-3-20 10:30:09 ├F10: AM┤"," "),"background:#222;color:#bada55"),n.Refer=o.Refer,n.BillTrack=o.BillTrack,n.DagreChart=o.DagreChart,n.BillErrorTrack=o.BillErrorTrack;var h,b,g=n.DragWidthCom,v={},m={Breadcrumb:{NCBreadcrumbItem:"Item"},Checkbox:{CheckboxGroup:"CheckboxGroup"},Dnd:{GridLayout:"GridLayout"},Form:{NCFormItem:"FormItem"},Menu:{NCSubMenu:"SubMenu",NCMenuItemGroup:"ItemGroup",NCDivider:"Divider",Item:"Item"},Select:{NCOption:"Option"},Step:{NCSteps:"Steps"},Tabs:{NCTabPane:"TabPane"},Tree:{NCTreeNode:"TreeNode"},Upload:{Dragger:"Dragger"},ButtonGroup:{NCButton:"Button"},Modal:{Header:"Header",Title:"Title",Body:"Body",Footer:"Footer"},MultiLangText:{MultiOption:"MultiOption"},Radio:{NCRadioGroup:"RadioGroup",NCRadioButton:"RadioButton"}};h=o,b=v,Object.keys(h).forEach((function(e){b["NC"+e]=h[e],m[e]&&Object.keys(m[e]).forEach((function(t){b["NC"+e][t]=h[e][m[e][t]]}))})),v.NCScrollElement=o.Anchor.ScrollElement,v.NCScrollLink=o.Anchor.ScrollLink,v.NCFormControl=o.Input,v.EmptyAreaTip=o.EmptyAreaTip,v.NCNumber=o.NumberInput,v.NCDatePicker.NCRangePicker=o.RangePicker,v.NCDatePicker.NCYearPicker=o.YearPicker;var y={};Object.entries(v.NCHotKeys.USUAL_KEYS).forEach((function(e){var t=f(e,2),r=t[0],a=t[1];y["NC_"+r]=a})),v.NCHotKeys.USUAL_KEYS=s(s({},v.NCHotKeys.USUAL_KEYS||{}),y),r(18),r(19),r(20);var w=["default","red","green","black","blue","yellow"];Object(i.getTheme)().then((function(e){Object(i.setTheme)({themeType:e,themeTypes:w,baseName:"nc-lightapp-front"}),Object(i.addFontClass)()}));var O=o.Table},function(e,t){e.exports=d},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";var a=r(9),n=r(11),o=Object.prototype.hasOwnProperty,i={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},l=Array.isArray,c=Array.prototype.push,u=function(e,t){c.apply(e,l(t)?t:[t])},s=Date.prototype.toISOString,d=n.default,f={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:a.encode,encodeValuesOnly:!1,format:d,formatter:n.formatters[d],indices:!1,serializeDate:function(e){return s.call(e)},skipNulls:!1,strictNullHandling:!1},p=function e(t,r,n,o,i,c,s,d,p,h,b,g,v){var m,y=t;if("function"==typeof s?y=s(r,y):y instanceof Date?y=h(y):"comma"===n&&l(y)&&(y=a.maybeMap(y,(function(e){return e instanceof Date?h(e):e})).join(",")),null===y){if(o)return c&&!g?c(r,f.encoder,v,"key"):r;y=""}if("string"==typeof(m=y)||"number"==typeof m||"boolean"==typeof m||"symbol"==typeof m||"bigint"==typeof m||a.isBuffer(y))return c?[b(g?r:c(r,f.encoder,v,"key"))+"="+b(c(y,f.encoder,v,"value"))]:[b(r)+"="+b(String(y))];var w,O=[];if(void 0===y)return O;if(l(s))w=s;else{var S=Object.keys(y);w=d?S.sort(d):S}for(var C=0;C<w.length;++C){var T=w[C],A=y[T];if(!i||null!==A){var I=l(y)?"function"==typeof n?n(r,T):r:r+(p?"."+T:"["+T+"]");u(O,e(A,I,n,o,i,c,s,d,p,h,b,g,v))}}return O};e.exports=function(e,t){var r,a=e,c=function(e){if(!e)return f;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||f.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=n.default;if(void 0!==e.format){if(!o.call(n.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var a=n.formatters[r],i=f.filter;return("function"==typeof e.filter||l(e.filter))&&(i=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:f.addQueryPrefix,allowDots:void 0===e.allowDots?f.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:f.charsetSentinel,delimiter:void 0===e.delimiter?f.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:f.encode,encoder:"function"==typeof e.encoder?e.encoder:f.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:f.encodeValuesOnly,filter:i,formatter:a,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:f.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:f.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:f.strictNullHandling}}(t);"function"==typeof c.filter?a=(0,c.filter)("",a):l(c.filter)&&(r=c.filter);var s,d=[];if("object"!=typeof a||null===a)return"";s=t&&t.arrayFormat in i?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var h=i[s];r||(r=Object.keys(a)),c.sort&&r.sort(c.sort);for(var b=0;b<r.length;++b){var g=r[b];c.skipNulls&&null===a[g]||u(d,p(a[g],g,h,c.strictNullHandling,c.skipNulls,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.formatter,c.encodeValuesOnly,c.charset))}var v=d.join(c.delimiter),m=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),v.length>0?m+v:""}},function(e,t,r){"use strict";var a=r(9),n=Object.prototype.hasOwnProperty,o=Array.isArray,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:a.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},l=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},c=function(e,t){return e&&"string"==typeof e&&t.comma&&e.indexOf(",")>-1?e.split(","):e},u=function(e,t,r,a){if(e){var o=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/g,l=r.depth>0&&/(\[[^[\]]*])/.exec(o),u=l?o.slice(0,l.index):o,s=[];if(u){if(!r.plainObjects&&n.call(Object.prototype,u)&&!r.allowPrototypes)return;s.push(u)}for(var d=0;r.depth>0&&null!==(l=i.exec(o))&&d<r.depth;){if(d+=1,!r.plainObjects&&n.call(Object.prototype,l[1].slice(1,-1))&&!r.allowPrototypes)return;s.push(l[1])}return l&&s.push("["+o.slice(l.index)+"]"),function(e,t,r,a){for(var n=a?t:c(t,r),o=e.length-1;o>=0;--o){var i,l=e[o];if("[]"===l&&r.parseArrays)i=[].concat(n);else{i=r.plainObjects?Object.create(null):{};var u="["===l.charAt(0)&&"]"===l.charAt(l.length-1)?l.slice(1,-1):l,s=parseInt(u,10);r.parseArrays||""!==u?!isNaN(s)&&l!==u&&String(s)===u&&s>=0&&r.parseArrays&&s<=r.arrayLimit?(i=[])[s]=n:i[u]=n:i={0:n}}n=i}return n}(s,t,r,a)}};e.exports=function(e,t){var r=function(e){if(!e)return i;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?i.charset:e.charset;return{allowDots:void 0===e.allowDots?i.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:i.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:i.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:i.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:i.comma,decoder:"function"==typeof e.decoder?e.decoder:i.decoder,delimiter:"string"==typeof e.delimiter||a.isRegExp(e.delimiter)?e.delimiter:i.delimiter,depth:"number"==typeof e.depth||!1===e.depth?+e.depth:i.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:i.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:i.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:i.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:i.strictNullHandling}}(t);if(""===e||null==e)return r.plainObjects?Object.create(null):{};for(var s="string"==typeof e?function(e,t){var r,u={},s=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,d=t.parameterLimit===1/0?void 0:t.parameterLimit,f=s.split(t.delimiter,d),p=-1,h=t.charset;if(t.charsetSentinel)for(r=0;r<f.length;++r)0===f[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===f[r]?h="utf-8":"utf8=%26%2310003%3B"===f[r]&&(h="iso-8859-1"),p=r,r=f.length);for(r=0;r<f.length;++r)if(r!==p){var b,g,v=f[r],m=v.indexOf("]="),y=-1===m?v.indexOf("="):m+1;-1===y?(b=t.decoder(v,i.decoder,h,"key"),g=t.strictNullHandling?null:""):(b=t.decoder(v.slice(0,y),i.decoder,h,"key"),g=a.maybeMap(c(v.slice(y+1),t),(function(e){return t.decoder(e,i.decoder,h,"value")}))),g&&t.interpretNumericEntities&&"iso-8859-1"===h&&(g=l(g)),v.indexOf("[]=")>-1&&(g=o(g)?[g]:g),n.call(u,b)?u[b]=a.combine(u[b],g):u[b]=g}return u}(e,r):e,d=r.plainObjects?Object.create(null):{},f=Object.keys(s),p=0;p<f.length;++p){var h=f[p],b=u(h,s[h],r,"string"==typeof e);d=a.merge(d,b,r)}return a.compact(d)}}])}));
//# sourceMappingURL=nc-lightapp-front.js.map