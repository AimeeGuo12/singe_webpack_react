/*! @ncctag content */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("@platform/api/index"),require("@platform/base/index"),require("@platform/table-core/index"),require("@platform/template/index"),require("@platform/form/index")):"function"==typeof define&&define.amd?define(["react","@platform/api/index","@platform/base/index","@platform/table-core/index","@platform/template/index","@platform/form/index"],t):"object"==typeof exports?exports["@platform/edit-table/index"]=t(require("react"),require("@platform/api/index"),require("@platform/base/index"),require("@platform/table-core/index"),require("@platform/template/index"),require("@platform/form/index")):e["@platform/edit-table/index"]=t(e.React,e["@platform/api/index"],e["@platform/base/index"],e["@platform/table-core/index"],e["@platform/template/index"],e["@platform/form/index"])}(window,(function(e,t,o,r,n,a){return function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="../../../../platform/",o(o.s=1899)}({0:function(t,o){t.exports=e},1:function(e,o){e.exports=t},11:function(e,t){e.exports=n},1866:function(e,t,o){},1867:function(e,t,o){},1899:function(e,t,o){"use strict";o.r(t),o.d(t,"default",(function(){return Be}));var r=o(0),n=o.n(r),a=o(8),l=o(11);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function c(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?s(Object(o),!0).forEach((function(t){u(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):s(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function u(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function d(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,o){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,o){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(r){var n=Object.getOwnPropertyDescriptor(r,t);return n.get?n.get.call(o):n.value}})(e,t,o||e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=b(e);if(t){var n=b(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return h(this,o)}}function h(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=a.utils.uuidv4,m=a.utils.isWrong,w=a.utils.getPageSizeStorage,C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(a,e);var t,o,r,n=g(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=n.call(this,e)).getActiveCell=function(){return t.getStore(["activeCell"])},t.setActiveCell=function(e){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.setStore(["activeCell"],e,o)},t.getHooks=function(){return c(c({},t.getTableHooks()),{},{getPageInfo:t.getPageInfo.bind(v(t)),setPageInfo:t.setPageInfo.bind(v(t)),setTableData:t.setTableData.bind(v(t)),setTableStatus:t.setTableStatus.bind(v(t)),deleteTableRows:t.deleteTableRows.bind(v(t)),getActiveCell:t.getActiveCell.bind(v(t)),setActiveCell:t.setActiveCell.bind(v(t)),setTableProps:t.setTableProps.bind(v(t))})},t.uuid=y(),t.store=c(c({},t.store),{},{allpks:[],alltss:[],sideBoxConfig:{show:!1,record:{},operateType:"add"},pageInfo:{pageIndex:"1",total:"0",totalPage:"1"},activeCell:null}),t}return t=a,(o=[{key:"setMeta",value:function(e,t){var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];t=t||this.getStore("name");var r=this.getTableProps("status");e[t]&&e[t].status&&!this.isUpdateMetaStatus&&(r=e[t].status||r||"borwse",this.isUpdateMetaStatus=!0),this.setTableProps("status",r,!1),f(b(a.prototype),"setMeta",this).call(this,e,t,o)}},{key:"setTableProps",value:function(e,t){var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0;"status"!==e||this.isUpdateMetaStatus||(this.tableStatusIsUpdate=!0),f(b(a.prototype),"setTableProps",this).call(this,e,t,o,r)}},{key:"getPageInfo",value:function(){var e=w(this.getStore(["meta"]),this.getStore("name")),t=this.getStore(["pageInfo"]);return t.pageSize||(t.pageSize=e),t}},{key:"setPageInfo",value:function(e){var t=e.shouldForceUpdate,o=void 0===t||t,r=e.pageInfo,n=void 0===r?{}:r,a=this.get(["pageInfo"])||{};return a=c(c({},a),n),this.setStore(["pageInfo"],a,o)}},{key:"setTableData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.isCache,r=void 0===o||o,n=t.isTop,l=void 0!==n&&n,i=t.shouldForceUpdate,s=void 0===i||i,c=w(this.getStore(["meta"]),this.getStore("name")),u=this.getStore(["allpks"]),d=this.getStore(["alltss"]);return e.hasOwnProperty("pageInfo")&&!m(e.pageInfo)?"0"===e.pageInfo.pageIndex&&(e.pageInfo.pageIndex="1"):0===e.rows.length?e.pageInfo={pageSize:c,pageIndex:"1",total:"0",totalPage:"1"}:this&&Array.isArray(u)&&u.length>0?e.pageInfo=this.getPageInfo():e.pageInfo={pageSize:c,pageIndex:"1"},this.setPageInfo({shouldForceUpdate:!1,pageInfo:e.pageInfo}),e.hasOwnProperty("allpks")?this.setStore(["allpks"],e.allpks||u||[],!1):0===e.rows.length?this.setStore(["allpks"],[],!1):this.setStore(["allpks"],u||[],!1),e.hasOwnProperty("alltss")?this.setStore(["alltss"],e.alltss||d||[],!1):0===e.rows.length?this.setStore(["alltss"],[],!1):this.setStore(["alltss"],d||[],!1),e=f(b(a.prototype),"setTableData",this).call(this,e,{isCache:r,isTop:l,shouldForceUpdate:s})}},{key:"setTableStatus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.shouldForceUpdate,r=void 0===o||o;f(b(a.prototype),"setTableStatus",this).call(this,e,{shouldForceUpdate:r})}},{key:"deleteTableRows",value:function(e,t,o){var r=e.rowKeyValues,n=e.rowIndexs,l=f(b(a.prototype),"deleteTableRows",this).call(this,{rowKeyValues:r,rowIndexs:n},t,o),i=this.getPageInfo();i&&(i.total-=l.length),this.setPageInfo({shouldForceUpdate:!1,pageInfo:i});var s=this.getViewData(),c=this.getCheckInfo()||{};return s.length?(c.indeterminate=s.some((function(e){return!!e.selected})),c.checkedAll=s.every((function(e){return!!e.selected}))):(c.checkedAll=!1,c.indeterminate=!1),this.setCheckInfo({checkInfo:c,shouldForceUpdate:o}),l}}])&&d(t.prototype,o),r&&d(t,r),a}(a.EditTableStore),S=Object(l.hookFactory)(C),x=o(1),I=o(3),O=o(42),P=o.n(O);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=E(e);if(t){var n=E(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return _(this,o)}}function _(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}a.utils.isFunction,a.utils.isArray,a.utils.isObject,a.utils.isBoolean;var D=a.utils.uuidv4;o(1866);var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(l,e);var t,o,r,a=T(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=a.call(this,e)).uuid=D()||"editTableSideBox",t.state={index:t.props.index,buttonDisabled:[]},t.formStore=P.a.useForm(),t}return t=l,(o=[{key:"componentDidMount",value:function(){var e=this.props,t=e.columns,o=void 0===t?[]:t,r=e.operateType,n=e.record,a=e.renderItems,l=void 0===a?{}:a;o=o.filter((function(e){return e.render&&"customer"!==e.itemtype&&(e.renderStatus=e.renderStatus||"edit"),"customer"!==e.itemtype}));var i=function(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}({},this.uuid,{status:"edit"===r||"add"===r?"edit":"browse",items:o,moduletype:"form",code:"head",name:"侧拉表单",isunfold:!1});for(var s in this.formStore.setMeta(i,this.uuid),l)this.formStore.replaceItem(s,l[s]);var c=n.values||{};this.formStore.setStatus("edit"===r||"add"===r?"edit":"browse"),this.formStore.setAllFormValue(c),console.log(this.formStore,l,c)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.operateType,o=e.record.values||{};this.formStore.setStatus("edit"===t||"add"===t?"edit":"browse"),this.formStore.setAllFormValue(o),console.log(this.formStore,o)}},{key:"render",value:function(){var e=this.props,t=e.langJson,o=void 0===t?{}:t,r=e.onClose,a=e.status,l=void 0!==a&&a,i=e.fieldid,s=e.operateType,c=e.onCancel,u=e.onSure,d=e.onAdd,f=e.tableId,p=(e.record,e.onBeforeEvent),g=e.onAfterEvent,h=(e.model,e.origin,e.renderItems,e.pageScope,e.value,e.scale,e.tableScope,e.modelIndex,e.diabled,e.edittable_dom,function(e){var t={mask:"edit-table-modal-mask ",dialog:"edit-table-modal-dialog "};switch(e){case"origin":return t;case"open":t.mask+=" fadeIn",t.dialog+=" slideInRight";break;case"close":t.mask+=" fadeOut",t.dialog+=" slideOutRight"}return t}(l)),v=h.mask,b=h.dialog;return n.a.createElement("section",{className:"edit-table-modal disabled-bg-btn",fieldid:Object(x.getSysFieldid)("".concat(i||f,"_modal-area"))},n.a.createElement("div",{className:v,onClick:function(e){r&&r(e)}}),n.a.createElement("div",{className:b},n.a.createElement("div",{className:"edit-table-modal-header cf disabled-bg-btn"},n.a.createElement("div",{className:"fl u-modal-title",fieldid:Object(x.getSysFieldid)("".concat("add"===s?o.table_add:o.table_change,"_title"))}," ","add"===s?o.table_add:o.table_change),n.a.createElement("span",{className:"icon iconfont icon-you icon-celashouqi fr",onClick:function(e){r&&r(e)}})),n.a.createElement("div",{className:"edit-table-modal-body",fieldid:Object(x.getSysFieldid)("".concat(i||f,"_form-area")),id:"tableModal"},n.a.createElement("div",{fieldid:Object(x.getSysFieldid)("".concat(f,"_form-area"))},n.a.createElement(P.a,{name:this.uuid,config:{onAfterEvent:g,onBeforeEvent:p},store:this.formStore}))),n.a.createElement("div",{className:"edit-table-modal-footer cf",fieldid:Object(x.getSysFieldid)("bottom-area")},n.a.createElement(I.Button,{className:" fr",onClick:function(e){c&&c(e)}},o.table_cancel),n.a.createElement(I.Button,{className:"u-button-primary fr",onClick:function(e){u&&u(e)}},o.table_ok),"add"===s&&n.a.createElement(I.Button,{className:"u-button-primary fr",onClick:function(e){d&&d(e)}},o.table_save_add))))}}])&&R(t.prototype,o),r&&R(t,r),l}(r.Component);function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(){return(K=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}function B(e,t,o,r,n,a,l){try{var i=e[a](l),s=i.value}catch(e){return void o(e)}i.done?t(s):Promise.resolve(s).then(r,n)}function M(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function F(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?M(Object(o),!0).forEach((function(t){L(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):M(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function L(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function N(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=z(e);if(t){var n=z(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return q(this,o)}}function q(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var H=a.utils.isFunction,W=a.CONFIG.ROW_STATUS;function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e}).apply(this,arguments)}function $(e,t){var o;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(o=ee(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,i=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return l=e.done,e},e:function(e){i=!0,a=e},f:function(){try{l||null==o.return||o.return()}finally{if(i)throw a}}}}function Q(e,t,o,r,n,a,l){try{var i=e[a](l),s=i.value}catch(e){return void o(e)}i.done?t(s):Promise.resolve(s).then(r,n)}function X(e,t){if(null==e)return{};var o,r,n=function(e,t){if(null==e)return{};var o,r,n={},a=Object.keys(e);for(r=0;r<a.length;r++)o=a[r],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)o=a[r],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e){return function(e){if(Array.isArray(e))return te(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ee(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){if(e){if("string"==typeof e)return te(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?te(e,t):void 0}}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}function oe(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function re(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(o),!0).forEach((function(t){ne(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):oe(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function ne(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function ae(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,r=ce(e);if(t){var n=ce(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return se(this,o)}}function se(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ue=a.lib.formatColumn,de=a.lib.hotkey,fe=a.lib.pagination,pe=a.lib.selectRow,ge=a.lib.indexCol,he=a.lib.checkCol,ve=a.lib.errorCol,be=a.lib.filter,ye=a.lib.selectable,me=a.lib.excel,we=a.lib.total,Ce=a.lib.columnSort,Se=a.lib.contextMenu,xe=a.utils.uuidv4,Ie=a.utils.excelPackageData,Oe=a.utils.isString,Pe=a.utils.isFunction,ke=a.utils.isArray,Re=a.utils.isObject,je=a.utils.isEmptyValue,Te=a.utils.polymerizeComponents,_e=a.utils.isUndefined,Ee=a.utils.warningOnce,De=a.utils.getMetaIsTotal,Ae=a.utils.setPageSizeStorage,Ve=a.CONFIG.ROW_STATUS,Ke=Te(I.Table,[Ce,ue,function(e){return e||console.error("缺少Table组件"),function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(s,t);var o,a,l,i=J(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=i.call(this,e)).onAfterEvent=function(e){var o=e.attrcode,r=e.curMetaItem,n=e.value,a=e.oldValue,l=e.allValue,i=e.componentValue,s=t.props,c=s.high_sidebox,u=s.onAfterEvent,d=s.tableId,f=s.rowKey,p=c.store,g=p.getStore("sideBoxConfig")||{},h=g,v=h.index,b=h.record,y=void 0===b?{}:b;y.values=l,g=F({},g),p.setStore("sideBoxConfig",g,!1),"residtxt"!==r.itemtype?p.setCache("oldBatchData",{batchChangeIndex:g.index,batchChangeKey:r.attrcode,batchChangeValue:n.value,batchChangeDisplay:n.display}):p.setCache("oldBatchData",{batchChangeIndex:g.index,batchChangeKey:r.attrcode,batchChangeValue:n.value,batchChangeDisplay:null});var m=y[f];p.getRowProps({rowKeyValue:m},"status")==W.origin&&p.setRowProps({rowKeyValue:m},{status:W.edit},!1),p.setRows({rows:[y]}),H(u)&&u({tableId:d,record:y,rowKey:f,rowKeyValue:m,rowIndex:v,attrcode:o,value:n,oldValue:a,componentValue:i,column:r,isTriggerModal:!0},p)},t.onBeforeEvent=function(){var e,o=(e=regeneratorRuntime.mark((function e(o,r,n,a,l,i){var s,c,u,d,f,p,g,h,v,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=t.props,c=s.high_sidebox,u=s.tableId,d=s.onBeforeEvent,f=s.rowKey,p=c.store,g=p.getStore("sideBoxConfig")||{},h=g.index,v=g.record,b=void 0===v?{}:v,!H(d)){e.next=11;break}return e.next=7,d({tableId:u,record:b,rowKey:f,rowKeyValue:b[f],rowIndex:h,attrcode:r,value:n,event:i,column:l,isTriggerModal:!0});case 7:return e.t0=e.sent,e.abrupt("return",!1!==e.t0);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)})),function(){var t=this,o=arguments;return new Promise((function(r,n){var a=e.apply(t,o);function l(e){B(a,r,n,l,i,"next",e)}function i(e){B(a,r,n,l,i,"throw",e)}l(void 0)}))});return function(e,t,r,n,a,l){return o.apply(this,arguments)}}(),t}return o=s,(a=[{key:"render",value:function(){var t=this.props,o=t.high_sidebox,a=t.selectedChange,l=t.rowKey,i=t.renderItems,s=o.langJson,c=o.sideBoxConfig,u=void 0===c?{}:c,d=o.tableId,f=o.arrColumns,p=o.fieldid,g=o.onCloseModel,h=o.tableModelConfirm,v=o.store,b=u.index,y=u.operateType,m=u.record,w=u.show,C=void 0!==w&&w;return n.a.createElement(r.Fragment,null,C&&n.a.createElement(A,K({langJson:s,rowKey:l,fieldid:p,columns:f,renderItems:i,tableId:d,onBeforeEvent:this.onBeforeEvent,onAfterEvent:this.onAfterEvent,onClose:function(e){var t=v.getStore("sideBoxConfig")||{};t=F(F({},t),{},{show:!1}),v.setStore("sideBoxConfig",t)},onCancel:function(e){if("add"===y){var t=v.getSelectedRows().length;v.deleteTableRows({rowIndexs:b});var o=v.getSelectedRows().length;H(a)&&a(d,o,t)}else if("edit"===y){var r=(v.getCache(["beforeEdit"])||{rows:[]}).rows[b]||{};v.updateTableDataByIndexs([{index:b,data:r}])}var n=v.getStore("sideBoxConfig")||{};n=F(F({},n),{},{show:!1,status:"close"}),v.setStore("sideBoxConfig",n),document.getElementsByTagName("html")[0].style.overflow="",H(g)&&g(m)},onSure:function(e){var t=v.getStore("sideBoxConfig")||{};t=F(F({},t),{},{show:!1,status:"close"}),v.setStore("sideBoxConfig",t),document.getElementsByTagName("html")[0].style.overflow="",H(h)?h(m):console.warn("请传入关闭窗口函数")},onAdd:function(e){v.removeEmptyRows({keys:[]});var t=v.getStore("sideBoxConfig")||{};(t=F(F({},t),{},{show:!0})).operateType="add",t.status="open";var o=v.getVisibleRows(!1,!1).length,r=v.addTableRow(o,{},!1);t.record=r,v.setStore("sideBoxConfig",t)}},u)),n.a.createElement(e,this.props))}}])&&N(o.prototype,a),l&&N(o,l),s}(r.Component)},we,fe,pe,ve,he,ge,be,ye,me,de,Se],{name:"editTable",type:"hoc",user:"platform"});o(1867);var Be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(i,e);var t,o,r,l=ie(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=l.call(this,e)).pageInfoChange=function(e){var o=t.props,r=o.onPageInfoChange,n=o.store,a=(o.pkname,o.crossPageSelect,o.tableId),l=n.getPageInfo();l=re(re({},l),e||{});var i=n.getStore(["allpks"]);Ae(n.getStore(["meta"]),a,l.pageSize),n.setPageInfo({pageInfo:l});var s=t.splitPks(i,l.pageIndex,l.pageSize);console.log(s,e),Pe(r)&&r(s,l.total)},t.splitPks=function(e,t,o){if(e.length<=o)return e;for(var r=[],n=Number(t),a=Number(o),l=(n-1)*a,i=l;i<l+a&&e[i];i++)r.push(e[i]);return r},t.onAllCheckChange=function(e){var o=t.props,r=o.store,n=o.selectedChange,a=o.onSelectedAll,l=o.tableId,i=o.crossPageSelect,s=o.pkname,c=r.setRowsSelected,u=r.getSelectedRows,d=r.getCheckInfo,f=r.getData,p=r.setCrossPage,g=(d()||{}).checkedAll,h=u().length;(c({},g=!g,!0),i&&s)&&p(f(),s,e);var v=u().length;Pe(a)&&a(l,g,f().length),Pe(n)&&n(l,v,h)},t.onCheckChange=function(e,o){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=t.props,a=n.selectedChange,l=n.onSelected,i=n.tableId,s=n.store,c=n.crossPageSelect,u=n.pkname,d=s.getTableProps,f=s.setRowsSelected,p=s.getRowProps,g=s.getSelectedRows,h=s.setTableProps,v=s.getTrueRowIndex,b=s.setCrossPage,y=s.getStore,m=y(),w=m.checkInfo,C=w.crossPageSelectIndex,S=d("rowKey"),x=e[S],I=!p({rowKeyValue:x},"selected"),O=g().length;c&&u&&(r&&C.clear(),b(e,u,I)),r&&f({},!1,!1),!I&&r&&O>1&&(I=!0),f({rowKeyValues:x},I),h("currentIndex",I?v({rowIndex:o}):-1,!1);var P=g().length;Pe(l)&&l(i,e,I,o,r),Pe(a)&&a(i,P,O)},t.changeCrossSelect=function(e){var o=t.props,r=o.store,n=o.pkname,a=o.selectedChange,l=o.tableId,i=r.getStore,s=r.setStore,c=r.getData,u=r._setSelect,d=r.setCrossPage,f=i(),p=f.checkInfo,g=f.allpks,h=p.crossPageSelectIndex;if(n){var v=h.size,b=c();switch(e){case"current":u(void 0,"all"),h.clear(),d(b,n,!0);break;case"all":u(void 0,"allpage"),h=new Set(g);break;case"reverse":u(void 0,"reverse"),g.forEach((function(e){h.has(e)?h.delete(e):h.add(e)}))}s(["checkInfo","crossPageSelectIndex"],h);var y=h.size;Pe(a)&&a(l,y,v)}else Ee(!1,"请配置pkname")},t.sortChange=function(e,o){var r={},n=t.props,l=n.store,i=n.tableId,s=l.setStore,c=l.getViewMeta;s(["sortParam"],{mode:"single",sortParam:e},!1),e.forEach((function(e){r[e.field]=e})),Object(a.handleSortcolumns)({columns:c(i),sortObj:r});var u=l.getViewData("invisible")||[];l.setData({data:[].concat(Z(o),Z(u))})},t.getColSettiongParam=function(){var e=t.props,o=e.store,r=e.tableId,n=o.getMeta();if(n&&n[r]){var a=n[r],l=o.getConfig();return{appcode:a.appcode||x.pageTo.getAppCode(),pagecode:a.pagecode||x.pageTo.getPageCode(),code:a.templateCode||n.code,pageid:a.pageid||n.pageid,areaCode:r,areaId:a.oid,noColSetClass:l.noColSetClass,colSetCallback:l.colSetCallback,hiddenLeftItem:l.hiddenLeftItem}}return{}},t.updateColumnAfterSetting=function(e,o){var r=t.props.store,n=r.setMeta,a=(0,r.getMeta)();if(e.length&&o){var l=Z(a[o].items),i=[],s=[];e.map((function(e){a[o].items.map((function(t,o){e.attrcode===t.attrcode&&(t.width=e.width,t.islock=e.islock,t.visible=e.visible,i.push(o),s.push(t))}))})),i.sort((function(e,t){return e-t})),i.map((function(e,t){l[e]=s[t]})),a[o].items=l,n(a,o),t.setState({key:t.state.key+1})}},t.contextMenuClick=function(e,o,r,n,a){var l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=t.props,s=i.store,c=i.rightMenuClick,u=i.onBatchChange,d=i.langJson,f=i.tableId,p=s.getData,g=s.getRowOldValue,h=s.insertRowsAfterIndex,v=s.deleteTableRows,b=["delete","insert_up","insert_down"],y=["copy","copy-row","copy-column"];switch(!0){case b.includes(e):if(Pe(c)){if("insert_up"===e){var m=Array(n).fill({values:{}});h(m,a-1)}if("insert_down"===e){var w=Array(n).fill({values:{}});h(w,a)}"delete"===e&&v({rowIndexs:a}),c(e,n,a)}break;case y.includes(e):var C=s.getCache("activeSpecialCells");console.log("表头选中信息：",C);var S=s.getArrayMeta(f),x=s.getViewMeta(f),I=s.getCache("activedCells");if(l&&!I&&!C)return;var O=[];"copy"===e||"copy-row"===e?O=s.getRows({rowKeyValues:Object.keys(I)}):"copy-column"===e&&(O=s.getData([Ve.delete,Ve.filter])),Pe(o)&&o(C,x,I,O,S);break;case"paste"===e:if(Pe(u)){r=re(re({},r),{},{langJson:d,rows:p(),getRowOldValue:g,tableId:f});var P=Ie(r);u(P)}break;case"insert_paste"===e:if(Pe(u)){var k=Array(n).fill({values:{}});h(k,a),r=re(re({},r),{},{langJson:t.props.langJson,rows:p(),getRowOldValue:g,tableId:f});var R=Ie(r);u(R)}}};var o=e.store,r=e.tableId,n=e.rowKey,s=void 0===n?"rowid":n,c=e.status;return t.state={isEllipsis:!0,key:1},o.setTableProps("rowKey",s,!1),o.setTableProps("status",c||o.getTableProps("status")||"browse",!1),o.setStore("name",r,!1),t.uuid=xe(),"object"===("undefined"==typeof window?"undefined":Y(window))&&(window[t.uuid]=o),t}return t=i,(o=[{key:"UNSAFE_componentWillMount",value:function(){var e=this,t=this.props,o=t.store,r=t.afterLangload,n=o.setCache;Object(x.getMultiLang)({moduleId:"page_table",callback:function(t){n("langJson",t||{}),r&&r(t,o),e.forceUpdate()}})}},{key:"componentDidUpdate",value:function(e,t){var o=this.props.editTableComponentUpdate;o&&o(this.props)}},{key:"onBatchSelected",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.props,o=t.onBatchSelected,r=t.store,n=t.crossPageSelect,a=t.pkname,l=r.getTableProps,i=r.setRowsSelected,s=r.getRowProps,c=(r.getSelectedRows,r.setTableProps,r.getTrueRowIndex,r.setCrossPage),u=l("rowKey");i({},!1,!1),e.forEach((function(e){var t=e[u],o=!s({rowKeyValue:t},"selected"),r=e.values||e;r&&r.saga_status&&"1"===r.saga_status.value||(n&&a&&c(e,a,o),i({rowKeyValues:t},o,!1))})),this.forceUpdate&&this.forceUpdate(),o&&o(e)}},{key:"render",value:function(){var e,t=this,o=this.props,r=o.rowKey,a=o.store,l=o.status,i=o.editType,s=(o.langJson,o.autoAddRow),c=void 0===s?{}:s,u=o.tableId,d=(o.bodyDisplayInRow,o.lazyload),f=void 0===d||d,p=o.columns,g=o.rowClassName,h=o.hideBrowseCheckbox,v=o.showCheck,b=o.showIndex,y=o.crossPageSelect,m=o.high_filter,w=void 0===m?{}:m,C=o.handleFilterCallBack,S=o.handleResetCallBack,I=o.high_selectable,O=void 0===I?{}:I,P=o.onBatchSelected,k=o.showPagination,R=o.onRowClick,j=o.onBeforeEvent,T=o.onAfterEvent,_=o.onChange,E=o.onRowDoubleClick,D=o.onCloseModel,A=o.fieldid,V=o.tableModelConfirm,K=o.onCellHyperlinkTo,B=o.showTotal,M=o.noTotalRows,F=o.noTotalCol,L=o.allowTotalRows,N=o.onBatchChange,U=(o.noColSetClass,o.colSetCallback,o.cancelCustomRightMenu),J=void 0!==U&&U,q=o.addBlankCol,z=o.showWidthAndHeightConfig,H=void 0===z||z,W=o.multipleRowCell,Y=o.otherAreaHeight,Z=void 0===Y?0:Y,ee=o.rightMenuClick,te=o.focusIndex,oe=o.foldCacheId,ae=o.hideRightMenu,le=void 0!==ae&&ae,ie=o.isSort,se=void 0===ie||ie,ce=X(o,["rowKey","store","status","editType","langJson","autoAddRow","tableId","bodyDisplayInRow","lazyload","columns","rowClassName","hideBrowseCheckbox","showCheck","showIndex","crossPageSelect","high_filter","handleFilterCallBack","handleResetCallBack","high_selectable","onBatchSelected","showPagination","onRowClick","onBeforeEvent","onAfterEvent","onChange","onRowDoubleClick","onCloseModel","fieldid","tableModelConfirm","onCellHyperlinkTo","showTotal","noTotalRows","noTotalCol","allowTotalRows","onBatchChange","noColSetClass","colSetCallback","cancelCustomRightMenu","addBlankCol","showWidthAndHeightConfig","multipleRowCell","otherAreaHeight","rightMenuClick","focusIndex","foldCacheId","hideRightMenu","isSort"]),ue=(a.getMeta,a.getViewMeta),de=a.getCache,fe=a.getStore,pe=a.getData,ge=a.getTableProps,he=a.getViewData,ve=a.setTableProps,be=a.getTrueRowIndex,ye=(a.getRowKeyValue,a.setSelectedIndex),me=a.hasSelected,we=a.getCellProps,Ce=a.setCellProps,Se=a.setCellValue,xe=a.getCellValue,Te=a.getPageInfo,Ee=a.getCheckInfo,Ae=a.getActiveCell,Be=a.setActiveCell;if(le&&(J=!0,O.enable=!1,H=!1),l=ge("status"),e=de("langJson"),r=ge("rowKey"),!(p=ue(u)||p)||!p.length)return null;var Me=a.getArrayMeta(u),Fe=pe([Ve.delete,Ve.filter]),Le=he("filter"),Ne=de("customColData"),Ue=fe(["meta",u,"name"]),Je=a.getConfig().sort,qe=B||De(Me),ze=this.getColSettiongParam(),He=fe("sideBoxConfig")||{};te=te||ge("focusIndex"),_e(O.enable)&&(O.enable=!0);var We=!!_e(O.selectCell)||O.selectCell;return n.a.createElement("div",{className:"meta-table-wrapper edittable lightapp-component-editTable","data-uuid":this.uuid},n.a.createElement(Ke,G({lazyload:f,focusIndex:te,rowKey:r,status:l,editType:i,columns:p,fieldid:A,bodyDisplayInRow:_e(W)?this.state.isEllipsis:!W,data:Fe,store:a,isTotal:qe,getCellValue:xe,showPagination:"edit"!==l&&k,otherAreaHeight:k&&"edit"!==l?42+Z:Z,cardType:"edit",onCellHyperlinkTo:function(e,t,o){K&&K(e,t,o,u)},isSort:se,backSort:Je,sortChange:function(e,o){return t.sortChange(e,o)},setCellValue:function(e){var t=e.rowKey,o=e.rowKeyValue,r=e.rowIndex,n=e.attrcode,l=e.column,i=e.value,s=void 0===i?{}:i;e.triggerType,"timepicker"===l.itemtype&&s.value&&s.value.format&&(s.value=s.value.format("hh:mm:ss")),Se({rowKey:t,rowKeyValue:o,rowIndex:r,attrcode:n,value:s}),Pe(_)&&!1!==_(e)&&("residtxt"!==l.itemtype?(l.isMultiSelectedEnabled,a.setCache("oldBatchData",{batchChangeIndex:r,batchChangeKey:l.attrcode,batchChangeValue:s.value,batchChangeDisplay:s.display})):a.setCache("oldBatchData",{batchChangeIndex:r,batchChangeKey:l.attrcode,batchChangeValue:s.value,batchChangeDisplay:null}),a.getRowProps({rowKeyValue:o},"status")==Ve.origin&&a.setRowProps({rowKeyValue:o},{status:Ve.edit}))},getCellProps:function(e){var t=e.rowKey,o=e.rowKeyValue,r=e.rowIndex,n=e.attrcode;return we({rowKey:t,rowKeyValue:o,rowIndex:r,attrcode:n})},name:u,tableId:u,onBeforeEvent:function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var o,r,n,l,i,s,c,u,d,f,p,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.record,t.rowKey,t.rowKeyValue,r=t.rowIndex,n=t.attrcode,l=t.column,i=t.value,s=void 0===i?{}:i,c=t.event,u=t.triggerType,ve("currentIndex",be({rowIndex:r}),!1),ve("currentInfo",{record:o,index:r},!1),"onFocus"===u&&l.maxlength&&(c.target.isFlag=!1,c.target.addEventListener("compositionstart",(function(e){e.target.isFlag=!0}),!1),c.target.addEventListener("compositionend",(function(e){e.target.isFlag=!1,e.target.isFlag,e.target.defaultValue}),!1)),"residtxt"!==l.itemtype?a.setCache("oldBatchData",{batchChangeIndex:r,batchChangeKey:l.attrcode,batchChangeValue:s.value,batchChangeDisplay:s.display}):(f=Object(x.getLangCode)(),p=(null===(d=l.languageMeta.find((function(e){return e.languageCode===f})))||void 0===d?void 0:d.index)||"",g=s[n+p]||s[n]||s,a.setCache("oldBatchData",{batchChangeIndex:r,batchChangeKey:l.attrcode,batchChangeValue:g.value,batchChangeDisplay:null})),!Pe(j)){e.next=10;break}return e.next=8,j(t);case 8:return e.t0=e.sent,e.abrupt("return",!1!==e.t0);case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e)})),function(){var t=this,o=arguments;return new Promise((function(r,n){var a=e.apply(t,o);function l(e){Q(a,r,n,l,i,"next",e)}function i(e){Q(a,r,n,l,i,"throw",e)}l(void 0)}))});return function(e){return t.apply(this,arguments)}}(),onAfterEvent:function(e){var t=e.record,o=e.rowKey,r=e.rowKeyValue,n=e.rowIndex,l=e.attrcode,i=e.column,s=e.value,u=void 0===s?{}:s,d=e.oldValue,f=void 0===d?{}:d,p=e.componentValue,g=(e.event,e.triggerType),h=void 0===g?"onChange":g,v=e.isTriggerModal,b=void 0!==v&&v;if("residtxt"===i.itemtype&&Re(p))for(var y in p)p[y].current;if(f.value=f.value||a.getRowOldValue(t[o],l),"onBlur"===h){var m;if(!(Oe(u.value)&&(u.value=u.value.trim()),"number"===i.itemtype&&"-"===u.value&&(u.value=0,a.setCellValue({rowKeyValue:r,attrcode:l,value:u})),"select"===i.itemtype&&b&&a.setCellProps(r,l,{open:!1}),"residtxt"!==i.itemtype||null!==(m=t.values[l])&&void 0!==m&&m.value)){var w,C=Object(x.getLangCode)(),S=p[l+((null===(w=i.languageMeta.find((function(e){return e.languageCode===C})))||void 0===w?void 0:w.index)||"")]||p[l];Se({rowKey:o,rowKeyValue:r,rowIndex:n,attrcode:l,value:S})}i.itemtype}a.setCellProps(r,l,{isEdit:!1});var I=Pe(T)&&!1!==T(e);if("residtxt"===i.itemtype&&Re(p))for(var O in p)a.saveRowOldValue(t[o],O,p[O].value);else a.saveRowOldValue(t[o],l,u.value);if(!I)return console.log("not next to run"),!1;var P=a.getVisibleRows(!1,!0).length,k="switch_browse"===i.itemtype&&i.disabled,R="residtxt"===i.itemtype||u.value;R="refer"===i.itemtype?p:u;var j=je(R,i.itemtype),_=ge("status");P!=n+1||!c.enabled||k||j||"edit"!==_||a.addTableRow(void 0,c.defaultValue,!0,{callback:c.callback,isAutoAddRow:!0})},onCellStatusChange:function(e){var t=e.isEdit,o=e.column;if(t)Be(e);else{var r=Ae();if(r){var n=r.oldColumn,a=void 0===n?{}:n;o.attrcode===a.attrcode&&Be(null)}}},onCellMouseDown:function(e,t,o,r){"edit"===l&&["switch","checkbox_switch"].includes(o)&&Be({column:r,rowIndex:t,attrcode:o})},rowClassName:function(e,t){var o=[];return ke(g)&&(o=g.filter((function(e){return ke(e.index)||(e.index=[e.index]),e.index.includes(t)})),g=o.reduce((function(e,t){return e+" "+t.className}),"")),Pe(g)?g(e,t):g},hasSelected:function(e){e.rowKey;var t=e.rowKeyValue;return e.rowIndex,me(t)},setSelectedIndex:function(e,o){var r=e.record,n=e.rowKey,a=e.rowIndex;if(!(O&&O.enable&&o&&(o.ctrlKey||o.shiftKey||o.metaKey))){var i=r[n],s=r.values||r;if(!s||!s.saga_status||"1"!==s.saga_status.value)if("edit"!==l&&v&&!r.disabled)t.onCheckChange(r,a,!0);else{var c=me(i);!c&&ye([],"clear",!1),!c&&ye([{rowKey:n,rowKeyValue:i,rowIndex:a,pattern:"add"}])}}},pageInfo:Te(),pageInfoChange:this.pageInfoChange,onRowClick:function(e,t,o){if(!(O&&O.enable&&o&&(o.ctrlKey||o.shiftKey||o.metaKey))){var r=e.values||e;r&&r.saga_status&&"1"===r.saga_status.value||(ve("currentIndex",be({rowIndex:t}),!1),ve("currentInfo",{record:e,index:t},!1)),Pe(R)&&R(e,t,o)}},onRowDoubleClick:function(e,t,o){var r=e.values||e;r&&r.saga_status&&"1"===r.saga_status.value||(ve("currentIndex",be({rowIndex:t}),!1),ve("currentInfo",{record:e,index:t},!1)),Pe(E)&&E(e,t,o)},checkColConfig:{showCheck:_e(h)?v:"browse"===l?!h:v,crossPageSelect:y,changeCrossSelect:this.changeCrossSelect,langJson:e},totalConfig:{showTotal:B,noTotalRows:M,noTotalCol:F,allowTotalRows:L,numberPd:7},indexColConfig:{showIndex:b||!1,langJson:e},onAllCheckChange:function(e){return t.onAllCheckChange(e)},onCheckChange:function(e,o){return t.onCheckChange(e,o)},checkInfo:Ee(),langJson:e,high_filter:re({alloweFilter:!0,langJson:e,panelTitle:Ue||"",filterData:Le,customColData:Ne,rowKey:r,isReset:a.getStore("filterReset"),arrColumns:Me,handleFilterCallBack:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.filteredRow,o=e.filteredRowKeyValues,n=e.columnStatus,l=void 0===n?{}:n;e.filterItemList,e.afterFilterItemList,e.afterFilterFactors,a.setStore("filterReset",!1,!1),a.setColumn(u,l,!1);var i=a.getData()||[];i.forEach((function(e){o.includes(e[r])?e.filter=!1:e.filter=!0}));var s=a.getCheckInfo();t&&t.length&&(s.indeterminate=t.some((function(e){var t=e.values||e;return(!t.saga_status||"1"!==t.saga_status.value)&&e.selected})),s.checkedAll=t.every((function(e){var t=e.values||e;return!(!t.saga_status||"1"!==t.saga_status.value)||e.selected}))),a.setStore(["checkInfo"],s,!1),a.setData({data:i,shouldForceUpdate:!1}),C&&C()},handleResetCallBack:function(e){e.filterItemList;var t=e.columnStatus;a.setStore("filterReset",!1,!1);var o=a.getData()||[];o.forEach((function(e){e.filter=!1,delete e.filterIndex}));var r=a.getCheckInfo(),n=a.getViewData();n&&n.length&&(r.indeterminate=n.some((function(e){var t=e.values||e;return(!t.saga_status||"1"!==t.saga_status.value)&&e.selected})),r.checkedAll=n.every((function(e){var t=e.values||e;return!(!t.saga_status||"1"!==t.saga_status.value)||e.selected}))),a.setStore(["checkInfo"],r,!1),a.setData({data:o,shouldForceUpdate:!1}),a.setColumn(u,t,!1),S&&S()},onHide:function(e){e.filterItemList;var t=e.columnStatus;a.setColumn(u,t,!0)}},w),high_selectable:re({store:a,onSelect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,s=i.current,c=i.isBatch,d=a.getCache("activedCells")||{};for(var f in e){d[f]=d[f]||[];var p,g=$(e[f]);try{for(g.s();!(p=g.n()).done;){var h=p.value;d[f].push(h),We&&a.setCellProps(f,h,{showDrag:!1,actived:!0,leftLine:!1,rightLine:!1,topLine:!1,bottomLine:!1},!1)}}catch(e){g.e(e)}finally{g.f()}}if(e=d,c){var v=[];for(var b in e){var y=fe("data");e[b].length>0&&v.push(y.query(b))}P?t.onBatchSelected(v,n):(ye([],"clear",!1),v.forEach((function(e){var t=e[r],o=e.values||e;o&&o.saga_status&&"1"===o.saga_status.value&&e.disabled||!me(t)&&ye([{rowKey:r,rowKeyValue:t,pattern:"add"}],"add",!1)})))}if("down"===n&&s&&s.rowKeyValue&&"edit"==l&&a.setCellProps(s.rowKeyValue,s.attrcode,{showDrag:!0},!1),a.setCache("activedCells",e),a.setCache("activedCell",s),We){var m=a.getCache("activeSpecialCells")||[];if((o.length>0||0===o.length&&0!==m.length)&&(m.forEach((function(e){a.setColumn(u,ne({},e.attrcode,{unitActive:!1}),!1)})),o.forEach((function(e){a.setColumn(u,ne({},e.attrcode,{unitActive:!0}),!1)})),a.setCache("activeSpecialCells",o)),e||o){var w=a.getArrayMeta(u,!0),C=(w.length,a.getViewData("filter")),S=w.reduce((function(e,t,o,r){var n=r[o+1]||{},a=r[o-1]||{};return t.visible&&(e[t.attrcode]={prev:a.attrcode,current:t.attrcode,next:n.attrcode}),e}),{});C.forEach((function(e,t){var o=e.values,r=(C[t-1]||{}).values||{},n=(C[t+1]||{}).values||{};for(var a in o){var l=o[a];if(l.actived){var i=S[a]&&S[a].prev,s=S[a]&&S[a].next;l.leftLine=!i||!o[i]||!o[i].actived,l.rightLine=!s||!o[s]||!o[s].actived,l.topLine=r&&(!r[a]||!r[a].actived),l.bottomLine=n&&(!n[a]||!n[a].actived)}}}))}a.refresh()}else a.refresh()},onDeSelect:function(e,t){var o=a.getCache("activedCells")||{},r={},n={};for(var l in o){r[l]={};var i,s=$(o[l]);try{for(s.s();!(i=s.n()).done;){var c=i.value;r[l][c]=!0}}catch(e){s.e(e)}finally{s.f()}}for(var u in e){var d,f=$(e[u]);try{for(f.s();!(d=f.n()).done;){var p=d.value;r[u][p]&&(delete r[u][p],Ce(u,p,{actived:!1,leftLine:!1,rightLine:!1,topLine:!1,bottomLine:!1},!1))}}catch(e){f.e(e)}finally{f.f()}}for(var g in r)for(var h in n[g]=[],r[g])n[g].push(h);a.setCache("activedCells",n)},getPrevSelector:function(e){var t=a.getCache("activedCells")||{},o={},r=function(e){(t[e]||[]).forEach((function(t){o["".concat(e,"@").concat(t)]=!0}))};for(var n in t)r(n);return o},onClearData:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(a.setCache("activedCells",{}),a.setCache("activeSpecialCells",[]),We){var t=a.getData()||[],o=a.getTableProps("rowKey");t.forEach((function(e){var t=e.values||e||{},r=e[o];for(var n in t)t[n].showDrag&&Ce(r,n,{showDrag:!1},!1),t[n].actived&&Ce(r,n,{actived:!1,leftLine:!1,rightLine:!1,topLine:!1,bottomLine:!1},!1)}));var r=a.getArrayMeta(u,!1)||[];r.forEach((function(e){e.unitActive&&a.setColumn(u,ne({},e.attrcode,{unitActive:!1}),!1)})),e&&a.refresh()}},arrColumns:a.getArrayMeta(u,!1),data:Fe,rowKey:r,onBatchChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(We){t=re(re({},t),{},{rowIndex:a.getTrueRowIndex({rowKeyValue:t.rowKeyValue}),attrcode:t.attrcode,column:a.getColumn(u,t.attrcode)}),Ce(t.rowKeyValue,t.attrcode,{showDrag:!1},!0);var r=a.getData(),n=[],l=xe({rowKeyValue:t.rowKeyValue,attrcode:t.attrcode})||{};for(var i in o){var s=o[i][0],c="refer"===t.column.itemtype&&"refname"===t.column.fieldDisplayed||"select"===t.column.itemtype;s&&n.push(c?l.display:l.value)}console.log("onBatchChange trigger",t,o);var d={pasteContent:n,activeCell:t,langJson:e,rows:r,getRowOldValue:a.getRowOldValue,tableId:u},f=Ie(d);N&&N(f)}},isBatchSelect:We},O),high_sidebox:{langJson:e,arrColumns:Me,tableId:u,fieldid:A,onCloseModel:D,tableModelConfirm:V,store:a,sideBoxConfig:He},high_hotkey:{tableId:u,store:a,enable:!0},excelConfig:{tableId:u,onBatchChange:N,langJson:e},foldingRowChange:function(e){t.setState({isEllipsis:e})},foldCacheId:oe,contextMenuConfig:{enable:We,status:l,contextMenuClick:this.contextMenuClick,showBusinessBtn:Pe(ee),showPasteBtn:Pe(N),langJson:e},autoAffixScroll:!0,colsSettingParam:ze,cancelCustomRightMenu:J,showWidthAndHeightConfig:H,updateColumnHandle:this.updateColumnAfterSetting,key:this.state.key,addBlankCol:q},ce)))}}])&&ae(t.prototype,o),r&&ae(t,r),i}(l.BaseComponent);Be.displayName="EditTable",Be.useEditTable=S},3:function(e,t){e.exports=o},42:function(e,t){e.exports=a},8:function(e,t){e.exports=r}})}));
//# sourceMappingURL=index.js.map