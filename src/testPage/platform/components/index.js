/*! @ncctag content */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("@platform/api/index"),require("@platform/base/index"),require("react-dom"),require("@platform/table-core/index"),require("@platform/template/index"),require("@platform/form/index"),require("axios")):"function"==typeof define&&define.amd?define(["react","@platform/api/index","@platform/base/index","react-dom","@platform/table-core/index","@platform/template/index","@platform/form/index","axios"],t):"object"==typeof exports?exports["@platform/components/index"]=t(require("react"),require("@platform/api/index"),require("@platform/base/index"),require("react-dom"),require("@platform/table-core/index"),require("@platform/template/index"),require("@platform/form/index"),require("axios")):e["@platform/components/index"]=t(e.React,e["@platform/api/index"],e["@platform/base/index"],e.ReactDOM,e["@platform/table-core/index"],e["@platform/template/index"],e["@platform/form/index"],e.axios)}(window,(function(e,t,n,r,a,o,i,c){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="../../../../platform/",n(n.s=1890)}({0:function(t,n){t.exports=e},1:function(e,n){e.exports=t},104:function(e,t,n){},106:function(e,t,n){"use strict";n.r(t),n.d(t,"HotKeys",(function(){return w})),n.d(t,"withHotKeys",(function(){return C})),n.d(t,"FocusTrap",(function(){return S})),n.d(t,"HotKeyMapMixin",(function(){return E}));var r=n(2),a=n.n(r),o=n(0),i=n.n(o),c=n(20),l=n.n(c),s=n(6),u=n.n(s),d=n(63),f=n.n(d),p=n(64),h=n.n(p),m=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},g=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},k=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},S=function(e){function t(){return m(this,t),k(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,o.Component),y(t,[{key:"render",value:function(){var e=this.props,t=e.component,n=e.children,r=g(e,["component","children"]);return i.a.createElement(t,b({tabIndex:"-1"},r),n)}}]),t}();function O(e,t){return!l()(e,t)}S.propTypes={onFocus:a.a.func,onBlur:a.a.func,component:a.a.oneOfType([a.a.func,a.a.string]),children:a.a.node},S.defaultProps={component:"div"};var w=function(e){function t(e,n){m(this,t);var r=k(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.onFocus=r.onFocus.bind(r),r.onBlur=r.onBlur.bind(r),r}return v(t,o.Component),y(t,[{key:"getChildContext",value:function(){return{hotKeyParent:this,hotKeyMap:this.__hotKeyMap__}}},{key:"componentWillMount",value:function(){this.updateMap()}},{key:"updateMap",value:function(){var e=this.buildMap();return!l()(e,this.__hotKeyMap__)&&(this.__hotKeyMap__=e,!0)}},{key:"buildMap",value:function(){var e=this.context.hotKeyMap||{},t=this.props.keyMap||{};return b({},e,t)}},{key:"getMap",value:function(){return this.__hotKeyMap__}},{key:"componentDidMount",value:function(){var e=n(107);this.__mousetrap__=new e(this.props.attach||u.a.findDOMNode(this)),this.updateHotKeys(!0)}},{key:"componentDidUpdate",value:function(e){this.updateHotKeys(!1,e)}},{key:"componentWillUnmount",value:function(){this.context.hotKeyParent&&this.context.hotKeyParent.childHandledSequence(null),this.__mousetrap__&&this.__mousetrap__.reset()}},{key:"updateHotKeys",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.props.handlers,r=void 0===n?{}:n,a=t.handlers,o=void 0===a?r:a,i=this.updateMap();(e||i||O(r,o))&&(this.context.hotKeyParent&&this.context.hotKeyParent.childHandledSequence(null),this.syncHandlersToMousetrap())}},{key:"syncHandlersToMousetrap",value:function(){var e=this,t=this.props.handlers,n=void 0===t?{}:t,r=this.getMap(),a=[],o=this.__mousetrap__;Object.keys(n).forEach((function(t){var o=n[t];(function(e,t){var n=e[t];return n?Array.isArray(n)?n:[n]:[t]})(r,t).forEach((function(t){var n=void 0;h()(t)&&(n=t.action,t=t.sequence),a.push({callback:function(t,n){if((f()(e.props.focused)?e.props.focused:e.__isFocused__)&&n!==e.__lastChildSequence__)return e.context.hotKeyParent&&e.context.hotKeyParent.childHandledSequence(n),o(t,n)},action:n,sequence:t})}))})),o.reset(),a.forEach((function(e){var t=e.sequence,n=e.callback,r=e.action;return o.bind(t,n,r)}))}},{key:"childHandledSequence",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.__lastChildSequence__=e,this.context.hotKeyParent&&this.context.hotKeyParent.childHandledSequence(e)}},{key:"render",value:function(){var e=this.props,t=(e.keyMap,e.handlers,e.focused,e.attach,e.children),n=g(e,["keyMap","handlers","focused","attach","children"]);return i.a.createElement(S,b({},n,{onFocus:this.onFocus,onBlur:this.onBlur}),t)}},{key:"onFocus",value:function(){var e;this.__isFocused__=!0,this.props.onFocus&&(e=this.props).onFocus.apply(e,arguments)}},{key:"onBlur",value:function(){var e;this.__isFocused__=!1,this.props.onBlur&&(e=this.props).onBlur.apply(e,arguments),this.context.hotKeyParent&&this.context.hotKeyParent.childHandledSequence(null)}}]),t}();w.propTypes={keyMap:a.a.object,handlers:a.a.object,focused:a.a.bool,attach:a.a.any,children:a.a.node,onFocus:a.a.func,onBlur:a.a.func},w.childContextTypes={hotKeyParent:a.a.any,hotKeyMap:a.a.object},w.contextTypes={hotKeyParent:a.a.any,hotKeyMap:a.a.object};var C=function(e){return function(t){return function(n){function r(e){m(this,r);var t=k(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t._setRef=t._setRef.bind(t),t.state={handlers:{}},t}return v(r,o.PureComponent),y(r,[{key:"componentDidMount",value:function(){this.setState({handlers:this._ref.hotKeyHandlers})}},{key:"_setRef",value:function(e){this._ref=e}},{key:"render",value:function(){var n=this.state.handlers;return i.a.createElement(w,{component:"document-fragment",keyMap:e,handlers:n},i.a.createElement(t,b({ref:this._setRef},this.props)))}}]),r}()}};function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{contextTypes:{hotKeyMap:a.a.object},childContextTypes:{hotKeyMap:a.a.object},getChildContext:function(){return{hotKeyMap:this.__hotKeyMap__}},componentWillMount:function(){this.updateMap()},updateMap:function(){var e=this.buildMap();return!l()(e,this.__hotKeyMap__)&&(this.__hotKeyMap__=e,!0)},buildMap:function(){var t=this.context.hotKeyMap||{},n=this.props.keyMap||{};return b({},t,e,n)},getMap:function(){return this.__hotKeyMap__}}}},107:function(e,t,n){var r;!function(a,o,i){if(a){for(var c,l={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},s={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},u={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},d={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},f=1;f<20;++f)l[111+f]="f"+f;for(f=0;f<=9;++f)l[f+96]=f.toString();v.prototype.bind=function(e,t,n){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,n),this},v.prototype.unbind=function(e,t){return this.bind.call(this,e,(function(){}),t)},v.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},v.prototype.reset=function(){return this._callbacks={},this._directMap={},this},v.prototype.stopCallback=function(e,t){if((" "+t.className+" ").indexOf(" mousetrap ")>-1)return!1;if(function e(t,n){return null!==t&&t!==o&&(t===n||e(t.parentNode,n))}(t,this.target))return!1;if("composedPath"in e&&"function"==typeof e.composedPath){var n=e.composedPath()[0];n!==e.target&&(t=n)}return"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},v.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},v.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(l[t]=e[t]);c=null},v.init=function(){var e=v(o);for(var t in e)"_"!==t.charAt(0)&&(v[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t))},v.init(),a.Mousetrap=v,e.exports&&(e.exports=v),void 0===(r=function(){return v}.call(t,n,t,e))||(e.exports=r)}function p(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function h(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return l[e.which]?l[e.which]:s[e.which]?s[e.which]:String.fromCharCode(e.which).toLowerCase()}function m(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function y(e,t,n){return n||(n=function(){if(!c)for(var e in c={},l)e>95&&e<112||l.hasOwnProperty(e)&&(c[l[e]]=e);return c}()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function b(e,t){var n,r,a,o=[];for(n=function(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus")).split("+")}(e),a=0;a<n.length;++a)r=n[a],d[r]&&(r=d[r]),t&&"keypress"!=t&&u[r]&&(r=u[r],o.push("shift")),m(r)&&o.push(r);return{key:r,modifiers:o,action:t=y(r,o,t)}}function v(e){var t=this;if(e=e||o,!(t instanceof v))return new v(e);t.target=e,t._callbacks={},t._directMap={};var n,r={},a=!1,i=!1,c=!1;function l(e){e=e||{};var t,n=!1;for(t in r)e[t]?n=!0:r[t]=0;n||(c=!1)}function s(e,n,a,o,i,c){var l,s,u,d,f=[],p=a.type;if(!t._callbacks[e])return[];for("keyup"==p&&m(e)&&(n=[e]),l=0;l<t._callbacks[e].length;++l)if(s=t._callbacks[e][l],(o||!s.seq||r[s.seq]==s.level)&&p==s.action&&("keypress"==p&&!a.metaKey&&!a.ctrlKey||(u=n,d=s.modifiers,u.sort().join(",")===d.sort().join(",")))){var h=!o&&s.combo==i,y=o&&s.seq==o&&s.level==c;(h||y)&&t._callbacks[e].splice(l,1),f.push(s)}return f}function u(e,n,r,a){t.stopCallback(n,n.target||n.srcElement,r,a)||!1===e(n,r)&&(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}(n),function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}(n))}function d(e){"number"!=typeof e.which&&(e.which=e.keyCode);var n=h(e);n&&("keyup"!=e.type||a!==n?t.handleKey(n,function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}(e),e):a=!1)}function f(e,t,o,i){function s(t){return function(){c=t,++r[e],clearTimeout(n),n=setTimeout(l,1e3)}}function d(t){u(o,t,e),"keyup"!==i&&(a=h(t)),setTimeout(l,10)}r[e]=0;for(var f=0;f<t.length;++f){var p=f+1===t.length?d:s(i||b(t[f+1]).action);y(t[f],p,i,e,f)}}function y(e,n,r,a,o){t._directMap[e+":"+r]=n;var i,c=(e=e.replace(/\s+/g," ")).split(" ");c.length>1?f(e,c,n,r):(i=b(e,r),t._callbacks[i.key]=t._callbacks[i.key]||[],s(i.key,i.modifiers,{type:i.action},a,e,o),t._callbacks[i.key][a?"unshift":"push"]({callback:n,modifiers:i.modifiers,action:i.action,seq:a,level:o,combo:e}))}t._handleKey=function(e,t,n){var r,a=s(e,t,n),o={},d=0,f=!1;for(r=0;r<a.length;++r)a[r].seq&&(d=Math.max(d,a[r].level));for(r=0;r<a.length;++r)if(a[r].seq){if(a[r].level!=d)continue;f=!0,o[a[r].seq]=1,u(a[r].callback,n,a[r].combo,a[r].seq)}else f||u(a[r].callback,n,a[r].combo);var p="keypress"==n.type&&i;n.type!=c||m(e)||p||l(o),i=f&&"keydown"==n.type},t._bindMultiple=function(e,t,n){for(var r=0;r<e.length;++r)y(e[r],t,n)},p(e,"keypress",d),p(e,"keydown",d),p(e,"keyup",d)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},11:function(e,t){e.exports=o},13:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={form:"form",cardTable:"cardTable",editTable:"editTable"}},131:function(e,t,n){var r=n(96),a=n(79);e.exports=function(e){if(!a(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},132:function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}},139:function(e,t,n){var r=n(357),a=n(708),o=n(710);e.exports=function(e,t){return o(a(e,t,r),e+"")}},155:function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,n(31))},156:function(e,t,n){var r=n(315),a=n(334),o=n(336),i=n(337),c=n(338);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=a,l.prototype.get=o,l.prototype.has=i,l.prototype.set=c,e.exports=l},16:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(1);function a(e){var t=e.querySelector("div");if(t&&t.attributes){var n=Object.values(t.attributes).find((function(e){if(e&&e.value.startsWith(r.config.hotKeyModuleIdPrefix))return e}));return n&&n.value}}},163:function(e,t,n){var r=n(358),a=n(85);e.exports=function(e){return a(e)&&r(e)}},17:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return m}));var r=n(16),a=n(49),o=n(33),i=n(9),c=n(13),l=n(1);function s(e){var t=e.eventTarget,n=e.ViewModel,a=e.moduleId,i=e.orderOfHotKey,c="TD"===t.tagName?t:u(t);if(c){var s=c.nextElementSibling,y=c.parentElement,b=d(y),v=s&&s.querySelector('[tabindex="0"]');if(b!==c)if(null===v||Object(o.a)(v))f({td:s,ViewModel:n,moduleId:a,orderOfHotKey:i});else{var g=Object(r.a)(s);g&&(n.enterTriggerCellId=g),m({div:v,ViewModel:n})}else y===y.parentElement.lastElementChild?function(e){var t=e.currentModuleId,n=e.ViewModel,a=e.orderOfHotKey;a&&0===a.length?function(e){var t=e.currentModuleId,n=e.ViewModel,a="".concat(l.config.hotKeyModuleIdPrefix,"-").concat(t),o=document.querySelector("#".concat(a," table tbody tr")).querySelectorAll("td"),i=Array.prototype.find.call(o,(function(e){return null!==e.querySelector('[tabindex="0"]')})),c=Object(r.a)(i);c&&(n.enterTriggerCellId=c);var s=i.querySelector('[tabindex="0"]');s&&m({div:s,ViewModel:n})}({currentModuleId:t,ViewModel:n}):a&&h({currentModuleId:t,ViewModel:n,orderOfHotKey:a})}({currentModuleId:a,ViewModel:n,orderOfHotKey:i}):p({tr:y,ViewModel:n,moduleId:a,orderOfHotKey:i})}else console.warn("not find parentTd, next hotkey invalid")}function u(e){for(;e.parentElement;)if("TD"===(e=e.parentElement).tagName)return e;return null}function d(e){return e.lastElementChild.className.includes("fixed")?e.lastElementChild.previousElementSibling:e.lastElementChild}function f(e){var t=e.td,n=e.ViewModel,a=e.moduleId,i=e.orderOfHotKey,c=t.nextElementSibling,l=c&&c.parentElement,s=l&&d(l),u=t.querySelector('[tabindex="0"]'),h=c&&c.querySelector('[tabindex="0"]');if(s===c&&null===h||s===t&&null===u)p({tr:l,ViewModel:n,moduleId:a,orderOfHotKey:i});else if(null===h||Object(o.a)(h))f({td:c,ViewModel:n,moduleId:a,orderOfHotKey:i});else{var y=Object(r.a)(c);y&&(n.enterTriggerCellId=y),m({div:h,ViewModel:n})}}function p(e){var t=e.tr,n=e.ViewModel,a=e.moduleId,o=e.orderOfHotKey,i=t&&t.nextElementSibling;if(null!==i)if("-1"!==i.getAttribute("tabindex")){var c=i.querySelector('td [tabindex="0"]'),l=u(c),s=Object(r.a)(l);s&&(n.enterTriggerCellId=s),m({div:c,ViewModel:n})}else p({tr:i,ViewModel:n,moduleId:a,orderOfHotKey:o});else o&&h({currentModuleId:a,ViewModel:n,orderOfHotKey:o})}function h(e){var t=e.currentModuleId,n=e.ViewModel,o=e.orderOfHotKey,l=function(e,t){var n=t.length,r=t.indexOf(e)+1===n?0:t.indexOf(e)+1;return t[r]}(t,o),s=i.d[l];if(void 0!==s){var d=s.type;if(d===c.a.cardTable||d===c.a.editTable){var p=i.d[s.activeTable],h=document.querySelector("div[".concat(p.firstItem,"]")),y=h.querySelector('[tabindex="0"]');if(null===y){f({td:h.parentElement,ViewModel:n,moduleId:p.moduleId,orderOfHotKey:o})}else{var b=u(y),v=Object(r.a)(b);v&&(n.enterTriggerCellId=v),m({div:y,ViewModel:n})}}else Object(a.b)(s,l)}}function m(e){var t=e.div,n=e.ViewModel;null!==t&&(n.shouldAutoFocus=!0,t.ncExecuteFocus=!0,t.focus(),delete t.ncExecuteFocus)}},1869:function(e,t,n){},1870:function(e,t,n){},1871:function(e,t,n){},1872:function(e,t,n){},1873:function(e,t,n){},1874:function(e,t,n){},1875:function(e,t,n){},1876:function(e,t,n){},1877:function(e,t,n){},1878:function(e,t,n){},1879:function(e,t,n){},1880:function(e,t,n){},1881:function(e,t,n){},1882:function(e,t,n){},1883:function(e,t,n){},1884:function(e,t,n){},1885:function(e,t,n){},1886:function(e,t,n){},1887:function(e,t,n){},1888:function(e,t,n){},1890:function(e,t,n){"use strict";n.r(t),n.d(t,"BillHeadInfo",(function(){return O})),n.d(t,"Button",(function(){return H})),n.d(t,"ButtonApp",(function(){return un})),n.d(t,"CardPagination",(function(){return On})),n.d(t,"CreateModal",(function(){return a})),n.d(t,"CreateSearch",(function(){return fo})),n.d(t,"CreateNCModal",(function(){return o})),n.d(t,"CreateUploader",(function(){return i})),n.d(t,"CrossServiceBtns",(function(){return qo})),n.d(t,"ConnectSocket",(function(){return Si})),n.d(t,"DragWidthCom",(function(){return Oi.a})),n.d(t,"HotkeyHelper",(function(){return Ui})),n.d(t,"InsertTable",(function(){return Cc})),n.d(t,"PrintOutput",(function(){return Kc})),n.d(t,"PrintOutputModal",(function(){return Jc})),n.d(t,"output",(function(){return Zc})),n.d(t,"PrintTemplate",(function(){return ol})),n.d(t,"print",(function(){return ll})),n.d(t,"printer",(function(){return sl})),n.d(t,"PromptBox",(function(){return jt})),n.d(t,"promptBox",(function(){return Nt})),n.d(t,"Socket",(function(){return _l})),n.d(t,"AsyncTree",(function(){return Xs})),n.d(t,"SyncTree",(function(){return Bu})),n.d(t,"Transfer",(function(){return Od})),n.d(t,"TreeTableManyCol",(function(){return wd.default})),n.d(t,"WithAutoFocus",(function(){return Cd})),n.d(t,"WithKeyboardChange",(function(){return Ed})),n.d(t,"mutiInit",(function(){return s})),n.d(t,"FormulaEditor",(function(){return ff}));var r={};n.r(r),n.d(r,"name",(function(){return Y})),n.d(r,"emptyf",(function(){return z})),n.d(r,"enable",(function(){return J})),n.d(r,"default",(function(){return Z}));var a={};n.r(a),n.d(a,"createModal",(function(){return Dn})),n.d(a,"show",(function(){return An})),n.d(a,"close",(function(){return In}));var o={};n.r(o),n.d(o,"createModal",(function(){return Oo})),n.d(o,"show",(function(){return wo})),n.d(o,"close",(function(){return Co}));var i={};n.r(i),n.d(i,"createUploader",(function(){return xo})),n.d(i,"show",(function(){return Po})),n.d(i,"close",(function(){return _o}));var c={};n.r(c),n.d(c,"createAsyncTree",(function(){return Ds})),n.d(c,"createTreeData",(function(){return As})),n.d(c,"setTreeData",(function(){return Is})),n.d(c,"setNodeChecked",(function(){return Ms})),n.d(c,"addTreeData",(function(){return Rs})),n.d(c,"getAsyncTreeValue",(function(){return Bs})),n.d(c,"delTreeData",(function(){return Ks})),n.d(c,"editTreeData",(function(){return Fs})),n.d(c,"setAsyncNodeDisable",(function(){return Ls})),n.d(c,"setTreeEdit",(function(){return Hs})),n.d(c,"getSelectNodeAsync",(function(){return qs})),n.d(c,"openNodeByPkAsync",(function(){return Vs})),n.d(c,"closeNodeByPkAsync",(function(){return Us})),n.d(c,"hideIconAsync",(function(){return Ws})),n.d(c,"addBrotherNodeAsync",(function(){return Ys})),n.d(c,"setNodeSelectedAsync",(function(){return zs})),n.d(c,"cancelSelectedNodeAsync",(function(){return Js}));var l={};n.r(l),n.d(l,"createSyncTree",(function(){return ru})),n.d(l,"setSyncTreeData",(function(){return au})),n.d(l,"editNodeSuccess",(function(){return ou})),n.d(l,"handleEidAddDisbale",(function(){return iu})),n.d(l,"handleEidAddNoDisbale",(function(){return cu})),n.d(l,"addNodeSuccess",(function(){return lu})),n.d(l,"delNodeSuceess",(function(){return su})),n.d(l,"getSyncTreeValue",(function(){return uu})),n.d(l,"setNodeDisable",(function(){return du})),n.d(l,"setTreeEdit",(function(){return fu})),n.d(l,"getSelectNode",(function(){return pu})),n.d(l,"openNodeByPk",(function(){return hu})),n.d(l,"closeNodeByPk",(function(){return mu})),n.d(l,"createTreeData",(function(){return yu})),n.d(l,"getTreeData",(function(){return bu})),n.d(l,"hideIcon",(function(){return vu})),n.d(l,"setIconVisible",(function(){return gu})),n.d(l,"addBrotherNode",(function(){return ku})),n.d(l,"setNodeSelected",(function(){return Su})),n.d(l,"setNodeChecked",(function(){return Ou})),n.d(l,"getCheckedKeys",(function(){return wu})),n.d(l,"cancelSelectedNode",(function(){return Cu})),n.d(l,"setLeafNodeEdit",(function(){return Eu})),n.d(l,"moveNode",(function(){return ju})),n.d(l,"getMoveNodeKey",(function(){return xu})),n.d(l,"getHoverNodeKey",(function(){return Pu})),n.d(l,"getSearchChangeEven",(function(){return _u})),n.d(l,"setTreeItemIcons",(function(){return Nu})),n.d(l,"getItem",(function(){return Tu})),n.d(l,"showAddTreeItemModal",(function(){return Du})),n.d(l,"showEditTreeItemModal",(function(){return Au})),n.d(l,"showDeleteTreeItemModal",(function(){return Iu})),n.d(l,"updataDataSource",(function(){return Mu})),n.d(l,"updataTreeNode",(function(){return Ru}));var s={};n.r(s),n.d(s,"init",(function(){return _d})),n.d(s,"getIntl",(function(){return Td}));var u=n(0),d=n.n(u),f=n(1),p=n(3);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var a=k(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1869);var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(o,e);var t,n,r,a=b(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).props.getThis(g(t)),t.state={showBackBtn:!0,showBillCode:!0,billCode:t.props.events.billCode,title:t.props.events.title},t}return t=o,(n=[{key:"componentWillReceiveProps",value:function(e){e.events.title!==this.props.events.title&&this.setState({title:e.events.title})}},{key:"render",value:function(){var e=this.props.events,t=this.state,n=t.showBackBtn,r=t.showBillCode,a=t.billCode,o=t.title,i=void 0===o?"":o,c=e.initShowBackBtn,l=void 0===c||c,s=e.backBtnClick,u=e.titleClick,h="function"==typeof f.createPageIcon?Object(f.createPageIcon)():null,m=window.nccFontSize||window.top.nccFontSize||Object(f.getGlobalStorage)("localStorage","nccFontSize")||"",y="";if(m)switch(m){case"large":y="title-font-size-large";break;case"medium":y="title-font-size-medium"}return d.a.createElement("div",{className:"BillHeadInfoWrap ".concat(n&&l?"BillHeadInfoWrap-showBackBtn":"")},n&&l&&d.a.createElement(p.BackBtn,{onClick:s&&s}),h,d.a.createElement("span",{className:"bill-info-title ".concat(y),fieldid:Object(f.getSysFieldid)("".concat(i,"_title")),onClick:function(){"function"==typeof u&&u()}},i),r&&d.a.createElement("span",{className:"bill-info-code"},a&&"：".concat(a)))}}])&&m(t.prototype,n),r&&m(t,r),o}(u.Component);var O={createBillHeadInfo:function(e){var t=this;return React.createElement(S,{getThis:function(e){t.myBillInfo=e},events:e,output:this.output,rootprops:this.props})},setBillHeadInfoVisible:function(e){this.myBillInfo&&this.myBillInfo.state&&e&&(e.hasOwnProperty("showBackBtn")&&e.showBackBtn!=this.myBillInfo.state.showBackBtn&&(this.myBillInfo.state.showBackBtn=e.showBackBtn),e.hasOwnProperty("showBillCode")&&e.showBillCode!=this.myBillInfo.state.showBillCode&&(this.myBillInfo.state.showBillCode=e.showBillCode),e.hasOwnProperty("billCode")&&e.billCode!=this.myBillInfo.state.billCode&&(this.myBillInfo.state.billCode=e.billCode),e.hasOwnProperty("title")&&e.title!=this.myBillInfo.state.title&&(this.myBillInfo.state.title=e.title),this.myBillInfo.setState(this.myBillInfo.state))}};function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var T=function(e,t){var n=[];return function t(r){return r.forEach((function(r){r.key==e?n.push(r):r.children&&t(r.children)}))}(t),n};function D(e,t,n){var r=this.myState.btnInfo;r[e]=r[e]||{},r[e][t]=n}function A(e,t,n){var r=this;if("string"==typeof e)D.call(this,e,t,n),T(e,this.myState.buttons).forEach((function(e){e[t]=n,"disabled"===t&&("divider"===e.type?e.disabled=n:e.isenable=!n),"visible"===t&&e.parentCode&&n&&A.call(r,e.parentCode,"visible",!0)}));else if(e instanceof Array){e.forEach((function(e){D.call(r,e,t,n)}));for(var a=0;a<e.length;a++){T(e[a],this.myState.buttons).forEach((function(e){e[t]=n,"disabled"===t&&("divider"===e.type?e.disabled=n:e.isenable=!n),"visible"===t&&e.parentCode&&n&&A.call(r,e.parentCode,"visible",!0)}))}}else if(Object(f.isObj)(e))for(var o=function(){var n=c[i];D.call(r,n,t,e[n]),T(n,r.myState.buttons).forEach((function(a){a[t]=e[n],"disabled"===t&&("divider"===a.type?a.disabled=e[n]:a.isenable=!e[n]),"visible"===t&&a.parentCode&&e[n]&&A.call(r,a.parentCode,"visible",!0)}))},i=0,c=Object.keys(e);i<c.length;i++)o()}function I(){return this.myState.buttons}function M(e,t){for(var n=this.myState.buttonsEntrys,r=this.myState.buttonsComponent,a=this.myState.stopOprationBtnsRenderAreas,o=[],i=[],c=0,l=Object.keys(a);c<l.length;c++){var s=l[c];a.hasOwnProperty(s)&&!a[s]&&i.push(s)}if(Array.isArray(e)){var u,d=_(e);try{for(d.s();!(u=d.n()).done;){var f=u.value;if(n[f]){var p,h=_(n[f]);try{for(h.s();!(p=h.n()).done;){var m=p.value;o.includes(m)||o.push(m)}}catch(e){h.e(e)}finally{h.f()}}}}catch(e){d.e(e)}finally{d.f()}}if(o=o.filter((function(e){return!i.includes(e)})),t){var y,b=o.length,v=_(o);try{for(v.s();!(y=v.n()).done;){var g=y.value;if(b-=1,r[g])if(r[g]._isOperateButton)for(var k in r[g])r[g][k]&&r[g][k].setState&&r[g][k].setState({json:[]},(function(){}));else r[g].setState({json:[]},(function(){}))}}catch(e){v.e(e)}finally{v.f()}"function"!=typeof t||b||t&&t()}else{var S,O=_(o);try{for(O.s();!(S=O.n()).done;){var w=S.value;if(r[w])if(r[w]._isOperateButton)for(var C in r[w])r[w][C]&&r[w][C].setState&&r[w][C].setState({json:[]},(function(){}));else r[w].setState({json:[]},(function(){}))}}catch(e){O.e(e)}finally{O.f()}}}function R(e){var t=[];if("string"==typeof e)t=[e];else if(Array.isArray(e)){var n,r=_(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;!t.includes(a)&&t.push(a)}}catch(e){r.e(e)}finally{r.f()}}else if(Object(f.isObj)(e))for(var o=0,i=Object.keys(e);o<i.length;o++){var c=i[o];!t.includes(c)&&t.push(c)}return t}function B(e,t,n){n?(F.call(this,n,e,"disabled",t),L.call(this,n,R(e))):(A.call(this,e,"disabled",t),I.call(this).length&&M.call(this,R(e)))}function K(e,t){var n=this;(A.call(this,e,"visible",t),t)&&T(e[0],this.myState.buttons).forEach((function(e){e.parentCode&&A.call(n,e.parentCode,"visible",!0)}));I.call(this).length&&M.call(this,R(e))}function F(e,t,n,r){var a=this;if("string"==typeof t)T(t,this.myState.buttons).filter((function(t){return e===t.area})).forEach((function(t){t[n]=r,"disabled"===n&&("divider"===t.type?t.disabled=r:t.isenable=!r),"visible"===n&&t.parentCode&&r&&F.call(a,e,t.parentCode,"visible",!0)}));else if(t instanceof Array)for(var o=0;o<t.length;o++){T(t[o],this.myState.buttons).filter((function(t){return e===t.area})).forEach((function(t){t[n]=r,"disabled"===n&&("divider"===t.type?t.disabled=r:t.isenable=!r),"visible"===n&&t.parentCode&&r&&F.call(a,e,t.parentCode,"visible",!0,e)}))}else if(Object(f.isObj)(t))for(var i=function(){var r=l[c];T(r,a.myState.buttons).filter((function(t){return e===t.area})).forEach((function(o){o[n]=t[r],"disabled"===n&&("divider"===o.type?o.disabled=t[r]:o.isenable=!t[r]),"visible"===n&&o.parentCode&&t[r]&&F.call(a,e,o.parentCode,"visible",!0)}))},c=0,l=Object.keys(t);c<l.length;c++)i()}function L(e,t){for(var n=this.myState.buttonsComponent,r=this.myState.stopOprationBtnsRenderAreas,a=[],o=0,i=Object.keys(r);o<i.length;o++){var c=i[o];r.hasOwnProperty(c)&&!r[c]&&a.push(c)}if(!a.includes(e)&&n[e]){if(n[e]._isOperateButton)for(var l in n[e])n[e][l]&&n[e][l].setState&&n[e][l].setState({json:[]},(function(){}));else n[e].setState({json:[]},(function(){}));"function"==typeof t&&t&&t()}}var H={createButton:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.disabled,a=void 0!==r&&r,o=n.name,i=void 0===o?"":o,c=n.onButtonClick,l=n.buttonColor,s=void 0===l?"":l,u=x(n,["disabled","name","onButtonClick","buttonColor"]);return this.state.button.hasOwnProperty(e)||(this.state.button[e]={disabled:a},this.state.button[e]=Object.assign(this.state.button[e],n)),d.a.createElement(p.Button,w({disabled:this.state.button[e].disabled,onClick:function(){window.top.proxyAction?window.top.proxyAction(c,t,i)(E(E({},t.props),t.output),e):"function"==typeof c&&c.call(t,E(E({},t.props),t.output),e)}},u,{color:s,id:e,className:"".concat(!this.state.button[e].hasOwnProperty("visible")||this.state.button[e].visible?"show":"hide","  button-component ").concat(s)}),i)},setButtonDisabled:B,getButtonDisabled:function(e){var t=T(e,this.myState.buttons);if(0!==t.length)return!!t[0].disabled;console.error("找不到编码为 ".concat(e," 的按钮"))},setButtonVisible:K,setButtonsVisible:K,setButtonTitle:function(e,t){A.call(this,e,"title",t),I.call(this).length&&M.call(this,R(e))},hideButtonsByAreas:function(e){this.myState.hideButtonMenu="string"==typeof e?[e]:e},getButtons:I,setButtons:function(e,t){var n=this.myState,r=n.btnInfo,a=n.hideButtonMenu;if(Object.keys(r).forEach((function(t){T(t,e).forEach((function(e){if("divider"===e.type)if(r[t])for(var n=0,a=Object.keys(r[t]);n<a.length;n++){var o=a[n];"type"===o?Object.assign(e,{dividerType:"button_main"===r[t].type,dropdownType:"button_main"===r[t].type}):Object.assign(e,P({},o,r[t][o]))}else Object.assign(e,r[t]);else Object.assign(e,r[t])}))})),this.myState.buttons=e,a){var o,i=_(this.myState.buttons);try{for(i.s();!(o=i.n()).done;){var c=o.value;a.includes(c.area)&&(c.visible=!1)}}catch(e){i.e(e)}finally{i.f()}}var l,s=[],u=[],d={};if(this.myState.buttons){var f,p=_(this.myState.buttons);try{for(p.s();!(f=p.n()).done;){var h=f.value;h.key&&(!s.includes(h.key)&&s.push(h.key),d.hasOwnProperty(h.key)?d[h.key].includes(h.area)||d[h.key].push(h.area):d[h.key]=h.area?[h.area]:[]);var m,y=_(-1!==(l=h.area).indexOf(",")?l.split(",").map((function(e){return e.trim()})):[l]);try{for(y.s();!(m=y.n()).done;){var b=m.value;!u.includes(b)&&u.push(b)}}catch(e){y.e(e)}finally{y.f()}if(h.children&&h.children&&h.children.length){var v,g=_(h.children);try{for(g.s();!(v=g.n()).done;){var k=v.value;if(k.key&&(!s.includes(k.key)&&s.push(k.key),d.hasOwnProperty(k.key)?d[k.key].includes(k.area)||d[k.key].push(k.area):d[k.key]=k.area?[k.area]:[]),k.children&&k.children.length){var S,O=_(k.children);try{for(O.s();!(S=O.n()).done;){var w=S.value;if(w.key&&(!s.includes(w.key)&&s.push(w.key),d.hasOwnProperty(w.key)?d[w.key].includes(w.area)||d[w.key].push(w.area):d[w.key]=h.area?[w.area]:[]),w.children&&w.children.length){var C,E=_(w.children);try{for(E.s();!(C=E.n()).done;){var j=C.value;j.key&&(!s.includes(j.key)&&s.push(j.key),d.hasOwnProperty(j.key)?d[j.key].includes(j.area)||d[j.key].push(j.area):d[j.key]=h.area?[j.area]:[])}}catch(e){E.e(e)}finally{E.f()}}}}catch(e){O.e(e)}finally{O.f()}}}}catch(e){g.e(e)}finally{g.f()}}}}catch(e){p.e(e)}finally{p.f()}}this.myState.buttonsEntrys=d,M.call(this,s,t,u)},getButtonVisible:function(e){var t=T(e,this.myState.buttons);if(0!==t.length)return!!t[0].visible||!!t[0].enabled;console.error("找不到编码为 ".concat(e," 的按钮"))},updateButtons:function(e){var t,n=this.myState.buttonsComponent,r=_(e);try{for(r.s();!(t=r.n()).done;){var a=t.value;if(n[a])if(n[a]._isOperateButton)for(var o in n[a])n[a][o]&&n[a][o].setState&&n[a][o].setState({json:[]},(function(){console.log("update成功")}));else n[a].setState({json:[]},(function(){console.log("update成功")}))}}catch(e){r.e(e)}finally{r.f()}},setMainButton:function(e,t){if(Object(f.isObj)(e))for(var n=0,r=Object.keys(e);n<r.length;n++){var a=r[n];e[a]=e[a]?"button_main":"button_secondary"}var o=t?"button_main":"button_secondary";A.call(this,e,"btncolor",o),I.call(this).length&&M.call(this,R(e))},setPopContent:function(e,t){A.call(this,e,"popContent",t),I.call(this).length&&M.call(this,R(e))},setUploadDocAmount:function(e,t){A.call(this,e,"docAmount",t),I.call(this).length&&M.call(this,R(e))},setOprationBtnsRenderStatus:function(e,t){var n,r=_(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;this.myState.stopOprationBtnsRenderAreas[a]=t}}catch(e){r.e(e)}finally{r.f()}},setUploadConfig:function(e,t){A.call(this,e,"uploadConfig",t),I.call(this).length&&M.call(this,R(e))},setDisabled:B},q=n(6),V=n.n(q),U=n(5),W=n.n(U),Y="NCCExtend",z=function(){},J=window.NCCExtendEable||!0,Z={name:Y,emptyf:z,enable:J};var G=function(e,t,n){return e&&"function"==typeof e[t]?e[t]:n||z},X=function(e,t,n){return"templateAlreadyLoaded"===t&&console.log("二开相关回调方法",r,t),!e||e[Y]&&"{}"!==JSON.stringify(e[Y])||(e=window),e&&e[Y]?G(e[Y],t,n):n||z};function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=re(e);if(t){var a=re(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ne(this,n)}}function ne(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(o,e);var t,n,r,a=te(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).state={tipStatus:!1},t.tipConfirm=!1,t.dom=d.a.createRef(),t}return t=o,(n=[{key:"componentDidMount",value:function(){if(this.dom){var e=this.dom.querySelector(".btn-item-left");e&&e.clientWidth<e.scrollWidth&&(this.tipConfirm=!0,this.setState({tipStatus:!0}))}}},{key:"componentDidUpdate",value:function(){if(this.dom&&!this.tipConfirm){var e=this.dom.querySelector(".btn-item-left");e&&e.clientWidth<e.scrollWidth&&(this.tipConfirm=!0,this.setState({tipStatus:!0}))}}},{key:"render",value:function(){var e=this;return d.a.createElement(p.Tooltip,{overlay:this.state.tipStatus?this.props.overlay:"",inverse:!0,delayShow:500,delay:1},d.a.createElement("span",{ref:function(t){e.dom=t}},this.props.children))}}])&&$(t.prototype,n),r&&$(t,r),o}(u.Component);function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ue(e);if(t){var a=ue(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return se(this,n)}}function se(e,t){return!t||"object"!==oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(){return(de=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var fe=p.Menu.Item,pe=p.Menu.Divider,he=p.Menu.ItemGroup,me=function(e){return e.replace(/\/|\\|,/g,"")||e};function ye(e){return e.toLowerCase().replace(/( |^)[a-z]|\+[a-z]/g,(function(e){return e.toUpperCase()}))}var be=function(e,t){var n=this;return(e=e.filter((function(e){return e.visible||!e.hasOwnProperty("visible")}))).map((function(r,a){if(!1!==r.visible)return r.title?d.a.createElement(he,{title:r.title},r.children.map((function(e){var r=e.key,a=e.title,o=e.disabled,i=e.visible,c=e.uploadConfig,l=e.keyboard,s=e.area,u=e.parentCode;return!1!==i&&d.a.createElement(fe,{key:r,fieldid:r,"btn-code":r,disabled:o,className:"dropdown-btn-item"},d.a.createElement(ae,{overlay:a},d.a.createElement("div",{className:"dropdown-btn-item-box"},d.a.createElement("div",{ref:function(e){n.itemDom=e},"btn-code":r,className:W()(me(" nc-".concat(s,"-btn-").concat(u,"-").concat(r,"  ")),"btn-item-left")},t&&o?d.a.createElement("span",{className:"main-title",style:{cursor:"default"}},a):c&&!o?d.a.createElement(p.Upload,de({showUploadList:!1},c),a):a),d.a.createElement("div",{className:"btn-item-right",onClick:function(e){if(!e.target||t&&o||!c||o)return!1;var n=e.target.previousElementSibling.querySelector("input");n&&n.click()}},l?"".concat(ye(l)):""))))}))):[r.children.map((function(e){var n=e.key,r=e.title,a=e.disabled,o=e.visible,i=e.uploadConfig,c=e.keyboard,l=e.area,s=e.parentCode;return!1!==o&&d.a.createElement(fe,{key:n,fieldid:n,"btn-code":n,disabled:a,className:"dropdown-btn-item"},d.a.createElement(ae,{overlay:r},d.a.createElement("div",{className:"dropdown-btn-item-box"},d.a.createElement("div",{className:"btn-item-left","btn-code":n},t&&a?d.a.createElement("span",{className:"main-title",style:{cursor:"default"}},r):i&&!a?a?r:d.a.createElement(p.Upload,de({showUploadList:!1},i,{className:W()(me(" nc-".concat(l,"-btn-").concat(s,"-").concat(n,"  ")))}),r):r),d.a.createElement("div",{className:"btn-item-right",onClick:function(e){if(!e.target||t&&a||!i||a)return!1;var n=e.target.previousElementSibling.querySelector("input");n&&n.click()}},c?"".concat(ye(c)):""))))})),e[a+1]&&d.a.createElement(pe,null)]}))},ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(o,e);var t,n,r,a=le(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=a.call(this)).setMaxHeight=function(){var t=document.body.clientHeight,n=document.querySelector(".button-app-wrapper"),r=n&&n.querySelector(".button-app-dropdown-menu-wrapper"),a=r&&r.getBoundingClientRect(),o=a&&a.top,i=o&&t-o-50;i&&i>0&&e.setState({maxHeight:i})},e.state={maxHeight:500},e}return t=o,(n=[{key:"componentDidMount",value:function(){this.setMaxHeight()}},{key:"componentWillReceiveProps",value:function(){this.setMaxHeight()}},{key:"render",value:function(){var e=this.state.maxHeight,t=this.props,n=t.data,r=t.specialDisabled,a=t.tabindex,o=void 0===a?0:a,i=t.onClick,c=t.onVisibleChange;return d.a.createElement(p.Menu,{className:"button-app-dropdown-menu-wrapper",style:{overflow:"auto",maxHeight:e},onClick:function(e){i(e),c&&c()},tabIndex:o},be.call(this,n,r))}}])&&ie(t.prototype,n),r&&ie(t,r),o}(u.Component);function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ke(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Se(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=je(e);if(t){var a=je(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ee(this,n)}}function Ee(e,t){return!t||"object"!==ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1875);var xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(o,e);var t,n,r,a=Ce(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=a.call(this)).onClick=function(t){var n=t.key,r=t.item.props.children;e.props.onClick({key:n,title:r}),e.setState({show:!1})},e.state={show:!1},e.timer=null,e.timerIndex=!0,e}return t=o,(n=[{key:"render",value:function(){var e,t,n=this,r=this.props,a=r.list,o=r.title,i=r.btncolor,c=r.disabled,l=r.json,s=r.tabindex,u=void 0===s?0:s,h=r.clskey,m=r.area,y=this.state.show,b=(a.length,ke(a));try{for(b.s();!(e=b.n()).done;){var v=e.value,g=v.children.length;if(g>1)if(v.hasOwnProperty("visible")&&!1===v.visible);else{var k,S=ke(v.children);try{for(S.s();!(k=S.n()).done;){var O=k.value;O.topParentCode=v.parentCode||O.parentCode,O.hasOwnProperty("visible")&&!1===O.visible?g-=1:g=g}}catch(e){S.e(e)}finally{S.f()}0===g&&(v.visible=!1)}}}catch(e){b.e(e)}finally{b.f()}return d.a.createElement("div",{className:"mores-wrapper",onMouseLeave:function(){n.timerIndex=!0,n.timer=setTimeout((function(){n.timerIndex&&n.setState({show:!1})}),300)}},d.a.createElement("div",{className:"mores-in-wrapper",onMouseEnter:function(){n.timerIndex=!1,clearTimeout(n.timer)},fieldid:Object(f.getSysFieldid)("".concat(h,"_btn")),"btn-code":h},d.a.createElement(p.Button,{disabled:c,className:W()((t=" nc-".concat(m,"-").concat(h,"-icon "),t.replace(/\/|\\|,/g,"")||t),"moreButton-component",{"button-primary":"button_main"==i}),onClick:function(){return!c&&n.setState({show:!y})},tabindex:u,fieldid:h,"btn-code":h},o||l["page-button-0004"],d.a.createElement("i",{className:"arrow icon iconfont ".concat("button_main"==i?"button-primary":""," ").concat(y?"icon-hangcaozuoxiangshang1":"icon-hangcaozuoxiala1")})),d.a.createElement("span",{className:W()({"mores-sanjiao":y,"mores-sanjiao mores-sanjiao-hide":!y})}),d.a.createElement("div",{fieldid:Object(f.getSysFieldid)("".concat(h,"_btn_list")),className:y?"mores-list-wrapper":"mores-list-wrapper mores-list-hide-wrapper",style:{maxWidth:"1024px",whiteSpace:"nowrap"},"btn-code":h},d.a.createElement(ve,{data:a,specialDisabled:!0,tabindex:u,onClick:this.onClick}))))}}])&&Oe(t.prototype,n),r&&Oe(t,r),o}(u.Component);function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e,t){return(Ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ae(e);if(t){var a=Ae(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return De(this,n)}}function De(e,t){return!t||"object"!==Pe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}xe.defaultProps={list:[],popPlacement:"bottomRight"},n(1872);var Ie=function(e){return e.replace(/\/|\\|,/g,"")||e},Me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ne(e,t)}(o,e);var t,n,r,a=Te(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=a.call(this)).onClick=function(t){var n=e.props.dividerBtn,r=t.key,a=t.item.props.children;e.props.onClick({key:r,title:a}),e.setState({visible:!1},(function(){n&&n.querySelector(".btn-right").focus()}))},e.onVisibleChange=function(t){var n=e.props.onVisibleChange;e.setState({visible:t}),n&&n(t)},e.state={visible:!1},e}return t=o,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.list,r=t.title,a=t.disabled,o=t.btncolor,i=t.popContainer,c=t.area,l=t.dropdownType,s=t.tabindex,u=void 0===s?0:s,f=t.clskey;n.forEach((function(e){if(!1!==e.visible){var t=!e.children.every((function(e){return!1===e.visible}));0==e.children.length&&(t=!1),e.visible=t}e.children.forEach((function(t){t.topParentCode=e.parentCode||t.parentCode}))}));var h=n.visible;return!1!==h&&(h=!n.every((function(e){return!1===e.visible}))),0===n.length&&(h=!1),!1!==h?d.a.createElement(p.Dropdown,{trigger:["click"],overlay:d.a.createElement(ve,{data:n,tabindex:u,onClick:this.onClick,onVisibleChange:this.onVisibleChange}),animation:"slide-up",onVisibleChange:this.onVisibleChange,overlayClassName:W()("dropdown-component-list-wrapper",this.props.className),getPopupContainer:function(){return i||document.body}},e.props.children?d.a.createElement("span",null,e.props.children):d.a.createElement(p.Button,{fieldid:f,"btn-code":f,disabled:a,className:W()({"dropdown-component":r,"dropdown-arrow":!r,"my-dropdown-buttons-main-wrapper":l,"button-primary":"button_main"==o}),tabindex:u},r,e.state.visible?d.a.createElement("i",{className:W()("arrow iconfont icon-hangcaozuoxiangshang1",Ie(" nc-".concat(c,"-").concat(f,"-icon ")),{"button-primary":"button_main"==o})}):d.a.createElement("i",{className:W()("arrow iconfont icon-hangcaozuoxiala1",Ie(" nc-".concat(c,"-").concat(f,"-icon ")),{"button-primary":"button_main"==o})}))):null}}])&&_e(t.prototype,n),r&&_e(t,r),o}(u.Component);function Re(e){return e.split(",").map((function(e){return e.toLowerCase().replace(/ /g,"").replace(/( |^)[a-z]|\+[a-z]/g,(function(e){return e.toUpperCase()}))})).join(",")}function Be(e){var t=e.callBack,n=e.buttonInfo,r=e.e,a=e.keyMapItem;document.activeElement&&document.activeElement.blur();var o=setTimeout((function(){a?t(n.key,r,a):t(n.key),clearTimeout(o)}),50)}function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ue(e);if(t){var a=Ue(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ve(this,n)}}function Ve(e,t){return!t||"object"!==Ke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ue(e){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var We=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(o,e);var t,n,r,a=qe(o);function o(){return Fe(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props,t=e.keyboard,n=e.title,r=e.children,a=e.disabled,o=e.delayShow;return t&&!0!==a?d.a.createElement(p.Tooltip,{key:"ss",placement:"top",inverse:!0,overlay:"".concat(n||"","  (").concat(Re(t),")"),trigger:["hover"],className:"btn-helper-overlay",onMouseOver:function(e){e.target.className&&e.target.className.includes("u-loading-backdrop")&&(e.stopPropagation(),e.preventDefault())},onMouseOut:function(){var e=document.querySelector(".btn-helper-overlay");e&&(e.style.display="none")},delayShow:o},r):r}}])&&Le(t.prototype,n),r&&Le(t,r),o}(u.Component);function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ze(){return(ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ze(e,t){return(Ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qe(e);if(t){var a=Qe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Xe(this,n)}}function Xe(e,t){return!t||"object"!==Ye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1874);var $e=function(e){return e.replace(/\/|\\|,/g,"")||e},et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ze(e,t)}(o,e);var t,n,r,a=Ge(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).onSwitchMenu=function(e){t.setState({visible:e})},t.state={showMenu:!1,visible:!1},t}return t=o,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t._key,r=t.title,a=t.list,o=t.btncolor,i=t.disabled,c=t.area,l=t.isenable,s=t.uploadConfig,u=t.visible,h=t.dividerType,m=t.tabindex,y=void 0===m?0:m,b=t.keyboard;a.forEach((function(e){if(!1!==e.visible){var t=!e.children.every((function(e){return!1===e.visible}));0==e.children.length&&(t=!1),e.visible=t}}));var v=a.visible;!1!==v&&(v=!a.every((function(e){return!1===e.visible}))),0===a.length&&(v=!1);var g,k,S,O,w=W()($e(" nc-".concat(c,"-btn-").concat(n," "))),C=W()({" empty btn-left ":!v," btn-left divider-main-button ":v}),E=W()({" my-divider-buttons-main-wrapper ":h||"button_main"==o}),j=W()((g={},k=" upload-btn-".concat(n," "),S=Object(f.isObj)(s),k in g?Object.defineProperty(g,k,{value:S,enumerable:!0,configurable:!0,writable:!0}):g[k]=S,g)),x=d.a.createElement(p.Button,{fieldid:n,"btn-code":n,disabled:!l||i,className:W()(w,C,E,j),onClick:function(){e.props.onClick({key:n,title:r})},tabindex:y},r);return d.a.createElement("div",{className:"divider-button-wrapper",ref:function(t){e.dividerBtn=V.a.findDOMNode(t)}},(O=this.dividerBtn,u&&v?d.a.createElement("div",{className:"sawadika"},d.a.createElement("div",{className:"hover-divider-btn-left-wrapper"},d.a.createElement("div",{className:"my-divider-icon-main-wrapper"},d.a.createElement(We,{title:r,keyboard:b,disabled:!l||i,delayShow:500},Object(f.isObj)(s)?d.a.createElement("span",{className:W()(C),onClick:function(t){e.setState({visible:!1}),t.stopPropagation()}},d.a.createElement(p.Upload,ze({showUploadList:!1},s),x)):d.a.createElement(p.Button,{fieldid:n,"btn-code":n,disabled:!l||i,className:W()(w,C,E),onClick:function(){e.setState({visible:!1}),!l&&i||e.props.onClick({key:n,title:r})},tabindex:y},r)))),d.a.createElement(Me,{list:a,area:c,btncolor:o,popContainer:e.props.popContainer,onVisibleChange:e.onSwitchMenu,onClick:e.props.onClick,tabindex:y,className:W()(" ".concat(c,"-").concat(n,"-panel fieldid_").concat(n,"_btn_list")),dividerBtn:O},Object(f.isObj)(s)?d.a.createElement("span",{className:W()(C),onClick:function(e){e.stopPropagation()}},d.a.createElement(p.Upload,ze({showUploadList:!1},s),x)):d.a.createElement(p.Button,{fieldid:n,"btn-code":n,disabled:!l||i,className:W()(C,E),onClick:function(t){t.stopPropagation(),!l&&i||e.props.onClick({key:n,title:r})}},r),d.a.createElement(p.Button,{fieldid:"".concat(n,"-arrow"),className:W()("btn-right",{"my-divider-buttons-main-wrapper":h||"button_main"==o}),style:{borderRadius:"0px 3px 3px 0px"},onClick:e.onSwitchMenu,tabindex:y},e.state.visible?d.a.createElement("i",{className:W()("arrow iconfont icon-hangcaozuoxiangshang1",$e(" nc-".concat(c,"-").concat(n,"-icon ")),{"my-divider-buttons-main-wrapper":"button_main"==o})}):d.a.createElement("i",{className:W()("arrow iconfont icon-hangcaozuoxiala1",$e(" nc-".concat(c,"-").concat(n,"-icon ")),{"my-divider-buttons-main-wrapper":"button_main"==o})})))):u&&!v?Object(f.isObj)(s)?d.a.createElement(p.Upload,ze({showUploadList:!1},s),x):d.a.createElement(We,{title:r,keyboard:b,disabled:!l||i,delayShow:500},x):""))}}])&&Je(t.prototype,n),r&&Je(t,r),o}(u.Component);function tt(e){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function at(){return(at=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ot(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function it(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ut(e);if(t){var a=ut(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return st(this,n)}}function st(e,t){return!t||"object"!==tt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}et.defaultProps={title:"分割线按钮",visible:!0,list:[]},n(1873);var dt=function(e){return e.replace(/\/|\\|,/g,"")||e},ft=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}(o,e);var t,n,r,a=lt(o);function o(){var e;ot(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).getTipKeybodard=function(t){if("underline"===e.props.tipKeybodard&&t.keyboard&&!0!==t.disabled){var n=t.keyboard.split("+");return[t.title,"(",d.a.createElement("span",{className:"text-decoration-underline"},n?n[n.length-1].toUpperCase():t.keyboard),")"]}return t.title},e.renderButtonGroup=function(t){var n=e.props,r=n.area,a=n.tabindex,o=void 0===a?-1:a;return t.filter((function(e){return!1!==e.visible})).map((function(t){switch(t.type){case"general_btn":var n="button_main"==t.btncolor?"button-primary":null,a=d.a.createElement(We,{title:t.title,keyboard:t.keyboard,disabled:t.disabled,delayShow:500},d.a.createElement(p.Button,{key:t.key,disabled:t.disabled,className:n,onClick:function(){return e.props.onClick({key:t.key,title:t.title})},tabindex:o,fieldid:t.key,"btn-code":t.key},e.getTipKeybodard(t)));return t.uploadConfig?d.a.createElement(p.Upload,at({showUploadList:!1},t.uploadConfig,{className:dt(t.parentCode?" nc-".concat(t.area,"-btn-").concat(t.parentCode,"-").concat(t.key," "):" nc-".concat(t.area,"-btn-").concat(t.key," "))}),a):a;case"dropdown":return d.a.createElement(Me,{list:t.children,title:t.title,area:r,btncolor:t.btncolor,disabled:t.disabled,dropdownType:t.dropdownType,popContainer:e.props.popContainer,onClick:e.props.onClick,tabindex:o,clskey:t.key,className:W()(" nc-".concat(t.area,"-").concat(t.key,"-panel fieldid_").concat(t.key,"_btn_list"))})}}))},e.getButtonStatus=function(e){var t=[];if(e&&e.length){var n,r=nt(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;!1===a.visible&&t.push(a)}}catch(e){r.e(e)}finally{r.f()}}return t.length===e.length},e}return t=o,(n=[{key:"render",value:function(){var e=this.getButtonStatus(this.props.list),t=this.props.list,n=t.filter((function(e){return!1!==e.visible}));return d.a.createElement("div",{className:W()({"buttonGroup-component":!0,singleGroup:n&&n.length&&1===n.length}),style:{marginLeft:e?0:"6px"}},d.a.createElement(p.ButtonGroup,{popContainer:this.props.popContainer},this.renderButtonGroup(t,this.props.buttonLimit)))}}])&&it(t.prototype,n),r&&it(t,r),o}(u.Component);function pt(e){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ht(){return(ht=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function mt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bt(e,t){return(bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=kt(e);if(t){var a=kt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return gt(this,n)}}function gt(e,t){return!t||"object"!==pt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kt(e){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1871);var St=p.Modal.Header,Ot=p.Modal.Title,wt=p.Modal.Body,Ct=p.Modal.Footer,Et=-1,jt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bt(e,t)}(o,e);var t,n,r,a=vt(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).callBackErrorHandle=function(e,n){try{e()}catch(e){t.close(),console.error("".concat(n,":").concat(e))}},t.cancelClick=function(){Et++;var e=t.props.bcFn;e[Et]&&"function"==typeof e[Et]&&(t.callBackErrorHandle(e[Et],"PromptBox的取消回调报错"),t.clear()),t.close()},t.beSureClick=function(){Et++;var e=t.props.bsFn;e[Et]&&"function"==typeof e[Et]&&(t.callBackErrorHandle(e[Et],"PromptBox的确认回调报错"),t.clear()),t.close()},t.close=function(){t.setState({showModal:!1})},t.onExited=function(){var e=document.getElementsByClassName("prompt-box-project")[0];if(e){V.a.unmountComponentAtNode(e),clearTimeout(t.closeTimer),t.closeTimer=null;var n=e&&e.parentElement;n&&n.removeChild(e)}},t.closeBtnClick=function(){Et++;var e=t.props.bCloseFn;e[Et]&&"function"==typeof e[Et]&&(e[Et](),t.clear()),t.close()},t.clear=function(){var e=t.props,n=e.bsFn,r=e.bcFn,a=e.bCloseFn;n[Et]=null,r[Et]=null,a[Et]=null},t.state={showModal:t.props.show||!0,json:{}},t}return t=o,(n=[{key:"UNSAFE_componentWillMount",value:function(){var e=this;Object(f.getMultiLang)({moduleId:"container_toast",callback:function(t,n){n&&e.setState({json:t},(function(){}))}})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({showModal:e.show||this.props.show||!1})}},{key:"render",value:function(){var e=this,t=this.state.json,n=this.props,r=n.content,a=n.title,o=n.color,i=void 0===o?"success":o,c=n.noFooter,l=void 0!==c&&c,s=n.closeByClickBackDrop,u=void 0!==s&&s,h=n.noCancelBtn,m=void 0!==h&&h,y=n.hasCloseBtn,b=void 0!==y&&y,v=n.beSureBtnName,g=void 0===v?t["0005"]:v,k=n.cancelBtnName,S=void 0===k?t["0006"]:k,O=n.zIndex,w=void 0===O?200:O,C=n.hotKeyboard,E=void 0===C||C,j=mt(n,["content","title","color","noFooter","closeByClickBackDrop","noCancelBtn","hasCloseBtn","beSureBtnName","cancelBtnName","zIndex","hotKeyboard"]);a||("success"===i?a=t["0001"]:"info"===i?a=t["0002"]:"warning"===i?a=t["0003"]:"danger"===i&&(a=t["0004"]));var x=Date.now()+Object(f.getSafeRandom)(),P={id:x,zIndex:w};return d.a.createElement(p.Modal,ht({show:this.state.showModal,onHide:this.closeBtnClick.bind(this),className:"prompt-box ".concat(x),backdrop:!!u||"static",indexInfo:P,ref:function(t){return e.Modal=t},onExited:this.onExited},j,{fieldid:this.props.fieldid?this.props.fieldid:"simpleConfirm"}),E&&!l&&d.a.createElement(p.HotKeys,{keyMap:{sureBtnHandler:[p.HotKeys.USUAL_KEYS.MODAL_CONFIRM[0],"enter"],cancelBtnHandler:p.HotKeys.USUAL_KEYS.MODAL_CALCEL},handlers:{sureBtnHandler:function(){e.Modal&&e.Modal.isTopModal()&&(console.log("promptbox sureBtnHandler 事件回调"),e.beSureClick())},cancelBtnHandler:function(){e.Modal&&e.Modal.isTopModal()&&(console.log("promptbox cancelBtnHandler 事件回调"),e.cancelClick())}},className:"promptbox-hotkeys-wrapper",focused:!0,attach:document.body,display:"inline"}),d.a.createElement(St,{closeButton:!!b},d.a.createElement("span",{fieldid:Object(f.getSysFieldid)("".concat(t["0007"],"_title"))},t["0007"])),d.a.createElement(wt,null,d.a.createElement(Ot,{className:"prompt-box-body-title"},function(e){var t="icon-wancheng";"danger"===e?t="icon-shibai":"warning"===e?t="icon-zhuyi1":"info"===e&&(t="icon-tixing");var n="iconfont ".concat(t," ").concat(e);return d.a.createElement("span",{className:n})}(i)," ",d.a.createElement("div",{className:"title-text"},a)),d.a.createElement("div",{className:"prompt-box-body-content"},r)),!l&&d.a.createElement(Ct,null,d.a.createElement(p.Tooltip,{placement:"top",inverse:!0,overlay:"".concat(g,"  (").concat(p.HotKeys.USUAL_KEYS.MODAL_CONFIRM,")"),trigger:["hover","focus"],className:"model-helper-overlay"},d.a.createElement(p.Button,{onClick:this.beSureClick,colors:"primary",fieldid:"confirm"},g,"(",d.a.createElement("span",{className:"text-decoration-underline"},"Y"),")")),!m&&d.a.createElement(p.Tooltip,{placement:"top",inverse:!0,overlay:"".concat(S,"  (").concat(p.HotKeys.USUAL_KEYS.MODAL_CALCEL,")"),trigger:["focus","hover"],className:"model-helper-overlay"},d.a.createElement(p.Button,{onClick:this.cancelClick,shape:"border",fieldid:"cancel"},S,"(",d.a.createElement("span",{className:"text-decoration-underline"},"N"),")"))))}}])&&yt(t.prototype,n),r&&yt(t,r),o}(u.Component),xt=[],Pt=[],_t=[],Nt=function(e){var t;(e=e||{}).container?e.container.body&&(t=e.container.body):t=document.body;var n=document.createElement("section");n.className="prompt-box-project",xt.push(e.beSureBtnClick),Pt.push(e.cancelBtnClick),_t.push(e.closeBtnClick),t.appendChild(n),V.a.render(d.a.createElement(jt,ht({},e,{bsFn:xt,bcFn:Pt,bCloseFn:_t,container:n})),n)};function Tt(e){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dt(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function At(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function It(e,t){return(It=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Bt(e);if(t){var a=Bt(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Rt(this,n)}}function Rt(e,t){return!t||"object"!==Tt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bt(e){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Kt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&It(e,t)}(o,e);var t,n,r,a=Mt(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).handlePassWordChange=function(e){t.setState({passWord:e})},t.handleSignIn=function(){var e,n=(e=regeneratorRuntime.mark((function e(n,r){var a,o,i,c,l,s,u,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props,o=a.resolve,i=a.lang,e.next=3,new Promise((function(e){Object(f.ajax)({url:"/nccloud/baseapp/ncckeyfunc/getpubkey.do",loading:!1,success:function(t){var n=t.data;e(n)},error:function(e){console.log("后端报错",e)}})}));case 3:return c=e.sent,l=c.exponent,s=c.modulus,u=f.RSAUtils.getKeyPair(l,"",s),r=f.RSAUtils.encryptedString(u,r),e.next=10,new Promise((function(e){Object(f.ajax)({url:"/nccloud/baseapp/ncckeyfunc/pwdverify.do",loading:!1,data:{encodePwd:r,usercode:n},success:function(t){var n=t.data;e(n)},error:function(e){console.log("后端报错",e)}})}));case 10:(d=e.sent)||Object(f.toast)({content:"",color:"danger",groupOperation:!0,isNode:!0,TextArr:[i["page-button-0010"],i["page-button-0011"],i["page-button-0012"]],groupOperationMsg:[i["page-button-0013"]]}),o(d);case 13:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Dt(o,r,a,i,c,"next",e)}function c(e){Dt(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(e,t){return n.apply(this,arguments)}}(),t.state={passWord:""},t}return t=o,(n=[{key:"render",value:function(){var e=this.state.passWord,t=this.props.lang;return d.a.createElement("div",null,d.a.createElement("div",{style:{display:"flex",alignItems:"center"}},d.a.createElement("span",{style:{width:"52px"}},"".concat(t["page-button-0006"],":")),d.a.createElement(p.Input,{style:{width:"200px"},value:e,onChange:this.handlePassWordChange,placeholder:t["page-button-0007"],type:"password"})))}}])&&At(t.prototype,n),r&&At(t,r),o}(u.Component);function Ft(e){return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(n),!0).forEach((function(t){qt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vt(){return(Vt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ut(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Wt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}function Wt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Yt(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function zt(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Yt(o,r,a,i,c,"next",e)}function c(e){Yt(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Jt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gt(e,t,n){return t&&Zt(e.prototype,t),n&&Zt(e,n),e}function Xt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qt(e,t)}function Qt(e,t){return(Qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nn(e);if(t){var a=nn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return en(this,n)}}function en(e,t){return!t||"object"!==Ft(t)&&"function"!=typeof t?tn(e):t}function tn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nn(e){return(nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1870);var rn=p.Menu.Item,an=f.ViewModel.getGlobalStorage,on=function(e,t){if(!e)return null;for(var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;e&&!n.call(e,t);)e=e.parentElement;return e},cn=function(e){return e.replace(/\/|\\|,/g,"")||e},ln=function(e){Xt(n,e);var t=$t(n);function n(e){var r;return Jt(this,n),(r=t.call(this,e)).getCurrentBtnIsKeyFunc=function(e){var t=e.items,n=e.currentKey;t.forEach((function(e){var t=e.children,a=e.key,o=e.iskeyfunc;!Object(f.isUndefined)(t)&&t.length?(n===a&&(r.iskeyfuncFlag=o),r.getCurrentBtnIsKeyFunc({items:t,currentKey:n})):n===a&&(r.iskeyfuncFlag=o)}))},r.onClick=function(){var e=zt(regeneratorRuntime.mark((function e(t){var n,a,o,i,c,l,s,u,p,h,m,y,b,v,g,k,S;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.state.lang,a=r.props,o=a._this,i=a._this.billinfo,c=void 0===i?{}:i,l=a.modalRelation,s=a.onClick,u=a.notInterruptCode,p=a.withAutoFocus,h=t.key,m=t.item,r.getCurrentBtnIsKeyFunc({items:[m],currentKey:h}),y=r.iskeyfuncFlag,console.log("ca认证",y),!y){e.next=15;break}return r.iskeyfuncFlag=null,b=c.appcode||f.pageTo.getAppCode(),v=JSON.parse(an("localStorage","STOREFORINFODATA")),g=v.userCode,e.next=12,new Promise((function(e){Object(f.ajax)({url:"/nccloud/baseapp/ncckeyfunc/authentype.do",loading:!1,data:{appcode:b,appbtncode:h},success:function(t){switch(t.data){case"0":return void Nt({color:"info",hotKeyboard:!0,title:n["page-button-0014"],content:d.a.createElement(Kt,{ref:function(e){return r.signInSelf=e},lang:n,resolve:e}),noFooter:!1,noCancelBtn:!1,beSureBtnName:n["page-button-0008"],cancelBtnName:n["page-button-0009"],beSureBtnClick:function(){var e=r.signInSelf,t=e.handleSignIn,n=e.state.passWord;t(g,n)},cancelBtnClick:function(){console.log("Cancel")}});case"1":if(Object(f.isFunction)(window.superSign)){var a=window.superSign(String(1e3*Object(f.getSafeRandom)()+Object(f.getSafeRandom)()),g,!0,!0),o=a.status,i=a.msg;switch(o){case 0:e(!0);break;case 1:Object(f.toast)({content:"",color:"danger",groupOperation:!0,isNode:!0,TextArr:[n["page-button-0010"],n["page-button-0011"],n["page-button-0012"]],groupOperationMsg:[i]}),e(!1)}}return;case"2":return void e(!0)}},error:function(e){console.log("后端报错",e)}})}));case 12:if(e.sent){e.next=15;break}return e.abrupt("return");case 15:if(!1!==X(o,"beforeBtnClick")(t.key,{output:o.output})){e.next=17;break}return e.abrupt("return",!1);case 17:l&&(S=document.querySelector(".".concat(l)),k=S.querySelector(".u-modal-body")||S.querySelector(".u-modal-content")),l&&k&&k.focus(),u.includes(t.key)?s(t.key):Be({callBack:s,buttonInfo:t,params:tn(r),withAutoFocus:p}),setTimeout((function(){l&&k&&k.focus()}),300),X(o,"afterBtnClick")(t.key,{output:o.output});case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.keyboardHandle=function(){var e=zt(regeneratorRuntime.mark((function e(t,n){var a,o,i,c,l,s,u,p,h,m,y,b,v,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r.state.lang,o=r.props,i=o._this,c=o._this.billinfo,l=void 0===c?{}:c,o.modalRelation,s=o.onClick,u=o.notInterruptCode,p=o.withAutoFocus,h=t.key,m=t.item,r.getCurrentBtnIsKeyFunc({items:[m],currentKey:h}),y=r.iskeyfuncFlag,console.log("ca认证",y),!y){e.next=15;break}return r.iskeyfuncFlag=null,b=l.appcode||f.pageTo.getAppCode(),v=JSON.parse(an("localStorage","STOREFORINFODATA")),g=v.userCode,e.next=12,new Promise((function(e){Object(f.ajax)({url:"/nccloud/baseapp/ncckeyfunc/authentype.do",loading:!1,data:{appcode:b,appbtncode:h},success:function(t){switch(t.data){case"0":return void Nt({color:"info",hotKeyboard:!0,title:a["page-button-0014"],content:d.a.createElement(Kt,{ref:function(e){return r.signInSelf=e},lang:a,resolve:e}),noFooter:!1,noCancelBtn:!1,beSureBtnName:a["page-button-0008"],cancelBtnName:a["page-button-0009"],beSureBtnClick:function(){var e=r.signInSelf,t=e.handleSignIn,n=e.state.passWord;t(g,n)},cancelBtnClick:function(){console.log("Cancel")}});case"1":if(Object(f.isFunction)(window.superSign)){var n=window.superSign(String(1e3*Object(f.getSafeRandom)()+Object(f.getSafeRandom)()),g,!0,!0),o=n.status,i=n.msg;switch(o){case 0:e(!0);break;case 1:Object(f.toast)({content:"",color:"danger",groupOperation:!0,isNode:!0,TextArr:[a["page-button-0010"],a["page-button-0011"],a["page-button-0012"]],groupOperationMsg:[i]}),e(!1)}}return;case"2":return void e(!0)}},error:function(e){console.log("后端报错",e)}})}));case 12:if(e.sent){e.next=15;break}return e.abrupt("return");case 15:if(!1!==X(i,"beforeBtnClick")(t.key,{output:i.output})){e.next=17;break}return e.abrupt("return",!1);case 17:f.ViewModel.btnHotKey=n,u.includes(t.key)?s(t.key):Be({callBack:s,buttonInfo:t,params:tn(r),withAutoFocus:p}),f.ViewModel.btnHotKey="",X(i,"afterBtnClick")(t.key,{output:i.output});case 21:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r.getKeyMapsAndHandlers=function(e){var t={},n={},a=r.props,o=a.hotKeysMap,i=a.hotKeysEnabled,c=a.modalRelation,l=a._this,s=a.ignoreHotkeyCode,u=void 0===s?[]:s,d=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.forEach((function(t){if(t.key&&t.keyboard){var a=Re(t.keyboard);r[a]=r[a]?r[a]+1:1}t.children&&e(t.children,!1!==t.visible&&n,r)})),r}(e);return i&&function e(a,i){return a.forEach((function(a){var s=o[a.key];if(a.children&&e(a.children,!1!==a.visible&&i),a.keyboard&&d[Re(a.keyboard)]>1&&(!1===a.visible||!0===a.disabled||!1===a.isenable||!1===i))return!1;if(-1!==u.indexOf(a.key)&&delete a.keyboard,-1==u.indexOf(a.key)&&(s||a.keyboard)){var f=a.keyboard||s.key,p=f.split(",").length>1;t[a.key]=p?f.split(","):f,n[a.key]=function(){var e=l&&l.output&&l.output.findFocusModuleId();if(e&&a.pageareacode&&e!==a.pageareacode||a.pageareacode&&null==e)return!1;if((document.querySelector(".disabled-bg-btn")||top.document.querySelector(".disabled-bg-btn"))&&!c)return!1;if(c){var t=document.querySelector(".".concat(c)),n=t&&t.contains(document.activeElement)&&t!==document.activeElement;if(!t||!t.contains(document.activeElement)||!n)return!1}document.querySelector(".u-loading-backdrop.full-screen")||r.handleSpecialBtn(a)||!1===a.visible||!0===a.disabled||!1===a.isenable||!1===i||r.keyboardHandle({key:a.key,title:a.title,item:a},f)}}}))}(e,!0),{keyMap:t,handlers:n}},r.getTipKeybodard=function(e){if("underline"===r.props.tipKeybodard&&e.keyboard&&!0!==e.disabled){var t=e.keyboard.split("+");return[e.title,"(",d.a.createElement("span",{className:"text-decoration-underline"},t?t[t.length-1].toUpperCase():e.keyboard),")"]}return e.title},r.renderButtons=function(){var e,t=r.props,n=t.area,a=t._this,o=t.hotKeysEnabled,i=t.tipKeybodard,c=r.state.lang,l=a.myState.buttons||[],s=[],u=Ut(l);try{var h=function(){var t=e.value;t.area&&t.area.split(",").map((function(e){return(e=e.trim())===n&&s.push(t),e}))};for(u.s();!(e=u.n()).done;)h()}catch(e){u.e(e)}finally{u.f()}s.sort((function(e,t){return Number(e.order)-Number(t.order)})),a.myState.appButtons[n]=s;var m=r.getKeyMapsAndHandlers(s,n);return d.a.createElement("span",{className:"button-app-wrapper ".concat(n?n+"-button-app-wrapper":"")},d.a.createElement(p.HotKeys,{display:"inline-block",keyMap:m.keyMap,handlers:m.handlers,enabled:o,focused:!0},s.map((function(e){if(!1!==e.visible)switch(e.type){case"general_btn":var t=d.a.createElement(We,{title:e.title,keyboard:e.keyboard,disabled:e.disabled,delayShow:500},d.a.createElement(p.Button,{disabled:e.disabled,className:"button_main"==e.btncolor?"button-primary":"",onClick:function(){return r.onClick({key:e.key,title:e.title,item:e})},tabindex:r.props.tabindex,fieldid:e.key,"btn-code":e.key},r.getTipKeybodard(e))),o=d.a.createElement(We,{title:e.title,keyboard:e.keyboard,delayShow:500},d.a.createElement(p.Button,{disabled:e.disabled,className:"button_main"==e.btncolor?"button-primary refresh-component":"refresh-component",onClick:function(){return r.onClick({key:e.key,title:e.title,item:e})},tabindex:r.props.tabindex,fieldid:e.key,"btn-code":e.key},d.a.createElement("i",{className:"iconfont icon-shuaxin1"})));return e.title||e.parentCode?Object(f.isObj)(e.uploadConfig)&&!e.disabled?d.a.createElement(p.Upload,Vt({showUploadList:!1},e.uploadConfig),d.a.createElement(We,{title:e.title,keyboard:e.keyboard,delayShow:500},d.a.createElement(p.Button,{disabled:e.disabled,className:W()(cn(" nc-".concat(e.area,"-btn-").concat(e.key," ")),{"button-primary upload-btn-wrapper":"button_main"==e.btncolor,"upload-btn-wrapper":"button_main"!=e.btncolor}),onClick:function(){return r.onClick({key:e.key,title:e.title,item:e})},tabindex:r.props.tabindex,fieldid:e.key,"btn-code":e.key},e.title,e.docAmount?"(".concat(e.docAmount,")"):""))):!e.title&&e.parentCode?"":t:o;case"dropdown":return d.a.createElement(Me,{list:e.children,title:e.title,disabled:e.disabled,btncolor:e.btncolor,area:n,dropdownType:e.dropdownType,popContainer:r.props.popContainer,keyboard:e.keyboard,clskey:e.key,onClick:function(t){return r.onClick(Ht(Ht({},t),{},{item:e}))},tabindex:r.props.tabindex,className:"".concat(n,"-").concat(e.key,"-panel fieldid_").concat(e.key,"_btn_list"),delayShow:500});case"buttongroup":return d.a.createElement(ft,{fieldid:e.key,"btn-code":e.key,list:e.children,area:n,_this:a,disabled:e.disabled,visible:!1!==e.visible,buttonLimit:r.props.buttonLimit,popContainer:r.props.popContainer,tipKeybodard:i,clskey:e.key,onClick:function(t){return r.onClick(Ht(Ht({},t),{},{item:e}))},tabindex:r.props.tabindex});case"divider":return d.a.createElement(et,{list:e.children,dividerType:e.dividerType,_key:e.key,area:n,btncolor:e.btncolor,isenable:e.isenable,title:e.title,onClick:function(t){return r.onClick(Ht(Ht({},t),{},{item:e}))},disabled:e.disabled,uploadConfig:e.uploadConfig,popContainer:r.props.popContainer,tabindex:r.props.tabindex,keyboard:e.keyboard});case"more":var l=e.children,s=[];return l.map((function(e){e.children&&e.children.length&&s.push(e)})),s.length?d.a.createElement(xe,{list:s,title:e.title,json:c,btncolor:e.btncolor,disabled:e.disabled,popContainer:r.props.popContainer,onClick:function(t){return r.onClick(Ht(Ht({},t),{},{item:e}))},className:"moreButton-component",tabindex:r.props.tabindex,clskey:e.key,area:e.area}):null;default:return d.a.createElement(We,{title:e.title,keyboard:e.keyboard,delayShow:500},d.a.createElement(p.Button,{btncolor:e.btncolor,disabled:e.disabled,onClick:function(){return r.onClick({key:e.key,title:e.title,item:e})},tabindex:r.props.tabindex,fieldid:e.key,"btn-code":e.key},e.title))}}))))},r.state={json:[],lang:{},intl:null},r.bindWebsocket=!1,r.iskeyfuncFlag=null,r}return Gt(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=this,t=this.props,n=t.area,r=t._this,a=r.myState.buttonsLangJson;if(r.myState.buttonsComponent[n]=this,a.lang)this.setState({json:this.props.json||[],lang:a.lang,intl:a.intl});else{Object(f.getMultiLang)({moduleId:"page-button",callback:function(t,n,a){r.myState.buttonsLangJson={lang:t,intl:a},e.setState({json:e.props.json||[],lang:t,intl:a})}})}}},{key:"UNSAFE_componentWillReceiveProps",value:function(){var e=this.props,t=e.area,n=e._this;this.setState({json:this.props.json||[]}),n.myState.buttonsComponent[t]||(n.myState.buttonsComponent[t]=this)}},{key:"handleSpecialBtn",value:function(e){if(!e||!Object(f.isObj)(e.uploadConfig))return!1;var t=Object(q.findDOMNode)(this);if(!t)return!1;if(e.parentCode){var n=this.props.popContainer||document,r=cn(".nc-".concat(e.area,"-btn-").concat(e.parentCode,"-").concat(e.key)),a=n.querySelector(r),o=t.querySelector(cn(".nc-".concat(e.area,"-").concat(e.topParentCode||e.parentCode,"-icon")));o&&!a&&o.click(),setTimeout((function(){var e=(a=n.querySelector(r))&&a.parentElement.querySelector("input");e&&e.click()}),0)}else{var i=t.querySelector(cn(".nc-".concat(e.area,"-btn-").concat(e.key))),c=i&&i.parentElement.querySelector("input");c&&c.click()}}},{key:"render",value:function(){return this.renderButtons()}}]),n}(u.Component);var sn=function(e){Xt(n,e);var t=$t(n);function n(e){var r;return Jt(this,n),(r=t.call(this,e)).onVisibleChange=function(){r.setState({visible:!r.state.visible})},r.popContentItem=function(e){var t=r.props.onClick,n=d.a.createElement("span",null,d.a.createElement("span",{className:"iconfont icon-tixing"}),"  ",e.popContent);return d.a.createElement(p.Popconfirm,{trigger:"click",placement:"top",content:n,onClose:function(){t(e.key),r.setState({visible:!1})},onCancel:function(){r.setState({visible:!1})},rootClose:!0},d.a.createElement("a",{className:"u-menu-item-title-wrapper row-btn-"+cn(e.key),onClick:function(e){e.stopPropagation()},key:e.key,fieldid:Object(f.getSysFieldid)("".concat(e.key,"_btn")),"btn-code":e.key},e.title))},r.popContentItem1=function(e,t){return e.popContent?r.popContentItem(e,t):d.a.createElement("span",{className:"u-menu-item-title-wrapper","btn-code":e.key,onClick:function(t){r.onClick({key:e.key,e:t,item:e}),r.setState({visible:!1})}},e.title)},r.renderMenu=function(e){return d.a.createElement(p.Menu,null,e.map((function(e){return d.a.createElement(rn,{key:e.key,disabled:e.disabled},e.uploadConfig?d.a.createElement("span",{onClick:function(e){e.stopPropagation()}},d.a.createElement(p.Upload,Vt({showUploadList:!1},e.uploadConfig),e.title)):r.popContentItem1(e,"list"))})))},r.renderMoreList=function(e,t){var n=r.props.popContainer,a=r.state.lang;return e.length?d.a.createElement(p.Dropdown,{trigger:["click"],visible:r.state.visible,onVisibleChange:r.onVisibleChange,overlay:d.a.createElement(p.Menu,null,e.map((function(e){return d.a.createElement(rn,{fieldid:e.key,"btn-code":e.key,className:"opration-more-list-item-wrapper row-btn-"+cn(e.key),key:e.key},e.uploadConfig?d.a.createElement("span",{"btn-code":e.key,onClick:function(e){e.stopPropagation()},className:"".concat("js-upload","-").concat(t)},d.a.createElement(p.Upload,Vt({showUploadList:!1},e.uploadConfig),e.title)):r.popContentItem1(e,"list"))}))),animation:"slide-up",overlayClassName:"dropdown-component-list fieldid_more_btn_list",getPopupContainer:function(){return n||document.body}},d.a.createElement("a",{fieldid:Object(f.getSysFieldid)("more_btn"),className:"row-more "+e.reduce((function(e,t){return e=e+" row-btn-"+cn(t.key)}),""),onClick:r.onVisibleChange},a["page-button-0002"]||"更多")):""},r.renderLanglist=function(e,t){var n=r.props.popContainer;return e.length?d.a.createElement(p.Tooltip,{trigger:"click",placement:"leftTop",visible:r.state.visible,rootClose:!0,className:"dropdown-component-list fieldid_more_btn_list opration-tooltip-button",container:function(){return n||document.body},overlay:d.a.createElement("ul",null,e.map((function(e){return d.a.createElement("li",{fieldid:Object(f.getSysFieldid)(e.key),"btn-code":e.key,className:"opration-more-list-item-wrapper row-btn-"+cn(e.key),key:e.key},e.uploadConfig?d.a.createElement("span",{"btn-code":e.key,onClick:function(e){e.stopPropagation()},className:"".concat("js-upload","-").concat(t)},d.a.createElement(p.Upload,Vt({showUploadList:!1},e.uploadConfig),e.title)):r.popContentItem1(e,"list"))})))},d.a.createElement("a",{fieldid:Object(f.getSysFieldid)("more_btn"),className:"row-more "+e.reduce((function(e,t){return e=e+" row-btn-"+cn(t.key)}),"")+" icon-gengduo1 iconfont",onClick:r.onVisibleChange})):""},r.getHotkeyTriggerFlag=function(e){var t=null,n=Object(q.findDOMNode)(tn(r));if(!n)return!1;if(document.querySelector(".u-loading-backdrop.full-screen"))return!1;var a=n.querySelector(".row-btn-"+cn(e));if(!a)return!1;var o=on(n,".u-table-fixed-right"),i=".tree-table-col-selected,.table-row-selected,.editTable-selected-row,.cardTable-selected-row,.simpleTable-selected-row,.nctable-selected-row";o?t=o.querySelector(i):on(a,".u-table-row-fixed-columns-in-body")||(t=on(n,i));if(!t)return!1;var c="hidden"!==getComputedStyle(a).visibility;return!!(t.contains(a)&&c)&&a},r.getKeyMapsAndHandlers=function(e){var t=e.data,n=e.rowIndex,a={},o={},i=r.props,c=i.hotKeysMap,l=i.hotKeysEnabled,s=i.modalRelation,u=i.onClick,d=i._this,f=i.ignoreHotkeyCode,p=void 0===f?[]:f,h=i.notInterruptCode,m=i.withAutoFocus;return l&&function e(t){return t.forEach((function(t){var i=c[t.key];if(-1==p.indexOf(t.key)&&(i||t.keyboard)){var l=t.keyboard||i.key,f=l.split(",").length>1;a[t.key]=f?l.split(","):l,o[t.key]=function(e){var a=r.getHotkeyTriggerFlag(t.key),o=d&&d.output&&d.output.findFocusModuleId();if(o&&t.pageareacode&&o!==t.pageareacode||t.pageareacode&&null==o)return!1;if((document.querySelector(".disabled-bg-btn")||top.document.querySelector(".disabled-bg-btn"))&&!s)return!1;if(s){var i=document.querySelector(".".concat(s)),c=i&&i.contains(document.activeElement)&&i!==document.activeElement;if(!i||!i.contains(document.activeElement)||!c)return!1}if(a&&!1!==t.visible)if(t.popContent)a.click();else if(a.className.includes("row-more")){if(t.uploadConfig){var f="".concat("js-upload","-").concat(n),p=document.querySelector(".".concat(f," input"));p?p&&p.click():(a.click(),setTimeout((function(){(p=document.querySelector(".".concat(f," input")))&&p.click(),a.click()})))}h.includes(t.key)?u(t.key,e,l):Be({callBack:u,buttonInfo:t,e:e,keyMapItem:l,withAutoFocus:m})}else h.includes(t.key)?u(t.key,e,l):Be({callBack:u,buttonInfo:t,e:e,keyMapItem:l,withAutoFocus:m})}}t.children&&e(t.children)}))}(t),{keyMap:a,handlers:o}},r.onClick=function(){var e=zt(regeneratorRuntime.mark((function e(t){var n,a,o,i,c,l,s,u,p,h,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.state.lang,a=r.props,o=a._this.billinfo,i=void 0===o?{}:o,c=a.onClick,l=t.key,s=t.e,u=t.item,!(void 0===u?{}:u).iskeyfunc){e.next=11;break}return p=i.appcode||f.pageTo.getAppCode(),h=JSON.parse(an("localStorage","STOREFORINFODATA")),m=h.userCode,e.next=8,new Promise((function(e){Object(f.ajax)({url:"/nccloud/baseapp/ncckeyfunc/authentype.do",loading:!1,data:{appcode:p,appbtncode:l},success:function(t){switch(t.data){case"0":return void Nt({color:"info",hotKeyboard:!0,title:n["page-button-0014"],content:d.a.createElement(Kt,{ref:function(e){return r.signInSelf=e},lang:n,resolve:e}),noFooter:!1,noCancelBtn:!1,beSureBtnName:n["page-button-0008"],cancelBtnName:n["page-button-0009"],beSureBtnClick:function(){var e=r.signInSelf,t=e.handleSignIn,n=e.state.passWord;t(m,n)},cancelBtnClick:function(){console.log("Cancel")}});case"1":if(Object(f.isFunction)(window.superSign)){var a=window.superSign(String(1e3*Object(f.getSafeRandom)()+Object(f.getSafeRandom)()),m,!0,!0),o=a.status,i=a.msg;switch(o){case 0:e(!0);break;case 1:Object(f.toast)({content:"",color:"danger",groupOperation:!0,isNode:!0,TextArr:[n["page-button-0010"],n["page-button-0011"],n["page-button-0012"]],groupOperationMsg:[i]}),e(!1)}}return;case"2":return void e(!0)}},error:function(e){console.log("后端报错",e)}})}));case 8:if(e.sent){e.next=11;break}return e.abrupt("return");case 11:c(l,s);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.state={visible:!1,index:0,lang:{},intl:null,json:[]},r.bindWebsocket=!1,r.uuid="xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Object(f.getSafeRandom)()|0;return("x"==e?t:3&t|8).toString(16)})),r}return Gt(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=this,t=this.props,n=t.oprationIndex,r=t._this,a=t.area,o=r.myState.buttonsLangJson;if(r.myState.buttonsComponent[a]=r.myState.buttonsComponent[a]||{},r.myState.buttonsComponent[a]._isOperateButton=!0,r.myState.buttonsComponent[a][this.uuid]=this,r.myState.oprationIndexCopy=n,o.lang)this.setState({json:this.props.json||[],index:n,lang:o.lang,intl:o.intl});else{Object(f.getMultiLang)({moduleId:"page-button",callback:function(t,a,o){r.myState.buttonsLangJson={lang:t,intl:o},e.setState({json:e.props.json||[],index:n,lang:t,intl:o})}})}}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e._this,n=e.area;t.myState.buttonsComponent[n]&&t.myState.buttonsComponent[n][this.uuid]&&delete t.myState.buttonsComponent[n][this.uuid]}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({json:e.json||[]},(function(){}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.buttonLimit,r=t.area,a=t._this,o=t.wantedButtons,i=void 0===o?[]:o,c=t.stopPropagation,l=t.hotKeysEnabled,s=t.rowIndex,u=t.templateOrder,h=a.myState.buttons||[],m=[],y=[];if(Array.isArray(i)){var b,v=Ut(i);try{for(v.s();!(b=v.n()).done;){var g,k=b.value,S=Ut(h);try{for(S.s();!(g=S.n()).done;){var O=g.value;if(!0===O.visible||!1===O.hasOwnProperty("visible"))if(-1!==O.area.indexOf(",")){var w=O.area.split(",").map((function(e){return e.trim()}));k===O.key&&w.includes(r)&&m.push(Ht(Ht({},O),{},{isOprationBtn:!0}))}else k===O.key&&O.area===r&&m.push(Ht(Ht({},O),{},{isOprationBtn:!0}));if(-1!==O.area.indexOf(",")){var C=O.area.split(",").map((function(e){return e.trim()}));k===O.key&&C.includes(r)&&y.push(Ht(Ht({},O),{},{isOprationBtn:!0}))}else k===O.key&&O.area===r&&y.push(Ht(Ht({},O),{},{isOprationBtn:!0}))}}catch(e){S.e(e)}finally{S.f()}}}catch(e){v.e(e)}finally{v.f()}}y.length&&y.sort((function(e,t){return Number(e.order)-Number(t.order)})),u&&m.length&&m.sort((function(e,t){return Number(e.order)-Number(t.order)})),a.myState.oprationButtons[r]=y;var E=[],j=m.length?this.getKeyMapsAndHandlers({data:m,area:r,rowIndex:s}):{},x=Object(f.getLangCode)(),P="tradchn"===x||"simpchn"===x;return P?m.length&&m.length>n&&(E=m.slice(n-1,m.length),m=m.slice(0,n-1)):E=m,m.length?d.a.createElement("span",{className:"opration-wrapper",onClick:function(e){c&&e.stopPropagation()}},d.a.createElement(p.HotKeys,{display:"inline-block",className:"opration-btns-hotkey-wrapper",keyMap:j.keyMap,handlers:j.handlers,enabled:l,focused:!0},P&&m.map((function(t){return t.popContent?e.popContentItem(t):d.a.createElement("a",{fieldid:Object(f.getSysFieldid)("".concat(t.key,"_btn")),"btn-code":t.key,className:"row-edit-option row-btn-"+cn(t.key),key:t.key,onClick:function(n){return e.onClick({key:t.key,e:n,item:t})}},t.title)})),P?this.renderMoreList(E,this.props.rowIndex):this.renderLanglist(E,this.props.rowIndex))):d.a.createElement("span",{className:"opration-wrapper",onClick:function(e){c&&e.stopPropagation()}})}}]),n}(u.Component);var un={createButtonApp:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.area,r=t.onButtonClick,a=t.buttonLimit,o=t.popContainer,i=t.tabindex,c=void 0===i?-1:i,l=t.hotKeysMap,s=void 0===l?{}:l,u=t.hotKeysEnabled,f=void 0===u||u,p=t.modalRelation,h=t.ignoreHotkeyCode,m=void 0===h?[]:h,y=t.tipKeybodard,b=void 0===y?"none":y,v=t.notInterruptCode,g=void 0===v?[]:v,k=t.withAutoFocus,S=void 0===k||k;return d.a.createElement(ln,{ref:function(t){e.myState["".concat(n,"ButtonAreaRefName")]=t},_this:this,area:n,onClick:function(t,n){r(Ht(Ht({},e.props),e.output),t,n)},key:n,buttonLimit:a,popContainer:o,tabindex:c,hotKeysMap:s,hotKeysEnabled:f,modalRelation:p,ignoreHotkeyCode:m,tipKeybodard:b,notInterruptCode:g,withAutoFocus:S})},createOprationButton:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.area,a=n.onButtonClick,o=n.buttonLimit,i=n.popContainer,c=n.stopPropagation,l=void 0===c||c,s=n.hotKeysMap,u=void 0===s?{}:s,f=n.hotKeysEnabled,p=void 0===f||f,h=n.modalRelation,m=n.ignoreHotkeyCode,y=void 0===m?[]:m,b=n.notInterruptCode,v=void 0===b?[]:b,g=n.withAutoFocus,k=void 0===g||g,S=n.templateOrder,O=void 0!==S&&S;return this.myState.oprationIndex+=1,o=o||3,d.a.createElement(sn,{ref:function(t){e.myState["".concat(r,"ButtonAreaRefName")]=t},onClick:function(t,n,r){a(Ht(Ht({},e.props),e.output),t,n,r)},_this:this,area:r,buttonLimit:o,stopPropagation:l,oprationIndex:this.myState.oprationIndex,wantedButtons:t,popContainer:i,hotKeysMap:u,hotKeysEnabled:p,modalRelation:h,ignoreHotkeyCode:y,rowIndex:n.rowIndex,notInterruptCode:v,withAutoFocus:k,templateOrder:O})}};function dn(e){return(dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fn(Object(n),!0).forEach((function(t){hn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yn(e,t){return(yn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=kn(e);if(t){var a=kn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return vn(this,n)}}function vn(e,t){return!t||"object"!==dn(t)&&"function"!=typeof t?gn(e):t}function gn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kn(e){return(kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(905);var Sn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yn(e,t)}(o,e);var t,n,r,a=bn(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).getAllpks=function(e){var n=t.props.events,r=[];if(n&&n.dataSource){var a=f.ViewModel.getData(n.dataSource);a&&a.simpleTable&&a.simpleTable.allpks&&(r=a.simpleTable.allpks)}else r=e?f.cacheTools.get("allpks"):t.state.allpks;return Array.isArray(r)?r:[]},t.getClickItemId=function(e){var n=t.props.events,r=t.state.activeId;if(!r&&n&&n.dataSource){var a=f.ViewModel.getData(n.dataSource);a&&a.currentId&&(r=a.currentId)}var o=t.getAllpks();if(!o.includes(r)&&n&&n.dataSource){var i=f.ViewModel.getData(n.dataSource);i&&i.currentId&&(r=i.currentId)}var c=r;if(Array.isArray(o)&&o.length){var l,s;switch(e){case"firstItem":l=o[0];break;case"prevItem":-1!=(s=o.indexOf(c))&&s>0&&(l=o[s-1]);break;case"nextItem":-1!=(s=o.indexOf(c))&&s<o.length-1&&(l=o[s+1]);break;case"finalItem":l=o[o.length-1]}return l&&t.setState({activeId:l}),l}},t.pageIndexChange=function(e){var n=t.props,r=n.events,a=n.output,o=n.rootprops;r&&r.handlePageInfoChange&&(Object(f.clearToast)("socketErrorToast"),r.handlePageInfoChange(pn(pn({},o),a),t.getClickItemId(e)))},t.getBtnStatus=function(){var e=t.props.events,n=t.state.activeId;if(!n&&e&&e.dataSource){var r=f.ViewModel.getData(e.dataSource);r&&r.currentId&&(n=r.currentId)}var a=t.getAllpks();if(!a.includes(n)&&e&&e.dataSource){var o=f.ViewModel.getData(e.dataSource);o&&o.currentId&&(n=o.currentId)}var i,c,l,s=n;return-1==(i=a.indexOf(s))?(c=!0,l=!0):a.length?1===a.length?(c=!0,l=!0):0===i?(c=!1,l=!0):i===a.length-1?(c=!0,l=!1):(c=!1,l=!1):(c=!0,l=!0),{isFirst:l,isEnd:c}},t.props.getThis(gn(t)),t.pkname="id",t.props.events&&t.props.events.urlPkname&&(t.pkname=t.props.events.urlPkname),t.state={allpks:t.getAllpks(!0),visible:!0,activeId:t.props.getUrlParam(t.pkname),langJson:{}},t}return t=o,(n=[{key:"UNSAFE_componentWillMount",value:function(){var e=this;Object(f.getMultiLang)({moduleId:"common_icon_title",callback:function(t){e.setState({langJson:t})}})}},{key:"render",value:function(){var e=this,t=this.state.langJson,n=this.getBtnStatus(),r=n.isFirst,a=n.isEnd,o=this.props,i=o.hotKeyboard,c=void 0===i||i,l=o.tooltips,s=void 0===l?[t["icon-page-first"],t["icon-page-prev"],t["icon-page-next"],t["icon-page-end"]]:l;return d.a.createElement("div",{className:"".concat(this.state.visible?"show":"hide","  cardPagination-lightapp-component")},c&&d.a.createElement(p.HotKeys,{keyMap:{endBtnHandler:p.HotKeys.USUAL_KEYS.CARDPAGE_END,upBtnHandler:p.HotKeys.USUAL_KEYS.CARDPAGE_UP,downBtnHandler:p.HotKeys.USUAL_KEYS.CARDPAGE_DOWN,homeBtnHandler:p.HotKeys.USUAL_KEYS.CARDPAGE_HOME},handlers:{endBtnHandler:function(){e.pageIndexChange.bind(e,"finalItem")()},upBtnHandler:function(){if(r)return!1;e.pageIndexChange.bind(e,"prevItem")()},downBtnHandler:function(){if(a)return!1;e.pageIndexChange.bind(e,"nextItem")()},homeBtnHandler:function(){e.pageIndexChange.bind(e,"firstItem")()}},className:"cardPage-hotkeys-wrapper",focused:!0,attach:document.body,display:"inline-block"}),d.a.createElement("div",{className:"cardPagination-lightapp-component-wrap"},d.a.createElement(p.Tooltip,{placement:"top",overlay:s[0],delayHide:1,delayShow:1e3},d.a.createElement("span",{disabled:!!r,className:"".concat(r?"disable":""," first-item cardPaginationBtn"),onClick:function(){if(r)return!1;e.pageIndexChange.call(e,"firstItem")}},d.a.createElement("span",{className:"icon iconfont icon-shangyiye"}))),d.a.createElement(p.Tooltip,{placement:"top",overlay:s[1],delayHide:1,delayShow:1e3},d.a.createElement("span",{disabled:!!r,className:"".concat(r?"disable":""," item second-item cardPaginationBtn"),onClick:function(){if(r)return!1;e.pageIndexChange.call(e,"prevItem")}},d.a.createElement("span",{className:"icon iconfont icon-jiantouzuo"}))),d.a.createElement(p.Tooltip,{placement:"top",overlay:s[2],delayHide:1,delayShow:1e3},d.a.createElement("span",{disabled:!!a,className:"".concat(a?"disable":""," item third-item cardPaginationBtn"),onClick:function(){if(a)return!1;e.pageIndexChange.call(e,"nextItem")}},d.a.createElement("span",{className:"icon iconfont icon-jiantouyou"}))),d.a.createElement(p.Tooltip,{placement:"top",overlay:s[3],delayHide:1,delayShow:1e3},d.a.createElement("span",{disabled:!!a,className:"".concat(a?"disable":""," last-item cardPaginationBtn"),onClick:function(){if(a)return!1;e.pageIndexChange.call(e,"finalItem")}},d.a.createElement("span",{className:"icon iconfont icon-xiayiye"})))))}}])&&mn(t.prototype,n),r&&mn(t,r),o}(u.Component);n(905);var On={createCardPagination:function(e){var t=this;return d.a.createElement(Sn,{getThis:function(e){t.myCardPagination=e},events:e,output:this.output,rootprops:this.props,getUrlParam:this.getUrlParam})},setCardPaginationVisible:function(e,t){this.myCardPagination&&this.myCardPagination.state&&this.myCardPagination.setState({visible:t})},setCardPaginationId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.myCardPagination&&this.myCardPagination.state&&e&&e.id&&(e.status||(e.status=1),1==e.status&&this.myCardPagination.setState({activeId:e.id}),2==e.status&&(this.myCardPagination.state.allpks.push(e.id),this.myCardPagination.setState({activeId:e.id,allpks:this.myCardPagination.state.allpks})),3==e.status)){var t=this.myCardPagination.state.allpks.indexOf(e.id);-1!=t&&(this.myCardPagination.state.allpks.splice(t,1),this.myCardPagination.setState({allpks:this.myCardPagination.state.allpks}))}},getNextCardPaginationId:function(e){if(this.myCardPagination&&this.myCardPagination.state&&e&&e.id){var t=this.myCardPagination.state.allpks;if(t.length>1){var n=t.indexOf(e.id);return n==t.length-1?t[t.length-2]:t[n+1]}}},setCardPaginationAllpks:function(e,t){this.myCardPagination&&this.myCardPagination.state&&Array.isArray(e)&&this.myCardPagination.setState({allpks:e},(function(){"function"==typeof t&&t()}))}};function wn(e){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cn(){return(Cn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function En(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xn(e,t){return(xn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Nn(e);if(t){var a=Nn(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return _n(this,n)}}function _n(e,t){return!t||"object"!==wn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Nn(e){return(Nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1876);var Tn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xn(e,t)}(o,e);var t,n,r,a=Pn(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).state={data:{},json:{}},t}return t=o,(n=[{key:"UNSAFE_componentWillMount",value:function(){var e=this;Object(f.getMultiLang)({moduleId:"container_toast",callback:function(t,n){n&&e.setState({json:t})}})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.modalData,n=e.argusObj,r={};for(var a in t)for(var o in n)a===o&&(t[a]&&n[o]||t[a]?r[a]=t[a]:r[a]=n[o]);this.setState({data:r})}},{key:"render",value:function(){var e=this,t=this.state.json,n=this.state.data,r=n.id,a=n.size,o=n.className,i=n.backdropClassName,c=n.title,l=n.content,s=n.noFooter,u=n.leftBtnName,f=void 0===u?t["0005"]:u,h=n.rightBtnName,m=void 0===h?t["0006"]:h,y=n.showCustomBtns,b=n.customBtns,v=n.hideRightBtn,g=n.hideLeftBtn,k=n.container,S=this.props,O=S.onHide,w=S.backdrop,C=S.indexInfo,E=S.beSureClick,j=S.cancelClick,x=S.show,P=S.size,_=S.hotKeyboard,N=void 0===_||_,T=S.onEscapeKeyUp,D=S.draggable,A=S.resizable,I=En(S,["onHide","backdrop","indexInfo","beSureClick","cancelClick","show","size","hotKeyboard","onEscapeKeyUp","draggable","resizable"]),M=a||P||"",R="max"===M?"nc-modal-max":"";return d.a.createElement(p.Modal,Cn({fieldid:r,show:x,onHide:O.bind(this),size:M,backdrop:w,indexInfo:C,className:"".concat(o," simpleModal ").concat(R),backdropClassName:i,container:k,ref:function(t){return e.Modal=t},onEscapeKeyUp:T,draggable:D,resizable:A,id:r},I),!y&&N&&!s&&d.a.createElement(p.HotKeys,{keyMap:{sureBtnHandler:p.HotKeys.USUAL_KEYS.MODAL_CONFIRM,cancelBtnHandler:p.HotKeys.USUAL_KEYS.MODAL_CALCEL},handlers:{sureBtnHandler:function(){e.Modal&&e.Modal.isTopModal()&&(console.log("createModal  sureBtnHandler 事件回调",e.Modal.isTopModal()),E.bind(e)())},cancelBtnHandler:function(){e.Modal&&e.Modal.isTopModal()&&(console.log("createModal cancelBtnHandler 事件回调"),j.bind(e)())}},className:"simpleModal-hotkeys-wrapper",focused:!0,attach:document.body,display:"inline"}),d.a.createElement(p.Modal.Header,{fieldid:"header-area",closeButton:!0},d.a.createElement(p.Modal.Title,{fieldid:c},c)),d.a.createElement(p.Modal.Body,{className:s?"has-resize-icon":""},l),s?null:d.a.createElement(p.Modal.Footer,null,!y&&!1===g&&f&&(N?d.a.createElement(p.Tooltip,{placement:"top",inverse:!0,overlay:"".concat(f,"  (").concat(p.HotKeys.USUAL_KEYS.MODAL_CONFIRM,")"),trigger:["hover","focus"],className:"model-helper-overlay"},d.a.createElement(p.Button,{onClick:E.bind(this),colors:"primary",tabIndex:"0",fieldid:"confirm"},f,"(",d.a.createElement("span",{className:"text-decoration-underline"},"Y"),")")):d.a.createElement(p.Button,{onClick:E.bind(this),colors:"primary",tabIndex:"0",fieldid:"confirm"},f)),!y&&!1===v&&m&&(N?d.a.createElement(p.Tooltip,{placement:"top",inverse:!0,overlay:"".concat(m,"  (").concat(p.HotKeys.USUAL_KEYS.MODAL_CALCEL,")"),trigger:["focus","hover"],className:"model-helper-overlay"},d.a.createElement(p.Button,{onClick:j.bind(this),shape:"border",tabIndex:"0",fieldid:"cancel"},m,"(",d.a.createElement("span",{className:"text-decoration-underline"},"N"),")")):d.a.createElement(p.Button,{onClick:j.bind(this),shape:"border",tabIndex:"0",fieldid:"cancel"},m)),y&&b?b:null))}}])&&jn(t.prototype,n),r&&jn(t,r),o}(u.Component);function Dn(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.title,a=n.content,o=n.beSureBtnClick,i=n.cancelBtnClick,c=n.closeModalEve,l=n.rightBtnName,s=n.leftBtnName,u=n.noFooter,f=void 0!==u&&u,p=n.size,h=void 0===p?"lg":p,m=n.userControl,y=void 0!==m&&m,b=n.className,v=void 0===b?"":b,g=n.backdropClassName,k=void 0===g?"":g,S=n.zIndex,O=void 0===S?200:S,w=n.hasBackDrop,C=void 0===w||w,E=n.closeByClickBackDrop,j=void 0!==E&&E,x=n.showCustomBtns,P=void 0!==x&&x,_=n.customBtns,N=n.validateCloseBtn,T=void 0!==N&&N,D=n.hotKeyboard,A=void 0===D||D,I=n.hideRightBtn,M=void 0!==I&&I,R=n.hideLeftBtn,B=void 0!==R&&R,K=n.container,F=void 0===K?document.body:K,L=n.onEscapeKeyUp,H=n.draggable,q=void 0===H||H,V=n.resizable,U=void 0===V||V,W=En(n,["title","content","beSureBtnClick","cancelBtnClick","closeModalEve","rightBtnName","leftBtnName","noFooter","size","userControl","className","backdropClassName","zIndex","hasBackDrop","closeByClickBackDrop","showCustomBtns","customBtns","validateCloseBtn","hotKeyboard","hideRightBtn","hideLeftBtn","container","onEscapeKeyUp","draggable","resizable"]),Y=-1!==v.indexOf("junior")||-1!==v.indexOf("senior")||-1!==v.indexOf("combine"),z="".concat(Y?"":h),J={id:e,title:r,content:a,beSureBtnClick:o,cancelBtnClick:i,closeModalEve:c,rightBtnName:l,leftBtnName:s,noFooter:f,size:z,userControl:y,className:v,backdropClassName:k,zIndex:O,hasBackDrop:C,closeByClickBackDrop:j,showCustomBtns:P,customBtns:_,validateCloseBtn:T,hideRightBtn:M,hideLeftBtn:B,container:F,onEscapeKeyUp:L};this.state.modal.hasOwnProperty(e)||(this.state.modal[e]=J);var Z=this.state.modal[e]||{};Z.update||(Z.content=a,Z.customBtns=_);var G,X=function(){Z.showModal=!1,t.setState({modal:t.state.modal})},Q=function(){Z.validateCloseBtn||X(),"function"==typeof Z.closeModalEve&&Z.closeModalEve()},$=function(){Z.userControl||X(),"function"==typeof Z.cancelBtnClick&&Z.cancelBtnClick()},ee=function(){Z.userControl||X(),"function"==typeof Z.beSureBtnClick&&Z.beSureBtnClick()};G=C?j||"static":C;var te=Z.zIndex||O||200,ne={id:e,zIndex:te};return d.a.createElement(Tn,Cn({},W,{onHide:Q,backdrop:G,indexInfo:ne,beSureClick:ee,cancelClick:$,modalData:Z,show:Z.showModal,argusObj:J,hotKeyboard:A,custom:Y,onEscapeKeyUp:L,draggable:q,resizable:U,size:z}))}function An(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;if(!this.state.modal.hasOwnProperty(e))return console.error("需要先初始化createModal"),!1;var r=this.state.modal[e];(r=Object.assign(r,t)).showModal=!0,(t.hasOwnProperty("content")||t.hasOwnProperty("customBtns"))&&(r.update=!0),this.setState({modal:this.state.modal},(function(){n&&"function"==typeof n&&n()}))}function In(e){this.state.modal[e].showModal=!1,this.setState({modal:this.state.modal})}function Mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(n),!0).forEach((function(t){Bn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Kn=f.ViewModel.removeGlobalStorage,Fn=[];function Ln(e){var t=e;Object(f.isEmpty)(Fn)&&(Fn=[{display:t["page-search-0047"],value:"="},{display:t["page-search-0047"],value:"=="},{display:t["page-search-0048"],value:">"},{display:t["page-search-0049"],value:"<"},{display:t["page-search-0050"],value:"between"},{display:t["page-search-0051"],value:">="},{display:t["page-search-0052"],value:"<="},{display:t["page-search-0053"],value:"<>"},{display:t["page-search-0054"],value:"like"},{display:t["page-search-0055"],value:"left like"},{display:t["page-search-0056"],value:"right like"},{display:t["page-search-0057"],value:"is null"},{display:t["page-search-0084"],value:"not like"},{display:t["page-search-0085"],value:"is not null"}])}function Hn(e,t){var n="";switch(t){case"start":case"end":n="YYYY-MM-DD HH:mm:ss"}var r=Object(f.DongbaToLocalTime)(Object(f.moment)(e)).format(n);return Object(f.LocalToDongbaTime)(Object(f.moment)(r)).format("YYYY-MM-DD HH:mm:ss")}function qn(e){return JSON.parse(JSON.stringify(void 0===e?"":e))}function Vn(){return-1*(new Date).getTimezoneOffset()/60}function Un(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=qn(e),r={"#mainorg#":{display:t.org_Name||"",value:t.pk_org||""},"#DefaultCostRegion#":{display:t.defaultCostRegionName||"",value:t.defaultCostRegionPk||""},"#DefaultCreditCtlRegion#":{display:t.defaultCreditCtlRegionName||"",value:t.defaultCreditCtlRegionPk||""},"#accountingbook#":{display:t.defaultAccbookName||"",value:t.defaultAccbookPk||""},"#operator#":{display:t.userName||"",value:t.userId||""},"#currentgroup#":{display:t.groupName||"",value:t.groupId||""},"#DefaultLiactCostrgFunction#":{display:t.defaultCenterContentName||"",value:t.defaultCenterContentPK||""},"#DefaultCostrgOrLiactCostrgFunc#":{display:t.defaultCostRegionName||t.defaultCenterContentName||"",value:t.defaultCostRegionPk||t.defaultCenterContentPK||""},"#busioperator#":{display:t.defaultPsndocName||"",value:t.defaultPsndocPK||""},"#rbacdept#":{display:Array.isArray(t.defaultDeptName)?t.defaultDeptName.join(","):"",value:Array.isArray(t.defaultDeptPK)?t.defaultDeptPK.join(","):""}};return Array.isArray(n)?n.map((function(e){return e.value&&-1!==e.value.indexOf("#")&&(e=r[e.value]||e),e})):n.value&&-1!==n.value.indexOf("#")&&(n=r[n.value]||n),n}function Wn(e,t,n){var r=this;function a(e){var n={display:"",value:""};if("checkbox_switch"===e.itemtype)n.value=!1;else if("refer"===e.itemtype&&e.initialvalue){var r=Un(e.initialvalue,t);e.initialvalue.display=r.display||e.initialvalue.display}else if("residtxt"===e.itemtype){var a,o=(null===(a=e.languageMeta.filter((function(e){return e.languageCode==f.localeLang}))[0])||void 0===a?void 0:a.index)||1;n.index=o,e.initialvalue&&!e.initialvalue.hasOwnProperty("index")&&(e.initialvalue.index=o)}return!e.initialvalue||Object(f.isEmpty)(e.initialvalue.value)&&!e.initialvalue.index?n:e.initialvalue}var o=[];if(Object(f.isArray)(e)){var i=e.filter((function(e){return(e.visible||e.isfixedcondition)&&e.isdrag})),c=[],l=[],s=[];if(i.forEach((function(e,t){Number(e.visibleposition)>0||(e.visibleposition=99999+t),e.isfixedcondition?l.push(e):e.required?c.push(e):s.push(e)})),l.sort((function(e,t){return Number(e.visibleposition)-Number(t.visibleposition)})),n){var u=c.concat(s).sort((function(e,t){return Number(e.visibleposition)-Number(t.visibleposition)}));i=l.concat(u)}else c.sort((function(e,t){return Number(e.visibleposition)-Number(t.visibleposition)})),s.sort((function(e,t){return Number(e.visibleposition)-Number(t.visibleposition)})),i=l.concat(c).concat(s);i.forEach((function(e,t){var n,i,c,l=a.call(r,e),s={attrcode:e.attrcode,initialvalue:l,operationSign:e.queryOperateType?e.queryOperateType.split("@")[0]:"",operationOptions:(n=e.queryOperateType,i=(n=(n=n||"").replace(/^@+|@$/g,"")).split("@"),c=[],i.forEach((function(e){for(var t=0;t<Fn.length;t++)if(e===Fn[t].value){c.push(Fn[t]);break}})),c),remove:1!=e.required&&1!=e.isfixedcondition,label:e.label,isfixedcondition:!!e.isfixedcondition,isExtend:!!e.isfixedcondition,visible:!0};"residtxt"===e.itemtype&&l.value&&(s.valueMap={},s.valueMap[e.attrcode+l.index]={value:l.value}),o.push(s)}))}return o}function Yn(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return Array.isArray(t)&&t.forEach((function(t){if(t.children)Yn(e,t.children,n,r,++a);else{var o={display:"",value:""};t.initialvalue=t.initialvalue||t.value;var i=e.itemsMap[t.attrcode];if(i){if("checkbox_switch"===i.itemtype)o.value=!1;else if("refer"===t.itemtype&&t.initialvalue){var c=Un.call(t.initialvalue,n);t.initialvalue.display=c.display||t.initialvalue.display}else if("residtxt"===t.itemtype){var l,s=(null===(l=t.languageMeta.filter((function(e){return e.languageCode==f.localeLang}))[0])||void 0===l?void 0:l.index)||1;o.index=s,t.initialvalue&&!t.initialvalue.hasOwnProperty("index")&&(t.initialvalue.index=s)}t.refpk=t.attrcode,t.initialvalue=t.initialvalue&&(t.initialvalue.value||!1===t.initialvalue.value||t.initialvalue.display||t.initialvalue.index)?t.initialvalue:o,t.operationSign=t.operationSign||t.queryOperateType.split("@")[0]||"",t.operationOptions=r(i.queryOperateType),t.remove=t.hasOwnProperty("remove")?t.remove:1!=i.required&&1!=i.isfixedcondition,"residtxt"===i.itemtype&&!t.hasOwnProperty("valueMap")&&t.initialvalue.value&&(t.valueMap={},t.valueMap[t.attrcode+t.initialvalue.index]={value:t.initialvalue.value})}}})),t}function zn(e,t){var n=[];return Object(f.isArray)(t)&&t.forEach((function(t){e.hasOwnProperty(t.attrcode)&&n.push(e[t.attrcode])})),n}function Jn(e,t,n){var r=Wn(t,n);return r.forEach((function(t){e.forEach((function(e){t.attrcode===e.attrcode&&(t.initialvalue=e.initialvalue,t.operationSign=e.operationSign)}))})),r}function Zn(e,t,n){var r=!0;return e[0]&&"root"==e[0].attrcode&&(e=function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return Array.isArray(n)&&n.forEach((function(n){if(n.children)e(t,n.children,r,a,++o);else{var i={display:"",value:""};n.initialvalue=n.initialvalue||n.value;var c=t.itemsMap[n.attrcode];if(c){if("checkbox_switch"===c.itemtype)i.value=!1;else if("refer"===c.itemtype&&n.initialvalue){var l=Un.call(n.initialvalue,r);n.initialvalue.display=l.display||n.initialvalue.display}else if("residtxt"===c.itemtype){var s,u=(null===(s=c.languageMeta.filter((function(e){return e.languageCode==f.localeLang}))[0])||void 0===s?void 0:s.index)||1;i.index=u,n.initialvalue&&!n.initialvalue.hasOwnProperty("index")&&(n.initialvalue.index=u)}var d={attrcode:n.attrcode,refpk:n.attrcode,initialvalue:n.initialvalue&&(n.initialvalue.value||!1===n.initialvalue.value||n.initialvalue.display||n.initialvalue.index)?n.initialvalue:i,operationSign:n.operationSign||n.queryOperateType.split("@")[0]||"",remove:n.hasOwnProperty("remove")?n.remove:1!=c.required&&1!=c.isfixedcondition,visible:!0};"refer"===c.itemtype?(d.runWithChildren=!!n.runWithChildren,d.refurl=n.refurl||""):"residtxt"===c.itemtype&&(d.valueMap={},!n.hasOwnProperty("valueMap")&&d.initialvalue.value?d.valueMap[n.attrcode+d.initialvalue.index]={value:d.initialvalue.value}:n.hasOwnProperty("valueMap")&&(d.valueMap=n.valueMap)),c.isfixedcondition&&o<2&&(d.visible=!1),a.push(d)}}})),a}(t,e,n)),e.forEach((function(e){"refer"===t.itemsMap[e.attrcode].itemtype&&(e.initialvalue=Un(e.initialvalue,n)),t.itemsMap[e.attrcode].required&&Object(f.isEmpty)(e.initialvalue.value)&&(r=!1)})),r}function Gn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Array.isArray(e)&&e.forEach((function(e){e&&(e.children?Gn(e.children,t):t.push(e))})),t}function Xn(e,t){return new Date(e.replace(/-/g,"/"))>new Date(t.replace(/-/g,"/"))}function Qn(e){return-1!==(e=String(e)).indexOf("#")}function $n(e,t,n){var r=this;if(n=n&&"string"==typeof n?n:void 0,"boolean"==typeof t)this.props=this,this.multiLang=this.state.json;else{if("save"==e&&this.state.currentPlan.name===this.multiLang["page-search-0018"])return void Object(f.toast)({content:this.multiLang["page-search-0016"],color:"warning"});if(""===this.state.searchPlanName.replace(/\s+/g,""))return Object(f.toast)({content:this.multiLang["page-search-0032"],color:"warning"}),void("add"===e?this.props.modal.show("addSearchPlan@"+this.props.moduleId):"edit"===e&&this.props.modal.show("editSearchPlanName@"+this.props.moduleId));if("save"!==e&&!Object(f.isEmpty)(this.state.searchPlan)){if("edit"===e&&this.state.currentPlan.name===this.state.searchPlanName)return void this.props.modal.close("editSearchPlanName@"+this.props.moduleId);if(this.state.searchPlan.find((function(e){return e.name===r.state.searchPlanName})))return Object(f.toast)({content:this.multiLang["page-search-0083"],color:"warning"}),void("add"===e?this.props.modal.show("addSearchPlan@"+this.props.moduleId):"edit"===e&&this.props.modal.show("editSearchPlanName@"+this.props.moduleId))}}var a,o=this,i={public:null,nonpublic:null},c=null;this.state.userControlAll?i.nonpublic=this.props.saveSearchPlan():(i.nonpublic="function"==typeof this.props.saveSearchPlan?this.props.saveSearchPlan():null,a=r.state.searchInfo,i.public=gr.call(r,r.props.moduleId,r.state.searchInfo,!1),function e(t){t.map((function(t){t.initialvalue&&(""===t.initialvalue.value||null===t.initialvalue.value||Object(f.isArray)(t.initialvalue.value)&&!t.initialvalue.value.length||Object(f.isArray)(t.initialvalue.value)&&null===t.initialvalue.value[0])?t.isEmpty=!0:t.isEmpty=!1,Array.isArray(t.children)&&e(t.children)}))}(c=a.snapshotMap[a.status].filter((function(e){return!0!==e.isExtend}))));var l=this.state.currentPlan?this.state.currentPlan.pk_ncc_queryscheme:null;"boolean"==typeof t&&(l=this.state.searchInfo.searchPlanCache.find((function(e){return e.name==n})).pk_ncc_queryscheme),this.props.hasOwnProperty("oid");var s={name:this.state.searchPlanName,conditionobj4web:i,renderobj4web:c,areaid:this.props.oid||this.props.meta.oid,isprepared:!1,isquickqs:!1};l&&(s.pk_ncc_queryscheme=l),this.state.currentPlan&&(s.isprepared=this.state.currentPlan.isprepared,s.isquickqs=this.state.currentPlan.isquickqs);var u,d=function(){Object(f.ajax)({url:"/nccloud/riart/queryscheme/updateQS.do",data:s,success:function(e){if(e.success){if(Object(f.toast)({content:r.multiLang["page-search-0033"],color:"success"}),"boolean"==typeof t){var a=o.state.searchInfo.searchPlanCache.findIndex((function(e){return e.pk_ncc_queryscheme===s.pk_ncc_queryscheme}));if(-1!==a){s.pk_ncc_queryscheme=e.data,o.state.searchInfo.searchPlanCache[a]=qn(Rn(Rn({},o.state.searchInfo.searchPlanCache[a]),s)),n==(o.state.searchInfo.currentPlan&&o.state.searchInfo.currentPlan.name)&&(o.state.searchInfo.currentPlan=s),o.setState({searchInfo:o.state.searchInfo});var i=r._this.myState.search.keySessionS;Object(f.isEmpty)(i)||i.forEach((function(e){return Kn("localStorage",e)}))}return}"string"==typeof t&&"enter"==t&&r.props.modal.close("editSearchPlanName@"+r.props.moduleId);var c=o.state.searchPlan.findIndex((function(e){return e.pk_ncc_queryscheme===s.pk_ncc_queryscheme}));if(-1!==c&&(s.pk_ncc_queryscheme=e.data,o.state.searchPlan[c]=qn(Rn(Rn({},o.state.searchPlan[c]),s)),o.props.searchPlanCacheChange(o.state.searchPlan)),r.state.currentPlan=s,r.state.userControlAll||kr.call(o.props._this._this,o.props.id,s.name),null!=o.state.searchInfo.currentPlan&&r.state.currentPlan.pk_ncc_queryscheme==o.state.searchInfo.currentPlan.pk_ncc_queryscheme){var l=qn(r.state.currentPlan);o.props.upDateSearchPlan(l)}var u=r.props._this._this.myState.search.keySessionS;Object(f.isEmpty)(u)||u.forEach((function(e){return Kn("localStorage",e)}))}}})};if("edit"===e)u=r.state.searchInfo.searchPlanCache.find((function(e){return(n||r.state.currentPlan.name)==e.name})),s.renderobj4web=u.renderobj4web,s.name=r.state.searchPlanName,d();else if("save"===e){var p=this.state.searchPlan.find((function(e){return e.name===r.state.searchPlanName}));s.pk_ncc_queryscheme=p.pk_ncc_queryscheme,s.isdefault=p.isdefault,s.isquickqs=p.isquickqs,s.isprepared=p.isprepared,s.isdelete=p.isdelete,d()}else"add"===e&&(s.hasOwnProperty("pk_ncc_queryscheme")&&delete s.pk_ncc_queryscheme,s.isquickqs=!1,s.sequenc=(Array.isArray(r.props.searchPlanCache)&&r.props.searchPlanCache.length||0)+1,Object(f.ajax)({url:"/nccloud/riart/queryscheme/addQS.do",data:s,success:function(e){if(e.success){Object(f.toast)({content:r.multiLang["page-search-0034"],color:"success"}),"string"==typeof t&&"enter"==t&&r.props.modal.close("addSearchPlan@"+r.props.moduleId),s.pk_ncc_queryscheme=e.data,r.state.searchPlan.push(qn(s)),r.props.searchPlanCacheChange(r.state.searchPlan),r.setState({searchPlan:r.state.searchPlan}),r.state.currentPlan=s,r.state.userControlAll||kr.call(o.props._this._this,o.props.id,s.name);var n=r.props._this._this.myState.search.keySessionS;Object(f.isEmpty)(n)||n.forEach((function(e){return Kn("localStorage",e)}))}}}))}function er(e,t,n){var r=this,a=null,o=this;"boolean"==typeof e?(this.props=this,this.multiLang=this.state.json,a=t):a=this.state.currentPlan.pk_ncc_queryscheme,Object(f.ajax)({url:"/nccloud/riart/queryscheme/deleteQS.do",data:{pk_ncc_queryscheme:a},success:function(a){if(a.success){if(Object(f.toast)({content:r.multiLang["page-search-0038"],color:"success"}),e){if(r.state.searchInfo.searchPlanCache=r.state.searchInfo.searchPlanCache.filter((function(e){return e.pk_ncc_queryscheme!=t})),r.meta.queryschemes=r.state.searchInfo.searchPlanCache.filter((function(e){return"001"!=e.pk_ncc_queryscheme})),(r.state.searchInfo.currentPlan&&r.state.searchInfo.currentPlan.pk_ncc_queryscheme)==t){var i=r.state.searchInfo.searchPlanCache.find((function(e){return e.isquickqs}));i?(r.state.searchInfo.snapshotMap.simple=i.renderobj4web,r.state.searchInfo.currentPlan=i):(r.state.searchInfo.snapshotMap.simple=r.state.searchInfo.defaultPlan.renderobj4web,r.state.searchInfo.currentPlan=r.state.searchInfo.defaultPlan)}var c=r._this.myState.search.keySessionS;return Object(f.isEmpty)(c)||c.forEach((function(e){return Kn("localStorage",e)})),r.setState({searchInfo:r.state.searchInfo}),void n()}for(var l=r.state.searchPlan.length;l--;){if(r.state.searchPlan[l].pk_ncc_queryscheme===r.state.currentPlan.pk_ncc_queryscheme){r.state.searchPlan.splice(l,1),r.props.searchPlanCacheChange(r.state.searchPlan);break}}if(r.state.currentPlan.pk_ncc_queryscheme==(r.state.searchInfo.currentPlan&&r.state.searchInfo.currentPlan.pk_ncc_queryscheme)){var s=r.state.searchInfo.searchPlanCache.find((function(e){return e.isquickqs}));s?o.props.upDateSearchPlan(s):o.props.upDateSearchPlan(r.state.searchInfo.defaultPlan)}var u=r.props._this._this.myState.search.keySessionS;Object(f.isEmpty)(u)||u.forEach((function(e){return Kn("localStorage",e)})),r.setState({searchPlan:r.state.searchPlan})}}})}function tr(e){return(tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var nr={},rr=[];function ar(e){return!!this.state.meta.hasOwnProperty(e)||(Object(f.toast)({color:"danger",content:nr["page-search-0043"]}),!1)}function or(e,t,n){var r=this.state.searchInfo,a=this.props.id,o=r.snapshotMap[n||r.status],i=sr.call(this,a,o,!1);if(!i)return{value:{firstvalue:"",secondvalue:""},display:"",oprtype:""};if(i.conditions.length<=0)return{value:{firstvalue:"",secondvalue:""},display:"",oprtype:""};var c={value:{firstvalue:"",secondvalue:""},display:"",oprtype:""};return function e(t,n){t.forEach((function(t){t.conditions?e(t.conditions,n):t.field===n&&(c.value=t.value,c.display=t.display,c.oprtype=t.oprtype)}))}(i.conditions,t),c}function ir(e,t,n,r){if(!this.state.searchInfo)return console.error("setSearchValByField方法没有找到searchId"),!1;var a,o=this.state.searchInfo,i=(null==o||null===(a=o.currentPlan)||void 0===a?void 0:a.renderobj4web_snap)||o.snapshotMap[r||o.status];if(n||(n={value:"",display:""}),Object(f.isEmpty)(i))o.snapshotCache[r||o.status][t]=n;else{!function e(r){r.forEach((function(r){r.children&&Array.isArray(r.children)?e(r.children):r.attrcode===t&&(r.initialvalue=n)}))}(i),this.setState({searchInfo:o})}}function cr(e){var t=!0;return(!Array.isArray(e)||2!=e.length||Object(f.isEmpty)(e[0])||Object(f.isEmpty)(e[1]))&&(t=!1),t}function lr(e){nr=e}function sr(e,t,n){for(var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"and",o=[],i=this.state.searchInfo,c=[],l=function(a){if(t[a].children&&Array.isArray(t[a].children))return 0==a&&"root"==t[a].attrcode?{v:sr.call(r,e,t[a].children,n,t[a].operationSign)}:(o.push(sr.call(r,e,t[a].children,n,t[a].operationSign)),"continue");var l=t[a].attrcode,s=i.itemsMap[l],u=t[a].initialvalue,d=u.display||"",p=t[a].operationSign,h=t[a].runWithChildren||!1,m=t[a].refurl||"",y="";d&&t[a].runWithChildren&&(d+=nr["page-search-0044"]);var b={firstvalue:"",secondvalue:""};if(s.required&&n&&t[a].visible){var v=!1;(Object(f.isEmpty)(u.value)||Array.isArray(u.value)&&!cr(u.value))&&"is null"!=p&&"is not null"!=p&&(v=!0),v&&(o=[],c.push(s.attrcode))}if("rangepicker"!==s.itemtype&&("datepicker"!==s.itemtype&&"NCTZDatePickerEnd"!==s.itemtype&&"NCTZDatePickerStart"!==s.itemtype&&"datetimepicker"!==s.itemtype||"between"!==p)||!u)"refer"===s.itemtype?(u=Un(u,r.props.context),s.required&&n&&t[a].visible&&(u.value||0===u.value||(o=[],c.includes(s.attrcode)||c.push(s.attrcode))),"between"===p?(b.firstvalue=(u.value||[])[0]||"",b.secondvalue=(u.value||[])[1]||"",d=(u.display||[]).join(",")):(d=u.display,b.firstvalue=u.value)):"select"!==s.itemtype&&"number"!==s.itemtype&&"datetimepicker"!==s.itemtype&&"NCTZDatePickerEnd"!==s.itemtype&&"NCTZDatePickerStart"!==s.itemtype||"between"!==p?b.firstvalue=u.value:(b.firstvalue=(u.value||[])[0],b.secondvalue=(u.value||[])[1],d=(u.display||[])[0]+"~"+(u.display||[])[1]);else{var g=u.value;if(g&&!Object(f.isArray)(g)&&(g=g.split(",")),Qn(g[0])&&(y=g.join(",")),g&&Object(f.isArray)(g))if(g.length>0&&g[0]&&g[0].format){var k=g[0].format("YYYY-MM-DD"),S=g[1].format("YYYY-MM-DD"),O=Object(f.moment)(k).startOf("day").toDate(),w=O.getHours(),C=O.getTimezoneOffset()/60,E=Object(f.moment)(S).endOf("day").toDate(),j=E.getHours();C+=8,O.setHours(w+C),E.setHours(j+C),b.firstvalue=Object(f.moment)(O).format("YYYY-MM-DD HH:mm:ss"),b.secondvalue=Object(f.moment)(E).format("YYYY-MM-DD HH:mm:ss")}else g.length>0&&g[0]&&!g[0].format?(b.firstvalue=g[0],b.secondvalue=g[1]):0===g.length&&(b.firstvalue="",b.secondvalue="")}var x=["NCTZDatePickerStart","NCTZDatePickerEnd","datetimepicker"];if(["datepicker","datetimepicker","rangepicker","NCTZDatePickerStart","NCTZDatePickerEnd","NCTZDatePickClientTime","NCTZDatePickClientHourTime","NCTZDatePickerRangeDay","datePickerNoTimeZone"].some((function(e){return e===s.itemtype}))&&!Object(f.isEmpty)(u.value)){var P="",_="";Qn(b.firstvalue)&&!b.secondvalue&&(y=b.firstvalue),Qn(b.firstvalue)||Qn(b.secondvalue)?"="==p||"<>"==p?x.includes(s.itemtype)?P="NCTZDatePickerEnd"===s.itemtype?Object(f.timeFunctionTranslater)(b.firstvalue,{flag:!1}):Object(f.timeFunctionTranslater)(b.firstvalue):(P=Object(f.timeFunctionTranslater)(b.firstvalue),_=Object(f.timeFunctionTranslater)(b.firstvalue,{flag:!1})):"<"==p||">="==p?P=Object(f.timeFunctionTranslater)(b.firstvalue):">"==p||"<="==p?P=Object(f.timeFunctionTranslater)(b.firstvalue,{flag:!1}):"between"==p&&(Object(f.isEmpty)(b.firstvalue)||(P=Object(f.timeFunctionTranslater)(b.firstvalue)),Object(f.isEmpty)(b.secondvalue)||(_=Object(f.timeFunctionTranslater)(b.secondvalue,{flag:!1}))):("="==p||"<>"==p?x.includes(s.itemtype)?_=P=b.firstvalue:["datepicker","datetimepicker","NCTZDatePickClientTime","NCTZDatePickClientHourTime"].includes(s.itemtype)&&!Qn(b.firstvalue)?(P=Object(f.DongbaToLocalTime)(Object(f.moment)(b.firstvalue)).format("YYYY-MM-DD 00:00:00"),_=Object(f.moment)(P).format("YYYY-MM-DD 23:59:59"),P=Object(f.LocalToDongbaTime)(Object(f.moment)(P)).format("YYYY-MM-DD HH:mm:ss"),_=Object(f.LocalToDongbaTime)(Object(f.moment)(_)).format("YYYY-MM-DD HH:mm:ss")):(P=Object(f.moment)(b.firstvalue).format("YYYY-MM-DD 00:00:00"),_=Object(f.timeFunctionTranslater)(Object(f.moment)(b.firstvalue).format("YYYY-MM-DD 23:59:59"))):"<"==p||">="==p?P=Hn(b.firstvalue,"start"):">"==p||"<="==p?P=Hn(b.firstvalue,"end"):"between"==p&&(Object(f.isEmpty)(b.firstvalue)||(P=Hn(b.firstvalue,"start")),Object(f.isEmpty)(b.secondvalue)||(_=Hn(b.secondvalue,"end"))),P&&_&&Xn(P,_)&&(P=Object(f.timeFunctionTranslater)(_),_=Object(f.timeFunctionTranslater)(P,{flag:!1}))),"="==p&&(p="between"),b.firstvalue=P,b.secondvalue=_}s.hasOwnProperty("queryOperateType")||(s.queryOperateType="",console.error("查询模板中必须要有queryOperateType字段，请检查模板中".concat(s.attrcode,"字段"))),b.firstvalue&&"string"==typeof b.firstvalue&&" "!==b.firstvalue&&(b.firstvalue=b.firstvalue.trim()),b.secondvalue&&"string"==typeof b.firstvalue&&" "!==b.secondvalue&&(b.secondvalue=b.secondvalue.trim());var N={field:l,value:b,oprtype:p,display:String(d||"").replace(/~/,","),isIncludeSub:h,refurl:m,datatype:s.datatype||"",timeFunction:y,def5:s.label};"residtxt"===s.itemtype&&(N.langSeq=u.index),Object(f.isEmpty)(N.value.firstvalue)&&Object(f.isEmpty)(N.value.secondvalue)&&"is null"!=p&&"is not null"!=p||t[a].visible&&o.push(N)},s=0;s<t.length;s++){var u=l(s);if("continue"!==u&&"object"===tr(u))return u.v}return 0!==c.length?(Object(f.toast)({content:nr["page-search-0045"],color:"warning"}),f.PubSub.publish("searchRequired",c),!1):{logic:a,conditions:o}}function ur(e,t,n){var r,a,o=this.state.searchInfo,i=(null==o||null===(r=o.currentPlan)||void 0===r?void 0:r.renderobj4web_snap)||o.snapshotMap[o.status],c=t;if(c.conditions&&(c=c.conditions),!Object(f.isArray)(c))return console.error("setSearchValue方法第二个参数不正确"),!1;c.map((function(e){!function(e){for(var t=i.length;t--;)if(i[t].attrcode===e.field){i[t].initialvalue=i[t].initialvalue||{},"between"===e.oprtype?i[t].initialvalue.value=[e.value.firstvalue,e.value.secondvalue]:(i[t].initialvalue.value=e.value.firstvalue,i[t].initialvalue.display=e.display),e.timeFunction&&(e.timeFunction.includes(",")?i[t].initialvalue.value=e.timeFunction.split(","):(i[t].initialvalue.value=e.timeFunction,i[t].initialvalue.display="")),i[t].operationSign=e.oprtype,i[t].runWithChildren=e.isIncludeSub||!1,i[t].refurl=e.refurl||"";break}}(e)})),null!=o&&null!==(a=o.currentPlan)&&void 0!==a&&a.renderobj4web_snap&&(o.snapshotMap[o.status]=o.currentPlan.renderobj4web_snap),this.setState({searchInfo:o},(function(){"function"==typeof n&&n()}))}function dr(e){for(var t=this.state.searchInfo,n=t.snapshotMap[t.status],r=n.length;r--;)if(void 0!==n[r].initialvalue.index){n[r].initialvalue={value:"",display:"",index:n[r].initialvalue.index};var a=n[r].valueMap;if(a)for(var o in a){var i=a.current,c=a.index;a[o]={current:i,index:c,value:""}}}else n[r].initialvalue={value:"",display:""};this.setState({searchInfo:t})}function fr(e,t,n){for(var r=this._this.meta.getMeta()||{},a=r[e].items,o=a.length;o--;){var i=a[o];if(i.attrcode===t){i.disabled=n;break}}this._this.meta.setMeta(r)}function pr(e,t,n){for(var r=this._this.meta.getMeta()||{},a=r[e].items,o=a.length;o--;){var i=a[o];if(i.attrcode===t){i.required=!!n;break}}this._this.meta.setMeta(r)}function hr(e,t,n,r){for(var a=this._this.meta.getMeta()||{},o=a[e].items,i=o.length;i--;){var c=o[i];if(c.attrcode===t){c[n]=r;break}}this._this.meta.setMeta(a)}function mr(e,t){var n=this.state.searchInfo;return function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return n.forEach((function(n){n.children?e(n.children,r):n.attrcode===t&&r.push(n.operationSign)})),r}(n.snapshotMap[n.status])}function yr(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=ar.call(this,e);if(n){var r=this.myState.search["searchArea_".concat(e)];if(!r)return null;var a=r.state.searchInfo,o=a.snapshotMap[a.status];return sr.call(r,e,o,t)}}function br(e){if(ar.call(this,e)){var t=this.myState.search["searchArea_".concat(e)];t.state.searchInfo.status="simple",t.setState({searchInfo:t.state.searchInfo})}}function vr(e,t,n,r){var a=this.state.searchInfo,o=a.snapshotMap[t],i=a.targetKey,c=[];if("normal"===t&&(i=null),Object(f.isArray)(e)){var l=e.filter((function(e,t){return Number(e.visibleposition)>0||(e.visibleposition=99999+t),(e.visible||e.isfixedcondition)&&e.isdrag})),s=[],u=[],d=[];if(l.forEach((function(e,t){Number(e.visibleposition)>0||(e.visibleposition=99999+t),e.isfixedcondition?u.push(e):e.required?s.push(e):d.push(e)})),u.sort((function(e,t){return Number(e.visibleposition)-Number(t.visibleposition)})),r){var p=s.concat(d).sort((function(e,t){return Number(e.visibleposition)-Number(t.visibleposition)}));l=u.concat(p)}else s.sort((function(e,t){return Number(e.visibleposition)-Number(t.visibleposition)})),d.sort((function(e,t){return Number(e.visibleposition)-Number(t.visibleposition)})),l=u.concat(s).concat(d);var h=l.map((function(e){var t=1!=e.required&&1!=e.isfixedcondition;return a.snapshotCache&&a.snapshotCache[a.status]&&a.snapshotCache[a.status][e.attrcode]&&(e.initialvalue=a.snapshotCache[a.status][e.attrcode]),wr(e,t)}));"normal"===t?a.snapshotMap[t]=h:h.length>0&&"root"!==h[0].refpk&&(a.snapshotMap[t]=[{attrcode:"root",refpk:"root",key:"root",operationSign:"and",noRemove:!0,children:h,visible:!0}]),Object(f.isFunction)(n)&&n(t),c=a.snapshotMap[t]}else if(Object(f.isObj)(e)){var m=wr(e,!0);if(m.isExtend=!1,o.length){if("super"===t&&a.targetKey){var y=a.itemsMap[a.targetKey];if(y){if(y.visible&&a.targetIsExtend)return Object(f.toast)({content:nr["page-search-0091"],color:"warning"}),null;if(y.visible&&y.required)return Object(f.toast)({content:nr["page-search-0058"],color:"warning"}),null}}jr.call(this,o,m,i,t)}else a.snapshotMap[t]="normal"===t?[m]:[{attrcode:"root",refpk:"root",operationSign:"and",noRemove:!0,children:[m],visible:!0}],c=a.snapshotMap[t]}return Sr.call(this),c}function gr(e,t,n){var r=t.snapshotMap[t.status];return t.currentData=Cr.call(this,e,r,n),!1!==t.currentData&&(function e(t){if(!t.length)return null;t.map((function(n,r){!n||n.value&&Object(f.isArray)(n.value.firstvalue)&&!n.value.firstvalue.length?(t.splice(r,1),e(t)):Array.isArray(n.conditions)&&e(n.conditions)}))}(t.currentData),function e(t){var n=t.length;for(;n--;){var r=t[n];Array.isArray(r.conditions)&&r.conditions.length?e(r.conditions):Array.isArray(r.conditions)&&!r.conditions.length&&t.splice(n,1)}t.length&&Array.isArray(t[0].conditions)&&!t[0].conditions.length&&e(t)}(t.currentData),Object(f.isArray)(t.currentData)&&!t.currentData.length?null:"normal"===t.status||"plan"===t.status?{logic:"and",conditions:t.currentData}:t.currentData[0])}function kr(e,t){Or.call(this,e)&&(this.state.meta[e].searchPlanName=t,Sr.call(this))}function Sr(){this.setState({searchAdv:this.state.searchAdv})}function Or(e){return!!this.state.meta.hasOwnProperty(e)||(console.error("没有找到高级查询组件的id,请检查传参是否正确"),!1)}function wr(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={attrcode:e.attrcode,remove:t,visible:!0,isExtend:!!e.isfixedcondition};if(e.queryOperateType){var r;if(n.operationSign=e.queryOperateType.split("@")[0],n.refpk=n.key=e.attrcode,"between"===n.operationSign)"refer"===e.itemtype?n.initialvalue=e.initialvalue||{value:[],display:[]}:n.initialvalue=e.initialvalue||{value:[],display:""};else if("checkbox_switch"===e.itemtype)n.initialvalue={value:e.initialvalue&&e.initialvalue.value||!1,display:""};else if(n.initialvalue=e.initialvalue||{value:"",display:""},"residtxt"===e.itemtype)n.initialvalue.index=(null===(r=e.languageMeta.filter((function(e){return e.languageCode==f.localeLang}))[0])||void 0===r?void 0:r.index)||1,n.valueMap={},n.valueMap[n.attrcode+n.initialvalue.index]={value:n.initialvalue.value};n.operationOptions=xr(e.queryOperateType)}else n.operationOptions=xr("="),n.operationSign="=",n.initialvalue=e.initialvalue||{value:"",display:""};return n}function Cr(e,t,n){var r=this,a=this.state.searchInfo;return!!Er.call(this,e,t,n)&&t.map((function(t){if(Array.isArray(t.children))return{logic:t.operationSign,conditions:Cr.call(r,e,t.children)};var n=t.attrcode,o=a.itemsMap[n],i={firstvalue:null,secondvalue:null},c=t.initialvalue||{},l=c.display||null,s=t.operationSign,u=t.runWithChildren||!1,d=t.refurl||"",p="";if(l&&t.runWithChildren&&(l+=nr["page-search-0044"]),"rangepicker"===o.itemtype||("datepicker"===o.itemtype||"NCTZDatePickerEnd"===o.itemtype||"NCTZDatePickerStart"===o.itemtype||"datetimepicker"===o.itemtype)&&"between"===t.operationSign){var h=c.value;if(h&&!Object(f.isArray)(h)&&"string"==typeof h&&(h=h.split(",")),Qn(h[0])&&(p=h.join(",")),h&&Object(f.isArray)(h))if(h.length>0&&h[0]&&h[0].format){var m=h[0].format("YYYY-MM-DD"),y=h[1].format("YYYY-MM-DD"),b=Object(f.moment)(m).startOf("day").toDate(),v=b.getHours(),g=b.getTimezoneOffset()/60,k=Object(f.moment)(y).endOf("day").toDate(),S=k.getHours();g+=8,b.setHours(v+g),k.setHours(S+g),i.firstvalue=Object(f.moment)(b).format("YYYY-MM-DD HH:mm:ss"),i.secondvalue=Object(f.moment)(k).format("YYYY-MM-DD HH:mm:ss")}else h.length>0&&h[0]&&!h[0].format?(i.firstvalue=h[0],i.secondvalue=h[1]):(i.firstvalue="",i.secondvalue="")}else if("refer"===o.itemtype)if("between"===t.operationSign)l=(c.display||[]).join(","),i.firstvalue=c.value[0],i.secondvalue=c.value[1];else{var O=Un(c,r.props.context);l=O.display,i.firstvalue=O.value}else"select"!==o.itemtype&&"number"!==o.itemtype&&"datetimepicker"!==o.itemtype&&"NCTZDatePickerEnd"!==o.itemtype&&"NCTZDatePickerStart"!==o.itemtype||"between"!==t.operationSign?i.firstvalue=c.value:(i.firstvalue=(c.value||[])[0],i.secondvalue=(c.value||[])[1],l=(c.display||[])[0]+"~"+(c.display||[])[1]);var w=["NCTZDatePickerStart","NCTZDatePickerEnd","datetimepicker"];if(["datepicker","datetimepicker","rangepicker","NCTZDatePickerStart","NCTZDatePickerEnd","NCTZDatePickClientTime","NCTZDatePickClientHourTime","NCTZDatePickerRangeDay","datePickerNoTimeZone"].some((function(e){return e===o.itemtype}))&&!Object(f.isEmpty)(c.value)){var C="",E="";Qn(i.firstvalue)&&!i.secondvalue&&(p=i.firstvalue),Qn(i.firstvalue)||Qn(i.secondvalue)?"="==s||"<>"==s?w.includes(o.itemtype)?C="NCTZDatePickerEnd"===o.itemtype?Object(f.timeFunctionTranslater)(i.firstvalue,{flag:!1}):Object(f.timeFunctionTranslater)(i.firstvalue):(C=Object(f.timeFunctionTranslater)(i.firstvalue),E=Object(f.timeFunctionTranslater)(i.firstvalue,{flag:!1})):"<"==s||">="==s?C=Object(f.timeFunctionTranslater)(i.firstvalue):">"==s||"<="==s?C=Object(f.timeFunctionTranslater)(i.firstvalue,{flag:!1}):"between"==s&&(Object(f.isEmpty)(i.firstvalue)||(C=Object(f.timeFunctionTranslater)(i.firstvalue)),Object(f.isEmpty)(i.secondvalue)||(E=Object(f.timeFunctionTranslater)(i.secondvalue,{flag:!1}))):("="==s||"<>"==s?w.includes(o.itemtype)?E=C=i.firstvalue:["datepicker","datetimepicker","NCTZDatePickClientTime","NCTZDatePickClientHourTime"].includes(o.itemtype)&&!Qn(i.firstvalue)?(C=Object(f.DongbaToLocalTime)(Object(f.moment)(i.firstvalue)).format("YYYY-MM-DD 00:00:00"),E=Object(f.moment)(C).format("YYYY-MM-DD 23:59:59"),C=Object(f.LocalToDongbaTime)(Object(f.moment)(C)).format("YYYY-MM-DD HH:mm:ss"),E=Object(f.LocalToDongbaTime)(Object(f.moment)(E)).format("YYYY-MM-DD HH:mm:ss")):(C=Object(f.moment)(i.firstvalue).format("YYYY-MM-DD 00:00:00"),E=Object(f.timeFunctionTranslater)(Object(f.moment)(i.firstvalue).format("YYYY-MM-DD 23:59:59"))):"<"==s||">="==s?C=Hn(i.firstvalue,"start"):">"==s||"<="==s?C=Hn(i.firstvalue,"end"):"between"==s&&(Object(f.isEmpty)(i.firstvalue)||(C=Hn(i.firstvalue,"start")),Object(f.isEmpty)(i.secondvalue)||(E=Hn(i.secondvalue,"end"))),C&&E&&Xn(C,E)&&(C=Object(f.timeFunctionTranslater)(E),E=Object(f.timeFunctionTranslater)(C,{flag:!1}))),"="==s&&(s="between"),i.firstvalue=C,i.secondvalue=E}i.firstvalue&&"string"==typeof i.firstvalue&&" "!==i.firstvalue&&(i.firstvalue=i.firstvalue.trim()),i.secondvalue&&"string"==typeof i.firstvalue&&" "!==i.secondvalue&&(i.secondvalue=i.secondvalue.trim());var j={field:n,value:i,oprtype:s,display:String(l||"").replace(/~/,","),isIncludeSub:u,refurl:d,datatype:o.datatype||"",timeFunction:p,def5:o.label};return"residtxt"===o.itemtype&&(j.langSeq=c.index),Object(f.isEmpty)(j.value.firstvalue)&&Object(f.isEmpty)(j.value.secondvalue)&&"is null"!=s&&"is not null"!=s?null:t.visible?j:null}))}function Er(e,t,n){var r=this,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=this.state.searchInfo;return t.forEach((function(t){if(t.children)a=Er.call(r,e,t.children,n,a);else{var i=o.itemsMap[t.attrcode],c="refer"===i.itemtype?Un(t.initialvalue,r.props.context):t.initialvalue;if(i&&i.required&&n&&a&&t.visible){var l=!1;(Object(f.isEmpty)(c.value)||Array.isArray(c.value)&&!cr(c.value))&&"is null"!=t.operationSign&&"is not null"!=t.operationSign&&(l=!0),l&&(Object(f.toast)({content:nr["page-search-0045"],color:"warning"}),a=!1)}}})),a}function jr(e,t,n,r){if("string"==typeof n&&"root"!==n)for(var a=e.length;a--;){var o=e[a];if("root"===n.split("@")[1]){if(o.refpk===n){if(Array.isArray(o.children)){var i=(new Date).getTime();t.refpk=i+t.refpk,o.children.push(t)}else o.children=[t];return!0}}else if(o.refpk===n&&t.refpk!==o.refpk){if(o.advrequired)return;var c=(new Date).getTime(),l=c+"@root";o.refpk=c+o.refpk,t.refpk=c+t.refpk;var s={attrcode:l,refpk:l,operationSign:"and",children:[o,t],visible:!0};return e[a]=s,!0}if(Array.isArray(o.children))if(jr.call(this,o.children,t,n))return!1}else if("super"===r){var u=(new Date).getTime();t.refpk=u+t.refpk,e[0].children.push(t)}else e.push(t)}function xr(e){var t=(e=(e=e||"").replace(/^@+|@$/g,"")).split("@"),n=[];return t.forEach((function(e){for(var t=0;t<rr.length;t++)if(e===rr[t].value){n.push(rr[t]);break}})),n}function Pr(e){for(var t=this,n=e.length,r=this.state.searchInfo.itemsMap,a=function(){var a=e[n];if(a.children&&Array.isArray(a.children))Pr.call(t,a.children);else{var o=r[a.attrcode];o.disabled||("residtxt"===o.itemtype?(a.initialvalue.value="",a.initialvalue.display="",a.valueMap&&Object.keys(a.valueMap).forEach((function(e){a.valueMap[e].value=""}))):a.initialvalue={value:"",display:""})}};n--;)a()}function _r(e,t){if(Or.call(this,e)){var n=this.myState.search["searchArea_".concat(e)],r=n.state.searchInfo,a=r.status,o=r.snapshotMap[a];!function e(t,n){var r=t.length;for(;r--;){var a=t[r];if(a.refpk===n)return t.splice(r,1),!0;if(Array.isArray(a.children)&&e(a.children,n))return!1}}(o,t),function e(t){var n=t.length;for(;n--;){var r=t[n];Array.isArray(r.children)&&!r.children.length?t.splice(n,1):Array.isArray(r.children)&&e(r.children)}}(o),Sr.call(n)}}function Nr(e,t,n,r){var a=this.myState.search["searchArea_".concat(e)],o=a.state.searchInfo;!function e(t,n,r,a){var o=t.length;for(;o--;){var i=t[o];i.attrcode===n?(-1===i.attrcode.indexOf("@root")&&(i.initialvalue=r),a&&(i.operationSign=a)):Array.isArray(i.children)&&e(i.children,n,r,a)}}(o.snapshotMap[o.status],t,n,r),Sr.call(a)}function Tr(e){var t=this.state.searchInfo;return t.snapshotMap[t.status].map((function(e){return t.itemsMap[e.attrcode]}))}function Dr(e){if(Or.call(this,e)){var t=this.myState.search["searchArea_".concat(e)],n=t.state.searchInfo,r=n.snapshotMap[n.status];Pr.call(t,r),Sr.call(t)}}function Ar(){return(Ar=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ir(Object(n),!0).forEach((function(t){Rr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Rr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Br(e){return(Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Fr=p.Refer.ReferLoader;n(906);var Lr=p.Select.Option,Hr=function(){function e(t){var n=t.id,r=t.searchInfo,a=t.snapshotItem,o=t.onAfterEvent,i=t.setStateEve,c=t.renderItem,l=t.showRequire,s=void 0===l||l,u=t.context,d=void 0===u?{}:u,p=t.createScript,h=t.showPlaceholder,m=void 0===h||h,y=t.multiLang,b=t.LangData,v=t.parentRef,g=t.clickSearch,k=t.hiddenFunList;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.templetItem=r.itemsMap[a.attrcode];var S=Object(f.getBusinessInfo)();return this.Date=S?Object(f.moment)(S.businessDate).format("YYYY-MM-DD"):Object(f.moment)().format("YYYY-MM-DD"),this.templetItem?("super"==r.status||"normal"==r.status?this.hideLabel=!0:this.hideLabel=!1,Object.assign(this,{id:n,searchInfo:r,snapshotItem:a,onAfterEvent:o,setStateEve:i,renderItem:c,showRequire:s,context:d,createScript:p,showPlaceholder:m,multiLang:y,LangData:b,parentRef:v,clickSearch:g,hiddenFunList:k}),this.createTemplateItemDom()):null}var t,n,r;return t=e,(n=[{key:"clearRquiredWraning",value:function(e){e&&e.required&&f.PubSub.publish("clearWarning",e.attrcode)}},{key:"trustString",value:function(e){return"string"==typeof e?Object(f.formatNumber)(e,!0):Array.isArray(e)?e.filter((function(e){return e})).map((function(e){return Object(f.formatNumber)(e,!0)})).join("~"):void 0}},{key:"isTrueEmpty",value:function(e){return!!Object(f.isEmpty)(e)||(Array.isArray(e)?0===e.filter((function(e){return e})).length:void 0)}},{key:"getQueryOperateDisplay",value:function(e){var t="";if(e)switch(e=e.replace(/^@+|@$/g,""),String(e).split("@")[0]){case"<>":t="≠";break;case"<":t="<";break;case">":t=">";break;case">=":t="≥";break;case"<=":t="≤"}return t}},{key:"getDateDisplay",value:function(e){return isNaN(Date.parse(e))?e:Object(f.moment)(e).format("YYYY-MM-DD")}},{key:"timeFunCallBack",value:function(e,t){e&&t&&(e.initialvalue={display:t.label,value:t.value}),this.setStateEve()}},{key:"onAfterEve",value:function(e,t,n,r){null==n&&(n=0),Object(f.isFunction)(this.onAfterEvent)&&this.onAfterEvent(e,t,this.id,this.snapshotItem.operationSign,n,r)}},{key:"onInputChange",value:function(e,t){this.clearRquiredWraning(e),this.snapshotItem.initialvalue.value=t,this.snapshotItem.initialvalue.display=t,this.setStateEve(this.onAfterEve.bind(this,e.attrcode,t,0,"onchange"))}},{key:"inputBlur",value:function(e,t,n){"number"===t&&(this.snapshotItem.initialvalue.value=n),this.setStateEve(this.onAfterEve.bind(this,e.attrcode,n,0,"onblur"))}},{key:"onSelectedChange",value:function(e,t){this.clearRquiredWraning(e),this.snapshotItem.initialvalue="__clear__"===t||void 0===t?{value:"",display:""}:{value:t,display:e.options.find((function(e){return e.value==t})).display},this.setStateEve(this.onAfterEve.bind(this,e.attrcode,"__clear__"===t?void 0:t))}},{key:"onSelectedBetweenChange",value:function(e,t,n){this.clearRquiredWraning(e);var r=this.snapshotItem;r.initialvalue.display=r.initialvalue.display||[],r.initialvalue.value=r.initialvalue.value||[],r.initialvalue.display[t]=e.options.find((function(e){return e.value==n})).display,r.initialvalue.value[t]=n,this.setStateEve(this.onAfterEve.bind(this,e.attrcode,r.initialvalue.value))}},{key:"onMultipleChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.clearRquiredWraning(e);var n=e.options,r=n.filter((function(e){return t.some((function(t){return e.value==t}))}));this.snapshotItem.initialvalue={display:r.map((function(e){return e.display})).join(","),value:r.map((function(e){return e.value})).join(",")},this.setStateEve(this.onAfterEve.bind(this,e.attrcode,this.snapshotItem.initialvalue.value))}},{key:"onDateSelect",value:function(e){}},{key:"onDateChange",value:function(e,t,n){this.clearRquiredWraning(e),"string"!=typeof t&&t?"object"===Br(t)&&(Array.isArray(t)?this.snapshotItem.initialvalue.value=t:this.snapshotItem.initialvalue.value=t.value):this.snapshotItem.initialvalue.value=t,this.snapshotItem.initialvalue.display=n,this.setStateEve(this.onAfterEve.bind(this,e.attrcode,t))}},{key:"onDateTimeBetweenChange",value:function(e,t,n,r){this.clearRquiredWraning(e);var a=this.snapshotItem,o=a.initialvalue.display||"";a.initialvalue.value=a.initialvalue.value||[],Array.isArray(a.initialvalue.value)||(a.initialvalue.value=a.initialvalue.value.split(",")),Array.isArray(a.initialvalue.display)||(a.initialvalue.display=Array.from(2),a.initialvalue.value.map((function(e,t){e&&(a.initialvalue.display[t]=o.split(",")[t])}))),a.initialvalue.display[t]=r,a.initialvalue.value[t]=n,this.setStateEve(this.onAfterEve.bind(this,e.attrcode,a.initialvalue))}},{key:"onRangDateChange",value:function(e,t,n){this.clearRquiredWraning(e),this.snapshotItem.initialvalue.value=t||"",this.snapshotItem.initialvalue.display=Array.isArray(n)&&n.join(",")||"",this.setStateEve(this.onAfterEve.bind(this,e.attrcode,this.snapshotItem.initialvalue))}},{key:"referChangeEve",value:function(e,t,n){var r=this;if(this.clearRquiredWraning(e),this.snapshotItem.initialvalue=Mr(Mr({},n),t),Array.isArray(t))t.forEach((function(e){var t=Un({display:e.refname,value:e.refpk},r.context);e.refname=t.display,e.refpk=t.value,r.snapshotItem.runWithChildren=e.runWithChildren,r.snapshotItem.refurl=e.queryTreeUrl}),this);else{var a=Un({display:t.refname,value:t.refpk},this.context);t.refname=a.display,t.refpk=a.value}this.setStateEve(this.onAfterEve.bind(this,e.attrcode,t))}},{key:"betweenReferChangeEve",value:function(e,t,n,r){var a=this;this.clearRquiredWraning(t);var o=this.snapshotItem;o.initialvalue.display=o.initialvalue.display||[],o.initialvalue.value=o.initialvalue.value||[],o.initialvalue.display[e]=r.display,o.initialvalue.value[e]=r.value,o.runWithChildren=n.runWithChildren,Array.isArray(n)&&n.forEach((function(e){var t=Un({display:e.refname,value:e.refpk},a.context);e.refname=t.display,e.refpk=t.value,a.snapshotItem.runWithChildren=e.runWithChildren,a.snapshotItem.refurl=e.queryTreeUrl}),this),this.setStateEve(this.onAfterEve.bind(this,t.attrcode,n,e))}},{key:"radioChange",value:function(e,t){this.clearRquiredWraning(e),this.snapshotItem.initialvalue.value=t,this.setStateEve(this.onAfterEve.bind(this,e.attrcode,t))}},{key:"onChangeCheckbox_switch",value:function(e,t){if(this.clearRquiredWraning(e),!e.disabled){t.stopPropagation();var n=!this.snapshotItem.initialvalue.value;this.snapshotItem.initialvalue.value=n,this.setStateEve(this.onAfterEve.bind(this,e.attrcode,n))}}},{key:"switchChange",value:function(e){this.clearRquiredWraning(e);var t=!this.snapshotItem.initialvalue.value;this.snapshotItem.initialvalue.value=t,this.setStateEve(this.onAfterEve.bind(this,e.attrcode,t))}},{key:"changeNumber",value:function(e,t){this.clearRquiredWraning(e),this.snapshotItem.initialvalue.value=t,this.snapshotItem.initialvalue.display=t,this.setStateEve(this.onAfterEve.bind(this,e.attrcode,this.snapshotItem.initialvalue.value))}},{key:"checkNumberHandler",value:function(e){var t=!0;return["min","max"].every((function(t){return e.hasOwnProperty(t)}))&&e.max<e.min&&(t=!1,console.error("错误：最小值大于最大值")),t}},{key:"onMultiLangTextChange",value:function(e,t){this.clearRquiredWraning(e);var n="";for(var r in t)if(t.hasOwnProperty(r)&&(t[r].index=t[r].index||"1",t[r].index==this.snapshotItem.initialvalue.index)){this.snapshotItem.initialvalue={value:t[r].value,display:t[r].value,index:t[r].index},n=t[r].value;break}this.snapshotItem.valueMap=t,this.setStateEve(this.onAfterEve.bind(this,e.attrcode,n))}},{key:"onMultiLangTextSelect",value:function(e,t,n){this.clearRquiredWraning(e),this.snapshotItem.initialvalue={value:t,index:n,display:t},this.snapshotItem.valueMap||(this.snapshotItem.valueMap={},this.snapshotItem.valueMap[this.snapshotItem.attrcode+n]={value:t}),this.setStateEve(this.onAfterEve.bind(this,e.attrcode,t))}},{key:"createTemplateItemDom",value:function(){var e,t=this,n=(this.id,this.snapshotItem),r=this.templetItem,a=this.renderItem,o=this.multiLang,i=this.LangData,c=this.hiddenFunList,l=this,s=r;if(["is null","is not null"].some((function(e){return e===n.operationSign})))var u=!0;else u=s.disabled;var d=n.initialvalue,h=s.itemtype||{},m=c[n.attrcode]||[];!n.hasOwnProperty("operationSign")||"datepicker"!==h&&"NCTZDatePickerEnd"!==h&&"NCTZDatePickerStart"!==h?"textarea"===h?h="input":"radio"!==h&&"checkbox"!==h||(h="select"):"between"===n.operationSign&&(h="rangepicker"),"select"===h?s.isMultiSelectedEnabled?(e=d.value?String(d.value).split(","):[],d.display=[],r.options&&e.forEach((function(e){var t;d.display.push((null===(t=r.options.find((function(t){return t.value==e})))||void 0===t?void 0:t.display)||"")})),d.display=d.display.join(",")):e="between"===n.operationSign?Array.isArray(d.value)?d.value:[]:String(d.value)||"":e="checkbox"===h?d.value?String(d.value).split(","):"":"checkbox_switch"===h?d.value||!1:"datepicker"===h?"string"==typeof d.value?d.value:"":"rangepicker"===h||("datetimepicker"===h||"NCTZDatePickerEnd"===h||"NCTZDatePickerStart"===h)&&"between"===n.operationSign?Array.isArray(d.value)?d.value:d.value?d.value.split(","):[]:(d||{}).value||(d||{}).display,"datepicker"!==h&&"NCTZDatePickerEnd"!==h&&"NCTZDatePickerStart"!==h||"="!==n.operationSign||Array.isArray(d.value)&&(e=d.value[0]);var y=null,b=null;s.required&&this.showRequire&&(y=React.createElement("span",{className:"mustFillIn_search1"},"*")),s.required&&this.showRequire&&"between"===n.operationSign&&["refer","select","datetimepicker","number"].includes(h)&&(b=React.createElement("span",{className:"mustFillIn_search2"},"*"));var v=null,g="",k="",S=l.getQueryOperateDisplay(s.queryOperateType);switch(s.placeholder=this.showPlaceholder?s.label+S:"",s.hasOwnProperty("maxlength")||(s.maxlength=1/0),h){case"refer":var O=d,w=null;a[s.attrcode]&&(w=a[s.attrcode]);var C="";if(n.hasOwnProperty("operationSign")&&"between"===n.operationSign){var E=[];C=(E=(O.value||[]).map((function(e,n){return Un({value:e,display:O.display?O.display[n]:""},t.context)}))).map((function(e){return e.display})).join("~");var j={value:"",display:""};w&&(w=Mr(Mr({},w),{},{props:Mr(Mr(Mr({},w.props),s),{},{placeholder:s.placeholder,foolValue:Mr(Mr({},d),Object(f.isEmpty)(E)?j:E[0]),onChange:l.betweenReferChangeEve.bind(l,"0",s),showTitle:!1})})),v=React.createElement("div",{className:"between-refer",fieldid:Object(f.getSysFieldid)(s.attrcode)},React.createElement("div",{className:"startRefer between-refer-item"},w||React.createElement(Fr,Ar({},s,{placeholder:s.placeholder,foolValue:Mr(Mr({},d),Object(f.isEmpty)(E[0])?j:E[0]),onChange:l.betweenReferChangeEve.bind(l,"0",s),showTitle:!1}))),React.createElement("div",{className:"between-refer-line"},"-",b),React.createElement("div",{className:"endRefer between-refer-item"},w||React.createElement(Fr,Ar({},s,{placeholder:s.placeholder,foolValue:Mr(Mr({},d),Object(f.isEmpty)(E[1])?j:E[1]),onChange:l.betweenReferChangeEve.bind(l,"1",s),showTitle:!1}))))}else{Array.isArray(O.value)&&(O={value:O.value[0],display:O.display[0]});var x=Un(O,this.context);C=x.display,w&&(w=Mr(Mr({},w),{},{props:Mr(Mr(Mr({},w.props),s),{},{placeholder:s.placeholder,foolValue:Mr(Mr({},d),x),onChange:l.referChangeEve.bind(l,s),showTitle:!1})})),v=React.createElement("span",{className:"search-dom"},w||React.createElement(Fr,Ar({},s,{placeholder:s.placeholder,foolValue:Mr(Mr({},d),x),onChange:l.referChangeEve.bind(l,s),showTitle:!1})))}g=C&&s.label?s.label+":"+C:"";break;case"input":v=React.createElement("span",{className:"search-dom"},React.createElement(p.Input,Rr({disabled:!!u,value:e,isCheckChinese:!!s.maxlength,maxlength:s.maxlength,onBlur:l.inputBlur.bind(l,s),placeholder:s.placeholder,onChange:l.onInputChange.bind(l,s)},"maxlength",s.maxlength))),g=e&&s.label?s.label+":"+e:"";break;case"select":""===e&&(e=void 0),v=s.isMultiSelectedEnabled?React.createElement("span",{className:"search-dom"},React.createElement(p.Select,{disabled:!!u,className:"multiple-select",multiple:!0,getPopupContainer:function(){return t.parentRef||document.body},style:{marginRight:6},placeholder:s.placeholder,value:e,onChange:l.onMultipleChange.bind(l,s),fieldid:s.attrcode,supportSearch:s.supportSearch},s.options&&s.options.map((function(e,t){return React.createElement(Lr,{key:t,value:String(e.value)},e.display)})))):n.hasOwnProperty("operationSign")&&"between"===n.operationSign?React.createElement("span",{className:"search-dom"},React.createElement(p.SelectBetween,{disabled:!!u,showSearch:!0,style:{marginRight:6},placeholder:s.placeholder,value:e,mustFill:b,optionFilterProp:"children",onChange:l.onSelectedBetweenChange.bind(l,s),fieldid:s.attrcode,options:s.options})):React.createElement("span",{className:"search-dom"},React.createElement(p.Select,{disabled:!!u,showSearch:!0,showClear:!s.required,getPopupContainer:function(e){return e.parentNode.parentNode||document.body},style:{marginRight:6},placeholder:s.placeholder,value:e,optionFilterProp:"children",onChange:l.onSelectedChange.bind(l,s),fieldid:s.attrcode,supportSearch:s.supportSearch},s.options&&s.options.map((function(e,t){return React.createElement(Lr,{key:t,value:String(e.value)},e.display)}))));var P=d.display;d&&"Y"===d.value?P=o["page-search-0089"]:d&&"N"===d.value&&(P=o["page-search-0090"]),g=!Object(f.isEmpty)(e)&&s.label?s.label+":"+P:"";break;case"datepicker":v=React.createElement("span",{className:"search-dom"},React.createElement(p.DatePickerClient,{panelValue:this.Date,arrowKeyDownEnable:!0,fieldid:s.attrcode,disabled:!!u,onSelect:l.onDateSelect,onChange:l.onDateChange.bind(l,s),value:e,placeholder:s.placeholder,operationSign:n.operationSign,showTimeFunction:!0,hiddenFunList:m,multiLang:o,LangData:i,showClear:!0})),k=d.display,g=e&&s.label?s.label+":"+Object(f.formatDatetime)(k,"date"):"";break;case"datetimepicker":n.hasOwnProperty("operationSign")&&"between"===n.operationSign?(v=React.createElement("span",{className:"search-dom"},React.createElement(p.DateTimePickerBetween,{panelValue:this.Date,arrowKeyDownEnable:!0,fieldid:s.attrcode,disabled:!!u,className:"search",mustFill:b,onSelect:l.onDateSelect,onChange:l.onDateTimeBetweenChange.bind(l,s),value:e,placeholder:s.placeholder,showTimeFunction:!0,hiddenFunList:m,showClear:!0})),k=this.isTrueEmpty(d.display)?"":Array.isArray(d.display)?"".concat(Object(f.formatDatetime)(d.display[0],"datetime")||"","~").concat(Object(f.formatDatetime)(d.display[1],"datetime")||""):Object(f.formatDatetime)(d.display,"datetime")):(v=React.createElement("span",{className:"search-dom"},React.createElement(p.TZDatePickClientTime,{panelValue:this.Date,arrowKeyDownEnable:!0,fieldid:s.attrcode,disabled:!!u,onSelect:l.onDateSelect,onChange:l.onDateChange.bind(l,s),value:e,placeholder:s.placeholder,showTimeFunction:!0,hiddenFunList:m})),k=d.display,k=Object(f.formatDatetime)(k,"datetime")),g=!Object(f.isEmpty)(e)&&s.label?s.label+":"+k:"";break;case"timepicker":v=React.createElement("span",{className:"search-dom"},React.createElement(p.Timepicker,{fieldid:s.attrcode,arrowKeyDownEnable:!0,disabled:!!u,format:"HH:mm:ss",onSelect:l.onDateSelect,onChange:l.onDateChange.bind(l,s),value:e,placeholder:s.placeholder,showTimeFunction:!0,hiddenFunList:m,onEnter:this.clickSearch})),k=d.value,g=e&&s.label?s.label+":"+Object(f.formatDatetime)(k,"time"):"";break;case"rangepicker":v=React.createElement("span",{className:"search-dom"},React.createElement(p.RangePickerClient,{panelValues:this.Date,fieldid:s.attrcode,arrowKeyDownEnable:!0,disabled:!!u,onSelect:l.onDateSelect,onChange:l.onRangDateChange.bind(l,s),value:Object(f.isEmpty)(e)?"":e,showClear:!0,placeholder:s.placeholder||" ",dateInputPlaceholder:[o["page-search-0039"]+"(YYYY-MM-DD)",o["page-search-0040"]+"(YYYY-MM-DD)"],showTimeFunction:!0,hiddenFunList:m,multiLang:o,LangData:i,onEnter:this.clickSearch}));var _=[];Array.isArray(d.display)?_=d.display:d.display&&(_=d.display.includes(",")?(d.display||"").split(","):(d.display||"").split("~")),k=[];for(var N=0;N<e.length;N++)e[N]&&(-1!==e[N].indexOf("#")?k.push(_[N]):k.push(Object(f.formatDatetime)(this.getDateDisplay(_[N]),"date")));k=k.join("~"),g=!Object(f.isEmpty)(k)&&s.label?s.label+":"+k:"";break;case"datePickerNoTimeZone":v=React.createElement("span",{className:"search-dom"},React.createElement(p.DatePicker,{panelValue:this.Date,fieldid:s.attrcode,arrowKeyDownEnable:!0,disabled:!!u,onSelect:l.onDateSelect,onChange:l.onDateChange.bind(l,s),value:e,placeholder:s.placeholder,showTimeFunction:!0,hiddenFunList:m,showTime:!1,onEnter:this.clickSearch,showClear:!0})),g=e&&s.label?s.label+":"+Object(f.formatDatetime)(e,"date"):"";break;case"NCTZDatePickerStart":n.hasOwnProperty("operationSign")&&"between"===n.operationSign?(v=React.createElement("span",{className:"search-dom"},React.createElement(p.TZDatePickerStartBetween,{panelValue:this.Date,arrowKeyDownEnable:!0,fieldid:s.attrcode,disabled:!!u,onSelect:l.onDateSelect,onChange:l.onDateTimeBetweenChange.bind(l,s),value:e,placeholder:s.placeholder,showTimeFunction:!0,hiddenFunList:m,showTime:!1,showToday:!1,onEnter:this.clickSearch,showClear:!0})),k=this.isTrueEmpty(d.display)?"":Array.isArray(d.display)?"".concat(Object(f.formatDatetime)(d.display[0],"date")||"","~").concat(Object(f.formatDatetime)(d.display[1],"date")||""):Object(f.formatDatetime)(d.display,"date")):(v=React.createElement("span",{className:"search-dom"},React.createElement(p.TZDatePickerStart,{panelValue:this.Date,arrowKeyDownEnable:!0,fieldid:s.attrcode,disabled:!!u,placeholder:s.placeholder,value:e,onSelect:l.onDateSelect,onChange:l.onDateChange.bind(l,s),showTimeFunction:!0,hiddenFunList:m,showToday:!1,showTime:!1,onEnter:this.clickSearch,showClear:!0})),k=d.display?d.display.split(" ")[0]:""),g=e&&s.label?s.label+":"+Object(f.formatDatetime)(k,"date"):"";break;case"NCTZDatePickerRangeDay":v=React.createElement("span",{className:"search-dom"},React.createElement(p.TZDatePickerRangeDay,{panelValue:this.Date,arrowKeyDownEnable:!0,fieldid:s.attrcode,disabled:!!u,placeholder:s.placeholder,value:e,onSelect:l.onDateSelect,onChange:l.onRangDateChange.bind(l,s),onEnter:this.clickSearch,hiddenFunList:m}));break;case"NCTZDatePickClientHourTime":v=React.createElement("span",{className:"search-dom"},React.createElement(p.TZDatePickClientHourTime,{panelValue:this.Date,arrowKeyDownEnable:!0,fieldid:s.attrcode,disabled:!!u,placeholder:s.placeholder||"",value:e,onSelect:l.onDateSelect,onChange:l.onDateChange.bind(l,s),onEnter:this.clickSearch,hiddenFunList:m})),k=d.display,g=e&&s.label?s.label+":"+Object(f.formatDatetime)(k,"date"):"";break;case"NCTZDatePickClientTime":v=React.createElement("span",{className:"search-dom"},React.createElement(p.TZDatePickClientTime,{panelValue:this.Date,arrowKeyDownEnable:!0,fieldid:s.attrcode,disabled:!!u,placeholder:s.placeholder||"",value:e,onSelect:l.onDateSelect,onChange:l.onDateChange.bind(l,s),onEnter:this.clickSearch,hiddenFunList:m})),k=d.display,g=e&&s.label?s.label+":"+Object(f.formatDatetime)(k,"datetime"):"";break;case"NCTZDatePickerEnd":n.hasOwnProperty("operationSign")&&"between"===n.operationSign?(v=React.createElement("span",{className:"search-dom"},React.createElement(p.TZDatePickerEndBetween,{panelValue:this.Date,arrowKeyDownEnable:!0,fieldid:s.attrcode,disabled:!!u,onSelect:l.onDateSelect,onChange:l.onDateTimeBetweenChange.bind(l,s),value:e,placeholder:s.placeholder,showTimeFunction:!0,hiddenFunList:m,showTime:!1,showToday:!1,onEnter:this.clickSearch,showClear:!0})),k=this.isTrueEmpty(d.display)?"":Array.isArray(d.display)?"".concat(Object(f.formatDatetime)(d.display[0],"date")||"","~").concat(Object(f.formatDatetime)(d.display[1],"date")||""):Object(f.formatDatetime)(d.display,"date")):(v=React.createElement("span",{className:"search-dom"},React.createElement(p.TZDatePickerEnd,{panelValue:this.Date,arrowKeyDownEnable:!0,fieldid:s.attrcode,disabled:!!u,placeholder:s.placeholder||"",value:e,onSelect:l.onDateSelect,onChange:l.onDateChange.bind(l,s),showTimeFunction:!0,hiddenFunList:m,showTime:!1,showToday:!1,onEnter:this.clickSearch,showClear:!0})),k=d.display?d.display.split(" ")[0]:""),g=e&&s.label?s.label+":"+Object(f.formatDatetime)(k,"date"):"";break;case"radio":v=React.createElement("span",{className:"search-dom"},React.createElement(p.Select,{disabled:!!u,showSearch:!0,style:{marginRight:6},placeholder:s.placeholder,value:e,optionFilterProp:"children",onChange:l.onSelectedChange.bind(l,s),fieldid:s.attrcode},s.options&&s.options.map((function(e,t){return React.createElement(Lr,{key:t,value:String(e.value)},e.display)}))));break;case"number":var T=(s.initialvalue||{}).scale,D=Object(f.isEmpty)(T)||"-1"==T?s.scale:T;v=n.hasOwnProperty("operationSign")&&"between"===n.operationSign?React.createElement("span",{className:"search-dom"},React.createElement(p.BetweenNum,{disabled:!!u,onChange:l.changeNumber.bind(l,s),onBlur:l.inputBlur.bind(l,s,"number"),scale:Number(D),mustFill:b,max:l.checkNumberHandler(s)?s.max:null,min:l.checkNumberHandler(s)?s.min:null,maxlength:Number(s.maxlength),placeholder:s.placeholder,defaultPlaceholder:s.defaultPlaceholder||{start:s.label+o["page-search-0078"],end:s.label+o["page-search-0079"]},value:e||[]})):React.createElement("span",{className:"search-dom"},React.createElement(p.NumberInput,{disabled:!!u,onBlur:l.inputBlur.bind(l,s,"number"),scale:Number(D),value:e,maxlength:Number(s.maxlength),placeholder:s.placeholder,onChange:l.changeNumber.bind(l,s),max:l.checkNumberHandler(s)?s.max:null,min:l.checkNumberHandler(s)?s.min:null})),g=!this.isTrueEmpty(e)&&s.label?s.label+":"+this.trustString(e):"";break;case"checkbox":""===e&&(e=void 0),(d.value||0==d.value)&&s.options.forEach((function(e){Object(f.isArray)(d.value)&&d.value.includes(e.value)&&(e.checked=!0)})),v=React.createElement("span",{className:"search-dom"},React.createElement(p.Select,{disabled:!!u,className:"multiple-select",multiple:!0,style:{marginRight:6},placeholder:s.placeholder,value:e,onChange:l.onMultipleChange.bind(l,s),fieldid:s.attrcode},s.options.map((function(e,t){return React.createElement(Lr,{key:t,value:String(e.value),title:e.display},e.display)}))));break;case"checkbox_switch":v=React.createElement("span",{className:"condition-item-contant checkbox",style:{cursor:"pointer"},onClick:function(e){return l.onChangeCheckbox_switch.call(l,s,e)}},React.createElement("span",{className:"switchSpan"},s.label," "),React.createElement(p.Checkbox,{disabled:!!u,ref:"test",checked:d.value,type:"switch",onClick:function(e){return l.onChangeCheckbox_switch.call(l,s,e)}}));break;case"switch":v=React.createElement("span",{className:"condition-item-contant switch  search-dom",style:{cursor:"pointer"},onClick:l.switchChange.bind(l,s)},React.createElement("span",{className:"switchSpan"},s.label),React.createElement(p.Checkbox,{className:"checkbox",disabled:!!u,checked:e,onClick:l.switchChange.bind(l,s)}));break;case"password":v=React.createElement("span",{className:"search-dom"},React.createElement(p.Input,{disabled:!!u,value:e,onBlur:l.inputBlur.bind(l,s),placeholder:s.placeholder,onChange:l.onInputChange.bind(l,s),maxlength:s.maxlength,type:"password"}));break;case"residtxt":v=React.createElement("span",{className:"search-dom"},s.languageMeta&&React.createElement(p.MultiLangText,{disabled:!!u,value:n.valueMap||{},LangIndex:n.initialvalue.index||"",attrcode:s.attrcode,isCheckChinese:!!s.maxlength,maxlength:s.maxlength,languageMeta:s.languageMeta,onBlur:l.inputBlur.bind(l,s),placeholder:s.placeholder,onSelect:l.onMultiLangTextSelect.bind(l,s),onChange:l.onMultiLangTextChange.bind(l,s)})),g=!Object(f.isEmpty)(e)&&s.label?s.label+":"+d.display:""}var A=React.createElement("div",{className:"te-tips",style:{fontSize:"13px",wordBreak:"break-all"}},g);return d.value&&this.clearRquiredWraning(s),React.createElement("div",{key:s.attrcode},Number(s.leftspace)?React.createElement(p.Col,{md:Number(s.leftspace),xs:xs,sm:sm}):null,React.createElement(p.Tooltip,{delayShow:800,inverse:!0,className:"search",overlay:g&&this.showPlaceholder?A:null,placement:"top",trigger:"hover"},React.createElement("div",{className:"condition-contant"},y,v)),Number(s.rightspace)?React.createElement(p.Col,{md:Number(s.rightspace),xs:xs,sm:sm,key:index}):null)}}])&&Kr(t.prototype,n),r&&Kr(t,r),e}();function qr(e){return(qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ur(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vr(Object(n),!0).forEach((function(t){Wr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yr(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function zr(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Yr(o,r,a,i,c,"next",e)}function c(e){Yr(o,r,a,i,c,"throw",e)}i(void 0)}))}}function Jr(e){return function(e){if(Array.isArray(e))return Zr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Zr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xr(e,t){return(Xr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ta(e);if(t){var a=ta(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return $r(this,n)}}function $r(e,t){return!t||"object"!==qr(t)&&"function"!=typeof t?ea(e):t}function ea(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ta(e){return(ta=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(907);var na=p.Tabs.TabPane,ra=p.Tree.TreeNode,aa=p.Select.Option,oa=p.Radio.RadioGroup,ia=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xr(e,t)}(o,e);var t,n,r,a=Qr(o);function o(e){var t,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).initByProps=function(e,n){!n&&t.state.showModal||(t.state.status=e.searchInfo.status||"normal",t.state.normalAdvId=e.moduleId+"@normal",t.state.superAdvId=e.moduleId+"@super",t.state.leftTab=e.hideSearchCondition?"2":e.leftTab||"1",t.state.currentPlan=e.searchInfo.currentClickPlan||e.searchInfo.currentPlan,t.state.searchPlanName=t.state.currentPlan.name||"",t.state.searchInfo.itemsMap={},t.state.searchInfo.status=t.state.status),e.searchInfo.currentClickPlan=null,t.state.searchInfo.searchPlanCache=e.searchPlanCache||[],t.state.searchPlan=e.searchPlanCache||[];var r=e.meta.items||[];if(t.items=r,t.state.searchInfo.fixedConditionGroup=e.searchInfo.fixedConditionGroup,r.forEach((function(e){return t.state.searchInfo.itemsMap[e.attrcode]=e})),t.defaultOpen=!0,r.forEach((function(e){e.hasOwnProperty("attrcode")||console.error("查询模板中有字段缺少attrcode字段，请检查"),e.hasOwnProperty("label")||console.error("查询模板中有字段缺少label字段，请检查"),e.refpk=e.attrcode,e.refname=e.label,e.isleaf=!0})),Object(f.isFunction)(e.replaceAdvBody)||e.hideSearchCondition||n||t.createSearchCondition.call(ea(t),r),!Object(f.isFunction)(e.replaceAdvBody)&&!Object(f.isFunction)(e.replaceRightBody)){if(t.tabIndex=t.tabIndex||"0",Object(f.isFunction)(e.addAdvTabs))for(var a=Jr(e.addAdvTabs()),o=0;o<a.length;o++){if(!0===a[o].defaultOpen){t.tabIndex=String(o+1);break}}var i=t.state.searchInfo,c=t.state.currentPlan,l="001"==c.pk_ncc_queryscheme;i.isDefaultPlan=l;var s=qn(c.renderobj4web_snap),u=qn(e.searchInfo.defaultPlan.renderobj4web);n||!t.state.showModal?l?"super"==t.state.status?(t.state.searchInfo.snapshotMap.normal=Yn(i,u,e.context,xr),t.state.searchInfo.snapshotMap.super=s):(t.state.searchInfo.snapshotMap.normal=Yn(i,s,e.context,xr),t.state.searchInfo.snapshotMap.super=[{attrcode:"root",refpk:"root",key:"root",operationSign:"and",noRemove:!0,children:qn(t.state.searchInfo.snapshotMap.normal),visible:!0}]):"super"==i.status?(s&&s.length&&s[0]?t.state.searchInfo.snapshotMap.super=Yn(i,s,e.context,xr):t.state.searchInfo.snapshotMap.super=[{attrcode:"root",refpk:"root",key:"root",operationSign:"and",noRemove:!0,children:Yn(i,s,e.context,xr),visible:!0}],t.state.searchInfo.snapshotMap.normal=Yn(i,u,e.context,xr)):(t.state.searchInfo.snapshotMap.normal=Yn(i,s,e.context,xr),t.state.searchInfo.snapshotMap.super=[{attrcode:"root",refpk:"root",key:"root",operationSign:"and",noRemove:!0,children:Yn(i,u,e.context,xr),visible:!0}]):console.log("gaoji已经打开")}t.state.showModal=e.searchInfo.showAdvModal,e.searchInfo.snapshotMap.normal=t.state.searchInfo.snapshotMap.normal,e.searchInfo.snapshotMap.super=t.state.searchInfo.snapshotMap.super,t.firstInit=!1},t.createDefaultSnap=function(e,n){t.state.searchInfo.snapshotMap.normal=n.map((function(t){var n,r,a=e[t.attrcode];return a&&(a.queryOperateType?t.operationOptions=xr(a.queryOperateType):t.operationOptions=xr("=")),{attrcode:t.attrcode,initialvalue:{value:(null===(n=t.initialvalue)||void 0===n?void 0:n.value)||"",display:(null===(r=t.initialvalue)||void 0===r?void 0:r.display)||""},isExtend:t.isExtend,key:t.attrcode,remove:t.remove,visible:t.visible,refpk:t.attrcode,operationSign:t.operationSign,operationOptions:t.operationOptions}})),t.state.searchInfo.snapshotMap.super=[{attrcode:"root",refpk:"root",key:"root",operationSign:"and",noRemove:!0,children:qn(t.state.searchInfo.snapshotMap.normal),visible:!0}]},t.setStateEve=function(e){t.setState(t.state,e)},t.getSnapshotCache=function(e){Object.keys(e.snapshotMap).forEach((function(t){var n=e.snapshotMap[t],r=e.snapshotCache[t];Object(f.isEmpty)(r)||(!function e(t,n){t.forEach((function(t){t.children?e(t.children,n):n[t.attrcode]&&(t.initialvalue=n[t.attrcode])}))}(n,r),e.snapshotCache[t]={})}))},t.getConditionTreeFromItems=function(e){return e.forEach((function(e){e.hasOwnProperty("attrcode")||console.error(t.multiLang["page-search-0026"]+"attrcode"+t.multiLang["page-search-0027"]+"，"+t.multiLang["page-search-0028"]),e.hasOwnProperty("label")||console.error(t.multiLang["page-search-0026"]+"label"+t.multiLang["page-search-0027"]+"，"+t.multiLang["page-search-0028"]),e.refpk=e.attrcode||"",e.refname=e.label||"",!e.pid&&delete e.pid})),t.props.syncTree.createTreeData(e)},t.searchBtnClickEve=zr(regeneratorRuntime.mark((function e(){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,null,r=[],a=t.state.searchInfo.snapshotMap[t.state.searchInfo.status],!Object(f.isFunction)(t.props.replaceRightBody)&&!Object(f.isFunction)(t.props.replaceAdvBody)){e.next=13;break}if(n="userControl",!Object(f.isFunction)(t.props.searchBtnClick)){e.next=11;break}return e.next=9,t.props.searchBtnClick(Ur(Ur({},t.props._this._this),t.props._this._this.props),n,"super");case 9:e.sent||(t.state.searchInfo.status=t.lastStatus,t.close(!0));case 11:e.next=29;break;case 13:if(n=gr.call(ea(t),t.props.id,t.state.searchInfo,!0),r=Tr.call(t.props._this,t.props.moduleId),!1===n){e.next=29;break}if(o={queryAreaCode:t.props.id,oid:t.props.oid||t.props.meta.oid,querytype:"tree",querycondition:n,template:r,nctz:Vn()},!Object(f.isFunction)(t.props.searchBtnClick)){e.next=24;break}return e.next=20,t.props.searchBtnClick(Ur(Ur({},t.props._this._this),t.props._this._this.props),n,"super",n&&o);case 20:e.sent||(t.props.searchInfo.snapshotMap.simple=a,t.state.currentPlan.renderobj4web_snap=a,t.props.searchInfo.currentPlan=t.state.currentPlan||{},t.props.searchInfo.status="simple",t.close(!0)),e.next=29;break;case 24:t.props.searchInfo.snapshotMap.simple=a,t.state.currentPlan.renderobj4web_snap=a,t.props.searchInfo.currentPlan=t.state.currentPlan||{},t.props.searchInfo.status="simple",t.close(!0);case 29:case"end":return e.stop()}}),e)}))),t.cancelClick=function(e){e&&e.stopPropagation();var n=t.props.backPosition;Object(f.isFunction)(n)&&n(),t.state.onlyShowSuperBtn||(t.props.searchInfo.status=t.lastStatus),t.close(0)},t.saveSearchPlanClick=function(){$n.call(ea(t),"save")},t.addSearchPlanClick=function(){t.props.modal.show("addSearchPlan@"+t.props.moduleId)},t.close=function(e){var n=t.props,r=n.onlyShowModalCancelCallback,a=n.onlyShowModal,o=t.props.statusChangeEvent;o&&o(t.state.searchInfo.status),!e&&a&&Object(f.isFunction)(r)&&r(),f.PubSub.publishSync("beforeAreaChangeComplete",!0),t.props._this._this.infoExchangeController.publishSync("heightChange",{area:"searchArea"}),t.setState({showModal:!1},(function(){t.props._this._this.infoExchangeController.publishSync("heightChange",{area:"searchArea"}),f.PubSub.publish("areaChangeComplete",!0)})),document.body.style.overflow="auto",t.props.closeModal()},t.mathSignChange=function(e,n,r){t.state.searchInfo.snapshotMap[t.state.searchInfo.status];"between"!==n&&"between"===r?(e.initialvalue.value="",e.initialvalue.display=""):"between"===n&&"between"!==r&&(e.initialvalue.display=[],e.initialvalue.value=[]),e.operationSign=n,t.setStateEve((function(){"function"==typeof t.props.onOperateTypeChange&&t.props.onOperateTypeChange(e.attrcode,n)}))},t.onDropChildren=function(e){e.preventDefault();var n=JSON.parse(e.currentTarget.getAttribute("keys"));t.state.searchInfo.targetKey=n.attrcode,t.state.searchInfo.targetIsExtend=n.isExtend},t.onDragOver=function(e){return e.preventDefault(),!0},t.logicSelectChange=function(e,n,r){Nr.call(t.props._this._this,t.props.moduleId,e.refpk,e,n)},t.tabChange=function(e){t.setState({leftTab:e})},t.createSearchCondition=function(e){var n=e.filter((function(e){return 1!=e.isfixedcondition&&1==e.visible})),r=t.props.syncTree.createTreeData(qn(n));t.props.syncTree.setSyncTreeData(t.props.moduleId,r)},t.addRequiredItems=function(e){if(e){var n=[];!function e(t){t.map((function(t){Array.isArray(t.children)&&e(t.children),(t.visible||t.isfixedcondition)&&n.push(t)}))}(e),n.length&&(vr.call(ea(t),n,"normal",t.firstInit&&t.props.setInitValueEvent,t.props.isTemplateOrder),vr.call(ea(t),n,"super",t.firstInit&&t.props.setInitValueEvent,t.props.isTemplateOrder))}},t.advOrNormal=function(e){t.state.searchInfo.status=e;var n=t.props.statusChangeEvent;n&&n(t.state.searchInfo.status),t.props.statusChange(e,t.state.userControlAll),t.setStateEve()},t.onDragOver=function(e){return e.preventDefault(),!0},t.clickRight=function(){t.onDrop("clickRight")},t.onDrop=function(e){t.state.moveNode=qn("clickRight"===e?t.props.syncTree.getHoverNodeKey(t.props.moduleId):t.props.syncTree.getMoveNodeKey(t.props.moduleId)),Object(f.isArray)(t.state.moveNode)&&!1===t.state.moveNode[0].isdrag||!1===t.state.moveNode.isdrag||(t.state.moveNode.hasOwnProperty("children")&&delete t.state.moveNode.children,vr.call(ea(t),t.state.moveNode,t.state.searchInfo.status))},t.scrollBottom=function(e){var n=t.refs[e],r=n.clientHeight,a=n.scrollHeight;n.scrollTop=r+a},t.clearAdvValue=function(){Object(f.isFunction)(t.props.advSearchClearEve)&&t.props.advSearchClearEve(),t.props.searchInfo.status=t.state.searchInfo.status,Dr.call(t.props._this._this,t.props.moduleId)},t.editSearchPlanName=function(e,n){t.clickSearchPlan(e),t.props.modal.show("editSearchPlanName@"+t.props.moduleId)},t.delSearchPlan=function(e){t.clickSearchPlan(e),Nt({color:"warning",hotKeyboard:!0,title:t.multiLang["page-search-0031"],content:d.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.multiLang["page-search-0015"]}}),beSureBtnName:t.multiLang["page-search-0009"],cancelBtnName:t.multiLang["page-search-0010"],beSureBtnClick:er.bind(ea(t))})},t.addMark=function(e){e.map((function(e){e.initialvalue&&(""===e.initialvalue.value||null===e.initialvalue.value||Object(f.isArray)(e.initialvalue.value)&&!e.initialvalue.value.length||Object(f.isArray)(e.initialvalue.value)&&null===e.initialvalue.value[0])?e.isEmpty=!0:e.isEmpty=!1,Array.isArray(e.children)&&t.addMark(e.children)}))},t.clickSearchPlan=function(e,n){if(e.pk_ncc_queryscheme!=t.state.currentPlan.pk_ncc_queryscheme){e.renderobj4web&&e.renderobj4web.forEach((function(e){return e.advrequired=!!e.required})),t.state.currentPlan=e,t.state.searchInfo.isDefaultPlan="001"==e.pk_ncc_queryscheme,t.state.searchPlanName=e.name;var r=t.state.searchInfo.fixedConditionGroup;if(Object(f.isFunction)(t.props.clickPlanEve)&&t.props.clickPlanEve(e,t.props._this._this),e.renderobj4web&&e.renderobj4web.length&&"root"===e.renderobj4web[0].refpk){t.state.searchInfo.status="super",t.props.searchInfo.status="super",e.renderobj4web[0].children=r.concat(e.renderobj4web[0].children);var a=e.renderobj4web;t.state.searchInfo.snapshotMap.super=Yn(t.state.searchInfo,a,t.props.context,xr)}else{t.state.searchInfo.status="normal",t.props.searchInfo.status="normal";var o=e.renderobj4web;"001"==e.pk_ncc_queryscheme?t.state.searchInfo.snapshotMap.normal=Yn(t.state.searchInfo,o,t.props.context,xr):t.state.searchInfo.snapshotMap.normal=Yn(t.state.searchInfo,[].concat(Jr(r),Jr(o)),t.props.context,xr)}t.props.searchInfo.snapshotMap.normal=t.state.searchInfo.snapshotMap.normal,t.props.searchInfo.snapshotMap.super=t.state.searchInfo.snapshotMap.super,t.setStateEve()}},t.createSearchPlan=function(){return t.props.searchPlanCache&&t.props.searchPlanCache.length?qn(t.props.searchPlanCache).map((function(e){return d.a.createElement("li",{className:"searchPlanList ".concat(t.state.currentPlan.name==e.name?"active":""),key:e.pk_ncc_queryscheme},d.a.createElement("span",{className:"searchPlanName",onClick:t.clickSearchPlan.bind(ea(t),e)},d.a.createElement(p.Tooltip,{delayShow:800,inverse:!0,overlay:d.a.createElement("div",null,e.name),placement:"top"},d.a.createElement("i",null,e.name))),!e.isquickqs&&!e.isMyPlan&&d.a.createElement(p.Tooltip,{placement:"top",overlay:t.multiLang["page-search-icon-modify"],delayHide:1,delayShow:1e3},d.a.createElement("span",{className:"searchPlanEdit",onClick:t.editSearchPlanName.bind(ea(t),e)},d.a.createElement("i",{className:"iconfont icon-gerenpeizhi"}))),!e.isquickqs&&!e.isMyPlan&&d.a.createElement(p.Tooltip,{placement:"top",overlay:t.multiLang["page-search-icon-delete"],delayHide:1,delayShow:1e3},d.a.createElement("span",{className:"searchPlanDel",onClick:t.delSearchPlan.bind(ea(t),e)},d.a.createElement("i",{className:"iconfont icon-shanchu"}))))})):d.a.createElement("li",{className:"searchPlanList"},d.a.createElement("span",{className:"searchPlanName"},t.multiLang["page-search-0029"]))},t.searchPlanNameChange=function(e){t.setState({searchPlanName:e})},t.mathSignChangeEve=function(e,n,r){for(var a=e.length;a--;){var o=e[a];if(o.refpk===n)return"between"!==r&&"between"===o.operationSign?(o.initialvalue.value="",o.initialvalue.display=""):"between"===r&&"between"!==o.operationSign&&(o.initialvalue.display=[],o.initialvalue.value=[]),o.operationSign=r,!0;if(Array.isArray(o.children)&&t.mathSignChangeEve(o.children,n,r))return!1}},t.modalContent=function(e){return d.a.createElement("div",{className:"plan-content"},d.a.createElement("span",{className:"label"},t.multiLang["page-search-0012"]+":"),d.a.createElement("span",{className:"content"},d.a.createElement(p.HotKeys,{keyMap:{high:["enter"]},handlers:{high:$n.bind(ea(t),e,"enter")}},d.a.createElement(p.Input,{id:"NC_searchPlanModalInput",autoFocus:!0,className:"searchPlanModal",value:t.state.searchPlanName,onChange:t.searchPlanNameChange.bind(ea(t)),maxlength:100}))))},t.createDomItem=function(e){var n=t.state.searchInfo.itemsMap[e.attrcode],r=t.props.renderItem;return n?new Hr({id:t.props.moduleId,searchInfo:t.state.searchInfo,snapshotItem:e,onAfterEvent:t.props.onAfterEvent,setStateEve:t.setStateEve,renderItem:r,context:t.props.context,showRequire:!1,createScript:t.props.createScript,showPlaceholder:!1,hiddenFunList:t.props.hiddenFunList,multiLang:t.multiLang,LangData:t.LangData}):null},t.createDom=function(e){if("string"==typeof e)var n=t.state.searchInfo.snapshotMap[e].filter((function(e){return e.visible}));else if("object"===qr(e))n=e.filter((function(e){return e.visible}));if(n.length)return n.map((function(e,n){var r=t.state.searchInfo.itemsMap[e.attrcode];if(!r&&!e.attrcode.includes("root"))return null;var a=null;r&&r.required&&(a=d.a.createElement("div",{className:"mustFillIn"},"*"));var o=t.createDomItem(e),i=function(){var n={and:t.multiLang["page-search-0035"],or:t.multiLang["page-search-0036"]};return e.children&&e.children.length?d.a.createElement("div",{className:"advancedSearchSign"},d.a.createElement("div",{key:e.refpk,keys:JSON.stringify({attrcode:e.refpk,isExtend:!!e.isExtend}),className:"advancedSearchChild",onDrop:t.onDropChildren,onDragOver:t.onDragOver},"root"===e.attrcode?d.a.createElement("div",{className:"advancedSearch_root"},n[e.operationSign]):d.a.createElement("div",{className:"select-containter"},d.a.createElement(p.Select,{className:"NC_logicSign",showClear:!1,value:String(e.operationSign||"and"),onChange:t.logicSelectChange.bind(ea(t),e),fieldid:e.attrcode},Object.keys(n).map((function(e,t){return d.a.createElement(aa,{key:t,value:String(e)},n[e])}))))),!e.noRemove&&!e.isfixedcondition&&d.a.createElement("div",{className:"searchAdvCom_remove",onClick:t.removeDom.bind(ea(t),e)},t.multiLang["page-search-0037"])):e.operationOptions?d.a.createElement("div",{className:"NC_searchAdvCom",key:e.refpk,keys:JSON.stringify({attrcode:e.refpk,isExtend:!!e.isExtend}),onDrop:t.onDropChildren,onDragOver:t.onDragOver},"super"===t.state.searchInfo.status?d.a.createElement("span",{className:"remove"},d.a.createElement("div",{className:"link"})):null,d.a.createElement("span",{className:"remove"},e.remove?d.a.createElement("div",{className:"searchAdvCom_remove",onClick:t.removeDom.bind(ea(t),e)},d.a.createElement("i",{className:"iconfont icon-qingkong"})):d.a.createElement("div",{className:"searchAdvCom_remove"},"super"===t.state.searchInfo.status?d.a.createElement("div",{className:"link"}):null)),d.a.createElement("span",{className:"content"},a,d.a.createElement(p.Tooltip,{delayShow:800,inverse:!0,overlay:d.a.createElement("div",null,r.label),placement:"top"},d.a.createElement("div",{className:"searchAdvCom_name"},r.label)),d.a.createElement("div",{className:"searchAdvCom_select"},e.operationOptions.length>1?d.a.createElement(p.Select,{className:"NC_operateSign",showClear:!1,disabled:!!r.disabled,value:String(e.operationSign||t.multiLang["page-search-0035"]),onChange:t.mathSignChange.bind(ea(t),e),fieldid:"operateSign"},e.operationOptions.map((function(e,t){return d.a.createElement(aa,{key:t,value:String(e.value)},e.display)}))):d.a.createElement("span",{className:"option-label"},(e.operationOptions[0]||{}).display)),d.a.createElement("div",{className:"searchAdvCom_com"},o))):void console.log("the data is",e)};if(e.children&&e.children.length){var c={and:t.multiLang["page-search-0035"],or:t.multiLang["page-search-0036"]},l=e.children;return d.a.createElement(ra,{key:e.refpk+n,title:i.call(ea(t),e),className:"search-right-area-tree-node",liAttr:{fieldid:Object(f.getSysFieldid)(c[e.operationSign]+"_node")}},t.createDom(l))}return d.a.createElement(ra,{key:e.attrcode+n,title:i.call(ea(t),e),liAttr:{fieldid:Object(f.getSysFieldid)(e.attrcode+"_node")},className:"search-right-area-tree-node".concat("super"===t.state.searchInfo.status?" child-node":"")})})).filter((function(e){return e}))},t.removeDom=function(e){var n=t.props.searchInfo,r=n.status,a=n.snapshotMap[r].filter((function(t){return t.attrcode===e.attrcode})).length;t.props.removeQuerConditionEve&&t.props.removeQuerConditionEve.call(t.props._this._this,t.props.moduleId,e.attrcode,a)||(t.state.searchInfo.targetKey=null,_r.call(t.props._this._this,t.props.moduleId,e.refpk))},t.onDragEnterBox=function(){t.state.searchInfo.targetKey=null},t.creatConditionUIDom=function(e){return d.a.createElement("div",{id:t.props.moduleId,ref:"NCSearchAdvComBox",className:"NC_searchAdvComBox",onDragEnter:t.onDragEnterBox.bind(ea(t)),fieldid:Object(f.getSysFieldid)("advSearch_tree-area")},d.a.createElement("div",{fieldid:Object(f.getSysFieldid)("advSearch_tree")},d.a.createElement(p.Tree,{defaultExpandedKeys:"root0",closeIcon:d.a.createElement("p",{className:"tree-icon-content"},d.a.createElement(p.Icon,{className:"first",type:"uf-add-s-o"}),d.a.createElement(p.Icon,{className:"secend",type:"uf-minus"}),d.a.createElement(p.Icon,{className:"third",type:"uf-treefolderopen"})),openIcon:d.a.createElement("p",{className:"tree-icon-content"},d.a.createElement(p.Icon,{className:"first",type:"uf-reduce-s-o"}),d.a.createElement(p.Icon,{className:"secend",type:"uf-minus"}),d.a.createElement(p.Icon,{className:"third",type:"uf-treefolderopen"}))},t.createDom(e))))},t.defRightDom=function(){var e=t.state.searchInfo.status;return d.a.createElement("div",{className:"adv-right-area",id:"adv-right-area"},Object(f.isFunction)(t.props.addAdvBody)&&t.props.addAdvBody(),!t.props.hideSearchType&&d.a.createElement(oa,{selectedValue:e,onChange:t.handleChange.bind(ea(t))},d.a.createElement(p.Radio,{value:"normal"},t.multiLang["page-search-0006"]),d.a.createElement(p.Radio,{value:"super"},t.multiLang["page-search-0007"])),"normal"===e&&d.a.createElement("div",{ref:"normal",className:"normalArea",id:"advArea",style:{height:Object(f.isFunction)(t.props.addAdvBody)||t.props.hideSearchType?"auto":"calc(100% - 40px)"},onDragOver:t.onDragOver,onDrop:t.onDrop.bind(ea(t))},t.creatConditionUIDom("normal")),"super"===e&&d.a.createElement("div",{id:"advArea",className:"superArea",style:{height:Object(f.isFunction)(t.props.addAdvBody)?"auto":"calc(100% - 40px)"},onDragOver:t.onDragOver,onDrop:t.onDrop.bind(ea(t))},t.creatConditionUIDom("super")))},t.tabOnChange=function(e){if(t.tabIndex=e,(e=Number(e))>0&&Object(f.isFunction)(t.props.addAdvTabs)){var n=t.props.addAdvTabs()[e-1].callback;Object(f.isFunction)(n)&&n()}t.setStateEve()},t.createRightDom=function(){var e=[{name:t.props.searchConditionName||t.multiLang["page-search-0025"],content:t.defRightDom()}];return Object(f.isFunction)(t.props.addAdvTabs)&&(e=[].concat(Jr(e),Jr(t.props.addAdvTabs()))),e},t.onInputFocus=function(){document.getElementById("NC_searchPlanModalInput").focus()},t.state={showModal:!0,moveNode:null,userControlAll:!1,searchInfo:{snapshotMap:{simple:[],normal:[],super:[]}},onlyShowSuperBtn:e.onlyShowSuperBtn},t.lastStatus=e.lastStatus,Object(f.isFunction)(e.replaceRightBody)&&(t.state.userControlAll=!0,e.statusChange(t.state.status,t.state.userControlAll)),t.firstInit=!0,t.multiLang=e.multiLang,t.LangData=e.LangData,n=t.multiLang,nr=n,Object(f.isEmpty)(rr)&&(rr=[{display:nr["page-search-0047"],value:"="},{display:nr["page-search-0047"],value:"=="},{display:nr["page-search-0048"],value:">"},{display:nr["page-search-0049"],value:"<"},{display:nr["page-search-0050"],value:"between"},{display:nr["page-search-0051"],value:">="},{display:nr["page-search-0052"],value:"<="},{display:nr["page-search-0053"],value:"<>"},{display:nr["page-search-0054"],value:"like"},{display:nr["page-search-0055"],value:"left like"},{display:nr["page-search-0056"],value:"right like"},{display:nr["page-search-0057"],value:"is null"},{display:nr["page-search-0084"],value:"not like"},{display:nr["page-search-0085"],value:"is not null"}]),t.initByProps(e,!0),t}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this;Object(f.isFunction)(this.props.replaceAdvBody)||this.props.hideSearchCondition||this.createSearchCondition.call(this,this.items),this.searchChoosePlan=f.PubSub.subscribe("searchChoosePlan",(function(t,n){if(n){var r=e.props.searchPlanCache.find((function(e){return e.name==n}));r&&(e.setState({currentPlan:r}),e.clickSearchPlan(r))}}))}},{key:"componentWillUnmount",value:function(){this.searchChoosePlan&&f.PubSub.unsubscribe(this.searchChoosePlan)}},{key:"componentWillReceiveProps",value:function(e){e.searchInfo.showAdvModal&&this.initByProps(e,!1)}},{key:"shouldComponentUpdate",value:function(e,t){return!(!e.onlyShowAdvArea&&!e.searchInfo.showAdvModal)}},{key:"handleChange",value:function(e){this.state.searchInfo.status=e,this.props.searchInfo.status=e;var t=this.props.statusChangeEvent;t&&t(this.state.searchInfo.status),this.setStateEve()}},{key:"render",value:function(){var e=this;return d.a.createElement("div",{className:"modalBody",ref:"modalBody"},Object(f.isFunction)(this.props.replaceAdvBody)&&this.props.replaceAdvBody(),!Object(f.isFunction)(this.props.replaceAdvBody)&&d.a.createElement("div",{className:"modalBodyBox"},d.a.createElement("div",{className:"leftArea",fieldid:Object(f.getSysFieldid)("left_area")},d.a.createElement(p.Tabs,{defaultActiveKey:"1",onChange:this.tabChange.bind(this),activeKey:this.state.leftTab,tabBarStyle:"noborder",className:"searchTabStyle"},!this.props.hideSearchCondition&&d.a.createElement(na,{tab:d.a.createElement("div",{className:"1"==this.state.leftTab&&"tab-label-in"},this.multiLang["page-search-0004"]),key:"1"},this.props.syncTree.createSyncTree({treeId:this.props.moduleId,showLine:!1,neverDisable:!0,expandedKeys:["root"],onDoubleClickEve:this.clickRight,needEdit:!1,draggable:!0,searchType:"filtration",nodeRightOpt:"normal"===this.state.searchInfo.status&&{icon:"uf-triangle-right",callback:this.clickRight}})),!this.props.hideSearchPlan&&d.a.createElement(na,{tab:d.a.createElement("div",{className:"2"==this.state.leftTab&&"tab-label-in"},this.multiLang["page-search-0005"]),key:"2"},d.a.createElement("ul",{className:"searchPlanUl"},this.createSearchPlan())))),d.a.createElement("div",{className:"rightArea",fieldid:Object(f.getSysFieldid)("rigit_area"),style:{overflow:Object(f.isFunction)(this.props.replaceRightBody)?"auto":"hidden"}},Object(f.isFunction)(this.props.replaceRightBody)&&this.props.replaceRightBody(),!Object(f.isFunction)(this.props.replaceRightBody)&&d.a.createElement("span",{className:"clearData",onClick:this.clearAdvValue},this.multiLang["page-search-0017"]),!Object(f.isFunction)(this.props.replaceRightBody)&&d.a.createElement(p.Tabs,{style:{height:"100%"},className:"lucia",onChange:this.tabOnChange.bind(this),activeKey:this.tabIndex||"0"},this.createRightDom().map((function(t,n){return!0===t.defaultOpen&&e.defaultOpen&&(e.defaultOpen=!1),d.a.createElement(na,{tab:t.name,key:n},t.content)}),this)))),!Object(f.isEmpty)(this.multiLang)&&this.props.modal.createModal("editSearchPlanName@"+this.props.moduleId,{title:this.multiLang["page-search-0082"],content:this.modalContent.call(this,"edit"),beSureBtnClick:$n.bind(this,"edit"),leftBtnName:this.multiLang["page-search-0009"],rightBtnName:this.multiLang["page-search-0010"],zIndex:310,onEntered:this.onInputFocus,size:"sm",className:"search-modal"}),!Object(f.isEmpty)(this.multiLang)&&this.props.modal.createModal("addSearchPlan@"+this.props.moduleId,{title:this.multiLang["page-search-0081"],content:this.modalContent.call(this,"add"),size:"sm",backdrop:"static",beSureBtnClick:$n.bind(this,"add"),leftBtnName:this.multiLang["page-search-0009"],rightBtnName:this.multiLang["page-search-0010"],zIndex:310,onEntered:this.onInputFocus,className:"search-modal"}))}}])&&Gr(t.prototype,n),r&&Gr(t,r),o}(u.Component);function ca(e){return(ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function la(){return(la=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function sa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ua(e,t){return(ua=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function da(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pa(e);if(t){var a=pa(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return fa(this,n)}}function fa(e,t){return!t||"object"!==ca(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pa(e){return(pa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(907);var ha=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ua(e,t)}(i,e);var t,r,a,o=da(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={position:null},t.backPosition=function(){t.setState({position:{x:0,y:0}})},t.handStart=function(e,n){t.setState({position:{x:n.x,y:n.y}})},t.handleStop=function(e,n){t.setState({position:{x:n.x,y:n.y}})},t.getChildrenRef=function(e){e&&(t.savePlanFun=e.saveSearchPlanClick,t.queryFun=e.searchBtnClickEve,t.cancelClick=e.cancelClick,t.addPlanFun=e.addSearchPlanClick)},t}return t=i,(r=[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"getFunction",value:function(e,t,n,r){}},{key:"render",value:function(){var e=this,t=this.props,r=t.multiLang,a=t.searchModalTitle,o=t.fieldid,i=a||r["page-search-0025"];return V.a.createPortal(d.a.createElement("div",{className:"NC_searchAdvModalBox ".concat(this.props.className," search_").concat(this.props.moduleId)},d.a.createElement(p.HotKeys,{keyMap:{colse:p.HotKeys.USUAL_KEYS.ICON_CLOSE},handlers:{colse:"normal"===this.props.searchInfo.status?function(){e.cancelClick()}:function(){}},className:"close-hotkeys-wrapper",focused:!0,display:"inline"}),d.a.createElement("div",{className:"NC_searchAdvModalBackground"},d.a.createElement("div",{className:"NC_searchAdvModal",fieldid:Object(f.getSysFieldid)(o)?"".concat(o,"-search_modal-area"):"search_modal-area"},d.a.createElement(p.Dnd,{handle:".super-handle",cancel:".super-cancel",position:this.state.position,onStop:this.handleStop,bounds:".search_".concat(this.props.moduleId)},d.a.createElement("div",{className:"NC_searchAdvModal_drag"},d.a.createElement("div",{className:"modalHead super-handle",fieldid:Object(f.getSysFieldid)("header-area")},d.a.createElement("img",{src:n(389),className:"modal-header-img"}),d.a.createElement("span",{fieldid:Object(f.getSysFieldid)("".concat(i,"_title")),className:"modalTitle"},i),d.a.createElement("span",{className:"closeBtn iconfont icon-guanbi super-cancel",onClick:function(){e.cancelClick()},title:"Esc"})),d.a.createElement(ia,la({ref:this.getChildrenRef},this.props,{backPosition:this.backPosition})),d.a.createElement("div",{className:"modalFooter",fieldid:Object(f.getSysFieldid)("bottom-area")},this.props.showAdvSearchPlanBtn&&d.a.createElement("div",{className:"saveSearchPlan"},d.a.createElement(p.Button,{onClick:function(){e.savePlanFun()},shape:"border",className:"secondary-button secondary-button-wrapper footer-button-left",fieldid:"savePlan"},r["page-search-0008"]),d.a.createElement(p.Button,{onClick:function(){e.addPlanFun()},shape:"border",className:"secondary-button secondary-button-wrapper footer-button-right",fieldid:"addPlan"},r["page-search-0081"])),d.a.createElement("div",{className:"searchBtnGroup"},d.a.createElement("div",{className:"searchBtn search-btn-wrapper"},d.a.createElement(p.Button,{onClick:function(){e.queryFun()},colors:"danger",fieldid:"search",className:"button-primary button-primary-wrapper "},this.props.searchBtnName||r["page-search-0001"])),d.a.createElement("div",{className:"cancelBtn search-btn-wrapper"},d.a.createElement(p.Button,{onClick:function(){e.cancelClick()},shape:"border",fieldid:"cancel",className:"secondary-button secondary-button-wrapper"},r["page-search-0010"]))))))))),document.body)}}])&&sa(t.prototype,r),a&&sa(t,a),i}(u.Component),ma=n(75);function ya(e){return(ya="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ba(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function va(e,t){return(va=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ga(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Sa(e);if(t){var a=Sa(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ka(this,n)}}function ka(e,t){return!t||"object"!==ya(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Sa(e){return(Sa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Oa,wa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&va(e,t)}(o,e);var t,n,r,a=ga(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).state={value:t.props.value,showFlag:!0},t.handleChange=function(e){t.setState({value:e})},t.handleConfirm=function(e){var n=t.props,r=n.searchInfo,a=n.multiLang,o=n.value,i=n.editSearchPlan,c=n.beSureBtnClick;if(e&&e.stopPropagation(),t.state.value!==o){if(void 0!==r.searchPlanCache.find((function(e){return e.name===t.state.value})))return Object(f.toast)({content:a["page-search-0083"],color:"warning"}),void t.setState({showFlag:!1});if(""===t.state.value.replace(/\s+/g,""))return Object(f.toast)({content:a["page-search-0032"],color:"warning"}),void t.setState({showFlag:!1});t.setState({showFlag:!0}),i(t.state.value),c()}else t.setState({showFlag:!0})},t}return t=o,(n=[{key:"componentWillReceiveProps",value:function(e,t){e.searchInfo.showFlag&&this.setState({showFlag:!0}),"value"in e&&this.setState({value:e.value})}},{key:"render",value:function(){var e=this,t=this.props,n=t.chooseSearchPlan,r=t.item,a=t.searchAdvBtnClick,o=t.delSearchPlan,i=t.multiLang,c=t.searchInfo,l=t.value,s=c.currentPlan||c.defaultPlan,u=s.name,f=s.pk_ncc_queryscheme,h=W()({"icon-disable":r.isMyPlan||r.isquickqs}),m=W()({"item-current":u==l});return d.a.createElement("div",{className:"query_item ".concat(m)},this.state.showFlag?d.a.createElement("span",{className:"search_planName",onClick:n},this.state.value,"  ",u==this.state.value&&f==this.props.item.pk_ncc_queryscheme?d.a.createElement("i",{className:"iconfont icon-shenpitongguo"}):null):d.a.createElement(p.HotKeys,{keyMap:{high:["enter"]},handlers:{high:this.handleConfirm}},d.a.createElement(p.Input,{className:"search_input",autoFocus:!0,value:this.state.value,onClick:function(e){e.stopPropagation()},onChange:function(t){e.setState({value:t})}})),this.state.showFlag?d.a.createElement("span",{className:"search-plan-set"},d.a.createElement(p.Tooltip,{delayShow:800,inverse:!0,delayHide:1,overlay:i["page-search-0092"],placement:"top"},d.a.createElement("i",{className:"iconfont icon-cxzhongmingming ".concat(h),onClick:function(t){t.stopPropagation(),r.isMyPlan||r.isquickqs||e.setState({showFlag:!e.state.showFlag})}})),d.a.createElement(p.Tooltip,{delayShow:800,inverse:!0,delayHide:1,overlay:i["page-search-0093"],placement:"top"},d.a.createElement("i",{className:"iconfont icon-cxxiugai",onClick:a})),d.a.createElement(p.Tooltip,{delayShow:800,delayHide:1,inverse:!0,overlay:i["page-search-0094"],placement:"top"},d.a.createElement("i",{className:"iconfont icon-cxshanchu ".concat(h),onClick:function(e){e.stopPropagation(),r.isMyPlan||r.isquickqs||o()}}))):d.a.createElement("div",{className:"search-list-button"},d.a.createElement("span",{className:"button-item right",onClick:this.handleConfirm},i["page-search-0009"]),d.a.createElement("span",{className:"button-item left",onClick:function(t){t.stopPropagation(),e.setState({showFlag:!0,value:e.props.value})}},i["page-search-0010"])))}}])&&ba(t.prototype,n),r&&ba(t,r),o}(u.Component),Ca=n(19);function Ea(e){return(Ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ja(){return(ja=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function xa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _a(e,t){return(_a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Na(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Da(e);if(t){var a=Da(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ta(this,n)}}function Ta(e,t){return!t||"object"!==Ea(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Da(e){return(Da=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Aa(e){return(Aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ia(){return(Ia=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ma(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ra(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ba(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ka(e,t){return(Ka=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ha(e);if(t){var a=Ha(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return La(this,n)}}function La(e,t){return!t||"object"!==Aa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ha(e){return(Ha=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qa=function(e){return function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_a(e,t)}(i,t);var n,r,a,o=Na(i);function i(){var e;xa(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).state={isPass:!0},e}return n=i,(r=[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.areaId,r=t.name;this.searchRequiredToken=f.PubSub.subscribe("searchRequired",(function(t,a){var o="";Array.isArray(a)&&a.includes(r)?(e.setState({isPass:!1}),r===a[0]&&(o="".concat(n?"#"+n:"",' [hotkeytag="searchArea-').concat(a[0],'"]'),void 0===Ca.a[e.props.itemtype]?Ca.a.normal(o):Ca.a[e.props.itemtype](o))):a===r&&(e.setState({isPass:!1}),o="".concat(n?"#"+n:"",' [hotkeytag="searchArea-').concat(a,'"]'),void 0===Ca.a[e.props.itemtype]?Ca.a.normal(o):Ca.a[e.props.itemtype](o))})),this.clearWarningToken=f.PubSub.subscribe("clearWarning",(function(t,n){(Array.isArray(n)&&n.includes(r)||r==n)&&e.setState({isPass:!0})}))}},{key:"componentWillUnmount",value:function(){this.searchRequiredToken&&f.PubSub.subscribe(this.searchRequiredToken),this.clearWarningToken&&f.PubSub.subscribe(this.clearWarningToken),this.dom=null}},{key:"render",value:function(){var t=this;return d.a.createElement(e,ja({ref:function(e){t.dom=e}},this.props,{isPass:this.state.isPass}))}}])&&Pa(n.prototype,r),a&&Pa(n,a),i}(u.Component)}(Oa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ka(e,t)}(o,e);var t,n,r,a=Fa(o);function o(){return Ra(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props,t=e.dom,n=e.isPass,r=e.className,a=Ma(e,["dom","isPass","className"]),o=W()({un_pass:!n});return d.a.createElement("div",Ia({},a,{className:"".concat(r," ").concat(o)}),t)}}])&&Ba(t.prototype,n),r&&Ba(t,r),o}(u.Component))||Oa;function Va(e){return(Va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ua(){return(Ua=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Wa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ya(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wa(Object(n),!0).forEach((function(t){za(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function za(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ja(e){return function(e){if(Array.isArray(e))return Za(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Za(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Za(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Za(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ga(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xa(e,t){return(Xa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=to(e);if(t){var a=to(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return $a(this,n)}}function $a(e,t){return!t||"object"!==Va(t)&&"function"!=typeof t?eo(e):t}function eo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function to(e){return(to=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(906);var no={},ro=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xa(e,t)}(o,e);var t,n,r,a=Qa(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).completeFlag=!0,t.state={searchInfo:{},json:{},LangData:null,leftTab:"1",isRenderAdv:!1},t.props.get_this(eo(t)),t._this=t.props.getGloablThis(),t.meta=t._this.state.meta[t.props.id],t.preHandlerFlag=!0,t.searchAreaHeight=0,t}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this.meta,t=this;if(this.completeFlag){var n=this.props.renderCompleteEvent;f.PubSub.publish("areaChangeComplete",!0),setTimeout((function(){t.completeFlag&&!Object(f.isEmpty)(e)&&(t._this.infoExchangeController.publish("heightChange",{area:"searchArea"}),n&&n(""),t.completeFlag=!1)}))}}},{key:"render",value:function(){return co.call(this,this.props)}},{key:"componentWillReceiveProps",value:function(e){this.props.id!==e.id?(this.completeFlag=!0,e.get_this(this),this.meta=Object(f.deepClone)(this._this.state.meta[e.id])):this.meta=this._this.state.meta[e.id],this.state.searchInfo.showAdvModal||ao.call(this,e,this.state.searchInfo)}},{key:"componentDidUpdate",value:function(){this.searchDom&&this.searchAreaHeight!==this.searchDom.offsetHeight&&(f.PubSub.publish("areaChangeComplete",!0),this.searchAreaHeight=this.searchDom.offsetHeight)}},{key:"componentWillMount",value:function(){var e=this;if(ao.call(this,this.props,this.state.searchInfo),Object(f.getMultiLang)({moduleId:"page_search",callback:function(t,n,r){e.setState({json:t,LangData:r})}}),this.props.useCache){var t=f.ViewModel.getData("search_".concat(this.meta.oid||this.props.id));t&&this.setState({searchInfo:t})}}},{key:"componentWillUnmount",value:function(){this.completeFlag=!0,this.props.useCache&&f.ViewModel.setData("search_".concat(this.meta.oid||this.props.id),this.state.searchInfo),f.PubSub.publish("areaChangeComplete",!0),f.PubSub.unsubscribe("searchRequired"),f.PubSub.unsubscribe("clearWarning")}}])&&Ga(t.prototype,n),r&&Ga(t,r),o}(u.Component);function ao(e,t){var n=["simple","normal","super"],r=!1;t.status=e.onlyShowAdvArea?"normal":"simple",t.itemsMap={};var a=this.meta;a.items.forEach((function(e){return t.itemsMap[e.attrcode]=e})),t.snapshotMap={},n.forEach((function(e){t.snapshotMap[e]=[]})),t.showSearchItems=!a.isunfold,t.showSearchItems=!!e.showAdvBtn&&t.showSearchItems;var o,i=Wn.call(this,a.items,e.context,e.isTemplateOrder);if(t.fixedConditionGroup=i.filter((function(e){return e.isExtend}))||[],t.defaultPlan={pk_ncc_queryscheme:"001",isMyPlan:!0,name:"预置方案",renderobj4web:i},t.searchPlanCache=[t.defaultPlan].concat(Ja(a.queryschemes||[])),a.queryschemes&&a.queryschemes.forEach((function(e){e.isquickqs&&(o=e)})),t.hasOwnProperty("moduletype")||(t.snapshotCache={},n.forEach((function(e){t.snapshotCache[e]={}})),t.moduletype="search"),no.hasOwnProperty(e.id)||(t.showAdvModal=!1,t.showSearchPlan=!1,no[e.id]={}),t.isCompleted||(t.currentPlan=o||t.defaultPlan),t.currentPlan.isMyPlan){var c="",l="";t.currentPlan.renderobj4web.forEach((function(e){return c+=e.attrcode})),t.defaultPlan.renderobj4web.forEach((function(e){return l+=e.attrcode})),c!=l&&(t.currentPlan=t.defaultPlan)}else{t.searchPlanCache.find((function(e){return e.pk_ncc_queryscheme==t.currentPlan.pk_ncc_queryscheme}))||(t.currentPlan=t.defaultPlan)}t.isDefaultPlan="001"==t.currentPlan.pk_ncc_queryscheme,io(e.context,t,t.currentPlan),t.snapshotMap.simple=t.currentPlan.renderobj4web_snap,t.hasOwnProperty("isCompleted")||(t.isCompleted=!0,r=!0),r&&Object(f.isFunction)(e.setInitValueEvent)&&e.setInitValueEvent("simple")}function oo(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(Array.isArray(t))return t.map((function(t){if(Array.isArray(t.children))return t.children=oo(e,t.children,n,++r),t;var a={value:"",display:""};Object(f.isEmpty)(t.initialvalue)||(a.value=t.initialvalue.value,a.display=t.initialvalue.display),t.initialvalue=t.initialvalue||t.value;var o=n[t.attrcode];if(o){if("checkbox_switch"===o.itemtype)t.initialvalue&&""===t.initialvalue.value&&(t.initialvalue.value=!1);else if("refer"===o.itemtype&&t.initialvalue){var i=Un(t.initialvalue,e);t.initialvalue.display=i.display||t.initialvalue.display}else if("residtxt"===o.itemtype){var c,l=(null===(c=o.languageMeta.filter((function(e){return e.languageCode==f.localeLang}))[0])||void 0===c?void 0:c.index)||1;a.index=l,t.initialvalue&&!t.initialvalue.hasOwnProperty("index")&&(t.initialvalue.index=l)}var s={attrcode:t.attrcode,initialvalue:a,operationSign:t.operationSign||(t.queryOperateType?t.queryOperateType.split("@")[0]:""),visible:!1===t.visible?t.visible:o.visible,isExtend:!!o.isfixedcondition};return"residtxt"===o.itemtype&&(Object(f.isEmpty)(t.valueMap)?t.initialvalue&&t.initialvalue.value&&(s.valueMap={},s.valueMap[t.attrcode+t.initialvalue.index]={value:t.initialvalue.value}):s.valueMap=t.valueMap),s}})).filter((function(e){return e&&e.visible}))}function io(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(n){var a="001"==n.pk_ncc_queryscheme;if(n.renderobj4web_snap&&r)n.renderobj4web_snap=oo(e,n.renderobj4web_snap,t.itemsMap);else if(a)n.renderobj4web_snap=oo(e,t.defaultPlan.renderobj4web,t.itemsMap);else if(n.renderobj4web&&n.renderobj4web.length&&"root"===n.renderobj4web[0].refpk){var o=[].concat(Ja(t.fixedConditionGroup),Ja(n.renderobj4web[0].children)),i=qn(n);i.renderobj4web[0].children=o,n.renderobj4web_snap=oo(e,i.renderobj4web,t.itemsMap)}else{var c=[].concat(Ja(t.fixedConditionGroup),Ja(n.renderobj4web));n.renderobj4web_snap=oo(e,c,t.itemsMap)}}}function co(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.id,r=t.clickSearchBtn,a=t.searchBtnName,o=void 0===a?"":a,i=t.onAfterEvent,c=t.showSearchBtn,l=void 0===c||c,s=t.showAdvBtn,u=void 0===s||s,h=t.showClearBtn,m=void 0===h||h,y=t.showAdvSearchPlanBtn,b=void 0===y||y,v=t.replaceAdvBtnEve,g=t.replaceAdvBody,k=t.addAdvTabs,S=t.addAdvBody,O=t.replaceRightBody,w=t.hideSearchCondition,C=void 0!==w&&w,E=t.hideSearchPlan,j=void 0!==E&&E,x=t.saveSearchPlan,P=t.clickPlanEve,_=t.clickAdvBtnEve,N=t.hideBtnArea,T=void 0!==N&&N,D=t.advSearchClearEve,A=t.onlyShowSuperBtn,I=void 0!==A&&A,M=t.replaceSuperBtn,R=void 0===M?"":M,B=t.onOperateTypeChange,K=t.onlyShowAdvArea,F=void 0!==K&&K,L=t.onlyShowModal,H=void 0!==L&&L,q=(t.renderCompleteEvent,t.statusChangeEvent),U=t.context,W=void 0===U?{}:U,Y=t.renderItem,z=void 0===Y?{}:Y,J=t.createScript,Z=void 0===J?function(){}:J,G=t.setInitValueEvent,X=t.isSynInitAdvSearch,Q=t.onlyShowPlan,$=void 0!==Q&&Q,ee=t.searchModalTitle,te=void 0===ee?"":ee,ne=t.searchConditionName,re=void 0===ne?"":ne,ae=t.currentSearch,oe=void 0===ae||ae,ie=t.fieldid,ce=t.opneBtnClick,le=t.removeQuerConditionEve,se=t.isTemplateOrder,ue=t.hideSearchType,de=void 0!==ue&&ue,fe=t.onlyShowSuperCondition,pe=void 0!==fe&&fe,he=t.hiddenFunList,me=this.state.searchInfo,ye=this.meta,be=ye.oid,ve=this.state.json,ge=this.state.LangData;function ke(e){this.setState({searchInfo:me},(function(){"function"==typeof e&&e()}))}function Se(e,t){var n=e.items,r=Object(ma.d)(t),a="select",o=["datepicker","datetimepicker","rangepicker","NCTZDatePickerStart","NCTZDatePickerEnd","NCTZDatePickClientTime","NCTZDatePickClientHourTime","NCTZDatePickerRangeDay","datePickerNoTimeZone"];Array.isArray(e.queryschemes)&&e.queryschemes.forEach((function(e){Array.isArray(e.renderobj4web)&&e.renderobj4web.forEach((function(e){return function e(t){if(t.children)t.children.forEach((function(t){return e(t)}));else{var i=n.find((function(e){return e.attrcode==t.attrcode}))||{},c=[a].concat(o),l=t.initialvalue.value;if(l&&c.some((function(e){return e==i.itemtype})))if(("between"===t.operationSign||i.isMultiSelectedEnabled)&&"string"==typeof l&&(l=l.split(",")),"select"==i.itemtype){Object(f.isEmpty)(i.options)&&(i.options=[t.initialvalue]);var s=i.options.filter((function(e){return"string"==typeof l?e.value==l:l.find((function(t){return e.value===t}))}))||[];t.initialvalue.display=s.map((function(e){return e.display})).join(",")}else o.some((function(e){return e==i.itemtype}))&&(Array.isArray(l)?t.initialvalue.display=l.map((function(e){return Object(ma.e)(e)?r[e]:e})).join("~"):t.initialvalue.display=Object(ma.e)(l)?r[l]:l)}}(e)}))}))}ke=ke.bind(this),this.oid=be,Ce=Ce.bind(this),this.state.searchAdvBtnClick=Ce,Object(f.isEmpty)(ve)||(lr(ve),Ln(ve),this.state.searchInfo.hasOwnProperty("snapshotMap")&&this.preHandlerFlag&&(this.preHandlerFlag=!1,Se(ye,ve))),Object(f.isEmpty)(ve)||Object(f.isEmpty)(me.searchPlanCache)||me.searchPlanCache.forEach((function(e){"001"==e.pk_ncc_queryscheme&&(e.name=ve["page-search-0018"])})),o=o||d.a.createElement("i",{className:"iconfont icon-sousuo"}),R=R||ve["page-search-0003"];var Oe=function(){setTimeout((function(){var t=me.snapshotMap[me.status],a=sr.call(e,n,t,!0);if(a){var o=zn(me.itemsMap,t),i={queryAreaCode:n,oid:be,querytype:"tree",querycondition:a,template:o,nctz:Vn()};r&&"function"==typeof r&&r(Ya(Ya({},e._this),e._this.props),a,"simple",a&&i)}}),0)},we=function(){var t=qn(me.snapshotMap[me.status]),n="plan"===me.status?me.currentSnapshot:me.snapshotMap[me.status];Pr.call(e,n),e.state.searchInfo=me,D&&"function"==typeof D&&D(t),ke()};function Ce(e,t,n){if(Object(f.isFunction)(v))v();else{var r,a;document.body.style.overflow="hidden",e.showAdvModal=!0,e.showSearchPlan=!1,this.lastStatus=e.status;var o=e.searchPlanCache.find((function(e){return e.name===n}));o&&o.pk_ncc_queryscheme!==e.currentPlan.pk_ncc_queryscheme&&(e.currentClickPlan=o),e.isDefaultPlan="001"==e.currentPlan.pk_ncc_queryscheme,e.currentPlan.renderobj4web_snap||io(W,e,e.currentPlan),(null===(r=e.currentClickPlan)||void 0===r?void 0:r.renderobj4web_snap)||io(W,e,e.currentClickPlan);var i=e.currentClickPlan||e.currentPlan;i&&!Object(f.isEmpty)(i.renderobj4web_snap)&&"root"==i.renderobj4web_snap[0].attrcode?e.status="super":e.status="normal",null!==(a=t)&&void 0!==a&&a.target&&(t="1"),this.state.leftTab=t||"1",this.state.isRenderAdv=!0,n&&f.PubSub.publish("searchChoosePlan",n),ke((function(){Object(f.isFunction)(_)?_():Object(f.isFunction)(q)&&q(e.status)}))}}var Ee=function(){return d.a.createElement("div",{className:"search-component-rowArea"},!I&&l&&d.a.createElement(p.Tooltip,{delayShow:800,inverse:!0,overlay:d.a.createElement("div",null,"string"==typeof o?o:"".concat(ve["page-search-0001"],"(Enter)")),placement:"top"},d.a.createElement("span",{fieldid:Object(f.getSysFieldid)("search_btn"),className:u?"search-component-searchBtn":"search-component-searchBtn hide-adv-btn",onClick:Oe.bind(e)},o)),!I&&m&&d.a.createElement(p.Tooltip,{delayShow:800,inverse:!0,overlay:d.a.createElement("div",{style:{padding:"0"}},"".concat(ve["page-search-0002"],"(Alt+Del)")),placement:"top"},d.a.createElement("span",{className:"clearBtn",fieldid:Object(f.getSysFieldid)("searchClear_btn"),onClick:we.bind(e)},d.a.createElement("i",{className:"iconfont icon-qingkong1"}))),I&&d.a.createElement(p.Tooltip,{delayShow:800,inverse:!0,overlay:d.a.createElement("div",null,R),placement:"top"},d.a.createElement(p.Button,{style:{maxWidth:I?"initial":"29%"},colors:"primary",onClick:Ce.bind(e,me),fieldid:"replaceSuper"},R)))},je=function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0;if(a&&0===o)return!me.showSearchItems&&d.a.createElement("div",{className:"search-button"},T?null:Ee());var l=me.itemsMap[t.attrcode];if(l){var s=new Hr({id:n,searchInfo:me,snapshotItem:t,onAfterEvent:i,setStateEve:ke,renderItem:z,context:e.props.context,createScript:Z,multiLang:ve,LangData:ge,clickSearch:Oe,hiddenFunList:he});return d.a.createElement(qa,{areaId:n,key:t.attrcode+o+c,name:t.attrcode,itemtype:l.itemtype,fieldid:Object(f.getSysFieldid)(t.attrcode),style:{marginTop:r?"8px":"0"},className:"search-item-wrap",dom:s,hotkeytag:"searchArea-".concat(t.attrcode)})}return null},xe=function(){me.showSearchPlan=!1,ke()},Pe=function(t,a){if(t.pk_ncc_queryscheme!=me.currentPlan.pk_ncc_queryscheme){var o=[];if(me.status="simple",me.currentPlan=t,me.isDefaultPlan="001"==t.pk_ncc_queryscheme,!me.userControlAdvArea)Me(n);io(W,me,t,!1),me.snapshotMap.simple=t.renderobj4web_snap,me.currentSnapshot=[],me.snapshotMap.simple.forEach((function(e){if(e.initialvalue){var t=e.initialvalue;"refer"===me.itemsMap[e.attrcode].itemtype&&(t=Un(t,W)),Object(f.isEmpty)(t.value)&&Object(f.isEmpty)(t.display)&&me.currentSnapshot.push(e)}o.push(e.attrcode)})),xe(),Object(f.isFunction)(P)&&P(t,e._this),Object(f.isFunction)(G)&&G("plan"),Object(f.isFunction)(q)&&q("plan"),Object(f.isFunction)(r)&&Zn(me.snapshotMap[me.status],me,W)&&Oe(),e._this.infoExchangeController.publish("heightChange",{area:"searchArea"}),f.PubSub.publish("areaChangeComplete",!0),f.PubSub.publish("clearWarning",o)}},_e=function(t,n){e.state.searchPlanName=n},Ne=function(t){Nt({color:"warning",hotKeyboard:!0,title:ve["page-search-0031"],content:d.a.createElement("div",{dangerouslySetInnerHTML:{__html:ve["page-search-0015"]}}),beSureBtnName:ve["page-search-0009"],cancelBtnName:ve["page-search-0010"],beSureBtnClick:er.bind(e,!0,t,Oe)})},Te=function(){var t=me.searchPlanCache,n=null;return n=t&&t.length?t.map((function(t,n){return d.a.createElement("p",{key:t.pk_ncc_queryscheme,className:"searchPlanList",fielid:"".concat(t.name,"_sub-btn")},d.a.createElement(wa,{item:t,value:t.name,searchInfo:me,chooseSearchPlan:Pe.bind(e,t),searchAdvBtnClick:Ce.bind(e,me,"2",t.name),editSearchPlan:_e.bind(e,n),delSearchPlan:Ne.bind(e,t.pk_ncc_queryscheme),beSureBtnClick:$n.bind(e,"edit",!0,t.name),showFlag:me.showFlag,multiLang:ve}))})):d.a.createElement("a",null,d.a.createElement("p",{className:"searchPlanList",fiedlid:"".concat(ve["page-search-0019"],"_sub-btn")},d.a.createElement("span",{className:"searchPlanName"},ve["page-search-0019"])),d.a.createElement("p",{className:"searchPlanList",fiedlid:"".concat(ve["page-search-0020"],"_sub-btn")},d.a.createElement("span",{className:"addSearchPlanHref",onClick:Ce.bind(e,me)},ve["page-search-0020"]))),d.a.createElement("div",{className:"searchPlanBox  ".concat(me.showSearchPlan?null:"hideMore")},n)},De=function(){me.showAdvModal=!1,ke()},Ae=function(t){me.searchPlanCache=t,e._this.state.meta[n].queryschemes=t.filter((function(e){return"001"!=e.pk_ncc_queryscheme})),ke()},Ie=function(e){me.snapshotMap.simple=e.renderobj4web,me.currentPlan=e,ke()},Me=function(e){me.dataSource=e,ke()},Re=function(e){switch(me.itemsMap[e.attrcode].itemtype){case"refer":case"select":case"datepicker":case"NCTZDatePickerEnd":case"NCTZDatePickerStart":case"radio":return e.initialvalue.display;case"checkbox":case"checkbox_switch":return d.a.createElement(p.Checkbox,{checked:!("N"===e.initialvalue.value||!1===e.initialvalue.value),disabled:!0});case"rangepicker":case"datetimepicker":return e.initialvalue.display;default:return e.initialvalue.value}},Be=function(){return d.a.createElement("span",null,ve["page-search-0025"],": ",d.a.createElement("span",{className:"search-conditions-number"},"(",Gn(me.snapshotMap.simple).filter((function(e){return Fe(e)})).length,")"))},Ke=function(){me.status;var t=me.snapshotMap,n=me.itemsMap,r=me.showAdvModal;if(I)return d.a.createElement("div",{className:"lightapp-component-search"},T?null:Ee());var a=[],o=[],i=Gn(t.simple);return i.filter((function(e){return e.visible})).map((function(e,t){n[e.attrcode]&&(o.push(e),5===o.length&&(a.push(Ja(o)),o=[]))})),a.push(o),d.a.createElement(p.HotKeys,{className:"lightapp-component-search",keyMap:{query:["enter"],delete:["Alt+Del"]},handlers:{delete:function(){document.body.focus(),we.call(e)},query:function(){Oe()}},attach:!1},d.a.createElement(p.HotKeys,{keyMap:{high:["f3"]},handlers:{high:function(){oe&&u&&!r&&Ce(me)}},display:"inline",attach:document.body,focused:!0}),u&&d.a.createElement("div",{className:"".concat(me.showSearchItems?"search-open-close":" "," search-top")},d.a.createElement("div",{className:"search-edit"},d.a.createElement(p.Dropdown,{trigger:["click"],placement:"bottomLeft",overlay:d.a.createElement("div",{className:"query_condo"},d.a.createElement("ul",{className:"query_content"},Te.call(e)),d.a.createElement("div",{className:"create_new",onClick:function(){Ce(me)},fieldid:Object(f.getSysFieldid)("create_new_btn")},d.a.createElement("sapn",{className:"new_content"}," + ".concat(ve["page-search-0080"])))),onVisibleChange:function(e){e&&(me.showFlag=!0,ke())},fieldid:"search-plan"},d.a.createElement("div",{className:"search-name-wrapper",fieldid:Object(f.getSysFieldid)("search-plan_btn")},d.a.createElement("span",{className:"search-plan-name"},me.currentPlan&&me.currentPlan.name||me.defaultPlan.name),d.a.createElement("i",{className:"iconfont icon-bottom"}))),d.a.createElement(p.Tooltip,{delayShow:800,inverse:!0,overlay:d.a.createElement("div",{style:{padding:"10px"}},"F3"),placement:"top"},d.a.createElement("span",{className:"search-super",onClick:function(e){Ce(me)}},ve["page-search-0003"]))),me.showSearchItems&&d.a.createElement(p.Dropdown,{trigger:["hover"],overlayClassName:"search-dropdown",minOverlayWidthMatchTrigger:!1,delayShow:.8,placement:"bottomLeft",overlay:i.filter((function(e){return e.initialvalue.value})).length&&d.a.createElement("div",{className:"search-condition"},i.map((function(e){if(Fe(e))return d.a.createElement("p",{className:"search-condition-item"},d.a.createElement("span",{className:"item-title"},"".concat(me.itemsMap[e.attrcode].label,": ")),d.a.createElement("span",{className:"item-content"},Re(e)))})))},d.a.createElement("div",{className:"search-conditions-value",onClick:function(){me.showSearchItems=!1,ke()}},d.a.createElement("span",null,me.showSearchItems&&Be(),"  ",i.map((function(e){if(Fe(e))return me.itemsMap[e.attrcode].label+";"}))))),!$&&!I&&u&&d.a.createElement("div",{className:"search-open",onClick:function(){me.showSearchItems=!me.showSearchItems,f.PubSub.publishSync("beforeAreaChangeComplete",!0),ke((function(){e._this.infoExchangeController.publishSync("heightChange",{area:"searchArea"}),ce&&ce()}))}},me.showSearchItems?d.a.createElement("span",{className:"search-open-icon"},d.a.createElement("i",{className:"label"},ve["page-search-0087"]),d.a.createElement("i",{className:"iconfont icon-chaxunmoren"})):d.a.createElement("span",{className:"search-open-icon"},d.a.createElement("i",{className:"label"},ve["page-search-0088"]),d.a.createElement("i",{className:"down iconfont icon-chaxunmoren"})))),!$&&!me.showSearchItems&&d.a.createElement("div",{className:"item-contant"},a.map((function(e,t){return 0===t&&e.push("button"),d.a.createElement("div",{className:"item-rows ".concat(me.hideSearch&&0!=t?"hideMore":"")},e.map((function(n,r){return je(n,t>0,r===e.length-1,t,r)})))}))))};function Fe(e){return"is null"==e.operationSign||"is not null"==e.operationSign||(!Object(f.isEmpty)(e.initialvalue.value)&&"refer"!=e.type||!Object(f.isEmpty)(e.initialvalue.value)&&"refer"==e.type&&!Qn(e.initialvalue.value))}var Le=function(e){return d.a.createElement("div",{className:"NC_searchPlanMain"},e.map((function(e){return je(e)})))},He=function(){br.call(e._this,n)},qe=function(){me.showHideSearchPlan=!me.showHideSearchPlan,ke()},Ve=function(){return!Object(f.isEmpty)(me.currentSnapshot)&&me.currentSnapshot.length>12&&(me.showMoreBtn=!0),d.a.createElement(p.Col,{className:"lightapp-component-search ".concat(me.showHideSearchPlan&&"lightapp-component-search-absolute")},d.a.createElement(p.Col,{md:10,sm:8,xs:6,id:n,className:"NC_searchPlanBox ".concat(me.showHideSearchPlan?null:"searchPlanBoxHeight")},d.a.createElement("p",{className:"NC_searchPlanName"},me.currentPlan.name),Le(me.currentSnapshot),d.a.createElement("div",{className:"NC_searchPlanBtn"},d.a.createElement(p.Tooltip,{delayShow:800,inverse:!0,overlay:ve["page-search-0021"],placement:"top"},d.a.createElement("span",{className:"closeSearchPlan",onClick:He.bind(e)},"×")),me.showMoreBtn?d.a.createElement("span",{className:"moreSearchPlan",onClick:qe.bind(e)},me.showHideSearchPlan?ve["page-search-0022"]:ve["page-search-0023"]):null)),Ee())},Ue=function(e,t){me.advSearchStatus=e,me.userControlAdvArea=t},We=function(e){ke()};return Object(f.isEmpty)(ve)?null:d.a.createElement("div",{ref:function(t){e.searchDom=V.a.findDOMNode(t)},className:"search-area-contant ".concat(u?"":"search-area-contant-margin"),fieldid:Object(f.getSysFieldid)(ie?"".concat(ie,"_search-area"):"search-area")},F?d.a.createElement("div",{className:"NC_searchAdvModal",fieldid:Object(f.getSysFieldid)("search_modal-area"),style:{width:"100%"}},d.a.createElement(ia,Ua({className:"".concat(me.showAdvModal?"showAdvModal":"hideAdvModal"),moduleId:n,searchBtnName:o,closeModal:De,searchBtnClick:r,onAfterEvent:i,showAdvSearchPlanBtn:b,replaceAdvBody:g,addAdvTabs:k,searchConditionName:re,hideSearchType:de,onlyShowSuperCondition:pe,addAdvBody:S,searchPlanCache:me.searchPlanCache,searchPlanCacheChange:function(e){return Ae(e)},upDateSearchPlan:function(e){return Ie(e)},oid:be,hideSearchCondition:C,hideSearchPlan:j,saveSearchPlan:x,replaceRightBody:O,afterClickSearchPlan:Me,clickPlanEve:P,statusChange:Ue,advSearchClearEve:D,afterEditSearchPlan:We,onOperateTypeChange:B,searchInfo:me,_this:this,changeCompleteFlag:function(t){return e.completeFlag=t},statusChangeEvent:q,onlyShowSuperBtn:I,createScript:Z,renderItem:z,meta:this.meta,setInitValueEvent:G,multiLang:this.state.json,LangData:ge,lastStatus:this.lastStatus,isTemplateOrder:se,removeQuerConditionEve:le,hiddenFunList:he},this.props))):H?u&&(X||this.state.isRenderAdv)?d.a.createElement(ha,Ua({moduleId:n,searchBtnName:o,searchModalTitle:te,searchConditionName:re,hideSearchType:de,onlyShowSuperCondition:pe,className:"".concat(me.showAdvModal?"showAdvModal":"hideAdvModal"),closeModal:De,searchBtnClick:r,onAfterEvent:i,showAdvSearchPlanBtn:b,replaceAdvBody:g,addAdvTabs:k,addAdvBody:S,searchPlanCache:me.searchPlanCache,searchPlanCacheChange:function(e){return Ae(e)},upDateSearchPlan:function(e){return Ie(e)},oid:be,hideSearchCondition:C,hideSearchPlan:j,saveSearchPlan:x,replaceRightBody:O,afterClickSearchPlan:Me,clickPlanEve:P,statusChange:Ue,advSearchClearEve:D,afterEditSearchPlan:We,onOperateTypeChange:B,searchInfo:me,_this:this,changeCompleteFlag:function(t){return e.completeFlag=t},statusChangeEvent:q,onlyShowSuperBtn:I,createScript:Z,renderItem:z,setInitValueEvent:G,meta:this.meta,multiLang:this.state.json,LangData:ge,lastStatus:this.lastStatus,leftTab:this.state.leftTab,removeQuerConditionEve:le,isTemplateOrder:se,hiddenFunList:he},this.props)):null:d.a.createElement("div",null,d.a.createElement(p.Row,{id:n,style:{minHeight:me.showHideSearchPlan?"90px":"0px"},className:" NC_CreateSearch ".concat("plan"===me.status?"NC_searchAreaHeight":null)},("simple"===me.status||me.showAdvModal||I)&&Ke(),"plan"===me.status&&!I&&Ve(),u&&(X||this.state.isRenderAdv)?d.a.createElement(ha,Ua({moduleId:n,searchBtnName:o,searchModalTitle:te,searchConditionName:re,onlyShowSuperCondition:pe,hideSearchType:de,className:"".concat(me.showAdvModal?"showAdvModal":"hideAdvModal"),closeModal:De,searchBtnClick:r,onAfterEvent:i,showAdvSearchPlanBtn:b,replaceAdvBody:g,addAdvTabs:k,addAdvBody:S,searchPlanCache:me.searchPlanCache,searchPlanCacheChange:function(e){return Ae(e)},upDateSearchPlan:function(e){return Ie(e)},oid:be,hideSearchCondition:C,hideSearchPlan:j,saveSearchPlan:x,replaceRightBody:O,afterClickSearchPlan:Me,clickPlanEve:P,statusChange:Ue,advSearchClearEve:D,afterEditSearchPlan:We,onOperateTypeChange:B,searchInfo:me,_this:this,changeCompleteFlag:function(t){return e.completeFlag=t},statusChangeEvent:q,onlyShowSuperBtn:I,createScript:Z,renderItem:z,setInitValueEvent:G,meta:this.meta,multiLang:this.state.json,LangData:ge,lastStatus:this.lastStatus,leftTab:this.state.leftTab,fieldid:ie,removeQuerConditionEve:le,isTemplateOrder:se,hiddenFunList:he},this.props)):null)))}function lo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function so(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lo(Object(n),!0).forEach((function(t){uo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fo={NCCreateSearch:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.clickSearchBtn,r=t.searchBtnName,a=void 0===r?"":r,o=t.onAfterEvent,i=t.showSearchBtn,c=void 0===i||i,l=t.showAdvBtn,s=void 0===l||l,u=t.showClearBtn,p=void 0===u||u,h=t.showAdvSearchPlanBtn,m=void 0===h||h,y=t.replaceAdvBtnEve,b=t.replaceAdvBody,v=t.addAdvTabs,g=t.addAdvBody,k=t.replaceRightBody,S=t.hideSearchCondition,O=void 0!==S&&S,w=t.hideSearchPlan,C=void 0!==w&&w,E=t.saveSearchPlan,j=t.clickPlanEve,x=t.clickAdvBtnEve,P=t.hideBtnArea,_=void 0!==P&&P,N=t.advSearchClearEve,T=t.onlyShowSuperBtn,D=void 0!==T&&T,A=t.replaceSuperBtn,I=void 0===A?"":A,M=t.onOperateTypeChange,R=t.onlyShowAdvArea,B=void 0!==R&&R,K=t.onlyShowModal,F=void 0!==K&&K,L=t.renderCompleteEvent,H=t.statusChangeEvent,q=t.context,V=void 0===q?"":q,U=t.setInitValueEvent,W=t.useCache,Y=void 0===W||W,z=t.isSynInitAdvSearch,J=void 0!==z&&z,Z=t.onlyShowModalCancelCallback,G=t.onlyShowPlan,X=void 0!==G&&G,Q=t.searchModalTitle,$=void 0===Q?"":Q,ee=t.searchConditionName,te=void 0===ee?"":ee,ne=t.currentSearch,re=void 0===ne||ne,ae=t.opneBtnClick,oe=t.isTemplateOrder,ie=void 0!==oe&&oe,ce=t.removeQuerConditionEve,le=t.fieldid,se=t.hideSearchType,ue=void 0!==se&&se,de=t.onlyShowSuperCondition,fe=void 0!==de&&de,pe=t.hiddenFunList,he=void 0===pe?{}:pe;if(Object(f.isEmpty)(this.state.meta[e])||Object(f.isEmpty)(this.state.meta[e].items))return null;var me=function(t){this.myState.search["searchArea_".concat(e)]=t},ye=function(){this.myState.search["searchArea_".concat(e)]={},delete this.myState.search["searchArea_".concat(e)]},be=function(){return this},ve=so(so({},f.ViewModel.getContext()),V||this.app_context);return d.a.createElement(ro,{renderItem:this.state.renderItem.search&&this.state.renderItem.search.hasOwnProperty(e)?this.state.renderItem.search[e]:{},context:ve,syncTree:this.syncTree,modal:this.modal,get_this:me.bind(this),remove_this:ye.bind(this),createScript:f.createScript.bind(this),search:this.search,getGloablThis:be.bind(this),id:e,clickSearchBtn:n,searchBtnName:a,onAfterEvent:o,showSearchBtn:c,showAdvBtn:s,showClearBtn:p,showAdvSearchPlanBtn:m,replaceAdvBtnEve:y,replaceAdvBody:b,addAdvTabs:v,addAdvBody:g,replaceRightBody:k,hideSearchCondition:O,hideSearchPlan:C,saveSearchPlan:E,clickPlanEve:j,clickAdvBtnEve:x,hideBtnArea:_,advSearchClearEve:N,onlyShowSuperBtn:D,replaceSuperBtn:I,onOperateTypeChange:M,onlyShowAdvArea:B,onlyShowModal:F,renderCompleteEvent:L,statusChangeEvent:H,setInitValueEvent:U,useCache:Y,isSynInitAdvSearch:J,onlyShowModalCancelCallback:Z,onlyShowPlan:X,searchModalTitle:$,searchConditionName:te,onlyShowSuperCondition:fe,currentSearch:re,fieldid:le,opneBtnClick:ae,isTemplateOrder:ie,removeQuerConditionEve:ce,hideSearchType:ue,hiddenFunList:he})},setSearchValue:function(e,t,n){if(ar.call(this,e)){var r=this.myState.search["searchArea_".concat(e)];ur.call(r,e,t,n)}},setSearchValByField:function(e,t,n,r){if(ar.call(this,e)){r&&!["simple","plan","normal","super"].some((function(e){return e===r}))&&(r="");var a=this.myState.search["searchArea_".concat(e)];ir.call(a,e,t,n,r)}},getAllSearchData:yr,getSearchValByField:function(e,t,n){if(ar.call(this,e)){n&&!["simple","plan","normal","super"].some((function(e){return e===n}))&&(n="");var r=this.myState.search["searchArea_".concat(e)];return or.call(r,e,t,n)}},setDisabledByField:function(e,t,n){if(ar.call(this,e)){var r=this.myState.search["searchArea_".concat(e)];fr.call(r,e,t,n)}},closeSearchPlanArea:br,openAdvSearch:function(e,t,n){if(ar.call(this,e)){var r=this.myState.search["searchArea_".concat(e)];t&&r.state.searchAdvBtnClick(r.state.searchInfo),r.setState({searchInfo:r.state.searchInfo},n)}},setDisabled:function(e,t){if(ar.call(this,e)){for(var n=this.state.meta[e].items,r=n.length;r--;){n[r].disabled=t}this.setState({meta:this.state.meta})}},clearSearchArea:function(e){if(ar.call(this,e)){var t=this.myState.search["searchArea_".concat(e)];dr.call(t,e)}},getQueryInfo:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Object(f.isEmpty)(this.state.meta[e]))return{};var n=yr.call(this,e,t);return n?{queryAreaCode:e,oid:this.state.meta[e].oid,querytype:"tree",querycondition:n,nctz:Vn()}:{}},getOprtypeByField:function(e,t){if(ar.call(this,e)){var n=this.myState.search["searchArea_".concat(e)];return mr.call(n,e,t)}},changeItemVisibleByField:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=ar.call(this,e);if(r){var a=this.myState.search["searchArea_".concat(e)],o=a.state.searchInfo,i=o.isDefaultPlan,c=o.snapshotMap,l=o.status,s=this.state.meta[e].items;if(i){var u=a.props.context;s.find((function(e){return e.attrcode===t})).visible=n,Object.keys(c).forEach((function(e){if(l==e){var t=c[e];c[e]="super"==e?vr.call(a,s,"super"):Jn(t,s,u)}}))}else if(n){var d=s.find((function(e){return e.attrcode===t})),f={key:t,attrcode:t,initialvalue:{display:"",value:""},isExtend:!1,isfixedcondition:!1,label:d.label,operationOptions:d.queryOperateType.split("@"),operationSign:d.queryOperateType.split("@")[0],remove:!0,visible:!0};c[l].push(f)}else c[l]=c[l].filter((function(e){return e.attrcode!=t}));a.setState({searchInfo:o})}},setRequiredByField:function(e,t,n){if(ar.call(this,e)){var r=this.myState.search["searchArea_".concat(e)];pr.call(r,e,t,n)}},setTemlateByField:function(e,t,n,r){if(ar.call(this,e)){var a=this.myState.search["searchArea_".concat(e)];hr.call(a,e,t,n,r)}}};function po(e){return(po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ho(){return(ho=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function mo(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function yo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bo(e,t){return(bo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ko(e);if(t){var a=ko(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return go(this,n)}}function go(e,t){return!t||"object"!==po(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ko(e){return(ko=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1877);var So=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bo(e,t)}(o,e);var t,n,r,a=vo(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).getTitle=function(e,n){var r=t.state.json;return!e&&n&&("success"===n?e=r["0001"]:"info"===n?e=r["0002"]:"warning"===n?e=r["0003"]:"danger"===n&&(e=r["0004"])),e},t.state={json:{}},t}return t=o,(n=[{key:"componentWillMount",value:function(){var e=this;Object(f.getMultiLang)({moduleId:"container_toast",callback:function(t,n){n&&e.setState({json:t},(function(){}))}})}},{key:"render",value:function(){var e=this,t=this.state.json,n=this.props,r=n.modalData,a=n.close,o=n.size,i=n.className,c=n.getClassName,l=n.hasCloseBtn,s=n.backdrop,u=n.indexInfo,f=n.beSureClick,h=n.cancelClick,m=n.noFooter,y=n.showCustomBtns,b=n.customBtns,v=n.hotKeyboard,g=void 0===v||v,k=mo(n,["modalData","close","size","className","getClassName","hasCloseBtn","backdrop","indexInfo","beSureClick","cancelClick","noFooter","showCustomBtns","customBtns","hotKeyboard"]),S=r.leftBtnName,O=void 0===S?t["0005"]:S,w=r.rightBtnName,C=void 0===w?t["0006"]:w,E=r.color,j=r.title,x=r.content;return d.a.createElement(p.Modal,ho({show:r.showModal,onHide:a.bind(this),size:o,className:i,backdrop:s,indexInfo:u},k,{ref:function(t){return e.Modal=t}}),g&&!m&&d.a.createElement(p.HotKeys,{keyMap:{sureBtnHandler:p.HotKeys.USUAL_KEYS.MODAL_CONFIRM,cancelBtnHandler:p.HotKeys.USUAL_KEYS.MODAL_CALCEL},handlers:{sureBtnHandler:function(){e.Modal&&e.Modal.isTopModal()&&(console.log("createModal sureBtnHandler 事件回调"),f.bind(e)())},cancelBtnHandler:function(){e.Modal&&e.Modal.isTopModal()&&(console.log("createModal cancelBtnHandler 事件回调"),h.bind(e)())}},className:"ncmodel-hotkeys-wrapper",focused:!0,attach:document.body,display:"inline"}),d.a.createElement(p.Modal.Header,{fieldid:"header-area",closeButton:!!l},d.a.createElement("span",null,t["0007"])),d.a.createElement(p.Modal.Body,null,d.a.createElement(p.Modal.Title,{fieldid:"".concat(t["0007"])},c(E)," ",this.getTitle(j,E)),d.a.createElement("div",{className:"createModal-body-content"},x)),m?null:y?d.a.createElement(p.Modal.Footer,null,y&&b?b:null):d.a.createElement(p.Modal.Footer,null,d.a.createElement(p.Tooltip,{placement:"top",inverse:!0,overlay:"".concat(O,"  (").concat(p.HotKeys.USUAL_KEYS.MODAL_CONFIRM,")"),trigger:["hover","focus"],className:"model-helper-overlay"},d.a.createElement(p.Button,{fieldid:"confirm",onClick:f.bind(this),colors:"primary",tabIndex:"0"},O,"(",d.a.createElement("span",{className:"text-decoration-underline"},"Y "),")")),d.a.createElement(p.Tooltip,{placement:"top",inverse:!0,overlay:"".concat(C,"  (").concat(p.HotKeys.USUAL_KEYS.MODAL_CALCEL,")"),trigger:["focus","hover"],className:"model-helper-overlay"},d.a.createElement(p.Button,{fieldid:"cancel",onClick:h.bind(this),shape:"border",tabIndex:"0"},C,"(",d.a.createElement("span",{className:"text-decoration-underline"},"N"),")"))))}}])&&yo(t.prototype,n),r&&yo(t,r),o}(u.Component);function Oo(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.title,a=n.content,o=n.beSureBtnClick,i=n.cancelBtnClick,c=n.leftBtnName,l=n.rightBtnName,s=n.noFooter,u=void 0!==s&&s,f=n.size,p=n.color,h=void 0===p?"warning":p,m=n.hasCloseBtn,y=void 0!==m&&m,b=n.closeByClickBackDrop,v=void 0!==b&&b,g=n.zIndex,k=void 0===g?200:g,S=mo(n,["title","content","beSureBtnClick","cancelBtnClick","leftBtnName","rightBtnName","noFooter","size","color","hasCloseBtn","closeByClickBackDrop","zIndex"]);this.state.modal.hasOwnProperty(e)||(this.state.modal[e]={color:h,showModal:!1,title:r,content:a,beSureBtnClick:o,cancelBtnClick:i,leftBtnName:c,rightBtnName:l});var O=this.state.modal[e],w=function(e){var t="iconfont ".concat("danger"===e?"icon-shibai":"warning"===e?"icon-zhuyi1":"info"===e?"icon-tixing":"success"===e?"icon-wancheng":"icon-warning"," ").concat(e);return d.a.createElement("span",{className:t}," ")},C=function(){O.showModal=!1,t.setState({modal:t.state.modal})},E=function(){C(),"function"==typeof O.cancelBtnClick&&O.cancelBtnClick.call(t)},j=function(){C(),"function"==typeof O.beSureBtnClick&&O.beSureBtnClick.call(t)},x={id:e,zIndex:k};return d.a.createElement(So,ho({fieldid:e,modalData:O,hasCloseBtn:y,beSureClick:j,cancelClick:E,getClassName:w,noFooter:u,close:C,size:f,className:"".concat(e," NC_confirmModal createNcModal"),backdrop:!!v||"static",indexInfo:x},S))}function wo(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.state.modal.hasOwnProperty(e))return!1;var n=this.state.modal[e];(n=Object.assign(n,t)).showModal=!0,this.setState({modal:this.state.modal})}function Co(e){this.state.modal[e].showModal=!1,this.setState({modal:this.state.modal})}function Eo(){return(Eo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function jo(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function xo(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.billId,a=n.billNo,o=n.target,i=n.placement,c=n.beforeUpload,l=n.size,s=n.accept,u=n.upData,f=n.multiple,p=n.beforeDelete,h=n.onHide,m=jo(n,["billId","billNo","target","placement","beforeUpload","size","accept","upData","multiple","beforeDelete","onHide"]);this.state.uploader.hasOwnProperty(e)||(this.state.uploader[e]={billId:r,billNo:a,target:o,placement:i,beforeUpload:c,size:l,accept:s,upData:u,multiple:f,beforeDelete:p,onHide:h,showUploader:!1});var y=this.state.uploader[e],b=null;"function"==typeof y.beforeUpload&&(b=y.beforeUpload.bind(this));var v=null;"function"==typeof y.beforeDelete&&(v=y.beforeDelete.bind(this));var g=function(){y.showUploader=!1,t.setState({uploader:t.state.uploader}),"function"==typeof y.onHide&&y.onHide.call(t)};return y.showUploader?d.a.createElement(Uploader,Eo({billId:y.billId,billNo:y.billNo,target:y.target,placement:y.placement,beforeUpload:b,size:y.size,accept:y.accept,upData:y.upData,multiple:y.multiple,beforeDelete:v,onHide:g},m)):null}function Po(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.state.uploader.hasOwnProperty(e))return!1;var n=this.state.uploader[e];(n=Object.assign(n,t)).showUploader=!0,this.setState({uploader:this.state.uploader})}function _o(e){if(!this.state.uploader.hasOwnProperty(e))return!1;this.state.uploader[e].showUploader=!1,this.setState({uploader:this.state.uploader})}function No(e){return(No="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function To(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Do(e,t){return(Do=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ao(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ro(e);if(t){var a=Ro(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Io(this,n)}}function Io(e,t){return!t||"object"!==No(t)&&"function"!=typeof t?Mo(e):t}function Mo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ro(e){return(Ro=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1878);var Bo=function(e,t){if(!e)return null;for(var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;e&&!n.call(e,t);)e=e.parentElement;return e},Ko=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Do(e,t)}(o,e);var t,n,r,a=Ao(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).queryBillTrack=function(){var e=t.props.pageInstance,n=f.ViewModel.getData("nccloud_platfrom_native_socket_billinfo")||{},r=n.formAreaCode,a=n.billtype,o=n.billpkname;t.billtype=a;var i=e.form.getFormItemsValue(r,"saga_gtxid");t.gtxid=i&&i.value;var c=e.form.getFormItemsValue(r,o);t.billpk=c&&c.value,t.setState({showBillTrack:!0})},"function"==typeof t.props.getThis&&t.props.getThis(Mo(t)),t.state={isError:t.props.isError||!1,showBillTrack:!1,json:{},LangData:null},t.gtxid="",t.billpk="",t.billtype="",t}return t=o,(n=[{key:"componentWillMount",value:function(){var e=this;Object(f.getMultiLang)({moduleId:"base_errorTip",callback:function(t,n,r){e.setState({json:t,LangData:r})}})}},{key:"componentWillReceiveProps",value:function(e){for(var t=this.state,n=!0,r=0,a=Object.keys(e);r<a.length;r++){var o=a[r];t.hasOwnProperty(o)&&t[o]!==e[o]&&(n=!1,t[o]=e[o])}n||this.setState({oldState:t})}},{key:"componentDidMount",value:function(){var e=this.state.isError,t=V.a.findDOMNode(this),n=Bo(t,".nc-bill-header-area,.u-affix-content");n&&(n.className=n.className.replace(/socket-error-class/g,""),e&&(n.className=n.className+" socket-error-class"))}},{key:"componentDidUpdate",value:function(){var e=this.state.isError,t=V.a.findDOMNode(this),n=Bo(t,".nc-bill-header-area,.socket-error-class,.u-affix-content");n&&(n.className=n.className.replace(/socket-error-class/g,""),e&&(n.className=n.className+" socket-error-class"))}},{key:"componentWillUnmount",value:function(){var e=V.a.findDOMNode(this),t=Bo(e,".socket-error-class,.nc-bill-header-area,.u-affix-content");t&&(t.className=t.className.replace(/socket-error-class/g,""))}},{key:"render",value:function(){var e=this,t=this.state,n=t.isError,r=t.showBillTrack,a=t.json,o=this.props.errorViewType;return d.a.createElement("span",{className:"billHead-errorBtn-wrapper"},n&&d.a.createElement(p.Tooltip,{inverse:!0,trigger:"hover",overlay:a["base-error-tip-0001"]||"点击查看错误原因",placement:"top",delay:1,delayShow:800},d.a.createElement("span",{className:"error-flag iconfont icon icon-gantanhao",onClick:this.queryBillTrack})),"none"!==o&&d.a.createElement(p.BillErrorTrack,{show:r,close:function(){e.setState({showBillTrack:!1})},pk:this.billpk,type:this.billtype,gtxid:this.gtxid,errorViewType:o}))}}])&&To(t.prototype,n),r&&To(t,r),o}(u.Component);function Fo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fo(Object(n),!0).forEach((function(t){Ho(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ho(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var qo={createErrorButton:function(e){var t=e.record,n=void 0===t?{}:t,r=e.sucessCallBack;return n=n.values||n,"function"==typeof r&&r(this.props,n,this)},createErrorFlag:function(e){var t=this,n=e.headBtnAreaCode;return d.a.createElement(Ko,{getThis:function(e){t.myCrossServiceBtn[n]=e},pageInstance:this,moduleId:n,output:this.output,rootprops:this.props})},toggleErrorStatus:function(e,t){if(this.myCrossServiceBtn[e]){var n=this.myCrossServiceBtn[e],r=Lo(Lo({},n.state),t);n.setState({isError:r.isError,tipContent:r.tipContent})}}},Vo=f.ViewModel.getGlobalStorage;function Uo(){var e=Vo("localStorage","STOREFORINFODATA"),t=e&&JSON.parse(e);return t&&t.userId}var Wo=f.ViewModel.getGlobalStorage;function Yo(e){var t=Wo("localStorage","STOREFORINFODATA"),n=t&&JSON.parse(t);return e&&n&&n[e]}var zo={1e3:{reason:"Normal Closure",desc:"Normal closure; the connection successfully completed whatever purpose for which it was created.",tips:""},1001:{reason:"Going Away",desc:"The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection.",tips:""},1002:{reason:"Protocol Error",desc:"The endpoint is terminating the connection due to a protocol error.",tips:""},1003:{reason:"Unsupported Data",desc:"The connection is being terminated because the endpoint received data of a type it cannot accept (for example, a text-only endpoint received binary data).",tips:""},1004:{reason:"",desc:"Reserved. A meaning might be defined in the future.",tips:""},1005:{reason:"No Status Received",desc:"Reserved.  Indicates that no status code was provided even though one was expected.",tips:""},1006:{reason:"Abnormal Closure",desc:"Reserved. Used to indicate that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected.",tips:""},1007:{reason:"Invalid frame payload data",desc:"The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message).",tips:""},1008:{reason:"Policy Violation",desc:"The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable.",tips:""},1009:{reason:"Message too big",desc:"The endpoint is terminating the connection because a data frame was received that is too large.",tips:""},1010:{reason:"Missing Extension",desc:"The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn't.",tips:""},1011:{reason:"Internal Error",desc:"The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request.",tips:""},1012:{reason:"Service Restart",desc:"The server is terminating the connection because it is restarting. [Ref]",tips:""},1013:{reason:"Try Again Later",desc:"The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients. [Ref]",tips:""},1014:{reason:"Bad Gateway",desc:"The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code.",tips:""},1015:{reason:"TLS Handshake",desc:"Reserved. Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can't be verified).",tips:""},4501:{reason:"服务内部的错误。",desc:"服务内部的错误。",tips:"联系管理员或者相关技术人员进行分析解决。"}};function Jo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Go=f.ViewModel.setGlobalStorage,Xo=f.ViewModel.getGlobalStorage,Qo=f.ViewModel.removeGlobalStorage,$o=f.ViewModel.getDecryptData;function ei(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Object(f.getSafeRandom)()|0;return("x"==e?t:3&t|8).toString(16)}))}var ti=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Jo(this,e),this.props=t,this.recieve=this.recieve.bind(this),this.uuidv4=ei(),this.unique=t.unique||this.uuidv4,this.re=new RegExp("^"+this.unique)}var t,n,r;return t=e,(n=[{key:"recieve",value:function(e){var t=this.props.onRecieve;if(String(e.key).match(this.re)){var n=e.key.replace(this.re,""),r=$o(e.newValue)||Xo("localStorage",e.key),a=r?JSON.parse(r):"";t&&t(a,n)}}},{key:"setRecieve",value:function(e){this.props.onRecieve=e}},{key:"start",value:function(){return window.addEventListener("storage",this.recieve,!1),this}},{key:"send",value:function(e,t){var n=this;Go("localStorage",this.unique+e,JSON.stringify(t)),setTimeout((function(){Qo("localStorage",n.unique+e)}),10)}},{key:"destroy",value:function(){this.props.onRecieve=null,window.removeEventListener("storage",this.recieve)}}])&&Zo(t.prototype,n),r&&Zo(t,r),e}();ti.ChannelAction={check:"checkUnique",message:"sendMessage",reply:"uniqueReply"};var ni=ti;function ri(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ai(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var oi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ri(this,e),this.props=t,this.count=t.count||3,this.timeout=t.timeout||3e3}var t,n,r;return t=e,(n=[{key:"start",value:function(){var e=this,t=this.props.running;console.log(this.timeout),this.timeoutObj=setInterval((function(){e.count--,t&&t(e)}),this.timeout)}},{key:"restart",value:function(){this.count=3,this.stop(),this.start()}},{key:"stop",value:function(){clearInterval(this.timeoutObj)}},{key:"destory",value:function(){}}])&&ai(t.prototype,n),r&&ai(t,r),e}();function ii(e){return(ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ci(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function li(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ci(Object(n),!0).forEach((function(t){si(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ci(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function si(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ui(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function di(e,t){return(di=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=mi(e);if(t){var a=mi(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return pi(this,n)}}function pi(e,t){return!t||"object"!==ii(t)&&"function"!=typeof t?hi(e):t}function hi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mi(e){return(mi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yi=new f.gzip;n(908);var bi=f.ViewModel.getGlobalStorage,vi=f.ViewModel.setGlobalStorage,gi=["CONNECTING","OPEN","CLOSING","CLOSED"],ki=ni.ChannelAction.message,Si=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&di(e,t)}(o,e);var t,n,r,a=fi(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).closeSocket=function(){t.isConnect&&vi("localStorage","__socket_connect_","N"),t.CWebSocket&&(t.CWebSocket.close(),t.CWebSocket=null)},t.WebSocketConnect=function(){if(t.tabid||(t.tabid=top&&top.WebSocketTabid?top.WebSocketTabid:t.randomNumber(),window.WebSocketTabid=t.tabid,top.WebSocketTabid=t.tabid,console.log("页签时间戳值为：",t.tabid)),!("Y"===bi("localStorage","__socket_connect_"))){t.HeartCheck.restart();var e=t.state.userid||Uo()||"",n=t.state.ds||Yo("datasource")||"",r=window.top.location.hostname+(window.location.port?":"+window.location.port:window.location.port),a=t.props.serverLocation;a&&(r=a);var o=bi("localStorage","rockin");f.Cipher.CipherFlag="true"===o;var i=f.Cipher.CipherFlag?f.Cipher.encrypt("userid=".concat(e).concat(n),"15469120627904bc557cd9d084a8fae1"):"userid=".concat(e).concat(n);if(e){t.wsUrl="".concat("https:"==window.location.protocol?"wss":"ws","://").concat(r,"/websocket/api/messagelistener/?")+i;try{t.CWebSocket=new WebSocket(t.wsUrl),t.init()}catch(e){console.log("catch"),t.reconnect()}}}},t.createWebSocket=function(){var e=bi("localStorage","_ncc_websocket_switch_");null===e?Object(f.ajax)({url:"/nccloud/platform/query/merge.do",data:{},async:!1,method:"post",success:function(e){e.success&&(e.data?vi("localStorage","_ncc_websocket_switch_","0"):(vi("localStorage","_ncc_websocket_switch_","1"),t.WebSocketConnect()))}}):"1"===e&&t.WebSocketConnect()},t.init=function(){t.CWebSocket.onclose=function(e){console.log("websocket连接关闭",e,e.reason,zo[e.code]),vi("localStorage","__socket_connect_","N"),1e3!=e.code&&t.reconnect()},t.CWebSocket.onerror=function(e){console.log("websocket连接发生异常了",e),vi("localStorage","__socket_connect_","N"),t.reconnect()},t.CWebSocket.onopen=function(){t.count=99999,vi("localStorage","__socket_connect_","Y"),t.isConnect=!0,console.log(t.CWebSocket),console.log(gi[t.CWebSocket.readyState])},t.CWebSocket.onmessage=function(e){t.count=99999,vi("localStorage","__socket_connect_","Y"),t.isConnect=!0,console.log("websocket接收到消息"),t.ChannelCtrl.send(ki,e.data),t.sendMessageToIframe({data:e.data}),t.handleMessage(e)}},t.handleMessage=function(e){var n=Uo()||"",r=Yo("datasource")||"",a=JSON.parse(e.data);if(!a||"websocket-server"!==a.origin){var o=t.state.json,i=yi.unzip(a.message)||{},c=t.props,l=c.isShowView,s=void 0===l||l,u=c.isShowToast,p=void 0===u||u,h=c.onMessage,m=c.billpkname,y=a.targetids.includes(n+r)&&!document.hidden,b="ncc-server"===a.origin&&"saga_error"===i.type,v="ncc-server"===a.origin&&"saga_hint"===i.type;if(y){if(Object(f.clearToast)("socketReSetErrorToast"),Object(f.clearToast)("socketBackErrorToast"),b)if(i.error){if(i.billtype&&(t.billtype=i.billtype),Array.isArray(i.refreshData)&&i.refreshData.length>0&&(t.gtxid=i.refreshData[0].saga_gtxid,t.billpk=i.refreshData[0][m||"_businessPk"]),s=top&&t.gtxid&&top.SocketConfig&&top.SocketConfig[t.gtxid]?top.SocketConfig[t.gtxid]:s,p=top&&t.gtxid&&top.SocketConfig&&top.SocketConfig[t.gtxid]?top.SocketConfig[t.gtxid]:p,i.msg){var g=void 0===i.isdisplay||i.isdisplay;p&&Object(f.toast)({mark:"socketErrorToast"+t.gtxid,color:"danger",title:o["page-socket-0001"]||"发送失败",customBtnBeforeClose:s&&g?d.a.createElement("span",{"data-mark":t.gtxid,onClick:function(e){var n=e.target.getAttribute("data-mark");if(n){t.gtxid=n;var r=t.saga_popInfo[t.gtxid];t.billpk=r&&r.billpk,t.billtype=r&&r.billtype}t.setState({showBillTrack:!0})}},o["page-socket-0002"]||"立即查看"):d.a.createElement("span",null),groupOperation:!0,groupOperationMsg:[i.msg]}),t.saga_popInfo[t.gtxid]={billpk:t.billpk,billtype:t.billtype}}}else p&&Object(f.toast)({color:"success",title:o["page-socket-0003"]||"跨服务事务处理成功！"});v&&(console.log("socketErrorToast"+t.gtxid),Object(f.clearToast)("socketErrorToast"),Object(f.clearToast)("socketErrorToast"+t.gtxid),i.error?p&&Object(f.toast)({color:"danger",content:i.msg}):p&&Object(f.toast)({color:"success",content:i.msg}))}a.targetids.includes(n+r)&&i.tabid===t.tabid&&("function"==typeof h&&h(li(li({},t.props),t.output),i),"function"==typeof window.top.onSocketMessage&&window.top.onSocketMessage(i))}},t.reconnect=function(){t.lockReconnect||(t.count<=0?Object(f.toast)({color:"error",title:t.state.json["page-socket-0004"]||"Socket重连已达次数上限,请联系管理员或者刷新页面重试！"}):(t.lockReconnect=!0,t.count--,console.log(t.count),setTimeout((function(){console.log("websocket发起重连"),t.createWebSocket(),t.lockReconnect=!1}),4e3)))},t.randomNumber=function(){var e=new Date,t=e.getMonth()+1,n=e.getDate(),r=e.getHours(),a=e.getMinutes(),o=e.getSeconds();return e.getFullYear().toString()+t.toString()+n+r+a+o+Math.round(23*Object(f.getSafeRandom)()+100).toString()},t.state={showBillTrack:!1,userId:e.userId,ds:e.ds,json:{},LangData:null},t.saga_popInfo={},t.gtxid="",t.billpk="",t.billtype=e.billtype,t.tabid="",t.count=99999,t.CWebSocket=null,t.lockReconnect=!1,t.recieve=t.recieve.bind(hi(t)),t.running=t.running.bind(hi(t)),t.ChannelCtrl=new ni({unique:"___socket_channel___",onRecieve:t.recieve}).start(),t.HeartCheck=new oi({running:t.running,count:99999,timeout:5e4}),console.log("socket connect channel "),t}return t=o,(n=[{key:"running",value:function(){console.log("send message for connect check"),this.isConnect&&this.CWebSocket&&this.CWebSocket.send(String((new Date).getTime()))}},{key:"recieve",value:function(e,t){if(t==ki&&e&&!this.isConnect){console.log(e);try{this.sendMessageToIframe({data:e})}catch(e){console.error?console.error(e):console.log(e)}this.handleMessage({data:e})}}},{key:"sendMessageToIframe",value:function(e){if(top&&top.SocketMessageFun)for(var t in top.SocketMessageFun)"function"==typeof top.SocketMessageFun[t]&&top.SocketMessageFun[t](e)}},{key:"componentWillReceiveProps",value:function(e){var t=this;console.log(e.userId),e.userId!==this.state.userId&&this.setState({userId:e.userId,ds:e.ds},(function(){t.lockReconnect=!0,t.closeSocket(),t.createWebSocket()}))}},{key:"componentWillMount",value:function(){var e=this;Object(f.getMultiLang)({moduleId:"page_socket",callback:function(t,n,r){e.setState({json:t,LangData:r})}})}},{key:"componentDidMount",value:function(){this.createWebSocket()}},{key:"componentWillUnmount",value:function(){this.lockReconnect=!0,this.closeSocket(),this.isConnect&&vi("localStorage","__socket_connect_","N"),this.ChannelCtrl.destroy(),this.HeartCheck.stop()}},{key:"render",value:function(){var e=this,t=this.props.errorViewType,n=void 0===t||t;return"none"===(n=top&&top.SocketConfig&&top.SocketConfig[this.gtxid]?top.SocketConfig[this.gtxid]:n)?null:d.a.createElement(p.BillErrorTrack,{show:this.state.showBillTrack,close:function(){e.setState({showBillTrack:!1})},pk:this.billpk,type:this.billtype,gtxid:this.gtxid,errorViewType:n})}}])&&ui(t.prototype,n),r&&ui(t,r),o}(u.Component),Oi=n(360),wi={};function Ci(e){return wi[e]||""}var Ei=function(e){wi=e||[]},ji=function(e,t){return"tree"==e&&t&&(e="treeMulti"),"grid"==e&&t&&(e="gridMulti"),"gridTree"==e&&t&&(e="gridTreeMulti"),function(e){var t=[];switch(e){case"grid":t=[{name:"Tab",desc:Ci("hk-0012")},{name:"Shift+Tab",desc:Ci("hk-0013")},{name:"↑",desc:Ci("hk-0010")},{name:"↓",desc:Ci("hk-0011")},{name:"Enter",desc:Ci("hk-0014")},{name:"Esc",desc:Ci("hk-0023")},{name:"Alt+Y",desc:Ci("hk-0015")},{name:"Alt+N",desc:Ci("hk-0016")},{name:"Fn+↑、Pageup",desc:Ci("hk-0017")},{name:"Fn+↓、Pagedown",desc:Ci("hk-0018")},{name:"Fn+←",desc:Ci("hk-0019")},{name:"Fn+→",desc:Ci("hk-0020")},{name:"Ctrl+←",desc:Ci("hk-0021")},{name:"Ctrl+→",desc:Ci("hk-0022")}];break;case"gridMulti":t=[{name:"Tab",desc:Ci("hk-0012")},{name:"Shift+Tab",desc:Ci("hk-0013")},{name:"↑",desc:Ci("hk-0010")},{name:"↓",desc:Ci("hk-0011")},{name:Ci("hk-0025"),desc:Ci("hk-0024")},{name:"Enter",desc:Ci("hk-0014")},{name:"Esc",desc:Ci("hk-0023")},{name:"Alt+Y",desc:Ci("hk-0015")},{name:"Alt+N",desc:Ci("hk-0016")},{name:"Fn+↑、Pageup",desc:Ci("hk-0017")},{name:"Fn+↓、Pagedown",desc:Ci("hk-0018")},{name:"Fn+←",desc:Ci("hk-0019")},{name:"Fn+→",desc:Ci("hk-0020")},{name:"Ctrl+←",desc:Ci("hk-0021")},{name:"Ctrl+→",desc:Ci("hk-0022")}];break;case"tree":t=[{name:"Tab",desc:Ci("hk-0012")},{name:"Shift+Tab",desc:Ci("hk-0013")},{name:"↑",desc:Ci("hk-0010")},{name:"↓",desc:Ci("hk-0011")},{name:"←",desc:Ci("hk-0026")},{name:"→",desc:Ci("hk-0027")},{name:"Enter",desc:Ci("hk-0014")},{name:"Esc",desc:Ci("hk-0023")},{name:"Alt+Y",desc:Ci("hk-0015")},{name:"Alt+N",desc:Ci("hk-0016")},{name:"Fn+↑、Pageup",desc:Ci("hk-0017")},{name:"Fn+↓、Pagedown",desc:Ci("hk-0018")},{name:"Fn+←",desc:Ci("hk-0019")},{name:"Fn+→",desc:Ci("hk-0020")},{name:"Ctrl+←",desc:Ci("hk-0021")},{name:"Ctrl+→",desc:Ci("hk-0022")}];break;case"treeMulti":t=[{name:"Tab",desc:Ci("hk-0012")},{name:"Shift+Tab",desc:Ci("hk-0013")},{name:"↑",desc:Ci("hk-0010")},{name:"↓",desc:Ci("hk-0011")},{name:"←",desc:Ci("hk-0026")},{name:"→",desc:Ci("hk-0027")},{name:Ci("hk-0025"),desc:Ci("hk-0024")},{name:"Enter",desc:Ci("hk-0014")},{name:"Esc",desc:Ci("hk-0023")},{name:"Alt+Y",desc:Ci("hk-0015")},{name:"Alt+N",desc:Ci("hk-0016")},{name:"Fn+↑、Pageup",desc:Ci("hk-0017")},{name:"Fn+↓、Pagedown",desc:Ci("hk-0018")},{name:"Fn+←",desc:Ci("hk-0019")},{name:"Fn+→",desc:Ci("hk-0020")},{name:"Ctrl+←",desc:Ci("hk-0021")},{name:"Ctrl+→",desc:Ci("hk-0022")}];break;case"gridTree":t=[{name:"Tab",desc:Ci("hk-0012")},{name:"Shift+Tab",desc:Ci("hk-0013")},{name:"↑",desc:Ci("hk-0010")},{name:"↓",desc:Ci("hk-0011")},{name:"←",desc:Ci("hk-0010")},{name:"→",desc:Ci("hk-0011")},{name:"Shift+←",desc:Ci("hk-0028")},{name:"Shift+→",desc:Ci("hk-0029")},{name:"Enter",desc:Ci("hk-0014")},{name:"Esc",desc:Ci("hk-0023")},{name:"Alt+Y",desc:Ci("hk-0015")},{name:"Alt+N",desc:Ci("hk-0016")},{name:"Fn+↑、Pageup",desc:Ci("hk-0017")},{name:"Fn+↓、Pagedown",desc:Ci("hk-0018")},{name:"Fn+←",desc:Ci("hk-0019")},{name:"Fn+→",desc:Ci("hk-0020")},{name:"Ctrl+←",desc:Ci("hk-0021")},{name:"Ctrl+→",desc:Ci("hk-0022")}];break;case"gridTreeMulti":t=[{name:"Tab",desc:Ci("hk-0012")},{name:"Shift+Tab",desc:Ci("hk-0013")},{name:"↑",desc:Ci("hk-0010")},{name:"↓",desc:Ci("hk-0011")},{name:"←",desc:Ci("hk-0026")},{name:"→",desc:Ci("hk-0027")},{name:"Shift+←",desc:Ci("hk-0028")},{name:"Shift+→",desc:Ci("hk-0029")},{name:Ci("hk-0025"),desc:Ci("hk-0024")},{name:"Enter",desc:Ci("hk-0014")},{name:"Esc",desc:Ci("hk-0023")},{name:"Alt+Y",desc:Ci("hk-0015")},{name:"Alt+N",desc:Ci("hk-0016")},{name:"Fn+↑、Pageup",desc:Ci("hk-0017")},{name:"Fn+↓、Pagedown",desc:Ci("hk-0018")},{name:"Fn+←",desc:Ci("hk-0019")},{name:"Fn+→",desc:Ci("hk-0020")},{name:"Ctrl+←",desc:Ci("hk-0021")},{name:"Ctrl+→",desc:Ci("hk-0022")}];break;case"view":t=[{area:Ci("hk-0032"),name:"Ctrl+/",desc:Ci("hk-0037")},{area:Ci("hk-0032"),name:"Ctrl+/",desc:Ci("hk-0038")},{area:Ci("hk-0032"),name:"Alt+P",desc:Ci("hk-0039")},{area:Ci("hk-0032"),name:"Ctrl+Backspace",desc:Ci("hk-0040")},{area:Ci("hk-0032"),name:"Alt+C",desc:Ci("hk-0041")},{area:Ci("hk-0032"),name:"Alt+B",desc:Ci("hk-0042")},{area:Ci("hk-0032"),name:"Ctrl+B",desc:Ci("hk-0043")},{area:Ci("hk-0032"),name:"Alt+R",desc:Ci("hk-0044")},{area:Ci("hk-0032"),name:"Esc",desc:Ci("hk-0045")},{area:Ci("hk-0032"),name:"Alt+Pageup",desc:Ci("hk-0046")},{area:Ci("hk-0032"),name:"Alt+Pagedown",desc:Ci("hk-0047")},{area:Ci("hk-0032"),name:"F5",desc:Ci("hk-0048")},{area:Ci("hk-0032"),name:Ci("hk-0051"),desc:Ci("hk-0049")},{area:Ci("hk-0032"),name:Ci("hk-0051"),desc:Ci("hk-0050")},{area:Ci("hk-0035"),name:"Ctrl+I",desc:Ci("hk-0052")},{area:Ci("hk-0035"),name:"Alt+I",desc:Ci("hk-0053")},{area:Ci("hk-0035"),name:"Ctrl+U",desc:Ci("hk-0054")},{area:Ci("hk-0035"),name:"Alt+U",desc:Ci("hk-0055")},{area:Ci("hk-0035"),name:"Ctrl+G",desc:Ci("hk-0056")},{area:Ci("hk-0035"),name:"Alt+G",desc:Ci("hk-0057")},{area:Ci("hk-0035"),name:"Ctrl+J",desc:Ci("hk-0058")},{area:Ci("hk-0035"),name:"Alt+J",desc:Ci("hk-0059")},{area:Ci("hk-0035"),name:"Ctrl+J",desc:Ci("hk-0060")},{area:Ci("hk-0035"),name:"Alt+J",desc:Ci("hk-0061")},{area:Ci("hk-0035"),name:"Ctrl+Alt+E",desc:Ci("hk-0062")},{area:Ci("hk-0035"),name:"Ctrl+Alt+C",desc:Ci("hk-0063")},{area:Ci("hk-0035"),name:"Ctrl+P",desc:Ci("hk-0064")},{area:Ci("hk-0035"),name:"Ctrl+K",desc:Ci("hk-0065")},{area:Ci("hk-0035"),name:Ci("hk-0051"),desc:Ci("hk-0066")},{area:Ci("hk-0035"),name:Ci("hk-0051"),desc:Ci("hk-0067")},{area:Ci("hk-0035"),name:"Alt+O",desc:Ci("hk-0068")},{area:Ci("hk-0035"),name:"Alt+D",desc:Ci("hk-0069")},{area:Ci("hk-0035"),name:"Alt+L",desc:Ci("hk-0070")},{area:Ci("hk-0036"),name:"Ctrl+Tab",desc:Ci("hk-0071")},{area:Ci("hk-0036"),name:"Ctrl+Shift+Tab",desc:Ci("hk-0072")},{area:Ci("hk-0036"),name:"Ctrl+W",desc:Ci("hk-0073")},{area:Ci("hk-0036"),name:"Ctrl+R",desc:Ci("hk-0074")},{area:Ci("hk-0036"),name:Ci("hk-0025"),desc:Ci("hk-0075")},{area:Ci("hk-0036"),name:"Home",desc:Ci("hk-0076")},{area:Ci("hk-0036"),name:"End",desc:Ci("hk-0077")},{area:Ci("hk-0036"),name:"Ctrl++",desc:Ci("hk-0078")},{area:Ci("hk-0036"),name:"Ctrl+-",desc:Ci("hk-0079")},{area:Ci("hk-0036"),name:"Ctrl+0",desc:Ci("hk-0080")},{area:Ci("hk-0036"),name:"Ctrl+F",desc:Ci("hk-0081")},{area:Ci("hk-0036"),name:"Ctrl+←",desc:Ci("hk-0082")},{area:Ci("hk-0036"),name:"Ctrl+→",desc:Ci("hk-0083")}];break;case"edit":default:t=[{area:Ci("hk-0030"),name:"Tab",desc:Ci("hk-0084")},{area:Ci("hk-0030"),name:"Shift+Tab",desc:Ci("hk-0085")},{area:Ci("hk-0030"),name:"Esc",desc:Ci("hk-0086")},{area:Ci("hk-0030"),name:"←",desc:Ci("hk-0087")},{area:Ci("hk-0030"),name:"→",desc:Ci("hk-0088")},{area:Ci("hk-0030"),name:"↑",desc:Ci("hk-0089")},{area:Ci("hk-0030"),name:"↓",desc:Ci("hk-0090")},{area:Ci("hk-0030"),name:"F3",desc:Ci("hk-0091")},{area:Ci("hk-0030"),name:"F2",desc:Ci("hk-0092")},{area:Ci("hk-0030"),name:"Enter",desc:Ci("hk-0093")},{area:Ci("hk-0030"),name:"Backspace",desc:Ci("hk-0094")},{area:Ci("hk-0030"),name:"Pageup",desc:Ci("hk-0095")},{area:Ci("hk-0030"),name:"Pagedown",desc:Ci("hk-0096")},{area:Ci("hk-0030"),name:"Alt+←",desc:Ci("hk-0097")},{area:Ci("hk-0030"),name:"Alt+→",desc:Ci("hk-0098")},{area:Ci("hk-0030"),name:"Alt+↑",desc:Ci("hk-0095")},{area:Ci("hk-0030"),name:"Alt+↓",desc:Ci("hk-0096")},{area:Ci("hk-0031"),name:"Alt+N",desc:Ci("hk-0099")},{area:Ci("hk-0031"),name:"Alt+Backspace",desc:Ci("hk-0100")},{area:Ci("hk-0031"),name:"Alt+I",desc:Ci("hk-0101")},{area:Ci("hk-0031"),name:"Alt+C",desc:Ci("hk-0102")},{area:Ci("hk-0031"),name:"Alt+V",desc:Ci("hk-0103")},{area:Ci("hk-0031"),name:"Ctrl+Alt+V",desc:Ci("hk-0104")},{area:Ci("hk-0031"),name:"F4",desc:Ci("hk-0105")},{area:Ci("hk-0031"),name:Ci("hk-0051"),desc:Ci("hk-0106")},{area:Ci("hk-0031"),name:"Alt+P",desc:Ci("hk-0107")},{area:Ci("hk-0031"),name:"Alt+R",desc:Ci("hk-0108")},{area:Ci("hk-0032"),name:"F3",desc:Ci("hk-0109")},{area:Ci("hk-0032"),name:"Ctrl+S",desc:Ci("hk-0110")},{area:Ci("hk-0032"),name:"Alt+S",desc:Ci("hk-0111")},{area:Ci("hk-0032"),name:"Alt+T",desc:Ci("hk-0112")},{area:Ci("hk-0032"),name:"Alt+Q",desc:Ci("hk-0113")},{area:Ci("hk-0032"),name:"Ctrl+Alt+S",desc:Ci("hk-0114")},{area:Ci("hk-0032"),name:"Shift+←",desc:Ci("hk-0115")},{area:Ci("hk-0032"),name:"Shift+→",desc:Ci("hk-0116")},{area:Ci("hk-0032"),name:"Shift+↑",desc:Ci("hk-0117")},{area:Ci("hk-0032"),name:"Shift+↓",desc:Ci("hk-0118")},{area:Ci("hk-0033"),name:"Alt+Y",desc:Ci("hk-0119")},{area:Ci("hk-0033"),name:"Alt+N",desc:Ci("hk-0120")},{area:Ci("hk-0033"),name:"Enter",desc:Ci("hk-0121")},{area:Ci("hk-0033"),name:"Esc",desc:Ci("hk-0122")}]}return t}(e)};function xi(e){return(xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _i(e,t){return(_i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ni(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Di(e);if(t){var a=Di(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ti(this,n)}}function Ti(e,t){return!t||"object"!==xi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Di(e){return(Di=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(909);var Ai=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_i(e,t)}(o,e);var t,n,r,a=Ni(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),t=a.call(this,e),Ei(t.props.langJson),t.state={data:t.getInitData(),currentIndex:0},t.caheKey="",t}return t=o,(n=[{key:"componentWillReceiveProps",value:function(e){e.data!=this.props.data&&this.setState({data:this.getInitData(newData),currentIndex:0}),e.langJson!=this.props.langJson&&(Ei(e.langJson),this.setState({data:this.getInitData(),currentIndex:0}))}},{key:"getInitData",value:function(e){var t=this.props,n=t.panelType,r=void 0===n?"common":n,a=t.data,o=void 0===a?[]:a,i=t.limit,c=t.isMultiSelectedEnabled;return o=e||o,this.initData=this.currentData=[].concat(ji(r,c),o),this.bufferData=this.currentData.slice(i),this.currentData=this.currentData.slice(0,i),this.currentData}},{key:"getSearchData",value:function(e){var t=this.props,n=(t.panelType,t.limit),r=[];return this.initData.map((function(t){t.area;var n=t.name,a=t.desc,o=(n+"").toLocaleLowerCase(),i=(e+"").toLocaleLowerCase(),c="".concat(a).toLocaleLowerCase();"-1"==o.indexOf(i)&&"-1"==c.indexOf(i)||r.push(t)})),this.bufferData=r.slice(n),this.currentData=r.slice(0,n),this.caheKey=e,this.currentData}},{key:"highLight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if(""===t||null==t)return[e];var n="".concat(t).toLocaleLowerCase(),r="".concat(e).toLocaleLowerCase();if(-1===r.indexOf(n))return[e];for(var a=e,o=[],i=t.length,c=0;a.length>0&&i>0&&c<300;){c++;var l=r.indexOf(n);-1!==l?(o.push(a.substring(0,l)),o.push(d.a.createElement("span",{className:"search-high"},a.substring(l,l+i))),a=a.substring(l+i),r=r.substring(l+i)):(o.push(a),a="")}return o}},{key:"hasArea",value:function(){var e=this.props,t=e.panelType;return e.isMultiSelectedEnabled&&-1!=["tree","grid","gridTree"].indexOf(t)}},{key:"dataGrouping",value:function(e){var t=new Map;return e.map((function(e,n){var r=e.area,a=void 0===r?"unknown":r,o=e.name,i=void 0===o?"":o,c=e.desc,l=void 0===c?"":c,s=t.get(a)||[];s.push({name:i,desc:l}),t.set(a,s)})),t}},{key:"renderItems",value:function(){var e=this,t=this.state.data,n=this.state.currentIndex,r=this.caheKey,a=this.dataGrouping(t),o=[];return a.forEach((function(t,a){var i=t.length;t.map((function(t,c){var l=t.name,s=void 0===l?"":l,u=t.desc,f=void 0===u?"":u;o.push(d.a.createElement("tr",{tabIndex:n===c?"0":"-1"},e.hasArea()||0!==c?"":d.a.createElement("td",{rowSpan:i,className:"hkq-group"},e.highLight(a,r)),d.a.createElement("td",null,e.highLight(s,r)),d.a.createElement("td",null,e.highLight(f,r))))}))})),o}},{key:"searchHandle",value:function(e){e.target&&(e.target.value&&(e.target.nextElementSibling.style.display=""),this.setState({data:this.getSearchData(e.target.value),currentIndex:0}))}},{key:"moveHandle",value:function(e){this.state.currentIndex;var t=this.panel;this.setState({currentIndex:e,data:this.currentData},(function(){t&&t.querySelector("tbody tr:nth-child(".concat(e+1,")"))}))}},{key:"focusInputHandle",value:function(e){e.target&&e.target.value&&(e.target.nextElementSibling.style.display="")}},{key:"blurInputHandle",value:function(e){e.target&&!this.enterClose&&(e.target.nextElementSibling.style.display="none")}},{key:"clearHandle",value:function(e){var t=this.panel&&this.panel.querySelector("input")||{value:""};this.caheKey="",t.value="",this.setState({data:this.getSearchData(""),currentIndex:0}),this.enterClose=!1,e.target&&(e.target.style.display="none")}},{key:"searchBtnHandle",value:function(e){var t=this.panel&&this.panel.querySelector("input")||{value:""};this.setState({data:this.getSearchData(t.value),currentIndex:0}),e.target&&e.target.value&&(e.target.nextElementSibling.style.display="")}},{key:"moreShow",value:function(){var e=this.props.limit;this.bufferData.length>0&&(this.currentData=this.currentData.concat(this.bufferData),this.bufferData=[],this.moveHandle.bind(this)(e-1))}},{key:"render",value:function(){var e=this,t=this.bufferData.length,n=this.props.langJson;return[d.a.createElement("div",{className:"hkq-helper-panel",ref:function(t){e.panel=t}},d.a.createElement(p.HotKeys,{keyMap:{more:["fn+up","fn+down","up","down"]},handlers:{more:function(){e.moreShow()}},attach:!1},d.a.createElement("div",{className:"hkq-helper-input"},d.a.createElement("input",{placeholder:n["hk-0004"],onChange:this.searchHandle.bind(this),onFocus:this.focusInputHandle.bind(this),onBlur:this.blurInputHandle.bind(this),type:"text"}),d.a.createElement("i",{className:"icon iconfont hkq-close",style:{display:"none"},onClick:this.clearHandle.bind(this),onMouseEnter:function(){e.enterClose=!0},onMouseLeave:function(){e.enterClose=!1}},""),d.a.createElement("i",{className:"icon iconfont hkq-search",onClick:this.searchBtnHandle.bind(this)},"")),d.a.createElement("div",{className:"hkq-scroll-header"},d.a.createElement("table",null,d.a.createElement("colgroup",null,this.hasArea()?"":d.a.createElement("col",{style:{width:"140px","min-width":"140px"}}),d.a.createElement("col",{style:{width:"140px","min-width":"140px"}}),d.a.createElement("col",null)),d.a.createElement("thead",null,d.a.createElement("tr",null,this.hasArea()?"":d.a.createElement("th",null,n["hk-0005"]),d.a.createElement("th",null,n["hk-0006"]),d.a.createElement("th",null,n["hk-0007"]))))),d.a.createElement("div",{className:"hkq-scroll-table",onScroll:function(){e.moreShow()}},d.a.createElement("table",null,d.a.createElement("colgroup",null,this.hasArea()?"":d.a.createElement("col",{style:{width:"140px","min-width":"140px"}}),d.a.createElement("col",{style:{width:"140px","min-width":"140px"}}),d.a.createElement("col",null)),d.a.createElement("tbody",null,this.renderItems()))))),d.a.createElement("button",{className:"hk-show-more",tabIndex:"-1",onClick:this.moreShow.bind(this)},0!==t?n["hk-0008"]:n["hk-0009"])]}}])&&Pi(t.prototype,n),r&&Pi(t,r),o}(u.Component);Ai.defaultProps={limit:14,bufferSize:4,data:[]};var Ii=Ai;function Mi(e){return(Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ri(){return(Ri=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Bi(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ki(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fi(e,t){return(Fi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Li(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qi(e);if(t){var a=qi(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Hi(this,n)}}function Hi(e,t){return!t||"object"!==Mi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qi(e){return(qi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(909);var Vi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fi(e,t)}(o,e);var t,n,r,a=Li(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).state={show:!1,langJson:{}},t}return t=o,(n=[{key:"componentWillMount",value:function(){var e=this;Object(f.getMultiLang)({moduleId:"hotkey_helper",callback:function(t,n){n&&e.setState({langJson:t})}})}},{key:"hideHandle",value:function(){this.setState({show:!1})}},{key:"render",value:function(){var e=this,t=this.state.langJson,n=this.props,r=n.size,a=n.className,o=n.backdrop,i=n.indexInfo,c=n.enabled,l=n.data,s=n.panelType,u=Bi(n,["size","className","backdrop","indexInfo","enabled","data","panelType"]),f=d.a.createElement("div",{className:"hkq-helper-content"},t["hk-0003"]);return c?d.a.createElement("div",{className:"hkq-helper-wrapper"},d.a.createElement(p.HotKeys,{display:"inline-block",keyMap:{open:["f3"]},handlers:{open:function(){e.setState({show:!0})}},focused:!0}),d.a.createElement(p.Tooltip,{placement:"left",inverse:!0,overlay:f,trigger:["focus","hover"],className:"hkq-helper-overlay"},d.a.createElement("i",{className:"hkq-helper-btn"})),d.a.createElement(p.Modal,Ri({ref:function(t){return e.Modal=t},show:this.state.show,onHide:this.hideHandle.bind(this),size:r,className:"combine  hkq-helper-modal  "+a,backdrop:o,indexInfo:i},u,{fieldid:"hkq-helper"}),d.a.createElement(p.Modal.Header,{closeButton:!0},d.a.createElement("span",{className:"hkq-helper-title"},t["hk-0001"]),d.a.createElement("span",{className:"hkq-helper-toast"},t["hk-0002"]),d.a.createElement("i",{className:"hkq-helper-esc",onClick:this.hideHandle.bind(this)},d.a.createElement(p.Icon,{type:"uf-close"})," (esc)")),d.a.createElement(p.Modal.Body,null,d.a.createElement(Ii,Ri({data:l,panelType:s,langJson:t},u))))):null}}])&&Ki(t.prototype,n),r&&Ki(t,r),o}(u.Component);Vi.defaultProps={className:"",backdrop:!0,enabled:!0};var Ui=Vi,Wi=n(8),Yi={};function zi(e){return(zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Yi.isMul=!1;var Ji=["datepicker","NCTZDatePickerStart","NCTZDatePickerEnd","timepicker","datetimepicker","rangepicker","datePickerNoTimeZone"],Zi=["select","radio","checkbox","refer"],Gi=Wi.utils.getPageSizeStorage;function Xi(e,t){if("[object Array]"!==Object.prototype.toString.call(t))return console.warn("源数据类型不为数组"),!1;if("[object Array]"!==Object.prototype.toString.call(e))return console.warn("模板配置列数据类型不为数组"),!1;var n=new Set;e.map((function(e){e.visible&&e.istotal&&n.add(e.key)}));var r=new Map;n.forEach((function(e){r.has(e)||r.set(e,[]),t.map((function(t){t.hasOwnProperty(e)&&t[e].renderValue&&r.get(e).push(t[e].renderValue.replace(/,/g,""))}))}));var a={};return r.forEach((function(e,t){var n=0,r=function(e){if("[object Array]"===Object.prototype.toString.call(e)){var t=e.map((function(e){return void 0===String(e).split(".")[1]?0:String(e).split(".")[1].length}));return Math.max.apply(null,t)}return String(e).split(".")[1]?String(e).split(".")[1].length:0}(e);e.map((function(e){n+=Number(e)}));var o=String(n);a[t]=Object(f.formatAcuracy)(o,r)})),a}function Qi(e,t,n){var r=e.attrcode,a=e.itemtype;if(Object(f.isFunction)(n))n(e);else switch(!0){case"number"===a:e.sorter=function(e,t){var n=e[r]&&e[r].value||"0",a=t[r]&&t[r].value||"0";return Number(n)-Number(a)};break;case Ji.includes(a):e.sorter=function(e,t){var n=e[r]&&e[r].value||"0",a=t[r]&&t[r].value||"0";return Number(new Date(n).getTime())-Number(new Date(a).getTime())};break;case Zi.includes(a):e.sorter=function(e,t){var n=String(e[r]&&e[r].display||""),a=String(t[r]&&t[r].display||"");return n.localeCompare(a)};break;case"label"===a:e.sorter=function(e,t){var n=e[r]&&e[r].value||"",a=e[r]?e[r].display:"",o=t[r]&&t[r].value||"",i=t[r]?t[r].display:"",c=String(isNullOrVoid(a)?n:a),l=String(isNullOrVoid(i)?o:i);return c.localeCompare(l)};break;case"numberindex"!==r&&"opr"!==r:e.sorter=function(e,t){var n=String(e[r]&&e[r].value||""),a=String(t[r]&&t[r].value||"");return n.localeCompare(a)}}e.sorterClick=function(e,n){t&&!0===t.backSource&&Object(f.isFunction)(t.sortFun)&&t.sortFun(e,n)}}function $i(e){return($i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ec(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tc(e,t){return(tc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ac(e);if(t){var a=ac(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return rc(this,n)}}function rc(e,t){return!t||"object"!==$i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ac(e){return(ac=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var oc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tc(e,t)}(o,e);var t,n,r,a=nc(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).handleMouseOver=function(){if(t.cellDom){var e=t.state.tipStatus;t.cellDom.scrollWidth>t.cellDom.clientWidth&&!1===e&&t.setState({tipStatus:!0}),t.cellDom.scrollWidth<=t.cellDom.clientWidth&&!0===e&&t.setState({tipStatus:!1})}},t.state={tipStatus:!1},t}return t=o,(n=[{key:"componentWillUnmount",value:function(){this.cellDom=null}},{key:"render",value:function(){var e=this,t=this.props,n=t.context,r=t.multipleRowCell,a=t.isLineAll;return d.a.createElement(p.Tooltip,{onMouseOver:this.handleMouseOver,placement:"top",overlay:this.state.tipStatus?n:"",className:"tooltip-word-color",delay:1,inverse:!0},d.a.createElement("span",{className:W()({textLineAll:!r},{noTextLineAll:!a}),ref:function(t){e.cellDom=V.a.findDOMNode(t)}},n||d.a.createElement("span",null," ")))}}])&&ec(t.prototype,n),r&&ec(t,r),o}(u.Component);function ic(e){return function(e){if(Array.isArray(e))return cc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return cc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cc(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lc(Object(n),!0).forEach((function(t){uc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function uc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dc=Wi.utils.setPageSizeStorage,fc=Wi.utils.getPageSizeStorage,pc=Wi.lib.total,hc=["#111111","#555555","#111","#555"];n(1879);var mc,yc,bc=pc(p.Table.SortTable),vc=0,gc=window.screen.width;vc=gc<=1919>1440?"480px":gc>1919?"560px":"400px";var kc=p.Select.Option,Sc=null,Oc={type:"checkbox",param:"key"},wc=function(e){for(var t=e.length,n=!1;t--;)if(e[t]){n=!0;break}return n};var Cc={createInsertTable:function(e){var t=this,n=e.headTableId,r=e.bodyTableId,a=e.setTableBodyData,o=e.pageIndexChange,i=e.pageSizeChange,c=e.rowCheckChildChange,l=e.onAllCheckChangeEve,s=e.rowCheckChange,u=e.comType,h=e.needIndex,m=void 0===h||h,y=e.childNeedIndex,b=void 0!==y&&y,v=e.mockRadio,g=void 0!==v&&v,k=e.isDrag,S=void 0===k||k,O=e.multipleRowCell,w=void 0!==O&&O,C=e.adaptionHeight,E=void 0!==C&&C,j=e.inModal,x=void 0!==j&&j,P=e.customSortRule,_=e.fieldid,N=e.insertTableHeight,T=void 0!==N&&N;if(!this.state.meta)return!1;if(!this.state.meta.hasOwnProperty(n)||!this.state.meta[n])return!1;if(!this.state.insertTable[n])return!1;this.defPageInfo={pageSize:fc(this.state.meta,n),pageIndex:1,totalPageIndex:5};var D=this.state.meta;function A(e){e.map((function(e){e.dataIndex=e.attrcode}))}A(D[n].items);var I={mode:"single",backSource:!1,sortFun:function(e,r){var a={},o=t.state.insertTable[n].mainCheckObj||{},i=t.state.insertTable[n].outerData||[],c=[],l=D[n].items;e.forEach((function(e){a[e.field]=e})),l.forEach((function(e){a[e.attrcode]?(e.order=a[e.attrcode].order,e.orderNum=a[e.attrcode].orderNum):(e.order="flatscend",e.orderNum="")})),r.forEach((function(e){i.forEach((function(t){e.key===t.values.key&&c.push(t)}))})),t.state.insertTable[n].outerData=c,o.data=c}},M=this.state.insertTable[n];function R(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n=n||document;var a=0;if(e&&e.length){var o=n.querySelector(".u-table-thead"),i=n.querySelector(".u-table-tbody"),c=i.querySelectorAll(".u-table-row")[0],l=o&&o.getBoundingClientRect().height,s=c&&c.getBoundingClientRect().height,u=t?45:0,d=30,f=10;if(c&&l){var p=l+f+u;return a=e.length<11?e.length*s<d?d+p:e.length*s+p:10*s+p,r?e.length>9?a-p:"":a}return 0}return e&&0==e.length&&t?110:e&&0==e.length&&!t?65:void 0}M.tableHeight=vc,console.log("子表表格的组件id:",n,";子表表格的组件id:",r),M.multilingual=mc,Object(f.getMultiLang)({moduleId:"containers_insert_tree_table",callback:function(e){Yi.isMul||(M.multilingual=e,mc=e,t.setState({insertTable:t.state.insertTable},(function(){Yi.isMul=!0})))}}),M.fatherTable={},Object.defineProperty(M.fatherTable,"top",{set:function(e){M.fatherTable.height=document.body.clientHeight-e-100}});var B=M.outerData,K=Object.assign({},this.defPageInfo,M.pageInfo);M.pageInfo=K;var F=K.pageSize,L=K.pageIndex;this.setTableBodyData=a,this.pageIndexChange=o,this.pageSizeChange=i;var H=this.state.meta[n].items.filter((function(e){return e.visible})),q=this.state.meta[r].items.filter((function(e){return e.visible})),U=this.state.meta[n].pagination,Y=function(e,t,n){for(var r=[],a=Number(t),o=Number(n),i=(a-1)*o,c=i;c<i+o&&e[c];c++)r.push(e[c]);return r},z=function(e,n,r,a,o){var i=!1,l=M.childCheckObj[a.key];l.checkedArrayChild[r]=!l.checkedArrayChild[r];for(var s=0;s<l.checkedArrayChild.length;s++){if(!l.checkedArrayChild[s]){i=!1;break}i=!0}M.mainCheckObj.checkedArray[o]=l.checkedAllChild=i,function(e){var t=e.mainCheckObj,n=t.checkedArray.length;for(t.checkedAll=!0;n--;)if(!t.checkedArray[n]){t.checkedAll=!1;break}}(M),"function"==typeof c&&c(l.checkedArrayChild[r],n,M),t.setState(t.state)},J=function(e,n,r){var a=M.childCheckObj[n.key].checkedArrayChild,o=Oc,i=[{label:M.multilingual&&M.multilingual["insert-tree-table-003"],attrcode:"indexCol",dataIndex:"indexCol",width:"60px",className:"nunberindex",title:M.multilingual&&M.multilingual["insert-tree-table-003"],render:function(e,t,n){return d.a.createElement("span",null,n+1)}}],c=e;(m&&(c=i.concat(c)),o&&"checkbox"===o.type)&&(c=[{label:"",attrcode:"innerCheckbox",dataIndex:"checkbox",width:"120px",render:function(e,o,i){var c=o.values||o;return c&&c.saga_status&&"1"===c.saga_status.value?d.a.createElement(p.ErrorPop,{record:o}):d.a.createElement(p.Checkbox,{className:"table-checkbox",checked:a[i],onChange:z.bind(t,e,o,i,n,r)})}}].concat(c));return c},Z=function(e){var t=[{label:M.multilingual&&M.multilingual["insert-tree-table-003"],attrcode:"indexCol",dataIndex:"indexCol",width:"60px",className:"nunberindex",title:M.multilingual&&M.multilingual["insert-tree-table-003"],render:function(e,t,n){return d.a.createElement("span",null,n+1)}}],n=e;return m&&(n=t.concat(n)),n},G=function(e,t){var n=new Map;t&&t.map((function(e){e.itemtype&&"number"===e.itemtype&&(n.has(e.attrcode)||n.set(e.attrcode,{}),n.has(e.attrcode)&&(n.get(e.attrcode).scale=e.scale))}));var r=[];return e.map((function(e,a){t&&n.forEach((function(t,n){var r=e.values[n]&&e.values[n].scale;r=Number(r);var a=Number(t.scale)>0?Number(t.scale):0;if(isNaN(r)||(a=r),e.values[n]&&e.values[n].value){var o=Object(f.formatAcuracy)(e.values[n].value,a);e.values[n].renderValue=o}})),m&&(e.values.indexCol={value:a}),r.push(e.values)})),r},X=function(e){var t=!1;return e.map((function(e){e.hasOwnProperty("istotal")&&e.istotal&&(t=!0)})),t},Q=function(e,t){var n=!1,r=M.multilingual&&M.multilingual["insert-tree-table-007"],a=e.map((function(e){var t={};return e.istotal||n?"checkbox"!==e.attrcode&&"checkbox"!==e.dataIndex||n?("indexCol"!==e.attrcode||n)&&("customer"!==e.itemtype||n)?(t.title=e.title,t.dataIndex=e.dataIndex||e.key,t.width=e.width?e.width:"",t.key=e.key):(t.title=r,t.dataIndex="total",t.key="total",t.width=e.width?e.width:"",n=!0):(t.title=r,t.dataIndex="total",t.key="total",t.width=e.width?e.width:"60px",n=!0):(t.title=r,t.dataIndex="total",t.key="total",t.width=e.width?e.width:"80px",n=!0),"customer"!==e.itemtype&&"checkbox"!==e.attrcode&&"indexCol"!==e.attrcode&&(t.width=e.width?e.width:"120px"),t.render=function(n){return d.a.createElement("div",{className:"alignRight",fieldid:Object(f.getSysFieldid)("total"===t.dataIndex?"firstcol":e.attrcode)},d.a.createElement(oc,{context:n,isLineAll:!0}))},t})),o=Xi(e,t);return{totalColumns:a,totalData:[sc({total:r},o)]}},$=function(){for(var e=[],n={},r=M.mainCheckObj,a=0;a<r.checkedArray.length;a++){var o=M.outerData[a],i=o.values;i&&i.saga_status&&"1"===i.saga_status.value?(n[o.rowId||i.key]=o.rowId||i.key,e[a]=!1):e[a]=!r.checkedAll}r.checkedAll=!r.checkedAll,r.checkedArray=e;var c=M.childCheckObj,s=function(e){n[e]?(c[e].checkedAllChild=!1,c[e].checkedArrayChild=c[e].checkedArrayChild.map((function(){return!1}))):(c[e].checkedAllChild=r.checkedAll,c[e].checkedArrayChild=c[e].checkedArrayChild.map((function(t,n){var a=M.bodyData.data[e].rows[n].values;return(!a||!a.saga_status||"1"!==a.saga_status.value)&&r.checkedAll})))};for(var u in c)s(u);t.setState(t.state),"function"==typeof l&&l(M.mainCheckObj.checkedAll,M.mainCheckObj.data,M.bodyData)},ee=function(e,n,r){var a=!1,o=n.key,i=M.mainCheckObj;console.log(11122,M);var c=i.checkedArray[r];if(i.checkedArray[r]=!i.checkedArray[r],g){var l=[];i.checkedArray.map((function(e,t){r===t?l.push(!c):l.push(!1)})),i.checkedArray=l}for(var u=0;u<i.checkedArray.length;u++){if(!i.checkedArray[u]){a=!1;break}a=!0}i.checkedAll=a,"{}"!==JSON.stringify(M.childCheckObj)&&M.childCheckObj.hasOwnProperty(o)&&(M.childCheckObj[o].checkedAllChild=i.checkedArray[r],M.childCheckObj[o].checkedArrayChild.map((function(e,t){M.childCheckObj[o].checkedArrayChild[t]=i.checkedArray[r]}))),t.setState(t.state),"function"==typeof s&&s(i.checkedArray[r],M.mainCheckObj.data[r],M)};B&&M.firstTime&&(M.firstTime=!1,M.bodyData={column:{},data:{}},M.childCheckObj={},M.mainCheckObj={checkedAll:!1,checkedArray:[],data:B},B.map((function(){M.mainCheckObj.checkedArray.push(!1)})));var te=H,ne=null;"hasCheckBox"!==u&&"hasCheckBox_child"!==u||(te=function(e){var n=M.mainCheckObj.checkedArray,r=Oc,a=!1,o=[{label:M.multilingual&&M.multilingual["insert-tree-table-003"],attrcode:"indexCol",dataIndex:"indexCol",width:"60px",className:"nunberindex",title:M.multilingual&&M.multilingual["insert-tree-table-003"],render:function(e,t,n){return d.a.createElement("span",{style:{width:"60px"}},n+1)}}],i=e;if(m&&(i=o.concat(i)),r&&"checkbox"===r.type){"hasCheckBox_child"===u?(a=wc(n))||(a=function(e){var t=!1;for(var n in e){var r=e[n];if(r.checkedAllChild){t=!0;break}for(var a=r.checkedArrayChild,o=a.length,i=0;i<o;i++)if(a[i]){t=!0;break}}return t}(M.childCheckObj)):a=wc(n);var c=d.a.createElement(p.Checkbox,{className:"table-checkbox",checked:M.mainCheckObj.checkedAll,indeterminate:a&&!M.mainCheckObj.checkedAll,onChange:$.bind(t)});i=[{title:g?null:c,attrcode:"checkbox",dataIndex:"checkbox",width:"80px",render:function(e,n,r){var a=!1;if(M.childCheckObj&&M.childCheckObj.hasOwnProperty(n.key))for(var o=M.childCheckObj[n.key].checkedArrayChild,i=o.length;i--;)if(o[i]){a=!0;break}"hasCheckBox"===u&&(a=!1);var c=n.values||n;return c&&c.saga_status&&"1"===c.saga_status.value?d.a.createElement(p.ErrorPop,{record:n}):d.a.createElement(p.Checkbox,{className:"table-checkbox",checked:M.mainCheckObj.checkedArray[r],indeterminate:a&&!M.mainCheckObj.checkedArray[r],onChange:ee.bind(t,e,n,r)})}}].concat(i)}return i}.call(this,H),ne="hasCheckBox");var re=function(e){var t=M.multilingual&&M.multilingual["insert-tree-table-008"],n=M.multilingual&&M.multilingual["insert-tree-table-009"],r=M.multilingual&&M.multilingual["insert-tree-table-010"];return e.map((function(e,a){var o=!0,i=null;return"customer"==e.itemtype&&(e.width?e.width:e.width="90px",e.title=t),"customer"!==e.itemtype&&"checkbox"!==e.attrcode&&"indexCol"!==e.attrcode?("normal"==u&&0==a&&(o=!1),e.width?e.width:e.width="120px",e.title=d.a.createElement("span",{fieldid:Object(f.getSysFieldid)(e.attrcode),style:{color:hc.includes(e.color)?"":e.color},className:W()("title-container",{alignRight:"number"===e.itemtype})},e.required&&d.a.createElement("span",{className:"mark-required"},"*")," ",e.label," "),i=function(t,a){if(a.hasOwnProperty(e.attrcode)){var i=a[e.attrcode].display,c=a[e.attrcode].scale;c=Number(c);var l=a[e.attrcode].value;switch(e.itemtype){case"datepicker":case"NCTZDatePickerEnd":l=Object(f.changeTime)(l),l=Object(f.formatDatetime)(l,"date");break;case"timepicker":l=l;break;case"datetimepicker":l=Object(f.changeTime)(l,"YYYY-MM-DD HH:mm:ss"),l=Object(f.formatDatetime)(l,"datetime")}["switch","switch_browse","checkbox","checkbox_switch"].includes(e.itemtype)&&(l="Y"===l||!0===l?n:r);var s="";if("boolean"==typeof(s=i||0==i?i:l)&&(s=s?n:r),"number"===e.itemtype){var u=Number(e.scale)>0?Number(e.scale):0;!isNaN(c)&&c>=0&&(u=c),s=Object(f.formatAcuracy)(l,u),s=Object(f.formatNumber)(s),a[e.attrcode].renderValue=s}return d.a.createElement("span",{fieldid:Object(f.getSysFieldid)(e.attrcode),className:W()({alignRight:"number"===e.itemtype})},d.a.createElement(oc,{context:s,multipleRowCell:w,isLineAll:o}))}}):i=e.render,sc(sc({},e),{},{render:i,key:e.attrcode,title:e.title,required:null})}))}(te);re=re.map((function(e){return"checkbox"!==e.attrcode&&"indexCol"!==e.attrcode&&Qi(e,I,P),e}));var ae=G(M.mainCheckObj.data,re),oe=X(re),ie={};oe&&(ie=Q(re,ae));var ce,le,se=Number((ce=document.body,le="paddingBottom",ce.currentStyle?ce.currentStyle[le]:document.defaultView.getComputedStyle(ce,null)[le]).replace("px",""));return M.tableHeight=M.tableHeight-se,d.a.createElement("div",{className:["insertTable",ne].join(" "),fieldid:Object(f.getSysFieldid)("".concat(_||n,"_table")),style:{overflow:"hidden"},ref:function(e){e&&(yc=e)}},d.a.createElement(bc,{otherAreaHeight:U?38:0,adaptionHeight:E,inModal:x,lazyload:!1,bodyStyle:{minHeight:T||"419px"},className:"outerTable",isTotal:oe,columns:re,data:ae,onExpand:function(e,n){if(e){M.expandedRowKeys.push(n.key),Sc=n.key;var r=M.childCheckObj.hasOwnProperty(Sc);t.setTableBodyData(n,r)}else{var a=M.expandedRowKeys.indexOf(n.key);M.expandedRowKeys.splice(a,1)}t.setState(t.state)}.bind(this),expandedRowKeys:M.expandedRowKeys,expandedRowRender:function(e,n){if(!M.childCheckObj.hasOwnProperty(e.key))return!1;var a=q;"hasCheckBox_child"===u&&(a=J.call(t,a,e,n)),b&&(a=Z.call(t,a,e,n)),A(a);var o={mode:"single",backSource:!1,sortFun:function(e){var t={},n=a;e.forEach((function(e){t[e.field]=e})),n.forEach((function(e){t[e.attrcode]?(e.order=t[e.attrcode].order,e.orderNum=t[e.attrcode].orderNum):(e.order="flatscend",e.orderNum="")}))}};if(M.bodyData.data&&M.bodyData.data.hasOwnProperty(e.key)){var i=function(e){var t=M.multilingual&&M.multilingual["insert-tree-table-008"],n=M.multilingual&&M.multilingual["insert-tree-table-009"],r=M.multilingual&&M.multilingual["insert-tree-table-010"];return e.map((function(e){var a=null;return"customer"==e.itemtype&&(e.width?e.width:e.width="90px",e.title=t),"customer"!==e.itemtype&&"checkbox"!==e.attrcode&&"indexCol"!==e.attrcode?(e.width?e.width:e.width="120px",e.title=d.a.createElement("span",{fieldid:Object(f.getSysFieldid)(e.attrcode),style:{color:hc.includes(e.color)?"":e.color},className:W()("title-container",{alignRight:"number"===e.itemtype})},e.required&&d.a.createElement("span",{className:"mark-required"},"*")," ",e.label," "),a=e.render?function(t,n,r){return d.a.createElement("div",{fieldid:Object(f.getSysFieldid)(e.attrcode)},d.a.createElement(oc,{context:e.render(t,n,r),multipleRowCell:!1}))}:function(t,a){if(a.hasOwnProperty(e.attrcode)){var o=a[e.attrcode].display,i=a[e.attrcode].scale;i=Number(i);var c=a[e.attrcode].value;switch(e.itemtype){case"datepicker":case"NCTZDatePickerEnd":c=Object(f.changeTime)(c),c=Object(f.formatDatetime)(c,"date");break;case"datetimepicker":c=Object(f.changeTime)(c,"YYYY-MM-DD HH:mm:ss"),c=Object(f.formatDatetime)(c,"datetime")}["switch","switch_browse","checkbox","checkbox_switch"].includes(e.itemtype)&&(c="Y"===c||!0===c?n:r);var l="";if("boolean"==typeof(l=o||0==o?o:c)&&(l=l?n:r),"number"===e.itemtype){var s=Number(e.scale)>0?Number(e.scale):0;!isNaN(i)&&i>=0&&(s=i),l=Object(f.formatAcuracy)(c,s),l=Object(f.formatNumber)(l),a[e.attrcode].renderValue=l}return d.a.createElement("div",{fieldid:Object(f.getSysFieldid)(e.attrcode),className:W()({alignRight:"number"===e.itemtype})},d.a.createElement(oc,{context:l,multipleRowCell:w}))}}):a=e.render,sc(sc({},e),{},{render:a,key:e.attrcode,title:e.title,required:null})}))}(a);i=i.map((function(e){return"checkbox"!==e.attrcode&&"indexCol"!==e.attrcode&&Qi(e,o,P),e}));var c=G(M.bodyData.data[e.key].rows,a),l=X(i),s={};l&&(s=Q(i,c));var p=G(M.bodyData.data[e.key].rows),h=R(p,l,V.a.findDOMNode(yc)),m=R(p,l,V.a.findDOMNode(yc),!0);return d.a.createElement("div",{fieldid:Object(f.getSysFieldid)("".concat(_||r,"_table")),style:{height:"".concat(h,"px")}},d.a.createElement(bc,{className:"innerTable",columns:ic(i),data:p,isTotal:l,inserttableTotalConfig:s,isDrag:S,bodyStyle:{minHeight:"30px"},scroll:{x:!0,y:m||450},sort:o,totalBodyHeight:30}))}}.bind(this),scroll:{x:!0,y:M.tableHeight},inserttableTotalConfig:ie,isDrag:S,sort:I}),d.a.createElement(p.Col,{md:12,xs:12,sm:12},U&&M.multilingual?d.a.createElement("div",{className:"insertTable-component-paginationDiv",fieldid:Object(f.getSysFieldid)("pagination-div")},d.a.createElement("div",{className:"fl page-size"},d.a.createElement(p.Select,{className:"pageSizeDom",size:"lg",value:Number(F||""),style:{width:90,marginRight:6},onChange:function(e){var r,a=M.pageInfo.total;(M.pageInfo.pageSize=e,dc(t.state.meta,n,e),M.pageInfo.pageIndex=1,M.pageInfo.totalPage=Math.ceil(a/M.pageInfo.pageSize),Object(f.isFunction)(i))&&(M.allpks&&(r=Y(M.allpks,M.pageInfo.pageIndex,M.pageInfo.pageSize)),B=t.pageSizeChange(e,r));F=e,t.setState(t.state)}.bind(this),fieldid:"page-size"},d.a.createElement(kc,{value:5},"5",M.multilingual["insert-tree-table-004"],"/",M.multilingual["insert-tree-table-006"]),d.a.createElement(kc,{value:10},"10",M.multilingual["insert-tree-table-004"],"/",M.multilingual["insert-tree-table-006"]),d.a.createElement(kc,{value:20},"20",M.multilingual["insert-tree-table-004"],"/",M.multilingual["insert-tree-table-006"]),d.a.createElement(kc,{value:50},"50",M.multilingual["insert-tree-table-004"],"/",M.multilingual["insert-tree-table-006"]),d.a.createElement(kc,{value:100},"100",M.multilingual["insert-tree-table-004"],"/",M.multilingual["insert-tree-table-006"])),!!+K.total&&d.a.createElement("span",{className:"NC_total"}," ",M.multilingual["insert-tree-table-005"]," ",d.a.createElement("span",null,K.total," "),M.multilingual["insert-tree-table-004"]," "))):null,U&&K?d.a.createElement(p.Pagination,{prev:!0,next:!0,boundaryLinks:!0,items:K.totalPage?Number(K.totalPage):1,maxButtons:5,activePage:Number(L),onSelect:function(e){var n;M.pageInfo.pageIndex=e,Object(f.isFunction)(t.pageIndexChange)&&(M.allpks&&(n=Y(M.allpks,M.pageInfo.pageIndex,M.pageInfo.pageSize)),B=t.pageIndexChange(e,n)),L=e,t.setState(t.state)}.bind(this)}):""))},getInsertTableValue:function(e){return this.state.insertTable[e]},setInsertTableValue:function(e,t,n,r){Yi.isMul=!1;var a=this.state.insertTable[e];if(t.hasOwnProperty("pageInfo")&&!Object(f.isWrong)(t.pageInfo))"0"===t.pageInfo.pageIndex&&(t.pageInfo.pageIndex="1");else{var o=Gi(this.state.meta,e);t.rows.length>0?t.pageInfo=a?a.pageInfo:{pageSize:o,pageIndex:"1"}:t.pageInfo={pageSize:a?a.pageInfo.pageSize:o,pageIndex:"1"}}r&&(t.pageInfo.pageIndex="1"),t.hasOwnProperty("allpks")||(t.rows.length>0?t.allpks=a?a.allpks:[]:t.allpks=[]),t.rows.map((function(e,t){if(!e.rowId&&0!==e.rowId){if(!e.values[n])return console.error("setInsertTableValue方法中，rowId没找到"),!1;e.rowId=e.values[n].value}e.values.key=e.rowId,e.values.rowIndex=t})),this.state.insertTable[e]={outerData:t.rows,pageInfo:t.pageInfo,allpks:t.allpks,firstTime:!0,expandedRowKeys:[]},this.setState({insertTable:this.state.insertTable})},setChildTableData:function(e,t,n,r){var a=this.state.insertTable[e],o=[],i=t.key,c=t.rowIndex;n.rows.map((function(e,t){if(!e.rowId&&0!==e.rowId){if(!e.values[r])return console.error("setChildTableData方法，没有找到rowId"),!1;e.rowId=e.values[r].value}e.values.key=e.rowId,a.mainCheckObj.checkedArray[c]?o.push(!0):o.push(!1)})),a.bodyData.data[i]=n,a.childCheckObj.hasOwnProperty(i)||(a.childCheckObj[i]={checkedAllChild:a.mainCheckObj.checkedArray[c],checkedArrayChild:o}),this.setState({insertTable:this.state.insertTable})},getInsertTableSelectedValue:function(e,t,n){var r=this.state.insertTable[e],a=[],o=null;return r.mainCheckObj.checkedArray.map((function(e,i){var c={};r.mainCheckObj.checkedArray[i]?r.outerData[i].values.hasOwnProperty(t)?(c[t]=r.outerData[i].values[t].value,a.push(c)):alert("没有找到主表主键"):(o=r.outerData[i].values.key,r.childCheckObj.hasOwnProperty(o)&&(c[n]=[],r.childCheckObj[o].checkedArrayChild.map((function(e,a){r.childCheckObj[o].checkedArrayChild[a]&&(c[t]=r.outerData[i].values[t].value,c[n].push(r.bodyData.data[o].rows[a].values[n].value))})),c[t]&&a.push(c)))})),a},getPageInfo:function(e){return this.state.insertTable[e].pageInfo},getCheckedRows:function(e){var t=this.state.insertTable[e];if("string"==typeof e&&t){var n=[];return t.mainCheckObj&&Object(f.isArray)(t.mainCheckObj.checkedArray)&&t.mainCheckObj.checkedArray.map((function(e,r){e&&n.push({data:t.outerData[r],index:r})})),n}return Object(f.warningOnce)(!1,"所操作的表格中无ID为".concat(e,"的数据")),!1},deleteTableRowsByIndex:function(e,t){var n=this.state.insertTable[e];if("string"==typeof e&&n){if("number"==typeof t||Object(f.isArray)(t)){"number"==typeof t&&(t=[t]);var r;r=JSON.parse(JSON.stringify(n.outerData)).filter((function(e,n){return!t.includes(n)})),n.outerData=r,n.mainCheckObj.data=r;for(var a=n.mainCheckObj.checkedArray.concat(),o=0;o<a.length;o++)t.includes(o)&&(a.splice(o,1),o--);return n.mainCheckObj.checkedArray=a,this.setState({insertTable:this.state.insertTable}),console.log(n),!1}return Object(f.warningOnce)("string"==typeof rowId,"传入的第二个参数为数字，或数字的数组"),!1}return Object(f.warningOnce)(!1,"所操作的表格中无ID为".concat(tableId,"的数据")),!1},updateDataByRefresh:function(e,t,n,r){var a=this,o=this.state.insertTable[e];if("string"==typeof e&&o&&Array.isArray(n)){var i=function(){var e=o.outerData,i=o.bodyData,c=e.length,l=n.length,s=i&&i.data&&Object.keys(i.data),u={};if(!c||!l)return{v:void 0};if(n.forEach((function(e,n){var r={};for(var a in e)if(e.hasOwnProperty(a)){var o=e[a];r[a]={value:o.value||o,display:o.display||o}}u[e[t]]=r})),e.forEach((function(e,n){var a=e.values,o=a[t],i=o&&o.value,c=u[i];c&&o&&(a=Object.assign(a,c),"1"===c.saga_status&&(a.saga_errormesg=r))})),s)for(var d in i=i.data){if(i.hasOwnProperty(d))i[d].rows.forEach((function(e,n){var a=e.values,o=a[t],i=o&&o.value,c=u[i];c&&o&&(a=Object.assign(a,c),"1"===c.saga_status&&(a.saga_errormesg=r))}))}a.setState({insertTable:a.state.insertTable})}();if("object"===zi(i))return i.v}},changeCheck:function(e,t,n){var r=this.state.insertTable[e],a=!1,o=r.mainCheckObj;t.map((function(e){o.checkedArray[e]=n}));for(var i=0;i<o.checkedArray.length;i++){if(!o.checkedArray[i]){a=!1;break}a=!0}o.checkedAll=a;var c=o.data;t.map((function(e){var t=c[e].values.key;"{}"!==JSON.stringify(r.childCheckObj)&&r.childCheckObj.hasOwnProperty(t)&&(r.childCheckObj[t].checkedAllChild=n,r.childCheckObj[t].checkedArrayChild.map((function(e,a){r.childCheckObj[t].checkedArrayChild[a]=n})))})),this.setState({insertTable:this.state.insertTable})}};function Ec(){return(Ec=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function jc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jc(Object(n),!0).forEach((function(t){Pc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _c(e){return(_c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tc(e,t){return(Tc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mc(e);if(t){var a=Mc(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Ac(this,n)}}function Ac(e,t){return!t||"object"!==_c(t)&&"function"!=typeof t?Ic(e):t}function Ic(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mc(e){return(Mc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1880);var Rc=p.Select.Option;function Bc(e,t){return e===t}var Kc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tc(e,t)}(o,e);var t,n,r,a=Dc(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).shouldComponentUpdate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.props||{},a=t.state||{};if(Object.keys(r).length!==Object.keys(e).length||Object.keys(a).length!==Object.keys(n).length)return!0;for(var o in e)if(!Bc(r[o],e[o]))return!0;for(var i in n)if(a[i]!==n[i]||!Bc(a[i],n[i]))return!0;return!1},t.close=function(){t.setState({show:!1})},t.open=function(){var e=t.props.data,n=e.funcode,r=e.nodekey,a=e.appcode,o=e.oids;Object(f.ajax)({method:"post",url:"/nccloud/platform/print/queryTemplates.do",data:{funcode:n,nodekey:r,appcode:a,oids:o},mode:"normal",success:function(e){if(e.data.data||e.data){var n=e.data.data||[],r=n.length?n[0].m_ctemplateid:"";t.setState({printTemplateMenu:n,data:xc(xc({},t.state.data),{},{printTemplateID:r}),show:!0})}else{var a=e.data.error||e.error;if(a)if("object"===_c(a)){var o=Object.values(a);Object(f.toast)({color:"warning",content:o.join("||")})}else Object(f.toast)({color:"warning",content:String(e)})}},error:function(e){Object(f.toast)({color:"danger",content:e.message})}})},t.submit=function(){Object(f.ajax)({method:"post",url:"/nccloud/platform/print/queryPrintAuthorize.do",data:{},success:function(e){var n=Object.assign({},t.props.data,t.state.data),r=t.state.data.printTemplateID;n.printTemplateName="";var a=t.state.printTemplateMenu;a&&a instanceof Array&&a.forEach((function(e){e.m_ctemplateid==r&&(n.printTemplateName=e.m_vtemplatename)}));var o={url:t.props.url||"/nccloud/reva/revecont/print.do",params:Object.assign({},Object.assign({},n,{outputSetting:JSON.stringify(n),download:"directOutput",outputMode:n.outputMode})),enctype:2,isCipher:!0};Object(f.formDownload)(o),"function"==typeof t.props.callback&&t.props.callback(),t.close()}})},t.handleTypeChange=function(e){t.setState({data:Object.assign({},t.state.data,{outputMode:e})})},t.handlePrintTemplateIDChange=function(e){t.setState({data:Object.assign({},t.state.data,{printTemplateID:e})})},t.handleMultiConfigChange=function(e){t.setState({data:Object.assign({},t.state.data,{MultiConfig:e})})},t.changePdfConfigCheck=function(e){console.log(e),t.setState({data:Object.assign({},t.state.data,{pdfConfig:e})})},t.changeHtmlConfigCheck=function(e){t.setState({data:Object.assign({},t.state.data,{htmlConfig:e})})},t.handlePrefixInputChange=function(e){t.setState({data:Object.assign({},t.state.data,{prefix:e})})},t.handleThresholdInputChange=function(e){t.setState({data:Object.assign({},t.state.data,{threshold:e})})},t.gerMultitaskSetup=function(){var e=t.state.data,n=e.outputMode,r=e.sheetNamePreFix,a=e.dsPositionPolicy,o=e.fileVolume,i=e.isDifDocDifFile,c=e.canModifyType,l=void 0!==c&&c,s=t.state.json,u=void 0===s?{}:s,f="",h={display:"block"},m=[{display:u["api-print-0013"],value:4},{display:u["api-print-0014"],value:5},{display:u["api-print-0015"],value:6}],y=[{display:u["api-print-0016"],value:!1},{display:u["api-print-0017"],value:!0}];return"excel"===n?f=d.a.createElement("div",null,d.a.createElement(p.Radio.RadioGroup,{name:"type",selectedValue:a,onChange:t.handleOtherSheet.bind(Ic(t),"dsPositionPolicy")},m.map((function(e,t){return d.a.createElement(p.Radio,{disabled:!l,style:h,key:t.toString(),value:e.value},e.display)}))),d.a.createElement("div",{className:"form-region"},d.a.createElement("p",{className:"label"},u["api-print-0018"],"："),d.a.createElement("div",{className:"in-form"},d.a.createElement(p.Input,{value:r,onChange:t.handleOtherSheet.bind(Ic(t),"sheetNamePreFix")}))),d.a.createElement("div",{className:"form-region"},d.a.createElement(p.Tooltip,{inverse:!0,placement:"top",overlay:u["api-print-0021"]},d.a.createElement("p",{className:"label"},u["api-print-0019"],"：")),d.a.createElement("div",{className:"in-form"},d.a.createElement(p.InputNumber,{iconStyle:1,min:1,value:o,onChange:t.handleOtherSheet.bind(Ic(t),"fileVolume")})))):["pdf","html"].includes(n)&&(f=d.a.createElement("div",null,d.a.createElement(p.Radio.RadioGroup,{name:"type",selectedValue:i,onChange:t.handleOtherSheet.bind(Ic(t),"isDifDocDifFile")},y.map((function(e,t){return d.a.createElement(p.Radio,{disabled:!l,style:h,key:t.toString(),value:e.value},e.display)}))))),d.a.createElement("div",{className:"task-container"},d.a.createElement("h3",null,u["api-print-0020"]),f)},t.state={show:!1,json:{},printTemplateMenu:[],data:{outputMode:"pdf",MultiConfig:"1",pdfConfig:!1,printTemplateID:"",htmlConfig:!1,prefix:"",threshold:0,dsPositionPolicy:4,fileVolume:16e3,sheetNamePreFix:"新的工作表",isDifDocDifFile:!1,canModifyType:e.canModifyType||!1}},t}return t=o,(n=[{key:"componentWillMount",value:function(){var e=this,t=this.props.json;t?this.setState({json:t}):Object(f.getMultiLang)({moduleId:"api-print",callback:function(t,n,r){var a=e.state.data;a.sheetNamePreFix=t["api-print-0022"]||"新的工作表",e.setState({json:t,data:a})}})}},{key:"handleOtherSheet",value:function(e,t){this.setState({data:Object.assign({},this.state.data,Pc({},e,t))})}},{key:"render",value:function(){var e=this,t=(this.state.data.type,this.state),n=t.json,r=t.printTemplateMenu;return d.a.createElement(p.Modal,Ec({},this.props,{fieldid:"print",show:this.state.show,ref:function(t){return e.Modal=t},className:"senior print-output-contain",onHide:this.close,zIndex:220}),d.a.createElement(p.HotKeys,{keyMap:{sureBtnHandler:p.HotKeys.USUAL_KEYS.MODAL_CONFIRM,cancelBtnHandler:p.HotKeys.USUAL_KEYS.MODAL_CALCEL},handlers:{sureBtnHandler:function(){e.Modal&&e.Modal.isTopModal()&&e.submit()},cancelBtnHandler:function(){e.Modal&&e.Modal.isTopModal()&&e.close()}},className:"print-template-hotkeys-wrapper",focused:!0,attach:document.body,display:"inline"}),d.a.createElement(p.Modal.Header,{closeButton:!0},d.a.createElement(p.Modal.Title,null,this.props.title||n["api-print-0009"]||"输出到文件")),d.a.createElement(p.Modal.Body,null,d.a.createElement("div",{className:"print-template-wrapper"},d.a.createElement("div",{className:"header"},d.a.createElement(p.Radio.RadioGroup,{name:"type",selectedValue:this.state.data.outputMode,onChange:this.handleTypeChange.bind(this)},d.a.createElement(p.Radio,{key:"excel",value:"excel"},n["api-print-0010"]),d.a.createElement(p.Radio,{key:"pdf",value:"pdf"},n["api-print-0011"]),d.a.createElement(p.Radio,{key:"html",value:"html"},n["api-print-0012"]))),!r||r.length<=1?"":d.a.createElement("div",{className:"body",style:{padding:"20px"}},d.a.createElement("span",null,n["api-print-0008"],"：")," ",d.a.createElement(p.Select,{value:e.state.data.printTemplateID,onChange:e.handlePrintTemplateIDChange,disabled:r.length<=1,fieldid:"print-list",className:"print-out-select"},r.map((function(e,t){return d.a.createElement(Rc,{value:e&&e.m_ctemplateid,key:t,title:e&&e.m_vtemplatename},e&&e.m_vtemplatename)})))),this.gerMultitaskSetup())),d.a.createElement(p.Modal.Footer,null,d.a.createElement(p.Tooltip,{placement:"top",inverse:!0,overlay:"".concat(n["api-print-0006"],"  (").concat(p.HotKeys.USUAL_KEYS.MODAL_CONFIRM,")"),trigger:["hover","focus"]},d.a.createElement(p.Button,{fieldid:"confirm",onClick:this.submit,colors:"primary"},n["api-print-0006"],"(",d.a.createElement("span",{className:"text-decoration-underline"},"Y"),")")),d.a.createElement(p.Tooltip,{placement:"top",inverse:!0,overlay:"".concat(n["api-print-0007"],"  (").concat(p.HotKeys.USUAL_KEYS.MODAL_CALCEL,")"),trigger:["hover","focus"]},d.a.createElement(p.Button,{fieldid:"cancel",onClick:this.close,colors:"info"},n["api-print-0007"],"(",d.a.createElement("span",{className:"text-decoration-underline"},"N"),")"))))}}])&&Nc(t.prototype,n),r&&Nc(t,r),o}(u.PureComponent);function Fc(e){return(Fc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lc(){return(Lc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Hc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qc(e,t){return(qc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Yc(e);if(t){var a=Yc(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Uc(this,n)}}function Uc(e,t){return!t||"object"!==Fc(t)&&"function"!=typeof t?Wc(e):t}function Wc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yc(e){return(Yc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1881);var zc=p.Select.Option||p.Select.NCOption,Jc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qc(e,t)}(o,e);var t,n,r,a=Vc(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).close=function(){t.setState({show:!1}),t.closeTimer=setTimeout((function(){var e=document.getElementsByClassName("print-output-modal-liuyjv-wrapper")[0];e&&(V.a.unmountComponentAtNode(e),clearTimeout(t.closeTimer),document.getElementById("app").removeChild(e),t.closeTimer=null)}),200)},t.open=function(){t.setState({show:!0})},t.submit=function(){var e=t.props.data,n=void 0===e?{}:e,r=n.outputtype,a=void 0===r?"templateOutput":r;Object(f.ajax)({method:"post",url:"/nccloud/platform/print/queryPrintAuthorize.do",data:{},success:function(e){n=Object.assign({},t.props.data,t.state.data);var r=t.state.data.printTemplateID;n.printTemplateName="";var o=t.props.printTemplateMenu;o&&o instanceof Array&&o.forEach((function(e){e.m_ctemplateid==r&&(n.printTemplateName=e.m_vtemplatename)}));var i={url:t.props.url||"/nccloud/reva/revecont/print.do",params:"directOutput"===a?Object.assign({},Object.assign({},n,{outputSetting:JSON.stringify(n),download:"directOutput",outputMode:n.outputMode})):n,enctype:2,isCipher:!0};Object(f.formDownload)(i),"function"==typeof t.props.callback&&t.props.callback(),t.close()}})},t.handlePrintTemplateIDChange=function(e){t.setState({data:Object.assign({},t.state.data,{printTemplateID:e})})},t.handleTypeChange=function(e){t.setState({data:Object.assign({},t.state.data,{outputMode:e})})},t.gerMultitaskSetup=function(){var e=t.state.data,n=e.outputMode,r=e.sheetNamePreFix,a=e.dsPositionPolicy,o=e.fileVolume,i=e.isDifDocDifFile,c=e.canModifyType,l=void 0!==c&&c,s=t.state.json,u=void 0===s?{}:s,f="",h={display:"block"},m=[{display:u["api-print-0013"],value:4},{display:u["api-print-0014"],value:5},{display:u["api-print-0015"],value:6}],y=[{display:u["api-print-0016"],value:!1},{display:u["api-print-0017"],value:!0}];return"excel"===n?f=d.a.createElement("div",null,d.a.createElement(p.Radio.NCRadioGroup,{name:"type",selectedValue:a,onChange:t.handleOtherSheet.bind(Wc(t),"dsPositionPolicy")},m.map((function(e,t){return d.a.createElement(p.Radio,{disabled:!l,style:h,key:t.toString(),value:e.value},e.display)}))),d.a.createElement("div",{className:"form-region"},d.a.createElement("p",{className:"label"},u["api-print-0018"],"："),d.a.createElement("div",{className:"in-form"},d.a.createElement(p.Input,{value:r,onChange:t.handleOtherSheet.bind(Wc(t),"sheetNamePreFix")}))),d.a.createElement("div",{className:"form-region"},d.a.createElement(p.Tooltip,{inverse:!0,placement:"top",overlay:u["api-print-0021"]},d.a.createElement("p",{className:"label"},u["api-print-0019"],"：")),d.a.createElement("div",{className:"in-form"},d.a.createElement(p.InputNumber,{iconStyle:1,min:1,value:o,onChange:t.handleOtherSheet.bind(Wc(t),"fileVolume")})))):["pdf","html"].includes(n)&&(f=d.a.createElement("div",null,d.a.createElement(p.Radio.NCRadioGroup,{name:"type",selectedValue:i,onChange:t.handleOtherSheet.bind(Wc(t),"isDifDocDifFile")},y.map((function(e,t){return d.a.createElement(p.Radio,{disabled:!l,style:h,key:t.toString(),value:e.value},e.display)}))))),d.a.createElement("div",{className:"task-container"},d.a.createElement("h3",null,u["api-print-0020"]),f)},t.state={json:{},show:!0,data:{printTemplateID:e.printTemplateMenu.length?e.printTemplateMenu[0].m_ctemplateid:"",outputMode:"pdf",MultiConfig:"1",pdfConfig:!1,htmlConfig:!1,prefix:"",threshold:0,dsPositionPolicy:4,fileVolume:16e3,sheetNamePreFix:"新的工作表",isDifDocDifFile:!1,canModifyType:e.canModifyType||!1}},t}return t=o,(n=[{key:"componentWillMount",value:function(){var e=this,t=this.props.json;t?this.setState({json:t}):Object(f.getPlatformLang)({moduleId:"api-print",callback:function(t,n,r){var a=e.state.data;a.sheetNamePreFix=t["api-print-0022"]||"新的工作表",e.setState({json:t,data:a})}})}},{key:"handleOtherSheet",value:function(e,t){var n,r,a;this.setState({data:Object.assign({},this.state.data,(n={},r=e,a=t,r in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,n))})}},{key:"render",value:function(){var e=this,t=this.props,n=t.printTemplateMenu,r=t.data,a=void 0===r?{}:r,o=this.state.json,i=!n||n.length<=1;return a.outputtype,d.a.createElement(p.Modal,{fieldid:"output",className:"print-output-wrapper senior",show:this.state.show,ref:function(t){return e.NCModal=t},onHide:this.close,zIndex:220},d.a.createElement(p.HotKeys,{keyMap:{sureBtnHandler:p.HotKeys.USUAL_KEYS.NC_MODAL_CONFIRM,cancelBtnHandler:p.HotKeys.USUAL_KEYS.NC_MODAL_CALCEL},handlers:{sureBtnHandler:function(){e.NCModal&&e.NCModal.isTopModal()&&e.submit()},cancelBtnHandler:function(){e.NCModal&&e.NCModal.isTopModal()&&e.close()}},className:"print-template-hotkeys-wrapper",focused:!0,attach:document.body,display:"inline"}),d.a.createElement(p.Modal.Header,{closeButton:!0},d.a.createElement(p.Modal.Title,null,this.props.title||o["api-print-0009"]||"输出到文件")),d.a.createElement(p.Modal.Body,null,d.a.createElement("div",{className:"print-output-template-wrapper"},d.a.createElement("div",{className:"print-choice"},d.a.createElement(p.Radio.NCRadioGroup,{name:"type",selectedValue:this.state.data.outputMode,onChange:this.handleTypeChange.bind(this)},d.a.createElement(p.Radio,{key:"excel",value:"excel"},o["api-print-0010"]),d.a.createElement(p.Radio,{key:"pdf",value:"pdf"},o["api-print-0011"]),d.a.createElement(p.Radio,{key:"html",value:"html"},o["api-print-0012"]))),i?"":d.a.createElement("div",{className:"body",style:{padding:"20px"}},d.a.createElement("span",null,o["api-print-0008"],"：")," ",d.a.createElement(p.Select,{showClear:!1,value:e.state.data.printTemplateID,onChange:e.handlePrintTemplateIDChange,disabled:n.length<=1,fieldid:"print-list",className:"print-out-select"},n.map((function(e,t){return d.a.createElement(zc,{value:e&&e.m_ctemplateid,key:t,title:e&&e.m_vtemplatename},e&&e.m_vtemplatename)})))),this.gerMultitaskSetup())),d.a.createElement(p.Modal.Footer,null,d.a.createElement(p.Tooltip,{placement:"top",inverse:!0,overlay:"".concat(o["api-print-0006"],"  (").concat(p.HotKeys.USUAL_KEYS.NC_MODAL_CONFIRM,")"),trigger:["hover","focus"]},d.a.createElement(p.Button,{onClick:this.submit,colors:"primary",fieldid:"confirm"},o["api-print-0006"],"(",d.a.createElement("span",{className:"text-decoration-underline"},"Y"),")")),d.a.createElement(p.Tooltip,{placement:"top",inverse:!0,overlay:"".concat(o["api-print-0007"],"  (").concat(p.HotKeys.USUAL_KEYS.NC_MODAL_CALCEL,")"),trigger:["hover","focus"]},d.a.createElement(p.Button,{onClick:this.close,colors:"info",fieldid:"cancel"},o["api-print-0007"],"(",d.a.createElement("span",{className:"text-decoration-underline"},"N"),")"))))}}])&&Hc(t.prototype,n),r&&Hc(t,r),o}(u.PureComponent);function Zc(e){var t=e.data,n=t.funcode,r=t.nodekey,a=t.appcode,o=t.oids,i=t.outputtype,c=void 0===i?"templateOutput":i;Object(f.getMultiLang)({moduleId:"api-print",callback:function(t,i,l){if("directOutput"===c)return V.a.render(d.a.createElement(Jc,Lc({},e,{printTemplateMenu:[],json:t})),div);Object(f.ajax)({method:"post",url:"/nccloud/platform/print/queryTemplates.do",data:{funcode:n,nodekey:r,appcode:a,oids:o},mode:"normal",success:function(n){if(n.data.data||n.data){var r=n.data.data;if(document.getElementsByClassName("print-output-modal-liuyjv-wrapper")[0])return!1;var a=document.createElement("div");return a.className="print-output-modal-liuyjv-wrapper",document.getElementById("app").appendChild(a),V.a.render(d.a.createElement(Jc,Lc({},e,{printTemplateMenu:r,json:t})),a)}var o=n.data.error||n.error;if(o)if("object"===Fc(o)){var i=Object.values(o);Object(f.toast)({color:"warning",content:i.join("||")})}else Object(f.toast)({color:"warning",content:String(n)})},error:function(e){Object(f.toast)({color:"danger",content:e.message})}})}})}function Gc(e){return(Gc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xc(Object(n),!0).forEach((function(t){$c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function el(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function tl(e,t){return(tl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=al(e);if(t){var a=al(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return rl(this,n)}}function rl(e,t){return!t||"object"!==Gc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function al(e){return(al=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1882);var ol=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tl(e,t)}(o,e);var t,n,r,a=nl(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).close=function(){t.setState({show:!1}),t.closeTimer=setTimeout((function(){var e=document.getElementsByClassName("print-modal-liuyjv-wrapper")[0];e&&(V.a.unmountComponentAtNode(e),clearTimeout(t.closeTimer),document.getElementById("app").removeChild(e),t.closeTimer=null)}),200)},t.submit=function(){if(!t.state.printTemplateID)return Object(f.toast)({color:"warning",content:t.state.json["api-print-0004"]||"模板ID参数为空"});var e=Object.assign({},t.state.data,{printTemplateID:t.state.printTemplateID});t.props.callback(t.state.type,t.state.url,e,t.props.isCipher),t.close()},t.handleChange=function(e){t.setState({printTemplateID:e})},t.state={show:!0,appcode:t.props.appcode||"",nodekey:t.props.nodekey||"",type:t.props.type||"",url:t.props.url||"",data:t.props.data||"",printTemplateMenu:t.props.printTemplateMenu||[],printTemplateID:"",json:{}},t}return t=o,(n=[{key:"componentWillMount",value:function(){var e=this,t=this.props.json;t?this.setState({printTemplateID:this.props.printTemplateMenu.length?this.props.printTemplateMenu[0].m_ctemplateid:"",json:t}):Object(f.getMultiLang)({moduleId:"api-print",callback:function(t,n,r){e.setState({printTemplateID:e.props.printTemplateMenu.length?e.props.printTemplateMenu[0].m_ctemplateid:"",json:t})}})}},{key:"render",value:function(){var e=this,t=this.state.json;return d.a.createElement(p.Modal,{fieldid:"print-template",show:this.state.show,className:"print-template-modal-wrapper senior",ref:function(t){return e.Modal=t},onHide:this.close},d.a.createElement(p.HotKeys,{keyMap:{sureBtnHandler:p.HotKeys.USUAL_KEYS.MODAL_CONFIRM,cancelBtnHandler:p.HotKeys.USUAL_KEYS.MODAL_CALCEL},handlers:{sureBtnHandler:function(){e.Modal&&e.Modal.isTopModal()&&e.submit()},cancelBtnHandler:function(){e.Modal&&e.Modal.isTopModal()&&e.close()}},className:"print-template-hotkeys-wrapper",focused:!0,attach:document.body,display:"inline"}),d.a.createElement(p.Modal.Header,{closeButton:!0},d.a.createElement(p.Modal.Title,{className:"u-modal-title"},this.props.modalTitle||t["api-print-0005"]||"打印模板选择")),d.a.createElement(p.Modal.Body,null,d.a.createElement("div",{className:"modal-body-wrapper"},d.a.createElement(p.Radio.RadioGroup,{name:"fruit",selectedValue:this.state.printTemplateID,onChange:this.handleChange.bind(this)},this.state.printTemplateMenu.map((function(e,t){return d.a.createElement(p.Radio,{className:"nc-radio-wrapper",value:e&&e.m_ctemplateid},e&&e.m_vtemplatename)}))))),d.a.createElement(p.Modal.Footer,null,d.a.createElement(p.Tooltip,{placement:"top",inverse:!0,overlay:"".concat(t["api-print-0006"],"  (").concat(p.HotKeys.USUAL_KEYS.MODAL_CONFIRM,")"),trigger:["hover","focus"]},d.a.createElement(p.Button,{onClick:this.submit,colors:"primary",fieldid:"confirm"},t["api-print-0006"],"(",d.a.createElement("span",{className:"text-decoration-underline"},"Y"),")")),d.a.createElement(p.Tooltip,{placement:"top",inverse:!0,overlay:"".concat(t["api-print-0007"],"  (").concat(p.HotKeys.USUAL_KEYS.MODAL_CALCEL,")"),trigger:["hover","focus"]},d.a.createElement(p.Button,{onClick:this.close,colors:"info",fieldid:"cancel"},t["api-print-0007"],"(",d.a.createElement("span",{className:"text-decoration-underline"},"N"),")"))))}}])&&el(t.prototype,n),r&&el(t,r),o}(d.a.Component);function il(e,t,n,r,a){Object(f.getMultiLang)({moduleId:"api-print",callback:function(e,r,o){Object(f.ajax)({method:"post",url:t,data:n,print:!0,mode:"normal",success:function(t){if(t.data){a&&"function"==typeof a&&a();var n=window.open("");n?(n.document.title=e["api-print-0003"]||"打印预览",n.document.body.innerHTML=t.data,"Chrome"===((r=navigator.userAgent).indexOf("Opera")>-1?"Opera":r.indexOf("Firefox")>-1?"FF":r.indexOf("Chrome")>-1?"Chrome":r.indexOf("Safari")>-1?"Safari":r.indexOf("compatible")>-1&&r.indexOf("MSIE")>-1&&!isOpera?"IE":r.indexOf("Trident")>-1?"Edge":void 0)?(n.print(),n.close()):setTimeout((function(){n.print(),n.close()}),50)):Object(f.toast)({color:"warning",content:e["api-print-0001"]||"您的浏览器阻止了弹出式窗口,请查看浏览器设置"})}var r},error:function(e){Object(f.toast)({color:"danger",content:e.message})}})}})}function cl(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];Object(f.formDownload)({params:n,url:t,enctype:2,isCipher:r})}function ll(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"html",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];Object(f.getGlobalStorage)("localStorage","gzip"),new f.gzip;if(r){var o=n.funcode,i=n.nodekey,c=n.appcode,l=n.oids;Object(f.ajax)({method:"post",url:"/nccloud/platform/print/queryTemplates.do",data:{funcode:o,nodekey:i,appcode:c,oids:l},async:!1,success:function(r){var o=r.data.data||r.data,l=r.data.error||r.error;if(l)return Object(f.toast)({color:"danger",content:l}),console.error(l);if(Array.isArray(o)){if(1!==o.length){if(o.length<1)return void Object(f.getMultiLang)({moduleId:"api-print",callback:function(e){Object(f.toast)({color:"warning",content:e["api-print-0002"]||"未查询到任何模板信息"})}});if(document.getElementsByClassName("print-modal-liuyjv-wrapper")[0])return!1;var s=document.createElement("div");return s.className="print-modal-liuyjv-wrapper",document.getElementById("app").appendChild(s),V.a.render(d.a.createElement(ol,{appcode:c,nodekey:i,type:e,url:t,data:n,printTemplateMenu:o,callback:"html"===e?il:cl,isCipher:a}),s)}"html"===e?il(0,t,Qc(Qc({},n),{},{printTemplateID:o[0].m_ctemplateid?o[0].m_ctemplateid:null})):cl(e,t,Qc(Qc({},n),{},{printTemplateID:o[0].m_ctemplateid?o[0].m_ctemplateid:null}),a)}else{if(1!==o.data.length){if(o.data.length>1){if(document.getElementsByClassName("print-modal-liuyjv-wrapper")[0])return!1;var u=document.createElement("div");return u.className="print-modal-liuyjv-wrapper",document.getElementById("app").appendChild(u),V.a.render(d.a.createElement(ol,{appcode:c,nodekey:i,type:e,url:t,data:n,printTemplateMenu:o.data,callback:"html"===e?il:cl,isCipher:a}),u)}return void Object(f.getMultiLang)({moduleId:"api-print",callback:function(e){Object(f.toast)({color:"warning",content:e["api-print-0002"]||"未查询到任何模板信息"})}})}"html"===e?il(0,t,Qc(Qc({},n),{},{printTemplateID:o.data[0].m_ctemplateid?o.data[0].m_ctemplateid:null})):cl(e,t,Qc(Qc({},n),{},{printTemplateID:o.data[0].m_ctemplateid?o.data[0].m_ctemplateid:null}),a)}},error:function(e){Object(f.toast)({color:"danger",content:e.message})}})}else"html"==e?il(0,t,n):cl(e,t,n,a)}function sl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"html",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=n.funcode,o=n.nodekey,i=n.appcode,c=n.oids;Object(f.ajax)({method:"post",url:"/nccloud/platform/print/queryTemplates.do",data:{funcode:a,nodekey:o,appcode:i,oids:c},async:!1,success:function(a){var c=a.data.data||a.data;if(1!==c.length){if(c.length<1)return void Object(f.getMultiLang)({moduleId:"api-print",callback:function(e){Object(f.toast)({color:"warning",content:e["api-print-0002"]||"未查询到任何模板信息"})}});if(document.getElementsByClassName("print-modal-liuyjv-wrapper")[0])return!1;var l=document.createElement("div");return l.className="print-modal-liuyjv-wrapper",document.getElementById("app").appendChild(l),V.a.render(d.a.createElement(ol,{appcode:i,nodekey:o,type:e,url:t,data:n,printTemplateMenu:c,callback:"html"===e?il:cl,isCipher:r}),l)}"html"===e?il(0,t,Qc(Qc({},n),{},{printTemplateID:c[0].m_ctemplateid?c[0].m_ctemplateid:null})):cl(e,t,Qc(Qc({},n),{},{printTemplateID:c[0].m_ctemplateid?c[0].m_ctemplateid:null}))},error:function(e){Object(f.toast)({color:"danger",content:e.message})}})}function ul(e){return(ul="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dl(e){return function(e){if(Array.isArray(e))return fl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return fl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fl(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hl(e,t){return(hl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ml(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=vl(e);if(t){var a=vl(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return yl(this,n)}}function yl(e,t){return!t||"object"!==ul(t)&&"function"!=typeof t?bl(e):t}function bl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vl(e){return(vl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gl(Object(n),!0).forEach((function(t){Sl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ol=new f.gzip;n(908);var wl=f.ViewModel.getGlobalStorage,Cl=f.ViewModel.setGlobalStorage,El=f.ViewModel.getData,jl=f.ViewModel.setData,xl=(f.cardCache.updateHeadCache,f.cardCache.newUpdateHeadCache);var Pl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hl(e,t)}(o,e);var t,n,r,a=ml(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).handleBeforeUnLoad=function(){top.SocketMessageFun[t.cuuid]=null,delete top.SocketMessageFun[t.cuuid]},t.addTabid=function(){var e=wl("localStorage","tabidStore");e?(e=JSON.parse(e))instanceof Array&&t.tabid&&e.push(t.tabid):e=[t.tabid],Cl("localStorage","tabidStore",JSON.stringify(e))},t.hasOpenedTab=function(e){var t=wl("localStorage","tabidStore");return!!(t&&(t=JSON.parse(t))instanceof Array&&t.length&&t.includes(e))},t.removeTabid=function(){var e=wl("localStorage","tabidStore");if(e&&(e=JSON.parse(e))instanceof Array&&e.length&&t.tabid){var n=e.indexOf(t.tabid);-1!=n&&(e.splice(n,1),Cl("localStorage","tabidStore",JSON.stringify(e)))}},t.mergeTableData=function(){for(var e=[],n=0,r=Object.values(t.refreshTableData);n<r.length;n++){var a=r[n];e.push.apply(e,dl(a))}return e},t.handleMessage=function(e){var n=Uo()||"",r=Yo("datasource")||"",a=JSON.parse(e.data);if(!a||"websocket-server"!==a.origin){var o=Ol.unzip(a.message)||{},i=t.props,c=i.pageInstance,l=i.config,s=l.isShowView,u=void 0===s||s,d=l.errorViewType,p=void 0===d||d,h=l.isShowToast,m=void 0===h||h,y=l.onMessage,b=l.tableAreaCode,v=l.tableType,g=void 0===v?"table":v,k=l.billpkname,S=l.headBtnAreaCode,O=l.formAreaCode,w=l.dataSource,C=a.targetids.includes(n+r)&&!document.hidden,E="ncc-server"===a.origin&&"saga_error"===o.type;C&&E&&(o.billtype&&(t.billtype=o.billtype),Array.isArray(o.refreshData)&&o.refreshData.length>0&&(t.gtxid=o.refreshData[0].saga_gtxid,t.billpk=o.refreshData[0][k||"_businessPk"])),top&&t.gtxid&&(top.SocketConfig=top.SocketConfig||{},top.SocketConfig[t.gtxid]={isShowView:u,errorViewType:p,isShowToast:m});var j=a.targetids.includes(n+r)&&o.tabid===t.tabid,x=C&&(o.isRepeat||o.isCompensate);if(console.log("若为重试/回退操作,只更新激活页签,hintErrorMesg:",x),"ncc-server"===a.origin&&"saga_hint"===o.type&&(o.error||Object(f.clearToast)("socketErrorToast")),j||x){if("function"==typeof y&&y(kl(kl({},t.props),t.output),o),"function"==typeof window.top.onSocketMessage&&window.top.onSocketMessage(o),!E)return;if(b){if("simpleTable"===g&&(g="table"),t.refreshTableData[t.billpk||b]=o.refreshData,!o.refreshData)return;var P=t.mergeTableData();c[g].updateDataByRefresh(b,k,P,o.msg)}if(Array.isArray(o.refreshData)){var _=c.form.getFormItemsValue(O,k);_=_&&_.value;var N=o.refreshData[0];o.refreshData.length>1&&(N=o.refreshData.find((function(e){return e[k]&&e[k]==_||e._businessPk==_})));var T=N&&(N[k]||N._businessPk);console.log("billpk:",T,"oldBillPk",_),S&&T==_&&c.button.toggleErrorStatus(S,{isError:o.error}),O&&c.form.updateDataByRefresh(O,N,k,w,o.msg)}var D=o.refreshData||[];w&&O&&xl(w,k,O,D)}}},t.randomNumber=function(){var e=new Date,t=e.getMonth()+1,n=e.getDate(),r=e.getHours(),a=e.getMinutes(),o=e.getSeconds();return e.getFullYear().toString()+t.toString()+n+r+a+o+Math.round(23*Object(f.getSafeRandom)()+100).toString()},"function"==typeof t.props.getThis&&t.props.getThis(bl(t)),t.state={showBillTrack:!1,json:{},LangData:null},t.gtxid="",t.billpk="",t.billtype=t.props.config.billtype,t.refreshTableData={},t.tabid="",t.cuuid="xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Object(f.getSafeRandom)()|0;return("x"==e?t:3&t|8).toString(16)})),top.SocketMessageFun=top.SocketMessageFun||{},top.SocketMessageFun[t.cuuid]=t.handleMessage,t}return t=o,(n=[{key:"componentWillMount",value:function(){var e=this;Object(f.getMultiLang)({moduleId:"page_socket",callback:function(t,n,r){e.setState({json:t,LangData:r}),e.viewTitleLang=t["page-socket-0001"],e.viewBtnLang=t["page-socket-0002"]}})}},{key:"componentDidMount",value:function(){var e=this.props,t=(e.pageInstance,e.config),n=t.isShowToast,r=void 0===n||n,a=t.tableAreaCode,o=t.billpkname,i=t.formAreaCode,c=t.billtype,l=t.billtypeFromList,s=t.errorViewType,u=t.dataSource,d=t.extraInfos;top.isShowToast=top.isShowToast||{},top.isShowToast[this.cuuid]=r;var f=kl(kl({},El("nccloud_platfrom_native_socket_billinfo")||{}),{},{billpkname:o,billtype:c,errorViewType:s,dataSource:u,extraInfos:d,billtypeFromList:l});console.log("websocket 初始化参数:",t),a&&(f.tableAreaCode=a),i&&(f.formAreaCode=i),jl("nccloud_platfrom_native_socket_billinfo",f),this.tabid||(this.tabid=top&&top.WebSocketTabid?top.WebSocketTabid:this.randomNumber(),window.WebSocketTabid=this.tabid,top.WebSocketTabid=this.tabid),console.log("当前页签的tabid为:",window.WebSocketTabid),window.addEventListener("beforeunload",this.handleBeforeUnLoad)}},{key:"componentWillUnmount",value:function(){top.SocketMessageFun[this.cuuid]=null,delete top.SocketMessageFun[this.cuuid],this.props.pageInstance.mySocket=null,window.removeEventListener("beforeunload",this.handleBeforeUnLoad)}},{key:"render",value:function(){var e=this,t=this.props.config,n=t.billtype,r=t.errorViewType,a=void 0===r||r;return"none"===a?null:d.a.createElement(p.BillErrorTrack,{show:this.state.showBillTrack,close:function(){e.setState({showBillTrack:!1})},pk:this.billpk,type:this.billtype||n,gtxid:this.gtxid,errorViewType:a,fromToastTip:!0})}}])&&pl(t.prototype,n),r&&pl(t,r),o}(u.Component),_l={connectMesg:function(e){var t=this;return d.a.createElement(Pl,{getThis:function(e){t.mySocket=e},pageInstance:this,config:e||{},output:this.output,rootprops:this.props})},showToast:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.gtxid&&this.mySocket&&(top.SocketConfig=top.SocketConfig||{},top.SocketConfig[t.gtxid]=kl(kl({},t),top.SocketConfig[t.gtxid]||{})),(t.gtxid||t.message)&&Object(f.ajax)({url:"/nccloud/platform/fixdata/QueryErrormsgAction.do",data:{gtxid:t.gtxid||""},success:function(n){if(n.data&&n.success){var r="socketErrorToast"+t.gtxid,a=top&&top.document.querySelectorAll('.toast-zijinyun-project[data-mark="'.concat(r,'"]'));if(top.isShowToast&&e.mySocket&&a&&a.length&&-1!==JSON.stringify(top.isShowToast).indexOf("false"))return;if(a&&a.length){Array.from(a).forEach((function(e){e&&e.parentNode.removeChild(e)}));var o=Object.assign([],window.toastModal),i=0;o.forEach((function(e,t){e&&e.props&&e.props.mark&&e.props.mark===r&&window.toastModal&&(window.toastModal.splice(t-i,1),i++)}))}var c=e.mySocket?e.mySocket.viewTitleLang:"发送失败",l=e.mySocket?e.mySocket.viewBtnLang:"立即查看";Object(f.toast)({mark:"socketErrorToast",color:"danger",title:c,customBtnBeforeClose:!1!==t.isShowView?d.a.createElement("span",{onClick:function(){e.mySocket&&(e.mySocket.gtxid=t.gtxid,e.mySocket.billpk=t.billpk,e.mySocket.setState({showBillTrack:!0}))}}," ",l):d.a.createElement("span",null),groupOperation:!0,groupOperationMsg:[t.message||n.data||""]})}else console.log("没有res.data或者res不成功",n)},error:function(e){e&&(console.error(e),Object(f.toast)({color:"danger",content:JSON.stringify(e.message)}))}})}},Nl=n(11),Tl=n(42),Dl=n.n(Tl);function Al(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Il(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Al(Object(n),!0).forEach((function(t){Ml(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Al(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ml(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rl(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Bl="__root__";function Kl(e,t){if(!t)return e;for(var n=e.length,r=0;r<n;r++){var a=e[r];if(a.key==t||a.refpk==t)return a;if(Array.isArray(a.children)){var o=Kl(a.children,t);if(o)return o}}}function Fl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return!!Array.isArray(e)&&(e.forEach((function(e){e.children;var n=Rl(e,["children"]);t.push(Il({},n)),Array.isArray(e.children)&&Fl(e.children,t)})),t)}function Ll(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.resetIcon;(e||[]).forEach((function(e){var t=e.iconBox||{};e.iconBox=!1===n?t:Il({addIcon:!0,delIcon:!0,editIcon:!0},t),e.hasOwnProperty("isleaf")||(Array.isArray(e.children)&&e.children.length?(e.isleaf=!1,Ll(e.children)):e.isleaf=!0)}))}function Hl(e,t,n){if(t.pid){!function e(r){r.forEach((function(r){return r.refpk===t.pid?(Array.isArray(r.children)?n?r.children.unshift(t):r.children.push(t):r.children=[t],r.isleaf=!1,r.isLeaf=!1,!0):(!Array.isArray(r.children)||!e(r.children))&&void 0}))}(e)}else e.push(t)}function ql(e,t){for(var n,r=0;r<t.length;r++){var a=t[r];a.children&&(a.children.some((function(t){return(t.key||t.id)===e}))?n=a.key||a.id:ql(e,a.children)&&(n=ql(e,a.children)))}return n}function Vl(e,t,n){for(var r=e.length;r--;){var a=e[r];if(a.key===t)return a.iconBox=Object.assign(a.iconBox||{},n),!0;if(Array.isArray(a.children)&&Vl(a.children,t,n))return!1}}function Ul(e,t){if(t.pid){!function e(n){for(var r=n.length,a=0;a<r;a++){var o=n[a];if(o.pid===t.pid)return n.push(t),!0;if(Array.isArray(o.children)&&e(o.children))return!1}}(e)}else e.push(t)}function Wl(e,t){if(!t.refpk)return console.error("树，编辑节点方法，传参错误，没找到refpk"),!1;var n=Fl(e),r=n.find((function(e){return e.refpk===t.refpk}));return r&&Object.assign(r,t),Gl(n)}function Yl(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e)for(var r=e.length;r--;){var a=e[r];if(a.refpk===t)return n.parentPk=a.pid,e.splice(r,1),!0;if(Array.isArray(a.children)){var o=Yl(a.children,t);if(o)return!1}}}function zl(e){e&&e instanceof Array&&e.length>0&&e.forEach((function(e){var t=e.iconBox||{};e.iconBox=Il({addIcon:!0,delIcon:!0,editIcon:!0},t),Array.isArray(e.children)&&zl(e.children)}))}function Jl(e,t,n){for(var r=!1,a=e.length,o=0;o<a;o++){var i=e[o];if(n){if(i.refpk===n)return e[o].disabled=t,void(r=!0)}else e[o].disabled=t;if(Array.isArray(i.children)&&(Jl(i.children,t,n),r))return!1}}function Zl(e,t){for(var n=e.length;n--;){var r=e[n];if(r.refpk===t)return Array.isArray(r.children)&&0===r.children.length&&(delete r.children,r.isleaf=!0),!0;if(Array.isArray(r.children)&&Zl(r.children,t))return!1}}function Gl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.resetIcon;if(!Object(f.isArray)(e))return console.warn("createTreeData方法，参数应该为数组"),!1;var r=new Map;function a(e){return r.get(e)?r.get(e).map((function(e){return e.key||(e.key=e.refpk),e.children=a(e.refpk),e})):null}e.forEach((function(e){e.pid=e.pid||Bl,e.key||(e.key=e.refpk),r.get(e.pid)?r.get(e.pid).push(e):r.set(e.pid,[e])}));var o=a(Bl);return Ll(o,{resetIcon:n}),o}function Xl(e){return(Xl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ql(e){return function(e){if(Array.isArray(e))return es(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||$l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $l(e,t){if(e){if("string"==typeof e)return es(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?es(e,t):void 0}}function es(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ts(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ns(e,t,n){return(ns="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cs(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function rs(e,t){return(rs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function as(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=cs(e);if(t){var a=cs(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return os(this,n)}}function os(e,t){return!t||"object"!==Xl(t)&&"function"!=typeof t?is(e):t}function is(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cs(e){return(cs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ls=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rs(e,t)}(o,e);var t,n,r,a=as(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).store={formStore:null,searchValue:"",focusable:!0,selectedKeys:[],expandedKeys:[],autoExpandParent:!0,checkedKeys:[],treeData:[],firstTime:!1,needEdit:!0,noDisableId:"",disabledSearch:!1,showEditModal:!1},t.cache={deepData:[],saveExpandedKeys:[],saveCheckedKeys:[],currentNode:null,moveKey:"",isHover:"",selectedNode:null,userControlIcon:!1,showModal:!0,metaId:"",treeNodeOperation:"",searchType:"location",treeType:"syncTree",noCheckWhenSelect:!1},t.listeners={},t.getListener=function(e){return t.listeners[e]},t.setListener=function(e,n){t.listeners[e]=n},t.setStateEve=function(){t.forceUpdate()},t.handleExpand=function(e,n){var r=Ql(new Set(n));t.setStore("expandedKeys",r),t.setStore("searchValue",e),t.setStore("autoExpandParent",!0),e&&""!=e||"0"===e||t.setStore("expandedKeys",t.getCache("saveExpandedKeys"))},t.setNodeChecked=function(e){if(Object(f.isArray)(e))t.setStore("checkedKeys",e),t.setCache("saveCheckedKeys",e);else{if(!Object(f.isString)(e))return console.error("setNodeChecked方法传参格式不正确，第二个参数应该是数组或字符串"),!1;t.setStore("checkedKeys",[e]),t.setCache("saveCheckedKeys",[e])}t.setStateEve()},t.delNodeSuceess=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={};if(void 0===e)return console.error("delNodeSuceess方法第二个参数不能为空"),!1;var a=t.getStore("treeData");Yl(a,e,r);var o=t.getCache("treeType");if("syncTree"===o){var i=t.getCache("deepData");Yl(i,e,r)}t.setCache("selectedNode",null),n||Zl(a,r.parentPk),t.setStore("treeData",Ql(a)),t.setStore("showEditModal",!1),t.setStateEve()},t.editNodeSuccess=function(e){var n=t.getStore("treeData"),r=t.getCache("treeType"),a=[];if("syncTree"===r&&(a=t.getCache("deepData")),Object(f.isArray)(e))e.forEach((function(e){if(0!=n.length){var o=Wl(n,e);t.setStore("treeData",Ql(o)),n=Ql(o)}if("syncTree"===r){var i=Wl(a,e);t.setCache("deepData",i),a=i}}));else{if(0!=n.length){var o=Wl(n,e);t.setStore("treeData",Ql(o))}if("syncTree"===r){var i=Wl(a,e);t.setCache("deepData",i)}}t.setStateEve()},t.closeNodeByPk=function(e){var n=t.getStore("expandedKeys");e||0==e?Object(f.isArray)(e)?e.forEach((function(e){n.splice(n.indexOf(e),1)})):Object(f.isString)(e)&&-1!==n.indexOf(e)&&n.splice(n.indexOf(e),1):n=[],t.setStore("expandedKeys",n),t.setStateEve()},t.hideIcon=function(e,n){if(!Object(f.isObj)(n))return console.warn("同步组件hideIcon方法，第三个参数应为对象，数据格式参考同步树API文档"),!1;Vl(t.getStore("treeData"),e,n),t.setStateEve()},t.addBrotherNode=function(e){var n=t.getStore("treeData"),r=t.getCache("userControlIcon");Object(f.isArray)(e)?(!r&&zl(e),e.forEach((function(e){return Ul(n,e)}))):(!r&&zl([e]),Ul(n,e)),t.setStore("firstTime",!0),t.setStore("treeData",Ql(n)),t.setStateEve()},t.setNodeSelected=function(e){var n=t.getStore("treeData");if(Object(f.isArray)(e))t.setStore("selectedKeys",e);else{if(!Object(f.isString)(e))return console.error("setNodeSelected方法传参格式不正确，第二个参数应该是数组或字符串"),!1;t.setStore("selectedKeys",[e]),t.setCache("selectedNode",Kl(n,e))}t.setStateEve()},t.cancelSelectedNode=function(){t.setStore("selectedKeys",[]),t.setCache("selectedNode",null),t.setStateEve()},t.searchChange=function(e){var n=t.getCache("deepData"),r=t.getStore("treeData"),a=t.getCache("searchType"),o=t.getCache("dataList"),i=[],c=Ql(n);if("filtration"===a){var l=t.filterTree(e,c);o.forEach((function(n){t.strToLocaleLowerCase(n.title).indexOf(t.strToLocaleLowerCase(e))>-1&&i.push(n.key)})),l.stack&&l.stack.length>0?t.setStore("treeData",l.stack):(l.stack=[],t.setStore("treeData",[])),Fl(l.stack).map((function(e){i.push(e.refpk)})),t.handleExpand(e,i,c),e&&""!=e||"0"===e||(t.setStore("expandedKeys",t.getCache("saveExpandedKeys")),t.setStore("selectedKeys",t.getCache("saveCheckedKeys")),t.setStore("treeData",c))}else i=t.getStore("expandedKeys"),o.forEach((function(n){t.strToLocaleLowerCase(n.title).indexOf(t.strToLocaleLowerCase(e))>-1&&(i=i.concat(function(e,t){for(var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];n=ql(e,t);)r.push(n),e=n;return r}(n.key||n.id,r)))})),i=Ql(new Set(i)),t.handleExpand(e,i);t.setStateEve()},t.filterTree=function(e,n){var r=t.getListener("overWriteFilterTree"),a=t.getStore("selectedKeys"),o=[];if(Object(f.isFunction)(r)){var i=Fl(r(e,n)),c=i.some((function(e){if(e)return e.key===a[0]}));return{stack:Gl(i),parentKeys:[].concat(o),isHasSelectedValue:c}}var l=Fl(n),s=l.filter((function(t){var n=t.beforeName?t.beforeName:"",r=t.afterName?t.afterName:"",a=t.refname?t.refname:"";return"string"==typeof n&&(a=n+a),"string"==typeof r&&(a+=r),a=a.toLocaleLowerCase(),e=e.toLocaleLowerCase(),a.includes(e)})),u=new Map;s.map((function(e){!function e(t){u.has(t.refpk)||(u.set(t.refpk,t),l.map((function(n){if(t.pid!==n.refpk)return!0;e(n)})))}(e)}));var d,p=[],h=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=$l(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}(u.values());try{for(h.s();!(d=h.n()).done;){var m=d.value;p.push(m)}}catch(e){h.e(e)}finally{h.f()}var y=p.some((function(e){if(e)return e.key===a[0]}));return{stack:Gl(p,{resetIcon:!1}),parentKeys:[].concat(o),isHasSelectedValue:y}},t.strToLocaleLowerCase=function(e){return"[object String]"===Object.prototype.toString.call(e)?e.toLocaleLowerCase():String(e).toLocaleLowerCase()},t.getHooks=function(){return{getCache:t.getCache.bind(is(t)),setCache:t.setCache.bind(is(t)),handleExpand:t.handleExpand.bind(is(t)),setStateEve:t.setStateEve.bind(is(t)),setStore:t.setStore.bind(is(t)),getStore:t.getStore.bind(is(t)),getListener:t.getListener.bind(is(t)),setListener:t.setListener.bind(is(t)),setNodeChecked:t.setNodeChecked.bind(is(t)),delNodeSuceess:t.delNodeSuceess.bind(is(t)),editNodeSuccess:t.editNodeSuccess.bind(is(t)),closeNodeByPk:t.closeNodeByPk.bind(is(t)),hideIcon:t.hideIcon.bind(is(t)),addBrotherNode:t.addBrotherNode.bind(is(t)),setNodeSelected:t.setNodeSelected.bind(is(t)),cancelSelectedNode:t.cancelSelectedNode.bind(is(t)),searchChange:t.searchChange.bind(is(t)),filterTree:t.filterTree.bind(is(t)),strToLocaleLowerCase:t.strToLocaleLowerCase.bind(is(t))}},t}return t=o,(n=[{key:"getStore",value:function(e){return ns(cs(o.prototype),"get",this).call(this,e)}},{key:"setStore",value:function(e,t){return ns(cs(o.prototype),"set",this).call(this,e,t)}},{key:"getCache",value:function(e){return this.cache[e]}},{key:"setCache",value:function(e,t){this.cache[e]=t}}])&&ts(t.prototype,n),r&&ts(t,r),o}(Nl.BaseStore),ss=Object(Nl.hookFactory)(ls);function us(){return(us=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ds(e){return(ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ps(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fs(Object(n),!0).forEach((function(t){hs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ms(e){return function(e){if(Array.isArray(e))return ys(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ys(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ys(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ys(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vs(e,t){return(vs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Os(e);if(t){var a=Os(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ks(this,n)}}function ks(e,t){return!t||"object"!==ds(t)&&"function"!=typeof t?Ss(e):t}function Ss(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Os(e){return(Os=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ws=p.Tree.TreeNode;n(1883);var Cs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vs(e,t)}(o,e);var t,n,r,a=gs(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).transerDefaultConfigToStore=function(e){t.listeners=["onTreeStatusChange","selectedForInit","onSelectEve","onSelectedChange","clickAddIconEve","clickEditIconEve","clickDelIconEve","loadTreeData","overWriteFilterTree"],t.listeners.forEach((function(n){void 0!==e[n]&&t.props.store.setListener([n],e[n])})),t.lastData=[],t.dataList=[];var n=t.props.store;t.cacheProps=["showModal","userControlIcon","metaId","disabledSearch","searchType","noCheckWhenSelect"],t.cacheProps.forEach((function(t){void 0!==e[t]&&n.setCache([t],e[t])})),void 0!==e.needEdit&&n.setStore("needEdit",e.needEdit)},t.getAllNodeKeys=function(e){var t=[];return function e(n){n.forEach((function(n){Array.isArray(n.children)&&(t.push(n.key),e(n.children))}))}(e),t},t.generateList=function(e,n){for(var r=0;r<e.length;r++){var a=e[r],o=a.key||a.id,i=a.beforeName?a.beforeName:"",c=a.afterName?a.afterName:"",l=a.refname?a.refname:"";"string"==typeof i&&(l=i+l),"string"==typeof c&&(l+=c),n.push({key:o,title:l}),a.children&&t.generateList(a.children,n)}},t.handleClearState=function(){var e=t.props.store;e.setStore("searchValue",""),e.setStore("expandedKeys",e.getCache("saveExpandedKeys")),e.setStore("treeData",e.getCache("deepData"))},t.handleClearSearchVal=function(){var e=t.props,n=e.getSearchVal,r=e.clearSearchVal,a=e.store;t.searchInputRef&&(t.searchInputRef.value=""),t.handleClearState(),a.setStateEve(),Object(f.isFunction)(r)&&r(),Object(f.isFunction)(n)&&n(a.getStore("searchValue"))},t.focusEve=function(){},t.onDoubleClickHandler=function(e,n){var r=t.props.onDoubleClickEve;Object(f.isFunction)(r)&&r(e,n),t.expandedRows(e,n)},t.expandedRows=function(e,n){var r=t.props,a=r.store;if(!r.expandWhenDoubleClick){var o=a.getStore("expandedKeys"),i=n.node.props.refpk,c=JSON.parse(JSON.stringify(o));-1===c.indexOf(i)?c.push(i):c.map((function(e,t){e===i&&c.splice(t,1)})),t.onExpand(c,n)}},t.onExpand=function(e,n){var r=t.props,a=r.store,o=r.onTreeExpand;r.treeType;a.setStore("expandedKeys",e),a.setStateEve(),Object(f.isFunction)(o)&&o(e,n)},t.onSelect=function(e,n){var r=t.props,a=r.onSelectCallBack,o=r.onSelectAndChecked,i=r.onSelectedChange,c=r.onSelectEve,l=r.onCheckEve,s=r.store,u=r.treeType,d=r.pageOutput,p=r.triggerCheckWhenSelect;if(Object(f.isFunction)(a)&&a(e,n),n.selected){s.setStore("selectedKeys",e);var h=s.getStore("checkedKeys"),m=s.getCache("noCheckWhenSelect");if(h.length<2&&!m){h=e,s.setStore("checkedKeys",h);var y=s.getCache("saveCheckedKeys");if(s.setCache("saveCheckedKeys",ms(new Set([].concat(ms(y),ms(e))))),p){var b=n.selectedNodes,v=n.node;"function"==typeof l&&l(ps(ps({},t.props),d),h,{checked:!0,checkedNodes:b,node:v,event:"check"})}o&&o(e)}var g=function(){return t.lastData[0]!==e[0]},k=Kl(s.getStore("treeData"),e[0]);g()&&i&&i(k),0!==e.length&&s.setCache("selectedNode",k),"function"==typeof c&&0!==e.length&&(c("syncTree"===u?k.refpk:e,k,g(),n),t.lastData[0]=e[0]),s.setStateEve()}},t.onLoadData=function(e){var n=t.props.loadTreeData;if(Object(f.isFunction)(n))return new Promise((function(t){n(e.props.eventKey,e),t()}))},t.onMouseLeave=function(){t.props.store.setCache("isHover","")},t.onMouseEnter=function(e){var n=t.props,r=n.store,a=n.onMouseEnterEve;r.setCache("isHover",e.node.props.eventKey),a&&"function"==typeof a&&a(e.node.props.eventKey,e.node.props)},t.onCheck=function(e,n){var r=n.checked,a=n.checkedNodes,o=n.node,i=n.event,c=t.props,l=c.store,s=c.onCheckEve,u=c.pageOutput;l.setStore("checkedKeys",e);var d=l.getCache("saveCheckedKeys");o.props.id||o.props.key||o.props.refpk;if(r)d=ms(new Set([].concat(ms(d),ms(e))));else{var f=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return!!Array.isArray(t)&&(t.forEach((function(t){var r=t.refpk,a=t.key,o=t.id,i=r||a||o;n.push(i),Array.isArray(t.children)&&e(t.children,n)})),n)}(l.getStore("treeData"),[]),p=d.filter((function(e){return!f.includes(e)}));d=ms(new Set([].concat(ms(e),ms(p))))}l.setCache("saveCheckedKeys",d),"function"==typeof s&&s(ps(ps({},t.props),u),e,{checked:r,checkedNodes:a,node:o,event:i},d),l.setStateEve()},t.onDragOver=function(e){return e.event.preventDefault(),!1},t.onDragStart=function(e){var n=e.event,r=e.node;t.dropped=!1;var a=t.props,o=a.store,i=a.onDragStartEve;o.setCache("moveKey",r.props.eventKey),Object(f.isFunction)(i)&&i({event:n,node:r})},t.onDrop=function(e){var n=t.props.store;t.dropped=!0;var r,a,o,i=e.node.props.eventKey,c=e.dragNode.props.eventKey,l=function e(t,n,r){t.forEach((function(t,a,o){return t.key===n?r(t,a,o):t.children?e(t.children,n,r):void 0}))},s=n.getStore("treeData");(l(s,c,(function(e,t,n){n.splice(t,1),r=e})),e.dropToGap)?(l(s,i,(function(e,t,n){a=n,o=t})),a.splice(o,0,r)):l(s,i,(function(e){e.children=e.children||[],e.children.push(r)}));n.setStore("treeData",s),n.setStateEve()},t.onDragEnd=function(){t.dropped||t.props.store.setStateEve()},t.getFloadIcon=function(e){var n=t.props,r=n.store,a=n.hiddenDefaultIcon,o=void 0!==a&&a,i=r.getStore("expandedKeys"),c=null;return o||(c=0==e.isleaf||e.children&&0!=e.children.length?i.includes(e.refpk)?d.a.createElement("i",{className:W()("icon iconfont  icon-wenjianjiadakai tree-wenjian",{"stop-node":e.iconBox&&"stop"===e.iconBox.stopUpIon})}):d.a.createElement("i",{className:W()("icon iconfont  icon-wenjianjia tree-wenjian",{"stop-node":e.iconBox&&"stop"===e.iconBox.stopUpIon})}):d.a.createElement("i",{className:W()("tree-dian",{"stop-node-dian":e.iconBox&&"stop"===e.iconBox.stopUpIon})})),c},t.getEditIcon=function(e){var n=t.state.langJson,r=t.props.nodeIconTooltips,a=void 0===r?{}:r;return e&&e.iconBox&&e.iconBox.editIcon?d.a.createElement(p.Tooltip,{placement:"top",overlay:a.edit||n["tree-node-icon-edit"],delayHide:1,delayShow:1e3},d.a.createElement("i",{className:"icon iconfont icon-bianji edit-icon",onClick:function(n){return!0!==e.disabled&&t.editRender.call(Ss(t),e,n)}})):null},t.getAddIcon=function(e){var n=t.state.langJson,r=t.props.nodeIconTooltips,a=void 0===r?{}:r;return e&&e.iconBox&&e.iconBox.addIcon?d.a.createElement(p.Tooltip,{placement:"top",overlay:a.add||n["tree-node-icon-add"],delayHide:1,delayShow:1e3},d.a.createElement("i",{className:"icon iconfont icon-zengjia add-icon",onClick:function(n){return!0!==e.disabled&&t.addRender(e,n)}})):null},t.getDelIcon=function(e){var n=t.state.langJson,r=t.props.nodeIconTooltips,a=void 0===r?{}:r;return e&&e.iconBox&&e.iconBox.delIcon?d.a.createElement(p.Tooltip,{placement:"top",overlay:a.delete||n["tree-node-icon-delete"],delayHide:1,delayShow:1e3},d.a.createElement("i",{className:"icon iconfont icon-shanchu delete-icon",onClick:function(n){return!0!==e.disabled&&t.delRender.call(Ss(t),e,n)}})):null},t.getStopUpIcon=function(e){var n=t.state.langJson,r=t.props.nodeIconTooltips,a=void 0===r?{}:r;return e&&e.iconBox&&e.iconBox.stopUpIon?"up"===e.iconBox.stopUpIon?d.a.createElement(p.Tooltip,{placement:"top",overlay:a.unlock||n["tree-node-icon-lock"],delayHide:1,delayShow:1e3},d.a.createElement("i",{className:"icon iconfont icon-shu_qiyong",onClick:function(n){!0!==e.disabled&&t.handleStopAndUp(e,"up",n)}})):d.a.createElement(p.Tooltip,{placement:"top",overlay:a.lock||n["tree-node-icon-unlock"],delayHide:1,delayShow:1e3},d.a.createElement("i",{className:"icon iconfont icon-shu_tingyong",onClick:function(n){!0!==e.disabled&&t.handleStopAndUp(e,"stop",n)}})):null},t.handleStopAndUp=function(e,n,r){var a=t.props,o=a.clickStopIconEve,i=a.clickUpIconEve,c=a.store;switch(r.stopPropagation(),n){case"stop":Object(f.isFunction)(o)&&o(e);break;case"up":Object(f.isFunction)(i)&&i(e)}c.setStateEve()},t.getRightIcon=function(e){var n=t.props.nodeRightOpt;return n&&e.isdrag?d.a.createElement("span",{className:"NC_iconBox node_right_opt",onClick:n.callback},d.a.createElement(p.Icon,{type:n.icon})):null},t.getTitleInfo=function(e,n,r,a,o,i,c){var l=t.props,s=(l.store,l.tooltipLevels),u=void 0===s?[]:s,f=l.tooltipField,h=n.substr(0,a),m=n.substr(a,r.length),y=n.substr(a+r.length),b=null;return b=a>-1?d.a.createElement("span",{className:W()("title-middle",{"stop-node-title":e.iconBox&&"stop"===e.iconBox.stopUpIon})},h,d.a.createElement("span",{className:"u-tree-searchable-filter"},m),y):d.a.createElement("span",{className:W()("title-middle",{"stop-node-title":e.iconBox&&"stop"===e.iconBox.stopUpIon})},i&&"string"==typeof i?e.beforeName:"",e.refname,c&&"string"==typeof c?e.afterName:""),Array.isArray(u)&&u.includes(o)&&f&&e[f]&&(b=d.a.createElement(p.Tooltip,{className:"tooltip-word-color",placement:"top",delayShow:300,delay:1,inverse:!0,overlay:e[f]},b)),b},t.createCustomerTreeIcon=function(e){var n=t.props,r=n.store,a=n.customizeIconClick,o=r.getStore("treeData"),i=e.customerIcons;return d.a.createElement("span",{className:"NC_iconBox"},i.map((function(t,n){return"string"==typeof t?d.a.createElement("i",{key:n,className:"icon iconfont icon-".concat(t," customer-icon"),onClick:function(n){Object(f.isFunction)(a)&&a({e:n,iconType:t,item:e,treeData:o})}}):"object"===ds(t)?d.a.createElement(p.Tooltip,{placement:"top",overlay:t.title,delayHide:1,delayShow:1e3},d.a.createElement("i",{key:n,className:"icon iconfont icon-".concat(t.icon," customer-icon"),onClick:function(n){Object(f.isFunction)(a)&&a({e:n,iconType:t.icon,item:e,treeData:o})}})):void 0})))},t.renderTreeTitle=function(e,n){var r,a,o,i,c,l,s=t.props,u=s.store,f=s.treeType,p=u.getStore("searchValue"),h=u.getStore("noDisableId"),m=u.getStore("needEdit"),y=e.beforeName?e.beforeName:"",b=e.afterName?e.afterName:"",v=e.refname?e.refname:"";"string"==typeof y&&(v=y+v),"string"==typeof b&&(v+=b);var g=v.toLocaleLowerCase().indexOf(p.toLocaleLowerCase()),k=t.getFloadIcon(e),S=null;return S="asyncTree"===f?d.a.createElement("span",{className:"title-middle"},e.refname):t.getTitleInfo(e,v,p,g,n,y,b),m&&(r=t.getEditIcon(e),a=t.getAddIcon(e),o=t.getDelIcon(e),i=t.getStopUpIcon(e)),c=t.getRightIcon(e),l=e.customerIcons&&e.customerIcons.length>0?t.createCustomerTreeIcon(e):"asyncTree"===f?d.a.createElement("span",{className:"NC_iconBox"},r," ",a," ",o):d.a.createElement("span",{className:"NC_iconBox"},r," ",a," ",o," ",i),"asyncTree"===f?d.a.createElement("div",{className:"title-con"},k,y,S,b,l):y&&"string"==typeof y||b&&"string"==typeof b?d.a.createElement("div",{className:W()("title-con ".concat(e.className?e.className:""),{"active-nodisable":h===e.refpk,"title-con-disabled":e&&e.disabled})},k,S,l,c):d.a.createElement("div",{className:W()("title-con ".concat(e.className?e.className:""),{"active-nodisable":h===e.refpk,"title-con-disabled":e&&e.disabled})},d.a.createElement("span",{className:"title-single"},k,y,S,b),l,c)},t.getTreeNodesLazy=function(e){return t.loopLazy(e,0)},t.loopLazy=function(e,n){var r=t.props,a=r.store,o=r.neverDisable,i=void 0!==o&&o,c=r.switcherClass,l=r.mustExpandable,s=void 0!==l&&l,u=a.getStore("expandedKeys"),p=a.getStore("selectedKeys");return(e||[]).map((function(e){if(e.key=e.refpk,void 0===e.key)return console.error("树组件，数据格式错误， 缺少refpk字段，请检查数据格式"),!1;var r="";if(e.attrcode)r="".concat(e.attrcode,"_node");else if(e.beforeName&&"string"==typeof e.beforeName)r="".concat(e.beforeName.trim(),"_node");else if(e.refname)if("string"==typeof e.refname){var a=e.refname.split(" "),o=a[0];!o&&a[1]&&(o=a[1]),r="".concat(o,"_node")}else r="".concat(e.refpk||e.key||e.id,"_node");return Array.isArray(e.children)&&e.children.length?d.a.createElement(ws,us({liAttr:{fieldid:Object(f.getSysFieldid)(r),key:r}},e,{className:W()("node-item ".concat(e.className||""),{isexpend:u.includes(e.key)},{disabledSelected:p[0]===e.refpk}),key:e.key,title:t.renderTreeTitle(e,n),disabled:!i&&e.disabled,switcherClass:e.switcherClass||c,mustExpandable:e.mustExpandable||s,isLeaf:e.isLeaf}),t.loop(e.children,n+1)):!1===e.isleaf?d.a.createElement(ws,us({liAttr:{fieldid:Object(f.getSysFieldid)(r),key:r}},e,{className:W()("node-item ".concat(e.className||""),{isexpend:u.includes(e.key)},{disabledSelected:p[0]===e.refpk}),key:e.key,title:t.renderTreeTitle(e,n),disabled:!i&&e.disabled,switcherClass:e.switcherClass||c,children:[],mustExpandable:e.mustExpandable||s,isLeaf:!1})):d.a.createElement(ws,us({liAttr:{fieldid:Object(f.getSysFieldid)(r),key:r}},e,{className:W()("node-item ".concat(e.className||""),{isexpend:u.includes(e.key)},{disabledSelected:p[0]===e.refpk}),key:e.key,title:t.renderTreeTitle(e,n),disabled:!i&&e.disabled,switcherClass:e.switcherClass||c,children:null,mustExpandable:e.mustExpandable||s,isLeaf:!0}))}))},t.getTreeNodes=function(e){return t.loop(e,0)},t.loop=function(e,n){var r=t.props,a=r.store,o=r.neverDisable,i=void 0!==o&&o,c=r.switcherClass,l=r.mustExpandable,s=void 0!==l&&l,u=a.getStore("expandedKeys"),p=a.getStore("selectedKeys");return(e||[]).map((function(e){if(e.key=e.refpk,void 0===e.key)return console.error("树组件，数据格式错误， 缺少refpk字段，请检查数据格式"),!1;var r="";if(e.attrcode)r="".concat(e.attrcode,"_node");else if(e.beforeName&&"string"==typeof e.beforeName)r="".concat(e.beforeName.trim(),"_node");else if(e.refname)if("string"==typeof e.refname){var a=e.refname.split(" "),o=a[0];!o&&a[1]&&(o=a[1]),r="".concat(o,"_node")}else r="".concat(e.refpk||e.key||e.id,"_node");return Array.isArray(e.children)&&(e.children.length||"asyncTree"===t.props.treeType)?d.a.createElement(ws,us({liAttr:{fieldid:Object(f.getSysFieldid)(r),key:r}},e,{className:W()("node-item ".concat(e.className||""),{isexpend:u.includes(e.key)},{disabledSelected:p[0]===e.refpk}),key:e.key,title:t.renderTreeTitle(e,n),disabled:!i&&e.disabled,switcherClass:e.switcherClass||c,mustExpandable:e.mustExpandable||s}),t.loop(e.children,n+1)):!1===e.isleaf?d.a.createElement(ws,us({liAttr:{fieldid:Object(f.getSysFieldid)(r),key:r}},e,{className:W()("node-item ".concat(e.className||""),{isexpend:u.includes(e.key)},{disabledSelected:p[0]===e.refpk}),key:e.key,title:t.renderTreeTitle(e,n),disabled:!i&&e.disabled,switcherClass:e.switcherClass||c,mustExpandable:e.mustExpandable||s,children:[],isLeaf:e.isleaf})):d.a.createElement(ws,us({liAttr:{fieldid:Object(f.getSysFieldid)(r),key:r}},e,{className:W()("node-item ".concat(e.className||""),{isexpend:u.includes(e.key)},{disabledSelected:p[0]===e.refpk}),key:e.key,title:t.renderTreeTitle(e,n),disabled:!i&&e.disabled,switcherClass:e.switcherClass||c,mustExpandable:e.mustExpandable||s,children:null,isLeaf:!0}))}))},t.addNodeEve=function(){var e=t.props,n=e.verifyModalForm,r=void 0!==n&&n,a=e.addNodeCallBack,o=e.store,i=o.getCache("currentNode"),c=o.getStore("formStore");r||c.setStatus("browse");var l=c.getAllFormValue();if(Object(f.isFunction)(a)){var s=a(l,i.refpk,i);r&&s&&(o.setStore("showEditModal",!1),o.setStateEve())}},t.addRender=function(e,n){n.stopPropagation();var r=t.props,a=r.showModal,o=void 0===a||a,i=r.store,c=r.clickAddIconEve,l=r.addNodeCallBack,s=r.treeType;if(i.setCache("selectedNode",e),i.setCache("currentNode",e),o){var u=i.getStore("formStore");u.emptyAllFormValue(),u.setStatus("edit"),i.setCache("treeNodeOperation","add"),i.setStore("showEditModal",!0),i.setStateEve()}else"asyncTree"===s&&Object(f.isFunction)(l)&&l(e);"asyncTree"===s&&i.setStore("selectedKeys",[e.refpk]),Object(f.isFunction)(c)&&c(e),i.setStateEve()},t.editRender=function(e,n){var r=t.props,a=r.showModal,o=void 0===a||a,i=r.store,c=r.clickEditIconEve,l=r.treeType,s=r.editNodeCallBack;if(n.stopPropagation(),i.setCache("currentNode",e),o){var u=i.getStore("formStore");u.emptyAllFormValue(),u.setStatus("edit"),i.setCache("treeNodeOperation","edit"),i.setStore("showEditModal",!0)}else"asyncTree"===l&&Object(f.isFunction)(s)&&s(e);Object(f.isFunction)(c)&&c(e),i.setStore("selectedKeys",[e.refpk]),i.setStateEve()},t.delNodeEve=function(){var e=t.props,n=e.delNodeCallBack,r=e.store.getCache("currentNode");Object(f.isFunction)(n)&&n(r)},t.delRender=function(e,n){var r=t.props,a=r.showModal,o=void 0===a||a,i=r.store,c=r.clickDelIconEve,l=r.treeType,s=r.delNodeCallBack;n.stopPropagation(),i.setCache("currentNode",e),o?(i.setCache("treeNodeOperation","del"),i.setStore("showEditModal",!0)):"asyncTree"===l&&Object(f.isFunction)(s)&&s(e),"asyncTree"===l&&i.setStore("selectedKeys",[e.refpk]),Object(f.isFunction)(c)&&c(e),i.setStateEve()},t.editNodeEve=function(){var e=t.props,n=e.verifyModalForm,r=void 0!==n&&n,a=e.editNodeCallBack,o=e.store,i=(e.modal,o.getCache("currentNode")),c=o.getStore("formStore");r||c.setStatus("browse");var l=c.getAllFormValue();if(Object(f.isFunction)(a)){var s=a(l,i.refpk,i);r&&s&&(o.setStore("showEditModal",!1),o.setStateEve())}},t.beSureBtnClick=function(){var e=t.props,n=e.treeType,r=e.store,a=r.getCache("treeNodeOperation");if("asyncTree"===n){if(r.setStore("showEditModal",!1),Object(f.isFunction)(t.props["".concat(a,"NodeCallBack")])){var o=r.getCache("currentNode"),i=r.getStore("formStore");t.props["".concat(a,"NodeCallBack")](o,i.getAllFormValue())}}else"syncTree"===n&&t["".concat(a,"NodeEve")]()},t.cancelBtnClick=function(){var e=t.props,n=e.verifyModalForm,r=e.store,a=r.getStore("formStore");n||a.setStatus("browse"),a.cancel(),r.setStore("showEditModal",!1),r.setStateEve()},t.getScrollContainer=function(){return document.querySelector(".tree-hotkeys-wrapper")},t.searchInputRef=null,t.ncc_automated="0",t.dropped=!1,t.state={langJson:{},_:""},t.ncc_automated=Object(f.getGlobalStorage)("localStorage","_ncc_automated_");var n=t.props,r=n.store,i=n.meta,c=n.metaId,l=n.treeType,s=n.formStore;return r.setCache("treeType",l),r.setStore("formStore",s),i[c]&&s.setMeta(i,c),t.transerDefaultConfigToStore(e),t}return t=o,(n=[{key:"componentWillMount",value:function(){var e=this;Object(f.getMultiLang)({moduleId:"containers_tree",callback:function(t){e.setState({langJson:t})}})}},{key:"componentWillUpdate",value:function(e,t){var n=e.store,r=e.defaultExpandAll,a=void 0!==r&&r;if("syncTree"===e.treeType){var o=n.getStore("firstTime"),i=n.getStore("treeData");o&&(this.generateList(i,this.dataList),n.setCache("dataList",this.dataList),n.setStore("firstTime",!1),a&&n.setStore("expandedKeys",this.getAllNodeKeys(i)))}}},{key:"componentWillReceiveProps",value:function(e){var t=e.meta,n=e.store,r=e.metaId,a=n.getStore("formStore");t[r]&&a.setMeta(t,r),this.transerDefaultConfigToStore(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.treeId,r=t.userDefine,a=t.needSearch,o=void 0===a||a,i=t.getSearchVal,c=t.disabledSearch,l=void 0!==c&&c,s=t.checkable,u=void 0!==s&&s,h=t.checkStrictly,m=void 0===h||h,y=t.showModal,b=void 0===y||y,v=t.verifyModalForm,g=void 0!==v&&v,k=t.modalSize,S=t.openIcon,O=t.closeIcon,w=t.draggable,C=void 0!==w&&w,E=t.store,j=(t.modal,t.mustExpandable),x=void 0!==j&&j,P=t.lazyLoad,_=void 0!==P&&P,N=t.expandWhenDoubleClick,T=t.showLine,D=void 0!==T&&T,A=t.treeType,I=t.metaId,M=t.otherAreaHeight,R=void 0===M?0:M,B=t.canCloseFreely,K=void 0===B||B,F=this.state.langJson,L=E.getStore("searchValue"),H=E.getStore("focusable"),q=E.getStore("selectedKeys"),V=E.getStore("expandedKeys"),U=E.getStore("autoExpandParent"),W=E.getStore("checkedKeys"),Y=E.getStore("treeData"),z=E.getStore("showEditModal"),J=E.getCache("treeNodeOperation"),Z=this.props["".concat(J,"ModalTitle")]||F["containers-tree-".concat(J)],G=E.getStore("formStore"),X=E.getStore("needEdit");return d.a.createElement("div",{fieldid:Object(f.getSysFieldid)("".concat(n,"_tree-area")),className:"syncTreeCom",id:n},Object(f.isFunction)(r)&&r(),o&&d.a.createElement("div",{className:"NC_syncTreeSearch"},d.a.createElement("input",{ref:function(t){return e.searchInputRef=t},className:"u-form-control",fieldid:"search",style:{width:"100%",height:30,"padding-right":"50px"},placeholder:F["containers-tree-001"],onClick:function(){if("1"===e.ncc_automated){if(""==L)return;E.searchChange(L),E.setStateEve()}},onChange:function(t){var n=t.target.value;if(""==n&&e.handleClearState(),"1"!=e.ncc_automated){e.interval=(new Date).getTime();var r=setTimeout((function(){(new Date).getTime()-e.interval>=500&&E.searchChange(n),Object(f.isFunction)(i)&&i(n),clearTimeout(r)}),500)}L=n,E.setStore("searchValue",L),E.setStateEve()},onFocus:this.focusEve.bind(this),disabled:l,onBlur:this.blurEve}),d.a.createElement("i",{className:"icon iconfont icon-sousuo syncTreeSearchIcon"}),""!==L&&d.a.createElement("i",{style:l?{display:"none"}:null,className:"icon iconfont qingkong syncTreeSearchIcon icon-qingkong",onClick:this.handleClearSearchVal})),d.a.createElement("div",{fieldid:Object(f.getSysFieldid)("".concat(n,"_tree")),className:"synctree-area"},d.a.createElement(p.Tree,{lazyLoad:_,renderTreeNodes:_?this.getTreeNodes:null,treeId:n,treeData:Y,focusable:H,mustExpandable:x,onDoubleClick:this.onDoubleClickHandler,selectedKeys:q,onSelect:this.onSelect,onExpand:this.onExpand,expandedKeys:V,autoExpandParent:U,onMouseLeave:this.onMouseLeave,onMouseEnter:this.onMouseEnter,onCheck:this.onCheck,checkable:u,checkStrictly:m,checkedKeys:W||[],draggable:C,debounceDuration:5,onDragOver:this.onDragOver.bind(this),onDragStart:this.onDragStart.bind(this),onDrop:this.onDrop,onDragEnd:this.onDragEnd,getScrollContainer:this.getScrollContainer,otherAreaHeight:R,openIcon:Object(f.isFunction)(S)?S():d.a.createElement("i",{className:"icon iconfont icon-shu_zk tree-swich"}),closeIcon:Object(f.isFunction)(O)?O():d.a.createElement("i",{className:"icon iconfont icon-shushouqi tree-swich"}),expandWhenDoubleClick:N,loadData:"asyncTree"===A?this.onLoadData:null,showLine:D,canCloseFreely:K},_?null:this.getTreeNodes(Y))),X&&b&&Object.keys(F).length>0&&d.a.createElement(p.Modal,{fieldid:"".concat(J,"Node"),show:z,backdrop:"static",size:"del"!==J&&k,userControl:"del"!==J&&g},d.a.createElement(p.Modal.Header,null,d.a.createElement(p.Modal.Title,{fieldid:Z},Z)),d.a.createElement(p.Modal.Body,null,"del"===J?F["containers-tree-003"]:d.a.createElement("div",{className:"addModal"},d.a.createElement(Dl.a,{name:I,config:{},store:G}))),d.a.createElement(p.Modal.Footer,null,d.a.createElement(p.Button,{onClick:this.beSureBtnClick,colors:"primary",style:{marginRight:8}},F["containers-tree-sure-btn"]),d.a.createElement(p.Button,{onClick:this.cancelBtnClick,bordered:!0},F["containers-tree-cancel-btn"]))))}}])&&bs(t.prototype,n),r&&bs(t,r),o}(Nl.BaseComponent);function Es(e){return function(e){if(Array.isArray(e))return Ps(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||js(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function js(e,t){if(e){if("string"==typeof e)return Ps(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ps(e,t):void 0}}function Ps(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _s(){return(_s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ns(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ts=function(e){var t=this.asyncTreeDataSource[e];return t||(t=ss(),this.asyncTreeDataSource[e]=t,void console.warn("所操作的表格中无ID为".concat(e,"的数据")))};function Ds(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e),n=t.treeId,r=t.expandWhenDoubleClick,a=void 0===r||r,o=t.editType,i=t.doubleClickEve,c=t.showModal,l=void 0===c||c,s=t.metaId,u=Ns(t,["treeId","expandWhenDoubleClick","editType","doubleClickEve","showModal","metaId"]),d=this,f=d.asyncTreeDataSource[n];return f||(f=ss(),d.asyncTreeDataSource[n]=f),!d.formDataSource[s]&&l&&d.use.form(s),React.createElement(Cs,_s({meta:this.state.meta,store:f,treeId:n,needSearch:!1,expandWhenDoubleClick:a,onDoubleClickEve:i,needEdit:o},u,{showModal:l,metaId:s,formStore:d.formDataSource[s],pageOutput:d.output,treeType:"asyncTree"}))}function As(e){Gl(e)}function Is(e,t,n){if(Object(f.isArray)(t)){var r=Ts.call(this,e);if(r){if(n){var a="";if(n.props&&n.props.eventKey?a=n.props.eventKey:n.key&&(a=n.key),!a)return void console.warn("异步树setTreeData方法，treeNode参数不正确");var o=Zs(t),i=r.getStore("treeData");!function(e,t,n){if(!n||!Object(f.isArray)(n)||0===n.length)return!1;(function e(t){if(!t||0===t.length)return!1;var r,a=function(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=js(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw o}}}}(t);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(o.key===n[0].pid)return void(o.children=n);o.children&&e(o.children)}}catch(e){a.e(e)}finally{a.f()}})(e)}(i,0,o),r.setStore("treeData",Es(i))}else{var c=Zs(t);r.setStore("treeData",c),r.setStore("selectedKeys",[])}r.setStateEve();var l=r.getListener("onSelectedChange");Object(f.isFunction)(l&&!n)&&l(null)}}}function Ms(e,t){var n=Ts.call(this,e);n&&n.setNodeChecked(t)}function Rs(e,t){var n=Ts.call(this,e);if(n){var r=Zs(t),a=n.getStore("treeData");Object(f.isArray)(r)?(zl(r),r.forEach((function(e){return Gs(a,e)}))):(zl([r]),Gs(a,r)),n.setStore("treeData",Es(a)),n.setStateEve()}}function Bs(e,t){var n=Ts.call(this,e);if(n)return Kl(n.getStore("treeData"),t)}function Ks(e,t){var n=Ts.call(this,e);n&&n.delNodeSuceess(t)}function Fs(e,t){var n=Ts.call(this,e);n&&n.editNodeSuccess(t)}function Ls(e,t,n){var r=Ts.call(this,e);if(r){var a=r.getStore("treeData");Jl(a,t,n),n||(t?r.setStore("focusable",!1):r.setStore("focusable",!0)),r.setStore("treeData",Es(a)),r.setStateEve()}}function Hs(e,t){var n=Ts.call(this,e);if(n){if(n.getStore("needEdit")!==t){var r=n.getListener("onTreeStatusChange");r&&r()}n.setStore("needEdit",t),n.setStateEve()}}function qs(e){var t=Ts.call(this,e);if(t)return t.getCache("selectedNode")}function Vs(e,t,n){var r=Ts.call(this,e);if(r){var a=r.getStore("expandedKeys");if(n)a="[object Array]"===Object.prototype.toString.call(t)?t:t?[t]:[];else if("[object Array]"===Object.prototype.toString.call(t)){var o;(o=a).push.apply(o,Es(t))}else{if("[object String]"!==Object.prototype.toString.call(t))return void console.warn("openNodeByPk方法，参数pk,类型为数组或字符串");-1===a.indexOf(t)&&a.push(t)}r.setStore("autoExpandParent",!0),r.setStore("expandedKeys",a),r.setStateEve();var i=r.getListener("loadTreeData"),c=r.getStore("treeData");Object(f.isFunction)(i)&&(Object(f.isString)(t)?i(t,Kl(c,t)):Object(f.isArray)(t)&&t.forEach((function(e){i(e,Kl(c,e))})))}}function Us(e,t){var n=Ts.call(this,e);n&&n.closeNodeByPk(t)}function Ws(e,t,n){var r=Ts.call(this,e);r&&r.hideIcon(t,n)}function Ys(e,t){var n=Ts.call(this,e);n&&n.addBrotherNode(t)}function zs(e,t){var n=Ts.call(this,e);n&&n.setNodeSelected(t)}function Js(e){var t=Ts.call(this,e);t&&t.cancelSelectedNode()}function Zs(e){return Object(f.isArray)(e)?e.map((function(e,t){if(e.key=e.refpk,e.iconBox||e.key&&(e.iconBox={addIcon:!0,delIcon:!0,editIcon:!0}),void 0===e.key)return console.error("createNewData方法报错，异步树的数据中缺少refpk字段，请检查数据格式"),!1})):e.refpk?(e.key=e.refpk,e.iconBox||(e.iconBox={addIcon:!0,delIcon:!0,editIcon:!0})):console.error("createNewData, 异步树，数据格式不正确"),e}function Gs(e,t){var n=t.pid;if(n)for(var r=e.length,a=0;a<r;a++){var o=e[a];if(o.refpk===n)return o.children?o.children.push(t):o.children=[t],!0;if(Array.isArray(o.children)&&Gs(o.children,t))return!1}else t.refpk?e.push(t):console.warn("addTreeNode方法，参数data格式不正确")}var Xs=c;function Qs(e){return function(e){if(Array.isArray(e))return $s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return $s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $s(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function eu(){return(eu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function tu(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var nu=function(e){var t=this.syncTreeDataSource[e];return t||(t=ss(),this.syncTreeDataSource[e]=t,void console.warn("所操作的表格中无ID为".concat(e,"的数据")))};function ru(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e),n=t.treeId,r=t.expandWhenDoubleClick,a=void 0!==r&&r,o=t.onDoubleClickEve,i=t.delNodeCallBack,c=t.showModal,l=void 0===c||c,s=t.metaId,u=tu(t,["treeId","expandWhenDoubleClick","onDoubleClickEve","delNodeCallBack","showModal","metaId"]),d=this,p=d.syncTreeDataSource[n];return p||(p=ss(),d.syncTreeDataSource[n]=p),!d.formDataSource[s]&&l&&d.use.form(s),React.createElement(Cs,eu({key:n,meta:this.state.meta,store:p,treeId:n,onDoubleClickEve:o,expandWhenDoubleClick:a,delNodeCallBack:function(e){Object(f.isFunction)(i)&&i(e.refpk)},formStore:d.formDataSource[s],showModal:l,metaId:s},u,{pageOutput:d.output,treeType:"syncTree"}))}function au(e,t,n){var r=nu.call(this,e);if(r){if(r.setStore("firstTime",!0),r.setStore("searchValue",""),!Object(f.isArray)(t))return console.warn("setSyncTreeData方法data参数为数组"),!1;!r.getCache("userControlIcon")&&zl(t),r.setStore("treeData",Qs(t)),r.setStore("expandedKeys",[]),r.setStore("selectedKeys",[]),r.setCache("deepData",Qs(t)),n&&("[object Array]"===Object.prototype.toString.call(n)?gu.call(this,e,n):console.error("iconBoxData is not a Array"));var a=r.getListener("selectedForInit"),o=r.getListener("onSelectEve");if(t&&0!=t.length&&a){var i,c=t.length,l=t[0];c>1&&(i=l),1==c&&(i=l.needSelect?l:l.children&&0!=l.children?l.children[0]:l,r.setStore("expandedKeys",[l.refpk])),r.setCache("selectedNode",Kl(t,i.refpk)),r.setStore("selectedKeys",[i.refpk]),Object(f.isFunction)(a)?a(i.refpk,i,!0):Object(f.isFunction)(o)&&o(i.refpk,i,!0)}r.setStateEve();var s=r.getListener("onSelectedChange");Object(f.isFunction)(s)&&s(null)}}function ou(e,t){var n=nu.call(this,e);n&&n.editNodeSuccess(t)}function iu(e,t){var n=nu.call(this,e);n&&(n.setCache("disabledSearch",!0),n.setStore("noDisableId",t),n.setStore("selectedKeys",[t]),du(e,!0),n.setStateEve())}function cu(e){var t=nu.call(this,e);t&&(du(e,!1),t.setCache("disabledSearch",!1),t.setStore("selectedKeys",[t.getStore("noDisableId")]),t.setStore("noDisableId",""),t.setStateEve())}function lu(e,t,n){var r=nu.call(this,e);if(r){var a=r.getStore("treeData"),o=r.getCache("deepData"),i=r.getCache("userControlIcon"),c=Fl(a);a=Gl(c)||[],Object(f.isArray)(t)?(!i&&zl(t),t.forEach((function(e){Hl(a,e,n),Hl(o,e,n)}))):(!i&&zl([t]),Hl(a,t,n),Hl(o,t,n)),r.setStore("treeData",Qs(a)),r.setStore("firstTime",!0),r.setStateEve()}}function su(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=nu.call(this,e);r&&r.delNodeSuceess(t,n)}function uu(e,t){var n=nu.call(this,e);if(n)return Kl(n.getCache("deepData"),t)}function du(e,t,n){var r=nu.call(this,e);if(r){var a=r.getStore("treeData"),o=r.getCache("deepData");Jl(a,t,n),o&&Jl(o,t,n),n||(t?r.setStore("focusable",!1):r.setStore("focusable",!0)),r.setStore("treeData",Qs(a)),r.setStateEve()}}function fu(e,t){var n=nu.call(this,e);if(n){if(n.getStore("needEdit")!==t){var r=n.getListener("onTreeStatusChange");r&&r()}n.setStore("needEdit",t),n.setStateEve()}}function pu(e){var t=nu.call(this,e);if(t)return t.getCache("selectedNode")}function hu(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=nu.call(this,e);if(r){var a=r.getStore("expandedKeys");if("[object Array]"===Object.prototype.toString.call(t))a.push.apply(a,Qs(t));else{if("[object String]"!==Object.prototype.toString.call(t))return void console.warn("openNodeByPk方法，参数pk,类型为数组或字符串");-1===a.indexOf(t)&&a.push(t)}r.setStore("expandedKeys",Qs(a)),r.setStore("autoExpandParent",n),r.setStateEve()}}function mu(e,t){var n=nu.call(this,e);n&&n.closeNodeByPk(t)}function yu(e,t){return Gl(e,t)}function bu(e){var t=nu.call(this,e);if(t){var n=t.getStore("treeData");return JSON.parse(JSON.stringify(n||[],(function(e,t){if("beforeName"!=e&&"afterName"!=e)return t})))}}function vu(e,t,n){var r=nu.call(this,e);r&&r.hideIcon(t,n)}function gu(e,t){var n=nu.call(this,e);if(n){var r=n.getStore("treeData");Object(f.isObj)(t)?Vl(r,t.key,t.value):Object(f.isArray)(t)&&t.map((function(e){return Vl(r,e.key,e.value)})),n.setStateEve()}}function ku(e,t){var n=nu.call(this,e);n&&n.addBrotherNode(t)}function Su(e,t){var n=nu.call(this,e);n&&n.setNodeSelected(t)}function Ou(e,t){var n=nu.call(this,e);n&&n.setNodeChecked(t)}function wu(e){var t=nu.call(this,e);if(t)return t.getStore("checkedKeys")}function Cu(e){var t=nu.call(this,e);t&&t.cancelSelectedNode()}function Eu(e,t){var n=nu.call(this,e);n&&(!function e(t,n){t.forEach((function(t){t.isleaf?t.iconBox={addIcon:n,delIcon:n,editIcon:n}:Array.isArray(t.children)&&e(t.children,n)}))}(n.getStore("treeData"),t),n.setStateEve())}function ju(e,t,n){var r=nu.call(this,e);if(r){var a=r.getStore("treeData"),o=Kl(a,t);Yl(a,t),function e(t,n,r){for(var a=t.length;a--;){var o=t[a];if(o.refpk===r)return Array.isArray(o.children)?o.children.push(n):o.children=[n],!0;if(Array.isArray(o.children)&&e(o.children,n,r))return!1}}(a,o,n),r.setStateEve()}}function xu(e){var t=nu.call(this,e);if(t)return Kl(t.getStore("treeData"),t.getCache("moveKey"))}function Pu(e){var t=nu.call(this,e);if(t)return Kl(t.getStore("treeData"),t.getCache("isHover"))}function _u(e,t){var n=nu.call(this,t);n&&("[object String]"!==Object.prototype.toString.call(e)&&console.warn("搜索参数为字符串类型"),n.searchChange(e))}function Nu(e){var t=e.id,n=e.items,r=nu.call(this,t);if(r){var a=r.getStore("treeData");n.map((function(e){!function e(t){var n=t.treeData,r=t.item,a=n.length;for(;a--;){var o=n[a];if(o.key===r.key)return o.customerIcons=r.icons,!0;if(Array.isArray(o.children)&&e({treeData:o.children,item:r}))return!1}}({treeData:a,item:e})})),r.setStateEve()}}function Tu(e,t){if(!t)return e;for(var n=e.length,r=0;r<n;r++){var a=e[r];if(a.key==t)return a;if(Array.isArray(a.children)){var o=Tu(a.children,t);if(o)return o}}}function Du(e){var t=e.item,n=e.e,r=e.treeId,a=nu.call(this,r);if(a){var o=a.getCache("showModal"),i=a.getCache("metaId"),c=a.getListener("clickAddIconEve"),l=this.form,s=l.setFormStatus,u=l.EmptyAllFormValue;n.stopPropagation(),s(i,"edit"),a.setCache("currentNode",t),u(i),o&&(a.setStore("showEditModal",!0),a.setCache("treeNodeOperation","add")),Object(f.isFunction)(c)&&c(t),a.setStateEve()}}function Au(e){var t=e.item,n=e.e,r=e.treeId,a=nu.call(this,r);if(a){var o=a.getCache("showModal"),i=a.getCache("metaId"),c=a.getListener("clickEditIconEve"),l=this.form.setFormStatus;n.stopPropagation(),a.setCache("currentNode",t),o&&(l(i,"edit"),a.setStore("showEditModal",!0),a.setCache("treeNodeOperation","edit")),Object(f.isFunction)(c)&&c(t),a.setStore("selectedKeys",[t.refpk]),a.setStateEve()}}function Iu(e){var t=e.item,n=e.e,r=e.treeId,a=nu.call(this,r);if(a){var o=a.getCache("showModal"),i=a.getListener("clickDelIconEve");n.stopPropagation(),a.setCache("currentNode",t),o&&(a.setStore("showEditModal",!0),a.setCache("treeNodeOperation","del")),Object(f.isFunction)(i)&&i(t)}}function Mu(e,t){var n=nu.call(this,e);if(n){var r=n.getStore("treeData");if(t){var a=t(JSON.parse(JSON.stringify(r)));Array.isArray(a)&&(n.getCache("deepData",a),n.setStore("treeData",a)),n.setStateEve()}else console.warn("请传回调参数，并且返回新的数据源")}}function Ru(e,t){var n=nu.call(this,e);if(n){var r=n.getStore("treeData"),a=n.getCache("deepData");o(r),o(a)}function o(e){for(var n=0;n<e.length;n++){var r=e[n];if(r.refpk==t.pid)return r.children=r.children.map((function(e){return e.refpk==t.refpk?t:e})),!0}e.map((function(e){e.children&&o(e.children)}))}}var Bu=l;function Ku(e){return(Ku="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fu(e){return function(e){if(Array.isArray(e))return Lu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Lu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lu(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qu(e,t){return(qu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wu(e);if(t){var a=Wu(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Uu(this,n)}}function Uu(e,t){return!t||"object"!==Ku(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wu(e){return(Wu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1885);var Yu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qu(e,t)}(o,e);var t,n,r,a=Vu(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=a.call(this)).handleTransfer=function(t,n,r){"right"===n&&(t=e.props.targetKeys.concat(r)),e.props.onTargetKeysChange(t)},e.onCheck=function(t,n){e.setState({targetSelectedKeys:n},e.changeDisabled)},e.changeDisabled=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.targetKeys,n=e.state.targetSelectedKeys,r=n.map((function(e){return t.indexOf(e)})).sort((function(e,t){return e-t})),a=function(){if(r.length>1){for(var e=0;e<r.length-1;e++)if(r[e+1]-r[e]!=1)return!1}else if(0==r.length)return!1;return!0},o=a();o?(0===r[0]?e.setState({upDisabled:!0}):e.setState({upDisabled:!1}),r[r.length-1]===t.length-1?e.setState({downDisabled:!0}):e.setState({downDisabled:!1})):e.setState({upDisabled:!0,downDisabled:!0})},e.handleMove=function(t){var n=e.props.targetKeys,r=e.state.targetSelectedKeys,a=JSON.parse(JSON.stringify(n)),o=r.map((function(e){return n.indexOf(e)})).sort((function(e,t){return e-t})),i=n.slice(0,o[0]),c=r,l=n.slice(o[o.length-1]+1,n.length);switch(t){case"up":if(i.length>0){var s=i[i.length-1];i.splice(i.length-1,1),a=[].concat(Fu(i),Fu(c),[s],Fu(l))}break;case"down":if(l.length>0){var u=l[0];l.splice(0,1),a=[].concat(Fu(i),[u],Fu(c),Fu(l))}break;case"top":a=[].concat(Fu(c),Fu(i),Fu(l));break;case"bottom":a=[].concat(Fu(i),Fu(l),Fu(c))}e.handleTransfer(a),e.getRightSelectEle(),e.changeDisabled(a)},e.handleFilterOption=function(e,t){return t.title.indexOf(e)>-1},e.getRightSelectEle=function(){var e=document.querySelector('li.u-transfer-list-content-item > label.is-checked > input[type="checkbox"]');setTimeout((function(){e&&e.focus()}),20)},e.state={serachKeyword:"",upDisabled:!0,downDisabled:!0,targetSelectedKeys:[],LangData:null,json:{}},e}return t=o,(n=[{key:"componentWillMount",value:function(){var e=this;Object(f.getMultiLang)({moduleId:"container_transfer",callback:function(t,n,r){e.setState({json:t,LangData:r},(function(){}))}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=t.dataSource,a=t.targetKeys,o=t.showSearch,i=t.listRender,c=t.titles,l=t.operations,s=t.searchPlaceholder,u=t.notFoundContent,h=t.showMoveBtn;c=c||[this.state.json["container-transfer-0001"],this.state.json["container-transfer-0002"]],u=u||this.state.json["container-transfer-0003"],s=s||this.state.json["container-transfer-0004"];var m,y,b,v=this.state,g=v.upDisabled,k=v.downDisabled,S=W()((b=!!n,(y=n)in(m={"transfer-wrap":!0})?Object.defineProperty(m,y,{value:b,enumerable:!0,configurable:!0,writable:!0}):m[y]=b,m));return d.a.createElement("div",{className:"list-to-list"},d.a.createElement("div",{className:S,fieldid:Object(f.getSysFieldid)("transfer_area")},d.a.createElement(p.Transfer,{lazy:this.props.lazy,dataSource:r,targetKeys:a,onChange:this.handleTransfer,onSelectChange:this.onCheck,filterOption:this.handleFilterOption,showSearch:o,render:i,titles:c,operations:l,searchPlaceholder:s,notFoundContent:u}),h&&d.a.createElement("div",{className:"move-btns"},g?d.a.createElement(p.Button,{className:"move-btn move-top",disabled:g,onClick:function(){return e.handleMove("top")}},d.a.createElement(p.Icon,{type:"uf uf-2arrow-up"})):d.a.createElement(p.Tooltip,{placement:"top",overlay:this.state.json["container-transfer-up-top"],delayHide:1,delayShow:1e3},d.a.createElement(p.Button,{className:"move-btn move-top",disabled:g,onClick:function(){return e.handleMove("top")}},d.a.createElement(p.Icon,{type:"uf uf-2arrow-up"}))),g?d.a.createElement(p.Button,{className:"move-btn move-up",disabled:g,onClick:function(){return e.handleMove("up")}},d.a.createElement(p.Icon,{type:"uf uf-arrow-up"})):d.a.createElement(p.Tooltip,{placement:"top",overlay:this.state.json["container-transfer-up"],delayHide:1,delayShow:1e3},d.a.createElement(p.Button,{className:"move-btn move-up",disabled:g,onClick:function(){return e.handleMove("up")}},d.a.createElement(p.Icon,{type:"uf uf-arrow-up"}))),k?d.a.createElement(p.Button,{className:"move-btn move-down",disabled:k,onClick:function(){return e.handleMove("down")}},d.a.createElement(p.Icon,{type:"uf uf-arrow-down"})):d.a.createElement(p.Tooltip,{placement:"top",overlay:this.state.json["container-transfer-down"],delayHide:1,delayShow:1e3},d.a.createElement(p.Button,{className:"move-btn move-down",disabled:k,onClick:function(){return e.handleMove("down")}},d.a.createElement(p.Icon,{type:"uf uf-arrow-down"}))),k?d.a.createElement(p.Button,{className:"move-btn move-bottom",disabled:k,onClick:function(){return e.handleMove("bottom")}},d.a.createElement(p.Icon,{type:"uf uf-2arrow-down"})):d.a.createElement(p.Tooltip,{placement:"top",overlay:this.state.json["container-transfer-down-bottom"],delayHide:1,delayShow:1e3},d.a.createElement(p.Button,{className:"move-btn move-bottom",disabled:k,onClick:function(){return e.handleMove("bottom")}},d.a.createElement(p.Icon,{type:"uf uf-2arrow-down"})))),this.props.children))}}])&&Hu(t.prototype,n),r&&Hu(t,r),o}(u.Component);Yu.defaultProps={showSearch:!1,showMoveBtn:!1,operations:["",""],dataSource:[],targetKeys:[],listRender:function(e){return e.title}};var zu=n(2),Ju=n.n(zu),Zu=n(744),Gu=n.n(Zu);function Xu(e){return(Xu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}(e,t)||td(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ed(e){return function(e){if(Array.isArray(e))return nd(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||td(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function td(e,t){if(e){if("string"==typeof e)return nd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nd(e,t):void 0}}function nd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rd(e){return(rd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ad(){return(ad=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function od(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function id(e){var t=function(e,t){if("object"!==rd(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==rd(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===rd(t)?t:String(t)}function cd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ld(e,t){return(ld=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=dd(e);if(t){var a=dd(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ud(this,n)}}function ud(e,t){return!t||"object"!==rd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dd(e){return(dd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1884);var fd=p.Tree.TreeNode,pd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ld(e,t)}(o,e);var t,n,r,a=sd(o);function o(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).generate=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.dataSource,a=e.targetKeys,o=e.rowKey,i=e.rowTitle,c=e.rowChildren,l=e.showSearch,s=(e.showListSearch,e.listRender),u=n.treeSearchKey,f=[],p=[],h=[],m=[],y=[],b=function(e){return d.a.createElement("span",null,d.a.createElement("i",{className:"iconfont"}),e)},v=function e(n){return n.map((function(n){var r=n[c],a=n[o],p=n[i],v=od(n,[c,o,i].map(id));if(y.push({key:a,title:p}),"[object Array]"!==Object.prototype.toString.call(r)){f.push(a);var g=s(n);if(l&&u&&u.length>0&&p.indexOf(u)>-1){h.push(a);var k=g.indexOf(u);g=d.a.createElement("span",null,g.substr(0,k),d.a.createElement("span",{style:{color:"#f50"}},u),g.substr(k+u.length))}return m.push({key:a,title:g}),d.a.createElement(fd,ad({},v,{className:"node-item",key:a,title:b(g),disableCheckbox:t.props.disable,isLeaf:!0}))}return d.a.createElement(fd,ad({},v,{className:"node-item",key:a,title:b(s(n)),disableCheckbox:t.props.disable}),e(n.children))}))},g=v(r);return a.map((function(e){var t=y.find((function(t){return t.key==e}));t&&p.push(t)})),{treeNode:g,leafKeys:f,listData:p,expandedKeys:h,treeData:y}},t.onTreeCheck=function(e,n){var r,a;("object"===rd(n)?n.checked:n)&&t.props.onLoadData&&(r=[n.node],a=!1,function e(t){return t.forEach((function(t){if(t.props.children&&!a){if(0===t.props.children.length)return void(a=!0);e(t.props.children)}}))}(r),a)?t.setState({unLoadAlert:!0}):t.setState({treeCheckedKeys:e.filter((function(e){return t.state.leafKeys.indexOf(e)>-1})),unLoadAlert:!1})},t.onListCheck=function(e,n){var r=t.props.checkable?"listCheckedKeys":"listSelectedKeys";e?t.setState($u({},r,ed(new Set([].concat(ed(t.state[r]),ed(n))))),t.changeDisabled):t.setState($u({},r,t.state[r].filter((function(e){return n.indexOf(e)<0}))),t.changeDisabled)},t.onTreeSelect=function(e,n){if(t.props.checkable)return!1;t.setState({treeSelectedKeys:e})},t.onListSelect=function(e){var n=t.props.checkable?"listCheckedKeys":"listSelectedKeys";t.setState($u({},n,function(e,t){if("object"!==Xu(t)){var n=(e=JSON.parse(JSON.stringify(e))).indexOf(t);return-1==n?e.push(t):e.splice(n,1),e}console.error("参数错误,要求传入的元素是基本数据类型")}(t.state[n],e)),t.changeDisabled)},t.onTreeSearch=function(e){t.setState({treeSearchKey:e},(function(){if(t.props.onLoadData&&t.props.onTreeSearch)t.props.onTreeSearch(e);else{var n=t.generate(t.props,t.state),r=n.treeNode,a=n.listData,o=n.leafKeys,i=n.expandedKeys,c=a.map((function(e){return e.key}));t.setState({treeNode:r,listData:a,leafKeys:o,treeCheckedKeys:c,treeExpandedKeys:ed(new Set([].concat(ed(c),ed(i)))),treeAutoExpandParent:!0})}}))},t.onListSearch=function(e){t.setState({listSearchKey:e})},t.changeDisabled=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.props.targetKeys,n=t.state,r=n.listCheckedKeys,a=n.listSelectedKeys,o=t.props.checkable?r:a,i=o.map((function(t){return e.indexOf(t)})).sort((function(e,t){return e-t})),c=function(){if(i.length>1){for(var e=0;e<i.length-1;e++)if(i[e+1]-i[e]!=1)return!1}else if(0==i.length)return!1;return!0},l=c();l?(0===i[0]?t.setState({upDisabled:!0}):t.setState({upDisabled:!1}),i[i.length-1]===e.length-1?t.setState({downDisabled:!0}):t.setState({downDisabled:!1})):t.setState({upDisabled:!0,downDisabled:!0})},t.handleMove=function(e){var n=t.props,r=n.targetKeys,a=n.checkable,o=t.state,i=o.listCheckedKeys,c=o.listSelectedKeys,l=JSON.parse(JSON.stringify(r)),s=a?i:c,u=s.map((function(e){return r.indexOf(e)})).sort((function(e,t){return e-t})),d=r.slice(0,u[0]),f=s,p=r.slice(u[u.length-1]+1,r.length);switch(e){case"up":if(d.length>0){var h=d[d.length-1];d.splice(d.length-1,1),l=[].concat(ed(d),ed(f),[h],ed(p))}break;case"down":if(p.length>0){var m=p[0];p.splice(0,1),l=[].concat(ed(d),[m],ed(f),ed(p))}break;case"top":l=[].concat(ed(f),ed(d),ed(p));break;case"bottom":l=[].concat(ed(d),ed(p),ed(f))}t.props.onTargetKeysChange(l),t.getRightSelectEle(),t.changeDisabled(l)},t.getRightSelectEle=function(){var e=document.querySelector('li.u-transfer-list-content-item > label.is-checked > input[type="checkbox"]');setTimeout((function(){e&&e.focus()}),20)};var n=t.generate(e),r=n.treeNode,i=n.listData,c=n.leafKeys,l=n.treeData,s=[],u=[],f=i.map((function(e){return e.key}));return e.checkable?s=f:u=f,t.state={treeNode:r,treeData:l,listData:i,leafKeys:c,treeCheckedKeys:s,treeSelectedKeys:u,treeExpandedKeys:s,treeAutoExpandParent:!0,listCheckedKeys:[],listSelectedKeys:[],treeSearchKey:"",listSearchKey:"",unLoadAlert:!1,upDisabled:!0,downDisabled:!0,LangData:null,json:{}},t}return t=o,(n=[{key:"componentWillReceiveProps",value:function(e){var t,n=this,r=this.generate(e,this.state),a=r.treeNode,o=r.listData,i=r.leafKeys,c=r.expandedKeys,l=this.props.checkable?"treeCheckedKeys":"treeSelectedKeys",s=o.map((function(e){return e.key})),u=this.state,d=u.treeSearchKey,f=u.treeExpandedKeys,p=!!(e.showSearch&&d&&d.length>0);this.setState(($u(t={treeNode:a,listData:o,leafKeys:i},l,s),$u(t,"treeExpandedKeys",p?ed(new Set([l].concat(ed(c)))):f),$u(t,"treeAutoExpandParent",p),t),(function(){return n.changeDisabled(e.targetKeys)}))}},{key:"componentWillMount",value:function(){var e=this;Object(f.getMultiLang)({moduleId:"container_transfer",callback:function(t,n,r){e.setState({json:t,LangData:r},(function(){}))}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,r=(t.treeLoading,t.titles),a=t.showSearch,o=t.showListSearch,i=t.onLoadData,c=t.operations,l=t.searchPlaceholder,s=t.notFoundContent,u=t.showMoveBtn,h=(t.style,t.checkable),m=t.disable;r=r||[this.state.json["container-transfer-0001"],this.state.json["container-transfer-0002"]],s=s||this.state.json["container-transfer-0003"],l=l||this.state.json["container-transfer-0004"];var y=Qu(r,2),b=y[0],v=y[1],g=this.state,k=g.treeNode,S=g.treeData,O=g.listData,w=g.leafKeys,C=g.treeCheckedKeys,E=g.treeSelectedKeys,j=g.listCheckedKeys,x=g.listSelectedKeys,P=g.treeExpandedKeys,_=g.treeAutoExpandParent,N=g.listSearchKey,T=g.unLoadAlert,D=g.upDisabled,A=g.downDisabled,I=h?C:E,M=h?w.length:S.length,R=h?j:x,B=W()($u({"transfer-wrap":!0},n,!!n)),K=W()({"u-transfer-list-body":!0,"u-transfer-list-body-with-search":a}),F=W()({"u-transfer-list-body":!0,"u-transfer-list-body-with-search":o}),L=d.a.createElement(p.Icon,{type:"uf-reduce-s-o"}),H=d.a.createElement(p.Icon,{type:"uf-add-s-o"}),q={checkable:h,multiple:!h,showLine:!1,checkedKeys:C,selectedKeys:E,onSelect:this.onTreeSelect,onCheck:this.onTreeCheck,expandedKeys:P,autoExpandParent:_,onExpand:function(t){e.setState({treeAutoExpandParent:!1,treeExpandedKeys:t})},loadData:i,openIcon:L,closeIcon:H},V={checked:C.length>0&&C.length===w.length,indeterminate:C.length>0&&C.length<w.length,onChange:function(t){var n=t?w:[];e.onTreeCheck(n,t)}},U=h?"listCheckedKeys":"listSelectedKeys",Y={checked:this.state[U].length>0&&this.state[U].length===O.length,indeterminate:this.state[U].length>0&&this.state[U].length<O.length,onChange:function(t){return e.onListCheck(t,O.map((function(e){return e.key})))}},z={className:"btn-primary",size:"sm",disabled:0===Gu()(I,O.map((function(e){return e.key}))).length&&0===Gu()(O.map((function(e){return e.key})),I).length,onClick:function(){e.setState({unLoadAlert:!1}),e.props.onTargetKeysChange&&e.props.onTargetKeysChange(I)}},J={className:"btn-primary",size:"sm",disabled:0===R.length,onClick:function(){e.setState({listCheckedKeys:[],listSelectedKeys:[],unLoadAlert:!1});var t=e.state.listData.map((function(e){return e.key})).filter((function(e){return R.indexOf(e)<0}));e.props.onTargetKeysChange&&e.props.onTargetKeysChange(t)}},Z={className:"btn-primary",size:"sm",disabled:m||!1,onClick:function(){e.setState({unLoadAlert:!1}),e.props.onTargetKeysChange&&e.props.onTargetKeysChange(w,"allToRight")}},G={className:"btn-primary",size:"sm",disabled:0===this.state.listData.length,onClick:function(){e.setState({listCheckedKeys:[],listSelectedKeys:[],unLoadAlert:!1}),e.props.onTargetKeysChange&&e.props.onTargetKeysChange([],"allToLeft")}};return d.a.createElement("div",{className:B},d.a.createElement("div",{className:"u-transfer",fieldid:Object(f.getSysFieldid)("transfer_area")},d.a.createElement("div",{className:"u-transfer-list u-transfer-list-left",fieldid:Object(f.getSysFieldid)("left_area")},d.a.createElement("div",{className:"u-transfer-list-header"},h&&d.a.createElement(p.Checkbox,ad({disabled:m},V)),d.a.createElement("span",{className:"u-transfer-list-header-selected"},"".concat(I.length>0?"".concat(I.length,"/"):"").concat(M," "),this.state.json["container-transfer-0005"]),d.a.createElement("span",{className:"u-transfer-list-header-title"},b)),d.a.createElement("div",{className:K},a?d.a.createElement("div",{className:"u-transfer-list-body-search-wrapper"},d.a.createElement(p.Input,{type:"search",placeholder:l,onChange:this.onTreeSearch,value:this.state.treeSearchKey})):null,T?d.a.createElement("div",{className:"tree-transfer-panel-body-alert"},d.a.createElement(p.Alert,{dark:!0,onDismiss:function(){return e.setState({unLoadAlert:!1})},closeLabel:"关闭"},"无法选中，原因：子节点未完全加载")):null,d.a.createElement("div",{className:"u-transfer-list-content"},d.a.createElement(p.Tree,q,k)),0===this.props.dataSource.length&&d.a.createElement("div",{style:{display:"block"},className:"u-transfer-list-body-not-found"},s))),d.a.createElement("div",{className:"u-transfer-operation"},d.a.createElement(p.Tooltip,{placement:"top",overlay:this.state.json["container-transfer-right"]||"ssss",delayHide:1,delayShow:1e3},d.a.createElement(p.Button,z,d.a.createElement("span",null,c[0],d.a.createElement(p.Icon,{className:"uf uf-arrow-right"})))),d.a.createElement(p.Tooltip,{placement:"top",overlay:this.state.json["container-transfer-right-all"],delayHide:1,delayShow:1e3},d.a.createElement(p.Button,Z,d.a.createElement("span",null,d.a.createElement(p.Icon,{className:"uf uf-2arrow-right"})))),d.a.createElement(p.Tooltip,{placement:"top",overlay:this.state.json["container-transfer-left-all"],delayHide:1,delayShow:1e3},d.a.createElement(p.Button,G,d.a.createElement("span",null,d.a.createElement(p.Icon,{className:"uf uf-2arrow-left"})))),d.a.createElement(p.Tooltip,{placement:"top",overlay:this.state.json["container-transfer-left"],delayHide:1,delayShow:1e3},d.a.createElement(p.Button,J,d.a.createElement("span",null,d.a.createElement(p.Icon,{className:"uf uf-arrow-left"}),c[1])))),d.a.createElement("div",{className:"u-transfer-list u-transfer-list-right",fieldid:Object(f.getSysFieldid)("right_area")},d.a.createElement("div",{className:"u-transfer-list-header"},d.a.createElement(p.Checkbox,Y),d.a.createElement("span",{className:"u-transfer-list-header-select"},"".concat(R.length>0?"".concat(R.length,"/"):"").concat(O.length," "),this.state.json["container-transfer-0005"]),d.a.createElement("span",{className:"u-transfer-list-header-title"},v)),d.a.createElement("div",{className:F},o?d.a.createElement("div",{className:"u-transfer-list-body-search-wrapper"},d.a.createElement(p.Input,{type:"search",placeholder:l,onChange:this.onListSearch,value:this.state.listSearchKey})):null,d.a.createElement("ul",{className:"u-transfer-list-content"},O.map((function(t){return d.a.createElement("li",{className:-1==x.indexOf(t.key)?"u-transfer-list-content-item":"u-transfer-list-content-item u-transfer-list-content-item-selected",key:t.key,title:t.title,onClick:function(){return e.onListSelect(t.key)}},h&&d.a.createElement(p.Checkbox,{checked:j.indexOf(t.key)>-1,onChange:function(n){return e.onListCheck(n,[t.key])}}),a&&N&&N.length>0&&t.title.indexOf(N)>-1?d.a.createElement("span",{style:{verticalAlign:"top"}},t.title.substr(0,t.title.indexOf(N)),d.a.createElement("span",{style:{color:"#f50"}},N),t.title.substr(t.title.indexOf(N)+N.length)):d.a.createElement("span",null,t.title))})),0===O.length&&d.a.createElement("div",{style:{display:"block"},className:"u-transfer-list-body-not-found"},s))))),u&&d.a.createElement("div",{className:"move-btns"},D?d.a.createElement(p.Button,{className:"move-btn move-up",disabled:D,onClick:function(){return e.handleMove("up")}},d.a.createElement(p.Icon,{type:"uf uf-arrow-up"})):d.a.createElement(p.Tooltip,{placement:"top",overlay:this.state.json["container-transfer-up"],delayHide:1,delayShow:1e3},d.a.createElement(p.Button,{className:"move-btn move-up",disabled:D,onClick:function(){return e.handleMove("up")}},d.a.createElement(p.Icon,{type:"uf uf-arrow-up"}))),A?d.a.createElement(p.Button,{className:"move-btn move-down",disabled:A,onClick:function(){return e.handleMove("down")}},d.a.createElement(p.Icon,{type:"uf uf-arrow-down"})):d.a.createElement(p.Tooltip,{placement:"top",overlay:this.state.json["container-transfer-down"],delayHide:1,delayShow:1e3},d.a.createElement(p.Button,{className:"move-btn move-down",disabled:A,onClick:function(){return e.handleMove("down")}},d.a.createElement(p.Icon,{type:"uf uf-arrow-down"}))),D?d.a.createElement(p.Button,{className:"move-btn move-top",disabled:D,onClick:function(){return e.handleMove("top")}},d.a.createElement(p.Icon,{type:"uf uf-2arrow-up"})):d.a.createElement(p.Tooltip,{placement:"top",overlay:this.state.json["container-transfer-up-top"],delayHide:1,delayShow:1e3},d.a.createElement(p.Button,{className:"move-btn move-top",disabled:D,onClick:function(){return e.handleMove("top")}},d.a.createElement(p.Icon,{type:"uf uf-2arrow-up"}))),A?d.a.createElement(p.Button,{className:"move-btn move-bottom",disabled:A,onClick:function(){return e.handleMove("bottom")}},d.a.createElement(p.Icon,{type:"uf uf-2arrow-down"})):d.a.createElement(p.Tooltip,{placement:"top",overlay:this.state.json["container-transfer-down-bottom"],delayHide:1,delayShow:1e3},d.a.createElement(p.Button,{className:"move-btn move-bottom",disabled:A,onClick:function(){return e.handleMove("bottom")}},d.a.createElement(p.Icon,{type:"uf uf-2arrow-down"})))),this.props.children)}}])&&cd(t.prototype,n),r&&cd(t,r),o}(u.Component);function hd(e){return(hd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function md(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function yd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vd(e,t){return(vd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Sd(e);if(t){var a=Sd(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return kd(this,n)}}function kd(e,t){return!t||"object"!==hd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Sd(e){return(Sd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}pd.propTypes={style:Ju.a.object,showSearch:Ju.a.bool,showListSearch:Ju.a.bool,showMoveBtn:Ju.a.bool,checkable:Ju.a.bool,treeLoading:Ju.a.bool,className:Ju.a.string,rowKey:Ju.a.string,rowTitle:Ju.a.string,rowChildren:Ju.a.string,operations:Ju.a.array,dataSource:Ju.a.array,targetKeys:Ju.a.array,listRender:Ju.a.func,onTargetKeysChange:Ju.a.func,onLoadData:Ju.a.func,onTreeSearch:Ju.a.func,disable:Ju.a.bool},pd.defaultProps={showSearch:!0,showListSearch:!1,showMoveBtn:!1,checkable:!0,disable:!1,operations:["",""],rowKey:"key",rowTitle:"title",rowChildren:"children",dataSource:[],targetKeys:[],treeLoading:!1,listRender:function(e){return e.title}};var Od=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vd(e,t)}(o,e);var t,n,r,a=gd(o);function o(){return yd(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(){var e=this.props,t=e.treeType,n=md(e,["treeType"]);return t?d.a.createElement(pd,n):d.a.createElement(Yu,n)}}])&&bd(t.prototype,n),r&&bd(t,r),o}(u.Component),wd=n(400),Cd=n(724),Ed=n(725),jd=n(56),xd=n.n(jd),Pd=Object(f.getLangCode)()||"simpchn";function _d(e,t,n){var r=this,a=n?"../../../../".concat(n,"/public/lang/"):"../../../public/lang/";e&&xd.a.get("".concat(a,"standard/").concat(Pd,"/").concat(e,".json")).then((function(n){n&&Nd.call(r,e,n.data,t)})).catch((function(n){xd.a.get("".concat(a,"industry/").concat(Pd,"/").concat(e,".json")).then((function(n){n&&Nd.call(r,e,n.data,t)})).catch((function(n){xd.a.get("".concat(a,"customer/").concat(Pd,"/").concat(e,".json")).then((function(n){n&&Nd.call(r,e,n.data,t)})).catch((function(e){t&&t(e.data,!1,{})}))}))}))}function Nd(e,t,n){this.state.intl&&(this.state.intl={}),this.state.intl[e]||(this.state.intl[e]={}),this.state.intl[e][Pd]=t,this.setState({intl:this.state.intl},(function(){n&&n(t,!0,{})}))}function Td(e){var t=this;if(e)return{get:function(n,r){if(t.state.intl[e]&&t.state.intl[e][Pd]){var a=t.state.intl[e][Pd][n];if(Object(f.isObj)(r))for(var o in r)if(a.includes("{".concat(o,"}"))){var i=new RegExp("{\\s*"+o+"\\s*}","g");a=a.replace(i,r[o])}return a}}}}function Dd(e){return(Dd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ad(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Id(e,t){return(Id=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Md(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Kd(e);if(t){var a=Kd(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Rd(this,n)}}function Rd(e,t){return!t||"object"!==Dd(t)&&"function"!=typeof t?Bd(e):t}function Bd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kd(e){return(Kd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Fd=p.Tree.TreeNode;n(1887);var Ld=[],Hd=[],qd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Id(e,t)}(o,e);var t,n,r,a=Md(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).getParentKey=function(e,n){for(var r,a=0;a<n.length;a++){var o=n[a];o.children&&(o.children.some((function(t){return t.inputSig===e}))?r=o.inputSig:t.getParentKey(e,o.children)&&(r=t.getParentKey(e,o.children)))}return r},t.generateList=function(e){for(var n=t.state.isAsync,r=0;r<e.length;r++){var a=e[r],o=a.inputSig,i=a.displayName,c=a.refcode,l=a.refname;n&&(i=l+" "+c,o=c),Ld.push({displayName:i,inputSig:o}),a.children&&t.generateList(a.children)}},t.handleExpand=function(e){t.setState({expandedKeys:e,autoExpandParent:!1})},t.handleInput=function(e){var n=Bd(t),r=t.state,a=r.treeData,o=r.isAsync,i=[];Ld.forEach((function(t){var r=t.displayName,c=t.inputSig;e&&r.indexOf(e)>-1&&(o?i.push(c):i.push(n.getParentKey(c,a)))}));var c=[];i.forEach((function(e){e&&-1===c.indexOf(e)&&c.push(e)})),t.setState({expandedKeys:c,searchValue:e,autoExpandParent:!0})},t.handleDoubleClick=function(e){e.includes("$$formulaTreeRootFlag$$")||t.props.setName(e)},t.handleSelect=function(e,n){t.props.setExplain(n.node.props.explain)},t.loadData=function(e){var n=t.props,r=n.metaParam,a=n.metaUrl,o=r.queryCondition,i=void 0===o?{}:o,c=e.props,l=void 0===c?{}:c,s=l.pos;return new Promise((function(e){Hd.includes(s)?e():Object(f.ajax)({url:a,loading:!1,data:{queryCondition:{mdclass:i.mdclass,pid:l.refpk}},success:function(n){var r=t.state.treeData,a=s.split("-");Hd.push(s);!function e(t,r){(r.shift(),r.length)&&(t[r[0]].children?e(t[r[0]].children,r):t[r[0]].children=n.data.rows)}(r,a),t.setState(r),t.generateList(r),e()},error:function(){Object(f.toast)({color:"danger",content:"".concat(t.state.json.formula0010)}),e()}})}))},t.createAsyncTree=function(){var e=t.state,n=e.searchValue,r=e.expandedKeys,a=e.autoExpandParent,o=e.treeData;return d.a.createElement(p.Tree,{onDoubleClick:t.handleDoubleClick,onSelect:t.handleSelect,onExpand:t.handleExpand,expandedKeys:r,autoExpandParent:a,loadData:t.loadData},function e(t){return t.map((function(t){var r=t.refcode,a=t.refname,o=t.refpk,i=t.children,c=t.isleaf,l=a+" "+r,s=l.search(n),u=l.substr(0,s),f=l.substr(s+n.length),p=s>-1?d.a.createElement("span",null,u,d.a.createElement("span",{className:"u-tree-searchable-filter"},n),f):d.a.createElement("span",null,l);return Array.isArray(i)&&i[0]?d.a.createElement(Fd,{key:r,title:p,explain:a,isLeaf:c,refpk:o},e(i)):d.a.createElement(Fd,{key:r,title:p,explain:a,isLeaf:c,refpk:o})}))}(o))},t.createSyncTree=function(){var e=t.state,n=e.searchValue,r=e.expandedKeys,a=e.autoExpandParent,o=e.treeData,i=!0,c="";return d.a.createElement(p.Tree,{onDoubleClick:t.handleDoubleClick,onSelect:t.handleSelect,onExpand:t.handleExpand,expandedKeys:r,autoExpandParent:a},function e(t){return t.map((function(t,r){var a=t.displayName,o=t.inputSig,l=t.children,s=t.hintMsg,u=a.search(n),f=a.substr(0,u),p=a.substr(u+n.length),h=u>-1?d.a.createElement("span",null,f,d.a.createElement("span",{className:"u-tree-searchable-filter"},n),p):d.a.createElement("span",null,a);return i&&0===r?(c="$$formulaTreeRootFlag$$",i=!1):c="",Array.isArray(l)&&l[0]?d.a.createElement(Fd,{key:o+c,title:h,explain:s},e(l)):d.a.createElement(Fd,{key:o,title:h,explain:s})}))}(o))},t._createAll=function(){var e=t.state,n=e.json,r=e.isAsync,a=e.searchValue;return d.a.createElement("div",{className:"search-tree-area formulaeditor-search-tree-area"},d.a.createElement(p.Input,{style:{width:"100%"},placeholder:n.formula0017,value:a,onChange:t.handleInput}),d.a.createElement("div",{className:"tree-content"},r?t.createAsyncTree():t.createSyncTree()))},t.state={expandedKeys:[],treeData:[],isAsync:!1,searchValue:"",autoExpandParent:!0,json:{}},t}return t=o,(n=[{key:"componentWillMount",value:function(){var e=this,t=this.props,n=t.metaParam,r=t.metaUrl;Object(f.getMultiLang)({moduleId:"container_formulaEditor",callback:function(t,a,o){e.setState({json:t,LangData:o},(function(){Object(f.ajax)({url:Object(f.isString)(r)?r:"/nccloud/formula/web/formulaentitytree.do",loading:!1,data:Object(f.isObj)(n)?n:{},success:function(t){if(r&&"/nccloud/riart/print/mdtree.do"===r){var n=t.data.rows||[];e.setState({treeData:n,isAsync:!0}),e.generateList(n)}else e.setState({treeData:[t.data],isAsync:!1}),e.generateList([t.data])},error:function(){Object(f.toast)({color:"danger",content:"".concat(e.state.json.formula0010)})}})}))}})}},{key:"render",value:function(){return d.a.createElement("div",null,this._createAll())}}])&&Ad(t.prototype,n),r&&Ad(t,r),o}(u.Component);function Vd(e){return(Vd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ud(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wd(e,t){return(Wd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Jd(e);if(t){var a=Jd(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return zd(this,n)}}function zd(e,t){return!t||"object"!==Vd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jd(e){return(Jd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(1888);var Zd=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wd(e,t)}(o,e);var t,n,r,a=Yd(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).handleRefresh=function(){var e=t.state.cacheData;e&&t.setState({surfaceData:e,inputValue:""},(function(){t._getFieldData(e[0].displayName)}))},t.handleCheckbox=function(){t.setState({checked:!t.state.checked})},t.handleInput=function(e){var n=t.state.cacheData;if(n){var r=n.filter((function(t){if(t.displayName.includes(e))return!0}));t.setState({surfaceData:r,inputValue:e},(function(){r.length>0?t._getFieldData(r[0].displayName):t.setState({fieldData:[]})}))}},t._getFieldData=function(e){var n=t.state.json;Object(f.ajax)({url:"/nccloud/formula/web/formulatabfield.do",loading:!1,data:{tablename:e},success:function(e){t.setState({fieldData:e.data})},error:function(){Object(f.toast)({color:"danger",content:"".concat(n.formula0011)})}})},t.handleSurfaceList=function(e){var n=t.state.surfaceData,r=t.props.setExplain,a=e.target.dataset,o=a.explain,i=a.title;n.length&&i&&(r(o),t._getFieldData(i))},t.handleFieldList=function(e){t.props.setExplain(e.target.dataset.explain)},t.handleDbList=function(e){if(t.state.surfaceData.length){var n=e.target.dataset.name;t.props.setName(n)}},t._createAll=function(){var e=t.state,n=e.checked,r=e.surfaceData,a=e.fieldData,o=e.inputValue,i=e.json;return d.a.createElement(p.Row,null,d.a.createElement(p.Col,{md:6,xs:6,sm:6},d.a.createElement("div",null,d.a.createElement("div",{className:"surface-left-title"},i.formula0018),d.a.createElement("ul",{className:"surface-left",onClick:t.handleSurfaceList},t._createContent(r)),d.a.createElement("div",{className:"input-area"},d.a.createElement(p.Checkbox,{className:"checkbox",colors:"info",checked:n,onChange:t.handleCheckbox},i.formula001),d.a.createElement(p.Input,{value:o,disabled:!n,style:{width:"100%",display:"block"},placeholder:"Search",onChange:t.handleInput})),d.a.createElement(p.Button,{disabled:!n,style:{width:"100%",margin:0,display:"block",background:"#1e88e5"},onClick:t.handleRefresh},i.formula002))),d.a.createElement(p.Col,{md:6,xs:6,sm:6},d.a.createElement("div",{className:"surface-right-title"},i.formula0019),d.a.createElement("ul",{className:"surface-right",onClick:t.handleFieldList},t._createContent(a))))},t.state={checked:!1,surfaceData:[],fieldData:[],inputValue:"",json:{}},t}return t=o,(n=[{key:"componentWillMount",value:function(){var e=this,t=this.props.surfaceUrl;Object(f.getMultiLang)({moduleId:"container_formulaEditor",callback:function(t,n,r){e.setState({json:t,LangData:r})}}),Object(f.ajax)({url:Object(f.isString)(t)?t:"/nccloud/formula/web/formulatab.do",loading:!1,success:function(t){e.setState({surfaceData:t.data,cacheData:t.data})},error:function(e){Object(f.toast)({color:"danger",content:e.message})}})}},{key:"_createContent",value:function(e){var t=this;return e.map((function(e,n){var r=e.displayName,a=e.inputSig,o=e.hintMsg;return d.a.createElement("li",{key:n,"data-name":a,"data-explain":o,"data-title":r,onDoubleClick:t.handleDbList},r)}))}},{key:"render",value:function(){return d.a.createElement("div",{className:"surface-area"},this._createAll())}}])&&Ud(t.prototype,n),r&&Ud(t,r),o}(u.Component);function Gd(e){return(Gd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xd(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function Qd(){return(Qd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ef(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$d(Object(n),!0).forEach((function(t){tf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function tf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rf(e,t){return(rf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function af(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=cf(e);if(t){var a=cf(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return of(this,n)}}function of(e,t){return!t||"object"!==Gd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cf(e){return(cf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var lf=p.Tabs.TabPane,sf=p.Modal.Header,uf=p.Modal.Title,df=p.Modal.Body;n(1886);var ff=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rf(e,t)}(c,e);var t,n,r,a,o,i=af(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this,e)).getControlBtnsConfig=function(){var e=t.state.json;return[{key:"ok",name:e.formula003,onClick:t.handleOk},{key:"cancel",name:e.formula004,onClick:t.handleCancel},{key:"validate",name:e.formula005,onClick:t.handleValidate},{key:"checkAll",name:e.formula006,onClick:t.handleCheckAll},{key:"clear",name:e.formula007,onClick:t.handleClear}]},t.handleTextAreaChange=function(e){t.setState({showData:e})},t.handelSetName=function(e){var n=e.target.dataset.name;t.handlePushStr(n)},t.handleClickTabItem=function(e){var n=e.target.dataset.explain;t.setExplain(n)},t.handleClear=function(){t.setState({showData:""}),t.textArea.querySelectorAll("textarea")[0].focus()},t.handleCheckAll=function(){t.selected=!0,t.textArea.querySelectorAll("textarea")[0].select()},t.handleValidate=function(){var e=t.state,n=e.showData,r=e.json,a=t.props,o=a.validateUrl,i=a.validateData,c=void 0===i?{}:i;Object(f.ajax)({url:Object(f.isString)(o)?o:"/nccloud/formula/web/formulaverfify.do",loading:!1,data:ef({formulastr:n},c),success:function(e){"Y"===e.data.status?Object(f.toast)({color:"success",content:"".concat(r.formula0013)}):"N"===e.data.status&&Object(f.toast)({color:"danger",content:e.data.error?e.data.error:"".concat(r.formula0014)})},error:function(){Object(f.toast)({color:"danger",content:"".concat(r.formula0015)})}})},t.handleCancel=function(){var e=t.props.onCancel;e&&Object(f.isFunction)(e)&&e()},t.setShow=function(e){t.setState({isShow:e})},t.setExplain=function(e){t.setState({explainData:e})},t.handleOk=function(){var e=t.state,n=e.showData,r=e.json,a=t.props,o=a.onOk,i=a.isValidateOnOK,c=void 0===i||i,l=a.validateUrl,s=a.validateData,u=void 0===s?{}:s;c?Object(f.ajax)({url:Object(f.isString)(l)?l:"/nccloud/formula/web/formulaverfify.do",loading:!1,data:ef({formulastr:n},u),success:function(e){"Y"===e.data.status?o&&Object(f.isFunction)(o)&&o(n):"N"===e.data.status&&Object(f.toast)({color:"danger",content:e.data.error?e.data.error:"".concat(r.formula0014)})},error:function(){Object(f.toast)({color:"danger",content:"".concat(r.formula0015)})}}):o&&Object(f.isFunction)(o)&&o(n)},t.handlePushStr=function(e){var n=t.textArea.querySelectorAll("textarea")[0];if(t.selected)t.selected=!1,t.setState({showData:e},(function(){t.setCursorPosition(n,e.length)}));else{var r=n.value.length,a=n.value,o=n.selectionStart,i=(a.substr(0,o)+e).length,c=a.substr(0,o)+e+a.substring(o,r);t.setState({showData:c},(function(){t.setCursorPosition(n,i)}))}},t.setCursorPosition=function(e,t){var n=e.value.length;n<t||setTimeout((function(){if(e.focus(),e.setSelectionRange)e.setSelectionRange(t,t);else{var r=e.createTextRange();r.moveStart("character",-n),r.moveEnd("character",-n),r.moveStart("character",t),r.moveEnd("character",0),r.select()}}),10)},t._createWorkStation=function(){var e=t.state,n=e.showData,r=e.optBtnsConfig,a=e.computedBtnconfig,o=t.props.noControlBtns;return Array.isArray(o)&&o.length>0&&o.forEach((function(e){t.getControlBtnsConfig().filter((function(t){return t.key!==e}))})),d.a.createElement(p.Row,null,d.a.createElement(p.Col,{md:8,xs:8,sm:8},d.a.createElement("div",{className:"editor-submit-area"},d.a.createElement(p.TextArea,{ref:function(e){t.textArea=Object(q.findDOMNode)(e)},selfRangControl:!1,onBlur:function(){t.selected&&t.textArea.querySelectorAll("textarea")[0].select()},value:n,className:"editor-show-area",onChange:t.handleTextAreaChange,onEnter:function(){},fieldid:"editor"}),d.a.createElement("div",{className:"editor-control-btns"},t._createControlBtns(t.getControlBtnsConfig())))),d.a.createElement(p.Col,{md:4,xs:4,sm:4},d.a.createElement("div",{className:"centerWrap"},d.a.createElement("div",{className:"editor-opt-btns"},t._createOptBtns(r)),d.a.createElement("div",{className:"editor-comp-btns"},t._createOptBtns(a)))))},t._createTabs=function(){var e=t.props,n=e.formulaConfig,r=void 0===n?[]:n,a=e.attrConfig,o=void 0===a?[]:a,i=e.noShowFormula,c=e.noShowAttr,l=e.defaultFormulaKey,s=e.tabActiveKey,u=e.defaultAttrKey,h=e.onTabChange,m=t.state.json,y=Object(f.isString)(l)?{defaultActiveKey:l}:{},b=Object(f.isString)(u)?{defaultActiveKey:u}:{},v=Object(f.isString)(s)?{activeKey:s}:{},g=t.state.formulaData,k=[];m.formula008&&(k=[{tab:"".concat(m.formula008),key:"".concat(m.formula008),TabPaneContent:qd},{tab:"".concat(m.formula009),key:"".concat(m.formula009),TabPaneContent:Zd}]);var S=g.map((function(e){return{tab:e.typeName,key:e.typeName,TabPaneContent:t._createFormulaTabPane(e.name2FormItemMap)}}));Array.isArray(o)&&(k=k.concat(o)),Array.isArray(c)&&c.length>0&&(k=1===c.length&&"all"===c[0]?[]:1===c.length&&"allBuiltIn"===c[0]?o:k.filter((function(e){var t=!0;return c.forEach((function(n){(n===e.key||e.key&&e.key.includes(n))&&(t=!1)})),t}))),Array.isArray(i)&&i.length>0&&(1===i.length&&"all"===i[0]?(S=[],r=[]):1===i.length&&"allBuiltIn"===i[0]?S=[]:(S=S.filter((function(e){var t=!0;return i.forEach((function(n){n===e.key&&(t=!1)})),t})),r=r.filter((function(e){var t=!0;return i.forEach((function(n){n===e.key&&(t=!1)})),t}))));var O=t._createFormulaTabPanes(S);return d.a.createElement("div",{className:"detailInfoWrap",style:{height:t.state.footerHeight||359,overflow:"auto"}},d.a.createElement(p.Row,null,d.a.createElement(p.Col,{md:6,xs:6,sm:6},d.a.createElement("div",{className:"tabs-left"},d.a.createElement(p.Tabs,Qd({tabBarStyle:"primary"},y,{onChange:function(e){Object(f.isFunction)(h)&&h(e)}}),t._createFormulaAllTabPanes(O,r)))),d.a.createElement(p.Col,{md:6,xs:6,sm:6},d.a.createElement("div",{className:"tabs-right"},d.a.createElement(p.Tabs,Qd({tabBarStyle:"primary"},b,{onChange:function(e){Object(f.isFunction)(h)&&h(e)}},v),t._createAttrTabPanes(k))))))},t._createFormulaTabPane=function(e){return d.a.createElement("ul",{className:"tab-content",onClick:t.handleClickTabItem,onDoubleClick:t.handelSetName},t._createTabPaneContent(e))},t._createFormulaTabPanes=function(e){return e.map((function(e){var t=e.TabPaneContent,n=e.tab,r=e.key;return d.a.createElement(lf,{tab:n,style:{overflow:"auto",height:"283px"},key:r},t)}))},t._createFormulaAllTabPanes=function(e,n){return e.concat(n.map((function(e){var n=e.TabPaneContent,r=e.tab,a=e.params,o=void 0===a?{}:a,i=e.key;return d.a.createElement(lf,{tab:r,style:{overflow:"auto",height:"283px"},key:i},d.a.createElement(n,Qd({setExplain:t.setExplain,setName:t.handlePushStr},o)))})))},t._createAttrTabPanes=function(e){var n=t.props,r=n.metaParam,a=n.metaUrl,o=n.surfaceUrl;return e.map((function(e){var n=e.TabPaneContent,i=e.tab,c=e.params,l=void 0===c?{}:c,s=e.key;return d.a.createElement(lf,{tab:i,style:{overflow:"auto",height:"283px"},key:s},d.a.createElement(n,Qd({setExplain:t.setExplain,setName:t.handlePushStr,metaParam:r,metaUrl:a,surfaceUrl:o},l)))}))},t._createTabPaneContent=function(e){return e.map((function(e){var t=e.inputSig,n=e.displayName,r=e.hintMsg;return d.a.createElement("li",{className:"tab-content-item","data-name":t,"data-explain":r},n)}))},t._createOptBtns=function(e){return e.map((function(e,n){var r=e.name;return d.a.createElement(p.Button,{onClick:t.handelSetName,key:n,"data-name":r,className:"opt-btn"},r)}))},t._createControlBtns=function(e){return e.map((function(e,t){var n=e.name,r=e.onClick,a=e.key;return d.a.createElement(p.Button,{key:t,onClick:r,className:"opt-btn",fieldid:a},n)}))},t.selected=!1,t.state={formulaData:[],showData:"",isShow:!1,explainData:"",optBtnsConfig:[{name:7},{name:8},{name:9},{name:0},{name:4},{name:5},{name:6},{name:"."},{name:1},{name:2},{name:3},{name:"00"}],computedBtnconfig:[{name:"+"},{name:"-"},{name:"*"},{name:"/"},{name:"->"},{name:"=="},{name:"("},{name:")"},{name:"<"},{name:">"},{name:"<="},{name:">="}],json:{}},t}return t=c,(n=[{key:"componentWillMount",value:(a=regeneratorRuntime.mark((function e(){var t,n,r,a,o,i,c,l,s,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e,t,n){u.setState({json:e,LangData:n})},e.next=3,Object(f.getMultiLang)({moduleId:"container_formulaEditor",callback:t});case 3:n=this.props,r=n.value,a=void 0===r?"":r,o=n.show,i=void 0!==o&&o,c=n.noShowFormula,l=n.formulaUrl,s=this.state.json,this.setShow(i),this.handleTextAreaChange(a),Array.isArray(c)&&1===c.length&&"all"===c[0]||Object(f.ajax)({url:Object(f.isString)(l)?l:"/nccloud/formula/web/formulatype.do",loading:!1,success:function(e){u.setState({formulaData:e.data})},error:function(){Object(f.toast)({color:"danger",content:"".concat(s.formula0012)})}});case 8:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=a.apply(e,t);function i(e){Xd(o,n,r,i,c,"next",e)}function c(e){Xd(o,n,r,i,c,"throw",e)}i(void 0)}))},function(){return o.apply(this,arguments)})},{key:"componentWillReceiveProps",value:function(e){var t=this,n=e.value,r=void 0===n?"":n,a=e.show,o=void 0!==a&&a,i=e.noShowFormula,c=e.formulaUrl,l=this.props.formulaUrl,s=this.state.json;this.handleTextAreaChange(r),this.selected&&(this.selected=!1),this.setShow(o),c!==l&&(Array.isArray(i)&&1===i.length&&"all"===i[0]||Object(f.ajax)({url:Object(f.isString)(c)?c:"/nccloud/formula/web/formulatype.do",loading:!1,success:function(e){t.setState({formulaData:e.data})},error:function(){Object(f.toast)({color:"danger",content:"".concat(s.formula0012)})}}))}},{key:"componentDidUpdate",value:function(e,t){var n=t.isShow,r=this.state.isShow;if(this.textArea&&r!==n){var a=this.textArea.querySelectorAll("textarea")[0];a&&this.setCursorPosition(a,a.value.length)}}},{key:"render",value:function(){var e=this,t=this.state,n=t.isShow,r=t.json,a=t.explainData,o=this.props,i=o.onHide,c=void 0===i?function(){}:i,l=o.className,s=void 0===l?"":l,u=o.message,f=void 0===u?"":u,h=o.zIndex;return d.a.createElement("div",null,d.a.createElement(p.Modal,{className:"".concat(s," FormulaEditorWrap"),size:"lg",show:n&&!this.exiting,backdrop:"static",onHide:c,onExit:function(){e.exiting=!0},onExited:function(){setTimeout((function(){e.exiting=!1}),0)},onEntered:function(t){var n=t.querySelector(".u-modal-body");if(n&&n.offsetHeight>0){var r=n.offsetHeight-226;e.setState({footerHeight:r})}},zIndex:h,fieldid:"formulaEditor"},d.a.createElement(sf,{closeButton:!0},d.a.createElement(uf,{fieldid:"".concat(r.formula0016)},d.a.createElement("span",null,r.formula0016," "),d.a.createElement("span",{style:{marginLeft:"20px"}},f))),d.a.createElement(df,null,d.a.createElement("div",{className:"editor-containers"},this._createWorkStation(),this._createTabs()),d.a.createElement("div",{className:"explain-area"},a))))}}])&&nf(t.prototype,n),r&&nf(t,r),c}(u.Component);ff.defaultProps={formulaConfig:[],attrConfig:[],onOk:function(){}},ff.propTypes={formulaConfig:Ju.a.array,attrConfig:Ju.a.array,metaParam:Ju.a.object,metaUrl:Ju.a.string,surfaceUrl:Ju.a.string,formulaUrl:Ju.a.string,validateUrl:Ju.a.string,onOk:Ju.a.func,value:Ju.a.string,show:Ju.a.bool,noShowFormula:Ju.a.array,noShowAttr:Ju.a.array,onHide:Ju.a.func,noControlBtns:Ju.a.array,isValidateOnOK:Ju.a.bool,defaultAttrKey:Ju.a.string,defaultFormulaKey:Ju.a.string,tabActiveKey:Ju.a.string}},19:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(1),n(6),n(9);var r={refer:function(e){var t=e&&document.querySelector(e),n=t&&t.querySelector("input[tabindex='0']"),r=t&&t.querySelector("span[tabindex='0']");n?(n.focus(),t=null):r?(r.focus(),t=null):t&&t.addEventListener("DOMSubtreeModified",(function e(n){!function(e,t,n){var r=n.target.querySelector("input[tabindex='0']");r&&setTimeout((function(){r.focus(),e&&e.removeEventListener("DOMSubtreeModified",t),r=null,e=null}))}(t,e,n)}));n=null,r=null},input:a,textarea:function(e){var t=e&&document.querySelector(e),n=t&&t.querySelector("textarea");n&&n.focus(),t=null,n=null},select:function(e){var t=e&&document.querySelector(e),n=t&&t.querySelector(".u-select-selection[tabindex]")||t.querySelector("input");n&&n.focus(),t=null,n=null},switch:o,switch_browse:o,normal:a};function a(e){var t=e&&document.querySelector(e),n=t&&t.querySelector("input");n&&n.focus(),t=null,n=null}function o(e){var t=e&&document.querySelector(e),n=t&&t.querySelector("span[tabindex]");n&&n.focus(),t=null,n=null}},2:function(e,t,n){e.exports=n(69)()},20:function(e,t,n){(function(e,n){var r="[object Arguments]",a="[object Map]",o="[object Object]",i="[object Set]",c=/^\[object .+?Constructor\]$/,l=/^(?:0|[1-9]\d*)$/,s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s[r]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s[a]=s["[object Number]"]=s[o]=s["[object RegExp]"]=s[i]=s["[object String]"]=s["[object WeakMap]"]=!1;var u="object"==typeof e&&e&&e.Object===Object&&e,d="object"==typeof self&&self&&self.Object===Object&&self,f=u||d||Function("return this")(),p=t&&!t.nodeType&&t,h=p&&"object"==typeof n&&n&&!n.nodeType&&n,m=h&&h.exports===p,y=m&&u.process,b=function(){try{return y&&y.binding&&y.binding("util")}catch(e){}}(),v=b&&b.isTypedArray;function g(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function k(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function S(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var O,w,C,E=Array.prototype,j=Function.prototype,x=Object.prototype,P=f["__core-js_shared__"],_=j.toString,N=x.hasOwnProperty,T=(O=/[^.]+$/.exec(P&&P.keys&&P.keys.IE_PROTO||""))?"Symbol(src)_1."+O:"",D=x.toString,A=RegExp("^"+_.call(N).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),I=m?f.Buffer:void 0,M=f.Symbol,R=f.Uint8Array,B=x.propertyIsEnumerable,K=E.splice,F=M?M.toStringTag:void 0,L=Object.getOwnPropertySymbols,H=I?I.isBuffer:void 0,q=(w=Object.keys,C=Object,function(e){return w(C(e))}),V=be(f,"DataView"),U=be(f,"Map"),W=be(f,"Promise"),Y=be(f,"Set"),z=be(f,"WeakMap"),J=be(Object,"create"),Z=Se(V),G=Se(U),X=Se(W),Q=Se(Y),$=Se(z),ee=M?M.prototype:void 0,te=ee?ee.valueOf:void 0;function ne(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function re(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ae(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function oe(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ae;++t<n;)this.add(e[t])}function ie(e){var t=this.__data__=new re(e);this.size=t.size}function ce(e,t){var n=Ce(e),r=!n&&we(e),a=!n&&!r&&Ee(e),o=!n&&!r&&!a&&Ne(e),i=n||r||a||o,c=i?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=c.length;for(var s in e)!t&&!N.call(e,s)||i&&("length"==s||a&&("offset"==s||"parent"==s)||o&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||ke(s,l))||c.push(s);return c}function le(e,t){for(var n=e.length;n--;)if(Oe(e[n][0],t))return n;return-1}function se(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":F&&F in Object(e)?function(e){var t=N.call(e,F),n=e[F];try{e[F]=void 0;var r=!0}catch(e){}var a=D.call(e);r&&(t?e[F]=n:delete e[F]);return a}(e):function(e){return D.call(e)}(e)}function ue(e){return _e(e)&&se(e)==r}function de(e,t,n,c,l){return e===t||(null==e||null==t||!_e(e)&&!_e(t)?e!=e&&t!=t:function(e,t,n,c,l,s){var u=Ce(e),d=Ce(t),f=u?"[object Array]":ge(e),p=d?"[object Array]":ge(t),h=(f=f==r?o:f)==o,m=(p=p==r?o:p)==o,y=f==p;if(y&&Ee(e)){if(!Ee(t))return!1;u=!0,h=!1}if(y&&!h)return s||(s=new ie),u||Ne(e)?he(e,t,n,c,l,s):function(e,t,n,r,o,c,l){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!c(new R(e),new R(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Oe(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case a:var s=k;case i:var u=1&r;if(s||(s=S),e.size!=t.size&&!u)return!1;var d=l.get(e);if(d)return d==t;r|=2,l.set(e,t);var f=he(s(e),s(t),r,o,c,l);return l.delete(e),f;case"[object Symbol]":if(te)return te.call(e)==te.call(t)}return!1}(e,t,f,n,c,l,s);if(!(1&n)){var b=h&&N.call(e,"__wrapped__"),v=m&&N.call(t,"__wrapped__");if(b||v){var g=b?e.value():e,O=v?t.value():t;return s||(s=new ie),l(g,O,n,c,s)}}if(!y)return!1;return s||(s=new ie),function(e,t,n,r,a,o){var i=1&n,c=me(e),l=c.length,s=me(t).length;if(l!=s&&!i)return!1;var u=l;for(;u--;){var d=c[u];if(!(i?d in t:N.call(t,d)))return!1}var f=o.get(e);if(f&&o.get(t))return f==t;var p=!0;o.set(e,t),o.set(t,e);var h=i;for(;++u<l;){d=c[u];var m=e[d],y=t[d];if(r)var b=i?r(y,m,d,t,e,o):r(m,y,d,e,t,o);if(!(void 0===b?m===y||a(m,y,n,r,o):b)){p=!1;break}h||(h="constructor"==d)}if(p&&!h){var v=e.constructor,g=t.constructor;v==g||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof g&&g instanceof g||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,c,l,s)}(e,t,n,c,de,l))}function fe(e){return!(!Pe(e)||function(e){return!!T&&T in e}(e))&&(je(e)?A:c).test(Se(e))}function pe(e){if(n=(t=e)&&t.constructor,r="function"==typeof n&&n.prototype||x,t!==r)return q(e);var t,n,r,a=[];for(var o in Object(e))N.call(e,o)&&"constructor"!=o&&a.push(o);return a}function he(e,t,n,r,a,o){var i=1&n,c=e.length,l=t.length;if(c!=l&&!(i&&l>c))return!1;var s=o.get(e);if(s&&o.get(t))return s==t;var u=-1,d=!0,f=2&n?new oe:void 0;for(o.set(e,t),o.set(t,e);++u<c;){var p=e[u],h=t[u];if(r)var m=i?r(h,p,u,t,e,o):r(p,h,u,e,t,o);if(void 0!==m){if(m)continue;d=!1;break}if(f){if(!g(t,(function(e,t){if(i=t,!f.has(i)&&(p===e||a(p,e,n,r,o)))return f.push(t);var i}))){d=!1;break}}else if(p!==h&&!a(p,h,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function me(e){return function(e,t,n){var r=t(e);return Ce(e)?r:function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}(r,n(e))}(e,Te,ve)}function ye(e,t){var n,r,a=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?a["string"==typeof t?"string":"hash"]:a.map}function be(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return fe(n)?n:void 0}ne.prototype.clear=function(){this.__data__=J?J(null):{},this.size=0},ne.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ne.prototype.get=function(e){var t=this.__data__;if(J){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return N.call(t,e)?t[e]:void 0},ne.prototype.has=function(e){var t=this.__data__;return J?void 0!==t[e]:N.call(t,e)},ne.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=J&&void 0===t?"__lodash_hash_undefined__":t,this},re.prototype.clear=function(){this.__data__=[],this.size=0},re.prototype.delete=function(e){var t=this.__data__,n=le(t,e);return!(n<0)&&(n==t.length-1?t.pop():K.call(t,n,1),--this.size,!0)},re.prototype.get=function(e){var t=this.__data__,n=le(t,e);return n<0?void 0:t[n][1]},re.prototype.has=function(e){return le(this.__data__,e)>-1},re.prototype.set=function(e,t){var n=this.__data__,r=le(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},ae.prototype.clear=function(){this.size=0,this.__data__={hash:new ne,map:new(U||re),string:new ne}},ae.prototype.delete=function(e){var t=ye(this,e).delete(e);return this.size-=t?1:0,t},ae.prototype.get=function(e){return ye(this,e).get(e)},ae.prototype.has=function(e){return ye(this,e).has(e)},ae.prototype.set=function(e,t){var n=ye(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},oe.prototype.add=oe.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},oe.prototype.has=function(e){return this.__data__.has(e)},ie.prototype.clear=function(){this.__data__=new re,this.size=0},ie.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ie.prototype.get=function(e){return this.__data__.get(e)},ie.prototype.has=function(e){return this.__data__.has(e)},ie.prototype.set=function(e,t){var n=this.__data__;if(n instanceof re){var r=n.__data__;if(!U||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ae(r)}return n.set(e,t),this.size=n.size,this};var ve=L?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,a=0,o=[];++n<r;){var i=e[n];t(i,n,e)&&(o[a++]=i)}return o}(L(e),(function(t){return B.call(e,t)})))}:function(){return[]},ge=se;function ke(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||l.test(e))&&e>-1&&e%1==0&&e<t}function Se(e){if(null!=e){try{return _.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Oe(e,t){return e===t||e!=e&&t!=t}(V&&"[object DataView]"!=ge(new V(new ArrayBuffer(1)))||U&&ge(new U)!=a||W&&"[object Promise]"!=ge(W.resolve())||Y&&ge(new Y)!=i||z&&"[object WeakMap]"!=ge(new z))&&(ge=function(e){var t=se(e),n=t==o?e.constructor:void 0,r=n?Se(n):"";if(r)switch(r){case Z:return"[object DataView]";case G:return a;case X:return"[object Promise]";case Q:return i;case $:return"[object WeakMap]"}return t});var we=ue(function(){return arguments}())?ue:function(e){return _e(e)&&N.call(e,"callee")&&!B.call(e,"callee")},Ce=Array.isArray;var Ee=H||function(){return!1};function je(e){if(!Pe(e))return!1;var t=se(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function xe(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Pe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function _e(e){return null!=e&&"object"==typeof e}var Ne=v?function(e){return function(t){return e(t)}}(v):function(e){return _e(e)&&xe(e.length)&&!!s[se(e)]};function Te(e){return null!=(t=e)&&xe(t.length)&&!je(t)?ce(e):pe(e);var t}n.exports=function(e,t){return de(e,t)}}).call(this,n(31),n(47)(e))},21:function(e,t,n){"use strict";e.exports=n(106)},28:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n(21);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function s(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var a=m(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n(669);var b={ADD:["Ctrl+/"],DELETE:["Del"],SAVE:["Ctrl+S"],SAVE_ADD:["Alt+S"],EDIT:["Ctrl+E"],SAVE_SUBMIT:["Ctrl+T"],CAEL:["Alt+Q"],STORAGE:["Ctrl+Alt+S"],DELETE_ROW:["Alt+Del"],MODAL_CALCEL:["Alt+N"],MODAL_CONFIRM:["Alt+Y"],CARDPAGE_END:["Alt+End"],CARDPAGE_UP:["Alt+Pageup"],CARDPAGE_DOWN:["Alt+Pagedown"],CARDPAGE_HOME:["Alt+Home"],BTN_PRINT:["Ctrl+P"],ICON_CLOSE:["Esc"]},v={keyMap:{},handlers:{},enabled:!0,attach:document.body,display:"block",clearOpenPanel:!0};function g(e){return(e=e.replace(/ /g,"")).toLowerCase()}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(h,e);var t,n,r,u=p(h);function h(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(t=u.call(this,e)).state={enabled:t.props.enabled},t}return t=h,(n=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.enabled&&e.enabled!==this.state.enabled&&this.setState({enabled:e.enabled})}},{key:"UNSAFE_componentWillMount",value:function(){this.props.attach}},{key:"componentDidMount",value:function(){}},{key:"getTranslateKeys",value:function(e){var t,n=null==(t=e)?String(t):"object"===y(t)||"function"==typeof t?Object.prototype.toString.call(t).replace(/object|\[|\]| /g,"")||"object":y(t);return"string"===n?e=g(b[e]?b[e][0]:e):"Array"===n?(e=e.map((function(e,t){return g(b[e]?b[e][0]:e)})),e=s(new Set(e))):e="Object"===n&&e.sequence&&e.action?{sequence:e.sequence,action:e.action}:["up+down+left+right+b+a+b+a"],e}},{key:"clearOpenPanel",value:function(e){if("enter"===e||"enter"===e[0])return!1;(document.querySelector(".rc-calendar-picker")||document.querySelector(".u-time-picker-panel"))&&o.PubSub.publish("clearOpenPanel",{type:"picker"}),document&&(document.querySelector(".u-dropdown:not(.u-dropdown-hidden)")||document.querySelector(".u-select-dropdown:not(.u-select-dropdown-hidden)")||document.querySelector(".mores-list-wrapper:not(.mores-list-hide-wrapper)"))&&(console.log("use hotkeys and clear panel"),document.activeElement.click(),console.log(document.activeElement))}},{key:"triggerEventHandle",value:function(e,t,n){var r=this.props,a=r.handlers,o=void 0===a?{}:a,i=r.clearOpenPanel,c=void 0===i||i;"[object Function]"===Object.prototype.toString.call(c)&&c(),!0===c&&this.clearOpenPanel(n),t.preventDefault(),o[e]&&o[e](t,n)}},{key:"getKeyMapsAndHandlers",value:function(){var e=this.props,t=e.keyMap,n=void 0===t?{}:t,r=(e.handlers,e.keyMapX),a=void 0===r?{}:r,o=e.handlersX,i=void 0===o?{}:o;for(var c in n)a[c]=this.getTranslateKeys(n[c]),i[c]=this.triggerEventHandle.bind(this,c);return a=Object.assign({},a),i=Object.assign({},i),0!==Object.keys(a).length&&0!==Object.keys(i).length&&{keyMapX:a,handlersX:i}}},{key:"render",value:function(){var e=this,t=this.props,n=t.enabled,r=(t.keyMap,t.handlers,t.children),o=void 0===r?null:r,s=t.className,u=void 0===s?"":s,d=t.display,f=(t.clearOpenPanel,l(t,["enabled","keyMap","handlers","children","className","display","clearOpenPanel"])),p=this.getKeyMapsAndHandlers();return p&&n?a.a.createElement(i.HotKeys,c({keyMap:p.keyMapX,handlers:p.handlersX,ref:function(t){return e.hotkeyWrapped=t},className:"nc-hotkeys-wrapper "+u,style:{display:d}},f),o):a.a.createElement("div",{className:u,style:{display:d}},o)}}])&&d(t.prototype,n),r&&d(t,r),h}(r.Component);k.USUAL_KEYS=b,k.defaultProps=v,t.a=k},3:function(e,t){e.exports=n},31:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},313:function(e,t,n){var r=n(84),a=Object.prototype,o=a.hasOwnProperty,i=a.toString,c=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,c),n=e[c];try{e[c]=void 0;var r=!0}catch(e){}var a=i.call(e);return r&&(t?e[c]=n:delete e[c]),a}},314:function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},315:function(e,t,n){var r=n(316),a=n(327),o=n(333);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||a),string:new r}}},316:function(e,t,n){var r=n(317),a=n(323),o=n(324),i=n(325),c=n(326);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=a,l.prototype.get=o,l.prototype.has=i,l.prototype.set=c,e.exports=l},317:function(e,t,n){var r=n(59);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},318:function(e,t,n){var r=n(131),a=n(319),o=n(79),i=n(321),c=/^\[object .+?Constructor\]$/,l=Function.prototype,s=Object.prototype,u=l.toString,d=s.hasOwnProperty,f=RegExp("^"+u.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||a(e))&&(r(e)?f:c).test(i(e))}},319:function(e,t,n){var r,a=n(320),o=(r=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},320:function(e,t,n){var r=n(58)["__core-js_shared__"];e.exports=r},321:function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},322:function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},323:function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},324:function(e,t,n){var r=n(59),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return a.call(t,e)?t[e]:void 0}},325:function(e,t,n){var r=n(59),a=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:a.call(t,e)}},326:function(e,t,n){var r=n(59);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},327:function(e,t,n){var r=n(328),a=n(329),o=n(330),i=n(331),c=n(332);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=a,l.prototype.get=o,l.prototype.has=i,l.prototype.set=c,e.exports=l},328:function(e,t){e.exports=function(){this.__data__=[],this.size=0}},329:function(e,t,n){var r=n(60),a=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():a.call(t,n,1),--this.size,!0)}},33:function(e,t,n){"use strict";function r(e){return"INPUT"===e.tagName&&(!(!e||!0!==e.disabled)||void 0)}n.d(t,"a",(function(){return r}))},330:function(e,t,n){var r=n(60);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},331:function(e,t,n){var r=n(60);e.exports=function(e){return r(this.__data__,e)>-1}},332:function(e,t,n){var r=n(60);e.exports=function(e,t){var n=this.__data__,a=r(n,e);return a<0?(++this.size,n.push([e,t])):n[a][1]=t,this}},333:function(e,t,n){var r=n(78)(n(58),"Map");e.exports=r},334:function(e,t,n){var r=n(61);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},335:function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},336:function(e,t,n){var r=n(61);e.exports=function(e){return r(this,e).get(e)}},337:function(e,t,n){var r=n(61);e.exports=function(e){return r(this,e).has(e)}},338:function(e,t,n){var r=n(61);e.exports=function(e,t){var n=r(this,e),a=n.size;return n.set(e,t),this.size+=n.size==a?0:1,this}},339:function(e,t,n){var r=n(78),a=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=a},34:function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"a",(function(){return O}));var r=n(9),a=n(13),o=n(1),i=n(17),c=n(16),l=n(33),s=n(49);function u(e){var t=e.eventTarget,n=e.ViewModel,r=e.moduleId,a=e.orderOfHotKey,s="TD"===t.tagName?t:Object(o.findParentTd)(t);if(s){var u=s.previousElementSibling,m=s.parentElement,y=d(m),b=u&&u.querySelector('[tabindex="0"]');if(y!==s)if(null===b||Object(l.a)(b))p({td:u,ViewModel:n,moduleId:r,orderOfHotKey:a});else{var v=Object(c.a)(u);v&&(n.enterTriggerCellId=v),Object(i.a)({div:b,ViewModel:n})}else m===m.parentElement.lastElementChild?function(e){var t=e.currentModuleId,n=e.ViewModel,r=e.orderOfHotKey;r&&0===r.length?function(e){var t=e.currentModuleId,n=e.ViewModel,r="".concat(o.config.hotKeyModuleIdPrefix,"-").concat(t),a=document.querySelectorAll("#".concat(r," table tbody tr.u-table-row")),l=a[a.length-1],s=function(e){for(var t=e.length;t>-1;t--)if(null!==e[t].querySelector('[tabindex="0"]'))return e[t]}(a[l].querySelectorAll("td")),u=Object(c.a)(s);u&&(n.enterTriggerCellId=u);var d=s.querySelector('[tabindex="0"]');d&&Object(i.a)({div:d,ViewModel:n})}({currentModuleId:t,ViewModel:n}):r&&f({currentModuleId:t,ViewModel:n,orderOfHotKey:r})}({currentModuleId:r,ViewModel:n,orderOfHotKey:a}):h({tr:m,ViewModel:n,moduleId:r,orderOfHotKey:a})}else console.warn("not find parentTd, prev hotkey invalid")}function d(e){var t=e.querySelectorAll("td");return Array.prototype.find.call(t,(function(e){return!e.className.includes("fixed")}))}function f(e){var t=e.currentModuleId,n=e.ViewModel,l=e.orderOfHotKey,u=function(e,t){var n=t.length,r=t.indexOf(e),a=r-1<-1?t[n-1]:r-1;return t[a]}(t,l),d=r.d[u];if(void 0!==d){var f=d.type;if(f===a.a.cardTable||f===a.a.editTable){var h=r.d[d.activeTable],m=document.querySelector("div[".concat(h.lastItem,"]")),y=m.querySelector('[tabindex="0"]');if(null===y){p({td:m.parentElement,ViewModel:n,moduleId:h.moduleId,orderOfHotKey:l})}else{var b=Object(o.findParentTd)(y),v=Object(c.a)(b);v&&(n.enterTriggerCellId=v),Object(i.a)({div:y,ViewModel:n})}}else Object(s.a)(d,u)}}function p(e){var t=e.td,n=e.ViewModel,r=e.moduleId,a=e.orderOfHotKey,o=t.previousElementSibling,s=o&&o.parentElement,u=s&&d(s),f=t.querySelector('[tabindex="0"]'),m=o&&o.querySelector('[tabindex="0"]');if(u===o&&null===m||u===t&&null===f)h({tr:s,ViewModel:n,moduleId:r,orderOfHotKey:a});else if(null===m||Object(l.a)(m))p({td:o,ViewModel:n,moduleId:r,orderOfHotKey:a});else{var y=Object(c.a)(o);y&&(n.enterTriggerCellId=y),Object(i.a)({div:m,ViewModel:n})}}function h(e){var t=e.tr,n=e.ViewModel,r=e.moduleId,a=e.orderOfHotKey,l=t&&t.previousElementSibling;if(null!==l)if("-1"!==l.getAttribute("tabindex")){var s=l.querySelectorAll('td [tabindex="0"]'),u=s[s.length-1],d=Object(o.findParentTd)(u),p=Object(c.a)(d);p&&(n.enterTriggerCellId=p),Object(i.a)({div:u,ViewModel:n})}else h({tr:l,ViewModel:n,moduleId:r,orderOfHotKey:a});else a&&f({currentModuleId:r,ViewModel:n,orderOfHotKey:a})}var m=n(50);function y(e){var t=e.eventTarget,n=e.ViewModel,r=(e.moduleId,e.orderOfHotKey,"TD"===t.tagName?t:Object(o.findParentTd)(t)),a=r.parentElement.previousElementSibling,l=1;if(null!==a){"-1"===a.getAttribute("tabindex")&&(l=Object(m.a)(a,l,"up"));var s=Object(c.a)(r);if(!s)return console.warn("not find cell identity!");var u=s&&s.split("-"),d=Number(u.pop())-l;if(d>-1){u.push(d);var f=u.join("-");n.upStairsCellIdentity=u;var p=document.querySelector("div[".concat(f,'="').concat(f,'"] [tabindex="0"], div[').concat(f,'="').concat(f,'"][tabindex="0"]'));Object(i.a)({div:p,ViewModel:n})}}}function b(e){var t=e.eventTarget,n=e.ViewModel,r=e.moduleId,a="TD"===t.tagName?t:Object(o.findParentTd)(t),l=a.parentElement.nextElementSibling,s=1;if(null!==l){"-1"===l.getAttribute("tabindex")&&(s=Object(m.a)(l,s,"down"));var u=Object(c.a)(a);if(!u)return console.warn("not find cell identity!");var d=u&&u.split("-"),f=Number(d.pop())+s;"".concat(o.config.hotKeyModuleIdPrefix,"-").concat(r);d.push(f);var p=d.join("-");n.upStairsCellIdentity=p;var h=document.querySelector("div[".concat(p,'="').concat(p,'"] [tabindex="0"], div[').concat(p,'="').concat(p,'"][tabindex="0"]'));Object(i.a)({div:h,ViewModel:n})}}var v={37:function(e){var t=e.eventTarget,n=e.ViewModel,r=e.moduleId,a=e.orderOfHotKey;if(e.itemType===o.config.hotKeyDatePicker)return void u({eventTarget:t,ViewModel:n,moduleId:r,orderOfHotKey:a});var i=setTimeout((function(){u({eventTarget:t,ViewModel:n,moduleId:r}),clearTimeout(i)}))},38:function(e){var t=e.eventTarget,n=e.ViewModel,r=e.moduleId,a=e.orderOfHotKey;if(e.itemType===o.config.hotKeyDatePicker)return void y({eventTarget:t,ViewModel:n,moduleId:r,orderOfHotKey:a});var i=setTimeout((function(){y({eventTarget:t,ViewModel:n,moduleId:r,orderOfHotKey:a}),clearTimeout(i)}))},39:function(e){var t=e.eventTarget,n=e.ViewModel,r=e.moduleId,a=e.orderOfHotKey;if(e.itemType===o.config.hotKeyDatePicker)return void Object(i.b)({eventTarget:t,ViewModel:n,moduleId:r,orderOfHotKey:a});var c=setTimeout((function(){Object(i.b)({eventTarget:t,ViewModel:n,moduleId:r}),clearTimeout(c)}))},40:function(e){var t=e.eventTarget,n=e.ViewModel,r=e.moduleId,a=e.orderOfHotKey;if(e.itemType===o.config.hotKeyDatePicker)return void b({eventTarget:t,ViewModel:n,moduleId:r,orderOfHotKey:a});var i=setTimeout((function(){b({eventTarget:t,ViewModel:n,moduleId:r,orderOfHotKey:a}),clearTimeout(i)}))}};function g(e,t,n){var i="shift+down"===n?1:-1,c=r.e.indexOf(e)+i,l=r.e[c];if(t.target){var s=null;!k(l)&&r.d[l].firstItem&&(s=r.d[l].firstItem);var u=document.querySelector("div[field=".concat(s,"]"));u&&u&&u.contains(t.target)||t.target.blur()}k(l)?function(e){var t=e.key,n=e.moduleId,a="shift+down"===t?"lastItem":"firstItem";if(function(e){var t=r.d[e];return t&&(t.parent||t.children)}(n))return void function(e,t){var n=o.ViewModel.tableActiveKey||e;o.PubSub.publish("autoFocus",{data:r.d[n][t],moduleId:e})}(n,a);o.PubSub.publish("autoFocus",{data:r.d[n][a],moduleId:n})}({key:n,moduleId:e}):!function(e,t,n){var o=r.d[t].type,i=r.d[n].type,c=[];o===a.a.form?c=function(e,t,n){var r,o=e._this.myTable;r=t===a.a.cardTable?o[n].state.table.rows:t===a.a.editTable?o.myEditTable[n].state.table.rows:e._this.state.meta[n].items;return r}(e,i,n):(o===a.a.cardTable||o===a.a.editTable)&&(c=S(e,i,n));return 0===c.length}(this.props,e,l)?o.PubSub.publish("autoFocus",{data:r.d[l].firstItem,moduleId:e}):g.call(this,l,t,n)}function k(e){return void 0===r.d[e]}function S(e,t,n){var r=e.pageScope.myTable;return t===a.a.cardTable?r[n].state.table.rows:t===a.a.editTable?r.myEditTable[n].state.table.rows:e.pageScope.state.meta[n].items}function O(e){var t=e.eventTarget,n=e.ViewModel,r=e.moduleId,a=e.orderOfHotKey,o=e.itemType,i=e.keyCode;v[i]({eventTarget:t,ViewModel:n,moduleId:r,orderOfHotKey:a,itemType:o})}},352:function(e,t,n){var r=n(156),a=n(702),o=n(703);function i(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}i.prototype.add=i.prototype.push=a,i.prototype.has=o,e.exports=i},353:function(e,t,n){var r=n(704);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},354:function(e,t){e.exports=function(e,t,n){for(var r=-1,a=null==e?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}},355:function(e,t){e.exports=function(e){return function(t){return e(t)}}},356:function(e,t){e.exports=function(e,t){return e.has(t)}},357:function(e,t){e.exports=function(e){return e}},358:function(e,t,n){var r=n(131),a=n(394);e.exports=function(e){return null!=e&&a(e.length)&&!r(e)}},359:function(e,t,n){},360:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(0),a=n.n(r);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var a=u(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(695);var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(s,e);var t,n,r,o=l(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e)).mouseDown=!1,t}return t=s,(n=[{key:"componentDidMount",value:function(){this.divDom&&(this.clientWid=this.divDom.clientWidth),this.onMouseDown.call(this)}},{key:"onMouseDown",value:function(){var e=this;document.addEventListener("mousemove",(function(t){if(e.mouseDown&&e.divDom){var n=e.clientWid+(t.clientX-e.beginX);n>=e.box.clientWidth-20||n<=50?e.divDom.style.width=e.divDom.clientWidth+"px":e.divDom.style.width=n+"px"}})),document.addEventListener("mouseup",(function(){e.mouseDown=!1,e.divDom&&(e.clientWid=e.divDom.clientWidth),e.maskRightDom&&(e.maskRightDom.style.display="none"),e.maskLeftDom&&(e.maskLeftDom.style.display="none"),"function"==typeof e.props.onDragStop&&e.props.onDragStop()})),this.spanDom.addEventListener("mousedown",(function(t){e.beginX=t.clientX,e.mouseDown=!0,e.maskRightDom&&(e.maskRightDom.style.display="block"),e.maskLeftDom&&(e.maskLeftDom.style.display="block")}))}},{key:"render",value:function(){var e=this,t=this.props.defLeftWid||"150px",n=this.props.leftMinWid||"50px";return this.props.rightOverflow,a.a.createElement("div",{className:"dragWidthCom",ref:function(t){e.box=t}},a.a.createElement("div",{className:"dragWidthCom_left",style:{width:t,minWidth:n},ref:function(t){e.divDom=t}},a.a.createElement("div",{className:"dragWidthCom_mask",ref:function(t){e.maskLeftDom=t}}),this.props.leftDom),a.a.createElement("div",{ref:function(t){e.spanDom=t},className:"dragWidthCom_line"},a.a.createElement("div",{className:"dragWidthCom_lines"})),a.a.createElement("div",{className:"dragWidthCom_right",id:"scroll_container"},a.a.createElement("div",{className:"dragWidthCom_mask",ref:function(t){e.maskRightDom=t}}),this.props.rightDom))}}])&&i(t.prototype,n),r&&i(t,r),s}(r.Component)},361:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(21),i=n(9),c=n(44),l=n(34),s=n(66),u=n(1);n(701);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var a=v(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t.a=function(e){return function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(v,t);var n,r,d,y=m(v);function v(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(t=y.call(this,e)).formStatusChanged=t.formStatusChanged.bind(b(t)),t}return n=v,(r=[{key:"componentDidMount",value:function(){var e=this;this.autoFocusToken=u.PubSub.subscribe("autoFocus-IoC",(function(){var t=e.props.store.getStatus();Object(c.c)({props:e.props,autoFocusDeferred:!1,status:t})||"browse"===t||i.a.form(e.props,!0)}))}},{key:"componentWillUnmount",value:function(){Object(i.b)(this.props.moduleId||this.props.name),this.autoFocusToken&&u.PubSub.subscribe(this.autoFocusToken)}},{key:"formStatusChanged",value:function(e,t){"browse"===t?Object(i.b)(e.moduleId||e.name):this.judgeCreateKeyMap(e,t)}},{key:"judgeCreateKeyMap",value:function(e,t){var n=(e.getHotKeyConfig?e.getHotKeyConfig():{}).autoFocusDeferred,r=void 0!==n&&n;Object(c.c)({props:e,autoFocusDeferred:r,status:t})||i.a.form(e)}},{key:"render",value:function(){var t=this.props.name;return a.a.createElement(o.HotKeys,{keyMap:s.a,handlers:{shiftUp:l.b.bind(this,t),shiftDown:l.b.bind(this,t)},id:"".concat(u.config.hotKeyModuleIdPrefix,"-").concat(t)},a.a.createElement(e,f({},this.props,{formStatusChanged:this.formStatusChanged})))}}])&&p(n.prototype,r),d&&p(n,d),v}(r.Component)}},362:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n(19);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var a=p(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t.a=function(e){return function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(p,t);var n,r,c,f=d(p);function p(){return l(this,p),f.apply(this,arguments)}return n=p,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.name,n=e.form;this.autoFocusToken=o.PubSub.subscribe("autoFocus",(function(e,r){var a=r.data,o=r.id,c='[hotkeytag="'.concat(t,"-").concat(a,'"]'),l="normal";n&&a&&(n.setItemAttribute(a,"autoFocus",!0),l=n.getItemAttribute(a,"itemtype")),console.log(c,n,o,a,l),o?t===o&&(console.log(o),void 0===i.a[l]?i.a.normal(c):i.a[l](c)):a&&(void 0===i.a[l]?i.a.normal(c):i.a[l](c))}))}},{key:"componentWillUnmount",value:function(){this.autoFocusToken&&o.PubSub.subscribe(this.autoFocusToken)}},{key:"render",value:function(){return a.a.createElement(e,this.props)}}])&&s(n.prototype,r),c&&s(n,c),p}(r.Component)}},389:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA5CAYAAABqMUjBAAAAAXNSR0IArs4c6QAADJlJREFUaAXtWgtwFdUZPufs7t17Q0KAoIAVBEWtZtQASlTQ5kUoYgekBludIuJUnLFqndrpTAXntj6wdcbR2taWojJTLTYpteKDlmc6is+EVK2xFApaH1AgISEkubt795x+/8JN7t279+Z1MzLT/gzZ3bPn/Od853+c///3MvY/Rvxkx1tby7SFY40SjamvMMYvlIqfyhWTjKv9XLBG4YptvMr6Z39xnLSA215iowvyjBrF2I1MsZmayXRcmfef0J1YuYyzDqXYBlfyB80qu7kv4Ccd4JZX2MgC01imCXab0NlUyJK5ceAksAEkgECYjAF4q3LZ9/RKZ21At56mkwqwtTVUYwi1kuvsAgaQcbdnnX3eaBo2hTPlOuzO0Bzn8UwDTgrAanNkkqvFfyoEu44WFAfYwRDGQ9zMkVJ9zaiI/yWIxxcOOLZJu8owxC+Fwc5wY70mGrTY/rTpBjbMYR/qtnMpv4od9Y/R/Q1Bz0fKSkbxkHlWXLLThWIRpsnOuFSf8jxzzykbdnQEjelPm7vVuBUSeRR2aMYBNhcEsEw32XkOM77BmLPazzOrhFurSmdzJpcpxiskUxMNzqE1aIGrdCRzBVcfM843S1c+NXZbw9t+5tme7S3GLZDGE3A0QsIx5ZL0EKBa7K/GDqeCR8nt9VIg4ENzpp2mKWMVXl5vCK7bEgcf3GSyo6SBGucsBPHYUlqK87VWzFk54dWmQ73sg+/srcZMOJntWEpersHSjGTL4NumS6OYV3d9nrwKMvMUOlQxYzrAbjMFX+IqpXe7EKUPLA0g8HG0d3nvmRnmfLkZMjYfrpp+XgpD34PaznQEDg9hUcMClqajTYQsCpnuTPRNDwtKopbK0vM1rr2gc34uAUmWaFK3tFvq14n+0IaLBNM3HKieOSWt04kGN67Nxfla7tqZeuSmHec4h58Z6efWA/jQrFkFUNy1WPTp1iD1LIZxUPGpmiuf3FdWFvZPRs9K8FsEnZlBL3PYBiskSnOFPYB52Lo9oolLaNFDITKBiKaVj9CO3ezn043zFtFBmRxm6VL0BRjd0Kb9/jV4gPfPm3YKPPF3rBPb4u800GeoEmxIfJe0Jnms4O5l8KAjczRNMuuUe9Ig0G7zqPXvlBd48AAbjjEP0p1AzikX5IBPiLOpPGJVJPPDZNNTvUby2xzee9EFf4EvZmm65AFWSs3J4XQeKzg+HGXcx1eeNdzGS0eSa7HWuCOeCsIkamtqSAHOJzXMJZG2wJSKU3nyMalhQOrbXDwhRCX7vT8yL/ZRED9xZfuuMNY2ZmiuKp017R/4jlVlZb3hK2fHrSu9+5BbKBDSI4iwYuy3hp45WxLCHsOJhjxjAANwFayjo5e34l2JxD2g+6CbdGyphnASycca44iznJdTchlM+ik4q1qYOkox8gDSz2BuSa20hZBwG2ts7Jkc6ernuQJMtooAxqt8IB7fLR22Csn/00lLCLwVvL4eSRDbQ3FxLon44TzcRbgTfJVUzUMBTCApMUA2REyPuK56EdWQpfyYU9ofsLSOhH3VY3HXJBaWuyuv9/F6EyElChMowfleZHqkIIIcEW0Uxra5Ln8NcP/kKG1LpCL2caZxmdo9wFLjL3ZLeR+Y5yQoIOki4joomUipOuhj4k3xNmM3MqVz3Cz24wPZ7sYBUqkXHKFtjpTHPjoOBonvIMg7h8dvensfvOozYdKZHFAYK8a/NeO2vvWfZHb8YtYF+dZxkpiPCGRCXTG4HZLcCLtc7sS1aXqFfTVU9je9YH2DB/CYUGlmKf1BTcavRvIwyRnCmYy0klLGXSHGHwlaR1yKJ7nl3oa9HUWGmKSuRyHJ1zmHJKW2KVwV23t8/OAkGTQ3tWFfe6mlorRaaOp5LCSPct2BEioihKHdduX8cdsbdmQa72wJ/UjPV/e6XawDEn+Da7BJV2wKV1r/yjSm7Oml4Y6CjouERHiq2BlYOeIH3omgfS9qJjvzi1rery+v7zkRMvFJAUydDlaWXotS6ZMa4yMHkiaSOSC6Oozqx5JTtzVszDQhtavNlJwbCyHfHbzc2pOt74zamkJEKzcjO18KoMUiRHZHyyaB4ArBSAe6wflO3K/RuXjmjcV13Zl4pgGmji2VMy+DZj4G9b6EQkRS8SB502D0QXTBGRKGV7uZvPNLWxqaMk1G7fOiLSM3Rseg8Ne3o55ZW1OhuHqU6+IC5WINdIAGERbCKePHWpQrX3dtfsfOG+oaM3QNambs3eoLR0xU4W8hsVgGtCWmEKSxPURm7ihpoakBeNcc1o+sO3vjHqunQ9LN/FVqdJfqugJbs1DTQ2Wu3X3PthX565K6pN3O+P3XbxSCPwGVjWQEmjYKOhPCVygpW7BBSxquW/+Kv0sSBP+r488UC7eZXcUI1kokZ5Mh8DzsY6cQYp/ibtPoyxuaeTQ9JZi9qm10yDVmo865AHo3hwltkkBohA3EZxFrj3TsS+qjo9uCZp2+btE1mqE9h3QrhGAlqEvWNpI25mwH8PkN1/0xxZf0CTgrZ9/LsuiRUXo4MgugFlLKyYV2BoGUFG3I3oNXM/IQRHTevm1Fwc99LBjUeArGvoEwbRzU0/+638/cEEw58h+GELNg062JgT3HUqJhoNeqh1oLXZk3CzXqBVhoNZLCyUIzANLxPvS4uPpJ4csXVPWm4ugHqz+IFqck6a6U92qmNk5avRvkH9+fZ4BlIqx/Od7t3oX+KxNjBiXheVE10jaty6Gf8LSqGuo65bgkAZLA9EkISzh3XWlfWr9iVEOi+8W1NeeCwU7sRh54J5oHffWcmFQHXCEubFpc59XL+y3hsqjK18PWLHyoWmCz7rlwD2cKRPGeukKKQZLMvFKFgCOiSVtegT49gOFoFmphLW+o0k3MS/YPJzZexb2Kzu+ovU/ApLJShW/lzLoJm36ulgAJSbr9kmZi+tQr1B9SZtOSWxFlXZnu/pJ7DOKedNiVZfjbN+DyH7eXKmb+CiBLZJwcDyQ5BJApy1VwSEpNTrRN/dk8JH3sTHjWRFNOriRlqPY5CWYZs4WK+zoqRCj8MudaCTyqBzYxKBdXRYAZL6ypVV7ZJ3+iGYEwCgIjnKFMCFcAbRpVU+vV7oKLpnPui53NdO1ZuJYinJlDma6vsWLvlkZv001zhP97XV9j+/0eG+nWNRd7XjBNwjU1tZrL449oWng8OaThIkogYcSdjatneG49EvmM6l2tVCbJJVG5DhwPsWjUs5U0wIdLrirjuj7fdbpyOW86L8oBlNwP1N7Oe5mOYh/SUZJTwjSIEN9P8EwDjIYlQuC7wTATPsUAsPi7b5pNvuchP+JIIrewJcEoBXD1wwdG4PXs4VTlxMQUiXGlUuJc25QvSds9kCspI8tCnCCbeZv9amLeFMB2PDIBKjZBoe45nMS9+Nr5BMHKm8nzvLfo+YPwqL/gRm7q9bRxQqiHG5e/2GOfKYAFPiBDl82cHw3JqHBPERq+PP0hKFsKd8Ufk3b8HUrzhkLC1Ji05MvyyNhnk/mkAOZMh8bnPNZJng+OGWrmxI5qUj2R8uLEw46bN3RoXCyF7X0iBilp2izpyPcdmy9vXL46JXtJAWwzjgBbdQzTlxcPEmJoBALxxzevLNwdBJja3lpc14zUcIF01YfCRPTbXxeKIwgZEtJC903UPxa8e2PdZ/45UgCP/1veQQzZRTY2HER5sLS7XrP02E/64t/wzfVNynIrle0+DQE4pKJcA3I/eGpCwn98Y3gnzOERycVX315cty9oDv9wVvFAxz1aKP9+CidzSVoIYOPWO65Qi+p/kPfpQHiXPrfoUik4JS+VgDcJwA0POEIJxN4W7vfCVv4sHbV25/Xr38vGOw1wVbR1kgyZO2FrRclVimxMsr0jmxV6GL+IjW3QDffbm75fcDBb/2zvympr8lH9m6IJfhqixYiUohOu7TOo6b5slcpknmmA6WXFg8fuhvo97No93jx5TL/vCSgKAl045la1F+X9pHE5T3Eg/WaUw46BxtpeNOKxwsPHSqHa1w5GtTlKPCRZpZztrmv/sH5FYcp5m8P1D5hVitNKjCZJWHr+MsTTdeRoUIxLvMp6FfgqTV4YSJuljN/UtveDuScTWFp8oEonUKGso3Oj8y6h6XcLzTyVfn1NNSuqVnhEmQjZKICeCEebwPHXx2Kd696KFqX9dDfB94u8ZgWcWBjKr5OFGb4Bec18xCXnAC5+0qegs7wbiD/FsfEa9m59aIS5feMdfFgT6MSaBnvtF+Be5orPfaBrvGJ6kYMfZZrKaI9Z7EB9lKf9xK93zP/vvtAd+C+AsxTG0OZc1QAAAABJRU5ErkJggg=="},393:function(e,t,n){var r=n(352),a=n(353),o=n(354),i=n(132),c=n(355),l=n(356);e.exports=function(e,t,n,s){var u=-1,d=a,f=!0,p=e.length,h=[],m=t.length;if(!p)return h;n&&(t=i(t,c(n))),s?(d=o,f=!1):t.length>=200&&(d=l,f=!1,t=new r(t));e:for(;++u<p;){var y=e[u],b=null==n?y:n(y);if(y=s||0!==y?y:0,f&&b==b){for(var v=m;v--;)if(t[v]===b)continue e;h.push(y)}else d(t,b,s)||h.push(y)}return h}},394:function(e,t){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},396:function(e,t,n){var r=n(714),a=n(715);e.exports=function e(t,n,o,i,c){var l=-1,s=t.length;for(o||(o=a),c||(c=[]);++l<s;){var u=t[l];n>0&&o(u)?n>1?e(u,n-1,o,i,c):r(c,u):i||(c[c.length]=u)}return c}},397:function(e,t,n){var r=n(716),a=n(85),o=Object.prototype,i=o.hasOwnProperty,c=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return a(e)&&i.call(e,"callee")&&!c.call(e,"callee")};e.exports=l},400:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return Ee}));var r=n(0),a=n.n(r),o=n(6),i=n.n(o),c=n(5),l=n.n(c),s=n(3),u=n(1);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var a=y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(c,e);var t,n,r,o=h(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).handleMouseOver=function(){if(t.cellDom){var e=t.state.tipStatus,n=t.cellDom.parentNode.getAttribute("class").includes("first-col"),r=null,a=t.cellDom.parentNode,o=t.cellDom.querySelector(".cell-context");a&&(r=n?a.parentNode&&a.parentNode.parentNode:a),r&&(o.offsetWidth>r.clientWidth&&!1===e&&t.setState({tipStatus:!0}),o.offsetWidth<=r.clientWidth&&!0===e&&t.setState({tipStatus:!1}))}},t.state={tipStatus:!1},t}return t=c,(n=[{key:"componentWillUnmount",value:function(){this.cellDom=null}},{key:"render",value:function(){var e=this,t=this.props,n=t.item,r=t.fixedStyle,o=t.context,c=t.multipleRowCell,d=t.searchValue,f=t.beforeStr,p=t.index,h=t.afterStr,m=t.record,y=t.onCellMouseDown,b=t.isEllipsis;return a.a.createElement("div",{fieldid:Object(u.getSysFieldid)(n.attrcode),className:l()("dobule-text",{"dobule-text-fixed":!(!n.fixed||"left"!==n.fixed)}),style:r,ref:function(t){e.cellDom=i.a.findDOMNode(t)},onMouseOver:this.handleMouseOver,onMouseDown:function(e){y&&y(m,p,n.attrcode,n,e)}},a.a.createElement(s.Tooltip,{placement:"top",overlay:this.state.tipStatus?o:"",className:"tooltip-word-color",delay:1,inverse:!0},a.a.createElement("div",{className:l()({"single-line-and-ellipsis":!c&&b,"three-line-and-ellipsis":!b})},f||h||d?a.a.createElement("span",{className:"cell-context"},f,-1!==p&&d?a.a.createElement("span",{className:"u-table-searchable-filter"},d):"",h):a.a.createElement("span",{className:"cell-context"}," "),"  ")))}}])&&f(t.prototype,n),r&&f(t,r),c}(r.Component),v={},g=n(11),k=n(42),S=n.n(k),O=function(e){return Object.prototype.toString.call(e).slice(8,-1)};function w(e){return"Array"===O(e)||Array.isArray(e)}function C(e){return void 0===e||void 0===e}function E(e){var t=[];return e.map((function(e){return function e(n){t.push(n),n.children&&n.children.map((function(t,n){e(t)}))}(e)})),t}function j(e){if(e){var t=E(e),n=[];t.map((function(e,t){e.children&&0!=e.children.length||n.push(e)}));var r=[];return n.forEach((function(e){r.push(function(e){var n=0;return function e(r){n++,t.map((function(t){t.key===r.pid&&e(t)}))}(e),n}(e))})),0===r.length?0:Math.max.apply(null,r)}}function x(e,t){if(!1===t)return!0;if(e.target.className.includes("u-table-row-expand-icon"))return!0;if(e.target.className.includes("stop-check-element"))return!0;var n=function(e){for(;e.parentElement;)if("TD"===(e=e.parentElement).tagName)return e;return null}(e.target);if(n){var r=n.querySelector(".".concat("stop-check-operation-element"));if(r&&r.contains(e.target))return n=r=null,!0}return!!document.getSelection().toString()||void 0}function P(e,t){if(null==e||0==e.length)return!1;for(var n=[],r=0;r<e.length;r++){if(e[r].key==t)return e[r].children;Array.isArray(e[r].children)&&e[r].children.length>0&&(n=n.concat(e[r].children))}return P(n,t)}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t,n){return(D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=B(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B(e);if(t){var a=B(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return M(this,n)}}function M(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(o,e);var t,n,r,a=I(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this,e)).store={formStore:S.a.useForm(),data:[],fullDataObject:{},meta:{},async:!1,rowId:"rowId",isCheckedHasChild:!1,expandedKeys:[],checkedKeys:{},indeterminateKeys:{},currentSelectedRow:null,currentRow:null,modalType:null,isEllipsis:!0,searchValue:""},t.cache={cacheData:[],langJson:{}},t.getMeta=function(){return t.getStore("meta")},t.getHooks=function(){return t.getMeta=t.getMeta.bind(R(t)),t.setMeta=t.setMeta.bind(R(t)),{getStore:t.getStore.bind(R(t)),setStore:t.setStore.bind(R(t)),getMeta:t.getMeta.bind(R(t)),setMeta:t.setMeta.bind(R(t)),getViewMeta:t.getViewMeta.bind(R(t)),getCache:t.getCache.bind(R(t)),setCache:t.setCache.bind(R(t)),setData:t.setData.bind(R(t)),getData:t.getData.bind(R(t)),refresh:t.refresh}},t.name="treeTableStore",t.refresh=t.refresh.bind(R(t)),t.uuid=t.store.uuid="xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Object(u.getSafeRandom)()|0;return("x"==e?t:3&t|8).toString(16)})),t}return t=o,(n=[{key:"getStore",value:function(e){return D(B(o.prototype),"get",this).call(this,e)}},{key:"setStore",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0,a=D(B(o.prototype),"set",this).call(this,e,t);return n&&this.forceUpdate(r),a}},{key:"setCache",value:function(e,t){if(e){w(e)||(e=[e]);var n=this.cache,r=e.length;e.forEach((function(e,a){n[e]||(n[e]={}),a===r-1?n[e]=t:n=n[e]}))}else console.warn("invalid params <path> to setting")}},{key:"getCache",value:function(e){if(!C(e)){w(e)||(e=[e]);var t=this.cache;return e.some((function(n){if(C(n)||null==t)C(n)&&console.warn("paths has empty item[%s]",e);else{if(t[n])return t=t[n],!0;t=null}})),t}console.warn("invalid params <paths> to setting")}},{key:"setMeta",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.getStore("name");t&&this.setStore("name",t||r,!1),this.setStore("meta",e,n);var a=this.getStore("formStore");if(a&&e[t]&&w(e[t].items)){var o=[];e[t].items.map((function(e){if("customer"!==e.itemtype){var t=JSON.parse(JSON.stringify(e||{},(function(e,t){if("render"!=e&&"title"!=e)return t})));delete t.render,delete t.title,o.push(t)}})),console.log(o),a.setMeta(N({},this.uuid,{status:"edit",items:o,moduletype:"form",isunfold:!1}),this.uuid)}}},{key:"_hasMeta",value:function(e){var t,n=this.getStore("meta")||{};return e&&(t=n[e],"Object"===O(t))&&n[e].items?n[e].items:(console.warn("not find meta"),[])}},{key:"getViewMeta",value:function(e){return this._hasMeta(e)}},{key:"setData",value:function(e){var t=e.data,n=void 0===t?[]:t,r=e.shouldForceUpdate,a=void 0===r||r,o=e.callback,i=w(n)?n:this.getData();this.setStore(["data"],i,a,o)}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this.getStore("data");return(t=t.filter((function(t){return!e.includes(t.status)})))||[]}},{key:"refresh",value:function(e){this.forceUpdate&&this.forceUpdate(e)}}])&&T(t.prototype,n),r&&T(t,r),o}(g.BaseStore),F=Object(g.hookFactory)(K);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Y(e);if(t){var a=Y(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return U(this,n)}}function U(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?W(e):t}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(359);var z=["#111111","#555555","#111","#555"],J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(d,e);var t,n,o,c=V(d);function d(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=c.call(this,e)).setStateEve=function(){t.forceUpdate()},t.checkDataType=function(e){var n=t.props,r=n.store,a=n.id,o=r.getMeta()[a].items.find((function(t){return t.attrcode===e}));if(o)return o.itemtype},t.createNewData=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=e.map((function(e,a){if(e.key=e.rowId,e.rowIndex=a,n[e.key]=n[e.key]||{},e.values.pid&&(e.pid=e.values.pid.value),Array.isArray(e.children)){var o=[];t.createNewData(e.children,n,o),n[e.key].childrenKeys=o}return n[e.key].item=e,r.push(e.key),e}));return a},t.itemCheckBoxChange=function(e,n){var r=t.props,a=r.store,o=r.showContextMenu,i=a.getStore("checkedKeys"),c=a.getStore("indeterminateKeys");i[n]=!i[n];var l=a.getStore("isCheckedHasChild");if(l&&o){var s=P(e,n);console.log("设置children选中:  children",s),function e(t){Array.isArray(t)&&t.forEach((function(t){i[t.key]=i[n],Array.isArray(t.children)&&e(t.children)}))}(s)}if(l){var u=function(e){var t=E(P([d[e].item],e)),n=t.length,r=t.filter((function(e){return i[e.key]})).length;n===r?(i[e]=!0,c[e]=!1):r?(i[e]=!1,c[e]=!0):(i[e]=!1,c[e]=!1)};c[n]=!1;for(var d=a.getStore("fullDataObject")||{},f=d[n]&&d[n].item.pid;f;)d[f]&&d[f].item&&u(f),f=d[f]&&d[f].item&&d[f].item.pid}a.setStore("checkedKeys",i,!1),a.setStore("indeterminateKeys",c,!0)},t.selectAllChange=function(e){},t.checkBoxChange_radio=function(e,n){var r=t.props.store,a=r.getStore("checkedKeys");a=a[n]?{}:function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,!0),r.setStore("checkedKeys",a,!1)},t.onCheckboxChangeChild=function(e,n,r,a){var o=t.props,i=o.store,c=o.checkboxChange,l=o.checkedType,s=i.getData();a.stopPropagation(),"radio"===l?t.checkBoxChange_radio(s,n.key):t.itemCheckBoxChange(s,n.key),Object(u.isFunction)(c)&&c(n,r,a),t.forceUpdate()},t.findItem=function(e,t){var n=null;return function e(r){r.map((function(r){return r.rowId===t?(n=r,!0):(!Array.isArray(r.values.children)||!e(r.values.children))&&void 0}))}(e),n},t.createNewCol=function(e,n){var r=t.props,o=r.showCheckBox,i=r.onCellMouseDown,c=r.store,d=r.multipleRowCell,f=t.state.langJson,p=c.getStore("expandedKeys"),h=c.getStore("checkedKeys"),m=c.getStore("indeterminateKeys"),y=c.getStore("searchValue"),v=f&&f["insert-tree-table-009"],g=f&&f["insert-tree-table-010"],k=[];if(!Object(u.isArray)(e)||e.length<1)return[];e.forEach((function(e){if(e.visible){if(e._width=e._width||e.width||120,e.width=e.width||120,e.title=a.a.createElement("span",{fieldid:Object(u.getSysFieldid)(e.attrcode||"opr"),style:{color:z.includes(e.color)?"":e.color}}," ",e.label," "),e.dataIndex=e.attrcode,"customer"!==e.itemtype&&"numberindex"!==e.itemtype)e.hasOwnProperty("render")||(e.render=function(n,r,c){if(r&&r.values.hasOwnProperty(e.attrcode)){if("switch"===e.itemtype)return a.a.createElement("span",{fieldid:Object(u.getSysFieldid)(e.attrcode),onMouseDown:function(t){i&&i(r,c,e.attrcode,e,t)}},r.values[e.attrcode].value?v:g);var l,s,f="";if("residtxt"===e.itemtype){var p=Object(u.getLangCode)(),h=e.languageMeta.filter((function(e){return e.languageCode==p}));h[0]&&(l="1"==h[0].index?"":h[0].index,s=e.attrcode+l)}switch(f=s&&r.values[s]&&(r.values[s].display||r.values[s].value)?r.values[s].display||r.values[s].value||"":r.values[e.attrcode].display||r.values[e.attrcode].value||"",e.itemtype){case"datetimepicker":case"NCTZDatePickClientTime":f=Object(u.changeTime)(f,"YYYY-MM-DD HH:mm:ss");break;case"NCTZDatePickerStart":case"NCTZDatePickerEnd":case"NCTZDatePickClientHourTime":case"datepicker":f=Object(u.changeTime)(f,"YYYY-MM-DD")}switch(e.itemtype){case"NCTZDatePickerStart":case"NCTZDatePickerEnd":case"NCTZDatePickClientHourTime":case"datePickerNoTimeZone":case"datepicker":f=Object(u.formatDatetime)(f,"date");break;case"timepicker":f=Object(u.formatDatetime)(f,"time");break;case"datetimepicker":case"NCTZDatePickClientTime":f=Object(u.formatDatetime)(f,"datetime")}var m={display:""};e.fixed&&"left"===e.fixed&&e.width&&"120"!=String(e.width).replace("px","")&&o&&(m.width=e.width),"string"!=typeof f&&(f+="");var k=y||"",S=k.toLocaleLowerCase(),O=f.toLocaleLowerCase(),w="",C=f,E=O.indexOf(S);k&&-1!==E&&(w=f.substr(0,E),C=f.substr(E+k.length),k=f.substr(E,k.length));var j=t.props.store.getStore("isEllipsis");return a.a.createElement(b,{item:e,beforeStr:w,afterStr:C,searchValue:k,fixedStyle:m,context:f,isEllipsis:j,multipleRowCell:d,index:E,record:r,onCellMouseDown:i})}return a.a.createElement("span",{style:{width:"100%",height:"100%",display:"inline-block"},onMouseDown:function(t){i&&i(r,c,e.attrcode,e,t)}})});else if("customer"===e.itemtype&&e.hasOwnProperty("render")&&void 0===e.alreadyAssignment){var n=e.render;e.alreadyAssignment=!0,e.render=function(t,r,o){return a.a.createElement("span",{fieldid:Object(u.getSysFieldid)("opr"),className:"stop-check-operation-element",onMouseDown:function(t){i&&i(r,o,e.attrcode,e,t)}},n(t,r,o))}}k.push(e)}}));var S=[{title:a.a.createElement("span",{fieldid:Object(u.getSysFieldid)("firstcol")}),attrcode:"checkbox",dataIndex:"checkbox",itemtype:"customer",width:"100px",_width:"100px",render:function(e,n,r){if(o)return a.a.createElement(s.Checkbox,{onMouseDown:function(e){i&&i(n,r,"checkbox",{attrcode:"checkbox",itemtype:"customer"},e)},className:"table-checkbox",checked:h[n.key],indeterminate:m[n.key],onClick:t.onCheckboxChangeChild.bind(W(t),e,n,r)})}}];k[0].fixed&&"left"==k[0].fixed&&(S[0].fixed="left");var O=o?S.concat(k):k,w=O[0].render;O[0].render=null,O[0].render=function(e,t,n){var r;r="[object Boolean]"==Object.prototype.toString.call(t.isLeaf)&&!t.isLeaf||"[object Boolean]"==Object.prototype.toString.call(t.isleaf)&&!t.isleaf?p.includes(t.key)?a.a.createElement("i",{className:"icon iconfont  icon-wenjianjiadakai tree-wenjian treeTableIcon ".concat("stop-check-element")}):a.a.createElement("i",{className:"icon iconfont  icon-wenjianjia tree-wenjian treeTableIcon ".concat("stop-check-element")}):a.a.createElement("i",{className:"dian",style:{display:"none"}});var c=w(e,t,n);return c&&c.props&&c.props.children&&c.props.children[0]&&c.props.children[0].props&&"expend-switch"===c.props.children[0].props.className?c:c&&c.props&&"table-checkbox"===c.props.className?a.a.createElement("span",{fieldid:Object(u.getSysFieldid)("firstcol"),onMouseDown:function(e){i&&i(t,n,"checkbox",{attrcode:"checkbox",itemtype:"customer"},e)}},a.a.createElement("span",{className:"first-col"},c),a.a.createElement("span",{className:"expend-switch"},r)):a.a.createElement("span",{fieldid:Object(u.getSysFieldid)("firstcol"),onMouseDown:function(e){i&&i(t,n,"checkbox",{attrcode:"checkbox",itemtype:"customer"},e)},className:l()({zaiyihang:o})},a.a.createElement("span",{className:"expend-switch"},r),a.a.createElement("span",{className:"first-col"},c))};var C=O[0]._width;return C&&("string"==typeof C&&(C.includes("px")&&(C=C.replace("px","")),C=Number(C)),C+=16*j(n)),O[0].width=C,O},t.onExpand=function(e,n,r){var a=t.props,o=a.store,i=a.expandEve,c=a.collapandEve,l=o.getStore("isCheckedHasChild");e?i&&"function"==typeof i&&(o.setStore("currentRow",n,!1),i(n,l)):Object(u.isFunction)(c)&&c(n),t.forceUpdate()},t.modalContent=function(){var e=t.props,n=e.store,r=e.onAfterEvent,o=e.onBeforeEvent,i=n.getStore("formStore");return a.a.createElement("div",{className:"addModal"},a.a.createElement(S.a,{name:t.uuid,config:{onAfterEvent:r,onBeforeEvent:o},store:i}))},t.delNodeEve=function(){var e=t.props.delNodeCallBack;Object(u.isFunction)(e)&&e(t.uuid)},t.beSureBtnClick=function(){var e=t.props,n=e.modal,r=e.store,a=e.addNodeCallBack,o=e.editNodeCallBack,i=r.getStore("modalType"),c=r.getStore("currentRow"),l=r.getStore("formStore");if(!l.isCheckNow())return!1;var s={values:JSON.parse(JSON.stringify(l.getAllFormValue()))};"add"===i?(s.status=2,Object(u.isFunction)(a)&&a(s,c)):"edit"===i&&Object(u.isFunction)(o)&&o(s,c),n.close("treeTableManyColModal")},t.onRowDoubleClick=function(e,n,r){var a=t.props.ncOnRowDoubleClick;Object(u.isFunction)(a)&&a(e,n,r)},t.onRowClick=function(e,n,r){var a=t.props,o=a.store,i=a.checkOnRowClick,c=a.showCheckBox,l=a.onRowClickEve;o.setStore("currentSelectedRow",e,!1),r.ctrlKey||r.shiftKey||r.metaKey||c&&x(r,i)||(Object(u.isFunction)(l)&&l(e,n,r),t.onCheckboxChangeChild(null,e,n,r))},t.rowClassName=function(e,n){var r=t.props.store.getStore("currentSelectedRow");return r&&r.key==e.key?"tree-table-col-selected":""},t.createContextMenu=function(){var e=t.props,n=e.store,o=e.closeAllEve,i=e.hideExpandAll,c=e.expandAllEve,d=e.hideIncludeChild,f=e.extendRightMenu,p=t.state.langJson,h=n.getData(),m=n.getStore("isCheckedHasChild");return a.a.createElement(r.Fragment,null,!i&&a.a.createElement("li",{className:l()({"menu expand-all":!0}),onClick:function(){var e=[];!function t(n){n.forEach((function(n){e.push(n.key),Array.isArray(n.children)&&t(n.children)}))}(h),n.setStore("expandedKeys",e),Object(u.isFunction)(c)&&c()}},p["insert-tree-table-0013"]||"全部展开"),a.a.createElement("li",{className:l()({"menu close-all":!0}),onClick:function(){n.setStore("expandedKeys",[]),Object(u.isFunction)(o)&&o()}},p["insert-tree-table-0014"]||"全部收起"),!d&&a.a.createElement("li",{className:l()({"menu include-child":!0}),onClick:function(){n.setStore("isCheckedHasChild",!m)}},a.a.createElement(s.Checkbox,{className:"include-child-checkbox",checked:m,onChange:function(){n.setStore("isCheckedHasChild",!m)}}),a.a.createElement("span",{className:l()({"include-child-selected":m})}," ",p["insert-tree-table-0015"]||"包含下级")),Object(u.isFunction)(f)&&f())},t.getColSetConfig=function(){var e=t.props,n=e.id,r=(0,e.store.getMeta)();return{appcode:r.appcode||r.code||u.pageTo.getAppCode(),pagecode:r.pagecode||u.pageTo.getPageCode(),areaCode:n}},t.state={langJson:{},_:""};var n=e.store,o=e.id,i=e.isCheckedHasChild,f=e.async;n.setStore("name",o,!1),t.uuid=n.getStore("uuid");var p=0,h=window.screen.width;return p=h<=1919>1440?"480px":h>1919?"560px":"400px",n.setStore("tableHeight",p,!1),n.setStore("isCheckedHasChild",i,!1),n.setStore("async",f,!1),t}return t=d,(n=[{key:"componentDidMount",value:function(){}},{key:"UNSAFE_componentWillMount",value:function(){var e=this,t=this.props.store.setCache;Object(u.getMultiLang)({moduleId:"containers_insert_tree_table",callback:function(n){t("langJson",n||{}),e.setState({langJson:n})}})}},{key:"componentWillReceiveProps",value:function(e){var t=e.store,n=e.isCheckedHasChild,r=e.async;Object(u.isUndefined)(n)&&t.setStore("isCheckedHasChild",n,!1),t.setStore("async",r,!1)}},{key:"componentWillUnMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,n=t.modal,r=t.id,o=t.store,c=t.showCheckBox,d=void 0!==c&&c,f=t.checkedType,p=void 0===f?"checkbox":f,h=t.checkboxChange,m=t.scrollConfig,y=t.isDrag,b=void 0===y||y,v=t.adaptionHeight,g=void 0===v||v,k=t.otherAreaHeight,S=t.inModal,O=void 0!==S&&S,w=t.fieldid,C=t.isLazyload,E=void 0===C||C,j=t.addBlankCol,x=void 0===j||j,P=t.showContextMenu,_=void 0!==P&&P,N=t.extendRightMenu,T=t.showWidthAndHeightConfig,D=void 0===T||T,A=this.state.langJson,I=o.getStore,M=o.getViewMeta,R=o.getData,B=o.setStore,K=M(r),F={},L=R();if(!K||0===K.length||!L)return null;var H=this.createNewData(L,F);o.setStore("fullDataObject",F,!1);var q=JSON.parse(JSON.stringify(H)),V=I("expandedKeys"),U=I("tableHeight");return a.a.createElement("div",{id:r,className:"treeTableManyCol",fieldid:Object(u.getSysFieldid)("".concat(w||r,"_table"))},d&&"radio"!==p&&a.a.createElement(s.Selectable,{canvas:"#".concat(r),selector:" tbody tr ",unitKey:"key",disabled:"radio"===p||"slide",userSelect:!0,startItem:"",onSelect:function(e,t,n){var r=n.currentKey;if(Object.keys(e).length>0)if("ctrl"===t)B(["checkedKeys",r],e[r],!0,(function(){var e=F[r].item;console.log(F,r,e,"数据的问题处理"),Object(u.isFunction)(h)&&e&&h(e,e.rowIndex,{})}));else{for(var a in B("checkedKeys",{}),e)e.hasOwnProperty(a)&&B(["checkedKeys",a],e[a],!1);o.refresh((function(){for(var t in e)if(e.hasOwnProperty(t)&&Object(u.isFunction)(h)){var n=F[t];e[t]&&h(n,n.rowIndex,{})}}))}}}),a.a.createElement(s.Table,{lazyload:E,className:l()("tree-table-manyCol-container",{"firstcol-ellipsis":this.props.store.getStore("isEllipsis")}),expandedRowKeys:V,columns:this.createNewCol(K,q),columnKey:"attrcode",data:H,onExpand:this.onExpand,onExpandedRowsChange:function(e){o.setStore("expandedKeys",e)},bodyDisplayInRow:!1,foldingRowChange:function(e){o.setStore("isEllipsis",e)},scroll:m||{y:U},bodyStyle:{minHeight:m&&m.y?m.y:60},onRowDoubleClick:this.onRowDoubleClick,adaptionHeight:g,otherAreaHeight:k,inModal:O,onRowClick:this.onRowClick,isDrag:b,ref:function(t){e.dom=i.a.findDOMNode(t)},rowClassName:this.rowClassName,addBlankCol:x,extendRightMenu:_?this.createContextMenu():Object(u.isFunction)(N)?N():null,cancelCustomRightMenu:!0,colsSettingParam:this.getColSetConfig(),showWidthAndHeightConfig:D}),A?n.createModal("delNode",{title:A["insert-tree-table-001"],content:A["insert-tree-table-002"],beSureBtnClick:this.delNodeEve.bind(this),backdrop:"static"}):null,n.createModal("treeTableManyColModal",{content:this.modalContent.call(this),beSureBtnClick:this.beSureBtnClick.bind(this),cancelBtnClick:function(){n.close("treeTableManyColModal")},size:"lg",userControl:!0,backdrop:"static"}))}}])&&H(t.prototype,n),o&&H(t,o),d}(g.BaseComponent);J.displayName="TreeTable",J.useTreeTable=F;var Z=J;function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){Q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ee(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var te={add:"新增节点",edit:"编辑节点"},ne=function(e){var t=this.treeTableDataSource[e];return t||(t=F(),this.treeTableDataSource[e]=t,t.setMeta(this.meta.getMeta()),void console.warn("所操作的表格中无ID为".concat(e,"的数据")))};function re(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;t=JSON.parse(JSON.stringify(t));for(var i=n.key,c=e.length,l=0;l<c;l++){var s=e[l];if(s.rowId===i)return a&&a.length&&fe(e[l].children,a),e[l].children=t,o&&r[s.rowId]&&de(t,r),!0;if(Array.isArray(s.children)){var u=re(s.children,t,n,r,a,o);if(u)return!1}}}function ae(e,t,n){return Array.isArray(e)?e.length>0&&!e[0].values[t]?(console.warn("addRowId方法，没有找到参数".concat(t)),!1):void e.forEach((function(e){e.key=e.rowId=e.values[t].value,n&&n.push(e.values[t].value),Array.isArray(e.children)&&ae(e.children,t,n)})):(console.warn("addRowId方法，第一个参数应为数组"),!1)}function oe(e){e.forEach((function(e){e.hasOwnProperty("isleaf")&&!e.isleaf&&(e.children=e.children||[])}))}function ie(e,t){t=JSON.parse(JSON.stringify(t));for(var n=e.length;n--;){var r=e[n];if(r.rowId===t.rowId)return e[n]=X(X({},e[n]),t),!0;if(Array.isArray(r.children)&&ie(r.children,t))return!1}}function ce(e,t,n,r){t=JSON.parse(JSON.stringify(t));var a=null;if(n)a=n.key;else{if(!t.values.pid)return console.error("树状表添加子节点的方法没找到pid"),!1;a=t.values.pid.value}for(var o=e.length;o--;){var i=e[o];if(i.rowId===a)return t.values.pid||(t.values.pid={value:a}),e[o]&&r&&(e[o].isleaf=!1),Array.isArray(e[o].children)?e[o].children.push(t):(r&&(e[o].isleaf=!1),e[o].children=[t]),!0;if(Array.isArray(i.children)&&ce(i.children,t,n,r))return!1}}function le(e,t,n){t=JSON.parse(JSON.stringify(t));for(var r=n.key,a=e.length,o=0;o<a;o++){var i=e[o];if(i.rowId===r)return e.splice(o+1,0,t),!0;if(Array.isArray(i.children)&&le(i.children,t,n))return!1}}function se(e,t){for(var n=e.length,r=0;r<n;r++){var a=e[r];if(a.rowId===t)return e.splice(r,1),!0;if(Array.isArray(a.children)&&se(a.children,t))return!1}}function ue(e,t){for(var n=e.length;n--;){var r=e[n];if(r.rowId===t)return Array.isArray(r.children)&&0===r.children.length&&delete r.children,!0;if(Array.isArray(r.children)&&ue(r.children))return!1}}function de(e,t){Array.isArray(e)&&e.forEach((function(e){t[e.key]=!0,Array.isArray(e.children)&&de(e.children)}))}function fe(e,t){Array.isArray(e)&&e.forEach((function(e){var n=t.indexOf(e.key);-1!==n&&t.splice(n,1),Array.isArray(e.children)&&fe(e.children,t)}))}function pe(e,t){return P(e,t)}function he(e){return j(e)}function me(e,t){return x(e,t)}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var be=["#111111","#555555","#111","#555"];n(359);var ve=!1,ge=0,ke=window.screen.width;ge=ke<=1919>1440?"480px":ke>1919?"560px":"400px";var Se=null;function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ce={TreeTableManyCol:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.expandEve,c=n.collapandEve,d=n.async,f=n.editNodeCallBack,p=n.addNodeCallBack,h=n.delNodeCallBack,m=n.onAfterEvent,y=n.showCheckBox,g=void 0!==y&&y,k=n.checkedType,S=void 0===k?"checkbox":k,O=n.checkboxChange,w=n.scrollConfig,C=n.ncOnRowDoubleClick,E=n.isDrag,j=void 0===E||E,x=n.multipleRowCell,P=void 0!==x&&x,_=n.adaptionHeight,N=void 0===_||_,T=n.inModal,D=void 0!==T&&T,A=n.checkOnRowClick,I=void 0===A||A,M=n.fieldid,R=n.onRowClickEve,B=n.isLazyload,K=void 0===B||B,F=n.addBlankCol,L=void 0===F||F,H=n.showContextMenu,q=void 0!==H&&H,V=n.expandAllEve,U=n.closeAllEve,W=n.hideExpandAll,Y=void 0!==W&&W,z=n.hideIncludeChild,J=void 0!==z&&z,Z=n.onCellMouseDown,G=n.extendRightMenu,X=n.isCheckedHasChild,Q=void 0!==X&&X,$=!1,ee=this;this.state.treeTableCol.hasOwnProperty(e)||(this.state.treeTableCol[e]={firstTime:!0,async:d,expandedKeys:[],checkedKeys:{},tableHeight:ge,isEllipsis:!0});var te=this.state.meta[e];if(te&&this.state.treeTableCol[e].data){var ne=this.state.treeTableCol[e];void 0===ne.isCheckedHasChild&&(ne.isCheckedHasChild=Q);var re=ne.data,ae=JSON.parse(JSON.stringify(re)),oe=Object(u.cloneObj)(te),ie=function(e,t,n){ve||(ne.multilingual=e,v.lang=e,ee.setState({treeTableCol:ee.state.treeTableCol},(function(){ve=!0})))};if(Object(u.getMultiLang)({moduleId:"containers_insert_tree_table",callback:ie}),ne.firstTime){Se=e+"form";var ce=[];if(!Object(u.isArray)(oe.items))return void console.error("树状表模板中，items应为数组,请参考文档");oe.items.map((function(e){if("customer"!==e.itemtype){var t=JSON.parse(JSON.stringify(e||{},(function(e,t){if("render"!=e&&"title"!=e)return t})));delete t.render,delete t.title,ce.push(t)}})),this.state.meta[Se]={moduletype:"form",items:ce,status:"edit"},this.use.form(Se),this.formDataSource[Se].setMeta(this.state.meta,Se),ne.firstTime=!1}var le=function(){t.setState({treeTableCol:t.state.treeTableCol})},se={},ue=function e(t){return t.map((function(t,n){return t.key=t.rowId,t.rowIndex=n,t.values.pid&&(t.pid=t.values.pid.value),Array.isArray(t.children)&&e(t.children),se[t.key]=t,t}))},de=ue(ae),fe=JSON.parse(JSON.stringify(de)),ke=function(e,t){if(ne.checkedKeys[t]=!ne.checkedKeys[t],ne.isCheckedHasChild&&q){var n=pe(e,t);console.log("设置children选中:  children",n),function e(n){Array.isArray(n)&&n.forEach((function(n){ne.checkedKeys[n.key]=ne.checkedKeys[t],Array.isArray(n.children)&&e(n.children)}))}(n)}},Oe=function(e,t){ne.checkedKeys[t]?ne.checkedKeys={}:ne.checkedKeys=ye({},t,!0)},we=function(e,t,n,r){r.stopPropagation(),"radio"===S?Oe(ne.data,t.key):ke(ne.data,t.key),Object(u.isFunction)(O)&&O(t,n,r),le()},Ce=function(e){var n=ne.multilingual&&ne.multilingual["insert-tree-table-009"],r=ne.multilingual&&ne.multilingual["insert-tree-table-010"],o=[];e.forEach((function(e){if(e.visible){if(e._width=e._width||e.width||120,e.width=e.width||120,e.title=a.a.createElement("span",{fieldid:Object(u.getSysFieldid)(e.attrcode||"opr"),style:{color:be.includes(e.color)?"":e.color}}," ",e.label," "),e.dataIndex=e.attrcode,"customer"!==e.itemtype&&"numberindex"!==e.itemtype)e.hasOwnProperty("render")||(e.render=function(t,o,i){if(o&&o.values.hasOwnProperty(e.attrcode)){if("switch"===e.itemtype)return a.a.createElement("span",{fieldid:Object(u.getSysFieldid)(e.attrcode),onMouseDown:function(t){Z&&Z(o,i,e.attrcode,e,t)}},o.values[e.attrcode].value?n:r);var c,l,s="";if("residtxt"===e.itemtype){var d=Object(u.getLangCode)(),f=e.languageMeta.filter((function(e){return e.languageCode==d}));f[0]&&(c="1"==f[0].index?"":f[0].index,l=e.attrcode+c)}s=l&&(o.values[l].display||o.values[l].value)?o.values[l].display||o.values[l].value||"":o.values[e.attrcode].display||o.values[e.attrcode].value||"";var p={display:""};e.fixed&&"left"===e.fixed&&e.width&&"120"!=String(e.width).replace("px","")&&g&&(p.width=e.width),"string"!=typeof s&&(s+="");var h=ne.searchValue||"",m=h.toLocaleLowerCase(),y=s.toLocaleLowerCase(),v="",k=s,S=y.indexOf(m);return h&&-1!==S&&(v=s.substr(0,S),k=s.substr(S+h.length),h=s.substr(S,h.length)),a.a.createElement(b,{item:e,beforeStr:v,afterStr:k,searchValue:h,fixedStyle:p,context:s,isEllipsis:ne.isEllipsis,multipleRowCell:P,index:S,record:o,onCellMouseDown:Z})}return a.a.createElement("span",{style:{width:"100%",height:"100%",display:"inline-block"},onMouseDown:function(t){Z&&Z(o,i,e.attrcode,e,t)}})});else if("customer"===e.itemtype&&e.hasOwnProperty("render")&&void 0===e.alreadyAssignment){var t=e.render;e.alreadyAssignment=!0,e.render=function(n,r,o){return a.a.createElement("span",{fieldid:Object(u.getSysFieldid)("opr"),className:"stop-check-operation-element",onMouseDown:function(t){Z&&Z(r,o,e.attrcode,e,t)}},t(n,r,o))}}o.push(e)}}));var i=[{title:a.a.createElement("span",{fieldid:Object(u.getSysFieldid)("firstcol")}),attrcode:"checkbox",dataIndex:"checkbox",itemtype:"customer",width:"100px",_width:"100px",render:function(e,n,r){if(g)return a.a.createElement(s.Checkbox,{onMouseDown:function(e){Z&&Z(n,r,"checkbox",{attrcode:"checkbox",itemtype:"customer"},e)},className:"table-checkbox",checked:ne.checkedKeys[n.key],onClick:we.bind(t,e,n,r)})}}];o[0].fixed&&"left"==o[0].fixed&&(i[0].fixed="left");var c=g?i.concat(o):o,d=c[0].render;c[0].render=null,c[0].render=function(e,t,n){var r;r="[object Boolean]"==Object.prototype.toString.call(t.isLeaf)&&!t.isLeaf||"[object Boolean]"==Object.prototype.toString.call(t.isleaf)&&!t.isleaf?ne.expandedKeys.includes(t.key)?a.a.createElement("i",{className:"icon iconfont  icon-wenjianjiadakai tree-wenjian treeTableIcon ".concat("stop-check-element")}):a.a.createElement("i",{className:"icon iconfont  icon-wenjianjia tree-wenjian treeTableIcon ".concat("stop-check-element")}):a.a.createElement("i",{className:"dian",style:{display:"none"}});var o=d(e,t,n);return o&&o.props&&o.props.children&&o.props.children[0]&&o.props.children[0].props&&"expend-switch"===o.props.children[0].props.className?o:o&&o.props&&"table-checkbox"===o.props.className?a.a.createElement("span",{fieldid:Object(u.getSysFieldid)("firstcol"),onMouseDown:function(e){Z&&Z(t,n,"checkbox",{attrcode:"checkbox",itemtype:"customer"},e)}},a.a.createElement("span",{className:"first-col"},o),a.a.createElement("span",{className:"expend-switch"},r)):a.a.createElement("span",{fieldid:Object(u.getSysFieldid)("firstcol"),onMouseDown:function(e){Z&&Z(t,n,"checkbox",{attrcode:"checkbox",itemtype:"customer"},e)},className:l()({zaiyihang:g})},a.a.createElement("span",{className:"expend-switch"},r),a.a.createElement("span",{className:"first-col"},o))};var f=c[0]._width;return!$&&f&&("string"==typeof f&&(f.includes("px")&&(f=f.replace("px","")),f=Number(f)),f+=16*he(fe),$=!0),c[0].width=f,c},Ee=function(e,t,n){e?o&&"function"==typeof o&&(ne.currentRow=t,o(t,ne.isCheckedHasChild)):Object(u.isFunction)(c)&&c(t),le()},je=function(){return a.a.createElement("div",{className:"addModal"},t.form.createForm(Se,{onAfterEvent:m}))},xe=function(){Object(u.isFunction)(h)&&h(Se)},Pe=function(){if(!t.form.isCheckNow(Se))return!1;var e=t.form.getAllFormValue(Se).rows[0];"add"===ne.modalType?(e.status=2,Object(u.isFunction)(p)&&p(e,ne.currentRow)):"edit"===ne.modalType&&Object(u.isFunction)(f)&&f(e,ne.currentRow),t.modal.close("treeTableManyColModal")},_e=function(e,t,n){Object(u.isFunction)(C)&&C(e,t,n)},Ne=function(e,t,n){ne.currentSelectedRow=e,n.ctrlKey||n.shiftKey||n.metaKey||g&&me(n,I)||(Object(u.isFunction)(R)&&R(e,t,n),we(null,e,t,n))},Te=function(e,t){return ne.currentSelectedRow&&ne.currentSelectedRow.key==e.key?"tree-table-col-selected":""},De=function(){var e=ne.multilingual||{};return a.a.createElement(r.Fragment,null,!Y&&a.a.createElement("li",{className:l()({"menu expand-all":!0}),onClick:function(){var e=[];!function t(n){n.forEach((function(n){e.push(n.key),Array.isArray(n.children)&&t(n.children)}))}(ne.data),ne.expandedKeys=e,le(),Object(u.isFunction)(V)&&V()}},e["insert-tree-table-0013"]||"全部展开"),a.a.createElement("li",{className:l()({"menu close-all":!0}),onClick:function(){ne.expandedKeys=[],le(),Object(u.isFunction)(U)&&U()}},e["insert-tree-table-0014"]||"全部收起"),!J&&a.a.createElement("li",{className:l()({"menu include-child":!0}),onClick:function(){ne.isCheckedHasChild=!ne.isCheckedHasChild,le()}},a.a.createElement(s.Checkbox,{className:"include-child-checkbox",checked:ne.isCheckedHasChild,onChange:function(){ne.isCheckedHasChild=!ne.isCheckedHasChild,le()}}),a.a.createElement("span",{className:l()({"include-child-selected":ne.isCheckedHasChild})}," ",e["insert-tree-table-0015"]||"包含下级")),Object(u.isFunction)(G)&&G())};return a.a.createElement("div",{id:e,className:"treeTableManyCol",fieldid:Object(u.getSysFieldid)("".concat(M||e,"_table"))},g&&"radio"!==S?a.a.createElement(s.Selectable,{canvas:"#".concat(e),selector:" tbody tr ",unitKey:"key",disabled:"radio"===S||"slide",userSelect:!0,startItem:"",onSelect:function(e,n,r){var a=r.currentKey;if(ne.data.length>0)if("ctrl"===n)ne.checkedKeys[a]=e[a],t.setState({treeTableCol:t.state.treeTableCol},(function(){var e=se[a];Object(u.isFunction)(O)&&e&&O(e,e.rowIndex,{})}));else{for(var o in ne.checkedKeys={},e)e.hasOwnProperty(o)&&(ne.checkedKeys[o]=e[o]);t.setState({treeTableCol:t.state.treeTableCol},(function(){for(var t in e)if(e.hasOwnProperty(t)&&Object(u.isFunction)(O)){var n=se[t];e[t]&&O(n,n.rowIndex,{})}}))}}}):"",a.a.createElement(s.Table,{lazyload:K,className:"tree-table-manyCol-container",expandedRowKeys:ne.expandedKeys,columns:Ce(te.items),columnKey:"attrcode",data:de,onExpand:Ee.bind(this),onExpandedRowsChange:function(e){ne.expandedKeys=e,le()},bodyDisplayInRow:!1,foldingRowChange:function(e){ne.isEllipsis=e,le()},scroll:w||{x:!0,y:this.state.treeTableCol[e].tableHeight},onRowDoubleClick:_e,adaptionHeight:N,inModal:D,onRowClick:Ne,isDrag:j,ref:function(e){t.dom=i.a.findDOMNode(e)},rowClassName:Te,addBlankCol:L,extendRightMenu:q?De():Object(u.isFunction)(G)?G():null,cancelCustomRightMenu:!0}),ne.multilingual?this.modal.createModal("delNode",{title:ne.multilingual["insert-tree-table-001"],content:ne.multilingual["insert-tree-table-002"],beSureBtnClick:xe.bind(this),backdrop:"static"}):null,this.modal.createModal("treeTableManyColModal",{content:je.call(this),beSureBtnClick:Pe.bind(this),cancelBtnClick:function(){t.modal.close("treeTableManyColModal")},size:"lg",userControl:!0,backdrop:"static"}))}},treeTableCol:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this,r=n.treeTableDataSource[e];r||(r=F(),n.treeTableDataSource[e]=r,r.setMeta(n.meta.getMeta(),e,!1),console.log(n));var o=t.async,i=ee(t,["async"]);return a.a.createElement(Z,$({async:o,store:r,id:e,modal:this.modal},i))},initTreeTableData:function(e,t,n,r,a){if(void 0===n)return console.warn("树状表addRowId方法，第三个参数需要传表示行rowid 的字段"),!1;var o=ne.call(this,e);if(o){var i=o.getStore(),c=i.async,l=i.isCheckedHasChild,s=i.checkedKeys;c&&oe(t);var u,d=[];if(r?(u=ae(t,n,d),l&&s&&t.map((function(e){s[e.key]&&Array.isArray(e.children)&&de(e.children,s)}))):(u=ae(t,n),a&&o.setStore("expandedKeys",a,!1)),!1===u)return console.warn("树状表addRowId方法，没有找到表示rowId的字段，请检查数据中是否存在".concat(n,"字段")),!1;o.setData({data:t,shouldForceUpdate:!1}),o.setStore("rowId",n,!1),l&&o.setStore("checkedKeys",s,!1),r&&o.setStore("expandedKeys",d,!1),o.setCache("cacheData",JSON.parse(JSON.stringify(t))),o.setStore("searchValue",null,!0)}},setChildNode:function(e,t,n,r){if(!e||!t||!n)return console.warn("树状表setChildNode 方法参数不正确"),!1;if(!Array.isArray(t))return console.warn("树状表setChildNode 方法,第二个参数应为数组"),!1;var a=ne.call(this,e);if(a){var o=a.getStore("rowId"),i=a.getStore("async"),c=a.getStore("checkedKeys"),l=a.getStore("expandedKeys"),s=a.getData(),u=a.getCache("cacheData");r=r||a.getStore("isCheckedHasChild"),i?(oe(t),ae(t,o),re(s,t,n,c,l,r),re(u,t,n,c,l,r),a.setStore("searchValue",null)):console.warn("setChildNode方法只能异步加载时调用")}},editRowEve:function(e,t){var n=ne.call(this,e);if(n){var r=n.getStore("rowId"),a=n.getData(),o=n.getCache("cacheData");if(!t.values[r])return console.warn&&console.warn("树状表editRowEve 方法,第二个参数中没有找到表示RowId的字段，请检查数据中是否有".concat(r,"字段")),!1;t.rowId=t.values[r].value,oe([t]),ie(a,t),ie(o,t),n.setStore("searchValue",null)}},addChildRowEve:function(e,t){var n=ne.call(this,e);if(n){var r=n.getStore("rowId"),a=n.getStore("currentRow"),o=n.getData(),i=n.getCache("cacheData");console.log(t,a,o,i);var c=function(e){var t=e.values[r];e.values[r]=t&&void 0!==t.value&&null!==t.value?t:{value:Object(u.getSafeRandom)()},e.key=e.rowId=e.values[r].value,oe([e]),ce(o,e,a,!0),ce(i,e,a,!0),n.setStore("searchValue",null,!1)};Array.isArray(t)?t.forEach((function(e){c(e)})):c(t),n.refresh()}},addBrotherRow:function(e,t){var n=ne.call(this,e);if(n){var r=n.getStore("rowId"),a=n.getStore("currentRow"),o=n.getData(),i=n.getCache("cacheData");if(!t.values[r])return console.warn("树状表addBrotherRow 方法,第二个参数中没有找到表示RowId的字段，请检查数据中是否有".concat(r,"字段")),!1;t.rowId=t.values[r].value,oe([t]),le(o,t,a),le(i,t,a),n.setStore("searchValue",null)}},delRowByPk:function(e,t){var n=ne.call(this,e);if(n){var r=n.getData(),a=n.getCache("cacheData"),o=t.key;se(r,o),se(a,o),t.pid&&(ue(r,t.pid),ue(a,t.pid)),n.setData({data:r,shouldForceUpdate:!1}),n.setCache("cacheData",a),n.setStore("searchValue",null)}},createNewData:function(e){if(!Array.isArray(e))return console.warn("createTreeData方法，参数应该为数组"),!1;var t=new Map;e.forEach((function(e){e.values.pid&&e.values.pid.value||(e.values.pid={value:"root"}),t.get(e.values.pid.value)?t.get(e.values.pid.value).push(e):t.set(e.values.pid.value,[e])}));var n=function e(n){return t.get(n)?t.get(n).map((function(t){return t.children=e(t.values.refpk.value),t})):null}("root")||[];return function e(t){t.forEach((function(t){t.checked?t.checked=!0:t.checked=!1,Array.isArray(t.children)?(t.isleaf=!1,e(t.children)):t.isleaf=!0}))}(n),n},getAllValue:function(e){var t=ne.call(this,e);if(t)return t.getData()},getValueByRowId:function(e,t){var n=ne.call(this,e);if(n)return function e(t,n){for(var r=t.length;r--;){var a=t[r];if(a.rowId===n)return a;if(Array.isArray(a.children)){var o=e(a.children,n);if(o)return o}}}(n.getData(),t)},getExpandedRowKeys:function(e){var t=ne.call(this,e);if(t)return t.getStore("expandedKeys")},showModal:function(e,t,n){var r=ne.call(this,e);if(r){var a=r.getCache("langJson"),o=r.getStore("formStore");r.getStore("uuid");te.add=a["insert-tree-table-012"],te.edit=a["insert-tree-table-011"],r.setStore("currentRow",t,!1);var i=JSON.parse(JSON.stringify("edit"===n?t.values:{}));console.log(i,o),o.emptyAllFormValue(),o.setAllFormValue(i),r.setStore("modalType",n,!0),this.modal.show("treeTableManyColModal",{title:"".concat(te[n])})}},emptyAllData:function(e){var t=ne.call(this,e);t&&(t.setData({data:[],shouldForceUpdate:!1}),t.setCache("cacheData",[]),t.setStore("searchValue",null))},openRow:function(e,t){var n=ne.call(this,e);if(n){var r=n.getStore("expandedKeys");!r.find((function(e){return e===t}))&&r.push(t),n.refresh()}},closeRow:function(e,t){var n=ne.call(this,e);if(n){var r=n.getStore("expandedKeys"),a=r.findIndex((function(e){return e===t}));r.splice(a,1),n.refresh()}},getSelectedRow:function(e){var t=ne.call(this,e);if(t){var n=t.getData(),r=t.getStore("expandedKeys"),a=t.getStore("isCheckedHasChild"),o=function(e,t){var n=t.getStore("checkedKeys"),r=[];return function e(t){t.map((function(t){n[t.key]&&r.push(t),Array.isArray(t.children)&&e(t.children)}))}(e),r}(n,t),i=JSON.parse(JSON.stringify(o));return i=i.map((function(e){var t=e.children,n=ee(e,["children"]);return r.includes(e.key)||t&&(!Array.isArray(t)||0!==t.length)||!1!==e.isleaf&&a&&(n.isCheckHasChild=!0),n}))}},searchTreeTable:function(e){var t=e.moduleId,n=e.searchValue,r=e.filters,a=void 0===r?[]:r,o=e.expanded,i=void 0===o||o,c=e.defaultExpandAllRows,l=void 0!==c&&c,s=ne.call(this,t);if(s){"[object Array]"!==Object.prototype.toString.call(a)&&(a=[String(a)]);var u=s.getCache("cacheData")||s.getData(),d=[];s.setStore("expandedKeys",[],!1);var f=function e(t){var n=t.data,r=t.expandedKeys,a=t.searchValue,o=t.filters,i=t.expanded,c=t.defaultExpandAllRows,l=t.expectData,s=void 0===l?[]:l;if(!a||0===n.length)return n||[];var u=!1,d=o.length;return a=a.toLocaleLowerCase(),n.map((function(t){var n,l=!1,f=t.values,p=JSON.parse(JSON.stringify(t,(function(e,t){return"children"===e&&"[object Array]"===Object.prototype.toString.call(t)?null:t})));for(var h in f)if(u=0===d||-1!==o.indexOf(h),n=String(f[h].display||f[h].value).toLocaleLowerCase(),u&&n&&-1!==n.indexOf(a)){l=!0;break}Array.isArray(t.children)&&(p.children=e({data:t.children,expandedKeys:r,searchValue:a,filters:o,expanded:i,defaultExpandAllRows:c,expectData:[]}),0===p.children.length&&(p.children=null)),(l||p.children&&p.children.length>0)&&s.push(p),(l||p.children&&p.children.length>0)&&(i||c)&&r.push(t.key||t.rowId)})),s}({data:u,searchValue:n,filters:a,expandedKeys:d,expanded:i,defaultExpandAllRows:l,expectData:[]});s.setData({data:f,shouldForceUpdate:!1}),console.log(u),s.setStore("searchValue",n,!1),s.setStore("expandedKeys",d,!1),s.refresh((function(){}))}},updataDataSource:function(e,t){var n=ne.call(this,e);if(n){var r=n.getData();if(t){var a=t(JSON.parse(JSON.stringify(r)));Array.isArray(a)&&(n.setCache("cacheData",a),n.setData({data:a}))}else console.warn("请传回调参数，并且返回新的数据源")}},setCheckedKeys:function(e,t,n){var r=ne.call(this,e);if(r){var a=r.getStore("checkedKeys");t=n?Object.assign(a,t):Object.assign({},t),r.setStore("checkedKeys",t)}},setSelectedRow:function(e,t){var n=ne.call(this,e);n&&n.setStore("currentSelectedRow",t)},updateChildRow:function(e,t,n){var r=ne.call(this,e);if(r){var a=r.getStore("rowId"),o=r.getStore("currentRow"),i=r.getData(),c=[],l="root";o&&(l=o.key),n&&(l=n.key);!function e(t,n){t.length&&t.map((function(t){var r=t.values[a];t.values[a]=r&&void 0!==r.value?r:{value:Object(u.getSafeRandom)()},t.key=t.rowId=t.values[a].value,t.values.pid||(t.values.pid={value:n}),t.hasOwnProperty("isleaf")&&!t.isleaf&&(t.children=t.children||[],e(t.children,t.key))}))}(c=Array.isArray(t)?t:[c],l),function e(t,n){for(var r=t.length;r--;){var a=t[r];if(a.rowId===n)return t[r].children=c,t[r].isleaf=!1,!0;if(Array.isArray(a.children)&&e(a.children,n))return!0}}(i,l)||(i=c),r.setStore("searchValue",null)}}};function Ee(){return this.register("treeTable",F),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){we(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},je.call(this,Ce))}function je(e){for(var t={},n=0,r=Object.keys(e);n<r.length;n++){var a=r[n];t[a]=e[a].bind(this)}return t}Ee.component=Z,Ee.displayName="TreeTable",Ee.unfinished=["treeTableUnFinishedApi"]},42:function(e,t){e.exports=i},43:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Con=t.Row=t.Col=void 0;var r=i(n(639)),a=i(n(640)),o=i(n(641));function i(e){return e&&e.__esModule?e:{default:e}}t.Col=r.default,t.Row=a.default,t.Con=o.default},44:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));function r(e){var t=e.props,n=e.autoFocusDeferred,r=e.status,a=t.name,o=t.getHotKeyConfig?t.getHotKeyConfig():{},i=o.withHotKeyChange,c=o.meta;if(!t.getHotKeyConfig)return console.warn("some form hotkey invalid");var l,s=c[a]&&c[a].moduletype;return l=r||(c[a]&&c[a].status||"browse"),!(void 0!==a&&!1!==i&&void 0!==s&&!n&&"browse"!==l)}function a(e){var t=e.name,n=e.high_hotkey,r=(e.getHotKeyConfig,e.getHotKeyConfig?e.getHotKeyConfig():{}),a=r.withHotKeyChange,o=r.meta;if(!e.getHotKeyConfig)return console.warn("some form hotkey invalid");var i=n.store;n.tableId;if(!i)return!0;var c="edit"!==i.getTableProps("status"),l=i.getData(),s=o[t]&&o[t].items;return l=void 0===l?[]:l,c||0===l.length||!a||void 0===s}function o(e,t){var n=e.name,r=e.high_hotkey,a=(e.getHotKeyConfig,e.getHotKeyConfig?e.getHotKeyConfig():{}),o=a.withHotKeyChange,i=a.meta;if(!e.getHotKeyConfig)return console.warn("some form hotkey invalid");var c=r.store;r.tableId;if(!c)return!0;var l="edit"!==c.getTableProps("status"),s=c.getData(),u=i[n]&&i[n].items;return s=void 0===s?[]:s,t||l||0===s.length||!o||void 0===u}},47:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},49:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var r=n(1),a=n(19);function o(e,t){var n=document.querySelector("#".concat(r.config.hotKeyModuleIdPrefix,"-").concat(t)),o=function(e){return Array.prototype.find.call(e.classList,(function(e){return e.startsWith("js-type")})).split("-").pop()}(n.querySelector(".".concat(e.firstItem)));void 0===a.a[o]?a.a.normal(n):a.a[o](n)}function i(e,t){}},5:function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var i=a.apply(null,r);i&&e.push(i)}else if("object"===o)for(var c in r)n.call(r,c)&&r[c]&&e.push(c)}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},50:function(e,t,n){"use strict";function r(e,t,n){for(var r=e,a=t;null!==r&&"-1"===r.getAttribute("tabindex");)a+=1,r="up"===n?r.previousElementSibling:r.nextElementSibling;return a}n.d(t,"a",(function(){return r}))},56:function(e,t){e.exports=c},58:function(e,t,n){var r=n(155),a="object"==typeof self&&self&&self.Object===Object&&self,o=r||a||Function("return this")();e.exports=o},59:function(e,t,n){var r=n(78)(Object,"create");e.exports=r},6:function(e,t){e.exports=r},60:function(e,t,n){var r=n(99);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},61:function(e,t,n){var r=n(335);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},63:function(e,t){var n=Object.prototype.toString;e.exports=function(e){return!0===e||!1===e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Boolean]"==n.call(e)}},639:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=l(n(5)),o=n(0),i=l(o),c=l(n(2));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var a=n[r],o=Object.getOwnPropertyDescriptor(t,a);o&&o.configurable&&void 0===e[a]&&Object.defineProperty(e,a,o)}}(e,t))}var f={componentClass:c.default.oneOfType([c.default.element,c.default.string]),xs:c.default.number,sm:c.default.number,md:c.default.number,lg:c.default.number,xsOffset:c.default.number,smOffset:c.default.number,mdOffset:c.default.number,lgOffset:c.default.number,xsPush:c.default.number,smPush:c.default.number,mdPush:c.default.number,lgPush:c.default.number,xsPull:c.default.number,smPull:c.default.number,mdPull:c.default.number,lgPull:c.default.number},p=["lg","md","sm","xs"],h=function(e){function t(){return s(this,t),u(this,e.apply(this,arguments))}return d(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,o=e.clsPrefix,c=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["componentClass","className","clsPrefix"]),l=[];return p.forEach((function(e){function t(t,n){var r=""+e+t,a=c[r];null!=a&&null!=a&&l.push(o+"-"+e+n+"-"+a),delete c[r]}t("",""),t("Offset","-offset"),t("Push","-push"),t("Pull","-pull")})),i.default.createElement(t,r({className:(0,a.default)(l,n)},c),this.props.children)},t}(o.Component);h.defaultProps={componentClass:"div",clsPrefix:"u-col"},h.propTypes=f,t.default=h,e.exports=t.default},64:function(e,t){e.exports=function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}},640:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=l(n(5)),o=n(0),i=l(o),c=l(n(2));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var a=n[r],o=Object.getOwnPropertyDescriptor(t,a);o&&o.configurable&&void 0===e[a]&&Object.defineProperty(e,a,o)}}(e,t))}var f={componentClass:c.default.oneOfType([c.default.element,c.default.string])},p=function(e){function t(){return s(this,t),u(this,e.apply(this,arguments))}return d(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.clsPrefix,o=e.className,c=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["componentClass","clsPrefix","className"]),l=""+n;return i.default.createElement(t,r({},c,{className:(0,a.default)(l,o)}),this.props.children)},t}(o.Component);p.propTypes=f,p.defaultProps={componentClass:"div",clsPrefix:"u-row"},t.default=p,e.exports=t.default},641:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=c(n(5)),o=c(n(0)),i=c(n(2));function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var a=n[r],o=Object.getOwnPropertyDescriptor(t,a);o&&o.configurable&&void 0===e[a]&&Object.defineProperty(e,a,o)}}(e,t))}var f={fluid:i.default.bool,componentClass:i.default.oneOfType([i.default.element,i.default.string])},p=function(e){function t(){return s(this,t),u(this,e.apply(this,arguments))}return d(t,e),t.prototype.render=function(){var e,t=this.props,n=t.fluid,i=t.componentClass,c=t.clsPrefix,s=t.className,u=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["fluid","componentClass","clsPrefix","className"]),d=(l(e={},""+c,!n),l(e,c+"-fluid",n),e);return o.default.createElement(i,r({},u,{className:(0,a.default)(d,s)}),this.props.children)},t}(o.default.Component);p.propTypes=f,p.defaultProps={componentClass:"div",fluid:!1,clsPrefix:"u-container"},t.default=p,e.exports=t.default},66:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={shiftUp:{sequence:"shift+up",action:"keydown"},shiftDown:{sequence:"shift+down",action:"keydown"},tab:{sequence:"tab",action:"keydown"}}},669:function(e,t,n){},69:function(e,t,n){"use strict";var r=n(70);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,t,n,a,o,i){if(i!==r){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:a};return n.PropTypes=n,n}},695:function(e,t,n){},70:function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},701:function(e,t,n){},702:function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},703:function(e,t){e.exports=function(e){return this.__data__.has(e)}},704:function(e,t,n){var r=n(705),a=n(706),o=n(707);e.exports=function(e,t,n){return t==t?o(e,t,n):r(e,a,n)}},705:function(e,t){e.exports=function(e,t,n,r){for(var a=e.length,o=n+(r?1:-1);r?o--:++o<a;)if(t(e[o],o,e))return o;return-1}},706:function(e,t){e.exports=function(e){return e!=e}},707:function(e,t){e.exports=function(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}},708:function(e,t,n){var r=n(709),a=Math.max;e.exports=function(e,t,n){return t=a(void 0===t?e.length-1:t,0),function(){for(var o=arguments,i=-1,c=a(o.length-t,0),l=Array(c);++i<c;)l[i]=o[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=o[i];return s[t]=n(l),r(e,this,s)}}},709:function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},710:function(e,t,n){var r=n(711),a=n(713)(r);e.exports=a},711:function(e,t,n){var r=n(712),a=n(339),o=n(357),i=a?function(e,t){return a(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=i},712:function(e,t){e.exports=function(e){return function(){return e}}},713:function(e,t){var n=Date.now;e.exports=function(e){var t=0,r=0;return function(){var a=n(),o=16-(a-r);if(r=a,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},714:function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}},715:function(e,t,n){var r=n(84),a=n(397),o=n(72),i=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||a(e)||!!(i&&e&&e[i])}},716:function(e,t,n){var r=n(96),a=n(85);e.exports=function(e){return a(e)&&"[object Arguments]"==r(e)}},72:function(e,t){var n=Array.isArray;e.exports=n},721:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var a=f(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t.a=function(e){return function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(f,t);var n,r,i,d=u(f);function f(){return c(this,f),d.apply(this,arguments)}return n=f,i=[{key:"judgeFocus",value:function(e,t,n,r){var a=document.getElementById(n);if(e)return-1!==t.tabIndex&&a&&!a.contains(t)||r}}],(r=[{key:"componentDidMount",value:function(){var e=this.props.store;this.autoFocusToken=o.PubSub.subscribe("autoFocus",(function(t,n){var r=n.data,a=n.moduleId,i=n.force,c=document.querySelector("div[".concat(r,'="').concat(r,'"] [tabindex="0"]')),l=document.activeElement,s="".concat(o.config.hotKeyModuleIdPrefix,"-").concat(a);if(console.log(s,l,e),f.judgeFocus(c,l,s,i)){o.ViewModel.shouldAutoFocus=!0,c.ncExecuteFocus=!0;var u=c.getAttribute("cellselectorkey")||"";u=u.split("@")||[],e&&u[0]&&u[1]&&e.setCellProps(u[0],u[1],{autoFocus:!0},!1),!c.contains(l)&&c.focus(),delete c.ncExecuteFocus,setTimeout((function(){o.ViewModel.shouldAutoFocus=!1}),100)}}))}},{key:"componentWillUnmount",value:function(){this.autoFocusToken&&o.PubSub.subscribe(this.autoFocusToken)}},{key:"render",value:function(){return a.a.createElement("div",{id:"".concat(o.config.hotKeyModuleIdPrefix,"-").concat(this.props.tableId||this.props.name)},a.a.createElement(e,this.props))}}])&&l(n.prototype,r),i&&l(n,i),f}(r.Component)}},722:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(1),i=n(21),c=n(66),l=n(9),s=n(34),u=n(44),d=n(17);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var a=g(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t.a=function(e){return function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(g,t);var n,r,f,b=y(g);function g(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),(t=b.call(this,e)).hotKeyWithArrow=function(e){var n=e.e,r=e.ViewModel,a=e.moduleId,o=e.itemType,i=e.target||n.target,c=(t.props.getHotKeyConfig?t.props.getHotKeyConfig():{}).orderOfHotKey;c?Object(s.a)({eventTarget:i,ViewModel:r,moduleId:a,orderOfHotKey:c,itemType:o,keyCode:n.keyCode}):console.warn("not find orderOfHotKey in getHotKeyConfig")},t.hotKeyWithEnter=t.hotKeyWithEnter.bind(v(t)),t}return n=g,(r=[{key:"componentDidUpdate",value:function(){var e=(this.props.getHotKeyConfig?this.props.getHotKeyConfig():{}).autoFocusDeferred;Object(u.b)(this.props,e)||l.a.editTable(this.props)}},{key:"componentDidMount",value:function(){var e=this;this.autoFocusToken=o.PubSub.subscribe("autoFocus-IoC",(function(){Object(u.b)(e.props,!1)||l.a.editTable(e.props,!0)}))}},{key:"componentWillUnmount",value:function(){this.autoFocusToken&&o.PubSub.subscribe(this.autoFocusToken)}},{key:"hotKeyWithEnter",value:function(e){var t=e.e,n=e.ViewModel,r=e.moduleId,a=e.target||t.target,o=(this.props.getHotKeyConfig?this.props.getHotKeyConfig():{}).orderOfHotKey;if(o)var i=setTimeout((function(){Object(d.b)({eventTarget:a,ViewModel:n,moduleId:r,orderOfHotKey:o}),clearTimeout(i)}));else console.warn("not find orderOfHotKey in getHotKeyConfig")}},{key:"render",value:function(){return a.a.createElement(i.HotKeys,{keyMap:c.a,handlers:{shiftUp:s.b.bind(this,this.props.moduleId),shiftDown:s.b.bind(this,this.props.moduleId)}},a.a.createElement(e,p({tableStatusChanged:g.tableStatusChanged,hotKeyWithEnter:this.hotKeyWithEnter,hotKeyWithArrow:this.hotKeyWithArrow},this.props)))}}])&&h(n.prototype,r),f&&h(n,f),g}(r.Component)}},723:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(21),i=n(66),c=n(9),l=n(34),s=n(44),u=n(17);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var a=b(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}t.a=function(e){return function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(b,t);var n,r,d,y=m(b);function b(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),(t=y.call(this,e)).hotKeyWithEnter=function(e){var n=e.e,r=e.ViewModel,a=e.moduleId,o=e.target,i=e.itemType,c=o||n.target,l=(t.props.getHotKeyConfig?t.props.getHotKeyConfig():{}).orderOfHotKey;if(l)if("datePicker"!==i)var s=setTimeout((function(){Object(u.b)({eventTarget:c,ViewModel:r,moduleId:a,orderOfHotKey:l}),clearTimeout(s)}));else Object(u.b)({eventTarget:c,ViewModel:r,moduleId:a,orderOfHotKey:l});else console.warn("not find orderOfHotKey in getHotKeyConfig")},t.hotKeyWithArrow=function(e){var n=e.e,r=e.ViewModel,a=e.moduleId,o=e.itemType,i=e.target||n.target,c=(t.props.getHotKeyConfig?t.props.getHotKeyConfig():{}).orderOfHotKey;c?Object(l.a)({eventTarget:i,ViewModel:r,moduleId:a,orderOfHotKey:c,itemType:o,keyCode:n.keyCode}):console.warn("not find orderOfHotKey in getHotKeyConfig")},t}return n=b,d=[{key:"tableStatusChanged",value:function(e){var t=e.props;"edit"!==e.status||Object(s.a)(t)?Object(c.b)(t.moduleId):c.a.table(t)}}],(r=[{key:"componentDidUpdate",value:function(){Object(s.a)(this.props)||c.a.table(this.props)}},{key:"componentWillUnmount",value:function(){Object(c.b)(this.props.moduleId||this.props.name)}},{key:"render",value:function(){return a.a.createElement(o.HotKeys,{keyMap:i.a,handlers:{shiftUp:l.b.bind(this,this.props.moduleId),shiftDown:l.b.bind(this,this.props.moduleId)}},a.a.createElement(e,f({},this.props,{tableStatusChanged:b.tableStatusChanged,hotKeyWithEnter:this.hotKeyWithEnter,hotKeyWithArrow:this.hotKeyWithArrow})))}}])&&p(n.prototype,r),d&&p(n,d),b}(r.Component)}},724:function(e,t,n){"use strict";n.r(t);var r=n(362);n.d(t,"FormWithAutoFocus",(function(){return r.a}));var a=n(721);n.d(t,"TableWithAutoFocus",(function(){return a.a}))},725:function(e,t,n){"use strict";n.r(t);var r=n(361);n.d(t,"FormWithKeyboardChange",(function(){return r.a}));var a=n(723);n.d(t,"TableWithKeyboardChange",(function(){return a.a}));var o=n(722);n.d(t,"EditTableWithKeyboardChange",(function(){return o.a}))},744:function(e,t,n){var r=n(393),a=n(396),o=n(139),i=n(163),c=o((function(e,t){return i(e)?r(e,a(t,1,i,!0)):[]}));e.exports=c},75:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return f}));n(43),n(1);var r=n(28);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(104);var i={},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i={"#day(-1)#":e["page-search-0060"],"#day(0)#":e["page-search-0061"],"#day(1)#":e["page-search-0062"],"#month(-1)#":e["page-search-0063"],"#month(0)#":e["page-search-0064"],"#month(1)#":e["page-search-0065"],"#week(-1)#":e["page-search-0066"],"#week(0)#":e["page-search-0067"],"#week(1)#":e["page-search-0068"],"#quarter(-1)#":e["page-search-0069"],"#quarter(0)#":e["page-search-0070"],"#quarter(1)#":e["page-search-0071"],"#year(-1)#":e["page-search-0072"],"#year(0)#":e["page-search-0073"],"#year(1)#":e["page-search-0074"],"#lastDayOfMonth#":e["page-search-0075"],"#lastDayOfWeek#":e["page-search-0076"],"#finalDayOfLastMonth#":e["page-search-0077"]},e,i};function l(e){var t=!1;return"string"==typeof e&&-1!==e.indexOf("#")&&(t=!0),t}function s(e,t,n){var r,a;console.log("触发click事件",n),r=!1,(a=document.getElementsByClassName("rc-calendar-picker")[0])&&(a.style.display=r?"block":"none"),t(n)}var u=function(e){return i[e]||e},d=function(e,t,n){var r=i[e]||"";return t&&r?React.createElement("div",{className:"date-picker-mask",onClick:function(){return n(!0)}},r):null},f=function(e,t,n,c){if(n){var l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i);return Array.isArray(c)&&c.forEach((function(e){delete l[e]})),React.createElement(r.a,{keyMap:{rightHandler:["right"],leftHandler:["left"],enterHander:["enter"]},handlers:{rightHandler:function(e){document.activeElement.nextElementSibling&&document.activeElement.nextElementSibling.focus()},leftHandler:function(){document.activeElement.previousElementSibling&&document.activeElement.previousElementSibling.focus()},enterHander:function(){document.activeElement&&document.activeElement.click()}},clearOpenPanel:!1},React.createElement("div",{className:"function-area",style:{maxHeight:"160px",overflow:"scroll"}},Object.keys(l).map((function(n,r){return React.createElement("div",{tabIndex:0===r?"0":"-1",className:"fun-plan-area function-area-item",lg:4,md:4,sm:4,xs:4,onClick:function(e){return s(0,t,n)},onKeyDown:function(e){e.stopPropagation()}},React.createElement("span",{className:e.toString().includes(n)&&"select"},l[n]))}))))}}},78:function(e,t,n){var r=n(318),a=n(322);e.exports=function(e,t){var n=a(e,t);return r(n)?n:void 0}},79:function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},8:function(e,t){e.exports=a},84:function(e,t,n){var r=n(58).Symbol;e.exports=r},85:function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},9:function(e,t,n){"use strict";n.d(t,"a",(function(){return S})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return g})),n.d(t,"f",(function(){return k}));var r=["input","textarea","number","refer","datepicker","datetimepicker","timepicker","select","switch","residtxt","checkbox_switch"],a=["refer","datepicker","input","datetimepicker","timepicker","select","number","residtxt","checkbox_switch","rangepicker","datePickerNoTimeZone","TZDatePickerStart","TZDatePickerStart","switch"],o=n(13),i=n(1);var c={},l={},s={},u=[],d=i.config.hotKeyModuleIdPrefix;function f(e,t){return void 0===c[e]&&u[0]===e||t}function p(e,t){var n=r.includes(e.itemtype)&&!0!==e.disabled&&!1!==e.visible,a=!(!l[t]||!0!==l[t][e.attrcode]);return n&&!a}function h(e,t,n){return t.reduce((function(t,n){return n.children?h(e,n.children,t):!function(e,t){if(s[e]){if(!1===s[e][t.attrcode])return!1;if(!0===s[e][t.attrcode])return!0}return a.includes(t.itemtype)&&!1!==t.visible&&!0!==t.disabled&&void 0!==t.attrcode}(e,n)||t.push(n.attrcode),t}),n)}function m(e){var t=e.moduleId,n=e.availableItems,r=e.lastRowIndex,a=e.moduleType,o=e.force,l="".concat(d,"-").concat(t,"-").concat(n[0],"-0"),s=n.length-1,f="".concat(d,"-").concat(t,"-").concat(n[s],"-").concat(r);!function(e){var t=e.orderOfHotKey,n=e.moduleId,r=e.firstItem,a=e.force;(function(e){var t=e.orderOfHotKey,n=void 0===t?[]:t,r=e.moduleId,a=e.force;return n[0]===r&&void 0===c[r]||a})({orderOfHotKey:t,moduleId:n,force:a})&&i.PubSub.publish("autoFocus",{data:r,moduleId:n})}({orderOfHotKey:u,moduleId:t,firstItem:l,force:o}),c[t]={firstItem:l,lastItem:f,type:a,activeTable:t}}function y(e,t){var n=(e.getHotKeyConfig?e.getHotKeyConfig():{}).meta;if(!e.getHotKeyConfig)return console.warn("some form hotkey invalid");var r=n.gridrelation&&n.gridrelation[t].tabRelation;return!!(r&&r.length>1)}function b(e,t,n){var r=(e.getHotKeyConfig?e.getHotKeyConfig():{}).meta;if(!e.getHotKeyConfig)return console.warn("some form hotkey invalid");r.gridrelation[t].tabRelation.forEach((function(e){if(e!==t){var a=r[e]&&r[e].items,i=a&&h(t,a,[]),l=r[e].code,s="".concat(d,"-").concat(t,"-").concat(i[0],"-0"),u=i[i.length-1],f="".concat(d,"-").concat(t,"-").concat(u,"-").concat(n);c[l]={firstItem:s,lastItem:f,type:o.a.cardTable,parent:t}}}))}function v(e){delete c[e]}function g(e){return c[e]&&c[e].firstItem}function k(e){var t=e.moduleId,n=e.activeKey,r=c[t];r&&(r.activeTable=n)}var S={form:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.name,r=e.getHotKeyConfig?e.getHotKeyConfig():{},a=r.meta,l=r.orderOfHotKey;if(!e.getHotKeyConfig)return console.warn("some form hotkey invalid");var s=a[n].items;u=l;var d=s.filter((function(e){return p(e,n)})).map((function(e){return e.attrcode}));if(f(n,t)){c[n]={firstItem:d[0],type:o.a.form};var h=d[0];i.PubSub.publish("autoFocus",{data:h})}},table:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(e.name,e.high_hotkey),r=(e.getHotKeyConfig,e.getHotKeyConfig?e.getHotKeyConfig():{}),a=(r.withHotKeyChange,r.meta),i=r.orderOfHotKey;if(!e.getHotKeyConfig||!i)return console.warn("some form hotkey invalid");u=i;var l=n.store,s=n.tableId,d=a[s]&&a[s].items,f=l.getData(),p=f.length-1,v=d&&h(s,d,[]);f&&0===f.length||(m({tableId:s,availableItems:v,lastRowIndex:p,moduleType:o.a.cardTable,force:t}),y(e,s)&&c[s]&&(b(e,s,p),c[s].children=a.gridrelation[s].tabRelation))},editTable:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(e.name,e.high_hotkey),r=(e.getHotKeyConfig,e.getHotKeyConfig?e.getHotKeyConfig():{}),a=(r.withHotKeyChange,r.meta),i=r.orderOfHotKey;if(!e.getHotKeyConfig||!i)return console.warn("some form hotkey invalid");u=i;var c=n.store,l=n.tableId,s=a[l]&&a[l].items,d=c.getData(),f=d.length-1,p=s&&h(l,s,[]);d&&0===d.length||m({tableId:l,availableItems:p,lastRowIndex:f,moduleType:o.a.editTable,force:t})}}},905:function(e,t,n){},906:function(e,t,n){},907:function(e,t,n){},908:function(e,t,n){},909:function(e,t,n){},96:function(e,t,n){var r=n(84),a=n(313),o=n(314),i=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?a(e):o(e)}},99:function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}}})}));
//# sourceMappingURL=index.js.map