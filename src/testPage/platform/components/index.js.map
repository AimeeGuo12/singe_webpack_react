{"version":3,"sources":["webpack://@platform/[name]/webpack/universalModuleDefinition","webpack://@platform/[name]/webpack/bootstrap","webpack://@platform/[name]/external {\"root\":\"React\",\"var\":\"React\",\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\"}","webpack://@platform/[name]/external \"@platform/api/index\"","webpack://@platform/[name]/./node_modules/react-hotkeys/es/react-hotkeys.production.min.js","webpack://@platform/[name]/./node_modules/mousetrap/mousetrap.js","webpack://@platform/[name]/external \"@platform/template/index\"","webpack://@platform/[name]/./src/platform/components/WithKeyboardChange/config/moduleType.js","webpack://@platform/[name]/./node_modules/lodash/isFunction.js","webpack://@platform/[name]/./node_modules/lodash/_arrayMap.js","webpack://@platform/[name]/./node_modules/lodash/_baseRest.js","webpack://@platform/[name]/./node_modules/lodash/_freeGlobal.js","webpack://@platform/[name]/./node_modules/lodash/_MapCache.js","webpack://@platform/[name]/./src/platform/components/WithKeyboardChange/util/getCellIdentity.js","webpack://@platform/[name]/./node_modules/lodash/isArrayLikeObject.js","webpack://@platform/[name]/./src/platform/components/WithKeyboardChange/util/findNextFocusItemInTable.js","webpack://@platform/[name]/./src/platform/components/BillHeadInfo/BillInfo.js","webpack://@platform/[name]/./src/platform/components/BillHeadInfo/index.js","webpack://@platform/[name]/./src/platform/components/BillHeadInfo/create.js","webpack://@platform/[name]/./src/platform/components/BillHeadInfo/methods.js","webpack://@platform/[name]/./src/platform/components/Button/methods.js","webpack://@platform/[name]/./src/platform/components/Button/index.js","webpack://@platform/[name]/./src/platform/components/Button/create.js","webpack://@platform/[name]/./src/platform/FastExtend/const.js","webpack://@platform/[name]/./src/platform/FastExtend/utils.js","webpack://@platform/[name]/./src/platform/components/ButtonApp/BtnItemTip.js","webpack://@platform/[name]/./src/platform/components/ButtonApp/MenuUtil.js","webpack://@platform/[name]/./src/platform/components/ButtonApp/Mores/index.js","webpack://@platform/[name]/./src/platform/components/ButtonApp/MyDropDown/index.js","webpack://@platform/[name]/./src/platform/components/ButtonApp/util.js","webpack://@platform/[name]/./src/platform/components/ButtonApp/HelperTip.js","webpack://@platform/[name]/./src/platform/components/ButtonApp/MyDividerButtons/index.js","webpack://@platform/[name]/./src/platform/components/ButtonApp/MyButtonGroup/index.js","webpack://@platform/[name]/./src/platform/components/PromptBox/index.js","webpack://@platform/[name]/./src/platform/components/ButtonApp/SignIn.js","webpack://@platform/[name]/./src/platform/components/ButtonApp/create.js","webpack://@platform/[name]/./src/platform/components/ButtonApp/constants.js","webpack://@platform/[name]/./src/platform/components/ButtonApp/index.js","webpack://@platform/[name]/./src/platform/components/CardPagination/CardPag_test.js","webpack://@platform/[name]/./src/platform/components/CardPagination/create_test.js","webpack://@platform/[name]/./src/platform/components/CardPagination/index.js","webpack://@platform/[name]/./src/platform/components/CardPagination/methods_test.js","webpack://@platform/[name]/./src/platform/components/CreateModal/createModal.js","webpack://@platform/[name]/./src/platform/components/CreateModal/methods.js","webpack://@platform/[name]/./src/platform/components/CreateSearch/_methods.js","webpack://@platform/[name]/./src/platform/components/CreateSearch/methods.js","webpack://@platform/[name]/./src/platform/components/CreateSearch/templateEngine.js","webpack://@platform/[name]/./src/platform/components/CreateSearch/SearchAdvCom.js","webpack://@platform/[name]/./src/platform/components/CreateSearch/SearchAdvModal.js","webpack://@platform/[name]/./src/platform/components/CreateSearch/item.js","webpack://@platform/[name]/./src/platform/components/CreateSearch/searchItem.js","webpack://@platform/[name]/./src/platform/components/WithAutoFocus/searchWithAutoFocus.js","webpack://@platform/[name]/./src/platform/components/CreateSearch/searchComponent.js","webpack://@platform/[name]/./src/platform/components/CreateSearch/index.js","webpack://@platform/[name]/./src/platform/components/CreateSearch/createSearch.js","webpack://@platform/[name]/./src/platform/components/CreateNCModal/createModal.js","webpack://@platform/[name]/./src/platform/components/CreateNCModal/methods.js","webpack://@platform/[name]/./src/platform/components/CreateUploader/createUploader.js","webpack://@platform/[name]/./src/platform/components/CreateUploader/methods.js","webpack://@platform/[name]/./src/platform/components/CrossServiceBtns/create.js","webpack://@platform/[name]/./src/platform/components/CrossServiceBtns/index.js","webpack://@platform/[name]/./src/platform/components/CrossServiceBtns/methods.js","webpack://@platform/[name]/./src/platform/components/Socket/getUserId.js","webpack://@platform/[name]/./src/platform/components/Socket/getUserInfo.js","webpack://@platform/[name]/./src/platform/components/Socket/closeStatus.js","webpack://@platform/[name]/./src/platform/components/Socket/uniqueChannel.js","webpack://@platform/[name]/./src/platform/components/Socket/heartCheck.js","webpack://@platform/[name]/./src/platform/components/Socket/connect.js","webpack://@platform/[name]/./src/platform/components/HotkeyHelper/staticData.js","webpack://@platform/[name]/./src/platform/components/HotkeyHelper/panel.js","webpack://@platform/[name]/./src/platform/components/HotkeyHelper/index.js","webpack://@platform/[name]/./src/platform/components/InsertTable/constant.js","webpack://@platform/[name]/./src/platform/components/InsertTable/methods.js","webpack://@platform/[name]/./src/platform/components/InsertTable/toolCell.js","webpack://@platform/[name]/./src/platform/components/InsertTable/InsertTable.js","webpack://@platform/[name]/./src/platform/components/InsertTable/index.js","webpack://@platform/[name]/./src/platform/components/PrintOutput/index.js","webpack://@platform/[name]/./src/platform/components/PrintOutputModal/index.js","webpack://@platform/[name]/./src/platform/components/PrintTemplate/index.js","webpack://@platform/[name]/./src/platform/components/Socket/create.js","webpack://@platform/[name]/./src/platform/components/Socket/index.js","webpack://@platform/[name]/./src/platform/components/Tree/util.js","webpack://@platform/[name]/./src/platform/components/Tree/store.js","webpack://@platform/[name]/./src/platform/components/Tree/Tree.js","webpack://@platform/[name]/./src/platform/components/Tree/AsyncTree/compatible.js","webpack://@platform/[name]/./src/platform/components/Tree/AsyncTree/output.js","webpack://@platform/[name]/./src/platform/components/Tree/SyncTree/compatible.js","webpack://@platform/[name]/./src/platform/components/Tree/SyncTree/output.js","webpack://@platform/[name]/./src/platform/components/Transfer/ListToListTransfer/index.js","webpack://@platform/[name]/./src/platform/components/Transfer/TreeToListTransfer/index.js","webpack://@platform/[name]/./src/platform/components/Transfer/TreeToListTransfer/methods.js","webpack://@platform/[name]/./src/platform/components/Transfer/index.js","webpack://@platform/[name]/./src/platform/components/MutiInit/index.js","webpack://@platform/[name]/./src/platform/components/FormulaEditor/components/metaattr.jsx","webpack://@platform/[name]/./src/platform/components/FormulaEditor/components/surface.jsx","webpack://@platform/[name]/./src/platform/components/FormulaEditor/index.jsx","webpack://@platform/[name]/./src/platform/components/WithAutoFocus/executeAutoFocus.js","webpack://@platform/[name]/./node_modules/prop-types/index.js","webpack://@platform/[name]/./node_modules/lodash.isequal/index.js","webpack://@platform/[name]/./node_modules/react-hotkeys/index.es.js","webpack://@platform/[name]/./src/platform/base/HotKeys/index.js","webpack://@platform/[name]/external \"@platform/base/index\"","webpack://@platform/[name]/(webpack)/buildin/global.js","webpack://@platform/[name]/./node_modules/lodash/_getRawTag.js","webpack://@platform/[name]/./node_modules/lodash/_objectToString.js","webpack://@platform/[name]/./node_modules/lodash/_mapCacheClear.js","webpack://@platform/[name]/./node_modules/lodash/_Hash.js","webpack://@platform/[name]/./node_modules/lodash/_hashClear.js","webpack://@platform/[name]/./node_modules/lodash/_baseIsNative.js","webpack://@platform/[name]/./node_modules/lodash/_isMasked.js","webpack://@platform/[name]/./node_modules/lodash/_coreJsData.js","webpack://@platform/[name]/./node_modules/lodash/_toSource.js","webpack://@platform/[name]/./node_modules/lodash/_getValue.js","webpack://@platform/[name]/./node_modules/lodash/_hashDelete.js","webpack://@platform/[name]/./node_modules/lodash/_hashGet.js","webpack://@platform/[name]/./node_modules/lodash/_hashHas.js","webpack://@platform/[name]/./node_modules/lodash/_hashSet.js","webpack://@platform/[name]/./node_modules/lodash/_ListCache.js","webpack://@platform/[name]/./node_modules/lodash/_listCacheClear.js","webpack://@platform/[name]/./node_modules/lodash/_listCacheDelete.js","webpack://@platform/[name]/./src/platform/components/WithKeyboardChange/util/handleSpecialCase.js","webpack://@platform/[name]/./node_modules/lodash/_listCacheGet.js","webpack://@platform/[name]/./node_modules/lodash/_listCacheHas.js","webpack://@platform/[name]/./node_modules/lodash/_listCacheSet.js","webpack://@platform/[name]/./node_modules/lodash/_Map.js","webpack://@platform/[name]/./node_modules/lodash/_mapCacheDelete.js","webpack://@platform/[name]/./node_modules/lodash/_isKeyable.js","webpack://@platform/[name]/./node_modules/lodash/_mapCacheGet.js","webpack://@platform/[name]/./node_modules/lodash/_mapCacheHas.js","webpack://@platform/[name]/./node_modules/lodash/_mapCacheSet.js","webpack://@platform/[name]/./node_modules/lodash/_defineProperty.js","webpack://@platform/[name]/./src/platform/components/WithKeyboardChange/util/findPrevFoucsItemInTable.js","webpack://@platform/[name]/./src/platform/components/WithKeyboardChange/util/findUpStairsFocusItemInTable.js","webpack://@platform/[name]/./src/platform/components/WithKeyboardChange/util/findDownStairsFocusItemInTable.js","webpack://@platform/[name]/./src/platform/components/WithKeyboardChange/handleKeyDown.js","webpack://@platform/[name]/./node_modules/lodash/_SetCache.js","webpack://@platform/[name]/./node_modules/lodash/_arrayIncludes.js","webpack://@platform/[name]/./node_modules/lodash/_arrayIncludesWith.js","webpack://@platform/[name]/./node_modules/lodash/_baseUnary.js","webpack://@platform/[name]/./node_modules/lodash/_cacheHas.js","webpack://@platform/[name]/./node_modules/lodash/identity.js","webpack://@platform/[name]/./node_modules/lodash/isArrayLike.js","webpack://@platform/[name]/./src/platform/components/DragWidthCom/index.js","webpack://@platform/[name]/./src/platform/components/WithKeyboardChange/FormWithKeyboardChange.js","webpack://@platform/[name]/./src/platform/components/WithAutoFocus/FormWithAutoFocus.js","webpack://@platform/[name]/./src/platform/static/images/modal-img.png","webpack://@platform/[name]/./node_modules/lodash/_baseDifference.js","webpack://@platform/[name]/./node_modules/lodash/isLength.js","webpack://@platform/[name]/./node_modules/lodash/_baseFlatten.js","webpack://@platform/[name]/./node_modules/lodash/isArguments.js","webpack://@platform/[name]/./src/platform/components/TreeTable/Cell.js","webpack://@platform/[name]/./src/platform/components/TreeTable/containers.js","webpack://@platform/[name]/./src/platform/components/TreeTable/utils.js","webpack://@platform/[name]/./src/platform/components/TreeTable/store.js","webpack://@platform/[name]/./src/platform/components/TreeTable/treeTable.js","webpack://@platform/[name]/./src/platform/components/TreeTable/methods.js","webpack://@platform/[name]/./src/platform/components/TreeTable/treeTableManyCol.js","webpack://@platform/[name]/./src/platform/components/TreeTable/index.js","webpack://@platform/[name]/external \"@platform/form/index\"","webpack://@platform/[name]/./node_modules/bee-layout/build/index.js","webpack://@platform/[name]/./src/platform/components/WithKeyboardChange/config/stopHotKeyChange.js","webpack://@platform/[name]/(webpack)/buildin/module.js","webpack://@platform/[name]/./src/platform/components/WithKeyboardChange/util/findNextFocusItemInForm.js","webpack://@platform/[name]/./node_modules/classnames/index.js","webpack://@platform/[name]/./src/platform/components/WithKeyboardChange/util/calculateNeedJumpTimes.js","webpack://@platform/[name]/external {\"root\":\"axios\",\"var\":\"axios\",\"commonjs\":\"axios\",\"commonjs2\":\"axios\",\"amd\":\"axios\"}","webpack://@platform/[name]/./node_modules/lodash/_root.js","webpack://@platform/[name]/./node_modules/lodash/_nativeCreate.js","webpack://@platform/[name]/external {\"root\":\"ReactDOM\",\"var\":\"ReactDOM\",\"commonjs\":\"react-dom\",\"commonjs2\":\"react-dom\",\"amd\":\"react-dom\"}","webpack://@platform/[name]/./node_modules/lodash/_assocIndexOf.js","webpack://@platform/[name]/./node_modules/lodash/_getMapData.js","webpack://@platform/[name]/./node_modules/lodash.isboolean/index.js","webpack://@platform/[name]/./node_modules/bee-layout/build/Col.js","webpack://@platform/[name]/./node_modules/lodash.isobject/index.js","webpack://@platform/[name]/./node_modules/bee-layout/build/Row.js","webpack://@platform/[name]/./node_modules/bee-layout/build/Layout.js","webpack://@platform/[name]/./src/platform/components/WithKeyboardChange/config/tableKeyboardMap.js","webpack://@platform/[name]/./node_modules/prop-types/factoryWithThrowingShims.js","webpack://@platform/[name]/./node_modules/prop-types/lib/ReactPropTypesSecret.js","webpack://@platform/[name]/./node_modules/lodash/_setCacheAdd.js","webpack://@platform/[name]/./node_modules/lodash/_setCacheHas.js","webpack://@platform/[name]/./node_modules/lodash/_baseIndexOf.js","webpack://@platform/[name]/./node_modules/lodash/_baseFindIndex.js","webpack://@platform/[name]/./node_modules/lodash/_baseIsNaN.js","webpack://@platform/[name]/./node_modules/lodash/_strictIndexOf.js","webpack://@platform/[name]/./node_modules/lodash/_overRest.js","webpack://@platform/[name]/./node_modules/lodash/_apply.js","webpack://@platform/[name]/./node_modules/lodash/_setToString.js","webpack://@platform/[name]/./node_modules/lodash/_baseSetToString.js","webpack://@platform/[name]/./node_modules/lodash/constant.js","webpack://@platform/[name]/./node_modules/lodash/_shortOut.js","webpack://@platform/[name]/./node_modules/lodash/_arrayPush.js","webpack://@platform/[name]/./node_modules/lodash/_isFlattenable.js","webpack://@platform/[name]/./node_modules/lodash/_baseIsArguments.js","webpack://@platform/[name]/./node_modules/lodash/isArray.js","webpack://@platform/[name]/./src/platform/components/WithAutoFocus/TableWithAutoFocus.js","webpack://@platform/[name]/./src/platform/components/WithKeyboardChange/EditTableWithKeyboardChange.js","webpack://@platform/[name]/./src/platform/components/WithKeyboardChange/TableWithKeyboardChange.js","webpack://@platform/[name]/./src/platform/components/WithAutoFocus/index.js","webpack://@platform/[name]/./src/platform/components/WithKeyboardChange/index.js","webpack://@platform/[name]/./node_modules/lodash/difference.js","webpack://@platform/[name]/./src/platform/base/DatePickerTimeZoneConversion/dateFunction.js","webpack://@platform/[name]/./node_modules/lodash/_getNative.js","webpack://@platform/[name]/./node_modules/lodash/isObject.js","webpack://@platform/[name]/external \"@platform/table-core/index\"","webpack://@platform/[name]/./node_modules/lodash/_Symbol.js","webpack://@platform/[name]/./node_modules/lodash/isObjectLike.js","webpack://@platform/[name]/./src/platform/components/WithKeyboardChange/config/availableItems.js","webpack://@platform/[name]/./src/platform/components/WithKeyboardChange/createKeyMap.js","webpack://@platform/[name]/./node_modules/lodash/_baseGetTag.js","webpack://@platform/[name]/./node_modules/lodash/eq.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__3__","__WEBPACK_EXTERNAL_MODULE__6__","__WEBPACK_EXTERNAL_MODULE__8__","__WEBPACK_EXTERNAL_MODULE__11__","__WEBPACK_EXTERNAL_MODULE__42__","__WEBPACK_EXTERNAL_MODULE__56__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","classCallCheck","e","TypeError","createClass","length","configurable","writable","_extends","assign","arguments","inherits","constructor","setPrototypeOf","__proto__","objectWithoutProperties","indexOf","possibleConstructorReturn","ReferenceError","FocusTrap","this","getPrototypeOf","apply","props","component","children","createElement","tabIndex","hasChanged","propTypes","onFocus","func","onBlur","oneOfType","string","node","defaultProps","HotKeys","hotKeyParent","hotKeyMap","__hotKeyMap__","updateMap","buildMap","context","keyMap","__mousetrap__","attach","findDOMNode","updateHotKeys","childHandledSequence","reset","handlers","a","syncHandlersToMousetrap","getMap","keys","forEach","Array","isArray","sequencesFromKeyMap","action","sequence","push","callback","focused","__isFocused__","__lastChildSequence__","bool","any","childContextTypes","contextTypes","withHotKeys","_setRef","state","setState","_ref","hotKeyHandlers","ref","HotKeyMapMixin","getChildContext","componentWillMount","document","undefined","_REVERSE_MAP","_MAP","8","9","13","16","17","18","20","27","32","33","34","35","36","37","38","39","40","45","46","91","93","224","_KEYCODE_MAP","106","107","109","110","111","186","187","188","189","190","191","192","219","220","221","222","_SHIFT_MAP","_SPECIAL_ALIASES","test","navigator","platform","toString","Mousetrap","_bindMultiple","unbind","trigger","_directMap","_callbacks","stopCallback","element","className","_belongsTo","ancestor","parentNode","target","composedPath","initialEventTarget","tagName","isContentEditable","handleKey","self","_handleKey","addKeycodes","init","documentMousetrap","method","charAt","_addEvent","type","addEventListener","attachEvent","_characterFromEvent","character","String","fromCharCode","which","shiftKey","toLowerCase","_isModifier","_pickBestAction","modifiers","_getReverseMap","_getKeyInfo","combination","replace","split","_keysFromString","targetElement","_resetTimer","_sequenceLevels","_ignoreNextKeyup","_ignoreNextKeypress","_nextExpectedAction","_resetSequences","doNotReset","activeSequences","_getMatches","sequenceName","level","modifiers1","modifiers2","matches","seq","metaKey","ctrlKey","sort","join","deleteCombo","combo","deleteSequence","splice","_fireCallback","srcElement","preventDefault","returnValue","_preventDefault","stopPropagation","cancelBubble","_stopPropagation","_handleKeyEvent","keyCode","altKey","_eventModifiers","_bindSequence","_increaseSequence","nextAction","clearTimeout","setTimeout","_callbackAndReset","wrappedCallback","_bindSingle","info","callbacks","maxLevel","processedSequenceCallback","Math","max","ignoreThisKeypress","combinations","MODULE_TYPE","form","cardTable","editTable","baseGetTag","isObject","tag","array","iteratee","index","result","identity","overRest","setToString","start","freeGlobal","global","mapCacheClear","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","MapCache","entries","clear","entry","set","has","getCellIdentity","td","div","querySelector","attributes","cellIdentity","values","find","item","startsWith","CONFIG","hotKeyModuleIdPrefix","isArrayLike","isObjectLike","findNextFocusItemInTable","eventTarget","ViewModel","orderOfHotKey","parentTd","findParentTd","nextTd","nextElementSibling","currentTr","parentElement","lastTd","findLastTdInRow","checkboxInTable","findNextSiblings","enterTriggerCellId","executeAutoFocus","lastElementChild","currentModuleId","id","tds","querySelectorAll","firstFocusItem","findFirstFocusItemInCurrentModule","jumpToNextModuleFocusItem","perceptionHotKeyConfig","findNextRowTd","tr","console","warn","el","includes","previousElementSibling","currentDiv","nextTr","getAttribute","nextModuleId","orderOfHotKeyLen","nextModuleIndex","calculateNextModuleId","nextModuleKeyMap","keyByModuleId","activeTableKeyMap","activeTable","firstItemDom","firstItem","findNextFocusItemInForm","shouldAutoFocus","ncExecuteFocus","focus","BillInfo","getThis","showBackBtn","showBillCode","billCode","events","title","nextProps","initShowBackBtn","backBtnClick","titleClick","pageIcon","createPageIcon","fontClass","nccFontSize","top","getGlobalStorage","titleFontSize","onClick","fieldid","getSysFieldid","Component","createBillHeadInfo","_this","myBillInfo","output","rootprops","setBillHeadInfoVisible","data","findItemsByKey","items","process","tree","addCustomAttribute","attr","btnInfo","myState","setButtonAttribute","buttonId","buttons","parentCode","isObj","getButtons","setButtonState","buttonsEntrys","buttonsComponent","stopOprationBtnsRenderAreas","refName","stopBtnRenderAreas","ids","filter","len","_isOperateButton","uuid","json","buttonIdToArr","buttonIds","it","setButtonDisabled","flag","area","setButtonAttributeByArea","setButtonStateByArea","setButtonVisible","createButton","config","disabled","onButtonClick","buttonColor","others","button","proxyAction","color","visible","getButtonDisabled","error","setButtonsVisible","setButtonTitle","hideButtonsByAreas","areas","hideButtonMenu","setButtons","dividerType","dropdownType","areaStr","keysOAreas","map","trim","getButtonVisible","enabled","updateButtons","buttonsAreas","log","setMainButton","setPopContent","content","setUploadDocAmount","amount","setOprationBtnsRenderStatus","setUploadConfig","setDisabled","emptyf","enable","NCCExtendEable","getCheckedMethod","obj","defaultf","getCheckedExtendMethod","JSON","stringify","BtnItemTip","tipStatus","tipConfirm","dom","React","createRef","tipItem","clientWidth","scrollWidth","overlay","inverse","delayShow","delay","Item","Menu","Divider","ItemGroup","replaceSpecialStr","str","firstToUpperCase","L","toUpperCase","renderMenuItem","specialDisabled","uploadConfig","keyboard","btn-code","itemDom","classNames","style","cursor","showUploadList","prevUpload","click","RenderMenu","setMaxHeight","clientHeight","body","buttonApp","dropdownWrapper","dropdownClient","getBoundingClientRect","maxHeight","tabindex","onVisibleChange","overflow","More","show","timer","timerIndex","list","btncolor","clskey","topParentCode","onMouseLeave","onMouseEnter","maxWidth","whiteSpace","popPlacement","MyDropdown","dividerBtn","popContainer","visible_group","every","ele","visible_list","animation","overlayClassName","getPopupContainer","triggerOnClickWithBlurAction","callBack","buttonInfo","keyMapItem","activeElement","blur","HelperTip","placement","onMouseOver","onMouseOut","display","MyDividerButton","onSwitchMenu","showMenu","_key","isenable","btnCls","vlBtnCls","mainBtnCls","uploadBtnCls","Btn","ReactDOM","borderRadius","MyButtonGroup","getTipKeybodard","tipKeybodard","kbs","renderButtonGroup","getButtonStatus","visibleData","marginLeft","buttonLimit","Header","Modal","Title","Body","Footer","PromptBox","callBackErrorHandle","msg","err","close","cancelClick","bcFn","beSureClick","bsFn","showModal","onExited","getElementsByClassName","unmountComponentAtNode","closeTimer","$parentElement","removeChild","closeBtnClick","bCloseFn","getMultiLang","noFooter","closeByClickBackDrop","noCancelBtn","hasCloseBtn","beSureBtnName","cancelBtnName","zIndex","hotKeyboard","other","Date","now","getSafeRandom","indexInfo","onHide","backdrop","sureBtnHandler","USUAL_KEYS","MODAL_CONFIRM","cancelBtnHandler","MODAL_CALCEL","isTopModal","closeButton","iconName","toastIcon","colors","shape","beSureArr","cancelArr","closeArr","promptBox","container","beSureBtnClick","cancelBtnClick","appendChild","render","SignIn","handlePassWordChange","val","passWord","handleSignIn","userCode","resolve","lang","Promise","ajax","url","loading","success","res","exponent","modulus","RSAUtils","getKeyPair","encryptedString","encodePwd","usercode","toast","groupOperation","isNode","TextArr","groupOperationMsg","alignItems","width","onChange","placeholder","Closest","selector","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","ButtonApp","getCurrentBtnIsKeyFunc","currentKey","iskeyfunc","isUndefined","iskeyfuncFlag","billinfo","modalRelation","notInterruptCode","withAutoFocus","appcode","pageTo","getAppCode","parse","appbtncode","signInSelf","isFunction","superSign","status","modalDom","focusedDom","params","keyboardHandle","hotkey","btnHotKey","getKeyMapsAndHandlers","hotKeysMap","hotKeysEnabled","page","ignoreHotkeyCode","keyboardMap","recurToKeyboardMap","parentVisible","kb","multipleKeyboardKey","pageareacode","findFocusModuleId","modal","active","contains","handleSpecialBtn","renderButtons","allButtons","elem","b","Number","order","appButtons","keyHandlers","RefshBtn","docAmount","moreBtnlist","renderMoreBtn","intl","bindWebsocket","buttonsLangJson","wrapper","cls","icon","uploadDom","OprationButton","popContentItem","popContent","onClose","onCancel","rootClose","popContentItem1","renderMenu","renderMoreList","rowIndex","reduce","accumulator","curent","renderLanglist","getHotkeyTriggerFlag","selectedRow","parentContainer","targetVisble","getComputedStyle","visibility","uniqueClassName","oprationIndex","oprationIndexCopy","wantedButtons","templateOrder","needRenderButtons","needCopyButtonsJson","ite","areaArr","isOprationBtn","oprationButtons","LangCode","getLangCode","showflag","slice","createButtonApp","createOprationButton","CardPagination","getAllpks","allpks","dataSource","cacheData","getData","simpleTable","cacheTools","getClickItemId","activeId","currentId","pageIndexChange","handlePageInfoChange","clearToast","getBtnStatus","currentIndex","endDisabled","firstDisabled","isFirst","isEnd","pkname","urlPkname","getUrlParam","langJson","tooltips","endBtnHandler","CARDPAGE_END","upBtnHandler","CARDPAGE_UP","downBtnHandler","CARDPAGE_DOWN","homeBtnHandler","CARDPAGE_HOME","delayHide","createCardPagination","myCardPagination","setCardPaginationVisible","cardPaginationBtn","setCardPaginationId","idObj","getNextCardPaginationId","setCardPaginationAllpks","Modal2","modalData","argusObj","nowData","attr1","size","backdropClassName","leftBtnName","rightBtnName","showCustomBtns","customBtns","hideRightBtn","hideLeftBtn","propSize","onEscapeKeyUp","draggable","resizable","mSize","maxModalCls","createModal","closeModalEve","userControl","hasBackDrop","validateCloseBtn","custom","update","finalIndex","showCallback","removeGlobalStorage","OperationOptions","setOperationOptionsMultiLang","_multiLang","multiLang","isEmpty","naturalTimeHandler","time","format","loc","DongbaToLocalTime","moment","LocalToDongbaTime","_clone","getTimezoneOffset","getFunctionValueFromViewModal","VALUE","reslut","org_Name","pk_org","defaultCostRegionName","defaultCostRegionPk","defaultCreditCtlRegionName","defaultCreditCtlRegionPk","defaultAccbookName","defaultAccbookPk","userName","userId","groupName","groupId","defaultCenterContentName","defaultCenterContentPK","defaultPsndocName","defaultPsndocPK","defaultDeptName","defaultDeptPK","initDefaultSnapshot","isTemplateOrder","getValue","initialvalue","itemtype","refervalue","languageMeta","languageCode","localeLang","snapshotList","isfixedcondition","isdrag","requireList","fiexedList","otherList","visibleposition","required","v1","v2","notFixed","concat","newArr","attrcode","operationSign","queryOperateType","operationOptions","remove","label","isExtend","valueMap","plan2snapshotTranslate","searchInfo","createOperation","tempItem","itemsMap","refpk","templateFilter","snapshot","snapshotChangeByTemplate","newSnapshot","newItem","oldItem","allItemsFillComplete","planExtend","runWithChildren","refurl","tree2Array","reuslt","CompareDate","d1","d2","isDateFunction","currentPlanName","currentPlan","searchPlanName","searchPlan","that","public","nonpublic","userControlAll","saveSearchPlan","_getAllSearchData","addMark","snapshotMap","pk","pk_ncc_queryscheme","searchPlanCache","saveSearchPlanData","conditionobj4web","renderobj4web","areaid","oid","meta","isprepared","isquickqs","newdate","saveAjax","Ajax","findIndex","keySessionS","search","searchPlanCacheChange","setSearchPlanName","upDateSearchPlan","isdefault","isdelete","sequenc","beSureBtnClick_Del","queryschemes","quickqs","defaultPlan","checkModuleId","getValueByField","searchId","field","getAllSearchDataEve","firstvalue","secondvalue","oprtype","conditions","getvalue","setSearchValByFieldEve","renderobj4web_snap","snapshotCache","setValue","ArrayHas2Value","setMultiLang","logic","callBackMeta","requiredArr","displayVal","optSign","isIncludeSub","timeFunction","isKong","vals","end","currentZoneStartTime","startOf","toDate","currentZoneStartHours","getHours","offsetZone","currentZoneEndTime","endOf","currentZoneEndHours","setHours","timeStampType","some","timeFunctionTranslater","Obj","datatype","def5","langSeq","PubSub","publish","setSearchValueEve","cb","datas","findItem","clearSearchAreaEve","valMap","current","setDisabledByFieldEve","getMeta","setMeta","setRequiredByFieldEve","_setTemlateByField","getOprtypeByFieldEve","getAllSearchData","f","closeSearchPlanArea","_addData","_items","advancedData","targetPk","targetKey","initData","noRemove","targetIsExtend","addDataEve","setStateEve","currentData","createCurrentData","checkResult","checkConditions","treeData","checkTreeId","searchAdv","treeId","snapshotItem","checkRequired","templateItem","newTime","getTime","advrequired","newPk","newTree","clearAllValueEve","delNode","nodePk","delNodeEve","checkChildren","setSearchValByFieldHigh","setValueByField","getCurrentTemplate","clearAllValue","ReferLoader","Refer","Option","Select","templateEngine","onAfterEvent","renderItem","showRequire","createScript","showPlaceholder","LangData","parentRef","clickSearch","hiddenFunList","templetItem","businessInfo","getBusinessInfo","businessDate","hideLabel","createTemplateItemDom","formatNumber","isNaN","timeValue","eventType","clearRquiredWraning","onAfterEve","options","opt","valuelist","vv","v","date","oldDisplay","from","foolValue","refname","queryTreeUrl","min","hiddenfunlist","isMultiSelectedEnabled","mustFillIn1","mustFillIn2","searchChildDom","fieldTip","optText","getQueryOperateDisplay","maxlength","Infinity","refData","referDom","refDisplay","betweenReferChangeEve","showTitle","referChangeEve","isCheckChinese","inputBlur","onInputChange","multiple","marginRight","onMultipleChange","supportSearch","showSearch","mustFill","optionFilterProp","onSelectedBetweenChange","showClear","onSelectedChange","tips","panelValue","arrowKeyDownEnable","onSelect","onDateSelect","onDateChange","showTimeFunction","formatDatetime","onDateTimeBetweenChange","isTrueEmpty","onEnter","panelValues","onRangDateChange","dateInputPlaceholder","displayArray","getDateDisplay","showTime","showToday","dataScale","scale","changeNumber","checkNumberHandler","defaultPlaceholder","trustString","option","checked","onChangeCheckbox_switch","switchChange","LangIndex","onMultiLangTextSelect","onMultiLangTextChange","tip","fontSize","wordBreak","leftspace","md","xs","sm","rightspace","NCTabPane","NCTabs","TabPane","NCTreeNode","NCTree","TreeNode","NCOption","NCSelect","NCRadioGroup","NCRadio","RadioGroup","SearchAdvCom","initByProps","normalAdvId","superAdvId","leftTab","hideSearchCondition","currentClickPlan","fixedConditionGroup","defaultOpen","isleaf","replaceAdvBody","createSearchCondition","replaceRightBody","addAdvTabs","def","isDefaultPlan","currentSnap","deepClone","defaultSnap","normal","showAdvModal","firstInit","createDefaultSnap","itemObj","getSnapshotCache","cache","setvalue","getConditionTreeFromItems","pid","syncTree","createTreeData","searchBtnClickEve","template","searchBtnClick","lastStatus","finalData","queryAreaCode","querytype","querycondition","nctz","backPosition","onlyShowSuperBtn","saveSearchPlanClick","addSearchPlanClick","onlyShowModalCancelCallback","onlyShowModal","statusChangeEvent","publishSync","infoExchangeController","closeModal","mathSignChange","oldValue","onOperateTypeChange","onDropChildren","currentTarget","onDragOver","logicSelectChange","oldval","setSearchValByField","tabChange","_item","setSyncTreeData","addRequiredItems","newItems","filterMeta","setInitValueEvent","advOrNormal","statusChange","clickRight","onDrop","moveNode","getHoverNodeKey","getMoveNodeKey","scrollBottom","refs","scrollHeight","scrollTop","clearAdvValue","advSearchClearEve","editSearchPlanName","clickSearchPlan","delSearchPlan","dangerouslySetInnerHTML","__html","extendsList","clickPlanEve","plan","createSearchPlan","isMyPlan","searchPlanNameChange","mathSignChangeEve","modalContent","high","autoFocus","createDomItem","createDom","ind","mustFillIn","treeTitle","logicOptions","and","or","removeDom","liAttr","queryconditionCount","removeQuerConditionEve","onDragEnterBox","creatConditionUIDom","onDragEnter","defaultExpandedKeys","closeIcon","openIcon","defRightDom","searchStatus","addAdvBody","hideSearchType","selectedValue","handleChange","height","tabOnChange","createRightDom","searchConditionName","onInputFocus","getElementById","simple","super","searchChoosePlan","subscribe","unsubscribe","nextState","onlyShowAdvArea","defaultActiveKey","activeKey","tabBarStyle","tab","createSyncTree","showLine","neverDisable","expandedKeys","onDoubleClickEve","needEdit","searchType","nodeRightOpt","hideSearchPlan","onEntered","SearchAdvModal","position","x","y","handStart","handleStop","getChildrenRef","savePlanFun","queryFun","addPlanFun","searchModalTitle","createPortal","colse","NCHotKeys","ICON_CLOSE","handle","cancel","onStop","bounds","src","showAdvSearchPlanBtn","searchBtnName","showFlag","handleConfirm","editSearchPlan","chooseSearchPlan","searchAdvBtnClick","currentpk","iconClass","classnames","itemClass","SearchItem","WrappedComponent","isPass","areaId","searchRequiredToken","matchItemFocus","clearWarningToken","SearchWithAutoFocus","verify","un_pass","ConstSearchInfo","SearchComponent","completeFlag","isRenderAdv","get_this","getGloablThis","preHandlerFlag","searchAreaHeight","renderCompleteEvent","NCCreateSearch","initSearchArea","searchDom","offsetHeight","useCache","setData","statusList","showSearchItems","isunfold","showAdvBtn","defaultRenderobj4web","moduletype","showSearchPlan","isCompleted","prev","next","initSimpleSnap","spreadQueryPlan","planItems","temItem","superSnap","currentPlanCopy","normalSnap","clickSearchBtn","showSearchBtn","showClearBtn","replaceAdvBtnEve","clickAdvBtnEve","hideBtnArea","replaceSuperBtn","isSynInitAdvSearch","onlyShowPlan","currentSearch","opneBtnClick","onlyShowSuperCondition","metaPreHandler","functionList","getFunctionList","select","targt","qs","handler","ii","mytar","iii","timeFunctionHandler","resetEvent","oldvalue","currentSnapshot","choosePlanName","padding","buttonFlag","zindex","marginTop","hotkeytag","hideSearchPlanEve","attrcodeArr","userControlAdvArea","afterClickSearchPlan","newValue","fielid","fiedlid","newSearch","countQueryConditions","createTitle","checkIsVisible","createSearchDom","allItem","temp","snapshot_list","query","delete","minOverlayWidthMatchTrigger","hideSearch","createEmptySearch","closeSearchPlan","moreSearchPlanClick","showHideSearchPlan","createSearchPlanArea","showMoreBtn","advSearchStatus","afterEditSearchPlan","changeCompleteFlag","minHeight","remove_this","contextMixin","getContext","app_context","setSearchValue","getSearchValByField","setDisabledByField","openAdvSearch","clearSearchArea","getQueryInfo","getOprtypeByField","changeItemVisibleByField","_status","ITEM","setRequiredByField","setTemlateByField","NCModal","getTitle","getClassName","createUploader","billId","billNo","beforeUpload","accept","upData","beforeDelete","uploader","showUploader","uploaderData","beforeUploadFun","beforeDeleteFun","onHideFun","Uploader","CrossServiceCardBtn","queryBillTrack","pageInstance","formAreaCode","billtype","billpkname","gtxid","getFormItemsValue","billpk","showBillTrack","isError","oldState","isEquat","pop","$this","$parent","errorViewType","createErrorButton","record","sucessCallBack","createErrorFlag","headBtnAreaCode","myCrossServiceBtn","toggleErrorStatus","btnInstance","newState","tipContent","getUserId","userDataJSON","userData","getUserInfo","codes","1000","reason","desc","1001","1002","1003","1004","1005","1006","1007","1008","1009","1010","1011","1012","1013","1014","1015","4501","setGlobalStorage","getDecryptData","uuidv4","ChannelCtrl","recieve","unique","re","RegExp","onRecieve","match","event","message","removeEventListener","ChannelAction","check","reply","HeartCheck","count","timeout","running","timeoutObj","setInterval","stop","clearInterval","gzip","Gzip","ReadyState","MESSAGE","SocketConnect","closeSocket","isConnect","CWebSocket","WebSocketConnect","tabid","WebSocketTabid","randomNumber","restart","userid","ds","wsLocation","location","hostname","port","loacalWsLocation","serverLocation","cipherFlag","Cipher","CipherFlag","socketParams","encrypt","wsUrl","protocol","WebSocket","reconnect","createWebSocket","connectSwitch","async","onclose","code","onerror","onopen","readyState","onmessage","send","sendMessageToIframe","handleMessage","evt","origin","resMessage","unzip","isShowView","isShowToast","onMessage","condition","targetids","hidden","saga_mesg","hint_mesg","refreshData","saga_gtxid","SocketConfig","isdisplay","mark","customBtnBeforeClose","data-mark","current_gtxid","current_saga","saga_popInfo","onSocketMessage","lockReconnect","month","getMonth","day","getDate","hour","minutes","getMinutes","seconds","getSeconds","getFullYear","round","SocketMessageFun","destroy","getLangJson","staticData","multi","HotkeyHelperPanel","getInitData","caheKey","newData","panelType","limit","bufferData","nameLow","toLocaleLowerCase","keyLow","descLow","strLow","remianStr","spans","substring","Map","child","dg","dataGrouping","hasArea","rowSpan","highLight","getSearchData","panelDOM","panel","enterClose","moveHandle","bufferLen","more","moreShow","searchHandle","focusInputHandle","blurInputHandle","clearHandle","searchBtnHandle","onScroll","renderItems","bufferSize","HotkeyHelper","open","hideHandle","CONST_IS_MULTILINGUAL","isMul","timeTypes","displayTypes","getPageSizeStorage","utils","getTotal","column","source","fileds","Set","col","istotal","add","filed","renderValue","counts","avg","countPre","precs","precision","stringTypeOfAvg","formatAcuracy","sortColumn","sortType","customSortRule","valType","sorter","front","behind","frontValue","behindValue","localeCompare","fvalue","fdisplay","bvalue","bdisplay","isNullOrVoid","sorterClick","columnInfo","backSource","sortFun","ToolCell","handleMouseOver","cellDom","multipleRowCell","isLineAll","textLineAll","noTextLineAll","setPageSizeStorage","total","lib","defaultColor","varMultil","inserttableDom","ComplexTable","NCTable","SortTable","tableHeight","screenHeight","screen","bodyKey","param","checkOutTableSelected","createInsertTable","headTableId","bodyTableId","setTableBodyData","pageSizeChange","rowCheckChildChange","onAllCheckChangeEve","rowCheckChange","comType","needIndex","childNeedIndex","mockRadio","isDrag","adaptionHeight","inModal","insertTableHeight","insertTable","defPageInfo","pageSize","pageIndex","totalPageIndex","adddDataIndex","colums","dataIndex","sortTypeHead","sortParam","sortData","sortObj","mainCheckObj","rows","outerData","sortRows","orderNum","row","currentTable","getExpandTableHeight","isTotal","tableBody","expandTableHeight","tableHead","tbody","tableRow","theadHeight","trowHeight","TotalRowHeight","BodyMinHeight","paddingHeight","baseHeight","multilingual","fatherTable","newVal","pageInfo","columns","bodyColumn","headPaginationInfo","pagination","splitPks","pks","onCheckboxChangeChild","text","parents","parentsIndex","allFlag","childCheckObj","checkedArrayChild","checkedArray","checkedAllChild","out","checkedAll","checkOutTableAllSelected","renderColumnsMultiSelectChild","records","indexs","multiSelect","indexCol","record2","newColumn","saga_status","renderColumnsForChildOfIndex","createNewData","colMap","itemScale","sc","isShowTotal","handleColAndSrc","isGenerantorTotal","heji","totalColumns","totalData","onAllCheckChange","errorDataKey","cd","rowId","bodyData","onCheckboxChange","thisKey","resetCheckedArray","firstTime","classByType","indeterminate_bool","checkChildSelected","checkTilte","indeterminate","indeterminate_bool_child","finalColumns","multiCustomer","multiYes","multiNo","colIndex","alignRight","valSca","changeTime","createNewCol","totalConfig","bottom","currentStyle","defaultView","otherAreaHeight","lazyload","bodyStyle","onExpand","expanded","expandedRowKeys","hasThisChild","expandedRowRender","sortTypeChild","createNewColChild","fianlyData","childData","expandTableBodyHeight","inserttableTotalConfig","scroll","totalBodyHeight","totalPage","ceil","boundaryLinks","maxButtons","activePage","eventKey","getInsertTableValue","setInsertTableValue","isWrong","prePageSize","setChildTableData","table","getInsertTableSelectedValue","mainCord","childCord","newObj","alert","index2","getPageInfo","getCheckedRows","insetTable","consArr","warningOnce","deleteTableRowsByIndex","newdata","checkarr","tableId","updateDataByRefresh","saga_errormesg","myTable","oLen","refreshLen","bLen","RD","pkn","pkv","rd","changeCheck","ischeck","is","PrintOutput","shouldComponentUpdate","thisProps","thisState","funcode","nodekey","oids","printTemplateID","printTemplateMenu","submit","printTemplateName","m_ctemplateid","m_vtemplatename","submitData","outputSetting","download","outputMode","enctype","isCipher","formDownload","handleTypeChange","handlePrintTemplateIDChange","handleMultiConfigChange","MultiConfig","changePdfConfigCheck","pdfConfig","changeHtmlConfigCheck","htmlConfig","handlePrefixInputChange","prefix","handleThresholdInputChange","threshold","gerMultitaskSetup","sheetNamePreFix","dsPositionPolicy","fileVolume","isDifDocDifFile","canModifyType","multiTask","radioStyle","dsPositionPolicyList","isDifDocDifFileList","handleOtherSheet","iconStyle","inlt","PureComponent","PrintOutputModal","outputtype","getPlatformLang","hideChoice","NC_MODAL_CONFIRM","NC_MODAL_CALCEL","PrintTemplate","modalTitle","htmlPrint","json1","print","newWin","innerHTML","userAgent","isOpera","pdfPrint","searchTemplate","printer","newUpdateHeadCache","cardCache","updateHeadCache","Socket","handleBeforeUnLoad","cuuid","addTabid","tabidStore","hasOpenedTab","removeTabid","mergeTableData","refreshTable","refreshTableData","tableAreaCode","tableType","billSagaErrorMesg","hintErrorMesg","isRepeat","isCompensate","oldBillPk","viewTitleLang","viewBtnLang","billtypeFromList","extraInfos","nativeSocketBillInfo","mySocket","fromToastTip","connectMesg","showToast","topMark","toastMark","toasts","toastModal","viewTitle","viewBtnText","PID","getItem","treeToList","addIsLeaf","resetIcon","ib","iconBox","addIcon","delIcon","editIcon","addNodeFun","isBefore","loop","unshift","isLeaf","getParentKey","parentKey","hideIconEve","iconObj","addBrotherFun","editNodeFun","old","parentPk","addIconBox","setNodeDisableEve","disable","findYou","checkHasChildren","group","makeDOM","Store","store","formStore","searchValue","focusable","selectedKeys","autoExpandParent","checkedKeys","noDisableId","disabledSearch","showEditModal","deepData","saveExpandedKeys","saveCheckedKeys","currentNode","moveKey","isHover","selectedNode","userControlIcon","metaId","treeNodeOperation","treeType","noCheckWhenSelect","listeners","getListener","listener","setListener","forceUpdate","handleExpand","uniqueExpandedKeys","setStore","getCache","setNodeChecked","setCache","isString","delNodeSuceess","noneChangeLeaf","getStore","TreeUtils","editNodeSuccess","newTreeData","newDeepData","closeNodeByPk","hideIcon","addBrotherNode","setNodeSelected","cancelSelectedNode","searchChange","dataList","ySrc","filterTree","strToLocaleLowerCase","stack","parentKeys","overWriteFilterTree","overWriteList","isHasSelectedValue","filterNodes","beforeName","afterName","nodesMap","findAllParents","finalLists","getHooks","paths","path","BaseStore","hookFactory","Tree","SyncTree","transerDefaultConfigToStore","lastData","cacheProps","getAllNodeKeys","allKeys","getAllNodeKey","generateList","handleClearState","handleClearSearchVal","getSearchVal","clearSearchVal","searchInputRef","focusEve","onDoubleClickHandler","expandedRows","expandWhenDoubleClick","selectedItemKeys","copy","onTreeExpand","onSelectCallBack","onSelectAndChecked","onSelectEve","onCheckEve","pageOutput","triggerCheckWhenSelect","selected","selectedNodes","checkedNode","checkedNodes","isChange","onLoadData","treeNode","loadTreeData","onMouseEnterEve","onCheck","allTreeKeys","getAllTreeKeys","notRemoveKeys","onDragStart","dropped","onDragStartEve","dragObj","ar","dropKey","dragKey","dragNode","arr","dropToGap","onDragEnd","getFloadIcon","hiddenDefaultIcon","floadIcon","stopUpIon","getEditIcon","nodeIconTooltips","edit","editRender","getAddIcon","addRender","getDelIcon","delRender","getStopUpIcon","unlock","handleStopAndUp","lock","clickStopIconEve","clickUpIconEve","getRightIcon","getTitleInfo","nodeLevel","tooltipLevels","tooltipField","beforeStr","substr","searchFromName","afterStr","titleInfo","createCustomerTreeIcon","customizeIconClick","customerIcons","iconType","renderTreeTitle","rightIcon","getTreeNodesLazy","loopLazy","switcherClass","mustExpandable","refnameArr","isexpend","disabledSelected","getTreeNodes","addNodeEve","verifyModalForm","addNodeCallBack","setStatus","getAllFormValue","clickAddIconEve","emptyAllFormValue","clickEditIconEve","editNodeCallBack","delNodeCallBack","clickDelIconEve","editNodeEve","getScrollContainer","ncc_automated","_","newProps","defaultExpandAll","userDefine","needSearch","checkable","checkStrictly","modalSize","lazyLoad","canCloseFreely","editModalTitle","interval","blurEve","renderTreeNodes","onDoubleClick","debounceDuration","loadData","bordered","BaseComponent","existenceCheck","asyncTreeDataSource","useTree","createAsyncTree","newConfig","editType","doubleClickEve","pageScope","formDataSource","use","setTreeData","getNewTreeData","addTreeData","addTreeNode","getAsyncTreeValue","delTreeData","editTreeData","setAsyncNodeDisable","setTreeEdit","onTreeStatusChange","getSelectNodeAsync","openNodeByPkAsync","closeNodeByPkAsync","hideIconAsync","addBrotherNodeAsync","setNodeSelectedAsync","cancelSelectedNodeAsync","asyncTreeApi","syncTreeDataSource","iconBoxData","setIconVisible","selectedForInit","dataLength","firstRoot","needSelect","handleEidAddDisbale","setNodeDisable","handleEidAddNoDisbale","addNodeSuccess","getSyncTreeValue","getSelectNode","openNodeByPk","resetInfo","getTreeData","getCheckedKeys","setLeafNodeEdit","setLeafEdit","thisNode","moveNodeEve","targetpk","getSearchChangeEven","setTreeItemIcons","setCustomerIcons","icons","showAddTreeItemModal","setFormStatus","EmptyAllFormValue","showEditTreeItemModal","showDeleteTreeItemModal","updataDataSource","newDataSource","updataTreeNode","updataNode","findEditNode","nodes","syncTreeApi","ListToListTransfer","handleTransfer","targetKeys","direction","moveKeys","onTargetKeysChange","sourceSelectedKeys","targetSelectedKeys","changeDisabled","indexAry","continuous","continuousFlag","upDisabled","downDisabled","handleMove","before","after","lastBeforeItem","firstAfterItem","getRightSelectEle","handleFilterOption","inputValue","serachKeyword","listRender","titles","operations","searchPlaceholder","notFoundContent","showMoveBtn","transferClass","lazy","onSelectChange","filterOption","TreeToListTransfer","generate","rowKey","rowTitle","rowChildren","showListSearch","treeSearchKey","leafKeys","listData","leafNodes","getIcon","otherProps","nodeTitle","idx","disableCheckbox","listItem","cur","onTreeCheck","unLoadAlert","treeCheckedKeys","onListCheck","onTreeSelect","treeSelectedKeys","onListSelect","ary","toggle","onTreeSearch","treeExpandedKeys","treeAutoExpandParent","onListSearch","listSearchKey","listCheckedKeys","listSelectedKeys","keysAry","searching","treeLoading","sourceTitle","targetTitle","leftTemp","validTreeNum","rightTemp","treeTransferClass","treeTransferlistBodyClass","treeTransferlistBodyClassRight","treeProps","sourceHeaderCheckProps","listHeaderCheckProps","operaRightButtonProps","difference","operaLeftButtonProps","restTargetKeys","operaAllRightButtonProps","operaAllLeftButtonProps","dark","onDismiss","closeLabel","verticalAlign","PropTypes","Transfer","domainName","_dir","axios","then","setRes","getIntl","reg","pathList","MetaAttr","inputSig","isAsync","displayName","refcode","handleInput","handleDoubleClick","setName","handleSelect","setExplain","explain","metaParam","metaUrl","queryCondition","pos","mdclass","shift","callNumFlag","rootFlag","hintMsg","_createAll","Surface","handleRefresh","surfaceData","_getFieldData","handleCheckbox","eve","fieldData","tablename","handleSurfaceList","dataset","handleFieldList","handleDbList","_createContent","margin","background","surfaceUrl","data-name","data-explain","data-title","Tabs","FormulaEditor","getControlBtnsConfig","handleOk","handleCancel","handleValidate","handleCheckAll","handleClear","handleTextAreaChange","showData","handelSetName","handlePushStr","handleClickTabItem","textArea","validateUrl","validateData","formulastr","setShow","isShow","explainData","onOk","isValidateOnOK","btnContent","setCursorPosition","textAreaLen","textAreaValue","selectionStart","finalRange","finalValue","setSelectionRange","range","createTextRange","moveStart","moveEnd","_createWorkStation","optBtnsConfig","computedBtnconfig","noControlBtns","selfRangControl","_createControlBtns","_createOptBtns","_createTabs","formulaConfig","attrConfig","noShowFormula","noShowAttr","defaultFormulaKey","tabActiveKey","defaultAttrKey","onTabChange","defaultFormulaObj","defaultAttrObj","tabActiveKeyObj","formulaData","tabAttrConfig","TabPaneContent","tabFormulaConfig","typeName","_createFormulaTabPane","name2FormItemMap","originalTabs","_createFormulaTabPanes","footerHeight","_createFormulaAllTabPanes","_createAttrTabPanes","_createTabPaneContent","tabPaneConfig","introTabConfig","btnConfig","formulaUrl","oldFormulaUrl","prevProps","prevState","prevIsShow","exiting","onExit","modalbody","refer","inputEl","spanEl","wrap","fn","autoFocusInTricky","input","setNormalItemFocus","textarea","textEl","focusDom","switch","setSwitchItemFocus","switch_browse","switchEl","argsTag","mapTag","objectTag","setTag","reIsHostCtor","reIsUint","typedArrayTags","freeSelf","Function","freeExports","nodeType","freeModule","moduleExports","freeProcess","nodeUtil","binding","nodeIsTypedArray","isTypedArray","arraySome","predicate","mapToArray","setToArray","uid","transform","arrayProto","funcProto","objectProto","coreJsData","funcToString","maskSrcKey","exec","IE_PROTO","nativeObjectToString","reIsNative","Buffer","Uint8Array","propertyIsEnumerable","symToStringTag","nativeGetSymbols","getOwnPropertySymbols","nativeIsBuffer","isBuffer","nativeKeys","arg","DataView","getNative","WeakMap","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","valueOf","Hash","ListCache","SetCache","__data__","Stack","arrayLikeKeys","inherited","isArr","isArg","isArguments","isBuff","isType","skipIndexes","baseTimes","isIndex","assocIndexOf","eq","isOwn","unmasked","getRawTag","objectToString","baseIsArguments","baseIsEqual","bitmask","customizer","equalFunc","objIsArr","othIsArr","objTag","getTag","othTag","objIsObj","othIsObj","isSameTag","equalArrays","byteLength","byteOffset","buffer","convert","isPartial","stacked","equalByTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","objProps","getAllKeys","objLength","othLength","skipCtor","objValue","othValue","compared","objCtor","othCtor","equalObjects","baseIsEqualDeep","baseIsNative","isMasked","baseKeys","Ctor","proto","arrLength","seen","arrValue","othIndex","keysFunc","symbolsFunc","offset","arrayPush","baseGetAllKeys","getSymbols","getMapData","pairs","LARGE_ARRAY_SIZE","resIndex","arrayFilter","symbol","ArrayBuffer","ctorString","isLength","baseUnary","ADD","DELETE","SAVE","SAVE_ADD","EDIT","SAVE_SUBMIT","CAEL","STORAGE","DELETE_ROW","BTN_PRINT","clearOpenPanel","k","keyMapX","handlersX","getTranslateKeys","triggerEventHandle","assignResult","hotkeyWrapped","g","hashClear","hashDelete","hashGet","hashHas","hashSet","listCacheClear","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","findPrevFocusItemInTable","prevTd","firstTd","findFirstTdInRow","findPrevSiblings","tableTr","lastOneIndex","lastFocusItem","findLastChild","findLastFocusItemInCurrentModule","jumpToPrevModuleFocusItem","findPrevRowTd","prevModuleId","currentModuleIndex","prevModuleIndex","calculatePrevModuleId","prevModuleKeyMap","lastItemDom","lastItem","findLastFocusItemInForm","prevTr","divs","lastDiv","findUpStairsFocusItemInTable","upStairTr","jumpedLines","calculateNeedJumpTimes","cellIdentityArray","upStairsLine","upStairsCellIdentity","findDownStairsFocusItemInTable","downStairTr","downStairsLine","ARROW_KEY","itemType","hotKeyDatePicker","keyDownOfShiftUp","nextFocus","nextFocusModuleIdIndex","nextFocusModuleId","isLastModule","wrapperDom","moduleInfo","parent","hasTabRelation","tableActiveKey","activeItemFocus","focusInSelfModule","currentModuleType","nextModuleType","myEditTable","getDataByFormDataStructure","getDataByCardTableDataStructure","nextItemNotHaveData","handleArrowKeyDown","setCacheAdd","setCacheHas","baseIndexOf","comparator","DragWidthCom","mouseDown","divDom","clientWid","onMouseDown","wid","clientX","beginX","box","maskRightDom","maskLeftDom","onDragStop","spanDom","lefWid","defLeftWid","leftMinWid","rightOverflow","minWidth","mask","leftDom","span","rightDom","FormWithKeyboardChange","formStatusChanged","autoFocusToken","getStatus","stopFormHotKeyChange","autoFocusDeferred","createByModuleType","deleteKeyByModuleId","judgeCreateKeyMap","getHotKeyConfig","shiftUp","shiftDown","FormWithAutoFocus","setItemAttribute","getItemAttribute","arrayIncludes","arrayIncludesWith","arrayMap","cacheHas","isCommon","valuesLength","outer","computed","valuesIndex","isFlattenable","baseFlatten","depth","isStrict","Cell","firstCol","tipNode","cellParent","realNode","offsetWidth","fixedStyle","onCellMouseDown","isEllipsis","fixed","SAVE_MULTI","getVarType","getLists","lists","handleLists","countDeep","sunLists","saveCount","findFather","stopCheckBoxChange","checkOnRowClick","operationContainer","getSelection","getChildren","Form","useForm","fullDataObject","isCheckedHasChild","indeterminateKeys","currentSelectedRow","currentRow","modalType","getViewMeta","refresh","shouldForceUpdate","formColumns","nItem","_hasMeta","regexp","TreeTable","checkDataType","childKeyRecord","childrenKeys","itemCheckBoxChange","showContextMenu","setChecked","setPidCheckedStatus","allChilrenList","allLength","checkedLength","selectAllChange","checkBoxChange_radio","checkboxChange","checkedType","maxDeep","showCheckBox","oldSearchValue","_width","langIndex","langAttrCode","loginLang","searchValueLow","contextLow","alreadyAssignment","Irender","defaultColumns","resArr","oldFirstColRender","expendSwich","zaiyihang","expandEve","collapandEve","onBeforeEvent","isCheckNow","onRowDoubleClick","ncOnRowDoubleClick","onRowClick","onRowClickEve","rowClassName","createContextMenu","closeAllEve","hideExpandAll","expandAllEve","hideIncludeChild","extendRightMenu","getAllExpandKeys","getColSetConfig","pagecode","getPageCode","areaCode","scrollConfig","isLazyload","addBlankCol","showWidthAndHeightConfig","canvas","unitKey","userSelect","startItem","selectedRowKeys","selectedRecord","columnKey","onExpandedRowsChange","bodyDisplayInRow","foldingRowChange","cancelCustomRightMenu","colsSettingParam","useTreeTable","MODALNAME","treeTableDataSource","setChildNodeEve","tableData","clearExpandedKeys","addRowId","addChildren","editRow","addChildNode","syncAddNode","addBrother","brother","delRow","parentRowId","utilGetChildren","utilCountDeep","utilStopCheckBoxChange","isMultilingual","formId","TreeTableAPI","TreeTableManyCol","treeTableCol","thisTable","defTreeData","defCol","cloneObj","formItem","fullDataArray","createNewDataRes","cp","createForm","initTreeTableData","defaultExpandAllRows","setChildNode","editRowEve","addChildRowEve","runThis","kValue","addBrotherRow","delRowByPk","getAllValue","getValueByRowId","getValueByRowIdEve","getExpandedRowKeys","formValues","setAllFormValue","emptyAllData","openRow","closeRow","getSelectedRow","selectedRows","G","getSelectedRowEve","isCheckHasChild","searchTreeTable","filters","searchResult","findDataByValueFilters","expectData","needFilters","filtersLength","isMatch","expectItem","vi","setCheckedKeys","merge","oldCheckedKeys","setSelectedRow","updateChildRow","parentRow","newDataArr","updateRowByRowId","treeTableCompatible","register","apiBindPage","simpleTableAPI","unfinished","Con","Row","Col","_Col3","_interopRequireDefault","_Row3","_Layout2","withHotKeyChange","formStatus","moduleType","stopCardTableHotKeyChange","high_hotkey","notEditStatus","getTableProps","stopEditTableHotKeyChange","webpackPolyfill","deprecate","classList","getFormType","hasOwn","classes","argType","inner","default","needJumpTimes","tempTr","tempNeedJumpTimes","isKeyable","_classnames2","_react","_react2","_propTypes2","_classCallCheck","instance","Constructor","_possibleConstructorReturn","_inherits","subClass","superClass","defaults","getOwnPropertyNames","getOwnPropertyDescriptor","_defaults","componentClass","number","lg","xsOffset","smOffset","mdOffset","lgOffset","xsPush","smPush","mdPush","lgPush","xsPull","smPull","mdPull","lgPull","DEVICE_SIZES","_Component","_props","clsPrefix","_objectWithoutProperties","tbClass","popProp","propSuffix","modifier","propName","propValue","bsclass","_defineProperty","fluid","_React$Component","_tbclass","tbclass","ReactPropTypesSecret","emptyFunction","emptyFunctionWithReset","resetWarningCache","shim","componentName","propFullName","secret","Error","getShim","isRequired","ReactPropTypes","arrayOf","elementType","instanceOf","objectOf","oneOf","exact","checkPropTypes","baseFindIndex","baseIsNaN","strictIndexOf","fromIndex","fromRight","nativeMax","args","otherArgs","thisArg","baseSetToString","shortOut","constant","nativeNow","lastCalled","stamp","remaining","spreadableSymbol","isConcatSpreadable","TableWithAutoFocus","activeEl","force","tableEL","WithAutoFocus","judgeFocus","cellselectorkey","setCellProps","EditTableWithKeyboardChange","hotKeyWithArrow","hotKeyWithEnter","tableStatusChanged","WithKeyboardChange","TableWithKeyboardChange","baseDifference","baseRest","isArrayLikeObject","selectDateFunction","pickerDOM","getFuntionValue","getTimeFunctionLabel","openCallBack","getDateFunNode","newFunList","rightHandler","leftHandler","enterHander","onKeyDown","availableFormItems","availableTableItems","formDisableAttrCode","tableDisabledAttrCode","hotKeyPrefix","formAutoFocusJudgement","isAvailableFormItem","metaRes","itemDisabled","iteratorTableColumns","iterable","pool","pre","isAvailableTableItem","processKeyMapOfTable","availableItems","lastRowIndex","lastAvailableItem","tableAutoFocusJudgement","publishFocusItem","tabRelation","gridrelation","createTabRelationKeyMap","getFirstItem","setValueOfActiveTable","newOrderOfHotKey","formItems","itemsAttrCode","firstItemKey"],"mappings":"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","file":"components/index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"@platform/api/index\"), require(\"@platform/base/index\"), require(\"react-dom\"), require(\"@platform/table-core/index\"), require(\"@platform/template/index\"), require(\"@platform/form/index\"), require(\"axios\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"@platform/api/index\", \"@platform/base/index\", \"react-dom\", \"@platform/table-core/index\", \"@platform/template/index\", \"@platform/form/index\", \"axios\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"@platform/components/index\"] = factory(require(\"react\"), require(\"@platform/api/index\"), require(\"@platform/base/index\"), require(\"react-dom\"), require(\"@platform/table-core/index\"), require(\"@platform/template/index\"), require(\"@platform/form/index\"), require(\"axios\"));\n\telse\n\t\troot[\"@platform/components/index\"] = factory(root[\"React\"], root[\"@platform/api/index\"], root[\"@platform/base/index\"], root[\"ReactDOM\"], root[\"@platform/table-core/index\"], root[\"@platform/template/index\"], root[\"@platform/form/index\"], root[\"axios\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__3__, __WEBPACK_EXTERNAL_MODULE__6__, __WEBPACK_EXTERNAL_MODULE__8__, __WEBPACK_EXTERNAL_MODULE__11__, __WEBPACK_EXTERNAL_MODULE__42__, __WEBPACK_EXTERNAL_MODULE__56__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"../../../../platform/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1890);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","/**\n * ISC License\n *\n * Copyright (c) 2018, Aleck Greenham\n *\n * Permission to use, copy, modify, and/or distribute this software for any purpose with or without fee is hereby granted, provided that the above copyright notice and this permission notice appear in all copies.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n */\n\nimport PropTypes from\"prop-types\";import React,{Component,PureComponent}from\"react\";import isEqual from\"lodash.isequal\";import ReactDOM from\"react-dom\";import isBool from\"lodash.isboolean\";import isObject from\"lodash.isobject\";var classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")},createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},inherits=function(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},objectWithoutProperties=function(e,t){var o={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n]);return o},possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!t||\"object\"!=typeof t&&\"function\"!=typeof t?e:t},FocusTrap=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,Component),createClass(t,[{key:\"render\",value:function(){var e=this.props,t=e.component,o=e.children,n=objectWithoutProperties(e,[\"component\",\"children\"]);return React.createElement(t,_extends({tabIndex:\"-1\"},n),o)}}]),t}();function sequencesFromKeyMap(e,t){var o=e[t];return o?Array.isArray(o)?o:[o]:[t]}function hasChanged(e,t){return!isEqual(e,t)}FocusTrap.propTypes={onFocus:PropTypes.func,onBlur:PropTypes.func,component:PropTypes.oneOfType([PropTypes.func,PropTypes.string]),children:PropTypes.node},FocusTrap.defaultProps={component:\"div\"};var HotKeys=function(e){function t(e,o){classCallCheck(this,t);var n=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o));return n.onFocus=n.onFocus.bind(n),n.onBlur=n.onBlur.bind(n),n}return inherits(t,Component),createClass(t,[{key:\"getChildContext\",value:function(){return{hotKeyParent:this,hotKeyMap:this.__hotKeyMap__}}},{key:\"componentWillMount\",value:function(){this.updateMap()}},{key:\"updateMap\",value:function(){var e=this.buildMap();return!isEqual(e,this.__hotKeyMap__)&&(this.__hotKeyMap__=e,!0)}},{key:\"buildMap\",value:function(){var e=this.context.hotKeyMap||{},t=this.props.keyMap||{};return _extends({},e,t)}},{key:\"getMap\",value:function(){return this.__hotKeyMap__}},{key:\"componentDidMount\",value:function(){var e=require(\"mousetrap\");this.__mousetrap__=new e(this.props.attach||ReactDOM.findDOMNode(this)),this.updateHotKeys(!0)}},{key:\"componentDidUpdate\",value:function(e){this.updateHotKeys(!1,e)}},{key:\"componentWillUnmount\",value:function(){this.context.hotKeyParent&&this.context.hotKeyParent.childHandledSequence(null),this.__mousetrap__&&this.__mousetrap__.reset()}},{key:\"updateHotKeys\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=this.props.handlers,n=void 0===o?{}:o,r=t.handlers,s=void 0===r?n:r,a=this.updateMap();(e||a||hasChanged(n,s))&&(this.context.hotKeyParent&&this.context.hotKeyParent.childHandledSequence(null),this.syncHandlersToMousetrap())}},{key:\"syncHandlersToMousetrap\",value:function(){var e=this,t=this.props.handlers,o=void 0===t?{}:t,n=this.getMap(),r=[],s=this.__mousetrap__;Object.keys(o).forEach(function(t){var s=o[t];sequencesFromKeyMap(n,t).forEach(function(t){var o=void 0;isObject(t)&&(o=t.action,t=t.sequence),r.push({callback:function(t,o){if((isBool(e.props.focused)?e.props.focused:e.__isFocused__)&&o!==e.__lastChildSequence__)return e.context.hotKeyParent&&e.context.hotKeyParent.childHandledSequence(o),s(t,o)},action:o,sequence:t})})}),s.reset(),r.forEach(function(e){var t=e.sequence,o=e.callback,n=e.action;return s.bind(t,o,n)})}},{key:\"childHandledSequence\",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.__lastChildSequence__=e,this.context.hotKeyParent&&this.context.hotKeyParent.childHandledSequence(e)}},{key:\"render\",value:function(){var e=this.props,t=(e.keyMap,e.handlers,e.focused,e.attach,e.children),o=objectWithoutProperties(e,[\"keyMap\",\"handlers\",\"focused\",\"attach\",\"children\"]);return React.createElement(FocusTrap,_extends({},o,{onFocus:this.onFocus,onBlur:this.onBlur}),t)}},{key:\"onFocus\",value:function(){var e;(this.__isFocused__=!0,this.props.onFocus)&&(e=this.props).onFocus.apply(e,arguments)}},{key:\"onBlur\",value:function(){var e;(this.__isFocused__=!1,this.props.onBlur)&&(e=this.props).onBlur.apply(e,arguments);this.context.hotKeyParent&&this.context.hotKeyParent.childHandledSequence(null)}}]),t}();HotKeys.propTypes={keyMap:PropTypes.object,handlers:PropTypes.object,focused:PropTypes.bool,attach:PropTypes.any,children:PropTypes.node,onFocus:PropTypes.func,onBlur:PropTypes.func},HotKeys.childContextTypes={hotKeyParent:PropTypes.any,hotKeyMap:PropTypes.object},HotKeys.contextTypes={hotKeyParent:PropTypes.any,hotKeyMap:PropTypes.object};var withHotKeys=function(e){return function(t){return function(o){function n(e){classCallCheck(this,n);var t=possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t._setRef=t._setRef.bind(t),t.state={handlers:{}},t}return inherits(n,PureComponent),createClass(n,[{key:\"componentDidMount\",value:function(){this.setState({handlers:this._ref.hotKeyHandlers})}},{key:\"_setRef\",value:function(e){this._ref=e}},{key:\"render\",value:function(){var o=this.state.handlers;return React.createElement(HotKeys,{component:\"document-fragment\",keyMap:e,handlers:o},React.createElement(t,_extends({ref:this._setRef},this.props)))}}]),n}()}};function HotKeyMapMixin(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{contextTypes:{hotKeyMap:PropTypes.object},childContextTypes:{hotKeyMap:PropTypes.object},getChildContext:function(){return{hotKeyMap:this.__hotKeyMap__}},componentWillMount:function(){this.updateMap()},updateMap:function(){var e=this.buildMap();return!isEqual(e,this.__hotKeyMap__)&&(this.__hotKeyMap__=e,!0)},buildMap:function(){var t=this.context.hotKeyMap||{},o=this.props.keyMap||{};return _extends({},t,e,o)},getMap:function(){return this.__hotKeyMap__}}}export{HotKeys,withHotKeys,FocusTrap,HotKeyMapMixin};\n","/*global define:false */\n/**\n * Copyright 2012-2017 Craig Campbell\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * Mousetrap is a simple keyboard shortcut library for Javascript with\n * no external dependencies\n *\n * @version 1.6.5\n * @url craig.is/killing/mice\n */\n(function(window, document, undefined) {\n\n    // Check if mousetrap is used inside browser, if not, return\n    if (!window) {\n        return;\n    }\n\n    /**\n     * mapping of special keycodes to their corresponding keys\n     *\n     * everything in this dictionary cannot use keypress events\n     * so it has to be here to map to the correct keycodes for\n     * keyup/keydown events\n     *\n     * @type {Object}\n     */\n    var _MAP = {\n        8: 'backspace',\n        9: 'tab',\n        13: 'enter',\n        16: 'shift',\n        17: 'ctrl',\n        18: 'alt',\n        20: 'capslock',\n        27: 'esc',\n        32: 'space',\n        33: 'pageup',\n        34: 'pagedown',\n        35: 'end',\n        36: 'home',\n        37: 'left',\n        38: 'up',\n        39: 'right',\n        40: 'down',\n        45: 'ins',\n        46: 'del',\n        91: 'meta',\n        93: 'meta',\n        224: 'meta'\n    };\n\n    /**\n     * mapping for special characters so they can support\n     *\n     * this dictionary is only used incase you want to bind a\n     * keyup or keydown event to one of these keys\n     *\n     * @type {Object}\n     */\n    var _KEYCODE_MAP = {\n        106: '*',\n        107: '+',\n        109: '-',\n        110: '.',\n        111 : '/',\n        186: ';',\n        187: '=',\n        188: ',',\n        189: '-',\n        190: '.',\n        191: '/',\n        192: '`',\n        219: '[',\n        220: '\\\\',\n        221: ']',\n        222: '\\''\n    };\n\n    /**\n     * this is a mapping of keys that require shift on a US keypad\n     * back to the non shift equivelents\n     *\n     * this is so you can use keyup events with these keys\n     *\n     * note that this will only work reliably on US keyboards\n     *\n     * @type {Object}\n     */\n    var _SHIFT_MAP = {\n        '~': '`',\n        '!': '1',\n        '@': '2',\n        '#': '3',\n        '$': '4',\n        '%': '5',\n        '^': '6',\n        '&': '7',\n        '*': '8',\n        '(': '9',\n        ')': '0',\n        '_': '-',\n        '+': '=',\n        ':': ';',\n        '\\\"': '\\'',\n        '<': ',',\n        '>': '.',\n        '?': '/',\n        '|': '\\\\'\n    };\n\n    /**\n     * this is a list of special strings you can use to map\n     * to modifier keys when you specify your keyboard shortcuts\n     *\n     * @type {Object}\n     */\n    var _SPECIAL_ALIASES = {\n        'option': 'alt',\n        'command': 'meta',\n        'return': 'enter',\n        'escape': 'esc',\n        'plus': '+',\n        'mod': /Mac|iPod|iPhone|iPad/.test(navigator.platform) ? 'meta' : 'ctrl'\n    };\n\n    /**\n     * variable to store the flipped version of _MAP from above\n     * needed to check if we should use keypress or not when no action\n     * is specified\n     *\n     * @type {Object|undefined}\n     */\n    var _REVERSE_MAP;\n\n    /**\n     * loop through the f keys, f1 to f19 and add them to the map\n     * programatically\n     */\n    for (var i = 1; i < 20; ++i) {\n        _MAP[111 + i] = 'f' + i;\n    }\n\n    /**\n     * loop through to map numbers on the numeric keypad\n     */\n    for (i = 0; i <= 9; ++i) {\n\n        // This needs to use a string cause otherwise since 0 is falsey\n        // mousetrap will never fire for numpad 0 pressed as part of a keydown\n        // event.\n        //\n        // @see https://github.com/ccampbell/mousetrap/pull/258\n        _MAP[i + 96] = i.toString();\n    }\n\n    /**\n     * cross browser add event method\n     *\n     * @param {Element|HTMLDocument} object\n     * @param {string} type\n     * @param {Function} callback\n     * @returns void\n     */\n    function _addEvent(object, type, callback) {\n        if (object.addEventListener) {\n            object.addEventListener(type, callback, false);\n            return;\n        }\n\n        object.attachEvent('on' + type, callback);\n    }\n\n    /**\n     * takes the event and returns the key character\n     *\n     * @param {Event} e\n     * @return {string}\n     */\n    function _characterFromEvent(e) {\n\n        // for keypress events we should return the character as is\n        if (e.type == 'keypress') {\n            var character = String.fromCharCode(e.which);\n\n            // if the shift key is not pressed then it is safe to assume\n            // that we want the character to be lowercase.  this means if\n            // you accidentally have caps lock on then your key bindings\n            // will continue to work\n            //\n            // the only side effect that might not be desired is if you\n            // bind something like 'A' cause you want to trigger an\n            // event when capital A is pressed caps lock will no longer\n            // trigger the event.  shift+a will though.\n            if (!e.shiftKey) {\n                character = character.toLowerCase();\n            }\n\n            return character;\n        }\n\n        // for non keypress events the special maps are needed\n        if (_MAP[e.which]) {\n            return _MAP[e.which];\n        }\n\n        if (_KEYCODE_MAP[e.which]) {\n            return _KEYCODE_MAP[e.which];\n        }\n\n        // if it is not in the special map\n\n        // with keydown and keyup events the character seems to always\n        // come in as an uppercase character whether you are pressing shift\n        // or not.  we should make sure it is always lowercase for comparisons\n        return String.fromCharCode(e.which).toLowerCase();\n    }\n\n    /**\n     * checks if two arrays are equal\n     *\n     * @param {Array} modifiers1\n     * @param {Array} modifiers2\n     * @returns {boolean}\n     */\n    function _modifiersMatch(modifiers1, modifiers2) {\n        return modifiers1.sort().join(',') === modifiers2.sort().join(',');\n    }\n\n    /**\n     * takes a key event and figures out what the modifiers are\n     *\n     * @param {Event} e\n     * @returns {Array}\n     */\n    function _eventModifiers(e) {\n        var modifiers = [];\n\n        if (e.shiftKey) {\n            modifiers.push('shift');\n        }\n\n        if (e.altKey) {\n            modifiers.push('alt');\n        }\n\n        if (e.ctrlKey) {\n            modifiers.push('ctrl');\n        }\n\n        if (e.metaKey) {\n            modifiers.push('meta');\n        }\n\n        return modifiers;\n    }\n\n    /**\n     * prevents default for this event\n     *\n     * @param {Event} e\n     * @returns void\n     */\n    function _preventDefault(e) {\n        if (e.preventDefault) {\n            e.preventDefault();\n            return;\n        }\n\n        e.returnValue = false;\n    }\n\n    /**\n     * stops propogation for this event\n     *\n     * @param {Event} e\n     * @returns void\n     */\n    function _stopPropagation(e) {\n        if (e.stopPropagation) {\n            e.stopPropagation();\n            return;\n        }\n\n        e.cancelBubble = true;\n    }\n\n    /**\n     * determines if the keycode specified is a modifier key or not\n     *\n     * @param {string} key\n     * @returns {boolean}\n     */\n    function _isModifier(key) {\n        return key == 'shift' || key == 'ctrl' || key == 'alt' || key == 'meta';\n    }\n\n    /**\n     * reverses the map lookup so that we can look for specific keys\n     * to see what can and can't use keypress\n     *\n     * @return {Object}\n     */\n    function _getReverseMap() {\n        if (!_REVERSE_MAP) {\n            _REVERSE_MAP = {};\n            for (var key in _MAP) {\n\n                // pull out the numeric keypad from here cause keypress should\n                // be able to detect the keys from the character\n                if (key > 95 && key < 112) {\n                    continue;\n                }\n\n                if (_MAP.hasOwnProperty(key)) {\n                    _REVERSE_MAP[_MAP[key]] = key;\n                }\n            }\n        }\n        return _REVERSE_MAP;\n    }\n\n    /**\n     * picks the best action based on the key combination\n     *\n     * @param {string} key - character for key\n     * @param {Array} modifiers\n     * @param {string=} action passed in\n     */\n    function _pickBestAction(key, modifiers, action) {\n\n        // if no action was picked in we should try to pick the one\n        // that we think would work best for this key\n        if (!action) {\n            action = _getReverseMap()[key] ? 'keydown' : 'keypress';\n        }\n\n        // modifier keys don't work as expected with keypress,\n        // switch to keydown\n        if (action == 'keypress' && modifiers.length) {\n            action = 'keydown';\n        }\n\n        return action;\n    }\n\n    /**\n     * Converts from a string key combination to an array\n     *\n     * @param  {string} combination like \"command+shift+l\"\n     * @return {Array}\n     */\n    function _keysFromString(combination) {\n        if (combination === '+') {\n            return ['+'];\n        }\n\n        combination = combination.replace(/\\+{2}/g, '+plus');\n        return combination.split('+');\n    }\n\n    /**\n     * Gets info for a specific key combination\n     *\n     * @param  {string} combination key combination (\"command+s\" or \"a\" or \"*\")\n     * @param  {string=} action\n     * @returns {Object}\n     */\n    function _getKeyInfo(combination, action) {\n        var keys;\n        var key;\n        var i;\n        var modifiers = [];\n\n        // take the keys from this pattern and figure out what the actual\n        // pattern is all about\n        keys = _keysFromString(combination);\n\n        for (i = 0; i < keys.length; ++i) {\n            key = keys[i];\n\n            // normalize key names\n            if (_SPECIAL_ALIASES[key]) {\n                key = _SPECIAL_ALIASES[key];\n            }\n\n            // if this is not a keypress event then we should\n            // be smart about using shift keys\n            // this will only work for US keyboards however\n            if (action && action != 'keypress' && _SHIFT_MAP[key]) {\n                key = _SHIFT_MAP[key];\n                modifiers.push('shift');\n            }\n\n            // if this key is a modifier then add it to the list of modifiers\n            if (_isModifier(key)) {\n                modifiers.push(key);\n            }\n        }\n\n        // depending on what the key combination is\n        // we will try to pick the best event for it\n        action = _pickBestAction(key, modifiers, action);\n\n        return {\n            key: key,\n            modifiers: modifiers,\n            action: action\n        };\n    }\n\n    function _belongsTo(element, ancestor) {\n        if (element === null || element === document) {\n            return false;\n        }\n\n        if (element === ancestor) {\n            return true;\n        }\n\n        return _belongsTo(element.parentNode, ancestor);\n    }\n\n    function Mousetrap(targetElement) {\n        var self = this;\n\n        targetElement = targetElement || document;\n\n        if (!(self instanceof Mousetrap)) {\n            return new Mousetrap(targetElement);\n        }\n\n        /**\n         * element to attach key events to\n         *\n         * @type {Element}\n         */\n        self.target = targetElement;\n\n        /**\n         * a list of all the callbacks setup via Mousetrap.bind()\n         *\n         * @type {Object}\n         */\n        self._callbacks = {};\n\n        /**\n         * direct map of string combinations to callbacks used for trigger()\n         *\n         * @type {Object}\n         */\n        self._directMap = {};\n\n        /**\n         * keeps track of what level each sequence is at since multiple\n         * sequences can start out with the same sequence\n         *\n         * @type {Object}\n         */\n        var _sequenceLevels = {};\n\n        /**\n         * variable to store the setTimeout call\n         *\n         * @type {null|number}\n         */\n        var _resetTimer;\n\n        /**\n         * temporary state where we will ignore the next keyup\n         *\n         * @type {boolean|string}\n         */\n        var _ignoreNextKeyup = false;\n\n        /**\n         * temporary state where we will ignore the next keypress\n         *\n         * @type {boolean}\n         */\n        var _ignoreNextKeypress = false;\n\n        /**\n         * are we currently inside of a sequence?\n         * type of action (\"keyup\" or \"keydown\" or \"keypress\") or false\n         *\n         * @type {boolean|string}\n         */\n        var _nextExpectedAction = false;\n\n        /**\n         * resets all sequence counters except for the ones passed in\n         *\n         * @param {Object} doNotReset\n         * @returns void\n         */\n        function _resetSequences(doNotReset) {\n            doNotReset = doNotReset || {};\n\n            var activeSequences = false,\n                key;\n\n            for (key in _sequenceLevels) {\n                if (doNotReset[key]) {\n                    activeSequences = true;\n                    continue;\n                }\n                _sequenceLevels[key] = 0;\n            }\n\n            if (!activeSequences) {\n                _nextExpectedAction = false;\n            }\n        }\n\n        /**\n         * finds all callbacks that match based on the keycode, modifiers,\n         * and action\n         *\n         * @param {string} character\n         * @param {Array} modifiers\n         * @param {Event|Object} e\n         * @param {string=} sequenceName - name of the sequence we are looking for\n         * @param {string=} combination\n         * @param {number=} level\n         * @returns {Array}\n         */\n        function _getMatches(character, modifiers, e, sequenceName, combination, level) {\n            var i;\n            var callback;\n            var matches = [];\n            var action = e.type;\n\n            // if there are no events related to this keycode\n            if (!self._callbacks[character]) {\n                return [];\n            }\n\n            // if a modifier key is coming up on its own we should allow it\n            if (action == 'keyup' && _isModifier(character)) {\n                modifiers = [character];\n            }\n\n            // loop through all callbacks for the key that was pressed\n            // and see if any of them match\n            for (i = 0; i < self._callbacks[character].length; ++i) {\n                callback = self._callbacks[character][i];\n\n                // if a sequence name is not specified, but this is a sequence at\n                // the wrong level then move onto the next match\n                if (!sequenceName && callback.seq && _sequenceLevels[callback.seq] != callback.level) {\n                    continue;\n                }\n\n                // if the action we are looking for doesn't match the action we got\n                // then we should keep going\n                if (action != callback.action) {\n                    continue;\n                }\n\n                // if this is a keypress event and the meta key and control key\n                // are not pressed that means that we need to only look at the\n                // character, otherwise check the modifiers as well\n                //\n                // chrome will not fire a keypress if meta or control is down\n                // safari will fire a keypress if meta or meta+shift is down\n                // firefox will fire a keypress if meta or control is down\n                if ((action == 'keypress' && !e.metaKey && !e.ctrlKey) || _modifiersMatch(modifiers, callback.modifiers)) {\n\n                    // when you bind a combination or sequence a second time it\n                    // should overwrite the first one.  if a sequenceName or\n                    // combination is specified in this call it does just that\n                    //\n                    // @todo make deleting its own method?\n                    var deleteCombo = !sequenceName && callback.combo == combination;\n                    var deleteSequence = sequenceName && callback.seq == sequenceName && callback.level == level;\n                    if (deleteCombo || deleteSequence) {\n                        self._callbacks[character].splice(i, 1);\n                    }\n\n                    matches.push(callback);\n                }\n            }\n\n            return matches;\n        }\n\n        /**\n         * actually calls the callback function\n         *\n         * if your callback function returns false this will use the jquery\n         * convention - prevent default and stop propogation on the event\n         *\n         * @param {Function} callback\n         * @param {Event} e\n         * @returns void\n         */\n        function _fireCallback(callback, e, combo, sequence) {\n\n            // if this event should not happen stop here\n            if (self.stopCallback(e, e.target || e.srcElement, combo, sequence)) {\n                return;\n            }\n\n            if (callback(e, combo) === false) {\n                _preventDefault(e);\n                _stopPropagation(e);\n            }\n        }\n\n        /**\n         * handles a character key event\n         *\n         * @param {string} character\n         * @param {Array} modifiers\n         * @param {Event} e\n         * @returns void\n         */\n        self._handleKey = function(character, modifiers, e) {\n            var callbacks = _getMatches(character, modifiers, e);\n            var i;\n            var doNotReset = {};\n            var maxLevel = 0;\n            var processedSequenceCallback = false;\n\n            // Calculate the maxLevel for sequences so we can only execute the longest callback sequence\n            for (i = 0; i < callbacks.length; ++i) {\n                if (callbacks[i].seq) {\n                    maxLevel = Math.max(maxLevel, callbacks[i].level);\n                }\n            }\n\n            // loop through matching callbacks for this key event\n            for (i = 0; i < callbacks.length; ++i) {\n\n                // fire for all sequence callbacks\n                // this is because if for example you have multiple sequences\n                // bound such as \"g i\" and \"g t\" they both need to fire the\n                // callback for matching g cause otherwise you can only ever\n                // match the first one\n                if (callbacks[i].seq) {\n\n                    // only fire callbacks for the maxLevel to prevent\n                    // subsequences from also firing\n                    //\n                    // for example 'a option b' should not cause 'option b' to fire\n                    // even though 'option b' is part of the other sequence\n                    //\n                    // any sequences that do not match here will be discarded\n                    // below by the _resetSequences call\n                    if (callbacks[i].level != maxLevel) {\n                        continue;\n                    }\n\n                    processedSequenceCallback = true;\n\n                    // keep a list of which sequences were matches for later\n                    doNotReset[callbacks[i].seq] = 1;\n                    _fireCallback(callbacks[i].callback, e, callbacks[i].combo, callbacks[i].seq);\n                    continue;\n                }\n\n                // if there were no sequence matches but we are still here\n                // that means this is a regular match so we should fire that\n                if (!processedSequenceCallback) {\n                    _fireCallback(callbacks[i].callback, e, callbacks[i].combo);\n                }\n            }\n\n            // if the key you pressed matches the type of sequence without\n            // being a modifier (ie \"keyup\" or \"keypress\") then we should\n            // reset all sequences that were not matched by this event\n            //\n            // this is so, for example, if you have the sequence \"h a t\" and you\n            // type \"h e a r t\" it does not match.  in this case the \"e\" will\n            // cause the sequence to reset\n            //\n            // modifier keys are ignored because you can have a sequence\n            // that contains modifiers such as \"enter ctrl+space\" and in most\n            // cases the modifier key will be pressed before the next key\n            //\n            // also if you have a sequence such as \"ctrl+b a\" then pressing the\n            // \"b\" key will trigger a \"keypress\" and a \"keydown\"\n            //\n            // the \"keydown\" is expected when there is a modifier, but the\n            // \"keypress\" ends up matching the _nextExpectedAction since it occurs\n            // after and that causes the sequence to reset\n            //\n            // we ignore keypresses in a sequence that directly follow a keydown\n            // for the same character\n            var ignoreThisKeypress = e.type == 'keypress' && _ignoreNextKeypress;\n            if (e.type == _nextExpectedAction && !_isModifier(character) && !ignoreThisKeypress) {\n                _resetSequences(doNotReset);\n            }\n\n            _ignoreNextKeypress = processedSequenceCallback && e.type == 'keydown';\n        };\n\n        /**\n         * handles a keydown event\n         *\n         * @param {Event} e\n         * @returns void\n         */\n        function _handleKeyEvent(e) {\n\n            // normalize e.which for key events\n            // @see http://stackoverflow.com/questions/4285627/javascript-keycode-vs-charcode-utter-confusion\n            if (typeof e.which !== 'number') {\n                e.which = e.keyCode;\n            }\n\n            var character = _characterFromEvent(e);\n\n            // no character found then stop\n            if (!character) {\n                return;\n            }\n\n            // need to use === for the character check because the character can be 0\n            if (e.type == 'keyup' && _ignoreNextKeyup === character) {\n                _ignoreNextKeyup = false;\n                return;\n            }\n\n            self.handleKey(character, _eventModifiers(e), e);\n        }\n\n        /**\n         * called to set a 1 second timeout on the specified sequence\n         *\n         * this is so after each key press in the sequence you have 1 second\n         * to press the next key before you have to start over\n         *\n         * @returns void\n         */\n        function _resetSequenceTimer() {\n            clearTimeout(_resetTimer);\n            _resetTimer = setTimeout(_resetSequences, 1000);\n        }\n\n        /**\n         * binds a key sequence to an event\n         *\n         * @param {string} combo - combo specified in bind call\n         * @param {Array} keys\n         * @param {Function} callback\n         * @param {string=} action\n         * @returns void\n         */\n        function _bindSequence(combo, keys, callback, action) {\n\n            // start off by adding a sequence level record for this combination\n            // and setting the level to 0\n            _sequenceLevels[combo] = 0;\n\n            /**\n             * callback to increase the sequence level for this sequence and reset\n             * all other sequences that were active\n             *\n             * @param {string} nextAction\n             * @returns {Function}\n             */\n            function _increaseSequence(nextAction) {\n                return function() {\n                    _nextExpectedAction = nextAction;\n                    ++_sequenceLevels[combo];\n                    _resetSequenceTimer();\n                };\n            }\n\n            /**\n             * wraps the specified callback inside of another function in order\n             * to reset all sequence counters as soon as this sequence is done\n             *\n             * @param {Event} e\n             * @returns void\n             */\n            function _callbackAndReset(e) {\n                _fireCallback(callback, e, combo);\n\n                // we should ignore the next key up if the action is key down\n                // or keypress.  this is so if you finish a sequence and\n                // release the key the final key will not trigger a keyup\n                if (action !== 'keyup') {\n                    _ignoreNextKeyup = _characterFromEvent(e);\n                }\n\n                // weird race condition if a sequence ends with the key\n                // another sequence begins with\n                setTimeout(_resetSequences, 10);\n            }\n\n            // loop through keys one at a time and bind the appropriate callback\n            // function.  for any key leading up to the final one it should\n            // increase the sequence. after the final, it should reset all sequences\n            //\n            // if an action is specified in the original bind call then that will\n            // be used throughout.  otherwise we will pass the action that the\n            // next key in the sequence should match.  this allows a sequence\n            // to mix and match keypress and keydown events depending on which\n            // ones are better suited to the key provided\n            for (var i = 0; i < keys.length; ++i) {\n                var isFinal = i + 1 === keys.length;\n                var wrappedCallback = isFinal ? _callbackAndReset : _increaseSequence(action || _getKeyInfo(keys[i + 1]).action);\n                _bindSingle(keys[i], wrappedCallback, action, combo, i);\n            }\n        }\n\n        /**\n         * binds a single keyboard combination\n         *\n         * @param {string} combination\n         * @param {Function} callback\n         * @param {string=} action\n         * @param {string=} sequenceName - name of sequence if part of sequence\n         * @param {number=} level - what part of the sequence the command is\n         * @returns void\n         */\n        function _bindSingle(combination, callback, action, sequenceName, level) {\n\n            // store a direct mapped reference for use with Mousetrap.trigger\n            self._directMap[combination + ':' + action] = callback;\n\n            // make sure multiple spaces in a row become a single space\n            combination = combination.replace(/\\s+/g, ' ');\n\n            var sequence = combination.split(' ');\n            var info;\n\n            // if this pattern is a sequence of keys then run through this method\n            // to reprocess each pattern one key at a time\n            if (sequence.length > 1) {\n                _bindSequence(combination, sequence, callback, action);\n                return;\n            }\n\n            info = _getKeyInfo(combination, action);\n\n            // make sure to initialize array if this is the first time\n            // a callback is added for this key\n            self._callbacks[info.key] = self._callbacks[info.key] || [];\n\n            // remove an existing match if there is one\n            _getMatches(info.key, info.modifiers, {type: info.action}, sequenceName, combination, level);\n\n            // add this call back to the array\n            // if it is a sequence put it at the beginning\n            // if not put it at the end\n            //\n            // this is important because the way these are processed expects\n            // the sequence ones to come first\n            self._callbacks[info.key][sequenceName ? 'unshift' : 'push']({\n                callback: callback,\n                modifiers: info.modifiers,\n                action: info.action,\n                seq: sequenceName,\n                level: level,\n                combo: combination\n            });\n        }\n\n        /**\n         * binds multiple combinations to the same callback\n         *\n         * @param {Array} combinations\n         * @param {Function} callback\n         * @param {string|undefined} action\n         * @returns void\n         */\n        self._bindMultiple = function(combinations, callback, action) {\n            for (var i = 0; i < combinations.length; ++i) {\n                _bindSingle(combinations[i], callback, action);\n            }\n        };\n\n        // start!\n        _addEvent(targetElement, 'keypress', _handleKeyEvent);\n        _addEvent(targetElement, 'keydown', _handleKeyEvent);\n        _addEvent(targetElement, 'keyup', _handleKeyEvent);\n    }\n\n    /**\n     * binds an event to mousetrap\n     *\n     * can be a single key, a combination of keys separated with +,\n     * an array of keys, or a sequence of keys separated by spaces\n     *\n     * be sure to list the modifier keys first to make sure that the\n     * correct key ends up getting bound (the last key in the pattern)\n     *\n     * @param {string|Array} keys\n     * @param {Function} callback\n     * @param {string=} action - 'keypress', 'keydown', or 'keyup'\n     * @returns void\n     */\n    Mousetrap.prototype.bind = function(keys, callback, action) {\n        var self = this;\n        keys = keys instanceof Array ? keys : [keys];\n        self._bindMultiple.call(self, keys, callback, action);\n        return self;\n    };\n\n    /**\n     * unbinds an event to mousetrap\n     *\n     * the unbinding sets the callback function of the specified key combo\n     * to an empty function and deletes the corresponding key in the\n     * _directMap dict.\n     *\n     * TODO: actually remove this from the _callbacks dictionary instead\n     * of binding an empty function\n     *\n     * the keycombo+action has to be exactly the same as\n     * it was defined in the bind method\n     *\n     * @param {string|Array} keys\n     * @param {string} action\n     * @returns void\n     */\n    Mousetrap.prototype.unbind = function(keys, action) {\n        var self = this;\n        return self.bind.call(self, keys, function() {}, action);\n    };\n\n    /**\n     * triggers an event that has already been bound\n     *\n     * @param {string} keys\n     * @param {string=} action\n     * @returns void\n     */\n    Mousetrap.prototype.trigger = function(keys, action) {\n        var self = this;\n        if (self._directMap[keys + ':' + action]) {\n            self._directMap[keys + ':' + action]({}, keys);\n        }\n        return self;\n    };\n\n    /**\n     * resets the library back to its initial state.  this is useful\n     * if you want to clear out the current keyboard shortcuts and bind\n     * new ones - for example if you switch to another page\n     *\n     * @returns void\n     */\n    Mousetrap.prototype.reset = function() {\n        var self = this;\n        self._callbacks = {};\n        self._directMap = {};\n        return self;\n    };\n\n    /**\n     * should we stop this event before firing off callbacks\n     *\n     * @param {Event} e\n     * @param {Element} element\n     * @return {boolean}\n     */\n    Mousetrap.prototype.stopCallback = function(e, element) {\n        var self = this;\n\n        // if the element has the class \"mousetrap\" then no need to stop\n        if ((' ' + element.className + ' ').indexOf(' mousetrap ') > -1) {\n            return false;\n        }\n\n        if (_belongsTo(element, self.target)) {\n            return false;\n        }\n\n        // Events originating from a shadow DOM are re-targetted and `e.target` is the shadow host,\n        // not the initial event target in the shadow tree. Note that not all events cross the\n        // shadow boundary.\n        // For shadow trees with `mode: 'open'`, the initial event target is the first element in\n        // the event’s composed path. For shadow trees with `mode: 'closed'`, the initial event\n        // target cannot be obtained.\n        if ('composedPath' in e && typeof e.composedPath === 'function') {\n            // For open shadow trees, update `element` so that the following check works.\n            var initialEventTarget = e.composedPath()[0];\n            if (initialEventTarget !== e.target) {\n                element = initialEventTarget;\n            }\n        }\n\n        // stop for input, select, and textarea\n        return element.tagName == 'INPUT' || element.tagName == 'SELECT' || element.tagName == 'TEXTAREA' || element.isContentEditable;\n    };\n\n    /**\n     * exposes _handleKey publicly so it can be overwritten by extensions\n     */\n    Mousetrap.prototype.handleKey = function() {\n        var self = this;\n        return self._handleKey.apply(self, arguments);\n    };\n\n    /**\n     * allow custom key mappings\n     */\n    Mousetrap.addKeycodes = function(object) {\n        for (var key in object) {\n            if (object.hasOwnProperty(key)) {\n                _MAP[key] = object[key];\n            }\n        }\n        _REVERSE_MAP = null;\n    };\n\n    /**\n     * Init the global mousetrap functions\n     *\n     * This method is needed to allow the global mousetrap functions to work\n     * now that mousetrap is a constructor function.\n     */\n    Mousetrap.init = function() {\n        var documentMousetrap = Mousetrap(document);\n        for (var method in documentMousetrap) {\n            if (method.charAt(0) !== '_') {\n                Mousetrap[method] = (function(method) {\n                    return function() {\n                        return documentMousetrap[method].apply(documentMousetrap, arguments);\n                    };\n                } (method));\n            }\n        }\n    };\n\n    Mousetrap.init();\n\n    // expose mousetrap to the global object\n    window.Mousetrap = Mousetrap;\n\n    // expose as a common js module\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = Mousetrap;\n    }\n\n    // expose mousetrap as an AMD module\n    if (typeof define === 'function' && define.amd) {\n        define(function() {\n            return Mousetrap;\n        });\n    }\n}) (typeof window !== 'undefined' ? window : null, typeof  window !== 'undefined' ? document : null);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__11__;","const MODULE_TYPE = {\r\n    form: 'form',\r\n    cardTable: 'cardTable',\r\n    editTable: 'editTable',\r\n};\r\n\r\nexport {\r\n    MODULE_TYPE,\r\n};","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","var identity = require('./identity'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nmodule.exports = baseRest;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","import { config as CONFIG } from '@platform/api'\r\n\r\n/**\r\n * @desc 获得单元格的唯一Id\r\n * @param td {dom}\r\n */\r\n\r\nexport default function getCellIdentity(td) {\r\n\tlet div = td.querySelector('div');\r\n\tif (div && div.attributes) {\r\n\t\tlet attributesArray = Object.values(div.attributes);\r\n\r\n\t\tlet cellIdentity = attributesArray.find(item => {\r\n\t\t\tif (item && item.value.startsWith(CONFIG.hotKeyModuleIdPrefix)) {\r\n\t\t\t\treturn item;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn cellIdentity && cellIdentity.value;\r\n\t}\r\n}\r\n","var isArrayLike = require('./isArrayLike'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nmodule.exports = isArrayLikeObject;\n","import getCellIdentity from './getCellIdentity';\r\nimport { findNextFocusItemInForm } from './findNextFocusItemInForm';\r\nimport { checkboxInTable } from './handleSpecialCase';\r\nimport { keyByModuleId } from '../createKeyMap';\r\nimport { MODULE_TYPE } from '../config/moduleType';\r\nimport { config as CONFIG } from '@platform/api'\r\n\r\n/**\r\n * @desc 查找下一个可聚焦元素\r\n * @param target {dom} 事件源\r\n * @param ViewModel {object} 全局变量\r\n * @param moduleId {string} 当前区域Id\r\n * @param orderOfHotKey {array} 区域显示顺序配置\r\n */\r\nfunction findNextFocusItemInTable({ eventTarget, ViewModel, moduleId, orderOfHotKey }) {\r\n    var parentTd = eventTarget.tagName === 'TD' ? eventTarget : findParentTd(eventTarget);\r\n    if (!parentTd) {\r\n        // 这里报错的原因是因为某些事件（下拉的keydown）执行了两次\r\n        console.warn('not find parentTd, next hotkey invalid');\r\n        return;\r\n    }\r\n    var nextTd = parentTd.nextElementSibling;\r\n    var currentTr = parentTd.parentElement;\r\n    var lastTd = findLastTdInRow(currentTr);\r\n    var div = nextTd && nextTd.querySelector('[tabindex=\"0\"]');\r\n\r\n    //如果是最后一个元素就需要判断跳到下一行还是跳到下一个区域\r\n    if (lastTd === parentTd) {\r\n        var lastTr = currentTr.parentElement.lastElementChild;\r\n\r\n        currentTr === lastTr\r\n            ? perceptionHotKeyConfig({ currentModuleId: moduleId, ViewModel, orderOfHotKey })\r\n            : findNextRowTd({ tr: currentTr, ViewModel, moduleId, orderOfHotKey });\r\n        return;\r\n    }\r\n\r\n    // 如果下一个元素没有找到就继续查找\r\n    if (div === null || checkboxInTable(div)) {\r\n        findNextSiblings({ td: nextTd, ViewModel, moduleId, orderOfHotKey });\r\n        return;\r\n    }\r\n    // 解决table 设值后重新渲染导致焦点缺失的问题,在这里保留一下id\r\n    let cellIdentity = getCellIdentity(nextTd);\r\n    cellIdentity\r\n        ? ViewModel.enterTriggerCellId = cellIdentity\r\n        : '';\r\n    executeAutoFocus({ div, ViewModel });\r\n}\r\n\r\nfunction findParentTd(el) {\r\n    while (el.parentElement) {\r\n        el = el.parentElement;\r\n        if (el.tagName === 'TD') {\r\n            return el;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\n/**\r\n * @desc 查找当前行里的最后一个td，需要排除操作列\r\n * @param tr {dom}\r\n * @return td {dom}\r\n */\r\nfunction findLastTdInRow(tr) {\r\n    let td = tr.lastElementChild.className.includes('fixed')\r\n        ? tr.lastElementChild.previousElementSibling\r\n        : tr.lastElementChild;\r\n\r\n    return td;\r\n}\r\n\r\n/**\r\n * @desc 递归查找下一个可聚焦元素\r\n * @param td {dom} 上一个td\r\n * @param ViewModel {object} 全局变量\r\n * @param moduleId {string} 当前区域的Id\r\n * @param orderOfHotKey\r\n */\r\nfunction findNextSiblings({ td, ViewModel, moduleId, orderOfHotKey }) {\r\n    var nextTd = td.nextElementSibling;\r\n    var currentTr = nextTd && nextTd.parentElement;\r\n    var lastTd = currentTr && findLastTdInRow(currentTr);\r\n    var currentDiv = td.querySelector('[tabindex=\"0\"]');\r\n    var div = nextTd && nextTd.querySelector('[tabindex=\"0\"]');\r\n\r\n    //如果下个需要聚焦的单元格与最后一个单元相同并且没有可聚焦元素就在下一行查找\r\n    if ((lastTd === nextTd && div === null) || (lastTd === td && currentDiv === null)) {\r\n        findNextRowTd({ tr: currentTr, ViewModel, moduleId, orderOfHotKey });\r\n        return;\r\n    }\r\n\r\n    if (div === null || checkboxInTable(div)) {\r\n        findNextSiblings({ td: nextTd, ViewModel, moduleId, orderOfHotKey });\r\n        return;\r\n    }\r\n\r\n    let cellIdentity = getCellIdentity(nextTd);\r\n    cellIdentity\r\n        ? ViewModel.enterTriggerCellId = cellIdentity\r\n        : '';\r\n    executeAutoFocus({ div, ViewModel });\r\n}\r\n\r\n//查找下一行可聚焦元素\r\nfunction findNextRowTd({ tr, ViewModel, moduleId, orderOfHotKey }) {\r\n    var nextTr = tr && tr.nextElementSibling;\r\n\r\n    //如果是最后一行就查找下个区域的第一个可聚焦元素\r\n    if (nextTr === null) {\r\n        orderOfHotKey &&\r\n            jumpToNextModuleFocusItem({ currentModuleId: moduleId, ViewModel, orderOfHotKey });\r\n        return;\r\n    }\r\n\r\n    if (nextTr.getAttribute('tabindex') === '-1') {\r\n        findNextRowTd({ tr: nextTr, ViewModel, moduleId, orderOfHotKey });\r\n        return;\r\n    }\r\n\r\n    var div = nextTr.querySelector('td [tabindex=\"0\"]');\r\n    var td = findParentTd(div);\r\n\r\n    let cellIdentity = getCellIdentity(td);\r\n    cellIdentity\r\n        ? ViewModel.enterTriggerCellId = cellIdentity\r\n        : '';\r\n    executeAutoFocus({ div, ViewModel });\r\n}\r\n\r\n/**\r\n * @desc 判断业务组是否配置快捷键，如果没有就在本区域内循环 反之根据orderOfHotKey跳转下个区域\r\n * @param currentModuleId {string} 当前的区域ID\r\n * @param ViewModel 全局变量\r\n * @param orderOfHotKey {array} 区域展示顺序\r\n */\r\n\r\nfunction perceptionHotKeyConfig({ currentModuleId, ViewModel, orderOfHotKey }) {\r\n    if (orderOfHotKey && orderOfHotKey.length === 0) {\r\n        findFirstFocusItemInCurrentModule({ currentModuleId, ViewModel });\r\n    } else {\r\n        orderOfHotKey &&\r\n            jumpToNextModuleFocusItem({ currentModuleId, ViewModel, orderOfHotKey });\r\n    }\r\n}\r\n\r\nfunction findFirstFocusItemInCurrentModule({ currentModuleId, ViewModel }) {\r\n    let id = `${CONFIG.hotKeyModuleIdPrefix}-${currentModuleId}`;\r\n    let tableTr = document.querySelector(`#${id} table tbody tr`);\r\n    let tds = tableTr.querySelectorAll('td');\r\n\r\n    let firstFocusItem = Array.prototype.find.call(tds, function (td) {\r\n        return td.querySelector('[tabindex=\"0\"]') !== null;\r\n    });\r\n\r\n    let cellIdentity = getCellIdentity(firstFocusItem);\r\n    cellIdentity\r\n        ? ViewModel.enterTriggerCellId = cellIdentity\r\n        : '';\r\n\r\n    var div = firstFocusItem.querySelector('[tabindex=\"0\"]');\r\n    div && executeAutoFocus({ div, ViewModel });\r\n}\r\n\r\nfunction jumpToNextModuleFocusItem({ currentModuleId, ViewModel, orderOfHotKey }) {\r\n    let nextModuleId = calculateNextModuleId(currentModuleId, orderOfHotKey);\r\n\r\n    let nextModuleKeyMap = keyByModuleId[nextModuleId];\r\n\r\n    if (nextModuleKeyMap === undefined) return;\r\n\r\n    let type = nextModuleKeyMap.type;\r\n    if (type === MODULE_TYPE.cardTable || type === MODULE_TYPE.editTable) {\r\n        //如果是table类型就获取当前table显示的页签\r\n        let activeTableKeyMap = keyByModuleId[nextModuleKeyMap.activeTable];\r\n        let firstItemDom = document.querySelector(`div[${activeTableKeyMap.firstItem}]`);\r\n        let div = firstItemDom.querySelector('[tabindex=\"0\"]');\r\n\r\n        if (div === null) {\r\n            let td = firstItemDom.parentElement;\r\n            findNextSiblings({ td, ViewModel, moduleId: activeTableKeyMap.moduleId, orderOfHotKey });\r\n        } else {\r\n            let td = findParentTd(div);\r\n\r\n            /**\r\n       * @desc 表格编辑后会导致页面重新渲染导致聚焦状态丢失，因此enter键跳转的需要在全局记录一下，为操作的连续性渲染完成后重新聚焦做标识\r\n       * @type {string}\r\n       */\r\n            let cellIdentity = getCellIdentity(td);\r\n            cellIdentity\r\n                ? ViewModel.enterTriggerCellId = cellIdentity\r\n                : '';\r\n            executeAutoFocus({ div, ViewModel });\r\n        }\r\n\r\n    } else {\r\n        findNextFocusItemInForm(nextModuleKeyMap, nextModuleId);\r\n    }\r\n}\r\n\r\nfunction calculateNextModuleId(currentModuleId, orderOfHotKey) {\r\n    let orderOfHotKeyLen = orderOfHotKey.length;\r\n\r\n    let nextModuleIndex = orderOfHotKey.indexOf(currentModuleId) + 1 === orderOfHotKeyLen\r\n        ? 0\r\n        : orderOfHotKey.indexOf(currentModuleId) + 1;\r\n    return orderOfHotKey[nextModuleIndex];\r\n}\r\n\r\nfunction executeAutoFocus({ div, ViewModel }) {\r\n    if (div !== null) {\r\n        ViewModel.shouldAutoFocus = true;\r\n        div.ncExecuteFocus = true;\r\n        div.focus();\r\n        delete div.ncExecuteFocus;\r\n    }\r\n}\r\n\r\nexport {\r\n    findNextFocusItemInTable,\r\n    executeAutoFocus,\r\n};\r\n","/*\r\n * @Author: liyxt\r\n * @Date: 2020-05-19 15:47:39\r\n * @LastEditors: liyxt\r\n * @LastEditTime: 2020-06-04 11:11:55\r\n * @Description: file content\r\n */\r\nimport React, { Component } from 'react';\r\nimport { createPageIcon, getSysFieldid, getGlobalStorage} from '@platform/api';\r\n\r\nrequire('./index.less');\r\nimport { BackBtn } from '@platform/base';\r\n\r\n\r\nexport default class BillInfo extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.props.getThis(this);\r\n        this.state = {\r\n            showBackBtn: true,\r\n            showBillCode: true,\r\n            billCode: this.props.events.billCode,\r\n            title: this.props.events.title,\r\n        }\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps){\r\n        if(nextProps.events.title !== this.props.events.title){\r\n            this.setState({\r\n                title: nextProps.events.title\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    render() {\r\n        const { events } = this.props;\r\n        let { showBackBtn, showBillCode, billCode, title = '' } = this.state;\r\n        let {  initShowBackBtn = true, backBtnClick, titleClick } = events;\r\n        // let pageIcon = !showBackBtn && (typeof createPageIcon === 'function') ? createPageIcon() : null;\r\n        let pageIcon = typeof createPageIcon === 'function' ? createPageIcon() : null;\r\n        let fontClass = (window.nccFontSize) || (window.top.nccFontSize) || getGlobalStorage('localStorage', 'nccFontSize') || '';\r\n        let titleFontSize='';\r\n        if(fontClass){\r\n            switch (fontClass) {\r\n                case 'large':\r\n                    titleFontSize = 'title-font-size-large';\r\n                    break;\r\n                case 'medium':\r\n                    titleFontSize = 'title-font-size-medium';\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n        return (\r\n            <div className={`BillHeadInfoWrap ${showBackBtn && initShowBackBtn ? 'BillHeadInfoWrap-showBackBtn' : ''}`}>\r\n                {\r\n                    showBackBtn && initShowBackBtn &&\r\n                    <BackBtn\r\n                        onClick={backBtnClick && backBtnClick}\r\n                    />\r\n                }\r\n                {pageIcon}\r\n                <span\r\n                    className={`bill-info-title ${titleFontSize}`}\r\n                    fieldid={getSysFieldid(`${title}_title`)}\r\n                    onClick={() => {\r\n                        if (typeof titleClick === \"function\") {\r\n                            titleClick();\r\n                        }\r\n                    }}\r\n                >\r\n                    {title}\r\n                </span>\r\n                {\r\n                    showBillCode &&\r\n                    <span className=\"bill-info-code\">{billCode && `：${billCode}`}</span>\r\n                }\r\n            </div>\r\n        )\r\n\r\n    }\r\n}\r\n","import { createBillHeadInfo } from './create';\r\nimport { setBillHeadInfoVisible } from './methods';\r\n\r\nexport default {\r\n    createBillHeadInfo,\r\n    setBillHeadInfoVisible,\r\n}","import BillInfo from './BillInfo';\r\n//创建单据号\r\n/**\r\n * \r\n * @param {*} events : {showBackBtn:true,billCodeText:''}\r\n */\r\nexport function createBillHeadInfo(events) {\r\n    return (\r\n        <BillInfo\r\n            getThis={(_this) => {\r\n                this.myBillInfo = _this;\r\n            }}\r\n            events={events}\r\n            output={this.output}\r\n            rootprops={this.props}\r\n        />\r\n    );\r\n}","export function setBillHeadInfoVisible(data) {\r\n    if (this.myBillInfo && this.myBillInfo.state && data) {\r\n        //控制返回按钮\r\n        if (data.hasOwnProperty('showBackBtn')) {\r\n            if (data.showBackBtn != this.myBillInfo.state.showBackBtn) {\r\n                this.myBillInfo.state.showBackBtn = data.showBackBtn;\r\n            }\r\n        }\r\n        //控制单据编号\r\n        if (data.hasOwnProperty('showBillCode')) {\r\n            if (data.showBillCode != this.myBillInfo.state.showBillCode) {\r\n                this.myBillInfo.state.showBillCode = data.showBillCode;\r\n            }\r\n        }\r\n\r\n        //修改单据编号\r\n        if (data.hasOwnProperty('billCode')) {\r\n            if (data.billCode != this.myBillInfo.state.billCode) {\r\n                this.myBillInfo.state.billCode = data.billCode;\r\n            }\r\n        }\r\n\r\n          //修改标题\r\n          if (data.hasOwnProperty('title')) {\r\n            if (data.title != this.myBillInfo.state.title) {\r\n                this.myBillInfo.state.title = data.title;\r\n            }\r\n        }\r\n\r\n        this.myBillInfo.setState(\r\n            this.myBillInfo.state\r\n        )\r\n\r\n    }\r\n}","import { isObj } from '@platform/api';\r\n\r\n// 根据 key(id) 从树形嵌套结构中获取按钮\r\nconst findItemsByKey = (key, data) => {\r\n    let items = [];\r\n    let process = tree => {\r\n        return tree.forEach(item => {\r\n            if (item.key == key) {\r\n                items.push(item);\r\n            } else if (item.children) {\r\n                process(item.children);\r\n            }\r\n        });\r\n    };\r\n    process(data);\r\n    return items;\r\n};\r\n\r\n// 将按钮的自定义属性(visible，disabled，popContent，主要次要按钮)存储在this.myState.btnInfo中，作用是可以在按钮数据请求回来前就可以设置按钮自定义属性\r\nfunction addCustomAttribute(key, attr, value) {\r\n    let { btnInfo } = this.myState;\r\n    btnInfo[key] = btnInfo[key] || {};\r\n    btnInfo[key][attr] = value;\r\n}\r\n\r\n// 将编码为buttonID的按钮的attr属性的值设为value\r\nfunction setButtonAttribute(buttonId, attr, value) {\r\n    if (typeof buttonId == 'string') {\r\n        // 把按钮的自定义信息存到btnInfo里\r\n        addCustomAttribute.call(this, buttonId, attr, value);\r\n        // 已经有按钮数据，将自定义数据合并到原有的按钮数据中\r\n        let items = findItemsByKey(buttonId, this.myState.buttons);\r\n        items.forEach(item => {\r\n            item[attr] = value;\r\n\r\n            if (attr === 'disabled') {\r\n                if (item.type === 'divider') {\r\n                    item['disabled'] = value;\r\n                } else {\r\n                    item['isenable'] = !value;\r\n                }\r\n            }\r\n            // 把子按钮的visible设为true时,要把子按钮所在的父级同时设为true\r\n            if (attr === 'visible' && item.parentCode) {\r\n                if (value) {\r\n                    setButtonAttribute.call(this, item.parentCode, 'visible', true);\r\n                }\r\n            }\r\n        });\r\n    } else if (buttonId instanceof Array) {\r\n        buttonId.forEach(item => {\r\n            addCustomAttribute.call(this, item, attr, value);\r\n        });\r\n        for (let i = 0; i < buttonId.length; i++) {\r\n            let items = findItemsByKey(buttonId[i], this.myState.buttons);\r\n            items.forEach(item => {\r\n                item[attr] = value;\r\n\r\n                if (attr === 'disabled') {\r\n                    if (item.type === 'divider') {\r\n                        item['disabled'] = value;\r\n                    } else {\r\n                        item['isenable'] = !value;\r\n                    }\r\n                }\r\n                if (attr === 'visible' && item.parentCode) {\r\n                    if (value) {\r\n                        setButtonAttribute.call(this, item.parentCode, 'visible', true);\r\n\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    } else if (isObj(buttonId)) {\r\n        for (let key of Object.keys(buttonId)) {\r\n            addCustomAttribute.call(this, key, attr, buttonId[key]);\r\n            let items = findItemsByKey(key, this.myState.buttons);\r\n            items.forEach(item => {\r\n                item[attr] = buttonId[key];\r\n\r\n                if (attr === 'disabled') {\r\n                    if (item.type === 'divider') {\r\n                        item['disabled'] = buttonId[key];\r\n                    } else {\r\n                        item['isenable'] = !buttonId[key];\r\n                    }\r\n                }\r\n                if (attr === 'visible' && item.parentCode) {\r\n                    if (buttonId[key]) {\r\n                        setButtonAttribute.call(this, item.parentCode, 'visible', true);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\n//获取按钮的数据\r\nexport function getButtons() {\r\n    return this.myState.buttons;\r\n}\r\n\r\nfunction setButtonState(buttonId, callback) {\r\n    // let buttons = this.myState.buttons;\r\n    let buttonsEntrys = this.myState.buttonsEntrys;\r\n    let buttonsComponent = this.myState.buttonsComponent;\r\n    let stopOprationBtnsRenderAreas = this.myState.stopOprationBtnsRenderAreas;\r\n    let refName = [];\r\n    let stopBtnRenderAreas = [];\r\n    for (let item of Object.keys(stopOprationBtnsRenderAreas)) {\r\n        stopOprationBtnsRenderAreas.hasOwnProperty(item) && !stopOprationBtnsRenderAreas[item] && stopBtnRenderAreas.push(item);\r\n    }\r\n    if (Array.isArray(buttonId)) {\r\n        for (let ids of buttonId) {\r\n            if (buttonsEntrys[ids]) {\r\n                for (let id of buttonsEntrys[ids]) {\r\n                    if (!refName.includes(id)) {\r\n                        refName.push(id);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    refName = refName.filter(item => {\r\n        return !stopBtnRenderAreas.includes(item);\r\n    });\r\n    if (callback) {\r\n        let len = refName.length;\r\n        for (let item of refName) {\r\n            len = len - 1;\r\n            if (buttonsComponent[item]) {\r\n                if (buttonsComponent[item]._isOperateButton) {\r\n                    for (let uuid in buttonsComponent[item]) {\r\n                        buttonsComponent[item][uuid] &&\r\n                            buttonsComponent[item][uuid].setState &&\r\n                            buttonsComponent[item][uuid].setState({ json: [] }, () => {\r\n                            });\r\n                    }\r\n                } else {\r\n                    buttonsComponent[item].setState({ json: [] }, () => {\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        if (typeof callback === 'function' && !len) {\r\n            callback && callback();\r\n        }\r\n    } else {\r\n        for (let item of refName) {\r\n            if (buttonsComponent[item]) {\r\n                if (buttonsComponent[item]._isOperateButton) {\r\n                    for (let uuid in buttonsComponent[item]) {\r\n                        buttonsComponent[item][uuid] &&\r\n                            buttonsComponent[item][uuid].setState &&\r\n                            buttonsComponent[item][uuid].setState({ json: [] }, () => {\r\n                            });\r\n                    }\r\n                } else {\r\n                    buttonsComponent[item].setState({ json: [] }, () => {\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction buttonIdToArr(buttonId) {\r\n    let buttonIds = [];\r\n    if (typeof buttonId == 'string') {\r\n        buttonIds = [buttonId];\r\n    } else if (Array.isArray(buttonId)) {\r\n        for (let it of buttonId) {\r\n            !buttonIds.includes(it) && buttonIds.push(it);\r\n        }\r\n    } else if (isObj(buttonId)) {\r\n        for (let it of Object.keys(buttonId)) {\r\n            !buttonIds.includes(it) && buttonIds.push(it);\r\n        }\r\n    }\r\n    return buttonIds;\r\n}\r\n\r\nfunction areaToArr(areaStr) {\r\n    let areaArr = [];\r\n    if (areaStr.indexOf(',') !== -1) {\r\n        areaArr = areaStr.split(',').map(item => item.trim());\r\n    } else {\r\n        areaArr = [areaStr];\r\n    }\r\n    return areaArr;\r\n}\r\n\r\n//隐藏所传区域的所有按钮\r\nexport function hideButtonsByAreas(areas) {\r\n    // 先合并btnInfo中已有的自定义属性，再setState\r\n    if (typeof areas === 'string') {\r\n        this.myState.hideButtonMenu = [areas];\r\n    } else {\r\n        this.myState.hideButtonMenu = areas;\r\n    }\r\n}\r\n\r\n//设置按钮的数据\r\nexport function setButtons(buttons, callback) {\r\n    // 先合并btnInfo中已有的自定义属性，再setState\r\n    let { btnInfo, hideButtonMenu } = this.myState;\r\n    let btnKeys = Object.keys(btnInfo);\r\n    btnKeys.forEach(key => {\r\n        let items = findItemsByKey(key, buttons);\r\n        items.forEach(item => {\r\n            if (item.type === 'divider') {\r\n                if (btnInfo[key]) {\r\n                    for (let it of Object.keys(btnInfo[key])) {\r\n                        if (it === 'type') {\r\n                            Object.assign(item, {\r\n                                dividerType: btnInfo[key].type === 'button_main',\r\n                                dropdownType: btnInfo[key].type === 'button_main',\r\n                            });\r\n                        } else {\r\n                            Object.assign(item, { [it]: btnInfo[key][it] });\r\n                        }\r\n                    }\r\n\r\n                } else {\r\n                    Object.assign(item, btnInfo[key]);\r\n                }\r\n            } else {\r\n                Object.assign(item, btnInfo[key]);\r\n            }\r\n        });\r\n    });\r\n    this.myState.buttons = buttons;\r\n    if (hideButtonMenu) {\r\n        for (let item of this.myState.buttons) {\r\n            if (hideButtonMenu.includes(item.area)) {\r\n                item.visible = false;\r\n            }\r\n        }\r\n    }\r\n    let keys = [];\r\n    let areas = [];\r\n    let keysOAreas = {};\r\n    if (this.myState.buttons) {\r\n        for (let items of this.myState.buttons) {\r\n            if (items.key) {\r\n                !keys.includes(items.key) && keys.push(items.key);\r\n                if (!keysOAreas.hasOwnProperty(items.key)) {\r\n                    keysOAreas[items.key] = items.area ? [items.area] : [];\r\n                } else {\r\n                    if (!keysOAreas[items.key].includes(items.area)) {\r\n                        keysOAreas[items.key].push(items.area);\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n            let areaArr = areaToArr(items.area);\r\n            for (let i of areaArr) {\r\n                !areas.includes(i) && areas.push(i);\r\n            }\r\n            if (items.children) {\r\n                if (items.children && items.children.length) {\r\n                    for (let item of items.children) {\r\n                        if (item.key) {\r\n                            !keys.includes(item.key) && keys.push(item.key);\r\n                            if (!keysOAreas.hasOwnProperty(item.key)) {\r\n                                keysOAreas[item.key] = item.area ? [item.area] : [];\r\n                            } else {\r\n                                if (!keysOAreas[item.key].includes(item.area)) {\r\n                                    keysOAreas[item.key].push(item.area);\r\n                                }\r\n                            }\r\n                        }\r\n                        if (item.children && item.children.length) {\r\n                            for (let it of item.children) {\r\n                                if (it.key) {\r\n                                    !keys.includes(it.key) && keys.push(it.key);\r\n                                    if (!keysOAreas.hasOwnProperty(it.key)) {\r\n                                        keysOAreas[it.key] = items.area ? [it.area] : [];\r\n                                    } else {\r\n                                        if (!keysOAreas[it.key].includes(it.area)) {\r\n                                            keysOAreas[it.key].push(it.area);\r\n                                        }\r\n                                    }\r\n                                }\r\n                                if (it.children && it.children.length) {\r\n                                    for (let i of it.children) {\r\n                                        if (i.key) {\r\n                                            !keys.includes(i.key) && keys.push(i.key);\r\n                                            if (!keysOAreas.hasOwnProperty(i.key)) {\r\n                                                keysOAreas[i.key] = items.area ? [i.area] : [];\r\n                                            } else {\r\n                                                if (!keysOAreas[i.key].includes(i.area)) {\r\n                                                    keysOAreas[i.key].push(i.area);\r\n                                                }\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n    }\r\n    this.myState.buttonsEntrys = keysOAreas;\r\n    setButtonState.call(this, keys, callback, areas);\r\n\r\n}\r\n\r\n//更新某些区域的按钮\r\nexport function updateButtons(buttonsAreas) {\r\n    let buttonsComponent = this.myState.buttonsComponent;\r\n\r\n    for (let item of buttonsAreas) {\r\n        if (buttonsComponent[item]) {\r\n            if (buttonsComponent[item]._isOperateButton) {\r\n                for (let uuid in buttonsComponent[item]) {\r\n                    buttonsComponent[item][uuid] &&\r\n                        buttonsComponent[item][uuid].setState &&\r\n                        buttonsComponent[item][uuid].setState({ json: [] }, () => {\r\n                            console.log('update成功');\r\n                        });\r\n                }\r\n            } else {\r\n                buttonsComponent[item].setState({ json: [] }, () => {\r\n                    console.log('update成功');\r\n                });\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// 获取按钮可用性\r\nexport function getButtonDisabled(id) {\r\n    let items = findItemsByKey(id, this.myState.buttons);\r\n    if (items.length === 0) {\r\n        console.error(`找不到编码为 ${id} 的按钮`);\r\n    } else {\r\n        // 相同的 id 的按钮的禁用状态是一致的\r\n        return !!items[0].disabled;\r\n    }\r\n}\r\n\r\n// 获取按钮可见性\r\nexport function getButtonVisible(id) {\r\n    let items = findItemsByKey(id, this.myState.buttons);\r\n    if (items.length === 0) {\r\n        console.error(`找不到编码为 ${id} 的按钮`);\r\n    } else {\r\n        // 相同的 id 的按钮的禁用状态是一致的\r\n        return !!items[0].visible || !!items[0].enabled;\r\n    }\r\n}\r\n\r\n// 设置按钮可用性\r\nexport function setButtonDisabled(buttonId, flag, area) {\r\n    // 参数格式 1. ({buttonid:true/false}) 2.('buttonid':true/false) 3.(['buttonid1','buttonid2'],true/false)\r\n    if (area) {\r\n        setButtonAttributeByArea.call(this, area, buttonId, 'disabled', flag);\r\n        setButtonStateByArea.call(this, area, buttonIdToArr(buttonId));\r\n    } else {\r\n        setButtonAttribute.call(this, buttonId, 'disabled', flag);\r\n        if (getButtons.call(this).length) {\r\n            setButtonState.call(this, buttonIdToArr(buttonId));\r\n        }\r\n    }\r\n}\r\n\r\n// 设置按钮的显隐性\r\nexport function setButtonVisible(buttonId, flag) {\r\n    setButtonAttribute.call(this, buttonId, 'visible', flag);\r\n    if (flag) {\r\n        let items = findItemsByKey(buttonId[0], this.myState.buttons);\r\n        items.forEach(item => {\r\n            if (item.parentCode) {\r\n                // debugger;\r\n                setButtonAttribute.call(this, item.parentCode, 'visible', true);\r\n            }\r\n        });\r\n    }\r\n    if (getButtons.call(this).length) {\r\n        setButtonState.call(this, buttonIdToArr(buttonId));\r\n    }\r\n}\r\n\r\n// 设置按钮的中文名\r\nexport function setButtonTitle(buttonId, flag) {\r\n    setButtonAttribute.call(this, buttonId, 'title', flag);\r\n    if (getButtons.call(this).length) {\r\n        setButtonState.call(this, buttonIdToArr(buttonId));\r\n    }\r\n}\r\n\r\n// 由于之前有个方法名称是setButtonsVisible, 现已把该方法的功能合并到了上一个方法setButtonVisible中, 但为了兼容业务组以前的代码, 这里保留该方法名\r\nexport let setButtonsVisible = setButtonVisible;\r\n\r\n// 设置主要按钮和次要按钮 用来改变按钮的颜色\r\nexport function setMainButton(buttonId, flag) {\r\n    let MAIN = 'button_main',\r\n        SECONDARY = 'button_secondary';\r\n    if (isObj(buttonId)) {\r\n        for (let key of Object.keys(buttonId)) {\r\n            // 传进来的buttonId[key]值为true或false,转成主要和次要按钮对应的class名\r\n            buttonId[key] = buttonId[key] ? MAIN : SECONDARY;\r\n        }\r\n    }\r\n    let value = flag ? MAIN : SECONDARY;\r\n    setButtonAttribute.call(this, buttonId, 'btncolor', value);\r\n    if (getButtons.call(this).length) {\r\n        setButtonState.call(this, buttonIdToArr(buttonId));\r\n    }\r\n}\r\n\r\n// 设置操作行确认提示内容框，只对表格操作列中的按钮有效， 当content为空字符串的时候 不提示\r\nexport function setPopContent(buttonId, content) {\r\n    setButtonAttribute.call(this, buttonId, 'popContent', content);\r\n    if (getButtons.call(this).length) {\r\n        setButtonState.call(this, buttonIdToArr(buttonId));\r\n    }\r\n}\r\n\r\n// 设置按钮为上传按钮\r\nexport function setUploadConfig(buttonId, config) {\r\n    setButtonAttribute.call(this, buttonId, 'uploadConfig', config);\r\n    if (getButtons.call(this).length) {\r\n        setButtonState.call(this, buttonIdToArr(buttonId));\r\n    }\r\n}\r\n\r\n// 设置上传按钮附件数量\r\nexport function setUploadDocAmount(buttonId, amount) {\r\n    setButtonAttribute.call(this, buttonId, 'docAmount', amount);\r\n    if (getButtons.call(this).length) {\r\n        setButtonState.call(this, buttonIdToArr(buttonId));\r\n    }\r\n}\r\n\r\n// 设置操作行区域是否刷新\r\nexport function setOprationBtnsRenderStatus(areas, flag) {\r\n    for (let item of areas) {\r\n        this.myState.stopOprationBtnsRenderAreas[item] = flag;\r\n    }\r\n}\r\n\r\n//setButtonDisabled 给业务组提供了两个名字一个是setButtonDisabled 另一个是 setDisabled\r\nexport let setDisabled = setButtonDisabled;\r\n\r\nfunction setButtonAttributeByArea(area, buttonId, attr, value) {\r\n    if (typeof buttonId == 'string') {\r\n        // 已经有按钮数据，将自定义数据合并到原有的按钮数据中\r\n        let items = findItemsByKey(buttonId, this.myState.buttons).filter(item => area === item.area);\r\n        items.forEach(item => {\r\n            item[attr] = value;\r\n\r\n            if (attr === 'disabled') {\r\n                if (item.type === 'divider') {\r\n                    item['disabled'] = value;\r\n                } else {\r\n                    item['isenable'] = !value;\r\n                }\r\n            }\r\n            // 把子按钮的visible设为true时,要把子按钮所在的父级同时设为true\r\n            if (attr === 'visible' && item.parentCode) {\r\n                if (value) {\r\n                    setButtonAttributeByArea.call(this, area, item.parentCode, 'visible', true);\r\n                }\r\n            }\r\n        });\r\n    } else if (buttonId instanceof Array) {\r\n        for (let i = 0; i < buttonId.length; i++) {\r\n            let items = findItemsByKey(buttonId[i], this.myState.buttons).filter(item => area === item.area);\r\n            items.forEach(item => {\r\n                item[attr] = value;\r\n\r\n                if (attr === 'disabled') {\r\n                    if (item.type === 'divider') {\r\n                        item['disabled'] = value;\r\n                    } else {\r\n                        item['isenable'] = !value;\r\n                    }\r\n                }\r\n                if (attr === 'visible' && item.parentCode) {\r\n                    if (value) {\r\n                        setButtonAttributeByArea.call(this, area, item.parentCode, 'visible', true, area);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    } else if (isObj(buttonId)) {\r\n        for (let key of Object.keys(buttonId)) {\r\n            let items = findItemsByKey(key, this.myState.buttons).filter(item => area === item.area);\r\n            items.forEach(item => {\r\n                item[attr] = buttonId[key];\r\n\r\n                if (attr === 'disabled') {\r\n                    if (item.type === 'divider') {\r\n                        item['disabled'] = buttonId[key];\r\n                    } else {\r\n                        item['isenable'] = !buttonId[key];\r\n                    }\r\n                }\r\n                if (attr === 'visible' && item.parentCode) {\r\n                    if (buttonId[key]) {\r\n                        setButtonAttributeByArea.call(this, area, item.parentCode, 'visible', true);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\nfunction setButtonStateByArea(area, callback) {\r\n    let buttonsComponent = this.myState.buttonsComponent;\r\n    let stopOprationBtnsRenderAreas = this.myState.stopOprationBtnsRenderAreas;\r\n    let stopBtnRenderAreas = [];\r\n    for (let item of Object.keys(stopOprationBtnsRenderAreas)) {\r\n        stopOprationBtnsRenderAreas.hasOwnProperty(item) && !stopOprationBtnsRenderAreas[item] && stopBtnRenderAreas.push(item);\r\n    }\r\n    if (!stopBtnRenderAreas.includes(area)) {\r\n        if (buttonsComponent[area]) {\r\n            if (buttonsComponent[area]._isOperateButton) {\r\n                for (let uuid in buttonsComponent[area]) {\r\n                    buttonsComponent[area][uuid] &&\r\n                        buttonsComponent[area][uuid].setState &&\r\n                        buttonsComponent[area][uuid].setState({ json: [] }, () => {\r\n                        });\r\n                }\r\n            } else {\r\n                buttonsComponent[area].setState({ json: [] }, () => {\r\n                });\r\n            }\r\n            if (typeof callback === 'function') {\r\n                callback && callback();\r\n            }\r\n        }\r\n    }\r\n}\r\n","import { createButton } from './create';\r\n\r\nimport {\r\n    setButtonDisabled,\r\n    getButtonDisabled,\r\n    setButtonVisible,\r\n    setButtonsVisible,\r\n    setButtonTitle,\r\n    hideButtonsByAreas, // 隐藏所传区域的按钮\r\n    getButtons,\r\n    setButtons,\r\n    getButtonVisible,\r\n    updateButtons,\r\n    setMainButton,\r\n    setPopContent,\r\n    setUploadDocAmount,\r\n    setOprationBtnsRenderStatus,\r\n    setUploadConfig,\r\n    //兼容旧代码\r\n    setDisabled,\r\n} from './methods';\r\n\r\nexport default {\r\n    createButton,\r\n    setButtonDisabled,\r\n    getButtonDisabled,\r\n    setButtonVisible,\r\n    setButtonsVisible,\r\n    setButtonTitle,\r\n    hideButtonsByAreas, // 隐藏所传区域的按钮\r\n    getButtons,\r\n    setButtons,\r\n    getButtonVisible,\r\n    updateButtons,\r\n    setMainButton,\r\n    setPopContent,\r\n    setUploadDocAmount,\r\n    setOprationBtnsRenderStatus,\r\n    setUploadConfig,\r\n    //兼容旧代码\r\n    setDisabled,\r\n}\r\n","/*\r\n * @Author: liyxt\r\n * @Date: 2020-05-19 15:47:39\r\n * @LastEditors: liyxt\r\n * @LastEditTime: 2020-06-04 14:24:29\r\n * @Description: file content\r\n */\r\nimport React from 'react';\r\nimport { Button } from '@platform/base';\r\n// require('./index.less');\r\n\r\n\r\nexport function createButton(id, config = {}) {\r\n    // console.log('页面调用了createButton方法，请使用createButtonApp方法重新创建按钮，后续createButton将删除');\r\n    let { disabled = false, name = '', onButtonClick, buttonColor = '', ...others } = config;\r\n    if (!this.state.button.hasOwnProperty(id)) {\r\n        //初始化\r\n        this.state.button[id] = { disabled };\r\n        this.state.button[id] = Object.assign(this.state.button[id], config);\r\n    }\r\n    return (\r\n        <Button\r\n            disabled={this.state.button[id].disabled}\r\n            onClick={() => {\r\n                if (window.top.proxyAction) {\r\n                    window.top.proxyAction(onButtonClick, this, name)({ ...this.props, ...this.output }, id);\r\n                } else if (typeof onButtonClick === 'function') {\r\n                    onButtonClick.call(this, { ...this.props, ...this.output }, id);\r\n                    //$PE.proxy(onButtonClick, this, name)({ ...this.props, ...this.output }, id);\r\n                }\r\n            }}\r\n            {...others}\r\n            color={buttonColor}\r\n            id={id}\r\n            className={`${!this.state.button[id].hasOwnProperty('visible') || this.state.button[id].visible\r\n                ? 'show'\r\n                : 'hide'}  button-component ${buttonColor}`}\r\n        >\r\n            {name}\r\n        </Button>\r\n    );\r\n}\r\n","export const name = 'NCCExtend';\r\n\r\nexport const emptyf = function () {\r\n};\r\n\r\nexport const enable = window.NCCExtendEable || true;\r\n\r\nexport default {\r\n    name,\r\n    emptyf,\r\n    enable\r\n};","\r\n\r\nimport * as config from './const';\r\n\r\nexport const feConfigName = config.name;\r\n\r\nexport const getCheckedMethod = function (obj, name, defaultf) {\r\n\treturn obj && typeof obj[name] === 'function' ? obj[name] : (defaultf || config.emptyf);\r\n};\r\n\r\nexport const getCheckedExtendMethod = function (obj, name, defaultf) {\r\n\t// console.log('二开相关回调方法', config, name);\r\n\tif (name === 'templateAlreadyLoaded') {\r\n\t\tconsole.log('二开相关回调方法', config, name);\r\n\t}\r\n\t// 有些特殊情况 取不到this对象上的方法\r\n\tif (obj && (!obj[config.name] || JSON.stringify(obj[config.name]) === '{}')) {\r\n\t\tobj = window;\r\n\t}\r\n\treturn obj && obj[config.name] ? getCheckedMethod(obj[config.name], name, defaultf) : (defaultf || config.emptyf);\r\n};\r\n\r\n// export const decoratorZ = function (target, name, descriptor) {\r\n// \tvar oldValue = descriptor.value;\r\n// \tdescriptor.value = function () {\r\n// \t\tconsole.log(`before ${name}`, this);\r\n// \t\tlet res = oldValue.apply(this, arguments);\r\n// \t\tconsole.log(`after ${name}`);\r\n// \t\treturn res;\r\n// \t};\r\n// \treturn descriptor;\r\n// };\r\n\r\nconst defaultFxConfig = {\r\n\tonAfterEvent: 'after', // after before replace remian\r\n\tonBeforeEvent: 'before',\r\n\tonEditTableAfterEvent: 'after', // after before replace remian\r\n\tonEditTableBeforeEvent: 'before',\r\n\tonFormAfterEvent: 'after', // after before replace remian\r\n\tonFormBeforeEvent: 'before',\r\n\tonCardTableAfterEvent: 'after', // after before replace remian\r\n\tonCardTableBeforeEvent: 'before',\r\n};\r\n\r\nfunction testType(origin) {\r\n\treturn Object.prototype.toString.call(origin).slice(8, -1);\r\n}\r\n\r\nexport const beforeAndAfter = function (pageScope, info = {}, fy, fx) {\r\n\t//有些特殊情况 取不到this对象上的方法\r\n\tif (JSON.stringify(pageScope[config.name]) === '{}') { \r\n\t\tpageScope = window;\r\n\t}\r\n\t// console.log('二开相关回调方法', info);\r\n\tif (!pageScope[config.name] || !info || !info['attrcode'] || !info['fxType']) {\r\n\t\treturn fy();\r\n\t}\r\n\tlet { attrcode, moduleId = '', fxType = 'onAfterEvent', fxParams = {} } = info,\r\n\t\tfe = pageScope[config.name],\r\n\t\tfxConfig = {\r\n\t\t\t...defaultFxConfig,\r\n\t\t\t...(fe['defaultFxConfig'] || {}),\r\n\t\t\t...(fe[moduleId + '-' + attrcode] || {})\r\n\t\t};\r\n\t// 获取对应的回调方法\r\n\tfx = fx || getCheckedExtendMethod(pageScope, fxType);\r\n\t// console.log(fxConfig, info, fe['defaultFxConfig']);\r\n\tif (fxConfig[fxType] === 'mixin') {\r\n\t\treturn fx(fxParams, fy);\r\n\t} else if (fxConfig[fxType] === 'replace') {\r\n\t\treturn fx(fxParams);\r\n\t} else if (fxConfig[fxType] === 'before') {\r\n\t\tconst orderResult = fx(fxParams); // 可以考虑添加异步处理\r\n\t\tif (testType(orderResult) === 'AsyncFunction') {\r\n\t\t\treturn new Promise(resolve => {\r\n\t\t\t\torderResult().then(data => {\r\n\t\t\t\t\tfy();\r\n\t\t\t\t\tresolve(data);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t} else if (testType(orderResult) === 'Promise') {\r\n\t\t\treturn new Promise(resolve => {\r\n\t\t\t\torderResult.then(data => {\r\n\t\t\t\t\tfy(); // 这里也可能是异步关系\r\n\t\t\t\t\tresolve(data);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn fy();\r\n\t\t}\r\n\t} else {\r\n\t\tconst orderResult = fy(); // 可以考虑添加异步处理\r\n\t\tif (testType(orderResult) === 'AsyncFunction') {\r\n\t\t\treturn new Promise(resolve => {\r\n\t\t\t\torderResult().then(data => {\r\n\t\t\t\t\tfx(fxParams);\r\n\t\t\t\t\tresolve(data);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t} else if (testType(orderResult) === 'Promise') {\r\n\t\t\treturn new Promise(resolve => {\r\n\t\t\t\torderResult.then(data => {\r\n\t\t\t\t\tfx(fxParams); // 这里也可能是异步关系\r\n\t\t\t\t\tresolve(data);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\treturn fx(fxParams);\r\n\t\t}\r\n\t}\r\n\r\n};\r\nexport default {\r\n\tgetCheckedExtendMethod,\r\n\tgetCheckedMethod,\r\n\tbeforeAndAfter,\r\n\tfeConfigName,\r\n};","/*\r\n * @Author: liyxt\r\n * @Date: 2020-05-19 15:47:39\r\n * @LastEditors: liyxt\r\n * @LastEditTime: 2020-06-04 14:17:53\r\n * @Description: file content\r\n */ \r\nimport React, { Component } from 'react';\r\nimport {Tooltip} from '@platform/base';\r\n\r\n\r\nexport default class BtnItemTip extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            tipStatus: false,\r\n        };\r\n        this.tipConfirm = false;\r\n        this.dom = React.createRef();\r\n    }\r\n\r\n    componentDidMount() {\r\n        //this.itemDom.clientWidth<this.itemDom.scrollWidth\r\n        // 初始化是否显示tip\r\n        if (this.dom) {\r\n            let tipItem = this.dom.querySelector('.btn-item-left');\r\n            if (tipItem && tipItem.clientWidth < tipItem.scrollWidth) {\r\n                this.tipConfirm = true;\r\n                this.setState({ tipStatus: true });\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.dom && !this.tipConfirm) {\r\n            let tipItem = this.dom.querySelector('.btn-item-left');\r\n            if (tipItem && tipItem.clientWidth < tipItem.scrollWidth) {\r\n                this.tipConfirm = true;\r\n                this.setState({ tipStatus: true });\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Tooltip\r\n                overlay={this.state.tipStatus ? this.props.overlay : ''}\r\n                inverse\r\n                delayShow={500}\r\n                delay={1}\r\n            >\r\n                <span ref={\r\n                    dom => {\r\n                        this.dom = dom;\r\n                    }\r\n                }\r\n                >\r\n                    {this.props.children}\r\n                </span>\r\n            </Tooltip>\r\n        );\r\n    }\r\n}\r\n","// 渲染下拉菜单和更多下拉里面的Menu列表\r\nimport React, { Component } from 'react';\r\nimport classNames from 'classnames';\r\nimport { Menu as Menu, Upload as Upload } from '@platform/base';\r\nimport BtnItemTip from './BtnItemTip';\r\n\r\nconst { Item, Divider: Divider, ItemGroup: ItemGroup } = Menu;\r\n\r\n// querySelector  不能識別數字開頭 不能識別特殊字符 ·/·\r\nconst replaceSpecialStr = function (str) {\r\n    return str.replace(/\\/|\\\\|,/g, '') || str;\r\n};\r\n\r\nfunction\r\nstrlen(str) {\r\n    var len = 0;\r\n    for (var i = 0; i < str.length; i++) {\r\n        var c = str.charCodeAt(i);\r\n        //单字节加1\r\n        if ((c >= 0x0001 && c <= 0x007e) || (c >= 0xff60 && c <= 0xff9f)) {\r\n            len++;\r\n        } else {\r\n            len += 2;\r\n        }\r\n    }\r\n    return len;\r\n}\r\n\r\n/**\r\n * 展示帮助\r\n */\r\nconst SHOW_HELPER = true;\r\n\r\n/**\r\n * 首字母大写  add by bbqin 暂时不考虑多键的情况\r\n * @param {*} str\r\n */\r\nfunction firstToUpperCase(str) {\r\n    // 把加号前后的字符全转译\r\n    return str.toLowerCase().replace(/( |^)[a-z]|\\+[a-z]/g, L => L.toUpperCase());\r\n}\r\n\r\n// const IS_TEST_ENV = NODE_ENV === 'test';\r\nexport const renderMenuItem = function (data, specialDisabled) {\r\n    // more 更多操作 下拉下面的禁用要加删除线，通过传specialDisabled 来区分\r\n    data = data.filter(it => {\r\n        return it.visible || !it.hasOwnProperty('visible');\r\n    });\r\n\r\n    return data.map((item, index) => {\r\n        if (item.visible !== false) {\r\n            return item.title ? (\r\n                <ItemGroup title={item.title}>\r\n                    {item.children.map(({ key, title, disabled, visible, uploadConfig, keyboard, area, parentCode }) => {\r\n                        return (\r\n                            visible !== false && (\r\n                                <Item\r\n                                    key={key}\r\n                                    fieldid={key}\r\n                                    btn-code={key}\r\n                                    disabled={disabled}\r\n                                    className=\"dropdown-btn-item\"\r\n                                >\r\n                                    <BtnItemTip\r\n                                        overlay={title}\r\n                                    >\r\n                                        <div className=\"dropdown-btn-item-box\">\r\n                                            <div\r\n                                                ref={dom => {\r\n                                                    this.itemDom = dom;\r\n                                                }}\r\n                                                btn-code={key}\r\n                                                className={classNames(replaceSpecialStr(` nc-${area}-btn-${parentCode}-${key}  `), 'btn-item-left')}\r\n                                            >\r\n                                                {/* 特殊禁用加删除线 */}\r\n                                                {specialDisabled && disabled ? (\r\n                                                    <span\r\n                                                        className=\"main-title\"\r\n                                                        style={{ cursor: 'default' }}\r\n                                                    >{title}\r\n                                                    </span>\r\n                                                ) : uploadConfig && !disabled ? (\r\n                                                    <Upload showUploadList={false} {...uploadConfig}>\r\n                                                        {title}\r\n                                                    </Upload>\r\n                                                ) : (\r\n                                                    title\r\n                                                )}\r\n                                            </div>\r\n                                            <div\r\n                                                className=\"btn-item-right\"\r\n                                                onClick={e => {\r\n                                                    if (!e.target || (specialDisabled && disabled) || !uploadConfig || disabled) {\r\n                                                        return false;\r\n                                                    }\r\n                                                    let prevUpload = e.target.previousElementSibling.querySelector('input');\r\n                                                    prevUpload && prevUpload.click();\r\n                                                }}\r\n                                            >\r\n                                                {keyboard && SHOW_HELPER ? `${firstToUpperCase(keyboard)}` : ''}\r\n                                            </div>\r\n                                        </div>\r\n                                    </BtnItemTip>\r\n                                </Item>\r\n                            )\r\n                        );\r\n                    })}\r\n                </ItemGroup>\r\n            ) : (\r\n                [\r\n                    item.children.map(({ key, title, disabled, visible, uploadConfig, keyboard, area, parentCode }) => {\r\n                        return (\r\n                            visible !== false && (\r\n                                <Item\r\n                                    key={key}\r\n                                    fieldid={key}\r\n                                    btn-code={key}\r\n                                    disabled={disabled}\r\n                                    className=\"dropdown-btn-item\"\r\n                                    // onClick={this.onClick} // bbqin  由于 item上的click事件和当前事件重复触发 去除该事件\r\n                                >\r\n                                    <BtnItemTip\r\n                                        overlay={title}\r\n                                    >\r\n                                        <div className=\"dropdown-btn-item-box\">\r\n                                            <div className=\"btn-item-left\" btn-code={key}>\r\n                                                {specialDisabled && disabled ? (\r\n                                                    <span\r\n                                                        className=\"main-title\"\r\n                                                        style={{ cursor: 'default' }}\r\n                                                    >{title}\r\n                                                    </span>\r\n                                                ) : uploadConfig && !disabled ? (\r\n                                                    !disabled ? (\r\n                                                        <Upload\r\n                                                            showUploadList={false}\r\n                                                            {...uploadConfig}\r\n                                                            className={classNames(replaceSpecialStr(` nc-${area}-btn-${parentCode}-${key}  `))}\r\n                                                        >\r\n                                                            {title}\r\n                                                        </Upload>\r\n                                                    ) : title\r\n                                                ) : (\r\n                                                    title\r\n                                                )\r\n                                                }\r\n                                            </div>\r\n                                            <div\r\n                                                className=\"btn-item-right\"\r\n                                                onClick={e => {\r\n                                                    if (!e.target || (specialDisabled && disabled) || !uploadConfig || disabled) {\r\n                                                        return false;\r\n                                                    }\r\n                                                    let prevUpload = e.target.previousElementSibling.querySelector('input');\r\n                                                    prevUpload && prevUpload.click();\r\n                                                }}\r\n                                            >\r\n                                                {keyboard && SHOW_HELPER ? `${firstToUpperCase(keyboard)}` : ''}\r\n                                            </div>\r\n                                        </div>\r\n                                    </BtnItemTip>\r\n                                </Item>\r\n                            )\r\n                        );\r\n                    }),\r\n                    data[index + 1] && <Divider />,\r\n                ]\r\n            );\r\n        }\r\n    });\r\n};\r\n\r\nexport const renderMenu = function (data, specialDisabled, tabindex = 0, maxHeight = 500) {\r\n    return (\r\n        <div style={{ overflow: 'auto', maxHeight: maxHeight }}><Menu\r\n            className=\"button-app-dropdown-menu-wrapper\"\r\n            onClick={info => {\r\n                this.onClick(info);\r\n                this.onVisibleChange ? this.onVisibleChange() : null;\r\n            }}\r\n            tabIndex={tabindex}\r\n        >\r\n            {renderMenuItem.call(this, data, specialDisabled)}\r\n        </Menu></div>\r\n    );\r\n};\r\n\r\nexport class RenderMenu extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = { maxHeight: 500, // 下拉菜单是否显示\r\n        };\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setMaxHeight();\r\n    }\r\n\r\n    componentWillReceiveProps(){\r\n        this.setMaxHeight();\r\n    }\r\n\r\n    setMaxHeight =()=>{\r\n        let clientHeight = document.body.clientHeight;//浏览器可视区域高度\r\n        let buttonApp = document.querySelector('.button-app-wrapper');\r\n        let dropdownWrapper = buttonApp && buttonApp.querySelector('.button-app-dropdown-menu-wrapper');\r\n        let dropdownClient = dropdownWrapper && dropdownWrapper.getBoundingClientRect();\r\n        let top = dropdownClient && dropdownClient.top;\r\n        //console.log(\"获取距离视口顶层高度\", top)\r\n        let maxHeight = top && clientHeight - top - 50;\r\n        if (maxHeight && maxHeight > 0) {\r\n            this.setState({ maxHeight: maxHeight })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        let { maxHeight } = this.state;\r\n        let { data, specialDisabled, tabindex = 0, onClick, onVisibleChange } = this.props;\r\n        return (\r\n            \r\n            <Menu\r\n                className=\"button-app-dropdown-menu-wrapper\"\r\n                style={{ overflow: 'auto', maxHeight: maxHeight }}\r\n                onClick={info => {\r\n                    onClick(info);\r\n                    onVisibleChange ? onVisibleChange() : null;\r\n                }}\r\n                tabIndex={tabindex}\r\n            >\r\n                {renderMenuItem.call(this, data, specialDisabled)}\r\n            </Menu>\r\n           \r\n        )\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport classNames from 'classnames';\r\nimport { Button as Button } from '@platform/base';\r\nimport { RenderMenu } from '../MenuUtil';\r\nimport { getSysFieldid } from '@platform/api';\r\n\r\nrequire('./index.less');\r\n\r\n// querySelector  不能識別數字開頭 不能識別特殊字符 ·/·\r\nconst replaceSpecialStr = function (str) {\r\n    return str.replace(/\\/|\\\\|,/g, '') || str;\r\n};\r\n\r\nexport default class More extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            show: false,\r\n        };\r\n        this.timer = null;\r\n        this.timerIndex = true;\r\n    }\r\n\r\n    onClick = info => {\r\n        // 在Popover的content中的Menu中调用该事件 由于call绑定了this，Menu和MenuItem中的this都指向More组件\r\n        let key = info.key;\r\n        let title = info.item.props.children;\r\n        this.props.onClick({ key, title });\r\n        this.setState({ show: false });\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            list,\r\n            title,\r\n            btncolor,\r\n            disabled,\r\n            json,\r\n            tabindex = 0,\r\n            clskey,\r\n            area,\r\n        } = this.props;\r\n        const { show } = this.state;\r\n        let length = list.length;\r\n        for (let items of list) {\r\n            let len = items['children'].length;\r\n            if (len > 1) {\r\n                if (\r\n                    items.hasOwnProperty('visible') &&\r\n                    items.visible === false\r\n                ) {\r\n                    length -= 1;\r\n                } else {\r\n                    for (let item of items['children']) {\r\n                        // 添加一个topParentCode 解决找不到上传class的问题 bbqin\r\n                        item.topParentCode = items.parentCode || item.parentCode;\r\n                        // console.log(item.hasOwnProperty('visible'), item)\r\n                        if (\r\n                            item.hasOwnProperty('visible') &&\r\n                            item.visible === false\r\n                        ) {\r\n                            len -= 1;\r\n                        } else {\r\n                            len = len;\r\n                        }\r\n                        // console.log(len, '-len')\r\n                    }\r\n                    if (len === 0) {\r\n                        items.visible = false;\r\n                        length -= 1;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return (\r\n            <div\r\n                className='mores-wrapper'\r\n                onMouseLeave={() => {\r\n                    this.timerIndex = true;\r\n\r\n                    this.timer = setTimeout(() => {\r\n                        if (this.timerIndex) {\r\n                            this.setState({ show: false });\r\n                        }\r\n                    }, 300);\r\n                }}\r\n            >\r\n                <div\r\n                    className=\"mores-in-wrapper\"\r\n                    onMouseEnter={() => {\r\n                        this.timerIndex = false;\r\n                        clearTimeout(this.timer);\r\n                    }}\r\n                    fieldid={getSysFieldid(`${clskey}_btn`)}\r\n                    btn-code={clskey}\r\n                >\r\n                    <Button\r\n                        disabled={disabled}\r\n                        className={classNames(\r\n                            replaceSpecialStr(` nc-${area}-${clskey}-icon `),\r\n                            'moreButton-component',\r\n                            {\r\n                                'button-primary': btncolor == 'button_main',\r\n                            },\r\n                        )}\r\n                        onClick={() => !disabled && this.setState({ show: !show })\r\n                        }\r\n                        tabindex={tabindex}\r\n                        fieldid={clskey}\r\n                        btn-code={clskey}\r\n                    >\r\n                        {title || json['page-button-0004']}\r\n                        <i\r\n                            className={`arrow icon iconfont ${\r\n                                btncolor == 'button_main'\r\n                                    ? 'button-primary'\r\n                                    : ''\r\n                                } ${\r\n                                show ? 'icon-hangcaozuoxiangshang1' : 'icon-hangcaozuoxiala1'\r\n                                }`\r\n                            }\r\n                        />\r\n                    </Button>\r\n                    {/* <div className='more-beijing-wrapper' /> */}\r\n                    <span\r\n                        className={classNames({\r\n                            'mores-sanjiao': show,\r\n                            'mores-sanjiao mores-sanjiao-hide': !show,\r\n                        })}\r\n                    />\r\n                    <div\r\n                        fieldid={getSysFieldid(`${clskey}_btn_list`)}\r\n                        className={\r\n                            show\r\n                                ? 'mores-list-wrapper'\r\n                                : 'mores-list-wrapper mores-list-hide-wrapper'\r\n                        }\r\n                        // onMouseLeave={() => {\r\n                        //     this.setState({show: false})\r\n                        // }}\r\n                        style={{\r\n                            // width: `${length * 140 + 30}px`,\r\n                            maxWidth: '1024px',\r\n                            whiteSpace: 'nowrap',\r\n                        }}\r\n                        btn-code={clskey}\r\n                    >\r\n                        {/* {renderMenu.call(this, list, true, tabindex)} */}\r\n                        <RenderMenu\r\n                            data={list}\r\n                            specialDisabled={true}\r\n                            tabindex={tabindex}\r\n                            onClick={this.onClick}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nMore.defaultProps = {\r\n    list: [],\r\n    popPlacement: 'bottomRight', // 弹窗窗口的位置\r\n};\r\n","import React, { Component } from 'react';\r\nimport classNames from 'classnames';\r\nimport {\r\n    Dropdown as Dropdown,\r\n    Button as Button,\r\n} from '@platform/base';\r\nimport { RenderMenu } from '../MenuUtil';\r\n\r\nrequire('./index.less');\r\n\r\n// querySelector  不能識別數字開頭 不能識別特殊字符 ·/·\r\nconst replaceSpecialStr = function (str) {\r\n    return str.replace(/\\/|\\\\|,/g, '') || str;\r\n};\r\nexport default class MyDropdown extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            visible: false, // 下拉菜单是否显示\r\n        };\r\n    }\r\n\r\n    onClick = info => {\r\n        let { dividerBtn } = this.props;\r\n        let key = info.key;\r\n        let title = info.item.props.children;\r\n        this.props.onClick({ key, title });\r\n        this.setState({ visible: false }, () => {\r\n            //点击下拉中的按钮，使分割按钮聚焦,解决物料集团节点，点击分割按钮弹出modal，关闭modal之后滚动到最上方问题\r\n            if (dividerBtn) {\r\n                let btnRight = dividerBtn.querySelector('.btn-right');\r\n                btnRight.focus();\r\n            }\r\n        });\r\n    };\r\n\r\n    onVisibleChange = visible => {\r\n        let { onVisibleChange } = this.props;\r\n        this.setState({ visible });\r\n        onVisibleChange && onVisibleChange(visible);\r\n    };\r\n\r\n    render() {\r\n        let {\r\n            list,\r\n            title,\r\n            disabled,\r\n            btncolor,\r\n            popContainer,\r\n            area,\r\n            dropdownType,\r\n            tabindex = 0,\r\n            clskey,\r\n        } = this.props;\r\n        // 整个下拉的可见性取决于:1.是否曾手动将下拉list的visible设为false,2.list下的分组是否都隐藏\r\n        // 分组的可见性取决于:1.是否曾手动将分组的visible设为false,2.分组里面的按钮是否都隐藏\r\n        list.forEach(item => {\r\n            // 分组的可见性\r\n            if (item.visible !== false) {\r\n                let visible_group = !item.children.every(\r\n                    ele => ele.visible === false,\r\n                );\r\n                if (item.children.length == 0) {\r\n                    visible_group = false;\r\n                }\r\n                item.visible = visible_group;\r\n            }\r\n            // 添加一个topParentCode 解决找不到上传class的问题 bbqin\r\n            item.children.forEach(el => {\r\n                el.topParentCode = item.parentCode || el.parentCode;\r\n            });\r\n        });\r\n        // 整个下拉的可见性\r\n        let visible_list = list.visible;\r\n        if (visible_list !== false) {\r\n            visible_list = !list.every(item => item.visible === false);\r\n        }\r\n        // 当下拉中的按钮都隐藏时或者下拉中本来就没有按钮时,整个下拉按钮也隐藏掉\r\n        if (list.length === 0) {\r\n            visible_list = false;\r\n        }\r\n        let dropdownBtn = () => {\r\n            if (this.props.children) {\r\n                return <span>{this.props.children}</span>;\r\n            } else {\r\n                return (\r\n                    <Button\r\n                        fieldid={clskey}\r\n                        btn-code={clskey}\r\n                        disabled={disabled}\r\n                        className={classNames({\r\n                            'dropdown-component': title,\r\n                            'dropdown-arrow': !title,\r\n                            'my-dropdown-buttons-main-wrapper': dropdownType,\r\n                            'button-primary': btncolor == 'button_main',\r\n                        })}\r\n                        tabindex={tabindex}\r\n                    >\r\n                        {title}\r\n                        {this.state.visible ? (\r\n                            <i\r\n                                className={classNames(\r\n                                    'arrow iconfont icon-hangcaozuoxiangshang1',\r\n                                    replaceSpecialStr(` nc-${area}-${clskey}-icon `),\r\n                                    {\r\n                                        'button-primary':\r\n                                            btncolor == 'button_main',\r\n                                    },\r\n                                )}\r\n                            />\r\n                        ) : (\r\n                            <i\r\n                                className={classNames(\r\n                                    'arrow iconfont icon-hangcaozuoxiala1',\r\n                                    replaceSpecialStr(` nc-${area}-${clskey}-icon `),\r\n                                    {\r\n                                        'button-primary':\r\n                                                btncolor == 'button_main',\r\n                                    },\r\n                                )}\r\n                            />\r\n                        )}\r\n                    </Button>\r\n                );\r\n            }\r\n        };\r\n\r\n        return visible_list !== false ? (\r\n            <Dropdown\r\n                trigger={['click']}\r\n                // overlay={renderMenu.call(this, list, undefined, tabindex)}\r\n                overlay={(\r\n                    <RenderMenu\r\n                        data={list}\r\n                        tabindex={tabindex}\r\n                        onClick={this.onClick}\r\n                        onVisibleChange={this.onVisibleChange}\r\n                    />\r\n                )}\r\n                animation=\"slide-up\"\r\n                onVisibleChange={this.onVisibleChange}\r\n                overlayClassName={classNames(\r\n                    'dropdown-component-list-wrapper',\r\n                    this.props.className,\r\n                )}\r\n                getPopupContainer={() => {\r\n                    // let doc = document.querySelector(`.${area}-button-app-wrapper`)\r\n                    // return popContainer?popContainer:doc? doc: document.body\r\n                    return popContainer || document.body;\r\n                }}\r\n            >\r\n                {dropdownBtn()}\r\n            </Dropdown>\r\n        ) : null;\r\n    }\r\n}\r\n","/*\r\n * @Author: liyxt\r\n * @Date: 2020-05-19 15:47:39\r\n * @LastEditors: liyxt\r\n * @LastEditTime: 2020-06-03 14:25:43\r\n * @Description: file content\r\n */ \r\nimport { config as CONFIG } from '@platform/api';\r\nimport { findParentTd } from '@platform/api';\r\nimport { executeAutoFocus } from '../WithKeyboardChange/util/findNextFocusItemInTable';\r\nimport { ViewModel } from '@platform/api'\r\n\r\n\r\nimport {\r\n    CARD_ROW_SELECTED_CLASSNAME,\r\n    EDIT_ROW_SELECTED_CLASSNAME,\r\n    SIMPLE_ROW_SELECTED_CLASSNAME,\r\n    _ROW_SELECTED_CLASSNAME,\r\n} from './constants';\r\n\r\n/**\r\n * 首字母大写  add by bbqin 暂时不考虑多键的情况\r\n * @param {*} str\r\n */\r\nexport function firstToUpperCase(str) {\r\n    // 把加号前后的字符全转译\r\n    let strTransform = str.split(',');\r\n\r\n    let proccessedStr = strTransform.map(str => {\r\n        return str\r\n            .toLowerCase()\r\n            .replace(/ /g, '')\r\n            .replace(/( |^)[a-z]|\\+[a-z]/g, L => L.toUpperCase());\r\n    }).join(',');\r\n\r\n    return proccessedStr;\r\n}\r\n\r\n/**\r\n * @desc: 现在表格的快捷键是selected-row样式加事件源去判断是否触发快捷键事件的，导致页面存在多个表格且每个表格都有选中状态的时候总会触发第一个表格的快捷键事件。\r\n * @resolve: 点击某个表格的时候把清除其他表格row的选中状态\r\n * @param pageScope {object} 页面级数据；\r\n * @param moduleId {string} 区域id\r\n */\r\nexport function clearOtherTableRowSelectedStatus({ pageScope, moduleId }) {\r\n    let { orderOfHotKey } = pageScope;\r\n\r\n    orderOfHotKey.forEach(item => {\r\n        if (item !== moduleId) {\r\n            let dom = document.querySelector(`#${CONFIG.hotKeyModuleIdPrefix}-${item}`);\r\n            let selectedRows = dom && dom.querySelectorAll(`.${CARD_ROW_SELECTED_CLASSNAME},.${EDIT_ROW_SELECTED_CLASSNAME},.${SIMPLE_ROW_SELECTED_CLASSNAME},.${_ROW_SELECTED_CLASSNAME}`);\r\n\r\n            if (selectedRows && selectedRows.length) {\r\n                pageScope.myTable[item].state.table.currentIndex = -1;\r\n\r\n                pageScope.myTable[item].setState({\r\n                    table: pageScope.myTable[item].state.table,\r\n                });\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * @desc 在表格处于编辑状态下触发保存，暂存等快捷键的时候由于没有触发表格的编辑后(onblur)导致输入的值没有更新到states上\r\n * @resolve 在触发快捷键按钮的时候默认让body获取焦点\r\n * @param callBack {function} 回调函数\r\n * @param buttonInfo {object} 按钮信息\r\n * @param e {object}\r\n * @param keyMapItem {object}\r\n */\r\nexport function triggerOnClickWithBlurAction({ callBack, buttonInfo, e, keyMapItem }) {\r\n    // 如果页面超出一屏时按快捷键会导致页面滚动\r\n    // document.body.focus();\r\n    document.activeElement && document.activeElement.blur();\r\n\r\n    // let $target = window.event && window.event.target;\r\n\t\r\n    let timer = setTimeout(() => {\r\n        // 采购发票维护 附件按钮点击报错  业务使用了window 上的event对象\r\n        // window.event = {//修复ie按钮不可用bug\r\n        //     target: $target,\r\n        // };\r\n\t\t\r\n        keyMapItem\r\n            ? callBack(buttonInfo.key, e, keyMapItem)\r\n            : callBack(buttonInfo.key);\r\n        clearTimeout(timer);\r\n    }, 50);\r\n    // 设置一个时长 避免编辑事件的setTimeout后执行\r\n}\r\n\r\n","/*\r\n * @Author: liyxt\r\n * @Date: 2020-05-19 15:47:39\r\n * @LastEditors: bbq\r\n * @LastEditTime: 2020-12-07 10:31:26\r\n * @Description: file content\r\n */\r\nimport React, { Component } from 'react';\r\nimport { Tooltip } from '@platform/base';\r\nimport { firstToUpperCase } from './util';\r\n\r\nexport default class HelperTip extends Component {\r\n    render() {\r\n        let { keyboard, title, children, disabled, delayShow } = this.props;\r\n        // let processedKeyboard = keyboard && keyboard.replace(/(\\+|,|，|\\s)/g, '_');\r\n        return keyboard && disabled !== true ? (\r\n            // eslint-disable-next-line jsx-a11y/mouse-events-have-key-events\r\n            <Tooltip\r\n                key='ss'\r\n                placement=\"top\"\r\n                inverse\r\n                overlay={`${title || ''}  (${firstToUpperCase(keyboard)})`}\r\n                trigger={['hover']} // 去除  , \"focus\"\r\n                className='btn-helper-overlay'\r\n                onMouseOver={e => {\r\n                    if (e.target.className && e.target.className.includes('u-loading-backdrop')) {\r\n                        e.stopPropagation();\r\n                        // 单词写错啦\r\n                        e.preventDefault();\r\n                    }\r\n                }}\r\n                onMouseOut={() => {\r\n                    let dom = document.querySelector('.btn-helper-overlay');\r\n                    if (dom) {\r\n                        dom.style.display = 'none';\r\n                    }\r\n                }}\r\n                delayShow={delayShow}\r\n            >\r\n                {children}\r\n            </Tooltip>\r\n        ) : (\r\n                children\r\n            );\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport classNames from 'classnames';\r\nimport {\r\n    Button,\r\n    Upload as Upload,\r\n} from '@platform/base';\r\nimport MyDropdown from '../MyDropDown';\r\nimport { isObj } from '@platform/api';\r\n\r\nimport HelperTip from '../HelperTip';\r\n\r\nrequire('./index.less');\r\n\r\n// querySelector  不能識別數字開頭 不能識別特殊字符 ·/·\r\nconst replaceSpecialStr = function (str) {\r\n    return str.replace(/\\/|\\\\|,/g, '') || str;\r\n};\r\n\r\nexport default class MyDividerButton extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            showMenu: false, // 正常批复弹框显示状态\r\n            visible: false, // 正常批复弹框显示状态\r\n        };\r\n    }\r\n\r\n    onSwitchMenu = visible => {\r\n        this.setState({ visible });\r\n    };\r\n\r\n    render() {\r\n        const {\r\n            _key,\r\n            title,\r\n            list,\r\n            btncolor,\r\n            disabled,\r\n            area,\r\n            isenable,\r\n            uploadConfig,\r\n            visible,\r\n            dividerType,\r\n            tabindex = 0,\r\n            keyboard,\r\n        } = this.props;\r\n        // 整个下拉的可见性取决于:1.是否曾手动将下拉list的visible设为false,2.list下的分组是否都隐藏\r\n        // 分组的可见性取决于:1.是否曾手动将分组的visible设为false,2.分组里面的按钮是否都隐藏\r\n        list.forEach(item => {\r\n            // 分组的可见性\r\n            if (item.visible !== false) {\r\n                let visible_group = !item.children.every(\r\n                    ele => ele.visible === false,\r\n                );\r\n                if (item.children.length == 0) {\r\n                    visible_group = false;\r\n                }\r\n                item.visible = visible_group;\r\n            }\r\n        });\r\n        // 整个下拉的可见性\r\n        let visible_list = list.visible;\r\n        if (visible_list !== false) {\r\n            visible_list = !list.every(item => item.visible === false);\r\n        }\r\n        // 当下拉中的按钮都隐藏时或者下拉中本来就没有按钮时,整个下拉按钮也隐藏掉\r\n        if (list.length === 0) {\r\n            visible_list = false;\r\n        }\r\n\r\n        let btnCls = classNames(replaceSpecialStr(` nc-${area}-btn-${_key} `));\r\n\r\n        let vlBtnCls = classNames({\r\n            ' empty btn-left ': !visible_list,\r\n            ' btn-left divider-main-button ': visible_list,\r\n        });\r\n\r\n        let mainBtnCls = classNames({\r\n            ' my-divider-buttons-main-wrapper ':\r\n                dividerType || btncolor == 'button_main',\r\n        });\r\n\r\n        let uploadBtnCls = classNames({ [` upload-btn-${_key} `]: isObj(uploadConfig) });\r\n\r\n        let Btn = (\r\n            <Button\r\n                fieldid={_key}\r\n                btn-code={_key}\r\n                disabled={!isenable || disabled} // 分割按钮要根据请求回来的权限和手动设置的disabled值来设置可用性\r\n                className={classNames(\r\n                    btnCls,\r\n                    vlBtnCls,\r\n                    mainBtnCls,\r\n                    uploadBtnCls,\r\n                )} // 下拉中没有按钮不显示下拉,父按钮四个角都圆角\r\n                onClick={() => {\r\n                    // e.stopPropagation()\r\n                    this.props.onClick({ key: _key, title });\r\n                }}\r\n                tabindex={tabindex}\r\n            >\r\n                {title}\r\n            </Button>\r\n        );\r\n\r\n        let bb = dividerBtn => {\r\n            if (visible && visible_list) {\r\n                return (\r\n                    <div className=\"sawadika\">\r\n                        <div className=\"hover-divider-btn-left-wrapper\">\r\n                            <div className=\"my-divider-icon-main-wrapper\">\r\n                                <HelperTip\r\n                                    title={title}\r\n                                    keyboard={keyboard}\r\n                                    disabled={!isenable || disabled}\r\n                                    delayShow={500}\r\n                                >\r\n                                    {isObj(uploadConfig) ? (\r\n                                        <span\r\n                                            className={classNames(vlBtnCls)} // 下拉中没有按钮不显示下拉,父按钮四个角都圆角\r\n                                            onClick={e => {\r\n                                                this.setState({ visible: false });\r\n                                                e.stopPropagation();\r\n                                            }}\r\n                                        >\r\n                                            <Upload\r\n                                                showUploadList={false}\r\n                                                {...uploadConfig}\r\n                                            >\r\n                                                {Btn}\r\n                                            </Upload>\r\n                                        </span>\r\n                                    ) : (<Button\r\n                                        fieldid={_key}\r\n                                        btn-code={_key}\r\n                                        disabled={!isenable || disabled} // 分割按钮要根据请求回来的权限和手动设置的disabled值来设置可用性\r\n                                        className={classNames(\r\n                                            btnCls,\r\n                                            vlBtnCls,\r\n                                            mainBtnCls,\r\n                                        )} // 下拉中没有按钮不显示下拉,父按钮四个角都圆角\r\n                                        onClick={() => {\r\n                                            this.setState({ visible: false });\r\n                                            if (isenable || !disabled) {\r\n                                                this.props.onClick({\r\n                                                    key: _key,\r\n                                                    title,\r\n                                                });\r\n                                            }\r\n                                        }}\r\n                                        tabindex={tabindex}\r\n                                    >\r\n                                        {title}\r\n                                    </Button>)\r\n                                    }\r\n                                </HelperTip>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <MyDropdown\r\n                            list={list}\r\n                            area={area}\r\n                            btncolor={btncolor}\r\n                            popContainer={this.props.popContainer}\r\n                            onVisibleChange={this.onSwitchMenu}\r\n                            onClick={this.props.onClick}\r\n                            tabindex={tabindex}\r\n                            className={classNames(` ${area}-${_key}-panel fieldid_${_key}_btn_list`)}\r\n                            dividerBtn={dividerBtn}\r\n                        >\r\n                            {/*<div className=\"divider-button-btn-wrapper\">*/}\r\n\r\n                            {isObj(uploadConfig) ? (\r\n                                <span\r\n                                    className={classNames(vlBtnCls)} // 下拉中没有按钮不显示下拉,父按钮四个角都圆角\r\n                                    onClick={e => {\r\n                                        e.stopPropagation();\r\n                                    }}\r\n                                >\r\n                                    <Upload\r\n                                        showUploadList={false}\r\n                                        {...uploadConfig}\r\n                                    >\r\n                                        {Btn}\r\n                                    </Upload>\r\n                                </span>\r\n                            ) : (<Button\r\n                                fieldid={_key}\r\n                                btn-code={_key}\r\n                                disabled={!isenable || disabled} // 分割按钮要根据请求回来的权限和手动设置的disabled值来设置可用性\r\n                                className={classNames(vlBtnCls, mainBtnCls)} // 下拉中没有按钮不显示下拉,父按钮四个角都圆角\r\n                                onClick={e => {\r\n                                    e.stopPropagation();\r\n                                    if (isenable || !disabled) {\r\n                                        this.props.onClick({\r\n                                            key: _key,\r\n                                            title,\r\n                                        });\r\n                                    }\r\n                                }}\r\n                            >\r\n                                {title}\r\n                            </Button>)\r\n                            }\r\n                            <Button\r\n                                fieldid={`${_key}-arrow`}\r\n                                className={classNames('btn-right', {\r\n                                    'my-divider-buttons-main-wrapper':\r\n                                        dividerType || btncolor == 'button_main',\r\n                                })}\r\n                                style={{ borderRadius: '0px 3px 3px 0px' }}\r\n                                onClick={this.onSwitchMenu}\r\n                                tabindex={tabindex}\r\n                            >\r\n                                {!this.state.visible ? (<i\r\n                                    className={classNames(\r\n                                        'arrow iconfont icon-hangcaozuoxiala1',\r\n                                        replaceSpecialStr(` nc-${area}-${_key}-icon `),\r\n                                        {\r\n                                            'my-divider-buttons-main-wrapper':\r\n                                                btncolor == 'button_main',\r\n                                        },\r\n                                    )}\r\n                                />\r\n                                ) : (<i\r\n                                    className={classNames(\r\n                                        'arrow iconfont icon-hangcaozuoxiangshang1',\r\n                                        replaceSpecialStr(` nc-${area}-${_key}-icon `),\r\n                                        {\r\n                                            'my-divider-buttons-main-wrapper':\r\n                                                btncolor == 'button_main',\r\n                                        },\r\n                                    )}\r\n                                />)\r\n                                }\r\n                            </Button>\r\n                            {/*</div>*/}\r\n                        </MyDropdown>\r\n                    </div>\r\n                );\r\n            } else if (visible && !visible_list) {\r\n                return (\r\n                    isObj(uploadConfig) ? (\r\n                        <Upload\r\n                            showUploadList={false}\r\n                            {...uploadConfig}\r\n                        >\r\n                            {Btn}\r\n                        </Upload>) :\r\n                        <HelperTip\r\n                            title={title}\r\n                            keyboard={keyboard}\r\n                            disabled={!isenable || disabled}\r\n                            delayShow={500}\r\n                        >\r\n\r\n                            {Btn}\r\n                        </HelperTip>\r\n                );\r\n            } else {\r\n                return '';\r\n            }\r\n        };\r\n        return (\r\n            <div\r\n                className=\"divider-button-wrapper\"\r\n                ref={dom => {\r\n                    this.dividerBtn = ReactDOM.findDOMNode(dom);\r\n                }}\r\n            >{bb(this.dividerBtn)}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nMyDividerButton.defaultProps = {\r\n    title: '分割线按钮',\r\n    visible: true,\r\n    list: [],\r\n};\r\n","import React, { Component } from 'react';\r\nimport classNames from 'classnames';\r\nimport {\r\n    ButtonGroup as ButtonGroup,\r\n    Button as Button,\r\n    Upload as Upload,\r\n} from '@platform/base';\r\nimport MyDropdown from '../MyDropDown';\r\n\r\nimport HelperTip from '../HelperTip';\r\n\r\nrequire('./index.less');\r\n\r\n// const IS_TEST_ENV = NODE_ENV === 'test' ? false : true;\r\n// querySelector  不能識別數字開頭 不能識別特殊字符 ·/·\r\nconst replaceSpecialStr = function (str) {\r\n    return str.replace(/\\/|\\\\|,/g, '') || str;\r\n};\r\nexport default class MyButtonGroup extends Component {\r\n\r\n    /**\r\n     * 获取快捷键提示方式 样式\r\n     */\r\n    getTipKeybodard = (item) => {\r\n        let { tipKeybodard } = this.props;\r\n\r\n        if (tipKeybodard === 'underline' && item.keyboard && item.disabled !== true) {\r\n            // 现在只针对单键 以后可能会变成多键\r\n            let kbs = item.keyboard.split('+');\r\n            return [item.title, '(', <span className=\"text-decoration-underline\">{kbs ? kbs[kbs.length - 1].toUpperCase() : item.keyboard}</span>, ')'];\r\n        } else {\r\n            return item.title;\r\n        }\r\n    };\r\n\r\n    // data: 渲染 buttongroup 的数据结构\r\n    renderButtonGroup = data => {\r\n        let { area, tabindex = -1 } = this.props;\r\n        let visibleData = data.filter(item => item.visible !== false);\r\n\r\n        return visibleData.map(item => {\r\n            switch (item.type) {\r\n                case 'general_btn':\r\n                    let className =\r\n                        item.btncolor == 'button_main'\r\n                            ? 'button-primary'\r\n                            : null;\r\n                    let Btn = (\r\n                        <HelperTip\r\n                            title={item.title}\r\n                            keyboard={item.keyboard}\r\n                            disabled={item.disabled}\r\n                            delayShow={500}\r\n                        >\r\n                            <Button\r\n                                key={item.key}\r\n                                disabled={item.disabled}\r\n                                className={className}\r\n                                onClick={() => this.props.onClick({\r\n                                    key: item.key,\r\n                                    title: item.title\r\n                                })\r\n                                }\r\n                                tabindex={tabindex}\r\n                                fieldid={item.key}\r\n                                btn-code={item.key}\r\n                            >\r\n                                {this.getTipKeybodard(item)}\r\n                            </Button>\r\n                        </HelperTip>\r\n                    );\r\n                    return item.uploadConfig ? (\r\n                        <Upload\r\n                            showUploadList={false}\r\n                            {...item.uploadConfig}\r\n                            className={replaceSpecialStr(item.parentCode ? ` nc-${item.area}-btn-${item.parentCode}-${item.key} ` : ` nc-${item.area}-btn-${item.key} `)}\r\n                        >\r\n                            {Btn}\r\n                        </Upload>\r\n                    ) : (\r\n                            Btn\r\n                        );\r\n                case 'dropdown':\r\n                    return (\r\n                        <MyDropdown\r\n                            list={item.children}\r\n                            title={item.title}\r\n                            area={area}\r\n                            btncolor={item.btncolor}\r\n                            disabled={item.disabled}\r\n                            dropdownType={item.dropdownType}\r\n                            popContainer={this.props.popContainer}\r\n                            onClick={this.props.onClick}\r\n                            tabindex={tabindex}\r\n                            clskey={item.key}\r\n                            className={classNames(\r\n                                ` nc-${item.area}-${item.key}-panel fieldid_${item.key}_btn_list`\r\n                            )}\r\n                        />\r\n                    );\r\n            }\r\n        });\r\n    };\r\n\r\n    getButtonStatus = list => {\r\n        let bool = [];\r\n\r\n        if (list && list.length) {\r\n            for (let item of list) {\r\n                if (item.visible === false) {\r\n                    bool.push(item);\r\n                }\r\n            }\r\n        }\r\n\r\n        return bool.length === list.length;\r\n    };\r\n\r\n    render() {\r\n        let bool = this.getButtonStatus(this.props.list);\r\n        let data = this.props.list;\r\n        let visibleData = data.filter(item => item.visible !== false);\r\n\r\n        return (\r\n            <div\r\n                //className='buttonGroup-component '\r\n                className={classNames({\r\n                    'buttonGroup-component': true,\r\n                    'singleGroup': visibleData && visibleData.length && visibleData.length === 1\r\n                })}\r\n                style={{ marginLeft: bool ? 0 : '6px' }}\r\n            >\r\n                <ButtonGroup popContainer={this.props.popContainer}>\r\n                    {this.renderButtonGroup(\r\n                        data,\r\n                        this.props.buttonLimit\r\n                    )}\r\n                </ButtonGroup>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nrequire(\"./index.less\");\r\nimport { Modal, Button, HotKeys, Tooltip } from '@platform/base'\r\nimport { getMultiLang, getSysFieldid, getSafeRandom } from '@platform/api';\r\nconst { Header, Title, Body, Footer } = Modal;\r\n/**\r\n * 备注：在业务组传的确认取消回调报错的情况下，当前的PromptBox的确定和取消事件里的close不走，会导致n递增，走的回调取到的有误。\r\n */\r\nlet n = -1;\r\nexport class PromptBox extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            showModal: this.props.show || true,\r\n            json: {},\r\n        };\r\n    }\r\n\r\n    UNSAFE_componentWillMount() {\r\n        let callback = (json, bool) => {\r\n            if (bool) {\r\n                this.setState({ json }, () => {\r\n                    //console.log('多语加载完成')\r\n                });\r\n            }\r\n        };\r\n        getMultiLang({ moduleId: \"container_toast\", callback });\r\n    }\r\n\r\n    UNSAFE_componentWillReceiveProps(nextProps) {\r\n        this.setState({ showModal: nextProps.show || this.props.show || false });\r\n    }\r\n\r\n    callBackErrorHandle = (func, msg) => {\r\n        try {\r\n            func();\r\n        } catch (err) {\r\n            this.close();\r\n            console.error(`${msg}:${err}`);\r\n        }\r\n    };\r\n\r\n    /* 取消按钮事件 */\r\n    cancelClick = () => {\r\n        n++;\r\n        let { bcFn } = this.props;\r\n        if (bcFn[n] && typeof bcFn[n] === \"function\") {\r\n            // this.props.cancelBtnClick();\r\n            // bcFn[n]();\r\n            this.callBackErrorHandle(bcFn[n], \"PromptBox的取消回调报错\");\r\n            this.clear();\r\n        }\r\n        this.close();\r\n    };\r\n\r\n    //确认按钮事件\r\n    beSureClick = () => {\r\n        n++;\r\n        let { bsFn } = this.props;\r\n        if (bsFn[n] && typeof bsFn[n] === \"function\") {\r\n            // this.props.beSureBtnClick();\r\n            // bsFn[n]();\r\n            this.callBackErrorHandle(bsFn[n], \"PromptBox的确认回调报错\");\r\n            this.clear();\r\n        }\r\n        this.close();\r\n    };\r\n\r\n    //删除弹框\r\n    close = () => {\r\n        this.setState({ showModal: false });\r\n    };\r\n\r\n    onExited = () => {\r\n        let element = document.getElementsByClassName('prompt-box-project')[0];\r\n        if (element) {\r\n            ReactDOM.unmountComponentAtNode(element);\r\n            clearTimeout(this.closeTimer);\r\n            this.closeTimer = null;\r\n            // element 都不在app上，会报错的，这种内部组件，不要这样写\r\n            // document.getElementById(\"app\").removeChild(element);\r\n            let $parentElement = element && element.parentElement;\r\n            $parentElement && $parentElement.removeChild(element);\r\n        }\r\n    }\r\n\r\n    closeBtnClick = () => {\r\n        n++;\r\n        let { bCloseFn } = this.props;\r\n        if (bCloseFn[n] && typeof bCloseFn[n] === \"function\") {\r\n            bCloseFn[n]();\r\n            this.clear();\r\n        }\r\n        this.close();\r\n    };\r\n\r\n    clear = () => {\r\n        let { bsFn, bcFn, bCloseFn } = this.props;\r\n        bsFn[n] = null;\r\n        bcFn[n] = null;\r\n        bCloseFn[n] = null;\r\n    }\r\n\r\n    render() {\r\n        let { json } = this.state;\r\n        let {\r\n            content,\r\n            title,\r\n            color = \"success\",\r\n            noFooter = false,\r\n            closeByClickBackDrop = false,\r\n            noCancelBtn = false,\r\n            hasCloseBtn = false,\r\n            beSureBtnName = json[\"0005\"],\r\n            cancelBtnName = json[\"0006\"],\r\n            zIndex = 200,\r\n            hotKeyboard = true,\r\n            ...other\r\n        } = this.props;\r\n        if (!title) {\r\n            if (color === \"success\") {\r\n                title = json[\"0001\"];\r\n            } else if (color === \"info\") {\r\n                title = json[\"0002\"];\r\n            } else if (color === \"warning\") {\r\n                title = json[\"0003\"];\r\n            } else if (color === \"danger\") {\r\n                title = json[\"0004\"];\r\n            }\r\n        }\r\n\r\n        let toastIcon = color => {\r\n            let iconName = \"icon-wancheng\";\r\n            if (color === \"danger\") {\r\n                iconName = \"icon-shibai\";\r\n            } else if (color === \"warning\") {\r\n                iconName = \"icon-zhuyi1\";\r\n            } else if (color === \"info\") {\r\n                iconName = \"icon-tixing\";\r\n            }\r\n            let name = `iconfont ${iconName} ${color}`;\r\n            return <span className={name} />;\r\n        };\r\n        let id = Date.now() + getSafeRandom();\r\n        let indexInfo = { id, zIndex };\r\n        return (\r\n            <Modal\r\n                show={this.state.showModal}\r\n                onHide={this.closeBtnClick.bind(this)}\r\n                className={`prompt-box ${id}`}\r\n                backdrop={closeByClickBackDrop ? true : \"static\"}\r\n                indexInfo={indexInfo}\r\n                ref={Modal => (this.Modal = Modal)}\r\n                onExited={this.onExited}\r\n                {...other}\r\n                fieldid={this.props.fieldid ? this.props.fieldid : \"simpleConfirm\"}\r\n            >\r\n                {hotKeyboard && !noFooter && (\r\n                    <HotKeys\r\n                        keyMap={{\r\n                            sureBtnHandler:\r\n                                [HotKeys.USUAL_KEYS.MODAL_CONFIRM[0], 'enter'],\r\n                            cancelBtnHandler:\r\n                                HotKeys.USUAL_KEYS.MODAL_CALCEL,\r\n                        }}\r\n                        handlers={{\r\n                            sureBtnHandler: () => {\r\n                                // 确定按钮的事件 增加top的判断避免所有弹窗逻辑都被触发  by bbqin\r\n                                if (this.Modal && this.Modal.isTopModal()) {\r\n                                    console.log(\r\n                                        \"promptbox sureBtnHandler 事件回调\",\r\n                                    );\r\n                                    this.beSureClick();\r\n                                }\r\n                            },\r\n                            cancelBtnHandler: () => {\r\n                                // 确定按钮的事件 增加top的判断避免所有弹窗逻辑都被触发  by bbqin\r\n                                if (this.Modal && this.Modal.isTopModal()) {\r\n                                    console.log(\r\n                                        \"promptbox cancelBtnHandler 事件回调\",\r\n                                    );\r\n                                    this.cancelClick();\r\n                                }\r\n                            },\r\n                        }}\r\n                        className=\"promptbox-hotkeys-wrapper\"\r\n                        focused={true}\r\n                        attach={document.body}\r\n                        display=\"inline\"\r\n                    />\r\n                )}\r\n                <Header closeButton={hasCloseBtn ? true : false}>\r\n                    <span fieldid={getSysFieldid(`${json[\"0007\"]}_title`)}>{json[\"0007\"]}</span>\r\n                </Header>\r\n\r\n                <Body>\r\n                    <Title className='prompt-box-body-title'>\r\n                        {toastIcon(color)} <div className={'title-text'}>{title}</div>\r\n                    </Title>\r\n                    <div className=\"prompt-box-body-content\">{content}</div>\r\n                </Body>\r\n\r\n                {!noFooter && (\r\n                    <Footer>\r\n                        <Tooltip\r\n                            placement=\"top\"\r\n                            inverse\r\n                            overlay={`${beSureBtnName}  (${HotKeys.USUAL_KEYS.MODAL_CONFIRM})`}\r\n                            trigger={[\"hover\", \"focus\"]}\r\n                            className=\"model-helper-overlay\"\r\n                        >\r\n                            <Button\r\n                                onClick={this.beSureClick}\r\n                                colors=\"primary\"\r\n                                fieldid=\"confirm\"\r\n                            >\r\n                                {beSureBtnName}(\r\n                                <span className=\"text-decoration-underline\">\r\n                                    Y\r\n                                </span>\r\n                                )\r\n                            </Button>\r\n                        </Tooltip>\r\n                        {!noCancelBtn && (\r\n                            <Tooltip\r\n                                placement=\"top\"\r\n                                inverse\r\n                                overlay={`${cancelBtnName}  (${HotKeys.USUAL_KEYS.MODAL_CALCEL})`}\r\n                                trigger={[\"focus\", \"hover\"]}\r\n                                className=\"model-helper-overlay\"\r\n                            >\r\n                                <Button\r\n                                    onClick={this.cancelClick}\r\n                                    shape=\"border\"\r\n                                    fieldid=\"cancel\"\r\n                                >\r\n                                    {cancelBtnName}(\r\n                                    <span className=\"text-decoration-underline\">\r\n                                        N\r\n                                    </span>\r\n                                    )\r\n                                </Button>\r\n                            </Tooltip>\r\n                        )}\r\n                    </Footer>\r\n                )}\r\n            </Modal>\r\n        );\r\n    }\r\n}\r\n\r\nlet beSureArr = [];\r\nlet cancelArr = [];\r\nlet closeArr = [];\r\nexport const promptBox = props => {\r\n    props = props || {};\r\n    //let app = document.getElementById('app');\r\n    let container;\r\n    if (props.container) {\r\n        if (props.container.body) {\r\n            container = props.container.body;\r\n        }\r\n    } else {\r\n        container = document.body;\r\n    }\r\n    let div = document.createElement('section');\r\n    div.className = 'prompt-box-project';\r\n    // div.style.position='absolute';\r\n    // div.style.top='0';\r\n    // div.style.right='0';\r\n    beSureArr.push(props.beSureBtnClick);\r\n    cancelArr.push(props.cancelBtnClick);\r\n    closeArr.push(props.closeBtnClick);\r\n    // container.style.position = 'absolute';\r\n    // container.style.top='0';\r\n    // container.style.right='0';\r\n    container.appendChild(div);\r\n    ReactDOM.render(<PromptBox {...props} bsFn={beSureArr} bcFn={cancelArr} bCloseFn={closeArr} container={div} />, div);\r\n}\r\n","/**\r\n * 按钮权限,关键功能定义, 用户名密码登录组件\r\n */\r\n\r\nimport React, { Component } from 'react';\r\nimport { Input as FormControl } from '@platform/base';\r\nimport { ajax, toast, RSAUtils } from '@platform/api';\r\n\r\nclass SignIn extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            /**\r\n       * 密码\r\n       */\r\n            passWord: '',\r\n        };\r\n    }\r\n\r\n  /**\r\n   * @param val 变化的值\r\n   * 密码变化回调\r\n   */\r\n  handlePassWordChange = val => {\r\n      this.setState({ passWord: val });\r\n  };\r\n\r\n  /**\r\n   * 登录回调\r\n   * @param userCode 用户\r\n   * @param passWord 密码\r\n   */\r\n  handleSignIn = async (userCode, passWord) => {\r\n      const { resolve, lang } = this.props;\r\n      /**\r\n     * 获取加密所需的公钥\r\n     */\r\n      const { exponent, modulus } = await new Promise(resolve => {\r\n          ajax({\r\n              url: '/nccloud/baseapp/ncckeyfunc/getpubkey.do',\r\n              loading: false,\r\n              success: res => {\r\n                  const { data } = res;\r\n                  resolve(data);\r\n              },\r\n              error: res => {\r\n                  console.log('后端报错', res);\r\n              },\r\n          });\r\n      });\r\n      /**\r\n     * 密码加密\r\n     */\r\n      const key = RSAUtils.getKeyPair(exponent, '', modulus);\r\n      passWord = RSAUtils.encryptedString(key, passWord);\r\n      /**\r\n     * 用户名和密码后台校验\r\n     */\r\n      const result = await new Promise(resolve => {\r\n          ajax({\r\n              url: '/nccloud/baseapp/ncckeyfunc/pwdverify.do',\r\n              loading: false,\r\n              data: {\r\n                  encodePwd: passWord,\r\n                  usercode: userCode,\r\n              },\r\n              success: res => {\r\n                  const { data } = res;\r\n                  resolve(data);\r\n              },\r\n              error: res => {\r\n                  console.log('后端报错', res);\r\n              },\r\n          });\r\n      });\r\n      if (!result) {\r\n          toast({\r\n              content: '',\r\n              color: 'danger',\r\n              groupOperation: true,\r\n              isNode: true,\r\n              // '展开', '收起', '关闭'\r\n              TextArr: [\r\n                  lang['page-button-0010'],\r\n                  lang['page-button-0011'],\r\n                  lang['page-button-0012'],\r\n              ],\r\n              // 密码不正确\r\n              groupOperationMsg: [lang['page-button-0013']],\r\n          });\r\n      }\r\n      resolve(result);\r\n  };\r\n\r\n  render() {\r\n      const { passWord } = this.state;\r\n      const { lang } = this.props;\r\n      return (\r\n          <div>\r\n              {/* <div>{lang['page-button-0015']}</div> */}\r\n              <div style={{ display: 'flex', alignItems: 'center' }}>\r\n                  {/* 密码 */}\r\n                  <span\r\n                      style={{ width: '52px' }}\r\n                  >{`${lang['page-button-0006']}:`}\r\n                  </span>\r\n                  <FormControl\r\n                      style={{ width: '200px' }}\r\n                      value={passWord}\r\n                      onChange={this.handlePassWordChange}\r\n                      // 请输入密码\r\n                      placeholder={lang['page-button-0007']}\r\n                      type=\"password\"\r\n                  />\r\n              </div>\r\n          </div>\r\n      );\r\n  }\r\n}\r\nexport default SignIn;\r\n","import React, { Component } from 'react';\r\nimport { findDOMNode } from 'react-dom';\r\nimport classNames from 'classnames';\r\nimport { getSafeRandom } from '@platform/api'\r\nimport { getCheckedExtendMethod } from '../../FastExtend/utils';\r\n\r\nimport {\r\n    Button as Button,\r\n    Dropdown as Dropdown,\r\n    Menu as Menu,\r\n    Popconfirm,\r\n    Upload as Upload,\r\n    HotKeys,\r\n    Tooltip as Tooltip,\r\n} from '@platform/base';\r\n\r\nimport More from './Mores';\r\nimport MyDividerButton from './MyDividerButtons';\r\nimport MyButtonGroup from './MyButtonGroup';\r\nimport MyDropdown from './MyDropDown';\r\nimport { isObj, getLangCode, isFunction, isUndefined } from '@platform/api';\r\nimport { getMultiLang, ViewModel, ajax, pageTo, toast, getSysFieldid } from '@platform/api';\r\nimport { promptBox } from '../PromptBox';\r\nimport { OPERATION_UPLOAD_CLASSNAME } from './constants';\r\n\r\nimport HelperTip from './HelperTip';\r\nimport SignIn from './SignIn';\r\n\r\nimport { firstToUpperCase, triggerOnClickWithBlurAction } from './util';\r\n\r\nrequire('./create.less');\r\n\r\nconst { Item } = Menu;\r\n\r\nlet { getGlobalStorage } = ViewModel;\r\n\r\n// const IS_TEST_ENV = NODE_ENV === 'test';\r\n\r\n/**\r\n * 展示帮助\r\n */\r\n// const SHOW_HELPER = false;\r\n\r\n// get nearest parent element matching selector   origin from stackoverflow  add by bbqin\r\nconst Closest = function (el, selector) {\r\n    if (!el) {\r\n        return null;\r\n    }\r\n    var matchesSelector = el.matches || el.webkitMatchesSelector || el.mozMatchesSelector || el.msMatchesSelector;\r\n\r\n    while (el) {\r\n        if (matchesSelector.call(el, selector)) {\r\n            break;\r\n        }\r\n        el = el.parentElement;\r\n    }\r\n    return el;\r\n};\r\n\r\n// querySelector  不能識別數字開頭 不能識別特殊字符 ·/·\r\nconst replaceSpecialStr = function (str) {\r\n    return str.replace(/\\/|\\\\|,/g, '') || str;\r\n};\r\n\r\nconst recurToKeyboardMap = function (tree, parentVisible, obj = {}) {\r\n    tree.forEach(item => {\r\n        if (item.key && item.keyboard) {\r\n            let kb = firstToUpperCase(item.keyboard);\r\n            obj[kb] = obj[kb] ? obj[kb] + 1 : 1;\r\n        }\r\n        if (item.children) {\r\n            recurToKeyboardMap(item.children, item.visible !== false && parentVisible, obj);\r\n        }\r\n    });\r\n    return obj;\r\n};\r\n\r\nclass ButtonApp extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            json: [],\r\n            lang: {},\r\n            intl: null,\r\n        };\r\n        this.bindWebsocket = false;\r\n        this.iskeyfuncFlag = null;\r\n    }\r\n\r\n    UNSAFE_componentWillMount() {\r\n        let { area, _this } = this.props;\r\n        let buttonsLangJson = _this.myState.buttonsLangJson;\r\n        _this.myState.buttonsComponent[area] = this;\r\n        if (buttonsLangJson.lang) {\r\n            this.setState({\r\n                json: this.props.json || [],\r\n                lang: buttonsLangJson.lang,\r\n                intl: buttonsLangJson.intl,\r\n            });\r\n        } else {\r\n            let callback = (lang, bool, intl) => {\r\n                _this.myState.buttonsLangJson = {\r\n                    lang,\r\n                    intl,\r\n                };\r\n                this.setState({\r\n                    json: this.props.json || [],\r\n                    lang,\r\n                    intl,\r\n                });\r\n            };\r\n            getMultiLang({ moduleId: 'page-button', callback });\r\n        }\r\n    }\r\n\r\n    UNSAFE_componentWillReceiveProps() {\r\n        let { area, _this } = this.props;\r\n        this.setState({ json: this.props.json || [] });\r\n        if (!_this.myState.buttonsComponent[area]) {\r\n            _this.myState.buttonsComponent[area] = this;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 获取当前点击的按钮的iskeyfunc属性\r\n     * iskeyfunc属性表示按钮是否需要进行关键功能定义的校验\r\n    */\r\n    getCurrentBtnIsKeyFunc = ({ items, currentKey }) => {\r\n        items.forEach(item => {\r\n            const { children, key, iskeyfunc } = item;\r\n            if (!isUndefined(children) && children.length) {\r\n                if (currentKey === key) {\r\n                    this.iskeyfuncFlag = iskeyfunc\r\n                }\r\n                this.getCurrentBtnIsKeyFunc({ items: children, currentKey, });\r\n            } else {\r\n                if (currentKey === key) {\r\n                    this.iskeyfuncFlag = iskeyfunc\r\n                }\r\n            }\r\n        })\r\n    };\r\n\r\n    onClick = async buttonInfo => {\r\n        // 多语\r\n        const { lang } = this.state;\r\n        let { _this, _this: { billinfo = {} }, modalRelation, onClick, notInterruptCode, withAutoFocus } = this.props;\r\n        const { key: currentKey, item } = buttonInfo;\r\n        this.getCurrentBtnIsKeyFunc({ items: [item], currentKey });\r\n        let iskeyfunc = this.iskeyfuncFlag\r\n        console.log('ca认证', iskeyfunc)\r\n        /**\r\n       * 关键功能定义\r\n       * 当模版上设置了按钮权限字段iskeyfunc为true后才走关键功能定义逻辑\r\n       * 对按钮的权限进行校验\r\n       */\r\n        if (iskeyfunc) {\r\n            this.iskeyfuncFlag = null //标志还原\r\n            /**\r\n            * 按钮权限校验\r\n            * 根据应用编码和按钮编码返回该按钮在关键功能定义中的认证类型\r\n            * 需要的参数为应用编码和按钮编码，分别为：appcode,appbtncode\r\n            */\r\n            /**\r\n         * 获取应用编码\r\n        */\r\n            const appcode = billinfo.appcode || pageTo.getAppCode();\r\n            /**\r\n         * 获取用户编码\r\n         */\r\n            const { userCode } = JSON.parse(getGlobalStorage('localStorage', 'STOREFORINFODATA'));\r\n            const checkMode = await new Promise(resolve => {\r\n                ajax({\r\n                    url: '/nccloud/baseapp/ncckeyfunc/authentype.do',\r\n                    loading: false,\r\n                    data: {\r\n                        // 应用编码\r\n                        appcode,\r\n                        // 按钮编码,就是key\r\n                        appbtncode: currentKey,\r\n                    },\r\n                    success: res => {\r\n                        const { data } = res;\r\n                        switch (data) {\r\n                            case '0': //用户密码校验\r\n                                promptBox({\r\n                                    color: 'info',\r\n                                    hotKeyboard: true,\r\n                                    // 关键功能验证\r\n                                    title: lang['page-button-0014'],\r\n                                    content: <SignIn ref={self => this.signInSelf = self} lang={lang} resolve={resolve} />,\r\n                                    noFooter: false,\r\n                                    noCancelBtn: false,\r\n                                    // 确定\r\n                                    beSureBtnName: lang['page-button-0008'],\r\n                                    // 取消\r\n                                    cancelBtnName: lang['page-button-0009'],\r\n                                    beSureBtnClick: () => {\r\n                                        // 进行登录校验\r\n                                        const { handleSignIn, state: { passWord } } = this.signInSelf;\r\n                                        handleSignIn(userCode, passWord);\r\n                                    },\r\n                                    cancelBtnClick: () => {\r\n                                        console.log('Cancel');\r\n                                    },\r\n                                });\r\n                                return;\r\n                            case '1':/**强制ca校验 **/\r\n                                if (isFunction(window.superSign)) {\r\n                                    const { status, msg } = window.superSign(String(getSafeRandom() * 1000 + getSafeRandom()), userCode, true, true);\r\n                                    switch (status) {\r\n                                        // 返回0表示通过\r\n                                        case 0:\r\n                                            resolve(true);\r\n                                            break;\r\n                                        // 返回1 表示不通过\r\n                                        case 1:\r\n                                            toast({\r\n                                                content: '',\r\n                                                color: 'danger',\r\n                                                groupOperation: true,\r\n                                                isNode: true,\r\n                                                // '展开', '收起', '关闭'\r\n                                                TextArr: [lang['page-button-0010'], lang['page-button-0011'], lang['page-button-0012']],\r\n                                                // ca检验不成功的提示信息\r\n                                                groupOperationMsg: [msg],\r\n                                            });\r\n                                            resolve(false);\r\n                                            break;\r\n                                    }\r\n                                }\r\n                                return;\r\n                            case '2': //不进行校验\r\n                                resolve(true);\r\n                                return;\r\n                        }\r\n                    },\r\n                    error: res => {\r\n                        console.log('后端报错', res);\r\n                    },\r\n                });\r\n            });\r\n            if (!checkMode) {\r\n                /**\r\n           * 用户没有按钮权限的情况\r\n           * 终止代码执行\r\n           */\r\n                return;\r\n            }\r\n        }\r\n\r\n        //二开按钮点击前回调--liuxis\r\n        if (getCheckedExtendMethod(_this, 'beforeBtnClick')(buttonInfo.key, { output: _this.output }) === false) {\r\n            return false;\r\n        }\r\n\r\n        // 如果點擊事件后  當前按鈕重繪或者移除  會導致焦點丟失到其他位置  在面板内的按鈕觸發就會不連貫\r\n        let focusedDom;\r\n        if (modalRelation) {\r\n            // 焦點回執\r\n            let modalDom = document.querySelector(`.${modalRelation}`);\r\n            focusedDom = modalDom.querySelector('.u-modal-body') || modalDom.querySelector('.u-modal-content');\r\n        }\r\n\r\n        modalRelation && focusedDom && focusedDom.focus();\r\n\r\n        notInterruptCode.includes(buttonInfo.key)\r\n            ? onClick(buttonInfo.key)\r\n            : triggerOnClickWithBlurAction({\r\n                callBack: onClick,\r\n                buttonInfo,\r\n                params: this,\r\n                withAutoFocus,\r\n            });\r\n\r\n        setTimeout(() => {\r\n            modalRelation && focusedDom && focusedDom.focus();\r\n        }, 300);\r\n\r\n        //二开按钮点击后回调\r\n        getCheckedExtendMethod(_this, 'afterBtnClick')(buttonInfo.key, { output: _this.output });\r\n    };\r\n\r\n    // 快捷键操作与  按钮操作分离 便于管理\r\n    keyboardHandle = async (buttonInfo, hotkey) => {\r\n        // 多语\r\n        const { lang } = this.state;\r\n        let { _this, _this: { billinfo = {} }, modalRelation, onClick, notInterruptCode, withAutoFocus } = this.props;\r\n        const { key: currentKey, item } = buttonInfo;\r\n        this.getCurrentBtnIsKeyFunc({ items: [item], currentKey });\r\n        let iskeyfunc = this.iskeyfuncFlag\r\n        console.log('ca认证', iskeyfunc)\r\n        /**\r\n       * 关键功能定义\r\n       * 当模版上设置了按钮权限字段iskeyfunc为true后才走关键功能定义逻辑\r\n       * 对按钮的权限进行校验\r\n       */\r\n        if (iskeyfunc) {\r\n            this.iskeyfuncFlag = null //标志还原\r\n            /**\r\n            * 按钮权限校验\r\n            * 根据应用编码和按钮编码返回该按钮在关键功能定义中的认证类型\r\n            * 需要的参数为应用编码和按钮编码，分别为：appcode,appbtncode\r\n            */\r\n            /**\r\n         * 获取应用编码\r\n        */\r\n            const appcode = billinfo.appcode || pageTo.getAppCode();\r\n            /**\r\n         * 获取用户编码\r\n         */\r\n            const { userCode } = JSON.parse(getGlobalStorage('localStorage', 'STOREFORINFODATA'));\r\n            const checkMode = await new Promise(resolve => {\r\n                ajax({\r\n                    url: '/nccloud/baseapp/ncckeyfunc/authentype.do',\r\n                    loading: false,\r\n                    data: {\r\n                        // 应用编码\r\n                        appcode,\r\n                        // 按钮编码,就是key\r\n                        appbtncode: currentKey,\r\n                    },\r\n                    success: res => {\r\n                        const { data } = res;\r\n                        switch (data) {\r\n                            case '0': //用户密码校验\r\n                                promptBox({\r\n                                    color: 'info',\r\n                                    hotKeyboard: true,\r\n                                    // 关键功能验证\r\n                                    title: lang['page-button-0014'],\r\n                                    content: <SignIn ref={self => this.signInSelf = self} lang={lang} resolve={resolve} />,\r\n                                    noFooter: false,\r\n                                    noCancelBtn: false,\r\n                                    // 确定\r\n                                    beSureBtnName: lang['page-button-0008'],\r\n                                    // 取消\r\n                                    cancelBtnName: lang['page-button-0009'],\r\n                                    beSureBtnClick: () => {\r\n                                        // 进行登录校验\r\n                                        const { handleSignIn, state: { passWord } } = this.signInSelf;\r\n                                        handleSignIn(userCode, passWord);\r\n                                    },\r\n                                    cancelBtnClick: () => {\r\n                                        console.log('Cancel');\r\n                                    },\r\n                                });\r\n                                return;\r\n                            case '1':/**强制ca校验 **/\r\n                                if (isFunction(window.superSign)) {\r\n                                    const { status, msg } = window.superSign(String(getSafeRandom() * 1000 + getSafeRandom()), userCode, true, true);\r\n                                    switch (status) {\r\n                                        // 返回0表示通过\r\n                                        case 0:\r\n                                            resolve(true);\r\n                                            break;\r\n                                        // 返回1 表示不通过\r\n                                        case 1:\r\n                                            toast({\r\n                                                content: '',\r\n                                                color: 'danger',\r\n                                                groupOperation: true,\r\n                                                isNode: true,\r\n                                                // '展开', '收起', '关闭'\r\n                                                TextArr: [lang['page-button-0010'], lang['page-button-0011'], lang['page-button-0012']],\r\n                                                // ca检验不成功的提示信息\r\n                                                groupOperationMsg: [msg],\r\n                                            });\r\n                                            resolve(false);\r\n                                            break;\r\n                                    }\r\n                                }\r\n                                return;\r\n                            case '2': //不进行校验\r\n                                resolve(true);\r\n                                return;\r\n                        }\r\n                    },\r\n                    error: res => {\r\n                        console.log('后端报错', res);\r\n                    },\r\n                });\r\n            });\r\n            if (!checkMode) {\r\n                /**\r\n           * 用户没有按钮权限的情况\r\n           * 终止代码执行\r\n           */\r\n                return;\r\n            }\r\n        }\r\n        //二开按钮点击前回调--liuxis\r\n        if (getCheckedExtendMethod(_this, 'beforeBtnClick')(buttonInfo.key, { output: _this.output }) === false) {\r\n            return false;\r\n        }\r\n        // 先去除一下hotkey 变量  主要是业务组自己添加了变量\r\n        ViewModel.btnHotKey = hotkey;\r\n\r\n        notInterruptCode.includes(buttonInfo.key)\r\n            ? onClick(buttonInfo.key)\r\n            : triggerOnClickWithBlurAction({\r\n                callBack: onClick,\r\n                buttonInfo,\r\n                params: this,\r\n                withAutoFocus,\r\n            });\r\n\r\n        ViewModel.btnHotKey = '';\r\n        //二开按钮点击后回调\r\n        getCheckedExtendMethod(_this, 'afterBtnClick')(buttonInfo.key, { output: _this.output });\r\n    };\r\n\r\n    /**\r\n     * 处理特殊按钮\r\n     */\r\n    handleSpecialBtn(item) {\r\n        if (!item || !isObj(item.uploadConfig)) {\r\n            return false;\r\n        }\r\n        let wrapper = findDOMNode(this);\r\n        if (!wrapper) {\r\n            return false;\r\n        }\r\n        // 如果有父级元素  就需要先展开父级  否则取不到dom\r\n        if (item.parentCode) {\r\n            // 弹窗容器位置\r\n            let popContainer = this.props.popContainer || document,\r\n                cls = replaceSpecialStr(`.nc-${item.area}-btn-${item.parentCode}-${item.key}`);\r\n            // 目标元素\r\n            let target = popContainer.querySelector(cls);\r\n            // 第一次的时候弹出下元素\r\n            let icon = wrapper.querySelector(\r\n                replaceSpecialStr(`.nc-${item.area}-${item.topParentCode || item.parentCode}-icon`),\r\n            );\r\n            icon && !target && icon.click();\r\n            // 调用目标元素的click事件\r\n            setTimeout(() => {\r\n                target = popContainer.querySelector(cls);\r\n                let uploadDom = target && target.parentElement.querySelector('input');\r\n                uploadDom && uploadDom.click();\r\n            }, 0);\r\n        } else {\r\n            let target = wrapper.querySelector(replaceSpecialStr(`.nc-${item.area}-btn-${item.key}`));\r\n            let uploadDom = target && target.parentElement.querySelector('input');\r\n            uploadDom && uploadDom.click();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 获取事件信息  bbqin\r\n     */\r\n    getKeyMapsAndHandlers = data => {\r\n        let keyMap = {},\r\n            handlers = {},\r\n            { hotKeysMap, hotKeysEnabled: enabled, modalRelation, _this: page, ignoreHotkeyCode = [] } = this.props;\r\n        // console.log(page);\r\n        // 用於去重\r\n        let keyboardMap = recurToKeyboardMap(data);\r\n        // console.log(keyboardMap);\r\n        // 树深度遍历\r\n\r\n        let process = (tree, parentVisible) => {\r\n            return tree.forEach(item => {\r\n                let info = hotKeysMap[item.key];\r\n\r\n                if (item.children) {\r\n                    process(item.children, item.visible !== false && parentVisible);\r\n                }\r\n\r\n                // 同组内注册两个相同快捷键的按钮 隐藏的 禁用的 就不绑定快捷键了\r\n                if (\r\n                    item.keyboard &&\r\n                    keyboardMap[firstToUpperCase(item.keyboard)] > 1 &&\r\n                    (item.visible === false || item.disabled === true || item.isenable === false || parentVisible === false)\r\n                ) {\r\n                    return false;\r\n                }\r\n                if (ignoreHotkeyCode.indexOf(item.key) !== -1) {\r\n                    // 忽略的 移除 keyboard\r\n                    delete item.keyboard;\r\n                }\r\n                if (ignoreHotkeyCode.indexOf(item.key) == -1 && (info || item.keyboard)) {\r\n                    let keyMapItem = item.keyboard || info.key;\r\n\r\n                    let multipleKeyboardKey = keyMapItem.split(',').length > 1;\r\n                    keyMap[item.key] = multipleKeyboardKey ? keyMapItem.split(',') : keyMapItem;\r\n\r\n                    // keyMap[item.key] = { sequence: keyMapItem, action: \"keypress\" }\r\n                    handlers[item.key] = () => {\r\n                        // 同组内多个按钮重复的问题处理  肩部和表体行\r\n                        let pageareacode = page && page.output && page.output.findFocusModuleId();\r\n\r\n                        // 针对多区域按钮相同的处理‘\r\n                        if (\r\n                            (pageareacode && item.pageareacode && pageareacode !== item.pageareacode) ||\r\n                            (item.pageareacode && pageareacode == null)\r\n                        ) {\r\n                            return false;\r\n                        }\r\n                        // 弹窗背景里的按钮禁用\r\n                        let disabledBgBtn =\r\n                            document.querySelector('.disabled-bg-btn') || top.document.querySelector('.disabled-bg-btn');\r\n                        if (disabledBgBtn && !modalRelation) {\r\n                            return false;\r\n                        }\r\n                        // 弹窗弹出中的按钮  判断当前弹窗是不是被聚焦了\r\n                        if (modalRelation) {\r\n                            let modal = document.querySelector(`.${modalRelation}`);\r\n                            let active = modal && modal.contains(document.activeElement) && modal !== document.activeElement;\r\n                            // 弹窗不存在  或者弹窗未激活\r\n                            if (!modal || !(modal.contains(document.activeElement) && active)) {\r\n                                return false;\r\n                            }\r\n                        }\r\n                        // 解决  如果click回调中是ajax多次调用的问题  方案是通过平台内的ajax都有mask处理\r\n                        // 上传按钮 以及按钮的显示隐藏特性\r\n                        if (\r\n                            !document.querySelector('.u-loading-backdrop.full-screen') &&\r\n                            !this.handleSpecialBtn(item) &&\r\n                            item.visible !== false &&\r\n                            item.disabled !== true &&\r\n                            item.isenable !== false &&\r\n                            parentVisible !== false\r\n                        ) {\r\n                            this.keyboardHandle(\r\n                                {\r\n                                    key: item.key,\r\n                                    title: item.title,\r\n                                    item,\r\n                                },\r\n                                keyMapItem,\r\n                            );\r\n                        }\r\n                        // TODO 可以考虑做 promise 的判断\r\n                    };\r\n                }\r\n                //\r\n\r\n            });\r\n        };\r\n        enabled && process(data, true);\r\n\r\n        return {\r\n            keyMap,\r\n            handlers,\r\n        };\r\n    };\r\n\r\n    /**\r\n     * 获取快捷键提示方式 样式\r\n     */\r\n    getTipKeybodard = item => {\r\n        let { tipKeybodard } = this.props;\r\n\r\n        if (tipKeybodard === 'underline' && item.keyboard && item.disabled !== true) {\r\n            // 现在只针对单键 以后可能会变成多键\r\n            let kbs = item.keyboard.split('+');\r\n            return [\r\n                item.title,\r\n                '(',\r\n                <span className=\"text-decoration-underline\">{kbs ? kbs[kbs.length - 1].toUpperCase() : item.keyboard}</span>,\r\n                ')',\r\n            ];\r\n        } else {\r\n            return item.title;\r\n        }\r\n    };\r\n\r\n    renderButtons = () => {\r\n        // pageareacode\r\n        // this=>ButtonApp 组件\r\n        let { area, _this, hotKeysEnabled, tipKeybodard } = this.props;\r\n        let { lang } = this.state;\r\n        let allButtons = _this.myState.buttons || [];\r\n        let json = [];\r\n        for (let item of allButtons) {\r\n            if (item.area) {\r\n                let arr = item.area.split(',');\r\n                arr.map(elem => {\r\n                    elem = elem.trim();\r\n                    if (elem === area) {\r\n                        json.push(item);\r\n                    }\r\n                    return elem;\r\n                });\r\n            }\r\n        }\r\n        json.sort((a, b) => {\r\n            return Number(a.order) - Number(b.order);\r\n        });\r\n        _this.myState.appButtons[area] = json;\r\n        // 获取hotkeys  bbqin\r\n        let keyHandlers = this.getKeyMapsAndHandlers(json, area);\r\n        return (\r\n            <span className={`button-app-wrapper ${area ? area + '-button-app-wrapper' : ''}`}>\r\n                <HotKeys\r\n                    display=\"inline-block\"\r\n                    keyMap={keyHandlers.keyMap}\r\n                    handlers={keyHandlers.handlers}\r\n                    enabled={hotKeysEnabled}\r\n                    focused={true}\r\n                >\r\n                    {json.map(item => {\r\n                        if (item.visible !== false) {\r\n                            switch (item.type) {\r\n                                // 因为需求 type将主要次要按钮分离出去 用btncolor表示 之前的单个按钮按general_btn表示\r\n                                // case \"button_main\":\r\n                                case 'general_btn':\r\n                                    let Btn = (\r\n                                        <HelperTip\r\n                                            title={item.title}\r\n                                            keyboard={item.keyboard}\r\n                                            disabled={item.disabled}\r\n                                            delayShow={500}\r\n                                        >\r\n                                            <Button\r\n                                                disabled={item.disabled}\r\n                                                className={item.btncolor == 'button_main' ? 'button-primary' : ''}\r\n                                                onClick={() => this.onClick({\r\n                                                    key: item.key,\r\n                                                    title: item.title,\r\n                                                    item,\r\n                                                })\r\n                                                }\r\n                                                tabindex={this.props.tabindex}\r\n                                                fieldid={item.key}\r\n                                                btn-code={item.key}\r\n                                            >\r\n                                                {this.getTipKeybodard(item)}\r\n                                            </Button>\r\n                                        </HelperTip>\r\n                                    );\r\n                                    let RefshBtn = (\r\n                                        <HelperTip\r\n                                            title={item.title}\r\n                                            keyboard={item.keyboard}\r\n                                            delayShow={500}\r\n                                        >\r\n                                            <Button\r\n                                                disabled={item.disabled}\r\n                                                className={\r\n                                                    item.btncolor == 'button_main' ? 'button-primary refresh-component' : 'refresh-component'\r\n                                                }\r\n                                                onClick={() => this.onClick({\r\n                                                    key: item.key,\r\n                                                    title: item.title,\r\n                                                    item,\r\n                                                })\r\n                                                }\r\n                                                tabindex={this.props.tabindex}\r\n                                                fieldid={item.key}\r\n                                                btn-code={item.key}\r\n                                            >\r\n                                                <i className=\"iconfont icon-shuaxin1\" />\r\n                                            </Button>\r\n                                        </HelperTip>\r\n                                    );\r\n                                    // 没有title渲染成刷新按钮,有uploadConfig给按钮增加上传功能,没有uploadConfig渲染普通按钮\r\n                                    return (!item.title && !item.parentCode) ? (\r\n                                        RefshBtn\r\n                                    ) : isObj(item.uploadConfig) && !item.disabled ? (\r\n                                        <Upload showUploadList={false} {...item.uploadConfig}>\r\n                                            <HelperTip\r\n                                                title={item.title}\r\n                                                keyboard={item.keyboard}\r\n                                                delayShow={500}\r\n                                            >\r\n                                                <Button\r\n                                                    disabled={item.disabled}\r\n                                                    className={classNames(replaceSpecialStr(` nc-${item.area}-btn-${item.key} `), {\r\n                                                        'button-primary upload-btn-wrapper': item.btncolor == 'button_main',\r\n                                                        'upload-btn-wrapper': item.btncolor != 'button_main',\r\n                                                    })}\r\n                                                    onClick={() => this.onClick({\r\n                                                        key: item.key,\r\n                                                        title: item.title,\r\n                                                        item,\r\n                                                    })\r\n                                                    }\r\n                                                    tabindex={this.props.tabindex}\r\n                                                    fieldid={item.key}\r\n                                                    btn-code={item.key}\r\n                                                >\r\n                                                    {item.title}\r\n                                                    {item.docAmount ? `(${item.docAmount})` : ''}\r\n                                                </Button>\r\n                                            </HelperTip>\r\n                                        </Upload>\r\n                                    ) : (!item.title && item.parentCode) ? '' : (Btn);\r\n                                case 'dropdown':\r\n                                    return (\r\n                                        <MyDropdown\r\n                                            list={item.children}\r\n                                            title={item.title}\r\n                                            disabled={item.disabled}\r\n                                            btncolor={item.btncolor}\r\n                                            area={area}\r\n                                            dropdownType={item.dropdownType}\r\n                                            popContainer={this.props.popContainer}\r\n                                            keyboard={item.keyboard}\r\n                                            clskey={item.key}\r\n                                            onClick={buttonInfo => this.onClick({ ...buttonInfo, item })}\r\n                                            tabindex={this.props.tabindex}\r\n                                            className={`${area}-${item.key}-panel fieldid_${item.key}_btn_list`}\r\n                                            delayShow={500}\r\n                                        />\r\n                                    );\r\n                                case 'buttongroup':\r\n                                    return (\r\n                                        <MyButtonGroup\r\n                                            fieldid={item.key}\r\n                                            btn-code={item.key}\r\n                                            list={item.children}\r\n                                            area={area}\r\n                                            _this={_this}\r\n                                            disabled={item.disabled}\r\n                                            visible={item.visible !== false}\r\n                                            buttonLimit={this.props.buttonLimit}\r\n                                            popContainer={this.props.popContainer}\r\n                                            tipKeybodard={tipKeybodard}\r\n                                            clskey={item.key}\r\n                                            onClick={buttonInfo => this.onClick({ ...buttonInfo, item })}\r\n                                            tabindex={this.props.tabindex}\r\n                                        />\r\n                                    );\r\n                                case 'divider':\r\n                                    return (\r\n                                        <MyDividerButton\r\n                                            list={item.children}\r\n                                            dividerType={item.dividerType}\r\n                                            _key={item.key}\r\n                                            area={area}\r\n                                            btncolor={item.btncolor}\r\n                                            isenable={item.isenable} // 分割按钮的权限要特殊处理\r\n                                            title={item.title}\r\n                                            onClick={buttonInfo => this.onClick({ ...buttonInfo, item })}\r\n                                            disabled={item.disabled}\r\n                                            uploadConfig={item.uploadConfig}\r\n                                            popContainer={this.props.popContainer}\r\n                                            tabindex={this.props.tabindex}\r\n                                            keyboard={item.keyboard}\r\n                                        />\r\n                                    );\r\n                                case 'more':\r\n                                    //子级按钮没有，则不限显示父级\r\n                                    let moreBtnlist = item.children\r\n                                    let renderMoreBtn = []\r\n                                    moreBtnlist.map(item => {\r\n                                        if (item.children && item.children.length) {\r\n                                            renderMoreBtn.push(item)\r\n                                        }\r\n                                    })\r\n                                    //所有子级按钮没有则不显示更多按钮\r\n                                    if (!renderMoreBtn.length) {\r\n                                        return null\r\n                                    }\r\n                                    return (\r\n                                        <More\r\n                                            list={renderMoreBtn}\r\n                                            title={item.title}\r\n                                            json={lang}\r\n                                            btncolor={item.btncolor}\r\n                                            disabled={item.disabled}\r\n                                            popContainer={this.props.popContainer}\r\n                                            onClick={buttonInfo => this.onClick({ ...buttonInfo, item })}\r\n                                            className=\"moreButton-component\"\r\n                                            tabindex={this.props.tabindex}\r\n                                            clskey={item.key}\r\n                                            area={item.area}\r\n                                        />\r\n                                    );\r\n                                default:\r\n                                    return (\r\n                                        <HelperTip\r\n                                            title={item.title}\r\n                                            keyboard={item.keyboard}\r\n                                            delayShow={500}\r\n                                        >\r\n                                            <Button\r\n                                                btncolor={item.btncolor}\r\n                                                disabled={item.disabled}\r\n                                                onClick={() => this.onClick({\r\n                                                    key: item.key,\r\n                                                    title: item.title,\r\n                                                    item,\r\n                                                })\r\n                                                }\r\n                                                tabindex={this.props.tabindex}\r\n                                                fieldid={item.key}\r\n                                                btn-code={item.key}\r\n                                            >\r\n                                                {item.title}\r\n                                            </Button>\r\n                                        </HelperTip>\r\n                                    );\r\n                            }\r\n                        }\r\n                    })}\r\n                </HotKeys>\r\n            </span>\r\n        );\r\n    };\r\n\r\n    render() {\r\n        return this.renderButtons();\r\n    }\r\n}\r\n\r\nfunction uuidv4() {\r\n    return 'xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n        var r = (getSafeRandom() * 16) | 0,\r\n            v = c == 'x' ? r : (r & 0x3) | 0x8;\r\n        return v.toString(16);\r\n    });\r\n}\r\n\r\nclass OprationButton extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            visible: false,\r\n            index: 0,\r\n            lang: {},\r\n            intl: null,\r\n            json: [],\r\n        };\r\n        this.bindWebsocket = false;\r\n        this.uuid = uuidv4();\r\n    }\r\n\r\n    UNSAFE_componentWillMount() {\r\n        let { oprationIndex, _this, area } = this.props;\r\n        let buttonsLangJson = _this.myState.buttonsLangJson;\r\n        // 记录列表页面的组件\r\n        _this.myState.buttonsComponent[area] = _this.myState.buttonsComponent[area] || {};\r\n        _this.myState.buttonsComponent[area]._isOperateButton = true;\r\n        _this.myState.buttonsComponent[area][this.uuid] = this;\r\n\r\n        _this.myState.oprationIndexCopy = oprationIndex;\r\n        if (buttonsLangJson.lang) {\r\n            this.setState({\r\n                json: this.props.json || [],\r\n                index: oprationIndex,\r\n                lang: buttonsLangJson.lang,\r\n                intl: buttonsLangJson.intl,\r\n            });\r\n        } else {\r\n            let callback = (lang, bool, intl) => {\r\n                _this.myState.buttonsLangJson = {\r\n                    lang,\r\n                    intl,\r\n                };\r\n\r\n                this.setState({\r\n                    json: this.props.json || [],\r\n                    index: oprationIndex,\r\n                    lang,\r\n                    intl,\r\n                });\r\n            };\r\n\r\n            getMultiLang({ moduleId: 'page-button', callback });\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        let { _this, area } = this.props;\r\n        if (_this.myState.buttonsComponent[area] && _this.myState.buttonsComponent[area][this.uuid]) {\r\n            delete _this.myState.buttonsComponent[area][this.uuid];\r\n        }\r\n    }\r\n\r\n    UNSAFE_componentWillReceiveProps(nextProps) {\r\n        // let { _this } = nextProps;\r\n        // console.log(_this)\r\n        this.setState(\r\n            { json: nextProps.json || [] },\r\n            () => {\r\n                // _this.forceUpdate()\r\n            },\r\n        );\r\n    }\r\n\r\n    onVisibleChange = () => {\r\n        // let { _this } = this.props;\r\n        // _this.myState.oprationBtnListVisible = !this.state.visible\r\n        this.setState({ visible: !this.state.visible });\r\n    };\r\n\r\n    popContentItem = item => {\r\n        let { onClick } = this.props;\r\n        let popContent = (\r\n            <span>\r\n                <span className=\"iconfont icon-tixing\" /> &nbsp;\r\n                {item.popContent}\r\n            </span>\r\n        );\r\n        return (\r\n            <Popconfirm\r\n                trigger=\"click\"\r\n                placement=\"top\"\r\n                content={popContent}\r\n                onClose={() => {\r\n                    onClick(item.key);\r\n                    this.setState({ visible: false });\r\n                }}\r\n                onCancel={() => {\r\n                    this.setState({ visible: false });\r\n                }}\r\n                rootClose={true}\r\n            >\r\n                {/*<a className={`${list === 'list'?'u-menu-item-title-wrapper': ''}`}*/}\r\n                <a\r\n                    className={'u-menu-item-title-wrapper row-btn-' + replaceSpecialStr(item.key)}\r\n                    // className=\"row-edit-option\"\r\n                    onClick={e => {\r\n                        e.stopPropagation();\r\n                    }}\r\n                    key={item.key}\r\n                    fieldid={getSysFieldid(`${item.key}_btn`)}\r\n                    btn-code={item.key}\r\n                >\r\n                    {item.title}\r\n                    {/* {index < json.length - 1 && <span className=\"split-line\">|</span>} */}\r\n                </a>\r\n            </Popconfirm>\r\n        );\r\n    };\r\n\r\n    popContentItem1 = (item, list) => {\r\n        return item.popContent ? (\r\n            this.popContentItem(item, list)\r\n        ) : (<span\r\n            className=\"u-menu-item-title-wrapper\"\r\n            btn-code={item.key}\r\n            onClick={e => {\r\n                this.onClick({ key: item.key, e, item });\r\n                this.setState({ visible: false });\r\n            }}\r\n        //fieldid={`${item.key}_btn`}\r\n        >\r\n            {item.title}\r\n        </span>);\r\n    };\r\n\r\n    renderMenu = list => {\r\n        return (\r\n            <Menu>\r\n                {list.map(item => (\r\n                    <Item key={item.key} disabled={item.disabled}>\r\n                        {item.uploadConfig ? (\r\n                            <span\r\n                                onClick={e => {\r\n                                    e.stopPropagation();\r\n                                }}\r\n                            >\r\n                                <Upload showUploadList={false} {...item.uploadConfig}>\r\n                                    {item.title}\r\n                                </Upload>\r\n                            </span>\r\n                        ) : (this.popContentItem1(item, 'list'))}\r\n                    </Item>\r\n                ))}\r\n            </Menu>\r\n        );\r\n    };\r\n\r\n    renderMoreList = (list, rowIndex) => {\r\n        let { popContainer } = this.props;\r\n        let { lang } = this.state;\r\n        if (list.length) {\r\n            return (\r\n                <Dropdown\r\n                    trigger={['click']}\r\n                    visible={this.state.visible}\r\n                    onVisibleChange={this.onVisibleChange}\r\n                    overlay={(\r\n                        <Menu>\r\n                            {list.map(item => (\r\n                                <Item\r\n                                    fieldid={item.key}\r\n                                    btn-code={item.key}\r\n                                    className={'opration-more-list-item-wrapper row-btn-' + replaceSpecialStr(item.key)}\r\n                                    key={item.key}\r\n                                >\r\n                                    {item.uploadConfig ? (\r\n                                        <span\r\n                                            btn-code={item.key}\r\n                                            onClick={e => {\r\n                                                e.stopPropagation();\r\n                                            }}\r\n                                            className={`${OPERATION_UPLOAD_CLASSNAME}-${rowIndex}`}\r\n                                        >\r\n                                            <Upload showUploadList={false} {...item.uploadConfig}>\r\n                                                {item.title}\r\n                                            </Upload>\r\n                                        </span>\r\n                                    ) : (this.popContentItem1(item, 'list'))}\r\n                                </Item>\r\n                            ))}\r\n                        </Menu>\r\n                    )}\r\n                    animation=\"slide-up\"\r\n                    overlayClassName=\"dropdown-component-list fieldid_more_btn_list\"\r\n                    getPopupContainer={() => popContainer || document.body}\r\n                >\r\n                    <a\r\n                        fieldid={getSysFieldid('more_btn')}\r\n                        className={\r\n                            'row-more ' +\r\n                            list.reduce((accumulator, curent) => {\r\n                                accumulator = accumulator + ' row-btn-' + replaceSpecialStr(curent.key);\r\n                                return accumulator;\r\n                            }, '')\r\n                        }\r\n                        onClick={this.onVisibleChange}\r\n                    >\r\n                        {lang['page-button-0002'] || '更多'}\r\n                        {/*{this.state.visible ? (\r\n                            <i className=\"iconfont icon-hangcaozuoxiangshang1\" />\r\n                        ) : (\r\n                            <i className=\"iconfont icon-hangcaozuoxiala1\" />\r\n                        )}// 王安静让将该图标删除*/}\r\n                    </a>\r\n                </Dropdown>\r\n            );\r\n        } else {\r\n            return '';\r\n        }\r\n    };\r\n\r\n    // 外语情况下，渲染的操作列按钮\r\n    renderLanglist = (list, rowIndex) => {\r\n        let { popContainer } = this.props;\r\n        if (list.length) {\r\n            return (\r\n                <Tooltip\r\n                    trigger=\"click\"\r\n                    placement=\"leftTop\"\r\n                    visible={this.state.visible}\r\n                    rootClose={true}\r\n                    className=\"dropdown-component-list fieldid_more_btn_list opration-tooltip-button\"\r\n                    container={() => popContainer || document.body}\r\n                    overlay={(\r\n                        <ul>\r\n                            {list.map(item => (\r\n                                <li\r\n                                    fieldid={getSysFieldid(item.key)}\r\n                                    btn-code={item.key}\r\n                                    className={'opration-more-list-item-wrapper row-btn-' + replaceSpecialStr(item.key)}\r\n                                    key={item.key}\r\n                                >\r\n                                    {item.uploadConfig ? (\r\n                                        <span\r\n                                            btn-code={item.key}\r\n                                            onClick={e => {\r\n                                                e.stopPropagation();\r\n                                            }}\r\n                                            className={`${OPERATION_UPLOAD_CLASSNAME}-${rowIndex}`}\r\n                                        >\r\n                                            <Upload showUploadList={false} {...item.uploadConfig}>\r\n                                                {item.title}\r\n                                            </Upload>\r\n                                        </span>\r\n                                    ) : (this.popContentItem1(item, 'list'))}\r\n                                </li>\r\n                            ))}\r\n                        </ul>\r\n                    )}\r\n                //   animation=\"slide-up\"\r\n                //   overlayClassName=\"dropdown-component-list fieldid_more_btn_list\"\r\n                //   getPopupContainer={() => popContainer || document.body}\r\n                >\r\n                    <a\r\n                        fieldid={getSysFieldid('more_btn')}\r\n                        className={\r\n                            'row-more ' +\r\n                            list.reduce((accumulator, curent) => {\r\n                                accumulator = accumulator + ' row-btn-' + replaceSpecialStr(curent.key);\r\n                                return accumulator;\r\n                            }, '') +\r\n                            ' icon-gengduo1 iconfont'\r\n                        }\r\n                        onClick={this.onVisibleChange}\r\n                    >\r\n                        {/* {} */}\r\n                    </a>\r\n                </Tooltip>\r\n            );\r\n        } else {\r\n            return '';\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 获取快捷键的触发条件 bbqin\r\n     * 这里对每个事件做判断 其实是不太合适的  因为每个事件都会执行这个逻辑  占用的内存还是很大的\r\n     * TODO 限定事件的触发区域（哎 估计不太可能实现了）\r\n     */\r\n    getHotkeyTriggerFlag = key => {\r\n        // console.time(\"getHotkeyTriggerFlag\");\r\n        let selectedRow = null;\r\n        // 获取当前按钮的组容器\r\n        let wrapper = findDOMNode(this);\r\n        if (!wrapper) {\r\n            return false;\r\n        }\r\n        // ajax请求中  存在的dom\r\n        let loading = document.querySelector('.u-loading-backdrop.full-screen');\r\n        if (loading) {\r\n            return false;\r\n        }\r\n        // 获取指定目标的按钮\r\n        let target = wrapper.querySelector('.row-btn-' + replaceSpecialStr(key));\r\n        if (!target) {\r\n            return false;\r\n        }\r\n        // 获取当前的固定列\r\n        let parentContainer = Closest(wrapper, '.u-table-fixed-right');\r\n        // 选中行的selector选择器\r\n        let selector = '.tree-table-col-selected,.table-row-selected,.editTable-selected-row,.cardTable-selected-row,.simpleTable-selected-row,.nctable-selected-row';\r\n        // 判断是否带有固定列的情况\r\n        if (parentContainer) {\r\n            // 获取目标选中行\r\n            selectedRow = parentContainer.querySelector(selector);\r\n        } else {\r\n            let isFixed = Closest(target, '.u-table-row-fixed-columns-in-body');\r\n            // 获取当前选中行\r\n            if (!isFixed) {\r\n                selectedRow = Closest(wrapper, selector);\r\n            }\r\n        }\r\n\r\n        if (!selectedRow) {\r\n            return false;\r\n        }\r\n        // 目标按钮是否是可见的  这句可能判断不出来显示和隐藏\r\n        let targetVisble = getComputedStyle(target).visibility !== 'hidden';\r\n        // 目标可见  并且是当前选中行\r\n        let flag = selectedRow.contains(target) && targetVisble;\r\n        // console.timeEnd(\"getHotkeyTriggerFlag\");\r\n        return flag ? target : false;\r\n    };\r\n\r\n    /**\r\n     * 获取keyMaps  bbqin\r\n     */\r\n    getKeyMapsAndHandlers = ({ data, rowIndex }) => {\r\n        let keyMap = {},\r\n            handlers = {},\r\n            { hotKeysMap, hotKeysEnabled: enabled, modalRelation, onClick, _this: page, ignoreHotkeyCode = [], notInterruptCode, withAutoFocus } = this.props;\r\n\r\n        // 树深度遍历\r\n        let process = tree => {\r\n            return tree.forEach(item => {\r\n                let info = hotKeysMap[item.key];\r\n                if (\r\n                    ignoreHotkeyCode.indexOf(item.key) == -1 &&\r\n                    (info || item.keyboard)\r\n                    // &&\r\n                    // item.visible !== false &&\r\n                    // item.disabled !== true &&\r\n                    // item.isenable !== false\r\n                ) {\r\n                    let keyMapItem = item.keyboard || info.key;\r\n\r\n                    let multipleKeyboardKey = keyMapItem.split(',').length > 1;\r\n                    keyMap[item.key] = multipleKeyboardKey ? keyMapItem.split(',') : keyMapItem;\r\n\r\n                    handlers[item.key] = e => {\r\n                        let target = this.getHotkeyTriggerFlag(item.key);\r\n                        // 针对多区域按钮相同的处理‘\r\n                        let pageareacode = page && page.output && page.output.findFocusModuleId();\r\n                        if (\r\n                            (pageareacode && item.pageareacode && pageareacode !== item.pageareacode) ||\r\n                            (item.pageareacode && pageareacode == null)\r\n                        ) {\r\n                            return false;\r\n                        }\r\n                        // 弹窗背景里的按钮禁用\r\n                        let disabledBgBtn =\r\n                            document.querySelector('.disabled-bg-btn') || top.document.querySelector('.disabled-bg-btn');\r\n                        if (disabledBgBtn && !modalRelation) {\r\n                            return false;\r\n                        }\r\n                        // 弹窗里弹出的情况 判断\r\n                        if (modalRelation) {\r\n                            let modal = document.querySelector(`.${modalRelation}`);\r\n                            let active = modal && modal.contains(document.activeElement) && modal !== document.activeElement;\r\n                            // 弹窗不存在  或者弹窗未激活\r\n                            if (!modal || !(modal.contains(document.activeElement) && active)) {\r\n                                return false;\r\n                            }\r\n                        }\r\n                        if (\r\n                            target &&\r\n                            item.visible !== false\r\n                            // &&\r\n                            // item.disabled !== true &&\r\n                            // item.isenable !== false\r\n                        ) {\r\n                            if (item.popContent) {\r\n                                // 有弹窗的情况\r\n                                target.click();\r\n                            } else if (target.className.includes('row-more')) {\r\n                                if (item.uploadConfig) {\r\n                                    let uniqueClassName = `${OPERATION_UPLOAD_CLASSNAME}-${rowIndex}`;\r\n                                    let uploadDom = document.querySelector(`.${uniqueClassName} input`);\r\n                                    if (uploadDom) {\r\n                                        uploadDom && uploadDom.click();\r\n                                    } else {\r\n                                        target.click();\r\n                                        setTimeout(() => {\r\n                                            uploadDom = document.querySelector(`.${uniqueClassName} input`);\r\n                                            uploadDom && uploadDom.click();\r\n                                            target.click();\r\n                                        });\r\n                                    }\r\n                                }\r\n\r\n                                notInterruptCode.includes(item.key)\r\n                                    ? onClick(item.key, e, keyMapItem)\r\n                                    : triggerOnClickWithBlurAction({\r\n                                        callBack: onClick,\r\n                                        buttonInfo: item,\r\n                                        e,\r\n                                        keyMapItem,\r\n                                        withAutoFocus,\r\n                                    });\r\n                            } else {\r\n                                notInterruptCode.includes(item.key)\r\n                                    ? onClick(item.key, e, keyMapItem)\r\n                                    : triggerOnClickWithBlurAction({\r\n                                        callBack: onClick,\r\n                                        buttonInfo: item,\r\n                                        e,\r\n                                        keyMapItem,\r\n                                        withAutoFocus,\r\n                                    });\r\n                            }\r\n                        }\r\n                    };\r\n                }\r\n                if (item.children) {\r\n                    process(item.children);\r\n                }\r\n            });\r\n        };\r\n        enabled && process(data);\r\n        return {\r\n            keyMap,\r\n            handlers,\r\n        };\r\n    };\r\n\r\n    onClick = async buttonInfo => {\r\n        const { lang } = this.state;\r\n        let { _this: { billinfo = {} }, onClick } = this.props;\r\n        const { key: currentKey, e, item = {} } = buttonInfo;\r\n        if (item.iskeyfunc) {\r\n            /**\r\n            * 按钮权限校验\r\n            * 根据应用编码和按钮编码返回该按钮在关键功能定义中的认证类型\r\n            * 需要的参数为应用编码和按钮编码，分别为：appcode,appbtncode\r\n            */\r\n            /**\r\n         * 获取应用编码\r\n        */\r\n            const appcode = billinfo.appcode || pageTo.getAppCode();\r\n            /**\r\n         * 获取用户编码\r\n         */\r\n            const { userCode } = JSON.parse(getGlobalStorage('localStorage', 'STOREFORINFODATA'));\r\n            const checkMode = await new Promise(resolve => {\r\n                ajax({\r\n                    url: '/nccloud/baseapp/ncckeyfunc/authentype.do',\r\n                    loading: false,\r\n                    data: {\r\n                        // 应用编码\r\n                        appcode,\r\n                        // 按钮编码,就是key\r\n                        appbtncode: currentKey,\r\n                    },\r\n                    success: res => {\r\n                        const { data } = res;\r\n                        switch (data) {\r\n                            case '0': /** 用户密码校验 */\r\n                                promptBox({\r\n                                    color: 'info',\r\n                                    hotKeyboard: true,\r\n                                    // 关键功能验证\r\n                                    title: lang['page-button-0014'],\r\n                                    content: <SignIn ref={self => this.signInSelf = self} lang={lang} resolve={resolve} />,\r\n                                    noFooter: false,\r\n                                    noCancelBtn: false,\r\n                                    // 确定\r\n                                    beSureBtnName: lang['page-button-0008'],\r\n                                    // 取消\r\n                                    cancelBtnName: lang['page-button-0009'],\r\n                                    beSureBtnClick: () => {\r\n                                        // 进行登录校验\r\n                                        const { handleSignIn, state: { passWord } } = this.signInSelf;\r\n                                        handleSignIn(userCode, passWord);\r\n                                    },\r\n                                    cancelBtnClick: () => {\r\n                                        console.log('Cancel');\r\n                                    },\r\n                                });\r\n                                return;\r\n                            case '1': /**强制ca校验 **/\r\n                                if (isFunction(window.superSign)) {\r\n                                    const { status, msg } = window.superSign(String(getSafeRandom() * 1000 + getSafeRandom()), userCode, true, true);\r\n                                    switch (status) {\r\n                                        // 返回0表示通过\r\n                                        case 0:\r\n                                            resolve(true);\r\n                                            break;\r\n                                        // 返回1 表示不通过\r\n                                        case 1:\r\n                                            toast({\r\n                                                content: '',\r\n                                                color: 'danger',\r\n                                                groupOperation: true,\r\n                                                isNode: true,\r\n                                                // '展开', '收起', '关闭'\r\n                                                TextArr: [lang['page-button-0010'], lang['page-button-0011'], lang['page-button-0012']],\r\n                                                // ca检验不成功的提示信息\r\n                                                groupOperationMsg: [msg],\r\n                                            });\r\n                                            resolve(false);\r\n                                            break;\r\n                                    }\r\n                                }\r\n                                return;\r\n                            case '2'://不进行校验\r\n                                resolve(true);\r\n                                return;\r\n                        }\r\n                    },\r\n                    error: res => {\r\n                        console.log('后端报错', res);\r\n                    },\r\n                });\r\n            });\r\n            if (!checkMode) {\r\n                /**\r\n           * 用户没有按钮权限的情况\r\n           * 终止代码执行\r\n           */\r\n                return;\r\n            }\r\n        }\r\n        onClick(currentKey, e)\r\n    }\r\n\r\n    render() {\r\n        let { buttonLimit, area, _this, wantedButtons = [], stopPropagation, hotKeysEnabled, rowIndex, templateOrder } = this.props;\r\n        let json = _this.myState.buttons || [];\r\n        let needRenderButtons = [];\r\n        let needCopyButtonsJson = [];\r\n        if (Array.isArray(wantedButtons)) {\r\n            for (let item of wantedButtons) {\r\n                for (let ite of json) {\r\n                    if (ite.visible === true || ite.hasOwnProperty('visible') === false) {\r\n                        if (ite.area.indexOf(',') !== -1) {\r\n                            let arr = ite.area.split(',');\r\n                            let areaArr = arr.map(i => i.trim());\r\n                            if (item === ite.key && areaArr.includes(area)) {\r\n                                needRenderButtons.push({\r\n                                    ...ite,\r\n                                    isOprationBtn: true,\r\n                                });\r\n                            }\r\n                        } else {\r\n                            if (item === ite.key && ite.area === area) {\r\n                                needRenderButtons.push({\r\n                                    ...ite,\r\n                                    isOprationBtn: true,\r\n                                });\r\n                            }\r\n                        }\r\n                    }\r\n                    if (ite.area.indexOf(',') !== -1) {\r\n                        let arr = ite.area.split(',');\r\n                        let areaArr = arr.map(i => i.trim());\r\n                        if (item === ite.key && areaArr.includes(area)) {\r\n                            needCopyButtonsJson.push({\r\n                                ...ite,\r\n                                isOprationBtn: true,\r\n                            });\r\n                        }\r\n                    } else {\r\n                        if (item === ite.key && ite.area === area) {\r\n                            needCopyButtonsJson.push({\r\n                                ...ite,\r\n                                isOprationBtn: true,\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        needCopyButtonsJson.length && needCopyButtonsJson.sort((a, b) => {\r\n            return Number(a.order) - Number(b.order);\r\n        });\r\n        if (templateOrder) {\r\n            needRenderButtons.length && needRenderButtons.sort((a, b) => { //以前操作列按钮没有排序，注释掉，如果有人提顺序问题看NCC-40383\r\n                return Number(a.order) - Number(b.order);\r\n            });\r\n        }\r\n\r\n        _this.myState.oprationButtons[area] = needCopyButtonsJson;\r\n\r\n        let list = [];\r\n\r\n        let keyHandlers = needRenderButtons.length\r\n            ? this.getKeyMapsAndHandlers({ data: needRenderButtons, area, rowIndex })\r\n            : {};\r\n        let LangCode = getLangCode();\r\n        let showflag = LangCode === 'tradchn' || LangCode === 'simpchn';\r\n        // let showflag = false;\r\n        if (showflag) {\r\n            if (needRenderButtons.length && needRenderButtons.length > buttonLimit) {\r\n                list = needRenderButtons.slice(buttonLimit - 1, needRenderButtons.length);\r\n                needRenderButtons = needRenderButtons.slice(0, buttonLimit - 1);\r\n            }\r\n        } else {\r\n            list = needRenderButtons;\r\n        }\r\n        return needRenderButtons.length ? (\r\n            <span\r\n                className=\"opration-wrapper\"\r\n                onClick={e => {\r\n                    stopPropagation && e.stopPropagation();\r\n                }}\r\n            >\r\n                <HotKeys\r\n                    display=\"inline-block\"\r\n                    className=\"opration-btns-hotkey-wrapper\"\r\n                    keyMap={keyHandlers.keyMap}\r\n                    handlers={keyHandlers.handlers}\r\n                    enabled={hotKeysEnabled}\r\n                    focused={true}\r\n                >\r\n                    {showflag &&\r\n                        needRenderButtons.map(item => {\r\n                            if (item.popContent) {\r\n                                return this.popContentItem(item);\r\n                            } else {\r\n                                return (\r\n                                    // 不需要弹窗\r\n                                    <a\r\n                                        fieldid={getSysFieldid(`${item.key}_btn`)}\r\n                                        btn-code={item.key}\r\n                                        className={'row-edit-option row-btn-' + replaceSpecialStr(item.key)}\r\n                                        key={item.key}\r\n                                        onClick={e => this.onClick({ key: item.key, e, item })}\r\n                                    >\r\n                                        {item.title}\r\n                                    </a>\r\n                                );\r\n                            }\r\n                        })}\r\n                    {showflag ? this.renderMoreList(list, this.props.rowIndex) : this.renderLanglist(list, this.props.rowIndex)}\r\n                </HotKeys>\r\n            </span>\r\n        ) : (<span\r\n            className=\"opration-wrapper\"\r\n            onClick={e => {\r\n                stopPropagation && e.stopPropagation();\r\n            }}\r\n        />);\r\n    }\r\n}\r\n\r\nexport function createButtonApp(config = {}) {\r\n    // this=>Page 组件\r\n    let {\r\n        area,\r\n        onButtonClick,\r\n        buttonLimit,\r\n        popContainer,\r\n        tabindex = -1,\r\n        hotKeysMap = {},\r\n        hotKeysEnabled = true,\r\n        modalRelation,\r\n        ignoreHotkeyCode = [],\r\n        tipKeybodard = 'none',\r\n        notInterruptCode = [],\r\n        withAutoFocus = true,\r\n    } = config;\r\n\r\n    return (\r\n        <ButtonApp\r\n            // ref={`${area}ButtonAreaRefName`}\r\n            ref={dom => {\r\n                this.myState[`${area}ButtonAreaRefName`] = dom;\r\n            }}\r\n            _this={this}\r\n            // json={areaButtons}\r\n            area={area}\r\n            onClick={(id, hotkey) => {\r\n                onButtonClick({ ...this.props, ...this.output }, id, hotkey);\r\n            }}\r\n            key={area}\r\n            buttonLimit={buttonLimit}\r\n            popContainer={popContainer}\r\n            tabindex={tabindex}\r\n            hotKeysMap={hotKeysMap}\r\n            hotKeysEnabled={hotKeysEnabled}\r\n            modalRelation={modalRelation}\r\n            ignoreHotkeyCode={ignoreHotkeyCode}\r\n            tipKeybodard={tipKeybodard}\r\n            notInterruptCode={notInterruptCode}\r\n            withAutoFocus={withAutoFocus}\r\n        />\r\n    );\r\n}\r\n\r\nexport function createOprationButton(wantedButtons = [], config = {}) {\r\n    // this=>Page 组件\r\n    // 后台查回来的按钮和页面传过来的按钮数组进行交集，是页面最终显示的按钮\r\n    let {\r\n        area,\r\n        onButtonClick,\r\n        buttonLimit,\r\n        popContainer,\r\n        stopPropagation = true,\r\n        hotKeysMap = {},\r\n        hotKeysEnabled = true,\r\n        modalRelation,\r\n        ignoreHotkeyCode = [],\r\n        notInterruptCode = [],\r\n        withAutoFocus = true,\r\n        templateOrder = false, //按模板顺序显示按钮\r\n    } = config;\r\n\r\n    this.myState.oprationIndex += 1;\r\n    // let index = this.myState.oprationIndexCopy || 0;\r\n    buttonLimit = buttonLimit || 3;\r\n    return (\r\n        <OprationButton\r\n            ref={dom => {\r\n                // this.myState[`${area}${this.myState.oprationIndex}ButtonAreaRefName`] = dom;\r\n                // this.myState[`${area}${index}ButtonAreaRefName`] = dom;\r\n                this.myState[`${area}ButtonAreaRefName`] = dom;\r\n            }}\r\n            // json={finalButtons}\r\n            onClick={(id, e, hotkey) => {\r\n                onButtonClick({ ...this.props, ...this.output }, id, e, hotkey);\r\n            }}\r\n            _this={this}\r\n            area={area}\r\n            buttonLimit={buttonLimit}\r\n            stopPropagation={stopPropagation}\r\n            oprationIndex={this.myState.oprationIndex}\r\n            wantedButtons={wantedButtons}\r\n            popContainer={popContainer}\r\n            hotKeysMap={hotKeysMap}\r\n            hotKeysEnabled={hotKeysEnabled}\r\n            modalRelation={modalRelation}\r\n            ignoreHotkeyCode={ignoreHotkeyCode}\r\n            rowIndex={config.rowIndex}\r\n            notInterruptCode={notInterruptCode}\r\n            withAutoFocus={withAutoFocus}\r\n            templateOrder={templateOrder}\r\n        />\r\n    );\r\n}\r\n","export const CARD_ROW_SELECTED_CLASSNAME = 'cardTable-selected-row';\r\nexport const EDIT_ROW_SELECTED_CLASSNAME = 'editTable-selected-row';\r\nexport const SIMPLE_ROW_SELECTED_CLASSNAME = 'simpleTable-selected-row';\r\nexport const _ROW_SELECTED_CLASSNAME = 'nctable-selected-row';\r\nexport const OPERATION_UPLOAD_CLASSNAME = 'js-upload';\r\n","import { createButtonApp, createOprationButton } from './create';\r\nexport default { createButtonApp, createOprationButton };","import React, { Component } from 'react';\r\nimport { cacheTools, clearToast, ViewModel } from '@platform/api';\r\nimport { HotKeys, Tooltip } from '@platform/base';\r\nimport { getMultiLang } from '@platform/api';\r\n\r\nrequire('./index.less');\r\n\r\nexport default class CardPagination extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        //传出this\r\n        this.props.getThis(this);\r\n\r\n        this.pkname = 'id';\r\n        if (this.props.events && this.props.events.urlPkname) {\r\n            this.pkname = this.props.events.urlPkname;\r\n        }\r\n\r\n        //初始化state\r\n        this.state = {\r\n            allpks: this.getAllpks(true),\r\n            visible: true, //分页组件的显示隐藏\r\n            activeId: this.props.getUrlParam(this.pkname),\r\n            langJson: {},\r\n        };\r\n    }\r\n\r\n    UNSAFE_componentWillMount() {\r\n        let callback = langJson => {\r\n            this.setState({ langJson });\r\n        };\r\n        // moduleId为所需加载langJson文件夹名称前缀\r\n        getMultiLang({ moduleId: 'common_icon_title', callback });\r\n    }\r\n\r\n    getAllpks = init => {\r\n        let { events } = this.props;\r\n        let allpks = [];\r\n        if (events && events.dataSource) {\r\n            let cacheData = ViewModel.getData(events.dataSource);\r\n            if (\r\n                cacheData &&\r\n                cacheData.simpleTable &&\r\n                cacheData.simpleTable.allpks\r\n            ) {\r\n                allpks = cacheData.simpleTable.allpks;\r\n            }\r\n        } else {\r\n            //init时，在CacheTools中取，否则，在组件内部维护的state中获取\r\n            if (init) {\r\n                allpks = cacheTools.get('allpks');\r\n            } else {\r\n                allpks = this.state.allpks;\r\n            }\r\n        }\r\n        return Array.isArray(allpks) ? allpks : [];\r\n    };\r\n\r\n    //获取点击按钮的 id\r\n    getClickItemId = type => {\r\n        let { events } = this.props;\r\n        let { activeId } = this.state;\r\n        if (!activeId) {\r\n            if (events && events.dataSource) {\r\n                let cacheData = ViewModel.getData(events.dataSource);\r\n                if (cacheData && cacheData.currentId) {\r\n                    activeId = cacheData.currentId;\r\n                }\r\n            }\r\n        }\r\n\r\n        let allpks = this.getAllpks();\r\n        //删除的场景\r\n        if (!allpks.includes(activeId)) {\r\n            if (events && events.dataSource) {\r\n                let cacheData = ViewModel.getData(events.dataSource);\r\n                if (cacheData && cacheData.currentId) {\r\n                    activeId = cacheData.currentId;\r\n                }\r\n            }\r\n        }\r\n\r\n        let currentId = activeId;\r\n        if (Array.isArray(allpks) && allpks.length) {\r\n            let id;\r\n            let index;\r\n            switch (type) {\r\n                case 'firstItem':\r\n                    id = allpks[0];\r\n                    break;\r\n                case 'prevItem':\r\n                    index = allpks.indexOf(currentId);\r\n                    if (index != -1 && index > 0) {\r\n                        id = allpks[index - 1];\r\n                    }\r\n                    break;\r\n                case 'nextItem':\r\n                    index = allpks.indexOf(currentId);\r\n                    if (index != -1 && index < allpks.length - 1) {\r\n                        id = allpks[index + 1];\r\n                    }\r\n                    break;\r\n                case 'finalItem':\r\n                    id = allpks[allpks.length - 1];\r\n                    break;\r\n            }\r\n            if (id) {\r\n                this.setState({ activeId: id });\r\n            }\r\n            return id;\r\n        }\r\n    };\r\n\r\n    pageIndexChange = val => {\r\n        let { events, output, rootprops } = this.props;\r\n        if (events && events.handlePageInfoChange) {\r\n            // 清除特殊弹出提示 by bbqin\r\n            clearToast('socketErrorToast');\r\n            events.handlePageInfoChange(\r\n                { ...rootprops, ...output }, //其他\r\n                this.getClickItemId(val),\r\n            );\r\n        }\r\n    };\r\n\r\n    getBtnStatus = () => {\r\n        let { events } = this.props;\r\n        let { activeId } = this.state;\r\n        if (!activeId) {\r\n            if (events && events.dataSource) {\r\n                let cacheData = ViewModel.getData(events.dataSource);\r\n                if (cacheData && cacheData.currentId) {\r\n                    activeId = cacheData.currentId;\r\n                }\r\n            }\r\n        }\r\n        let allpks = this.getAllpks();\r\n        //删除的场景\r\n        if (!allpks.includes(activeId)) {\r\n            if (events && events.dataSource) {\r\n                let cacheData = ViewModel.getData(events.dataSource);\r\n                if (cacheData && cacheData.currentId) {\r\n                    activeId = cacheData.currentId;\r\n                }\r\n            }\r\n        }\r\n        let currentId = activeId;\r\n        //currentId存在时\r\n        let currentIndex, endDisabled, firstDisabled;\r\n        currentIndex = allpks.indexOf(currentId);\r\n        if (currentIndex == -1) {\r\n            //allpks里不存在currentId\r\n            endDisabled = true;\r\n            firstDisabled = true;\r\n        } else {\r\n            if (!allpks.length) {\r\n                //没有allpks\r\n                endDisabled = true;\r\n                firstDisabled = true;\r\n            } else if (allpks.length === 1) {\r\n                //只有一个pk\r\n                endDisabled = true;\r\n                firstDisabled = true;\r\n            } else {\r\n                //多个pk\r\n                if (currentIndex === 0) {\r\n                    //第一个\r\n                    endDisabled = false;\r\n                    firstDisabled = true;\r\n                } else if (currentIndex === allpks.length - 1) {\r\n                    endDisabled = true;\r\n                    firstDisabled = false;\r\n                } else {\r\n                    endDisabled = false;\r\n                    firstDisabled = false;\r\n                }\r\n            }\r\n        }\r\n        return {\r\n            isFirst: firstDisabled,\r\n            isEnd: endDisabled,\r\n        };\r\n    };\r\n\r\n    render() {\r\n        let { langJson } = this.state;\r\n        let { isFirst, isEnd } = this.getBtnStatus();\r\n        let { hotKeyboard = true, tooltips = [langJson['icon-page-first'], langJson[\"icon-page-prev\"], langJson[\"icon-page-next\"], langJson[\"icon-page-end\"]] } = this.props;\r\n        return (\r\n            <div\r\n                className={`${this.state.visible ? 'show' : 'hide'}  cardPagination-lightapp-component`}\r\n            >\r\n                {hotKeyboard && (\r\n                    <HotKeys\r\n                        keyMap={{\r\n                            endBtnHandler: HotKeys.USUAL_KEYS.CARDPAGE_END,\r\n                            upBtnHandler: HotKeys.USUAL_KEYS.CARDPAGE_UP,\r\n                            downBtnHandler:\r\n                                HotKeys.USUAL_KEYS.CARDPAGE_DOWN,\r\n                            homeBtnHandler:\r\n                                HotKeys.USUAL_KEYS.CARDPAGE_HOME,\r\n                        }}\r\n                        handlers={{\r\n                            endBtnHandler: () => {\r\n                                this.pageIndexChange.bind(this, 'finalItem')();\r\n                            },\r\n                            upBtnHandler: () => {\r\n                                if (isFirst) {\r\n                                    return false;\r\n                                }\r\n                                this.pageIndexChange.bind(this, 'prevItem')();\r\n                            },\r\n                            downBtnHandler: () => {\r\n                                if (isEnd) {\r\n                                    return false;\r\n                                }\r\n                                this.pageIndexChange.bind(this, 'nextItem')();\r\n                            },\r\n                            homeBtnHandler: () => {\r\n                                this.pageIndexChange.bind(this, 'firstItem')();\r\n                            },\r\n                        }}\r\n                        className=\"cardPage-hotkeys-wrapper\"\r\n                        focused={true}\r\n                        attach={document.body}\r\n                        display=\"inline-block\"\r\n                    />\r\n                )}\r\n                <div className=\"cardPagination-lightapp-component-wrap\">\r\n                    <Tooltip\r\n                        placement=\"top\"\r\n                        overlay={tooltips[0]}\r\n                        delayHide={1}\r\n                        delayShow={1000}\r\n                    >\r\n                        <span\r\n                            disabled={isFirst ? true : false}\r\n                            className={`${isFirst ? 'disable' : ''} first-item cardPaginationBtn`}\r\n                            onClick={() => {\r\n                                if (isFirst) {\r\n                                    return false;\r\n                                }\r\n                                this.pageIndexChange.call(this, 'firstItem')\r\n                            }}\r\n                        >\r\n                            <span className=\"icon iconfont icon-shangyiye\" />\r\n                        </span>\r\n                    </Tooltip>\r\n                    <Tooltip\r\n                        placement=\"top\"\r\n                        overlay={tooltips[1]}\r\n                        delayHide={1}\r\n                        delayShow={1000}\r\n                    >\r\n                        <span\r\n                            disabled={isFirst ? true : false}\r\n                            className={`${isFirst ? 'disable' : ''} item second-item cardPaginationBtn`}\r\n                            onClick={() => {\r\n                                if (isFirst) {\r\n                                    return false;\r\n                                }\r\n                                this.pageIndexChange.call(this, 'prevItem')\r\n                            }}\r\n                        >\r\n                            <span className=\"icon iconfont icon-jiantouzuo\" />\r\n                        </span>\r\n                    </Tooltip>\r\n                    <Tooltip\r\n                        placement=\"top\"\r\n                        overlay={tooltips[2]}\r\n                        delayHide={1}\r\n                        delayShow={1000}\r\n                    >\r\n                        <span\r\n                            disabled={isEnd ? true : false}\r\n                            className={`${isEnd ? 'disable' : ''} item third-item cardPaginationBtn`}\r\n                            onClick={() => {\r\n                                if (isEnd) {\r\n                                    return false;\r\n                                }\r\n                                this.pageIndexChange.call(this, 'nextItem')\r\n                            }}\r\n                        >\r\n                            <span className=\"icon iconfont icon-jiantouyou\" />\r\n                        </span>\r\n                    </Tooltip>\r\n                    <Tooltip\r\n                        placement=\"top\"\r\n                        overlay={tooltips[3]}\r\n                        delayHide={1}\r\n                        delayShow={1000}\r\n                    >\r\n                        <span\r\n                            disabled={isEnd ? true : false}\r\n                            className={`${isEnd ? 'disable' : ''} last-item cardPaginationBtn`}\r\n                            onClick={() => {\r\n                                if (isEnd) {\r\n                                    return false;\r\n                                }\r\n                                this.pageIndexChange.call(this, 'finalItem')\r\n                            }}\r\n                        >\r\n                            <span className=\"icon iconfont icon-xiayiye\" />\r\n                        </span>\r\n                    </Tooltip>\r\n                </div>\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","/*\r\n * @Author: liyxt\r\n * @Date: 2019-10-21 14:15:59\r\n * @LastEditors: liyxt\r\n * @LastEditTime: 2020-06-04 11:03:43\r\n * @Description: file content\r\n */\r\nimport React from 'react';\r\nrequire('./index.less');\r\nimport CardPagination from './CardPag_test';\r\n\r\n//创建卡片分页组件\r\nexport function createCardPagination(events) {\r\n    return (\r\n        <CardPagination\r\n            getThis={_this => {\r\n                this.myCardPagination = _this;\r\n            }}\r\n            events={events}\r\n            output={this.output}\r\n            rootprops={this.props}\r\n            getUrlParam={this.getUrlParam}\r\n        />\r\n    );\r\n}\r\n\r\n","import { createCardPagination } from './create_test';\r\nimport { \r\n    setCardPaginationVisible, \r\n    setCardPaginationId, \r\n    getNextCardPaginationId,\r\n    setCardPaginationAllpks,\r\n} from './methods_test';\r\n\r\nexport default {\r\n    createCardPagination,\r\n    setCardPaginationVisible, \r\n    setCardPaginationId, \r\n    getNextCardPaginationId,\r\n    setCardPaginationAllpks,\r\n}","// import { isObj, warningOnce } from '@platform/api';\r\n// import { ViewModel } from '@platform/api'\r\n\r\n// 设置显隐性\r\nexport function setCardPaginationVisible(cardPaginationBtn, flag) {\r\n    if (this.myCardPagination && this.myCardPagination.state) {\r\n        //if (flag != this.myCardPagination.state.visible) {\r\n        this.myCardPagination.setState({ visible: flag })\r\n        //}\r\n    }\r\n}\r\n\r\n//设置当前 id \r\n// status:2  新增\r\n// status:1  修改\r\nexport function setCardPaginationId(idObj = {}) {\r\n    if (this.myCardPagination && this.myCardPagination.state && idObj && idObj.id) {\r\n        if (!idObj.status) {\r\n            idObj.status = 1;\r\n        }\r\n        if (idObj.status == 1) {//修改\r\n            this.myCardPagination.setState({ activeId: idObj.id })\r\n        }\r\n        if (idObj.status == 2) {//新增\r\n            this.myCardPagination.state.allpks.push(idObj.id);\r\n            this.myCardPagination.setState({\r\n                activeId: idObj.id,\r\n                allpks: this.myCardPagination.state.allpks,\r\n            })\r\n        }\r\n        if (idObj.status == 3) {//删除\r\n            let index = this.myCardPagination.state.allpks.indexOf(idObj.id);\r\n            if (index != -1) {\r\n                this.myCardPagination.state.allpks.splice(index, 1);\r\n                this.myCardPagination.setState({ allpks: this.myCardPagination.state.allpks })\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n//获取删除后下一条卡片页面数据的id\r\nexport function getNextCardPaginationId(idObj) {\r\n    if (this.myCardPagination && this.myCardPagination.state) {\r\n        if (idObj && idObj.id) {\r\n            let allpks = this.myCardPagination.state.allpks;\r\n            if (allpks.length > 1) {\r\n                let index = allpks.indexOf(idObj.id);\r\n                if (index == allpks.length - 1) { //是最后一条\r\n                    return allpks[allpks.length - 2]\r\n                } else { //不是最后一条\r\n                    return allpks[index + 1]\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n//设置组件allpks\r\nexport function setCardPaginationAllpks(allpks, success) {\r\n    if (this.myCardPagination && this.myCardPagination.state && Array.isArray(allpks)) {\r\n        this.myCardPagination.setState({\r\n            allpks: allpks\r\n        },()=>{\r\n            typeof success === 'function' && success();\r\n        })\r\n    }\r\n}\r\n","/**\r\n * Created by wangshhj on 2018/3/13.\r\n */\r\nimport React, { Component } from 'react';\r\nimport {\r\n    Modal,\r\n    Button,\r\n    HotKeys,\r\n    Tooltip,\r\n} from '@platform/base';\r\nimport { getMultiLang } from '@platform/api';\r\n\r\nrequire('./createModal.less');\r\n\r\nclass Modal2 extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            data: {},\r\n            json: {},\r\n        };\r\n    }\r\n\r\n    UNSAFE_componentWillMount() {\r\n        let callback = (json, bool) => {\r\n            if (bool) {\r\n                this.setState({ json });\r\n            }\r\n        };\r\n        getMultiLang({ moduleId: 'container_toast', callback });\r\n    }\r\n\r\n    UNSAFE_componentWillReceiveProps(nextProps) {\r\n        let { modalData, argusObj } = nextProps;\r\n        let nowData = {};\r\n        for (let attr in modalData) {\r\n            for (let attr1 in argusObj) {\r\n                if (attr === attr1) {\r\n                    if (modalData[attr] && argusObj[attr1]) {\r\n                        nowData[attr] = modalData[attr];\r\n                    } else {\r\n                        if (modalData[attr]) {\r\n                            nowData[attr] = modalData[attr];\r\n                        } else {\r\n                            nowData[attr] = argusObj[attr1];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        this.setState({ data: nowData });\r\n    }\r\n\r\n    render() {\r\n        let { json } = this.state;\r\n        let {\r\n            id,\r\n            size,\r\n            className,\r\n            backdropClassName,\r\n            title,\r\n            content,\r\n            noFooter,\r\n            leftBtnName = json['0005'],\r\n            rightBtnName = json['0006'],\r\n            showCustomBtns,\r\n            customBtns,\r\n            hideRightBtn,\r\n            hideLeftBtn,\r\n            container,\r\n        } = this.state.data;\r\n        let {\r\n            onHide,\r\n            backdrop,\r\n            indexInfo,\r\n            beSureClick,\r\n            cancelClick,\r\n            show,\r\n            size: propSize,\r\n            hotKeyboard = true,\r\n            onEscapeKeyUp,\r\n            draggable,\r\n            resizable,\r\n            ...others\r\n        } = this.props;\r\n        let mSize = size || propSize || '';\r\n\r\n        let maxModalCls = mSize === 'max' ? 'nc-modal-max' : '';\r\n        return (\r\n            <Modal\r\n                fieldid={id}\r\n                show={show}\r\n                onHide={onHide.bind(this)}\r\n                size={mSize}\r\n                backdrop={backdrop}\r\n                indexInfo={indexInfo}\r\n                className={`${className} simpleModal ${maxModalCls}`}\r\n                backdropClassName={backdropClassName}\r\n                container={container}\r\n                ref={Modal => (this.Modal = Modal)}\r\n                onEscapeKeyUp={onEscapeKeyUp}\r\n                draggable={draggable}\r\n                resizable={resizable}\r\n                id={id}\r\n                {...others}\r\n            >\r\n                {!showCustomBtns && hotKeyboard && !noFooter && (\r\n                    <HotKeys\r\n                        keyMap={{\r\n                            sureBtnHandler:\r\n                                HotKeys.USUAL_KEYS.MODAL_CONFIRM,\r\n                            cancelBtnHandler:\r\n                                HotKeys.USUAL_KEYS.MODAL_CALCEL,\r\n                        }}\r\n                        handlers={{\r\n                            sureBtnHandler: () => {\r\n                                // 确定按钮的事件 增加top的判断避免所有弹窗逻辑都被触发 by bbqin\r\n                                if (this.Modal && this.Modal.isTopModal()) {\r\n                                    console.log(\r\n                                        'createModal  sureBtnHandler 事件回调',\r\n                                        this.Modal.isTopModal(),\r\n                                    );\r\n                                    beSureClick.bind(this)();\r\n                                }\r\n                            },\r\n                            cancelBtnHandler: () => {\r\n                                // 取消按钮的事件 增加top的判断避免所有弹窗逻辑都被触发  by bbqin\r\n                                if (this.Modal && this.Modal.isTopModal()) {\r\n                                    console.log(\r\n                                        'createModal cancelBtnHandler 事件回调',\r\n                                    );\r\n                                    cancelClick.bind(this)();\r\n                                }\r\n                            },\r\n                        }}\r\n                        className=\"simpleModal-hotkeys-wrapper\"\r\n                        focused={true}\r\n                        attach={document.body}\r\n                        display=\"inline\"\r\n                    />\r\n                )}\r\n                <Modal.Header fieldid=\"header-area\" closeButton>\r\n                    <Modal.Title fieldid={title}>{title}</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body className={noFooter ? 'has-resize-icon' : ''}>{content}</Modal.Body>\r\n\r\n                {!noFooter ? (\r\n                    <Modal.Footer>\r\n                        {!showCustomBtns &&\r\n                            hideLeftBtn === false &&\r\n                            leftBtnName &&\r\n                            (hotKeyboard ?\r\n                                (<Tooltip\r\n                                    placement=\"top\"\r\n                                    inverse\r\n                                    overlay={`${leftBtnName}  (${HotKeys.USUAL_KEYS.MODAL_CONFIRM})`}\r\n                                    trigger={['hover', 'focus']}\r\n                                    className=\"model-helper-overlay\"\r\n                                >\r\n                                    <Button\r\n                                        onClick={beSureClick.bind(this)}\r\n                                        colors=\"primary\"\r\n                                        tabIndex=\"0\"\r\n                                        fieldid=\"confirm\"\r\n                                    >\r\n                                        {leftBtnName}(<span className=\"text-decoration-underline\">Y</span>)\r\n                                    </Button>\r\n                                </Tooltip>\r\n                                ) : (<Button\r\n                                    onClick={beSureClick.bind(this)}\r\n                                    colors=\"primary\"\r\n                                    tabIndex=\"0\"\r\n                                    fieldid=\"confirm\"\r\n                                >\r\n                                    {leftBtnName}\r\n                                </Button>))\r\n                        }\r\n\r\n                        {!showCustomBtns &&\r\n                            hideRightBtn === false &&\r\n                            rightBtnName &&\r\n                            (hotKeyboard ?\r\n                                (<Tooltip\r\n                                    placement=\"top\"\r\n                                    inverse\r\n                                    overlay={`${rightBtnName}  (${HotKeys.USUAL_KEYS.MODAL_CALCEL})`}\r\n                                    trigger={['focus', 'hover']}\r\n                                    className=\"model-helper-overlay\"\r\n                                >\r\n                                    <Button\r\n                                        onClick={cancelClick.bind(this)}\r\n                                        shape=\"border\"\r\n                                        tabIndex=\"0\"\r\n                                        fieldid=\"cancel\"\r\n                                    >\r\n                                        {rightBtnName}(<span className=\"text-decoration-underline\">N</span>)\r\n                                    </Button>\r\n                                </Tooltip>\r\n                                ) : (\r\n                                    <Button\r\n                                        onClick={cancelClick.bind(this)}\r\n                                        shape=\"border\"\r\n                                        tabIndex=\"0\"\r\n                                        fieldid=\"cancel\"\r\n                                    >\r\n                                        {rightBtnName}\r\n                                    </Button>\r\n                                )\r\n                            )\r\n                        }\r\n                        {showCustomBtns && customBtns ? customBtns : null}\r\n                    </Modal.Footer>\r\n                ) : null}\r\n            </Modal>\r\n        );\r\n    }\r\n}\r\n\r\nexport default function createModal(\r\n    id,\r\n    {\r\n        title, //标题\r\n        content, //内容\r\n        beSureBtnClick, //确定按钮事件回调\r\n        cancelBtnClick, //取消按钮事件回调\r\n        closeModalEve, //关闭按钮事件回调\r\n        rightBtnName, //左侧按钮名称\r\n        leftBtnName, //右侧按钮名称\r\n        noFooter = false, //是否需要底部按钮\r\n        size = 'lg', //  模态框大小 sm/lg/xlg\r\n        userControl = false, // 点 确定/取消 按钮后，是否自动关闭弹出框\r\n        className = '',\r\n        backdropClassName = '',\r\n        zIndex = 200,\r\n        hasBackDrop = true, //显示遮罩层\r\n        closeByClickBackDrop = false, //点击遮罩关闭提示框，true是点击关闭，false是阻止关闭,默认是false --UE让禁用这个功能\r\n        showCustomBtns = false, //允许自定义底部按钮\r\n        customBtns, //自定义按钮\r\n        validateCloseBtn = false, //点击关闭X按钮的校验\r\n        hotKeyboard = true, // 热键的配置项\r\n        hideRightBtn = false, //隐藏底部右边的按钮\r\n        hideLeftBtn = false, //隐藏底部左边的按钮\r\n        container = document.body,\r\n        onEscapeKeyUp,\r\n        draggable = true, //可拖拽移动位置\r\n        resizable = true, //可拖拽变化宽高\r\n        ...others\r\n    } = {},\r\n) {\r\n    let custom = (className.indexOf('junior') !== -1) || (className.indexOf('senior') !== -1) || (className.indexOf('combine') !== -1);\r\n    let mSize = `${custom ? '' : size}`;\r\n    let argusObj = {\r\n        id,\r\n        title,\r\n        content,\r\n        beSureBtnClick,\r\n        cancelBtnClick,\r\n        closeModalEve,\r\n        rightBtnName,\r\n        leftBtnName,\r\n        noFooter,\r\n        size: mSize, //传定制大小的类名的时候，size不配置生效，解决配置拖拽的时候的问题\r\n        userControl,\r\n        className,\r\n        backdropClassName,\r\n        zIndex,\r\n        hasBackDrop,\r\n        closeByClickBackDrop,\r\n        showCustomBtns,\r\n        customBtns,\r\n        validateCloseBtn,\r\n        hideRightBtn,\r\n        hideLeftBtn,\r\n        container,\r\n        onEscapeKeyUp,\r\n    };\r\n    if (!this.state.modal.hasOwnProperty(id)) {\r\n        this.state.modal[id] = argusObj;\r\n    }\r\n    let modalData = this.state.modal[id] || {};\r\n    if (!modalData.update) {\r\n        modalData.content = content;\r\n        modalData.customBtns = customBtns;\r\n    }\r\n    //关闭模态框\r\n    const close = () => {\r\n        modalData.showModal = false;\r\n        this.setState({ modal: this.state.modal });\r\n    };\r\n    /* 点击关闭按钮 */\r\n    const onHide = () => {\r\n        if (!modalData.validateCloseBtn) {\r\n            close();\r\n        }\r\n        if (typeof modalData.closeModalEve === 'function') {\r\n            modalData.closeModalEve();\r\n        }\r\n    };\r\n\r\n    /* 取消按钮事件 */\r\n    const cancelClick = () => {\r\n        if (!modalData.userControl) {\r\n            close();\r\n        }\r\n        if (typeof modalData.cancelBtnClick === 'function') {\r\n            modalData.cancelBtnClick();\r\n        }\r\n    };\r\n\r\n    //确认按钮事件\r\n    const beSureClick = () => {\r\n        if (!modalData.userControl) {\r\n            close();\r\n        }\r\n        if (typeof modalData.beSureBtnClick === 'function') {\r\n            modalData.beSureBtnClick();\r\n        }\r\n    };\r\n\r\n    let backdrop;\r\n    if (hasBackDrop) {\r\n        if (closeByClickBackDrop) {\r\n            backdrop = closeByClickBackDrop;\r\n        } else {\r\n            backdrop = 'static';\r\n        }\r\n    } else {\r\n        backdrop = hasBackDrop;\r\n    }\r\n    let finalIndex = modalData.zIndex || zIndex || 200\r\n    let indexInfo = { id, zIndex:finalIndex };\r\n    return (\r\n        <Modal2\r\n            {...others}\r\n            onHide={onHide}\r\n            backdrop={backdrop}\r\n            indexInfo={indexInfo}\r\n            beSureClick={beSureClick}\r\n            cancelClick={cancelClick}\r\n            modalData={modalData}\r\n            show={modalData.showModal}\r\n            argusObj={argusObj}\r\n            hotKeyboard={hotKeyboard}\r\n            custom={custom}\r\n            onEscapeKeyUp={onEscapeKeyUp}\r\n            draggable={draggable}\r\n            resizable={resizable}\r\n            size={mSize}\r\n        />\r\n    );\r\n}\r\n","/**\r\n * Created by wangshhj on 2018/3/13.\r\n */\r\n\r\nexport function show(id, config = {}, showCallback) {\r\n    if (!this.state.modal.hasOwnProperty(id)) {\r\n        console.error('需要先初始化createModal');\r\n        return false;\r\n    }\r\n    let modalData = this.state.modal[id];\r\n    modalData = Object.assign(modalData, config);\r\n    modalData.showModal = true;\r\n    if (config.hasOwnProperty('content') || config.hasOwnProperty('customBtns')) {\r\n        modalData.update = true;\r\n    }\r\n    this.setState({ modal: this.state.modal }, () => {\r\n        if (showCallback && (typeof showCallback === 'function')) showCallback();\r\n    });\r\n}\r\n\r\nexport function close(id) {\r\n    this.state.modal[id].showModal = false;\r\n    // this.state.modal[id].userControl = false;\r\n    this.setState({ modal: this.state.modal });\r\n}","import { toast, ajax as Ajax, isFunction, isArray, isEmpty, isObj, ViewModel, localeLang, LocalToDongbaTime, DongbaToLocalTime } from '@platform/api';\r\nimport { moment } from '@platform/api';\r\n// import { isFunction, isArray, isEmpty, isObj } from '../../public';\r\n// import { localeLang } from '../../public/currentLocale';\r\n// import ViewModel from '../../shell/viewmodel/viewmodel';\r\nimport {\r\n    _getAllSearchData,\r\n    setSearchPlanName,\r\n} from './methods';\r\n// import toast from '../../api/toast';\r\n// import { DongbaToLocalTime, LocalToDongbaTime } from '../../public/timer';\r\n\r\nlet { removeGlobalStorage } = ViewModel;\r\n\r\n// =========以下为平台内部使用的方法========================\r\n\r\nlet OperationOptions = [];\r\nexport function setOperationOptionsMultiLang(_multiLang) {\r\n    const multiLang = _multiLang;\r\n    if (isEmpty(OperationOptions)) {\r\n        OperationOptions = [\r\n            {\r\n                display: multiLang['page-search-0047'],\r\n                value: '=',\r\n            },\r\n            {\r\n                display: multiLang['page-search-0047'],\r\n                value: '==',\r\n            },\r\n            {\r\n                display: multiLang['page-search-0048'],\r\n                value: '>',\r\n            },\r\n            {\r\n                display: multiLang['page-search-0049'],\r\n                value: '<',\r\n            },\r\n            {\r\n                display: multiLang['page-search-0050'],\r\n                value: 'between',\r\n            },\r\n            {\r\n                display: multiLang['page-search-0051'],\r\n                value: '>=',\r\n            },\r\n            {\r\n                display: multiLang['page-search-0052'],\r\n                value: '<=',\r\n            },\r\n            {\r\n                display: multiLang['page-search-0053'],\r\n                value: '<>',\r\n            },\r\n            {\r\n                display: multiLang['page-search-0054'],\r\n                value: 'like',\r\n            },\r\n            {\r\n                display: multiLang['page-search-0055'],\r\n                value: 'left like',\r\n            },\r\n            {\r\n                display: multiLang['page-search-0056'],\r\n                value: 'right like',\r\n            },\r\n            {\r\n                display: multiLang['page-search-0057'],\r\n                value: 'is null',\r\n            },\r\n            {\r\n                display: multiLang['page-search-0084'],\r\n                value: 'not like',\r\n            },\r\n            {\r\n                display: multiLang['page-search-0085'],\r\n                value: 'is not null',\r\n            },\r\n        ];\r\n    }\r\n}\r\n//处理自然时间转多时区和起终点 time 是时间 flage：start 当天0点，end当天24点 假就是不处理\r\nexport function naturalTimeHandler(time, flag) {\r\n    let format = '';\r\n    switch (flag) {\r\n        case 'start':\r\n            format = 'YYYY-MM-DD HH:mm:ss';\r\n            break;\r\n        case 'end':\r\n            format = 'YYYY-MM-DD HH:mm:ss';\r\n            break;\r\n    }\r\n    const loc = DongbaToLocalTime(moment(time)).format(format);\r\n    const dong8 = LocalToDongbaTime(moment(loc)).format('YYYY-MM-DD HH:mm:ss');\r\n    return dong8;\r\n\r\n}\r\n/* 处理运算符 */\r\nexport function createOperation(data) {\r\n    data = data || '';\r\n    data = data.replace(/^@+|@$/g, '');\r\n    let o = data.split('@');\r\n    let newArr = [];\r\n    o.forEach(item => {\r\n        for (let i = 0; i < OperationOptions.length; i++) {\r\n            if (item === OperationOptions[i].value) {\r\n                newArr.push(OperationOptions[i]);\r\n                break;\r\n            }\r\n        }\r\n    });\r\n    return newArr;\r\n}\r\nexport function _clone(obj) {\r\n    return JSON.parse(JSON.stringify(obj === undefined ? '' : obj));\r\n}\r\n\r\nexport function getTimezoneOffset() {\r\n    return -1 * new Date().getTimezoneOffset() / 60;\r\n}\r\n//从缓存中获取函数翻译值\r\nexport function getFunctionValueFromViewModal(VALUE, context = {}) {\r\n    let reslut = _clone(VALUE);\r\n    let obj = {\r\n        '#mainorg#': {\r\n            // 默认主组织\r\n            display: context.org_Name || '',\r\n            value: context.pk_org || '',\r\n        },\r\n        '#DefaultCostRegion#': {\r\n            // 默认财务成本域\r\n            display: context.defaultCostRegionName || '',\r\n            value: context.defaultCostRegionPk || '',\r\n        },\r\n        '#DefaultCreditCtlRegion#': {\r\n            //默认信用域\r\n            display: context.defaultCreditCtlRegionName || '',\r\n            value: context.defaultCreditCtlRegionPk || '',\r\n        },\r\n        '#accountingbook#': {\r\n            //默认账簿\r\n            display: context.defaultAccbookName || '',\r\n            value: context.defaultAccbookPk || '',\r\n        },\r\n        '#operator#': {\r\n            //当前操作员\r\n            display: context.userName || '',\r\n            value: context.userId || '',\r\n        },\r\n        '#currentgroup#': {\r\n            //当前集团\r\n            display: context.groupName || '',\r\n            value: context.groupId || '',\r\n        },\r\n        '#DefaultLiactCostrgFunction#': {\r\n            //默认利润中心成本域\r\n            display: context.defaultCenterContentName || '',\r\n            value: context.defaultCenterContentPK || '',\r\n        },\r\n        \"#DefaultCostrgOrLiactCostrgFunc#\": {\r\n            //默认成本域\r\n            display: context.defaultCostRegionName || context.defaultCenterContentName || '',\r\n            value: context.defaultCostRegionPk || context.defaultCenterContentPK || '',\r\n        },\r\n        \"#busioperator#\": {\r\n            //当前人员\r\n            display: context.defaultPsndocName || '',\r\n            value: context.defaultPsndocPK || '',\r\n        },\r\n        \"#rbacdept#\": {\r\n            //当前人员所属部门  数组\r\n            display: Array.isArray(context.defaultDeptName) ? context.defaultDeptName.join(',') : '',\r\n            value: Array.isArray(context.defaultDeptPK) ? context.defaultDeptPK.join(',') : '',\r\n        },\r\n    };\r\n\r\n    if (Array.isArray(reslut)) {\r\n        reslut.map(item => {\r\n            if (item.value && item.value.indexOf('#') !== -1) {\r\n                item = obj[item.value] || item;\r\n            }\r\n            return item;\r\n        });\r\n    } else {\r\n        if (reslut.value && reslut.value.indexOf('#') !== -1) {\r\n            reslut = obj[reslut.value] || reslut;\r\n        }\r\n    }\r\n    return reslut;\r\n}\r\n\r\n// 为提供默认的 条件组的初始值\r\nexport function initDefaultSnapshot(items, context, isTemplateOrder) {\r\n    function getValue(item) {\r\n        let initialvalue = {\r\n            display: '',\r\n            value: '',\r\n        };\r\n        if (item.itemtype === 'checkbox_switch') {\r\n            initialvalue.value = false;\r\n        } else if (item.itemtype === 'refer' && item.initialvalue) {\r\n            let refervalue = getFunctionValueFromViewModal(item.initialvalue, context);\r\n            item.initialvalue.display = refervalue.display || item.initialvalue.display;\r\n        } else if (item.itemtype === 'residtxt') {\r\n            let index = item.languageMeta.filter(val => val.languageCode == localeLang)[0]?.index || 1;\r\n            initialvalue.index = index;\r\n            if (item.initialvalue && !item.initialvalue.hasOwnProperty('index')) {\r\n                item.initialvalue.index = index;\r\n            }\r\n        }\r\n        return item.initialvalue && (!isEmpty(item.initialvalue.value) || item.initialvalue.index) ? item.initialvalue : initialvalue;\r\n    }\r\n    let result = [];\r\n    if (isArray(items)) {\r\n        let snapshotList = items.filter(item => (item.visible || item.isfixedcondition) && item.isdrag);\r\n        const requireList = [];\r\n        const fiexedList = [];\r\n        const otherList = [];\r\n\r\n        snapshotList.forEach((item, index) => {\r\n            if (!(Number(item.visibleposition) > 0)) {\r\n                item.visibleposition = 99999 + index;\r\n            }\r\n            if (item.isfixedcondition) {\r\n                fiexedList.push(item);\r\n            } else if (item.required) {\r\n                requireList.push(item);\r\n            } else {\r\n                otherList.push(item);\r\n            }\r\n        });\r\n        /**\r\n\r\n         * 预置方案排序规则：查询模板中字段的排序分为“默认显示字段排序”、查询区域字段顺序、必填项顺序、固定条件顺序\r\n排序规则：固定条件顺序>必填项顺序>默认显示字段排序中设置的顺序>查询区域字段顺序\r\n举例：1.当一个字段设置了“默认显示字段排序”为10，在查询区域中字段显示在第12个，则在查询模板中此字段显示在第10的位置；\r\n           2.当一个字段设置了“默认显示字段排序”为10，在查询区域中字段显示在第8个，又设置了固定条件，则此字段在查询模板中显示在第1位；\r\n         */\r\n        fiexedList.sort((v1, v2) => Number(v1.visibleposition) - Number(v2.visibleposition));\r\n        if (isTemplateOrder) {\r\n            const notFixed = requireList.concat(otherList).sort((v1, v2) => Number(v1.visibleposition) - Number(v2.visibleposition));\r\n            snapshotList = fiexedList.concat(notFixed);\r\n\r\n        } else {\r\n\r\n            requireList.sort((v1, v2) => Number(v1.visibleposition) - Number(v2.visibleposition));\r\n            otherList.sort((v1, v2) => Number(v1.visibleposition) - Number(v2.visibleposition));\r\n            snapshotList = fiexedList.concat(requireList).concat(otherList);\r\n        }\r\n\r\n        // snapshotList.sort((v1, v2) => Number(v1.visibleposition) - Number(v2.visibleposition));\r\n        snapshotList.forEach((item, index) => {\r\n            let value = getValue.call(this, item);\r\n            let obj = {\r\n                attrcode: item.attrcode,\r\n                initialvalue: value,\r\n                operationSign: item.queryOperateType ? item.queryOperateType.split('@')[0] : '',\r\n                operationOptions: createOperation(item.queryOperateType),\r\n                remove: item.required != true && item.isfixedcondition != true,\r\n                // label 查询区收起时需要 add by wanglongx\r\n                label: item.label,\r\n                isfixedcondition: !!item.isfixedcondition,\r\n                isExtend: !!item.isfixedcondition,\r\n                visible: true,\r\n            };\r\n            if (item.itemtype === 'residtxt' && value.value) {\r\n                obj.valueMap = {};\r\n                obj.valueMap[item.attrcode + value.index] = { value: value.value };\r\n            }\r\n            result.push(obj);\r\n        });\r\n    }\r\n    return result;\r\n}\r\n//方案平铺\r\nexport function planExtend(searchInfo, items, context, result = [], level = 0) {\r\n    if (Array.isArray(items)) {\r\n        items.forEach(item => {\r\n            if (item.children) {\r\n                planExtend(searchInfo, item.children, context, result, ++level);\r\n            } else {\r\n                let initialvalue = {\r\n                    display: '',\r\n                    value: '',\r\n                };\r\n                item.initialvalue = item.initialvalue || item.value;\r\n                let tempItem = searchInfo.itemsMap[item.attrcode];\r\n                if (tempItem) {\r\n                    if (tempItem.itemtype === 'checkbox_switch') {\r\n                        initialvalue.value = false;\r\n                    } else if (tempItem.itemtype === 'refer' && item.initialvalue) {\r\n                        let refervalue = getFunctionValueFromViewModal.call(item.initialvalue, context);\r\n                        item.initialvalue.display = refervalue.display || item.initialvalue.display;\r\n                    } else if (tempItem.itemtype === 'residtxt') {\r\n                        let index = tempItem.languageMeta.filter(val => val.languageCode == localeLang)[0]?.index || 1;\r\n                        initialvalue.index = index;\r\n                        if (item.initialvalue && !item.initialvalue.hasOwnProperty('index')) {\r\n                            item.initialvalue.index = index;\r\n                        }\r\n                    }\r\n                    let obj = {\r\n                        attrcode: item.attrcode,\r\n                        refpk: item.attrcode,\r\n                        initialvalue:\r\n                            item.initialvalue &&\r\n                                (item.initialvalue.value || item.initialvalue.value === false || item.initialvalue.display || item.initialvalue.index)\r\n                                ? item.initialvalue\r\n                                : initialvalue, //此处initialvalue判空可能有问题，调试的时候再改 xuyang\r\n                        operationSign: item.operationSign || item.queryOperateType.split('@')[0] || '',\r\n                        remove: item.hasOwnProperty('remove')\r\n                            ? item.remove\r\n                            : tempItem.required != true && tempItem.isfixedcondition != true,\r\n                        visible: true,\r\n                    };\r\n                    if (tempItem.itemtype === 'refer') {\r\n                        obj.runWithChildren = !!item.runWithChildren;\r\n                        obj.refurl = item.refurl || '';\r\n                    } else if (tempItem.itemtype === 'residtxt') {\r\n\r\n                        obj.valueMap = {};\r\n                        if (!item.hasOwnProperty('valueMap') && obj.initialvalue.value) {\r\n                            obj.valueMap[item.attrcode + obj.initialvalue.index] = { value: obj.initialvalue.value };\r\n                        } else if (item.hasOwnProperty('valueMap')) {\r\n                            obj.valueMap = item.valueMap;\r\n                        }\r\n\r\n                    }\r\n                    if (tempItem.isfixedcondition && level < 2) {\r\n                        obj.visible = false;\r\n                    }\r\n                    result.push(obj);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return result;\r\n}\r\n// 将查询方案转换成 snapshot\r\nexport function plan2snapshotTranslate(searchInfo, items, context, createOperation, level = 0) {\r\n    if (Array.isArray(items)) {\r\n        items.forEach(item => {\r\n            if (item.children) {\r\n                plan2snapshotTranslate(searchInfo, item.children, context, createOperation, ++level);\r\n            } else {\r\n                let initialvalue = {\r\n                    display: '',\r\n                    value: '',\r\n                };\r\n                item.initialvalue = item.initialvalue || item.value;\r\n                let tempItem = searchInfo.itemsMap[item.attrcode];\r\n                if (tempItem) {\r\n                    if (tempItem.itemtype === 'checkbox_switch') {\r\n                        initialvalue.value = false;\r\n                    } else if (item.itemtype === 'refer' && item.initialvalue) {\r\n                        let refervalue = getFunctionValueFromViewModal.call(item.initialvalue, context);\r\n                        item.initialvalue.display = refervalue.display || item.initialvalue.display;\r\n                    } else if (item.itemtype === 'residtxt') {\r\n                        let index = item.languageMeta.filter(val => val.languageCode == localeLang)[0]?.index || 1;\r\n                        initialvalue.index = index;\r\n                        if (item.initialvalue && !item.initialvalue.hasOwnProperty('index')) {\r\n                            item.initialvalue.index = index;\r\n                        }\r\n                    }\r\n\r\n                    item.refpk = item.attrcode;\r\n                    item.initialvalue =\r\n                        item.initialvalue &&\r\n                            (item.initialvalue.value || item.initialvalue.value === false || item.initialvalue.display || item.initialvalue.index)\r\n                            ? item.initialvalue\r\n                            : initialvalue; //此处initialvalue判空可能有问题，调试的时候再改 xuyang\r\n                    item.operationSign = item.operationSign || item.queryOperateType.split('@')[0] || '';\r\n                    item.operationOptions = createOperation(tempItem.queryOperateType);\r\n                    item.remove = item.hasOwnProperty('remove')\r\n                        ? item.remove\r\n                        : tempItem.required != true && tempItem.isfixedcondition != true;\r\n                    if (tempItem.itemtype === 'residtxt' && !item.hasOwnProperty('valueMap') && item.initialvalue.value) {\r\n                        item.valueMap = {};\r\n                        item.valueMap[item.attrcode + item.initialvalue.index] = { value: item.initialvalue.value };\r\n                    }\r\n                    //需要注释掉\r\n                    // item.visible = !(!item.isfixedcondition && tempItem.isfixedcondition && level < 2);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return items;\r\n}\r\n//根据快照 过滤模板\r\nexport function templateFilter(itemsMap, snapshot) {\r\n    let result = [];\r\n    if (isArray(snapshot)) {\r\n        snapshot.forEach(item => {\r\n            if (itemsMap.hasOwnProperty(item.attrcode)) {\r\n                result.push(itemsMap[item.attrcode]);\r\n            }\r\n        });\r\n    }\r\n    return result;\r\n}\r\n// 根据模板重新修改 snapshot\r\nexport function snapshotChangeByTemplate(snapshot, items, context) {\r\n    let newSnapshot = initDefaultSnapshot(items, context);\r\n    newSnapshot.forEach(newItem => {\r\n        snapshot.forEach(oldItem => {\r\n            if (newItem.attrcode === oldItem.attrcode) {\r\n                //此处判断有问题，如果是多个相同的条件的时候 会出现赋值混乱。\r\n                newItem.initialvalue = oldItem.initialvalue;\r\n                newItem.operationSign = oldItem.operationSign;\r\n            }\r\n        });\r\n    });\r\n    return newSnapshot;\r\n}\r\n// 获得有数据的snapshot\r\nexport function snapshotFilter(snapshot, itemsMap) {\r\n    if (Array.isArray(snapshot)) {\r\n        return snapshot.filter(item => {\r\n            return !isEmpty(item.initialvalue.value);\r\n        });\r\n    } else {\r\n        return [];\r\n    }\r\n}\r\n//查询条件所有值都添加了\r\nexport function allItemsFillComplete(snapshot, searchInfo, context) {\r\n    let result = true;\r\n    if (snapshot[0] && snapshot[0].attrcode == 'root') {\r\n        snapshot = planExtend(searchInfo, snapshot, context);\r\n    }\r\n    snapshot.forEach(item => {\r\n        // 必填项无值 不执行查询 其他情况执行查询\r\n        if (searchInfo.itemsMap[item.attrcode]['itemtype'] === 'refer') item.initialvalue = getFunctionValueFromViewModal(item.initialvalue, context);\r\n        if (searchInfo.itemsMap[item.attrcode]['required'] && isEmpty(item.initialvalue.value)) {\r\n            result = false;\r\n        }\r\n    });\r\n    return result;\r\n}\r\n//树结构转数组\r\nexport function tree2Array(data, reuslt = []) {\r\n    if (Array.isArray(data)) {\r\n        data.forEach(item => {\r\n            if (item) {\r\n                if (item.children) {\r\n                    tree2Array(item.children, reuslt);\r\n                } else {\r\n                    reuslt.push(item);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    return reuslt;\r\n}\r\n//时间比较函数\r\nexport function CompareDate(d1, d2) {\r\n    // console.log(d1, d2);\r\n    return new Date(d1.replace(/-/g, '/')) > new Date(d2.replace(/-/g, '/'));\r\n}\r\nexport function isDateFunction(value) {\r\n    value = String(value);\r\n    return value.indexOf('#') !== -1;\r\n}\r\n\r\nfunction addMark(data) {\r\n    data.map(item => {\r\n        if (\r\n            item.initialvalue &&\r\n            (item.initialvalue.value === '' ||\r\n                item.initialvalue.value === null ||\r\n                (isArray(item.initialvalue.value) && !item.initialvalue.value.length) ||\r\n                (isArray(item.initialvalue.value) && item.initialvalue.value[0] === null))\r\n        ) {\r\n            item.isEmpty = true;\r\n        } else {\r\n            item.isEmpty = false;\r\n        }\r\n        if (Array.isArray(item.children)) {\r\n            addMark(item.children);\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * @description: 后台交互AJAX\r\n * @param {flag} String 交互类型 (edit编辑方案名称, save保存方案, add新增方案)\r\n * @param {type} Boolean 是否外层调用  \r\n * @param {currentPlanName} String 外层使用时传入的方案名称  \r\n * @return: \r\n */\r\nexport function beSureBtnClick(flag, type, currentPlanName) {\r\n    /* 此处ajax */\r\n    // enter 键触发时  存在参数错误的情况 type = enter \r\n\r\n    currentPlanName = currentPlanName ? (typeof currentPlanName == 'string' ? currentPlanName : undefined) : undefined;\r\n\r\n    if (typeof type == 'boolean') {\r\n        this.props = this;\r\n        this.multiLang = this.state.json;\r\n    } else {\r\n        if (flag == 'save' && this.state.currentPlan.name === this.multiLang['page-search-0018']) {\r\n            {\r\n                toast({ content: this.multiLang['page-search-0016'], color: 'warning' });\r\n            }\r\n            return;\r\n        } else if (this.state.searchPlanName.replace(/\\s+/g, '') === '') {\r\n            {\r\n                toast({ content: this.multiLang['page-search-0032'], color: 'warning' });\r\n            }\r\n            // 模态框不隐藏\r\n            if (flag === 'add') {\r\n                this.props.modal.show('addSearchPlan@' + this.props.moduleId);\r\n            } else if (flag === 'edit') {\r\n                this.props.modal.show('editSearchPlanName@' + this.props.moduleId);\r\n            }\r\n            return;\r\n        } else if (flag !== 'save') {\r\n            if (!isEmpty(this.state.searchPlan)) {\r\n                if (flag === 'edit' && this.state.currentPlan.name === this.state.searchPlanName) {\r\n                    this.props.modal.close('editSearchPlanName@' + this.props.moduleId);\r\n                    return;\r\n                }\r\n                let currentPlan = this.state.searchPlan.find(item => item.name === this.state.searchPlanName);\r\n                if (currentPlan) {\r\n                    {\r\n                        toast({ content: this.multiLang['page-search-0083'], color: 'warning' });\r\n                    }\r\n                    // 模态框不隐藏\r\n                    if (flag === 'add') {\r\n                        this.props.modal.show('addSearchPlan@' + this.props.moduleId);\r\n                    } else if (flag === 'edit') {\r\n                        this.props.modal.show('editSearchPlanName@' + this.props.moduleId);\r\n                    }\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    let that = this;\r\n    let data = {\r\n        public: null, // 公共区域查询条件\r\n        nonpublic: null, // 非公共区域查询条件\r\n    };\r\n    let state = null;\r\n\r\n    /*\r\n    *    如果业务组自定义查询条件，保存方案时，需要业务组返回其自定义的查询条件\r\n    *    状态：\r\n    *    1、业务组只添加部分自定义查询条件，此时分两部分：公共查询区、自定义查询区\r\n    *    2、业务组替换整个右侧body区，只有自定义查询区\r\n    *    3、只有公共查询区\r\n    * */\r\n\r\n    // 获取公共查询区域查询条件及state\r\n    let runThis = () => {\r\n        let searchInfo = this.state.searchInfo;\r\n        data.public = _getAllSearchData.call(this, this.props.moduleId, this.state.searchInfo, false);\r\n        state = searchInfo.snapshotMap[searchInfo.status].filter(item => item.isExtend !== true); //这块有问题xuyangt\r\n        addMark(state);\r\n    };\r\n\r\n    if (this.state.userControlAll) {\r\n        // 业务组替换整个查询区\r\n        data.nonpublic = this.props.saveSearchPlan();\r\n    } else {\r\n        data.nonpublic = typeof this.props.saveSearchPlan === 'function' ? this.props.saveSearchPlan() : null;\r\n        runThis();\r\n    }\r\n\r\n    let pk = this.state.currentPlan ? this.state.currentPlan.pk_ncc_queryscheme : null;\r\n    if (typeof type == 'boolean') pk = this.state.searchInfo.searchPlanCache.find(item => item.name == currentPlanName).pk_ncc_queryscheme;\r\n    if (!this.props.hasOwnProperty('oid')) {\r\n        // console.error(this.multiLang['page-search-0041']);\r\n    }\r\n    let saveSearchPlanData = {\r\n        name: this.state.searchPlanName,\r\n        conditionobj4web: data, //查询条件\r\n        renderobj4web: state, // 查询条件前台数据结构，用于渲染查询区\r\n        areaid: this.props.oid || this.props.meta.oid, //这块是一个暂时的处理，因为有些场景this.props.oid ==undefined 原因还没查出来\r\n        isprepared: false, //预制方案\r\n        isquickqs: false, //默认方案 ,只能修改，不能删除\r\n    };\r\n    if (pk) {\r\n        saveSearchPlanData.pk_ncc_queryscheme = pk;\r\n    }\r\n    if (this.state.currentPlan) {\r\n        saveSearchPlanData.isprepared = this.state.currentPlan.isprepared;\r\n        saveSearchPlanData.isquickqs = this.state.currentPlan.isquickqs;\r\n    }\r\n\r\n    // editAjax 修改方案名称\r\n\r\n    let editAjax = () => {\r\n\r\n        let newdate = this.state.searchInfo.searchPlanCache.find(item => (currentPlanName || this.state.currentPlan.name) == item.name);\r\n        saveSearchPlanData.renderobj4web = newdate.renderobj4web;\r\n        saveSearchPlanData.name = this.state.searchPlanName;\r\n        saveAjax();\r\n    };\r\n    // saveAjax 修改方案保存\r\n    let saveAjax = () => {\r\n        Ajax({\r\n            url: '/nccloud/riart/queryscheme/updateQS.do',\r\n            data: saveSearchPlanData,\r\n            success: res => {\r\n                if (res.success) {\r\n                    {\r\n                        toast({ content: this.multiLang['page-search-0033'], color: 'success' });\r\n                    }\r\n                    // 修改成功后，更新state数据\r\n                    if (typeof type == 'boolean') {\r\n                        // 外部修改 \r\n                        let i = that.state.searchInfo.searchPlanCache.findIndex(\r\n                            e => e.pk_ncc_queryscheme === saveSearchPlanData.pk_ncc_queryscheme,\r\n                        );\r\n                        if (i !== -1) {\r\n                            saveSearchPlanData.pk_ncc_queryscheme = res.data;\r\n                            that.state.searchInfo.searchPlanCache[i] = _clone({\r\n                                ...that.state.searchInfo.searchPlanCache[i],\r\n                                ...saveSearchPlanData,\r\n                            });\r\n                            // that.state.searchInfo.currentPlan = saveSearchPlanData;\r\n                            // setSearchPlanName.call(that._this._this, that.id, saveSearchPlanData.name); 修复部分节点 不存在快速方案 只有预制方案\r\n                            if (currentPlanName == (that.state.searchInfo.currentPlan && that.state.searchInfo.currentPlan.name)) {\r\n                                that.state.searchInfo.currentPlan = saveSearchPlanData;\r\n                            }\r\n                            that.setState({ searchInfo: that.state.searchInfo });\r\n                            let keySessionS = this._this.myState.search.keySessionS;\r\n                            if (!isEmpty(keySessionS)) {\r\n                                keySessionS.forEach(item => removeGlobalStorage('localStorage', item));\r\n\r\n                            }\r\n\r\n                        }\r\n                        return;\r\n                    }\r\n                    // enter 键 关闭modal \r\n                    if (typeof type == 'string' && type == 'enter') {\r\n                        this.props.modal.close('editSearchPlanName@' + this.props.moduleId);\r\n                    }\r\n                    // 内部修改\r\n                    let i = that.state.searchPlan.findIndex(\r\n                        e => e.pk_ncc_queryscheme === saveSearchPlanData.pk_ncc_queryscheme,\r\n                    );\r\n                    if (i !== -1) {\r\n                        saveSearchPlanData.pk_ncc_queryscheme = res.data;\r\n                        that.state.searchPlan[i] = _clone({\r\n                            ...that.state.searchPlan[i],\r\n                            ...saveSearchPlanData,\r\n                        });\r\n                        that.props.searchPlanCacheChange(that.state.searchPlan);\r\n                    }\r\n                    this.state.currentPlan = saveSearchPlanData;\r\n                    // 更新查询方案名称\r\n                    if (!this.state.userControlAll) {\r\n                        setSearchPlanName.call(that.props._this._this, that.props.id, saveSearchPlanData.name);\r\n\r\n                        // saveSearchPlanData.isquickqs &&\r\n                        // \tthis.props.afterEditSearchPlan(saveSearchPlanData.renderobj4web);\r\n                    }\r\n                    // 当外层方案不是预置方案时 更新界面方案 当前保存的方案是 界面上展示的方案\r\n                    if (that.state.searchInfo.currentPlan != undefined) {\r\n                        if (this.state.currentPlan.pk_ncc_queryscheme == that.state.searchInfo.currentPlan.pk_ncc_queryscheme) {\r\n                            let a = _clone(this.state.currentPlan);\r\n                            that.props.upDateSearchPlan(a);\r\n                        }\r\n                    }\r\n                    let keySessionS = this.props._this._this.myState.search.keySessionS;\r\n                    if (!isEmpty(keySessionS)) {\r\n                        keySessionS.forEach(item => removeGlobalStorage('localStorage', item));\r\n\r\n                    }\r\n                }\r\n            },\r\n        });\r\n    };\r\n\r\n    let addAjax = () => {\r\n        /* 避免新增方案时有pk */\r\n        if (saveSearchPlanData.hasOwnProperty('pk_ncc_queryscheme')) {\r\n            delete saveSearchPlanData.pk_ncc_queryscheme;\r\n        }\r\n        saveSearchPlanData.isquickqs = false;\r\n        saveSearchPlanData.sequenc =\r\n            ((Array.isArray(this.props.searchPlanCache) && this.props.searchPlanCache.length) || 0) + 1;\r\n        Ajax({\r\n            url: '/nccloud/riart/queryscheme/addQS.do',\r\n            data: saveSearchPlanData,\r\n            success: res => {\r\n                if (res.success) {\r\n                    {\r\n\r\n                        toast({ content: this.multiLang['page-search-0034'], color: 'success' });\r\n                    }\r\n                    // enter 键 关闭modal \r\n                    if (typeof type == 'string' && type == 'enter') {\r\n                        this.props.modal.close('addSearchPlan@' + this.props.moduleId);\r\n                    }\r\n                    saveSearchPlanData.pk_ncc_queryscheme = res.data;\r\n                    this.state.searchPlan.push(_clone(saveSearchPlanData));\r\n                    this.props.searchPlanCacheChange(this.state.searchPlan);\r\n                    this.setState({ searchPlan: this.state.searchPlan });\r\n                    this.state.currentPlan = saveSearchPlanData;\r\n                    if (!this.state.userControlAll) {\r\n                        setSearchPlanName.call(that.props._this._this, that.props.id, saveSearchPlanData.name);\r\n                    }\r\n                    let keySessionS = this.props._this._this.myState.search.keySessionS;\r\n                    if (!isEmpty(keySessionS)) {\r\n                        keySessionS.forEach(item => removeGlobalStorage('localStorage', item));\r\n\r\n                    }\r\n                }\r\n            },\r\n        });\r\n    };\r\n\r\n    if (flag === 'edit') {\r\n        // 修改时，先校验方案名称是否重复 ，重复时，提示。不重复，覆盖 old \r\n        // 修改方案名称 取state 之前的数据 只修改 方案名称\r\n        editAjax();\r\n    } else if (flag === 'save') {\r\n        // 新增时，校验方案名称是否重复 ，重复时，提示。不重复，新增 old \r\n        // 直接保存 \r\n        let currentPlan = this.state.searchPlan.find(item => item.name === this.state.searchPlanName);\r\n        saveSearchPlanData.pk_ncc_queryscheme = currentPlan.pk_ncc_queryscheme;\r\n        saveSearchPlanData.isdefault = currentPlan.isdefault;\r\n        saveSearchPlanData.isquickqs = currentPlan.isquickqs;\r\n        saveSearchPlanData.isprepared = currentPlan.isprepared;\r\n        saveSearchPlanData.isdelete = currentPlan.isdelete;\r\n        saveAjax();\r\n        // checkRepeat();\r\n    } else if (flag === 'add') {\r\n        // 新增 方案 \r\n        addAjax();\r\n    }\r\n}\r\n\r\n/* 删除查询方案确定按钮 */\r\nexport function beSureBtnClick_Del(type, pk_ncc_queryscheme, callback) {\r\n    let pk = null;\r\n    let that = this;\r\n    if (typeof type == 'boolean') {\r\n        this.props = this;\r\n        this.multiLang = this.state.json;\r\n        pk = pk_ncc_queryscheme;\r\n    } else {\r\n        pk = this.state.currentPlan.pk_ncc_queryscheme;\r\n    }\r\n    Ajax({\r\n        url: '/nccloud/riart/queryscheme/deleteQS.do',\r\n        data: { pk_ncc_queryscheme: pk },\r\n        success: res => {\r\n            if (res.success) {\r\n                {\r\n\r\n                    toast({ content: this.multiLang['page-search-0038'], color: 'success' });\r\n                }\r\n                // 外部修改\r\n                if (type) {\r\n                    // let currentMap = this.state.searchInfo.searchPlanCache ;\r\n                    // let currentPlan = currentMap.find(item => item.pk_ncc_queryscheme == pk_ncc_queryscheme);\r\n                    // let i = currentMap.length;\r\n                    // while (i--) {\r\n                    // \tlet item = currentMap[i];\r\n                    // \tif (item.pk_ncc_queryscheme === currentPlan.pk_ncc_queryscheme) {\r\n                    // \t\tcurrentMap.splice(i, 1);\r\n                    // \t\tthis.props.searchPlanCacheChange(currentMap);\r\n                    // \t\tbreak;\r\n                    // \t}\r\n                    // }\r\n                    this.state.searchInfo.searchPlanCache = this.state.searchInfo.searchPlanCache.filter(item => item.pk_ncc_queryscheme != pk_ncc_queryscheme);\r\n                    // 删除时当前方案时  当前置为预制方案\r\n                    this.meta.queryschemes = this.state.searchInfo.searchPlanCache.filter(item => item.pk_ncc_queryscheme != '001');\r\n                    if ((this.state.searchInfo.currentPlan && this.state.searchInfo.currentPlan.pk_ncc_queryscheme) == pk_ncc_queryscheme) {\r\n                        let quickqs = this.state.searchInfo.searchPlanCache.find(item => item.isquickqs);\r\n                        if (quickqs) {\r\n                            this.state.searchInfo.snapshotMap['simple'] = quickqs.renderobj4web;\r\n                            // 快速方案添加到 当前方案\r\n                            this.state.searchInfo.currentPlan = quickqs;\r\n                        } else {\r\n                            this.state.searchInfo.snapshotMap['simple'] = this.state.searchInfo.defaultPlan.renderobj4web;\r\n                            this.state.searchInfo.currentPlan = this.state.searchInfo.defaultPlan;\r\n                        }\r\n                    }\r\n                    let keySessionS = this._this.myState.search.keySessionS;\r\n                    if (!isEmpty(keySessionS)) {\r\n                        keySessionS.forEach(item => removeGlobalStorage('localStorage', item));\r\n\r\n                    }\r\n                    this.setState({ searchInfo: this.state.searchInfo });\r\n                    callback();\r\n                    return;\r\n                }\r\n\r\n                let i = this.state.searchPlan.length;\r\n                while (i--) {\r\n                    let item = this.state.searchPlan[i];\r\n                    if (item.pk_ncc_queryscheme === this.state.currentPlan.pk_ncc_queryscheme) {\r\n                        this.state.searchPlan.splice(i, 1);\r\n                        this.props.searchPlanCacheChange(this.state.searchPlan);\r\n                        break;\r\n                    }\r\n                }\r\n                // 删除外部方案\r\n                if (this.state.currentPlan.pk_ncc_queryscheme == (this.state.searchInfo.currentPlan && this.state.searchInfo.currentPlan.pk_ncc_queryscheme)) {\r\n                    let quickqs = this.state.searchInfo.searchPlanCache.find(item => item.isquickqs);\r\n                    if (quickqs) {\r\n                        that.props.upDateSearchPlan(quickqs);\r\n                    } else {\r\n                        that.props.upDateSearchPlan(this.state.searchInfo.defaultPlan);\r\n                    }\r\n                }\r\n                let keySessionS = this.props._this._this.myState.search.keySessionS;\r\n                if (!isEmpty(keySessionS)) {\r\n                    keySessionS.forEach(item => removeGlobalStorage('localStorage', item));\r\n                }\r\n                this.setState({ searchPlan: this.state.searchPlan });\r\n            }\r\n        },\r\n    });\r\n}\r\n\r\n","import { moment } from '@platform/api';\r\nimport { PubSub } from '@platform/api';\r\nimport { isFunction, isArray, isEmpty, timeFunctionTranslater, DongbaToLocalTime, LocalToDongbaTime, toast, localeLang, isObj } from '@platform/api';\r\n// import { timeFunctionTranslater, DongbaToLocalTime, LocalToDongbaTime } from '../../public/timer';\r\nimport {\r\n    getTimezoneOffset,\r\n    _clone as deepClone,\r\n    getFunctionValueFromViewModal,\r\n    snapshotChangeByTemplate,\r\n    CompareDate,\r\n    isDateFunction,\r\n    naturalTimeHandler,\r\n    plan2snapshotTranslate,\r\n} from './_methods';\r\n// import { _addData } from '../CreateAdvSearch/methods';\r\n// import toast from '../../api/toast';\r\n\r\nlet multiLang = {};\r\n\r\nlet OperationOptions = [];\r\n\r\n/* 检测组件id是否存在 */\r\nfunction checkModuleId(id) {\r\n    if (!this.state.meta.hasOwnProperty(id)) {\r\n        toast({ color: 'danger', content: multiLang['page-search-0043'] });\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\nfunction checkSearchAreaRenderComplete(id) {\r\n    if (!this.state.meta[id].isCompleted) {\r\n        toast({ color: 'danger', content: '请先初始化查询区,再调用查询区方法' });\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n/* 获取具体某个field的值 */\r\nfunction getValueByField(searchId, field, status) {\r\n    let searchInfo = this.state.searchInfo;\r\n    let id = this.props.id;\r\n    let snapshot = searchInfo.snapshotMap[status || searchInfo.status];\r\n    let data = getAllSearchDataEve.call(this, id, snapshot, false);\r\n    if (!data) {\r\n        return { value: { firstvalue: '', secondvalue: '' }, display: '', oprtype: '' };\r\n    }\r\n    // 下面这段不走吧。。\r\n    let len = data.conditions.length;\r\n    if (len <= 0) {\r\n        // {\r\n        // \ttoast({ content: `当前查询区没有查询条件`, color: 'warning' });\r\n        // }\r\n        return { value: { firstvalue: '', secondvalue: '' }, display: '', oprtype: '' };\r\n    }\r\n    // ——————\r\n    let res = { value: { firstvalue: '', secondvalue: '' }, display: '', oprtype: '' };\r\n\r\n    function getvalue(list, field) {\r\n        list.forEach(item => {\r\n            if (item.conditions) {\r\n                getvalue(item.conditions, field);\r\n            } else {\r\n                if (item.field === field) {\r\n                    res.value = item.value;\r\n                    res.display = item.display;\r\n                    res.oprtype = item.oprtype;\r\n                }\r\n            }\r\n        });\r\n    }\r\n    getvalue(data.conditions, field);\r\n    return res;\r\n}\r\n// loop set value \r\nfunction setValue(list, field, data) {\r\n    list.forEach(val => {\r\n        if (val.children && Array.isArray(val.children)) {\r\n            setValue(val.children);\r\n        } else if (val.attrcode === field) {\r\n            val.initialvalue = data;\r\n        }\r\n    });\r\n}\r\n/* 设值查询区某个字段的值 */\r\nfunction setSearchValByFieldEve(searchId, field, data, status) {\r\n    // // 新查询用方案区分 status 其实没有用了 simple narmal super 都处理了\r\n    // let arr =['simple', 'normal', 'super'];\r\n    // if (this.state.searchInfo) {\r\n    // \tlet searchInfo = this.state.searchInfo;\r\n    // \t// let snapshot = searchInfo.snapshotMap[status || searchInfo.status];\r\n    // \tlet searchPlanList = searchInfo.searchPlanCache;\r\n    // \tlet currentPk = searchInfo.currentPlan ? searchInfo.currentPlan.pk_ncc_queryscheme : searchInfo.defaultPlan.pk_ncc_queryscheme;\r\n    // \tlet currentPlan = searchPlanList.find(item => item.pk_ncc_queryscheme == currentPk)['renderobj4web']\r\n    // \tif (!data) {\r\n    // \t\tdata = {\r\n    // \t\t\tvalue: '',\r\n    // \t\t\tdisplay: ''\r\n    // \t\t};\r\n    // \t}\r\n    // \tarr.map(item => {\r\n    // \t\tlet current = searchInfo.snapshotMap[item]\r\n    // \t\tif (isEmpty(current)) {\r\n    // \t\t\tsearchInfo.snapshotCache[item || searchInfo.status][field] = data;\r\n    // \t\t} else {\r\n    // \t\t\tsetValue(current, field, data);\r\n    // \t\t}\r\n    // \t})\r\n    // \t// if (isEmpty(snapshot)) {\r\n    // \t// \tsearchInfo.snapshotCache[status || searchInfo.status][field] = data;\r\n    // \t// } else {\r\n    // \t// \tsetValue(snapshot, field, data);\r\n    // \t// }\r\n    // \t// 放到当前方案的 cach 当中\r\n    // \tif (!isEmpty(currentPlan)) {\r\n    // \t\tsetValue(currentPlan, field, data);\r\n    // \t}\r\n    // \tthis.setState({\r\n    // \t\tsearchInfo: searchInfo\r\n    // \t});\r\n    // } else {\r\n    // \tconsole.error('setSearchValByField方法没有找到searchId');\r\n    // \treturn false;\r\n    // }\r\n    if (this.state.searchInfo) {\r\n        let searchInfo = this.state.searchInfo;\r\n        let snapshot = searchInfo?.currentPlan?.renderobj4web_snap || searchInfo.snapshotMap[status || searchInfo.status];\r\n\r\n        if (!data) {\r\n            data = {\r\n                value: '',\r\n                display: '',\r\n            };\r\n        }\r\n        //将业务组赋值全部存起来，by xiquanquan\r\n        // searchInfo.snapshotCache[status || searchInfo.status][field] = data;\r\n        if (isEmpty(snapshot)) {\r\n            searchInfo.snapshotCache[status || searchInfo.status][field] = data;\r\n        } else {\r\n            function setValue(list) {\r\n                list.forEach(val => {\r\n                    if (val.children && Array.isArray(val.children)) {\r\n                        setValue(val.children);\r\n                    } else if (val.attrcode === field) {\r\n                        val.initialvalue = data;\r\n                    }\r\n                });\r\n            }\r\n            setValue(snapshot);\r\n            this.setState({ searchInfo });\r\n        }\r\n\r\n    } else {\r\n        console.error('setSearchValByField方法没有找到searchId');\r\n        return false;\r\n    }\r\n}\r\nfunction ArrayHas2Value(value) {\r\n    let result = true;\r\n    if (!Array.isArray(value) || value.length != 2 || isEmpty(value[0]) || isEmpty(value[1])) result = false;\r\n    return result;\r\n}\r\nexport function setMultiLang(_multiLang) {\r\n    multiLang = _multiLang;\r\n}\r\n\r\nexport function setMultiLangHigh(_multiLang) {\r\n    multiLang = _multiLang;\r\n    if (isEmpty(OperationOptions)) {\r\n        OperationOptions = [\r\n            {\r\n                display: multiLang['page-search-0047'],\r\n                value: '=',\r\n            },\r\n            {\r\n                display: multiLang['page-search-0047'],\r\n                value: '==',\r\n            },\r\n            {\r\n                display: multiLang['page-search-0048'],\r\n                value: '>',\r\n            },\r\n            {\r\n                display: multiLang['page-search-0049'],\r\n                value: '<',\r\n            },\r\n            {\r\n                display: multiLang['page-search-0050'],\r\n                value: 'between',\r\n            },\r\n            {\r\n                display: multiLang['page-search-0051'],\r\n                value: '>=',\r\n            },\r\n            {\r\n                display: multiLang['page-search-0052'],\r\n                value: '<=',\r\n            },\r\n            {\r\n                display: multiLang['page-search-0053'],\r\n                value: '<>',\r\n            },\r\n            {\r\n                display: multiLang['page-search-0054'],\r\n                value: 'like',\r\n            },\r\n            {\r\n                display: multiLang['page-search-0055'],\r\n                value: 'left like',\r\n            },\r\n            {\r\n                display: multiLang['page-search-0056'],\r\n                value: 'right like',\r\n            },\r\n            {\r\n                display: multiLang['page-search-0057'],\r\n                value: 'is null',\r\n            },\r\n            {\r\n                display: multiLang['page-search-0084'],\r\n                value: 'not like',\r\n            },\r\n            {\r\n                display: multiLang['page-search-0085'],\r\n                value: 'is not null',\r\n            },\r\n        ];\r\n    }\r\n}\r\n\r\n/* 获取查询区 所有数据 */\r\nexport function getAllSearchDataEve(id, snapshot, flag, logic = 'and') {\r\n    let callBackMeta = [];\r\n    let searchInfo = this.state.searchInfo;\r\n\r\n    // 必填校验时 把所有必填校验未通过都标红 \t\r\n    let requiredArr = [];\r\n\r\n    // 这个for 循环的逻辑太复杂了 没办法 必须把 校验逻辑抽出来\r\n    for (let i = 0; i < snapshot.length; i++) {\r\n        if (snapshot[i].children && Array.isArray(snapshot[i].children)) {\r\n\r\n            if (i == 0 && snapshot[i].attrcode == 'root') {\r\n                return getAllSearchDataEve.call(this, id, snapshot[i].children, flag, snapshot[i].operationSign);\r\n            } else {\r\n                callBackMeta.push(getAllSearchDataEve.call(this, id, snapshot[i].children, flag, snapshot[i].operationSign));\r\n                continue;\r\n            }\r\n\r\n        }\r\n        let attrcode = snapshot[i].attrcode;\r\n        let val = searchInfo.itemsMap[attrcode];\r\n        let VALUE = snapshot[i].initialvalue;\r\n        let displayVal = VALUE.display || '';\r\n        let optSign = snapshot[i].operationSign;\r\n        let isIncludeSub = snapshot[i].runWithChildren || false;\r\n        let refurl = snapshot[i].refurl || '';\r\n        let timeFunction = '';\r\n\r\n        if (displayVal && snapshot[i].runWithChildren) {\r\n            displayVal = displayVal + multiLang['page-search-0044'];\r\n        }\r\n\r\n        let data = {\r\n            firstvalue: '',\r\n            secondvalue: '',\r\n        };\r\n\r\n        if (val.required && flag && snapshot[i].visible) {\r\n            let isKong = false;\r\n            if (isEmpty(VALUE.value) || (Array.isArray(VALUE.value) && !ArrayHas2Value(VALUE.value))) {\r\n                if (optSign != 'is null' && optSign != 'is not null') { isKong = true; }\r\n\r\n            }\r\n            if (isKong) {\r\n                callBackMeta = [];\r\n                requiredArr.push(val.attrcode);\r\n            }\r\n        }\r\n        if ((val.itemtype === 'rangepicker' || ((val.itemtype === 'datepicker' || val.itemtype === 'NCTZDatePickerEnd' || val.itemtype === 'NCTZDatePickerStart' || val.itemtype === 'datetimepicker') && optSign === 'between')) && VALUE) {\r\n            let vals = VALUE.value;\r\n\r\n            if (vals && !isArray(vals)) {\r\n                vals = vals.split(',');\r\n            }\r\n            //给报表平台加的逻辑，如果是函数，则将函数直接传给后台\r\n            if (isDateFunction(vals[0])) {\r\n                timeFunction = vals.join(',');\r\n            }\r\n            if (vals && isArray(vals)) {\r\n                if (vals.length > 0 && vals[0] && vals[0].format) {\r\n                    // 多时区转化\r\n                    let start = vals[0].format('YYYY-MM-DD');\r\n                    let end = vals[1].format('YYYY-MM-DD');\r\n                    // 1 开始时间\r\n                    let currentZoneStartTime = moment(start).startOf('day').toDate();\r\n                    let currentZoneStartHours = currentZoneStartTime.getHours();\r\n                    let offsetZone = currentZoneStartTime.getTimezoneOffset() / 60;\r\n                    // 2 结束时间\r\n                    let currentZoneEndTime = moment(end).endOf('day').toDate();\r\n                    let currentZoneEndHours = currentZoneEndTime.getHours();\r\n                    // 当地时间转换为东八区时间\r\n                    offsetZone = offsetZone + 8;\r\n                    currentZoneStartTime.setHours(currentZoneStartHours + offsetZone);\r\n                    currentZoneEndTime.setHours(currentZoneEndHours + offsetZone);\r\n                    //   newData.firstvalue = moment(currentZoneStartTime).format('YYYY-MM-DD HH:mm:ss');\r\n                    //   newData.secondvalue = moment(currentZoneEndTime).format('YYYY-MM-DD HH:mm:ss');\r\n\r\n                    data.firstvalue = moment(currentZoneStartTime).format('YYYY-MM-DD HH:mm:ss');\r\n                    data.secondvalue = moment(currentZoneEndTime).format('YYYY-MM-DD HH:mm:ss');\r\n\r\n                    // newVal.push(value.format('YYYY-MM-DD'));\r\n                } else if (vals.length > 0 && vals[0] && !vals[0].format) {\r\n                    data.firstvalue = vals[0];\r\n                    data.secondvalue = vals[1];\r\n                } else if (vals.length === 0) {\r\n                    data.firstvalue = '';\r\n                    data.secondvalue = '';\r\n                }\r\n            }\r\n        } else if (val.itemtype === 'refer') {\r\n            VALUE = getFunctionValueFromViewModal(VALUE, this.props.context);\r\n            //参照函数翻译完成之后 有可能 出现翻译不出来的情况 ，翻译不出来 再次做一次必填校验吧\r\n            if (val.required && flag && snapshot[i].visible) {\r\n                if (!VALUE.value && VALUE.value !== 0) {\r\n                    callBackMeta = [];\r\n                    if (!requiredArr.includes(val.attrcode)) requiredArr.push(val.attrcode);\r\n                }\r\n            }\r\n            if (optSign === 'between') {\r\n                data.firstvalue = (VALUE.value || [])[0] || '';\r\n                data.secondvalue = (VALUE.value || [])[1] || '';\r\n                displayVal = (VALUE.display || []).join(',');\r\n            } else {\r\n                displayVal = VALUE.display;\r\n                data.firstvalue = VALUE.value;\r\n            }\r\n        } else if (\r\n            (val.itemtype === 'select' ||\r\n                val.itemtype === 'number' ||\r\n                val.itemtype === 'datetimepicker' ||\r\n                val.itemtype === 'NCTZDatePickerEnd' ||\r\n                val.itemtype === 'NCTZDatePickerStart') &&\r\n            optSign === 'between'\r\n        ) {\r\n            data.firstvalue = (VALUE.value || [])[0];\r\n            data.secondvalue = (VALUE.value || [])[1];\r\n            displayVal = (VALUE.display || [])[0] + '~' + (VALUE.display || [])[1];\r\n        } else {\r\n            data.firstvalue = VALUE.value;\r\n        }\r\n        let timeItemList = [\r\n            'datepicker',\r\n            'datetimepicker',\r\n            'rangepicker',\r\n            'NCTZDatePickerStart',\r\n            'NCTZDatePickerEnd',\r\n            'NCTZDatePickClientTime',\r\n            'NCTZDatePickClientHourTime',\r\n            'NCTZDatePickerRangeDay',\r\n            'datePickerNoTimeZone',\r\n        ];\r\n        // 需要从东八区时间处理当地时间，然后计算0点和24点，按照当地时间得0点和24点分别转为东八区时间\r\n        const localToEast = ['datepicker', 'datetimepicker', 'NCTZDatePickClientTime', 'NCTZDatePickClientHourTime'];\r\n        // 开始 和结束时间是时间戳概念  操作符为 = 时不需要进行扩充为日期范围\r\n        const timeStampType = ['NCTZDatePickerStart', 'NCTZDatePickerEnd', 'datetimepicker'];\r\n        if (timeItemList.some(item => item === val.itemtype) && !isEmpty(VALUE.value)) {\r\n            //xuyangt 需要优化此处逻辑 很混乱\r\n            let firstvalue = '',\r\n                secondvalue = '';\r\n            if (isDateFunction(data.firstvalue) && !data.secondvalue) {\r\n                timeFunction = data.firstvalue;\r\n            }\r\n            if (isDateFunction(data.firstvalue) || isDateFunction(data.secondvalue)) {\r\n                if (optSign == '=' || optSign == '<>') {\r\n                    // start 取开始时间戳 end时 取结束时间戳\r\n                    if (timeStampType.includes(val.itemtype)) {\r\n                        if (val.itemtype === 'NCTZDatePickerEnd') {\r\n                            firstvalue = timeFunctionTranslater(data.firstvalue, { flag: false });\r\n                        } else {\r\n                            firstvalue = timeFunctionTranslater(data.firstvalue);\r\n                        }\r\n                    } else {\r\n                        firstvalue = timeFunctionTranslater(data.firstvalue);\r\n                        secondvalue = timeFunctionTranslater(data.firstvalue, { flag: false });\r\n                    }\r\n                } else if (optSign == '<' || optSign == '>=') {\r\n                    firstvalue = timeFunctionTranslater(data.firstvalue);\r\n                } else if (optSign == '>' || optSign == '<=') {\r\n                    firstvalue = timeFunctionTranslater(data.firstvalue, { flag: false });\r\n                } else if (optSign == 'between') {\r\n                    if (!isEmpty(data.firstvalue)) {\r\n                        firstvalue = timeFunctionTranslater(data.firstvalue);\r\n                    }\r\n                    if (!isEmpty(data.secondvalue)) {\r\n                        secondvalue = timeFunctionTranslater(data.secondvalue, { flag: false });\r\n                    }\r\n                }\r\n\r\n            } else {\r\n                if (optSign == '=' || optSign == '<>') {\r\n                    if (!timeStampType.includes(val.itemtype)) {\r\n                        // datepicker datepicker 需要处理时区从东八区时间转换为当地时间 计算当天时间[00:00:00, 23:59:59]在转换为东八区时间\r\n                        if (localToEast.includes(val.itemtype) && !isDateFunction(data.firstvalue)) {\r\n                            firstvalue = DongbaToLocalTime(moment(data.firstvalue)).format('YYYY-MM-DD 00:00:00');\r\n                            secondvalue = moment(firstvalue).format('YYYY-MM-DD 23:59:59');\r\n\r\n                            // 转为东八区时间 \r\n                            firstvalue = LocalToDongbaTime(moment(firstvalue)).format('YYYY-MM-DD HH:mm:ss');\r\n                            secondvalue = LocalToDongbaTime(moment(secondvalue)).format('YYYY-MM-DD HH:mm:ss');\r\n                        } else {\r\n                            // start end 类型暂未处理\r\n                            firstvalue = moment(data.firstvalue).format('YYYY-MM-DD 00:00:00');\r\n                            secondvalue = timeFunctionTranslater(moment(data.firstvalue).format('YYYY-MM-DD 23:59:59'));\r\n                        }\r\n                    } else {\r\n                        firstvalue = data.firstvalue;\r\n                        secondvalue = firstvalue;\r\n                    }\r\n\r\n                } else if (optSign == '<' || optSign == '>=') {\r\n                    firstvalue = naturalTimeHandler(data.firstvalue, 'start');\r\n                } else if (optSign == '>' || optSign == '<=') {\r\n                    firstvalue = naturalTimeHandler(data.firstvalue, 'end');\r\n                } else if (optSign == 'between') {\r\n                    if (!isEmpty(data.firstvalue)) {\r\n                        firstvalue = naturalTimeHandler(data.firstvalue, 'start');\r\n                    }\r\n                    if (!isEmpty(data.secondvalue)) {\r\n                        secondvalue = naturalTimeHandler(data.secondvalue, 'end');\r\n                    }\r\n                }\r\n                //如果存在两个值，做一下端点值大小的判断和调整\r\n                if (firstvalue && secondvalue && CompareDate(firstvalue, secondvalue)) {\r\n                    firstvalue = timeFunctionTranslater(secondvalue);\r\n                    secondvalue = timeFunctionTranslater(firstvalue, { flag: false });\r\n                }\r\n            }\r\n            if (optSign == '=') {\r\n                optSign = 'between';\r\n            }\r\n            data.firstvalue = firstvalue;\r\n            data.secondvalue = secondvalue;\r\n\r\n        }\r\n        if (!val.hasOwnProperty('queryOperateType')) {\r\n            val.queryOperateType = '';\r\n            console.error(`查询模板中必须要有queryOperateType字段，请检查模板中${val.attrcode}字段`);\r\n        }\r\n        //增加去除前后空格的逻辑 目前 ‘ ’作为例外情况处理\r\n        if (data.firstvalue && typeof data.firstvalue === 'string' && data.firstvalue !== ' ') {\r\n            data.firstvalue = data.firstvalue.trim();\r\n        }\r\n        if (data.secondvalue && typeof data.firstvalue === 'string' && data.secondvalue !== ' ') {\r\n            data.secondvalue = data.secondvalue.trim();\r\n        }\r\n        let Obj = {\r\n            field: attrcode,\r\n            value: data,\r\n            oprtype: optSign,\r\n            display: String(displayVal || '').replace(/~/, ','),\r\n            isIncludeSub,\r\n            refurl,\r\n            datatype: val.datatype || '',\r\n            timeFunction,\r\n            def5: val.label,\r\n        };\r\n        if (val.itemtype === 'residtxt') {\r\n            Obj.langSeq = VALUE.index;\r\n        }\r\n        if (!isEmpty(Obj.value.firstvalue) || !isEmpty(Obj.value.secondvalue) || optSign == 'is null' || optSign == 'is not null') {\r\n            snapshot[i].visible && callBackMeta.push(Obj);\r\n        }\r\n    }\r\n\r\n    if (requiredArr.length !== 0) {\r\n        {\r\n            toast({ content: multiLang['page-search-0045'], color: 'warning' });\r\n        }\r\n        PubSub.publish('searchRequired', requiredArr);\r\n        return false;\r\n    }\r\n\r\n    return {\r\n        logic,\r\n        conditions: callBackMeta,\r\n    };\r\n}\r\n\r\n/*设置查询区数据*/\r\nfunction setSearchValueEve(id, data, cb) {\r\n    let searchInfo = this.state.searchInfo;\r\n    // let snapshot = searchInfo.snapshotMap[searchInfo.status];\r\n    let snapshot = searchInfo?.currentPlan?.renderobj4web_snap || searchInfo.snapshotMap[searchInfo.status];\r\n    let items = snapshot;\r\n    let datas = data;\r\n    if (datas.conditions) {\r\n        datas = datas.conditions;\r\n    }\r\n    if (!isArray(datas)) {\r\n        console.error('setSearchValue方法第二个参数不正确');\r\n        return false;\r\n    }\r\n    const findItem = item => {\r\n        let len = items.length;\r\n        while (len--) {\r\n            if (items[len].attrcode === item.field) {\r\n                items[len].initialvalue = items[len].initialvalue || {};\r\n                if (item.oprtype === 'between') {\r\n                    items[len].initialvalue.value = [item.value.firstvalue, item.value.secondvalue];\r\n                    //items[len].initialvalue.display = [item.value.firstvalue, item.value.secondvalue];\r\n                } else {\r\n                    items[len].initialvalue.value = item.value.firstvalue;\r\n                    items[len].initialvalue.display = item.display;\r\n                }\r\n                //下面的逻辑是为了处理 反写日期函数时转为具体时间的bug\r\n                if (item.timeFunction) {\r\n                    if (item.timeFunction.includes(',')) {\r\n                        items[len].initialvalue.value = item.timeFunction.split(',');\r\n                    } else {\r\n                        items[len].initialvalue.value = item.timeFunction;\r\n                        items[len].initialvalue.display = '';\r\n                    }\r\n                }\r\n                items[len].operationSign = item.oprtype;\r\n                items[len].runWithChildren = item.isIncludeSub || false;\r\n                items[len].refurl = item.refurl || '';\r\n                break;\r\n            }\r\n        }\r\n    };\r\n    datas.map(item => {\r\n        findItem(item);\r\n    });\r\n    if (searchInfo?.currentPlan?.renderobj4web_snap) {\r\n        searchInfo.snapshotMap[searchInfo.status] = searchInfo.currentPlan.renderobj4web_snap;\r\n    }\r\n    this.setState(\r\n        { searchInfo },\r\n        () => {\r\n            typeof cb === 'function' && cb();\r\n        },\r\n    );\r\n}\r\n\r\n/* 清空查询区 */\r\nfunction clearSearchAreaEve(moduleId) {\r\n    let searchInfo = this.state.searchInfo;\r\n    let data = searchInfo.snapshotMap[searchInfo.status];\r\n    let len = data.length;\r\n    while (len--) {\r\n        if (data[len].initialvalue.index !== undefined) {\r\n            data[len].initialvalue = {\r\n                value: '',\r\n                display: '',\r\n                index: data[len].initialvalue.index\r\n            }\r\n            let valMap = data[len].valueMap\r\n            if (valMap) {\r\n                for (const key in valMap) {\r\n                    let current = valMap.current;\r\n                    let index = valMap.index;\r\n                    valMap[key] = {\r\n                        current: current,\r\n                        index: index,\r\n                        value: ''\r\n                    }\r\n                }\r\n            }\r\n\r\n        } else {\r\n            data[len].initialvalue = {\r\n                value: '',\r\n                display: '',\r\n            }\r\n        }\r\n    }\r\n    this.setState({ searchInfo });\r\n}\r\n\r\n/* 设置某个字段是否可用 */\r\nfunction setDisabledByFieldEve(moduleId, field, status) {\r\n    let meta = this._this.meta.getMeta() || {};\r\n\r\n    let data = meta[moduleId].items;\r\n    let len = data.length;\r\n    while (len--) {\r\n        let item = data[len];\r\n        if (item.attrcode === field) {\r\n            item.disabled = status;\r\n            break;\r\n        }\r\n    }\r\n    this._this.meta.setMeta(meta);\r\n}\r\n/* 设置某个字段是否必填*/\r\nfunction setRequiredByFieldEve(moduleId, field, status) {\r\n    let meta = this._this.meta.getMeta() || {};\r\n\r\n    let data = meta[moduleId].items;\r\n    let len = data.length;\r\n    while (len--) {\r\n        let item = data[len];\r\n        if (item.attrcode === field) {\r\n            item.required = !!status;\r\n            break;\r\n        }\r\n    }\r\n    this._this.meta.setMeta(meta);\r\n}\r\nfunction _setTemlateByField(moduleId, field, property, value) {\r\n    let meta = this._this.meta.getMeta() || {};\r\n\r\n    let data = meta[moduleId].items;\r\n    let len = data.length;\r\n    while (len--) {\r\n        let item = data[len];\r\n        if (item.attrcode === field) {\r\n            item[property] = value;\r\n            break;\r\n        }\r\n    }\r\n    this._this.meta.setMeta(meta);\r\n\r\n}\r\nfunction getOprtypeByFieldEve(moduleId, field) {\r\n    let searchInfo = this.state.searchInfo;\r\n    let data = searchInfo.snapshotMap[searchInfo.status];\r\n    function getValue(list, result = []) {\r\n        list.forEach(item => {\r\n            if (item.children) {\r\n                getValue(item.children, result);\r\n            } else {\r\n                if (item.attrcode === field) {\r\n                    result.push(item.operationSign);\r\n                }\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n\r\n    return getValue(data);\r\n}\r\n\r\n/*=======================================以下为输出方法=============================*/\r\n/*\r\n*\t因为查询区有3种展示状态，所以需要根据当前状态判断业务组操作的是在哪种状态下进行的。\r\n*\r\n*\t@ 规则：\r\n*\t1、当高级面板展开 或者 展示查询方案时,取高级面板中的 普通或高级中的数据\r\n*\t2、当高级面板收起 并且 不展示查询方案时，取外面简单查询区的值\r\n*\r\n*\t@ 状态：\r\n*\t高级面板显影性：  \t\t\tsearchInfo.showAdvModal   ( true/false )\r\n*\t高级面板当前是普通或高级：  searchInfo.advSearchStatus\t（normal/super）\r\n*\r\n* */\r\n\r\n/* 获取查询区所有数据 */\r\nexport function getAllSearchData(moduleId, flag = true) {\r\n    let f = checkModuleId.call(this, moduleId);\r\n    if (!f) return;\r\n    let _this = this.myState.search[`searchArea_${moduleId}`];\r\n    if (!_this) return null;\r\n    let searchInfo = _this.state.searchInfo;\r\n    let snapshot = searchInfo.snapshotMap[searchInfo.status];\r\n    return getAllSearchDataEve.call(_this, moduleId, snapshot, flag);\r\n}\r\n\r\nexport function getQueryInfo(moduleId, flag = true) {\r\n    // let _this = this.myState.search[`searchArea_${moduleId}`];\r\n    if (isEmpty(this.state.meta[moduleId])) {\r\n        // toast({ content: multiLang['page-search-0046'], color: 'warning' });\r\n        return {};\r\n    } else {\r\n        let data = getAllSearchData.call(this, moduleId, flag);\r\n        if (data) {\r\n            return {\r\n                queryAreaCode: moduleId,\r\n                oid: this.state.meta[moduleId].oid,\r\n                querytype: 'tree',\r\n                querycondition: data,\r\n                nctz: getTimezoneOffset(),\r\n            };\r\n        } else {\r\n            return {};\r\n        }\r\n\r\n    }\r\n}\r\n\r\n/* 设置查询区具体某个字段数据 */\r\nexport function setSearchValByField(moduleId, field, data, status) {\r\n    let f = checkModuleId.call(this, moduleId);\r\n    if (!f) {\r\n        return;\r\n    }\r\n    let statusList = ['simple', 'plan', 'normal', 'super'];\r\n\r\n    if (status && !statusList.some(item => item === status)) {\r\n        status = '';\r\n    }\r\n    let _this = this.myState.search[`searchArea_${moduleId}`];\r\n    setSearchValByFieldEve.call(_this, moduleId, field, data, status);\r\n}\r\n\r\n/* 设置查询区数据 */\r\nexport function setSearchValue(moduleId, data, cb) {\r\n    let f = checkModuleId.call(this, moduleId);\r\n    if (!f) return;\r\n    let _this = this.myState.search[`searchArea_${moduleId}`];\r\n    setSearchValueEve.call(_this, moduleId, data, cb);\r\n}\r\n\r\n/*\r\n*\t获取表格某个字段的数据\r\n* */\r\nexport function getSearchValByField(moduleId, field, status) {\r\n    let f = checkModuleId.call(this, moduleId);\r\n    if (!f) return;\r\n    let statusList = ['simple', 'plan', 'normal', 'super'];\r\n    if (status && !statusList.some(item => item === status)) {\r\n        status = '';\r\n    }\r\n    let _this = this.myState.search[`searchArea_${moduleId}`];\r\n    return getValueByField.call(_this, moduleId, field, status);\r\n}\r\n\r\n/*\r\n* \t设置某个查询条件是否可用\r\n* \t@ field：控件的attrcode\r\n*  \t@ status: true可用；false不可用\r\n* */\r\nexport function setDisabledByField(moduleId, field, status) {\r\n    let f = checkModuleId.call(this, moduleId);\r\n    if (!f) return;\r\n    let _this = this.myState.search[`searchArea_${moduleId}`];\r\n    setDisabledByFieldEve.call(_this, moduleId, field, status);\r\n}\r\n\r\n/* 关闭查询方案区域 ，内部使用*/\r\nexport function closeSearchPlanArea(moduleId) {\r\n    let f = checkModuleId.call(this, moduleId);\r\n    if (!f) return;\r\n    let _this = this.myState.search[`searchArea_${moduleId}`];\r\n    _this.state.searchInfo.status = 'simple';\r\n    _this.setState({ searchInfo: _this.state.searchInfo });\r\n}\r\n\r\n/* 打开/关闭 高级查询面板 */\r\nexport function openAdvSearch(moduleId, status, callback) {\r\n    let f = checkModuleId.call(this, moduleId);\r\n    if (!f) return;\r\n    //this.state.meta[moduleId].showAdvModal = status;\r\n    let _this = this.myState.search[`searchArea_${moduleId}`];\r\n    if (status) {\r\n        _this.state.searchAdvBtnClick(_this.state.searchInfo);\r\n    }\r\n    _this.setState({ searchInfo: _this.state.searchInfo }, callback);\r\n}\r\n\r\n/* 设置查询区不可编辑 */\r\nexport function setDisabled(moduleId, status) {\r\n    let f = checkModuleId.call(this, moduleId);\r\n    if (!f) return;\r\n    let data = this.state.meta[moduleId].items;\r\n    let len = data.length;\r\n    while (len--) {\r\n        let item = data[len];\r\n        item.disabled = status;\r\n    }\r\n    this.setState({ meta: this.state.meta });\r\n}\r\n\r\n/* 清空查询区方法 */\r\nexport function clearSearchArea(moduleId) {\r\n    let f = checkModuleId.call(this, moduleId);\r\n    if (!f) return;\r\n    let _this = this.myState.search[`searchArea_${moduleId}`];\r\n    clearSearchAreaEve.call(_this, moduleId);\r\n}\r\n/* 获取查询条件的操作符 */\r\nexport function getOprtypeByField(moduleId, field) {\r\n    let f = checkModuleId.call(this, moduleId);\r\n    if (!f) return;\r\n    let _this = this.myState.search[`searchArea_${moduleId}`];\r\n    return getOprtypeByFieldEve.call(_this, moduleId, field);\r\n}\r\n/* 修改条件可见性 */\r\nexport function changeItemVisibleByField(moduleId, field, _status = false) {\r\n    let f = checkModuleId.call(this, moduleId);\r\n    if (!f) return;\r\n    let _this = this.myState.search[`searchArea_${moduleId}`];\r\n    let searchInfo = _this.state.searchInfo;\r\n    let { isDefaultPlan, snapshotMap, status } = searchInfo;\r\n\r\n    let items = this.state.meta[moduleId].items;\r\n\r\n    if (isDefaultPlan) {\r\n        let context = _this.props.context;\r\n        items.find(item => item.attrcode === field).visible = _status;\r\n        Object.keys(snapshotMap).forEach(key => {\r\n            if (status == key) {\r\n                let snapshot = snapshotMap[key];\r\n                if (key == 'super') {\r\n                    snapshotMap[key] = _addData.call(_this, items, 'super');\r\n                } else {\r\n                    snapshotMap[key] = snapshotChangeByTemplate(snapshot, items, context);\r\n                }\r\n            }\r\n        });\r\n\r\n    } else {\r\n        if (_status) {\r\n            const ITEM = items.find(item => item.attrcode === field);\r\n            const obj = {\r\n                key: field,\r\n                attrcode: field,\r\n                initialvalue: { display: \"\", value: \"\" },\r\n                isExtend: false,\r\n                isfixedcondition: false,\r\n                label: ITEM.label,\r\n                operationOptions: ITEM.queryOperateType.split('@'),\r\n                operationSign: ITEM.queryOperateType.split('@')[0],\r\n                remove: true,\r\n                visible: true,\r\n            };\r\n            snapshotMap[status].push(obj);\r\n        } else {\r\n            snapshotMap[status] = snapshotMap[status].filter(item => item.attrcode != field);\r\n        }\r\n\r\n    }\r\n    _this.setState({ searchInfo });\r\n\r\n}\r\n/*修改查询模板必输性 */\r\nexport function setRequiredByField(moduleId, field, status) {\r\n    let f = checkModuleId.call(this, moduleId);\r\n    if (!f) return;\r\n    let _this = this.myState.search[`searchArea_${moduleId}`];\r\n    setRequiredByFieldEve.call(_this, moduleId, field, status);\r\n}\r\n/*修改查询模板属性 */\r\nexport function setTemlateByField(moduleId, field, property, value) {\r\n    let f = checkModuleId.call(this, moduleId);\r\n    if (!f) return;\r\n    let _this = this.myState.search[`searchArea_${moduleId}`];\r\n    _setTemlateByField.call(_this, moduleId, field, property, value);\r\n}\r\n\r\nexport function _addData(_items, status, callback, isTemplateOrder) {\r\n    let searchInfo = this.state.searchInfo;\r\n    let advancedData = searchInfo.snapshotMap[status];\r\n    let targetPk = searchInfo.targetKey;\r\n    let result = [];\r\n    if (status === 'normal') {\r\n        targetPk = null;\r\n    }\r\n    if (isArray(_items)) {\r\n        //数组，代表初始化区域\r\n        let items = _items.filter((item, index) => {\r\n            if (!(Number(item.visibleposition) > 0)) {\r\n                item.visibleposition = 99999 + index;\r\n            }\r\n            return (item.visible || item.isfixedcondition) && item.isdrag;\r\n        });\r\n        const requireList = [];\r\n        const fiexedList = [];\r\n        const otherList = [];\r\n\r\n        items.forEach((item, index) => {\r\n            if (!(Number(item.visibleposition) > 0)) {\r\n                item.visibleposition = 99999 + index;\r\n            }\r\n            if (item.isfixedcondition) {\r\n                fiexedList.push(item);\r\n            } else if (item.required) {\r\n                requireList.push(item);\r\n            } else {\r\n                otherList.push(item);\r\n            }\r\n        });\r\n\r\n        fiexedList.sort((v1, v2) => Number(v1.visibleposition) - Number(v2.visibleposition));\r\n        if (isTemplateOrder) {\r\n            const notFixed = requireList.concat(otherList).sort((v1, v2) => Number(v1.visibleposition) - Number(v2.visibleposition));\r\n            items = fiexedList.concat(notFixed);\r\n\r\n        } else {\r\n\r\n            requireList.sort((v1, v2) => Number(v1.visibleposition) - Number(v2.visibleposition));\r\n            otherList.sort((v1, v2) => Number(v1.visibleposition) - Number(v2.visibleposition));\r\n            items = fiexedList.concat(requireList).concat(otherList);\r\n        }\r\n\r\n        // fiexedList.sort((v1, v2) => Number(v1.visibleposition) - Number(v2.visibleposition));\r\n        // requireList.sort((v1, v2) => Number(v1.visibleposition) - Number(v2.visibleposition));\r\n        // otherList.sort((v1, v2) => Number(v1.visibleposition) - Number(v2.visibleposition));\r\n        // items = fiexedList.concat(requireList).concat(otherList);\r\n\r\n        let data = items.map(item => {\r\n            let remove = item.required != true && item.isfixedcondition != true;\r\n            if (searchInfo.snapshotCache && searchInfo.snapshotCache[searchInfo.status] && searchInfo.snapshotCache[searchInfo.status][item.attrcode]) {\r\n                item.initialvalue = searchInfo.snapshotCache[searchInfo.status][item.attrcode];\r\n            }\r\n            return initData(item, remove);\r\n        });\r\n\r\n        if (status === 'normal') {\r\n            // 普通区域\r\n            searchInfo.snapshotMap[status] = data;\r\n        } else if (data.length > 0 && data[0].refpk !== 'root') {\r\n            //高级区域\r\n            // 如果新增的数据是数组，并且是高级区域,外层没有根节点时，需要在外层添加一个逻辑运算符根节点，且不可移除。\r\n            searchInfo.snapshotMap[status] = [\r\n                {\r\n                    attrcode: 'root',\r\n                    refpk: 'root',\r\n                    key: 'root',\r\n                    operationSign: 'and',\r\n                    noRemove: true, //不可移除\r\n                    children: data,\r\n                    visible: true,\r\n                },\r\n            ];\r\n        }\r\n        isFunction(callback) && callback(status);\r\n        result = searchInfo.snapshotMap[status];\r\n\r\n    } else if (isObj(_items)) {\r\n        // 对象代表拖拽添加元素\r\n        //if (_items.isfixedcondition) return;\r\n        let data = initData(_items, true);\r\n        data.isExtend = false;\r\n        if (!advancedData.length) {\r\n            // 数据为空，拖拽到高级区域时需要初始化数据\r\n            if (status === 'normal') {\r\n                searchInfo.snapshotMap[status] = [data];\r\n            } else {\r\n                // 如果新增的数据是数组，并且是高级区域,外层没有根节点时，需要在外层添加一个逻辑运算符根节点，且不可移除。\r\n                searchInfo.snapshotMap[status] = [\r\n                    {\r\n                        attrcode: 'root',\r\n                        refpk: 'root',\r\n                        operationSign: 'and',\r\n                        noRemove: true, //不可移除\r\n                        children: [data],\r\n                        visible: true,\r\n                    },\r\n                ];\r\n            }\r\n            result = searchInfo.snapshotMap[status];\r\n        } else {\r\n            if (status === 'super' && searchInfo.targetKey) {\r\n                let tempItem = searchInfo.itemsMap[searchInfo.targetKey];\r\n                // let targSnopItem  = \r\n                if (tempItem) {\r\n\r\n                    if (tempItem.visible && (searchInfo.targetIsExtend)) {\r\n                        toast({ content: multiLang['page-search-0091'], color: 'warning' });\r\n                        return null;\r\n                    } else if (tempItem.visible && (tempItem.required)) {\r\n                        toast({ content: multiLang['page-search-0058'], color: 'warning' });\r\n                        return null;\r\n                    }\r\n                }\r\n            }\r\n            addDataEve.call(this, advancedData, data, targetPk, status);\r\n        }\r\n    }\r\n    setStateEve.call(this);\r\n    return result;\r\n}\r\n\r\nexport function _getAllSearchData(id, searchInfo, flag) {\r\n    let snapshot = searchInfo.snapshotMap[searchInfo.status];\r\n    //searchInfo.currentData = JSON.parse(JSON.stringify(snapshot));\r\n    searchInfo.currentData = createCurrentData.call(this, id, snapshot, flag);\r\n    if (searchInfo.currentData === false) {\r\n        return false;\r\n    }\r\n    checkResult(searchInfo.currentData);\r\n    checkConditions(searchInfo.currentData);\r\n\r\n    if (isArray(searchInfo.currentData) && !searchInfo.currentData.length) {\r\n        return null;\r\n    }\r\n    if (searchInfo.status === 'normal' || searchInfo.status === 'plan') {\r\n        return {\r\n            logic: 'and',\r\n            conditions: searchInfo.currentData,\r\n        };\r\n    } else {\r\n        return searchInfo.currentData[0];\r\n    }\r\n}\r\n\r\n/* 设置searchPlanName */\r\nexport function setSearchPlanName(id, name) {\r\n    let f = checkTreeId.call(this, id);\r\n    if (!f) return;\r\n    let searchInfo = this.state.meta[id];\r\n    searchInfo.searchPlanName = name;\r\n    setStateEve.call(this);\r\n}\r\n\r\n/* setState */\r\nfunction setStateEve() {\r\n    this.setState({ searchAdv: this.state.searchAdv });\r\n}\r\n\r\n/* 检查组件id是否存在 */\r\nfunction checkTreeId(treeId) {\r\n    if (!this.state.meta.hasOwnProperty(treeId)) {\r\n        console.error('没有找到高级查询组件的id,请检查传参是否正确');\r\n        return false;\r\n    } else {\r\n        return true;\r\n    }\r\n}\r\n\r\n/* 初始化数据 */\r\nfunction initData(item, remove = false) {\r\n    let snapshotItem = {\r\n        attrcode: item.attrcode,\r\n        remove,\r\n        visible: true,\r\n        isExtend: !!item.isfixedcondition,\r\n    };\r\n    if (item.queryOperateType) {\r\n        // 查询条件，设置操作符，初始化数据\r\n        snapshotItem.operationSign = item.queryOperateType.split('@')[0];\r\n        snapshotItem.refpk = snapshotItem.key = item.attrcode;\r\n        if (snapshotItem.operationSign === 'between') {\r\n            //似乎 between是 不设置默认值的  xuyang 此处得问问\r\n            if (item.itemtype === 'refer') {\r\n                snapshotItem.initialvalue = item.initialvalue || { value: [], display: [] };\r\n            } else {\r\n                snapshotItem.initialvalue = item.initialvalue || { value: [], display: '' };\r\n            }\r\n        } else {\r\n            if (item.itemtype === 'checkbox_switch') {\r\n                snapshotItem.initialvalue = {\r\n                    value: (item.initialvalue && item.initialvalue.value) || false,\r\n                    display: '',\r\n                };\r\n            } else {\r\n                snapshotItem.initialvalue = item.initialvalue || { value: '', display: '' };\r\n                if (item.itemtype === 'residtxt') {\r\n                    snapshotItem.initialvalue.index = item.languageMeta.filter(val => val.languageCode == localeLang)[0]?.index || 1;\r\n                    snapshotItem.valueMap = {};\r\n                    snapshotItem.valueMap[snapshotItem.attrcode + snapshotItem.initialvalue.index] = { value: snapshotItem.initialvalue.value };\r\n                }\r\n            }\r\n        }\r\n        snapshotItem.operationOptions = createOperation(item.queryOperateType);\r\n    } else {\r\n        //逻辑关系，默认‘并且’\r\n        snapshotItem.operationOptions = createOperation('=');\r\n        snapshotItem.operationSign = '=';\r\n        snapshotItem.initialvalue = item.initialvalue || { value: '', display: '' };\r\n    }\r\n    return snapshotItem;\r\n}\r\n\r\n/* 生成查询数据 */\r\nfunction createCurrentData(id, snapshot, flag) {\r\n    let searchInfo = this.state.searchInfo;\r\n    let allRequire = checkRequired.call(this, id, snapshot, flag);\r\n    if (!allRequire) return false;\r\n    else {\r\n        return snapshot.map(snapshotItem => {\r\n            if (Array.isArray(snapshotItem.children)) {\r\n                return {\r\n                    logic: snapshotItem.operationSign,\r\n                    conditions: createCurrentData.call(this, id, snapshotItem.children),\r\n                };\r\n            } else {\r\n                let attrcode = snapshotItem.attrcode;\r\n                let item = searchInfo.itemsMap[attrcode];\r\n                let data = {\r\n                    firstvalue: null,\r\n                    secondvalue: null,\r\n                };\r\n\r\n                let initialvalue = snapshotItem.initialvalue || {};\r\n                let displayVal = initialvalue.display || null;\r\n                let optSign = snapshotItem.operationSign;\r\n                let isIncludeSub = snapshotItem.runWithChildren || false;\r\n                let refurl = snapshotItem.refurl || '';\r\n                let timeFunction = '';\r\n                if (displayVal && snapshotItem.runWithChildren) {\r\n                    displayVal = displayVal + multiLang['page-search-0044'];\r\n                }\r\n\r\n                if (\r\n                    item.itemtype === 'rangepicker' ||\r\n                    ((item.itemtype === 'datepicker' ||\r\n                        item.itemtype === 'NCTZDatePickerEnd' ||\r\n                        item.itemtype === 'NCTZDatePickerStart' ||\r\n                        item.itemtype === 'datetimepicker') &&\r\n                        snapshotItem.operationSign === 'between')\r\n                ) {\r\n                    let vals = initialvalue.value;\r\n                    if (vals && !isArray(vals) && typeof vals === 'string') {\r\n                        vals = vals.split(',');\r\n                    }\r\n                    //给报表平台加的逻辑，如果是函数，则将函数直接传给后台\r\n                    if (isDateFunction(vals[0])) {\r\n                        timeFunction = vals.join(',');\r\n                    }\r\n                    if (vals && isArray(vals)) {\r\n                        if (vals.length > 0 && vals[0] && vals[0].format) {\r\n                            // 多时区转化\r\n                            let start = vals[0].format('YYYY-MM-DD');\r\n                            let end = vals[1].format('YYYY-MM-DD');\r\n                            // 1 开始时间\r\n                            let currentZoneStartTime = moment(start).startOf('day').toDate();\r\n                            let currentZoneStartHours = currentZoneStartTime.getHours();\r\n                            let offsetZone = currentZoneStartTime.getTimezoneOffset() / 60;\r\n                            // 2 结束时间\r\n                            let currentZoneEndTime = moment(end).endOf('day').toDate();\r\n                            let currentZoneEndHours = currentZoneEndTime.getHours();\r\n                            // 当地时间转换为东八区时间\r\n                            offsetZone = offsetZone + 8;\r\n                            currentZoneStartTime.setHours(currentZoneStartHours + offsetZone);\r\n                            currentZoneEndTime.setHours(currentZoneEndHours + offsetZone);\r\n                            //   newData.firstvalue = moment(currentZoneStartTime).format('YYYY-MM-DD HH:mm:ss');\r\n                            //   newData.secondvalue = moment(currentZoneEndTime).format('YYYY-MM-DD HH:mm:ss');\r\n\r\n                            data.firstvalue = moment(currentZoneStartTime).format('YYYY-MM-DD HH:mm:ss');\r\n                            data.secondvalue = moment(currentZoneEndTime).format('YYYY-MM-DD HH:mm:ss');\r\n\r\n                            // newVal.push(value.format('YYYY-MM-DD'));\r\n                        } else if (vals.length > 0 && vals[0] && !vals[0].format) {\r\n                            data.firstvalue = vals[0];\r\n                            data.secondvalue = vals[1];\r\n                        } else {\r\n                            data.firstvalue = '';\r\n                            data.secondvalue = '';\r\n                        }\r\n                    }\r\n                } else if (item.itemtype === 'refer') {\r\n                    if (snapshotItem.operationSign === 'between') {\r\n                        displayVal = (initialvalue.display || []).join(',');\r\n                        data.firstvalue = initialvalue.value[0];\r\n                        data.secondvalue = initialvalue.value[1];\r\n                    } else {\r\n                        let VALUE = getFunctionValueFromViewModal(initialvalue, this.props.context);\r\n                        displayVal = VALUE.display;\r\n                        data.firstvalue = VALUE.value;\r\n                    }\r\n                } else if (\r\n                    (item.itemtype === 'select' ||\r\n                        item.itemtype === 'number' ||\r\n                        item.itemtype === 'datetimepicker' ||\r\n                        item.itemtype === 'NCTZDatePickerEnd' ||\r\n                        item.itemtype === 'NCTZDatePickerStart') &&\r\n                    snapshotItem.operationSign === 'between'\r\n                ) {\r\n                    data.firstvalue = (initialvalue.value || [])[0];\r\n                    data.secondvalue = (initialvalue.value || [])[1];\r\n                    displayVal = (initialvalue.display || [])[0] + '~' + (initialvalue.display || [])[1];\r\n                } else {\r\n                    data.firstvalue = initialvalue.value;\r\n                }\r\n                let timeItemList = [\r\n                    'datepicker',\r\n                    'datetimepicker',\r\n                    'rangepicker',\r\n                    'NCTZDatePickerStart',\r\n                    'NCTZDatePickerEnd',\r\n                    'NCTZDatePickClientTime',\r\n                    'NCTZDatePickClientHourTime',\r\n                    'NCTZDatePickerRangeDay',\r\n                    'datePickerNoTimeZone',\r\n                ];\r\n                // 需要从东八区时间处理当地时间，然后计算0点和24点，按照当地时间得0点和24点分别转为东八区时间\r\n                const localToEast = ['datepicker', 'datetimepicker', 'NCTZDatePickClientTime', 'NCTZDatePickClientHourTime'];\r\n                // 开始 和结束时间是时间戳概念  操作符为 = 时不需要进行扩充为日期范围\r\n                const timeStampType = ['NCTZDatePickerStart', 'NCTZDatePickerEnd', 'datetimepicker'];\r\n                if (timeItemList.some(val => val === item.itemtype) && !isEmpty(initialvalue.value)) {\r\n                    //xuyangt 需要优化此处逻辑 很混乱\r\n                    let firstvalue = '',\r\n                        secondvalue = '';\r\n                    if (isDateFunction(data.firstvalue) && !data.secondvalue) {\r\n                        timeFunction = data.firstvalue;\r\n                    }\r\n                    if (isDateFunction(data.firstvalue) || isDateFunction(data.secondvalue)) {\r\n                        if (optSign == '=' || optSign == '<>') {\r\n                            // start 取开始时间戳 end时 取结束时间戳\r\n                            if (timeStampType.includes(item.itemtype)) {\r\n                                if (item.itemtype === 'NCTZDatePickerEnd') {\r\n                                    firstvalue = timeFunctionTranslater(data.firstvalue, { flag: false });\r\n                                } else {\r\n                                    firstvalue = timeFunctionTranslater(data.firstvalue);\r\n                                }\r\n                            } else {\r\n                                firstvalue = timeFunctionTranslater(data.firstvalue);\r\n                                secondvalue = timeFunctionTranslater(data.firstvalue, { flag: false });\r\n                            }\r\n                        } else if (optSign == '<' || optSign == '>=') {\r\n                            firstvalue = timeFunctionTranslater(data.firstvalue);\r\n                        } else if (optSign == '>' || optSign == '<=') {\r\n                            firstvalue = timeFunctionTranslater(data.firstvalue, { flag: false });\r\n                        } else if (optSign == 'between') {\r\n                            if (!isEmpty(data.firstvalue)) {\r\n                                firstvalue = timeFunctionTranslater(data.firstvalue);\r\n                            }\r\n                            if (!isEmpty(data.secondvalue)) {\r\n                                secondvalue = timeFunctionTranslater(data.secondvalue, { flag: false });\r\n                            }\r\n                        }\r\n\r\n                    } else {\r\n                        if (optSign == '=' || optSign == '<>') {\r\n                            if (!timeStampType.includes(item.itemtype)) {\r\n                                // datepicker datepicker 需要处理时区从东八区时间转换为当地时间 计算当天时间[00:00:00, 23:59:59]在转换为东八区时间\r\n                                if (localToEast.includes(item.itemtype) && !isDateFunction(data.firstvalue)) {\r\n                                    firstvalue = DongbaToLocalTime(moment(data.firstvalue)).format('YYYY-MM-DD 00:00:00');\r\n                                    secondvalue = moment(firstvalue).format('YYYY-MM-DD 23:59:59');\r\n\r\n                                    // 转为东八区时间 \r\n                                    firstvalue = LocalToDongbaTime(moment(firstvalue)).format('YYYY-MM-DD HH:mm:ss');\r\n                                    secondvalue = LocalToDongbaTime(moment(secondvalue)).format('YYYY-MM-DD HH:mm:ss');\r\n                                } else {\r\n                                    // start end 类型暂未处理\r\n                                    firstvalue = moment(data.firstvalue).format('YYYY-MM-DD 00:00:00');\r\n                                    secondvalue = timeFunctionTranslater(moment(data.firstvalue).format('YYYY-MM-DD 23:59:59'));\r\n                                }\r\n                            } else {\r\n                                firstvalue = data.firstvalue;\r\n                                secondvalue = firstvalue;\r\n                            }\r\n\r\n                        } else if (optSign == '<' || optSign == '>=') {\r\n                            firstvalue = naturalTimeHandler(data.firstvalue, 'start');\r\n                        } else if (optSign == '>' || optSign == '<=') {\r\n                            firstvalue = naturalTimeHandler(data.firstvalue, 'end');\r\n                        } else if (optSign == 'between') {\r\n                            if (!isEmpty(data.firstvalue)) {\r\n                                firstvalue = naturalTimeHandler(data.firstvalue, 'start');\r\n                            }\r\n                            if (!isEmpty(data.secondvalue)) {\r\n                                secondvalue = naturalTimeHandler(data.secondvalue, 'end');\r\n                            }\r\n                        }\r\n\r\n                        if (firstvalue && secondvalue && CompareDate(firstvalue, secondvalue)) {\r\n                            firstvalue = timeFunctionTranslater(secondvalue);\r\n                            secondvalue = timeFunctionTranslater(firstvalue, { flag: false });\r\n                        }\r\n                    }\r\n                    if (optSign == '=') {\r\n                        optSign = 'between';\r\n                    }\r\n                    data.firstvalue = firstvalue;\r\n                    data.secondvalue = secondvalue;\r\n                }\r\n                //增加去除前后空格的逻辑 目前 ‘ ’作为例外情况处理\r\n                if (data.firstvalue && typeof data.firstvalue === 'string' && data.firstvalue !== ' ') {\r\n                    data.firstvalue = data.firstvalue.trim();\r\n                }\r\n                if (data.secondvalue && typeof data.firstvalue === 'string' && data.secondvalue !== ' ') {\r\n                    data.secondvalue = data.secondvalue.trim();\r\n                }\r\n\r\n                let Obj = {\r\n                    field: attrcode,\r\n                    value: data,\r\n                    oprtype: optSign,\r\n                    display: String(displayVal || '').replace(/~/, ','),\r\n                    isIncludeSub,\r\n                    refurl,\r\n                    datatype: item.datatype || '',\r\n                    timeFunction,\r\n                    def5: item.label,\r\n                };\r\n                if (item.itemtype === 'residtxt') {\r\n                    Obj.langSeq = initialvalue.index;\r\n                }\r\n                if (!isEmpty(Obj.value.firstvalue) || !isEmpty(Obj.value.secondvalue) || optSign == 'is null' || optSign == 'is not null') {\r\n                    return snapshotItem.visible ? Obj : null;\r\n                } else {\r\n                    return null;\r\n                }\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n//校验必填\r\nfunction checkRequired(id, snapshot, flag, result = true) {\r\n    let searchInfo = this.state.searchInfo;\r\n    snapshot.forEach(item => {\r\n        if (item.children) {\r\n            result = checkRequired.call(this, id, item.children, flag, result);\r\n        } else {\r\n            let templateItem = searchInfo.itemsMap[item.attrcode];\r\n            let initialvalue =\r\n                templateItem.itemtype === 'refer'\r\n                    ? getFunctionValueFromViewModal(item.initialvalue, this.props.context)\r\n                    : item.initialvalue;\r\n            if (templateItem && templateItem.required && flag && result && item.visible) {\r\n                let isKong = false;\r\n                // 因为 为空或者不为空的条件不可编辑 \r\n                //但是后台需要校验，所以这两种类型的条件可以没有值就传给后台\r\n                //所以必填校验也不用做了\r\n                if (\r\n                    isEmpty(initialvalue.value) ||\r\n                    (Array.isArray(initialvalue.value) && !ArrayHas2Value(initialvalue.value))\r\n                ) {\r\n                    if (item.operationSign != 'is null' && item.operationSign != 'is not null') { isKong = true; }\r\n                }\r\n                if (isKong) {\r\n                    {\r\n                        toast({ content: multiLang['page-search-0045'], color: 'warning' });\r\n                    }\r\n                    result = false;\r\n                }\r\n            }\r\n        }\r\n    });\r\n    return result;\r\n}\r\n\r\n/*\r\n*   添加拖拽数据\r\n*   @data: 要添加的数据\r\n*   @targetPk: 拖拽的目标节点pk\r\n*   @flag: 高级/普通  （super/normal）\r\n*\r\n* */\r\nfunction addDataEve(treeData, data, targetPk, flag) {\r\n    if (typeof targetPk === 'string' && targetPk !== 'root') {\r\n        //有目标节点pk，并且不是根节点时\r\n        let len = treeData.length;\r\n        while (len--) {\r\n            let item = treeData[len];\r\n\r\n            // 目标节点如果是逻辑符节点，添加到逻辑符节点的children内\r\n            if (targetPk.split('@')[1] === 'root') {\r\n                if (item.refpk === targetPk) {\r\n                    if (Array.isArray(item.children)) {\r\n                        let newTime = new Date().getTime();\r\n                        data.refpk = newTime + data.refpk;\r\n                        // !item.children.find(v => v.attrcode === data.attrcode) &&\r\n                        item.children.push(data);\r\n                    } else {\r\n                        item.children = [data];\r\n                    }\r\n                    return true;\r\n                }\r\n            } else {\r\n                // 目标节点是查询条件节点时， 创建一个逻辑符根节点 ，节点的子节点为拖拽的节点和目标节点，并删除原目标节点\r\n                if (item.refpk === targetPk && data.refpk !== item.refpk) {\r\n                    //必填字段不能合并？ xuyang\r\n                    if (item.advrequired) {\r\n                        return;\r\n                    }\r\n                    // 生成新节点，拖拽节点和目标节点的refpk都需要重新赋值，以免重复\r\n                    let newTime = new Date().getTime();\r\n                    let newPk = newTime + '@' + 'root';\r\n                    item.refpk = newTime + item.refpk;\r\n                    data.refpk = newTime + data.refpk;\r\n                    let newTree = {\r\n                        attrcode: newPk,\r\n                        refpk: newPk,\r\n                        operationSign: 'and',\r\n                        children: [item, data],\r\n                        visible: true,\r\n                    };\r\n                    //删除原节点 把新的节点插入到原有结构队尾\r\n                    // treeData.splice(len, 1);\r\n                    // treeData.push(newTree);\r\n                    //替换源节点\r\n                    treeData[len] = newTree;\r\n                    return true;\r\n                }\r\n            }\r\n            if (Array.isArray(item.children)) {\r\n                let res = addDataEve.call(this, item.children, data, targetPk);\r\n                if (res) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n    } else {\r\n        if (flag === 'super') {\r\n            //高级区域需要加入到根节点的children中\r\n            /* 疑问：逻辑符为并且时，是否可以在同一级中拖拽多个相同的查询条件？？？——wangshhj */\r\n            // !treeData[0].children.find(item => item.refpk === data.refpk) &&\r\n            let newTime = new Date().getTime();\r\n            data.refpk = newTime + data.refpk;\r\n            treeData[0].children.push(data);\r\n        } else {\r\n            //普通区域直接放到数组中\r\n            //暂时去掉 普通查询中不能拖入重复条件的限制\r\n            //!treeData.find((item) => item.refpk === data.refpk) && treeData.push(data);\r\n            treeData.push(data);\r\n        }\r\n    }\r\n}\r\n\r\n/* 检测返回的数据，去掉null */\r\nfunction checkResult(data) {\r\n    if (!data.length) {\r\n        return null;\r\n    }\r\n    data.map((item, index) => {\r\n        if (!item || (item.value && isArray(item.value.firstvalue) && !item.value.firstvalue.length)) {\r\n            data.splice(index, 1);\r\n            checkResult(data);\r\n        } else if (Array.isArray(item.conditions)) {\r\n            checkResult(item.conditions);\r\n        }\r\n    });\r\n}\r\n\r\n/* 检测数据的conditions是否有值，没有值，删除数据 */\r\nfunction checkConditions(treeData) {\r\n    let len = treeData.length;\r\n    while (len--) {\r\n        let item = treeData[len];\r\n        if (Array.isArray(item.conditions) && item.conditions.length) {\r\n            checkConditions(item.conditions);\r\n        } else if (Array.isArray(item.conditions) && !item.conditions.length) {\r\n            treeData.splice(len, 1);\r\n        }\r\n    }\r\n    if (treeData.length && Array.isArray(treeData[0].conditions) && !treeData[0].conditions.length) {\r\n        checkConditions(treeData);\r\n    }\r\n}\r\n\r\n/* 处理运算符 */\r\nexport function createOperation(data) {\r\n    data = data || '';\r\n    data = data.replace(/^@+|@$/g, '');\r\n    let o = data.split('@');\r\n    let newArr = [];\r\n    o.forEach(item => {\r\n        for (let i = 0; i < OperationOptions.length; i++) {\r\n            if (item === OperationOptions[i].value) {\r\n                newArr.push(OperationOptions[i]);\r\n                break;\r\n            }\r\n        }\r\n    });\r\n    return newArr;\r\n}\r\n\r\n/* 清空当前所有数据 */\r\nexport function clearAllValueEve(treeData) {\r\n    let len = treeData.length;\r\n    let itemsMap = this.state.searchInfo.itemsMap;\r\n    while (len--) {\r\n        let item = treeData[len];\r\n        if (item.children && Array.isArray(item.children)) {\r\n            clearAllValueEve.call(this, item.children);\r\n        } else {\r\n            let tempItem = itemsMap[item.attrcode];\r\n            if (!tempItem.disabled) {\r\n                if (tempItem.itemtype === 'residtxt') {\r\n                    item.initialvalue.value = '';\r\n                    item.initialvalue.display = '';\r\n                    if (item.valueMap) {\r\n                        Object.keys(item.valueMap).forEach(key => {\r\n                            item.valueMap[key].value = '';\r\n                        });\r\n                    }\r\n                } else {\r\n                    item.initialvalue = { value: '', display: '' };\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/*\r\n*  删除节点\r\n*  @ nodePk:删除的节点refpk\r\n* */\r\nexport function delNode(id, nodePk) {\r\n    let f = checkTreeId.call(this, id);\r\n    if (!f) return;\r\n    let _this = this.myState.search[`searchArea_${id}`];\r\n    let searchInfo = _this.state.searchInfo;\r\n    let status = searchInfo.status;\r\n    let snapshot = searchInfo.snapshotMap[status];\r\n    delNodeEve(snapshot, nodePk);\r\n    checkChildren(snapshot);\r\n    setStateEve.call(_this);\r\n}\r\n\r\n/* 检测节点的children是否有值，没有值，删除该节点 */\r\nfunction checkChildren(treeData) {\r\n    let len = treeData.length;\r\n    while (len--) {\r\n        let item = treeData[len];\r\n        if (Array.isArray(item.children) && !item.children.length) {\r\n            treeData.splice(len, 1);\r\n        } else if (Array.isArray(item.children)) {\r\n            checkChildren(item.children);\r\n        }\r\n    }\r\n}\r\n\r\n/* 删除节点事件 */\r\nfunction delNodeEve(treeData, nodePk) {\r\n    let len = treeData.length;\r\n    while (len--) {\r\n        let item = treeData[len];\r\n        if (item.refpk === nodePk) {\r\n            treeData.splice(len, 1);\r\n            return true;\r\n        } else if (Array.isArray(item.children)) {\r\n            let res = delNodeEve(item.children, nodePk);\r\n            if (res) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/*\r\n*   设置查询区具体某个字段数据   ps:内部使用字段的refpk设值， 业务组使用field设值\r\n*   @ field: 字段\r\n*   @ data: { value, display }\r\n*   @ operationSign: 操作符\r\n* */\r\nexport function setSearchValByFieldHigh(searchId, refpk, data, operationSign) {\r\n    // 业务组调用的\r\n    let _this = this.myState.search[`searchArea_${searchId}`];\r\n    let searchInfo = _this.state.searchInfo;\r\n    let snapshot = searchInfo.snapshotMap[searchInfo.status];\r\n    setValueByField(snapshot, refpk, data, operationSign);\r\n    setStateEve.call(_this);\r\n}\r\n\r\n/* 根据attrcode设置某个查询条件的值 */\r\nfunction setValueByField(treeData, field, value, operationSign) {\r\n    let len = treeData.length;\r\n    while (len--) {\r\n        let item = treeData[len];\r\n        if (item.attrcode === field) {\r\n            //此处防止循环引用，导致保存方案报错\r\n            if (item.attrcode.indexOf('@root') === -1) {\r\n                item.initialvalue = value;\r\n            }\r\n\r\n            if (operationSign) {\r\n                item.operationSign = operationSign;\r\n            }\r\n        } else if (Array.isArray(item.children)) {\r\n            setValueByField(item.children, field, value, operationSign);\r\n        }\r\n    }\r\n}\r\n\r\n/* 获取当前普通区或高级区域的state，用于保存查询方案 */\r\nexport function getCurrentTemplate(id) {\r\n    let searchInfo = this.state.searchInfo;\r\n    return searchInfo.snapshotMap[searchInfo.status].map(item => searchInfo.itemsMap[item.attrcode]);\r\n}\r\n\r\n/* 清空所有数据 */\r\nexport function clearAllValue(id) {\r\n    let f = checkTreeId.call(this, id);\r\n    if (!f) return;\r\n    let _this = this.myState.search[`searchArea_${id}`];\r\n    let searchInfo = _this.state.searchInfo;\r\n    let snapshot = searchInfo.snapshotMap[searchInfo.status];\r\n    clearAllValueEve.call(_this, snapshot);\r\n    setStateEve.call(_this);\r\n}\r\n\r\n/* 整体替换数据，用于查询方案。数据结构完整，不需要初始化 */\r\nexport function replaceData(id, data, planName) {\r\n    let f = checkTreeId.call(this, id);\r\n    if (!f) return;\r\n    let _this = this.myState.search[`searchArea_${id}`];\r\n    let searchInfo = _this.state.searchInfo;\r\n    const status = searchInfo.status;\r\n    const plan = plan2snapshotTranslate(\r\n        searchInfo,\r\n        data,\r\n        this.app_context,\r\n        createOperation,\r\n    );\r\n    searchInfo.snapshotMap[status] = plan;\r\n\r\n    searchInfo.searchPlanName = planName;\r\n    setStateEve.call(_this);\r\n}","// import DatePicker from 'bee-datepicker';\r\nimport { moment } from '@platform/api';\r\nimport {\r\n    Input as FormControl,\r\n    Checkbox as NCCheckbox,\r\n    // NCSwitch,\r\n    NumberInput as NCNumber,\r\n    // NCInput,\r\n    // NCMessage,\r\n    Select,\r\n    // NCSelectBetween,\r\n    // NCRadio,\r\n    // NCBetweenNum,\r\n    // NCRow as Row,\r\n    Col,\r\n    Tooltip as NCTooltip,\r\n    Timepicker as NCTimepicker,\r\n    DatePicker as NCDatePicker,\r\n    RangePickerClient as NCRangePicker,\r\n    DatePickerClient as NCDatePickerClient,\r\n    DateTimePickerBetween as NCDateTimePickerBetween,\r\n    TZDatePickerStart as NCTZDatePickerStart,\r\n    TZDatePickerRangeDay as NCTZDatePickerRangeDay,\r\n    TZDatePickClientHourTime as NCTZDatePickClientHourTime,\r\n    TZDatePickClientTime as NCTZDatePickClientTime,\r\n    TZDatePickerEnd as NCTZDatePickerEnd,\r\n    TZDatePickerStartBetween as NCTZDatePickerStartBetween,\r\n    TZDatePickerEndBetween as NCTZDatePickerEndBetween,\r\n    MultiLangText as NCMultiLangText,\r\n    Refer,\r\n    BetweenNum as NCBetweenNum,\r\n    SelectBetween as NCSelectBetween,\r\n} from '@platform/base';\r\n// import { PubSub } from '@platform/api';\r\nconst { ReferLoader } = Refer;\r\n// import toast from '../../api/toast';\r\nimport { getSysFieldid, isFunction, isArray, isEmpty, PubSub, formatDatetime, formatNumber, getBusinessInfo } from '@platform/api';\r\nimport { getFunctionValueFromViewModal } from './_methods';\r\n// import ReferLoader from '../../containers/Refer/ReferLoader';\r\n// import { localeLang } from '../../public/currentLocale';\r\n// import getSysFieldid from '../../api/getSysFieldid';\r\n\r\nrequire('./createSearch.less');\r\n\r\nconst Option = Select.Option;\r\n\r\nclass templateEngine {\r\n    constructor({\r\n        id,\r\n        searchInfo,\r\n        snapshotItem,\r\n        onAfterEvent,\r\n        setStateEve,\r\n        renderItem,\r\n        showRequire = true,\r\n        context = {},\r\n        createScript,\r\n        showPlaceholder = true,\r\n        multiLang,\r\n        LangData,\r\n        parentRef,\r\n        clickSearch,\r\n        hiddenFunList\r\n    }) {\r\n        this.templetItem = searchInfo.itemsMap[snapshotItem.attrcode];\r\n        let businessInfo = getBusinessInfo();\r\n        this.Date = businessInfo ? moment(businessInfo.businessDate).format('YYYY-MM-DD') : moment().format('YYYY-MM-DD');\r\n        // this.Date = '2020-10-20';\r\n        if (!this.templetItem) {\r\n            //toast({ content: '查询方案损坏！', color: 'warning' });\r\n\r\n            return null;\r\n        }\r\n        if (searchInfo.status == 'super' || searchInfo.status == 'normal') this.hideLabel = true;\r\n        else this.hideLabel = false;\r\n\r\n        Object.assign(this, {\r\n            id,\r\n            searchInfo,\r\n            snapshotItem,\r\n            onAfterEvent,\r\n            setStateEve,\r\n            renderItem,\r\n            showRequire,\r\n            context,\r\n            createScript,\r\n            showPlaceholder,\r\n            multiLang,\r\n            LangData,\r\n            parentRef,\r\n            clickSearch,\r\n            hiddenFunList\r\n        });\r\n\r\n        return this.createTemplateItemDom();\r\n    }\r\n\r\n    //  事件触发清除警告 通过全局的事件订阅发布 绕开了徐洋之前的逻辑(类组件内部状态处理有问题)\r\n    //  采用全局事件订阅发布的方式 可能存在问题 待处理\r\n    clearRquiredWraning(item) {\r\n        if (item && item.required) {\r\n            PubSub.publish('clearWarning', item.attrcode);\r\n        }\r\n    }\r\n\r\n    trustString(data) {\r\n        if (typeof data === 'string') {\r\n            return formatNumber(data, true);\r\n        } else if (Array.isArray(data)) {\r\n            return data.filter(item => item).map(item => formatNumber(item, true)).join('~');\r\n        }\r\n    }\r\n\r\n    isTrueEmpty(data) {\r\n        if (isEmpty(data)) return true;\r\n        else if (Array.isArray(data)) {\r\n            return data.filter(item => item).length === 0;\r\n        }\r\n    }\r\n\r\n    //获得查询条件的操作符的展示\r\n    getQueryOperateDisplay(queryOperateType) {\r\n        let result = '';\r\n        if (queryOperateType) {\r\n            queryOperateType = queryOperateType.replace(/^@+|@$/g, '');\r\n            let opt = String(queryOperateType).split('@')[0];\r\n            switch (opt) {\r\n                case '<>':\r\n                    result = '≠';\r\n                    break;\r\n                case '<':\r\n                    result = '<';\r\n                    break;\r\n                case '>':\r\n                    result = '>';\r\n                    break;\r\n                case '>=':\r\n                    result = '≥';\r\n                    break;\r\n                case '<=':\r\n                    result = '≤';\r\n                    break;\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    //getDateDisplay\r\n    getDateDisplay(value) {\r\n        if (isNaN(Date.parse(value))) {\r\n            return value;\r\n        } else {\r\n            const format = 'YYYY-MM-DD';\r\n            return moment(value).format(format);\r\n        }\r\n    }\r\n\r\n    timeFunCallBack(data, timeValue) {\r\n        if (data && timeValue) {\r\n            data.initialvalue = {\r\n                display: timeValue.label,\r\n                value: timeValue.value,\r\n            };\r\n        }\r\n        this.setStateEve();\r\n    }\r\n\r\n    /* 编辑后事件 */\r\n    onAfterEve(field, val, index, eventType) {\r\n        if (index == undefined) {\r\n            index = 0;\r\n        }\r\n        if (isFunction(this.onAfterEvent)) {\r\n            // code value modleID operationSign betweenIndex\r\n            this.onAfterEvent(field, val, this.id, this.snapshotItem.operationSign, index, eventType);\r\n        }\r\n    }\r\n\r\n    //input输入改变,更新state\r\n    onInputChange(item, val) {\r\n        this.clearRquiredWraning(item);\r\n        this.snapshotItem.initialvalue.value = val;\r\n        this.snapshotItem.initialvalue.display = val;//xuyangt 2018/11/20添加\r\n        this.setStateEve(this.onAfterEve.bind(this, item.attrcode, val, 0, 'onchange'));\r\n    }\r\n\r\n    /* input失去焦点事件 */\r\n    inputBlur(item, type, val) {\r\n        if (type === 'number') this.snapshotItem.initialvalue.value = val;\r\n        this.setStateEve(this.onAfterEve.bind(this, item.attrcode, val, 0, 'onblur'));\r\n    }\r\n\r\n    //select改变，更新state\r\n    onSelectedChange(item, val) {\r\n        this.clearRquiredWraning(item);\r\n        if (val === '__clear__' || val === undefined) {\r\n            // 清空\r\n\r\n            this.snapshotItem.initialvalue = {\r\n                value: '',\r\n                display: '',\r\n            };\r\n        } else {\r\n            this.snapshotItem.initialvalue = {\r\n                value: val,\r\n                display: item.options.find(i => i.value == val).display,\r\n            };\r\n        }\r\n        this.setStateEve(this.onAfterEve.bind(this, item.attrcode, val === '__clear__' ? undefined : val));\r\n    }\r\n\r\n    onSelectedBetweenChange(item, i, val) {\r\n        this.clearRquiredWraning(item);\r\n        let data = this.snapshotItem;\r\n        data.initialvalue.display = data.initialvalue.display || [];\r\n        data.initialvalue.value = data.initialvalue.value || [];\r\n        data.initialvalue.display[i] = item.options.find(i => i.value == val).display;\r\n        data.initialvalue.value[i] = val;\r\n        this.setStateEve(this.onAfterEve.bind(this, item.attrcode, data.initialvalue.value));\r\n    }\r\n\r\n    /* select多选 */\r\n    onMultipleChange(item, val = []) {\r\n        this.clearRquiredWraning(item);\r\n        let opt = item.options;\r\n        let valuelist = opt.filter(vv => val.some(v => vv.value == v));\r\n        this.snapshotItem.initialvalue = {\r\n            display: valuelist.map(vv => vv.display).join(','),\r\n            value: valuelist.map(vv => vv.value).join(','),\r\n        };\r\n        this.setStateEve(this.onAfterEve.bind(this, item.attrcode, this.snapshotItem.initialvalue.value));\r\n    }\r\n\r\n    onDateSelect(data) { }\r\n\r\n    //日期选择事件\r\n    onDateChange(item, date, display) {\r\n        this.clearRquiredWraning(item);\r\n        if (typeof date === 'string' || !date) this.snapshotItem.initialvalue.value = date;\r\n        else if (typeof date === 'object') {\r\n            if (Array.isArray(date)) {\r\n                this.snapshotItem.initialvalue.value = date;\r\n            } else {\r\n                this.snapshotItem.initialvalue.value = date.value;\r\n            }\r\n        }\r\n        this.snapshotItem.initialvalue.display = display;\r\n\r\n        this.setStateEve(this.onAfterEve.bind(this, item.attrcode, date));\r\n    }\r\n\r\n    onDateTimeBetweenChange(item, i, value, display) {\r\n        this.clearRquiredWraning(item);\r\n        let data = this.snapshotItem;\r\n        let oldDisplay = data.initialvalue.display || '';\r\n        data.initialvalue.value = data.initialvalue.value || [];\r\n        //判断是否initialvalue是数组\r\n        if (!Array.isArray(data.initialvalue.value)) {\r\n            data.initialvalue.value = data.initialvalue.value.split(',');\r\n        }\r\n        // 判断display 是否为数组\r\n        if (!Array.isArray(data.initialvalue.display)) {\r\n            data.initialvalue.display = Array.from(2);\r\n            data.initialvalue.value.map((item, index) => {\r\n                if (item) {\r\n                    data.initialvalue.display[index] = oldDisplay.split(',')[index];\r\n                }\r\n            });\r\n        }\r\n\r\n        data.initialvalue.display[i] = display;\r\n        data.initialvalue.value[i] = value;\r\n        this.setStateEve(this.onAfterEve.bind(this, item.attrcode, data.initialvalue));\r\n    }\r\n\r\n    //区间类型日期事件\r\n    onRangDateChange(item, date, display) {\r\n        this.clearRquiredWraning(item);\r\n        this.snapshotItem.initialvalue.value = date || '';\r\n        this.snapshotItem.initialvalue.display = (Array.isArray(display) && display.join(',')) || '';\r\n        this.setStateEve(this.onAfterEve.bind(this, item.attrcode, this.snapshotItem.initialvalue));\r\n    }\r\n\r\n    //参照更改事件\r\n    referChangeEve(item, val, foolValue) {\r\n        this.clearRquiredWraning(item);\r\n        this.snapshotItem.initialvalue = { ...foolValue, ...val };\r\n\r\n        if (Array.isArray(val)) {\r\n            val.forEach(vv => {\r\n                let VALUE = getFunctionValueFromViewModal({ display: vv.refname, value: vv.refpk }, this.context);\r\n                vv.refname = VALUE.display;\r\n                vv.refpk = VALUE.value;\r\n                this.snapshotItem.runWithChildren = vv.runWithChildren;\r\n                this.snapshotItem.refurl = vv.queryTreeUrl;\r\n            }, this);\r\n        } else {\r\n            let VALUE = getFunctionValueFromViewModal({ display: val.refname, value: val.refpk }, this.context);\r\n            val.refname = VALUE.display;\r\n            val.refpk = VALUE.value;\r\n        }\r\n        this.setStateEve(this.onAfterEve.bind(this, item.attrcode, val));\r\n    }\r\n\r\n    betweenReferChangeEve(i, item, value, foolValue) {\r\n        this.clearRquiredWraning(item);\r\n        let data = this.snapshotItem;\r\n\r\n        data.initialvalue.display = data.initialvalue.display || [];\r\n        data.initialvalue.value = data.initialvalue.value || [];\r\n        data.initialvalue.display[i] = foolValue.display;\r\n        data.initialvalue.value[i] = foolValue.value;\r\n        data.runWithChildren = value.runWithChildren;\r\n        if (Array.isArray(value)) {\r\n            value.forEach(vv => {\r\n                let VALUE = getFunctionValueFromViewModal({ display: vv.refname, value: vv.refpk }, this.context);\r\n                vv.refname = VALUE.display;\r\n                vv.refpk = VALUE.value;\r\n                this.snapshotItem.runWithChildren = vv.runWithChildren;\r\n                this.snapshotItem.refurl = vv.queryTreeUrl;\r\n            }, this);\r\n        }\r\n        this.setStateEve(this.onAfterEve.bind(this, item.attrcode, value, i));\r\n    }\r\n\r\n    //单选change事件\r\n    radioChange(item, val) {\r\n        this.clearRquiredWraning(item);\r\n        this.snapshotItem.initialvalue.value = val;\r\n        this.setStateEve(this.onAfterEve.bind(this, item.attrcode, val));\r\n    }\r\n\r\n    // checkbox_switch 事件\r\n    onChangeCheckbox_switch(item, e) {\r\n        this.clearRquiredWraning(item);\r\n        if (item.disabled) return;\r\n        e.stopPropagation();\r\n        let value = !this.snapshotItem.initialvalue.value;\r\n        this.snapshotItem.initialvalue.value = value;\r\n        this.setStateEve(this.onAfterEve.bind(this, item.attrcode, value));\r\n    }\r\n\r\n    //开关事件\r\n    switchChange(item) {\r\n        this.clearRquiredWraning(item);\r\n        let value = !this.snapshotItem.initialvalue.value;\r\n        this.snapshotItem.initialvalue.value = value;\r\n        this.setStateEve(this.onAfterEve.bind(this, item.attrcode, value));\r\n    }\r\n\r\n    // 数字类型事件\r\n    changeNumber(item, data) {\r\n        this.clearRquiredWraning(item);\r\n        this.snapshotItem.initialvalue.value = data;\r\n        this.snapshotItem.initialvalue.display = data;\r\n        this.setStateEve(this.onAfterEve.bind(this, item.attrcode, this.snapshotItem.initialvalue.value));\r\n    }\r\n\r\n    //对最大值和最小值进行合法性校验\r\n    checkNumberHandler(data) {\r\n        let result = true;\r\n        let propList = ['min', 'max'];\r\n        // propList.forEach((item) => {\r\n        // \tif (data.hasOwnProperty(item)) {\r\n        // \t\tif (typeof data[item] !== 'string' && typeof data[item] !== 'number') {\r\n        // \t\t\tresult = false;\r\n        // \t\t\tconsole.error(item + '类型错误');\r\n        // \t\t}\r\n        // \t}\r\n        // });\r\n        if (propList.every(item => data.hasOwnProperty(item))) {\r\n            if (data.max < data.min) {\r\n                result = false;\r\n                console.error('错误：最小值大于最大值');\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    onMultiLangTextChange(item, data) {\r\n        this.clearRquiredWraning(item);\r\n        let value = '';\r\n        /*  Object.keys(data).forEach(key => {\r\n             if (data[key].index == this.snapshotItem.initialvalue.index) {\r\n                 this.snapshotItem.initialvalue = {\r\n                     value: data[key].value,\r\n                     display: data[key].value,\r\n                     index: data[key].index,\r\n                 };\r\n                 value = data[key].value;\r\n             }\r\n         }); */\r\n        // xiquanquan\r\n        for (const key in data) {\r\n            if (data.hasOwnProperty(key)) {\r\n                data[key].index = data[key].index || '1';\r\n                if (data[key].index == this.snapshotItem.initialvalue.index) {\r\n                    this.snapshotItem.initialvalue = {\r\n                        value: data[key].value,\r\n                        display: data[key].value,\r\n                        index: data[key].index,\r\n                    };\r\n                    value = data[key].value;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        this.snapshotItem.valueMap = data;\r\n        this.setStateEve(this.onAfterEve.bind(this, item.attrcode, value));\r\n    }\r\n\r\n    onMultiLangTextSelect(item, value, index) {\r\n        this.clearRquiredWraning(item);\r\n        this.snapshotItem.initialvalue = {\r\n            value,\r\n            index,\r\n            display: value,\r\n        };\r\n        if (!this.snapshotItem.valueMap) {\r\n            this.snapshotItem.valueMap = {};\r\n            this.snapshotItem.valueMap[this.snapshotItem.attrcode + index] = { value };\r\n        }\r\n        this.setStateEve(this.onAfterEve.bind(this, item.attrcode, value));\r\n    }\r\n\r\n    createTemplateItemDom() {\r\n        let { id, snapshotItem, templetItem, renderItem, multiLang, LangData, hiddenFunList } = this;\r\n        let that = this;\r\n        let data = templetItem;\r\n        const disabledOperationSign = ['is null', 'is not null'];\r\n        if (disabledOperationSign.some(item => item === snapshotItem.operationSign)) {\r\n            var disabled = true;\r\n        } else {\r\n            var disabled = data.disabled;\r\n        }\r\n        let val;\r\n        let initialvalue = snapshotItem.initialvalue;\r\n        let type = data.itemtype || {};\r\n        let hiddenfunlist = hiddenFunList[snapshotItem.attrcode] || [];\r\n        if (\r\n            snapshotItem.hasOwnProperty('operationSign') &&\r\n            (type === 'datepicker' || type === 'NCTZDatePickerEnd' || type === 'NCTZDatePickerStart')\r\n        ) {\r\n            if (snapshotItem.operationSign === 'between') {\r\n                type = 'rangepicker';\r\n            }\r\n        } else if (type === 'textarea') {\r\n            type = 'input';\r\n        } else if (type === 'radio' || type === 'checkbox') {\r\n            type = 'select';\r\n        }\r\n\r\n        if (type === 'select') {\r\n            //多选 val为 数组['1','4']； 单选val为字符串 ’1‘\r\n            if (data.isMultiSelectedEnabled) {\r\n                val = initialvalue.value ? String(initialvalue.value).split(',') : [];\r\n                initialvalue.display = [];\r\n                if (templetItem.options) {\r\n                    val.forEach(v => {\r\n                        initialvalue.display.push(templetItem.options.find(o => o.value == v)?.display || '');\r\n                    });\r\n                }\r\n                initialvalue.display = initialvalue.display.join(',');\r\n            } else {\r\n                if (snapshotItem.operationSign === 'between') {\r\n                    if (Array.isArray(initialvalue.value)) {\r\n                        val = initialvalue.value;\r\n                    } else {\r\n                        val = [];\r\n                    }\r\n                } else {\r\n                    val = String(initialvalue.value) || '';\r\n                }\r\n            }\r\n        } else if (type === 'checkbox') {\r\n            val = initialvalue.value ? String(initialvalue.value).split(',') : '';\r\n        } else if (type === 'checkbox_switch') {\r\n            val = initialvalue.value || false;\r\n        } else if (type === 'datepicker') {\r\n            typeof initialvalue.value === 'string' ? (val = initialvalue.value) : (val = '');\r\n        } else if (\r\n            type === 'rangepicker' ||\r\n            ((type === 'datetimepicker' || type === 'NCTZDatePickerEnd' || type === 'NCTZDatePickerStart') &&\r\n                snapshotItem.operationSign === 'between')\r\n        ) {\r\n            if (Array.isArray(initialvalue.value)) {\r\n                val = initialvalue.value;\r\n            } else if (initialvalue.value) {\r\n                val = initialvalue.value.split(',');\r\n            } else {\r\n                val = [];\r\n            }\r\n        } else {\r\n            val = (initialvalue || {}).value || (initialvalue || {}).display;\r\n        }\r\n        if ((type === 'datepicker' || type === 'NCTZDatePickerEnd' || type === 'NCTZDatePickerStart') && snapshotItem.operationSign === '=') {\r\n            if (Array.isArray(initialvalue.value)) {\r\n                val = initialvalue.value[0];\r\n            }\r\n        }\r\n\r\n        //  必输项标识\r\n        let mustFillIn1 = null;\r\n        let mustFillIn2 = null;\r\n        if (data.required && this.showRequire) {\r\n            mustFillIn1 = <span className=\"mustFillIn_search1\">*</span>;\r\n        }\r\n        let betweenType = ['refer', 'select', 'datetimepicker', 'number'];\r\n        if (data.required && this.showRequire && snapshotItem.operationSign === 'between' && betweenType.includes(type)) {\r\n            mustFillIn2 = <span className=\"mustFillIn_search2\">*</span>;\r\n        }\r\n        let searchChildDom = null;\r\n        // 查询条件的tip值\r\n        let fieldTip = '';\r\n        let timeValue = '';\r\n        let optText = that.getQueryOperateDisplay(data.queryOperateType);\r\n        data.placeholder = this.showPlaceholder ? data.label + optText : '';\r\n        if (!data.hasOwnProperty('maxlength')) {\r\n            data.maxlength = Infinity;\r\n        }\r\n\r\n        switch (type) {\r\n            case 'refer':\r\n                let refData = initialvalue,\r\n                    referDom = null;\r\n                if (renderItem[data.attrcode]) {\r\n                    referDom = renderItem[data.attrcode];\r\n                }\r\n                let refDisplay = '';\r\n                // else if (data.refcode) {\r\n                // \tthis.createScript(that.searchInfo.moduletype, id, data.attrcode, data.refcode);\r\n                // }\r\n                if (snapshotItem.hasOwnProperty('operationSign') && snapshotItem.operationSign === 'between') {\r\n                    let VALUE = [];\r\n                    VALUE = (refData.value || []).map((v, index) => {\r\n                        let vv = {\r\n                            value: v,\r\n                            display: refData.display ? refData.display[index] : '',\r\n                        };\r\n                        return getFunctionValueFromViewModal(vv, this.context);\r\n                    });\r\n                    refDisplay = VALUE.map(v => v.display).join('~');\r\n                    let vv = {\r\n                        value: '',\r\n                        display: '',\r\n                    };\r\n                    if (referDom) {\r\n                        referDom = {\r\n                            ...referDom,\r\n                            props: {\r\n                                ...referDom.props,\r\n                                ...data,\r\n                                placeholder: data.placeholder,\r\n                                foolValue: { ...initialvalue, ...(isEmpty(VALUE) ? vv : VALUE[0]) },\r\n                                onChange: that.betweenReferChangeEve.bind(that, '0', data),\r\n                                showTitle: false,\r\n                            },\r\n                        };\r\n                    }\r\n                    searchChildDom = (\r\n                        <div className=\"between-refer\" fieldid={getSysFieldid(data.attrcode)}>\r\n                            <div className=\"startRefer between-refer-item\">\r\n                                {referDom || (\r\n                                    <ReferLoader\r\n                                        {...data}\r\n                                        placeholder={data.placeholder}\r\n                                        foolValue={{ ...initialvalue, ...(isEmpty(VALUE[0]) ? vv : VALUE[0]) }}\r\n                                        onChange={that.betweenReferChangeEve.bind(that, '0', data)}\r\n                                        showTitle={false}\r\n                                    />\r\n                                )}\r\n                            </div>\r\n                            <div className=\"between-refer-line\">-{mustFillIn2}</div>\r\n                            <div className=\"endRefer between-refer-item\">\r\n                                {referDom || (\r\n                                    <ReferLoader\r\n                                        {...data}\r\n                                        placeholder={data.placeholder}\r\n                                        foolValue={{ ...initialvalue, ...(isEmpty(VALUE[1]) ? vv : VALUE[1]) }}\r\n                                        onChange={that.betweenReferChangeEve.bind(that, '1', data)}\r\n                                        showTitle={false}\r\n                                    />\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                } else {\r\n                    if (Array.isArray(refData.value)) {\r\n                        refData = {\r\n                            value: refData.value[0],\r\n                            display: refData.display[0],\r\n                        };\r\n                    }\r\n                    let VALUE = getFunctionValueFromViewModal(refData, this.context);\r\n                    refDisplay = VALUE.display;\r\n                    if (referDom) {\r\n                        referDom = {\r\n                            ...referDom,\r\n                            props: {\r\n                                ...referDom.props,\r\n                                ...data,\r\n                                placeholder: data.placeholder,\r\n                                foolValue: { ...initialvalue, ...VALUE },\r\n                                onChange: that.referChangeEve.bind(that, data),\r\n                                showTitle: false,\r\n                            },\r\n                        };\r\n                    }\r\n                    searchChildDom = (\r\n                        <span className=\"search-dom\">\r\n                            {referDom || (\r\n                                <ReferLoader\r\n                                    {...data}\r\n                                    placeholder={data.placeholder}\r\n                                    foolValue={{ ...initialvalue, ...VALUE }}\r\n                                    onChange={that.referChangeEve.bind(that, data)}\r\n                                    showTitle={false}\r\n                                />\r\n                            )}\r\n                        </span>\r\n                    );\r\n                }\r\n                fieldTip = refDisplay && data.label ? data.label + ':' + refDisplay : '';\r\n\r\n                break;\r\n            case 'input':\r\n                searchChildDom = (\r\n                    <span className=\"search-dom\">\r\n                        <FormControl\r\n                            disabled={!!disabled}\r\n                            value={val}\r\n                            isCheckChinese={!!data.maxlength}\r\n                            maxlength={data.maxlength}\r\n                            onBlur={that.inputBlur.bind(that, data)}\r\n                            placeholder={data.placeholder}\r\n                            onChange={that.onInputChange.bind(that, data)}\r\n                            maxlength={data.maxlength}\r\n                        />\r\n                    </span>\r\n                );\r\n                fieldTip = val && data.label ? data.label + ':' + val : '';\r\n                break;\r\n            case 'select':\r\n                if (val === '') {\r\n                    val = undefined;\r\n                }\r\n                if (data.isMultiSelectedEnabled) {\r\n                    //多选暂时这样，UE还没有出，后续再改\r\n                    searchChildDom = (\r\n                        <span className=\"search-dom\">\r\n                            <Select\r\n                                disabled={!!disabled}\r\n                                className=\"multiple-select\"\r\n                                multiple\r\n                                getPopupContainer={() => {\r\n                                    return this.parentRef || document.body;\r\n                                }}\r\n                                style={{ marginRight: 6 }}\r\n                                placeholder={data.placeholder}\r\n                                value={val}\r\n                                onChange={that.onMultipleChange.bind(that, data)}\r\n                                fieldid={data.attrcode}\r\n                                supportSearch={data.supportSearch}\r\n                            >\r\n                                {data.options &&\r\n                                    data.options.map((val, index) => {\r\n                                        return (\r\n                                            <Option key={index} value={String(val.value)}>\r\n                                                {val.display}\r\n                                            </Option>\r\n                                        );\r\n                                    })}\r\n                            </Select>\r\n                        </span>\r\n                    );\r\n                } else {\r\n                    if (snapshotItem.hasOwnProperty('operationSign') && snapshotItem.operationSign === 'between') {\r\n                        searchChildDom = (\r\n                            <span className=\"search-dom\">\r\n                                <NCSelectBetween\r\n                                    disabled={!!disabled}\r\n                                    showSearch\r\n                                    style={{ marginRight: 6 }}\r\n                                    placeholder={data.placeholder}\r\n                                    value={val}\r\n                                    mustFill={mustFillIn2}\r\n                                    optionFilterProp=\"children\"\r\n                                    onChange={that.onSelectedBetweenChange.bind(that, data)}\r\n                                    fieldid={data.attrcode}\r\n                                    options={data.options}\r\n                                />\r\n                            </span>\r\n                        );\r\n                    } else {\r\n                        searchChildDom = (\r\n                            <span className=\"search-dom\">\r\n                                <Select\r\n                                    disabled={!!disabled}\r\n                                    showSearch\r\n\r\n                                    showClear={!data.required}\r\n                                    getPopupContainer={trigger => {\r\n                                        const node = trigger.parentNode.parentNode;\r\n                                        return node || document.body;\r\n                                    }}\r\n                                    style={{ marginRight: 6 }}\r\n                                    placeholder={data.placeholder}\r\n                                    value={val}\r\n                                    optionFilterProp=\"children\"\r\n                                    onChange={that.onSelectedChange.bind(that, data)}\r\n                                    fieldid={data.attrcode}\r\n                                    supportSearch={data.supportSearch}\r\n                                >\r\n                                    {/* <Option key={'__clear__'} value={'__clear__'} style={{ color: '#00b39e' }}>\r\n\t\t\t\t\t\t\t\t\t\t清空\r\n\t\t\t\t\t\t\t\t\t</Option> */}\r\n                                    {data.options &&\r\n                                        data.options.map((val, index) => {\r\n                                            return (\r\n                                                <Option key={index} value={String(val.value)}>\r\n                                                    {val.display}\r\n                                                </Option>\r\n                                            );\r\n                                        })}\r\n                                </Select>\r\n                            </span>\r\n                        );\r\n                    }\r\n                }\r\n                let tips = initialvalue.display;\r\n                if (initialvalue && initialvalue.value === 'Y') {\r\n                    tips = multiLang['page-search-0089'];\r\n                } else if (initialvalue && initialvalue.value === 'N') {\r\n                    tips = multiLang['page-search-0090'];\r\n                }\r\n                fieldTip = !isEmpty(val) && data.label ? data.label + ':' + tips : '';\r\n                break;\r\n            case 'datepicker':\r\n                const format = 'YYYY-MM-DD';\r\n\r\n                searchChildDom = (\r\n                    <span className=\"search-dom\">\r\n                        <NCDatePickerClient\r\n                            panelValue={this.Date}\r\n                            arrowKeyDownEnable\r\n                            fieldid={data.attrcode}\r\n                            disabled={!!disabled}\r\n                            //format={format}\r\n                            onSelect={that.onDateSelect}\r\n                            onChange={that.onDateChange.bind(that, data)}\r\n                            // locale={zhCN}\r\n                            value={val}\r\n                            placeholder={data.placeholder}\r\n                            operationSign={snapshotItem.operationSign}\r\n                            //timeFunCallBack = {timeFunCallBack.bind(that,data)}\r\n                            showTimeFunction={true}\r\n                            hiddenFunList={hiddenfunlist}\r\n                            multiLang={multiLang}\r\n                            LangData={LangData}\r\n                            showClear={true}\r\n                        />\r\n                    </span>\r\n                );\r\n                timeValue = initialvalue.display;\r\n                fieldTip = val && data.label ? data.label + ':' + formatDatetime(timeValue, 'date') : '';\r\n                break;\r\n            case 'datetimepicker':\r\n                if (snapshotItem.hasOwnProperty('operationSign') && snapshotItem.operationSign === 'between') {\r\n                    searchChildDom = (\r\n                        <span className=\"search-dom\">\r\n                            <NCDateTimePickerBetween\r\n                                panelValue={this.Date}\r\n                                arrowKeyDownEnable\r\n                                fieldid={data.attrcode}\r\n                                disabled={!!disabled}\r\n                                className=\"search\"\r\n                                mustFill={mustFillIn2}\r\n                                //format=\"YYYY-MM-DD HH:mm:ss\"\r\n                                onSelect={that.onDateSelect}\r\n                                onChange={that.onDateTimeBetweenChange.bind(that, data)}\r\n                                // locale={zhCN}\r\n                                value={val}\r\n                                placeholder={data.placeholder}\r\n                                showTimeFunction={true}\r\n                                hiddenFunList={hiddenfunlist}\r\n                                showClear={true}\r\n                            />\r\n                        </span>\r\n                    );\r\n                    if (this.isTrueEmpty(initialvalue.display)) {\r\n                        timeValue = '';\r\n                    } else {\r\n                        timeValue = Array.isArray(initialvalue.display) ? `${formatDatetime(initialvalue.display[0], 'datetime') || ''}~${formatDatetime(initialvalue.display[1], 'datetime') || ''}` : formatDatetime(initialvalue.display, 'datetime');\r\n                    }\r\n                } else {\r\n                    searchChildDom = (\r\n                        <span className=\"search-dom\">\r\n                            <NCTZDatePickClientTime\r\n                                panelValue={this.Date}\r\n                                arrowKeyDownEnable\r\n                                fieldid={data.attrcode}\r\n                                disabled={!!disabled}\r\n                                //format=\"YYYY-MM-DD HH:mm:ss\"\r\n                                onSelect={that.onDateSelect}\r\n                                onChange={that.onDateChange.bind(that, data)}\r\n                                // locale={zhCN}\r\n                                value={val}\r\n                                placeholder={data.placeholder}\r\n                                //timeFunCallBack = {timeFunCallBack.bind(that,data)}\r\n                                showTimeFunction={true}\r\n                                hiddenFunList={hiddenfunlist}\r\n                            />\r\n                        </span>\r\n                    );\r\n                    timeValue = initialvalue.display;\r\n                    timeValue = formatDatetime(timeValue, 'datetime');\r\n                }\r\n                // console.log('datetimepicker----datetimepicker', timeValue);\r\n                //此处有问题，时间函数类型的日期时间型的 val是 函数值，不能拿来做tips 需要一次准换\r\n                fieldTip = !isEmpty(val) && data.label ? data.label + ':' + timeValue : '';\r\n                break;\r\n            case 'timepicker':\r\n                searchChildDom = (\r\n                    <span className=\"search-dom\">\r\n                        <NCTimepicker\r\n                            fieldid={data.attrcode}\r\n                            arrowKeyDownEnable\r\n                            disabled={!!disabled}\r\n                            format=\"HH:mm:ss\"\r\n                            onSelect={that.onDateSelect}\r\n                            onChange={that.onDateChange.bind(that, data)}\r\n                            // locale={zhCN}\r\n                            value={val}\r\n                            placeholder={data.placeholder}\r\n                            //timeFunCallBack = {timeFunCallBack.bind(that,data)}\r\n                            showTimeFunction={true}\r\n                            hiddenFunList={hiddenfunlist}\r\n                            onEnter={this.clickSearch}\r\n                        />\r\n                    </span>\r\n                );\r\n                timeValue = initialvalue.value;\r\n                fieldTip = val && data.label ? data.label + ':' + formatDatetime(timeValue, 'time') : '';\r\n                break;\r\n            case 'rangepicker':\r\n                searchChildDom = (\r\n                    <span className=\"search-dom\">\r\n                        <NCRangePicker\r\n                            panelValues={this.Date}\r\n                            fieldid={data.attrcode}\r\n                            arrowKeyDownEnable\r\n                            disabled={!!disabled}\r\n                            //format={Rangformat}\r\n                            onSelect={that.onDateSelect}\r\n                            onChange={that.onRangDateChange.bind(that, data)}\r\n                            value={isEmpty(val) ? '' : val}\r\n\r\n                            showClear={true}\r\n                            placeholder={data.placeholder || ' '}\r\n                            dateInputPlaceholder={[\r\n                                multiLang['page-search-0039'] + '(YYYY-MM-DD)',\r\n                                multiLang['page-search-0040'] + '(YYYY-MM-DD)',\r\n                            ]}\r\n                            showTimeFunction={true}\r\n                            hiddenFunList={hiddenfunlist}\r\n                            multiLang={multiLang}\r\n                            LangData={LangData}\r\n                            onEnter={this.clickSearch}\r\n                        />\r\n                    </span>\r\n                );\r\n                let displayArray = [];\r\n                if (Array.isArray(initialvalue.display)) {\r\n                    displayArray = initialvalue.display;\r\n                } else if (initialvalue.display) {\r\n                    if (initialvalue.display.includes(',')) {\r\n                        displayArray = (initialvalue.display || '').split(',');\r\n                    } else {\r\n                        displayArray = (initialvalue.display || '').split('~');\r\n                    }\r\n                }\r\n                timeValue = [];\r\n                for (var i = 0; i < val.length; i++) {\r\n                    if (val[i]) {\r\n                        if (val[i].indexOf('#') !== -1) {\r\n                            timeValue.push(displayArray[i]);\r\n                        } else {\r\n                            timeValue.push(formatDatetime(this.getDateDisplay(displayArray[i]), 'date'));\r\n                        }\r\n                    }\r\n                }\r\n                timeValue = timeValue.join('~');\r\n                fieldTip = !isEmpty(timeValue) && data.label ? data.label + ':' + timeValue : '';\r\n                break;\r\n            case 'datePickerNoTimeZone':\r\n                searchChildDom = (\r\n                    <span className=\"search-dom\">\r\n                        <NCDatePicker\r\n                            panelValue={this.Date}\r\n                            fieldid={data.attrcode}\r\n                            arrowKeyDownEnable\r\n                            disabled={!!disabled}\r\n                            //format=\"YYYY-MM-DD\"\r\n                            onSelect={that.onDateSelect}\r\n                            onChange={that.onDateChange.bind(that, data)}\r\n                            // locale={zhCN}\r\n                            value={val}\r\n                            placeholder={data.placeholder}\r\n                            //timeFunCallBack = {timeFunCallBack.bind(that,data)}\r\n                            showTimeFunction={true}\r\n                            hiddenFunList={hiddenfunlist}\r\n                            showTime={false}\r\n                            onEnter={this.clickSearch}\r\n                            showClear={true}\r\n                        />\r\n                    </span>\r\n                );\r\n                // timeValue = moment(val).format(format);\r\n                fieldTip = val && data.label ? data.label + ':' + formatDatetime(val, 'date') : '';\r\n                break;\r\n            case 'NCTZDatePickerStart':\r\n                if (snapshotItem.hasOwnProperty('operationSign') && snapshotItem.operationSign === 'between') {\r\n                    searchChildDom = (\r\n                        <span className=\"search-dom\">\r\n                            <NCTZDatePickerStartBetween\r\n                                panelValue={this.Date}\r\n                                arrowKeyDownEnable\r\n                                fieldid={data.attrcode}\r\n                                disabled={!!disabled}\r\n                                //format=\"YYYY-MM-DD HH:mm:ss\"\r\n                                onSelect={that.onDateSelect}\r\n                                onChange={that.onDateTimeBetweenChange.bind(that, data)}\r\n                                // locale={zhCN}\r\n                                value={val}\r\n                                placeholder={data.placeholder}\r\n                                showTimeFunction={true}\r\n                                hiddenFunList={hiddenfunlist}\r\n                                showTime={false}\r\n                                showToday={false}\r\n                                onEnter={this.clickSearch}\r\n                                showClear={true}\r\n                            />\r\n                        </span>\r\n                    );\r\n                    if (this.isTrueEmpty(initialvalue.display)) {\r\n                        timeValue = '';\r\n                    } else {\r\n                        timeValue = Array.isArray(initialvalue.display) ? `${formatDatetime(initialvalue.display[0], 'date') || ''}~${formatDatetime(initialvalue.display[1], 'date') || ''}` : formatDatetime(initialvalue.display, 'date');\r\n                    }\r\n\r\n                } else {\r\n                    searchChildDom = (\r\n                        <span className=\"search-dom\">\r\n                            <NCTZDatePickerStart\r\n                                panelValue={this.Date}\r\n                                arrowKeyDownEnable\r\n                                fieldid={data.attrcode}\r\n                                disabled={!!disabled}\r\n                                //format={data.format || 'YYYY-MM-DD HH:mm:ss'}\r\n                                placeholder={data.placeholder}\r\n                                value={val}\r\n                                onSelect={that.onDateSelect}\r\n                                onChange={that.onDateChange.bind(that, data)}\r\n                                showTimeFunction={true}\r\n                                hiddenFunList={hiddenfunlist}\r\n                                showToday={false}\r\n                                showTime={false}\r\n                                onEnter={this.clickSearch}\r\n                                showClear={true}\r\n                            />\r\n                        </span>\r\n                    );\r\n                    timeValue = initialvalue.display ? initialvalue.display.split(' ')[0] : '';\r\n                }\r\n                fieldTip = val && data.label ? data.label + ':' + formatDatetime(timeValue, 'date') : '';\r\n                break;\r\n            case 'NCTZDatePickerRangeDay':\r\n                searchChildDom = (\r\n                    <span className=\"search-dom\">\r\n                        <NCTZDatePickerRangeDay\r\n                            panelValue={this.Date}\r\n                            arrowKeyDownEnable\r\n                            fieldid={data.attrcode}\r\n                            disabled={!!disabled}\r\n                            //format={data.format || 'YYYY-MM-DD HH:mm:ss'}\r\n                            placeholder={data.placeholder}\r\n                            value={val}\r\n                            onSelect={that.onDateSelect}\r\n                            onChange={that.onRangDateChange.bind(that, data)}\r\n                            onEnter={this.clickSearch}\r\n                            hiddenFunList={hiddenfunlist}\r\n                        />\r\n                    </span>\r\n                );\r\n                break;\r\n            case 'NCTZDatePickClientHourTime':\r\n                searchChildDom = (\r\n                    <span className=\"search-dom\">\r\n                        <NCTZDatePickClientHourTime\r\n                            panelValue={this.Date}\r\n                            arrowKeyDownEnable\r\n                            fieldid={data.attrcode}\r\n                            disabled={!!disabled}\r\n                            //format={data.format || 'YYYY-MM-DD HH:mm:ss'}\r\n                            placeholder={data.placeholder || ''}\r\n                            value={val}\r\n                            onSelect={that.onDateSelect}\r\n                            onChange={that.onDateChange.bind(that, data)}\r\n                            onEnter={this.clickSearch}\r\n                            hiddenFunList={hiddenfunlist}\r\n                        />\r\n                    </span>\r\n                );\r\n                timeValue = initialvalue.display;\r\n                fieldTip = val && data.label ? data.label + ':' + formatDatetime(timeValue, 'date') : '';\r\n                break;\r\n            case 'NCTZDatePickClientTime':\r\n                searchChildDom = (\r\n                    <span className=\"search-dom\">\r\n                        <NCTZDatePickClientTime\r\n                            panelValue={this.Date}\r\n                            arrowKeyDownEnable\r\n                            fieldid={data.attrcode}\r\n                            disabled={!!disabled}\r\n                            //format={data.format || 'YYYY-MM-DD HH:mm:ss'}\r\n                            placeholder={data.placeholder || ''}\r\n                            value={val}\r\n                            onSelect={that.onDateSelect}\r\n                            onChange={that.onDateChange.bind(that, data)}\r\n                            onEnter={this.clickSearch}\r\n                            hiddenFunList={hiddenfunlist}\r\n                        />\r\n                    </span>\r\n                );\r\n                timeValue = initialvalue.display;\r\n                fieldTip = val && data.label ? data.label + ':' + formatDatetime(timeValue, 'datetime') : '';\r\n                break;\r\n            case 'NCTZDatePickerEnd':\r\n                if (snapshotItem.hasOwnProperty('operationSign') && snapshotItem.operationSign === 'between') {\r\n                    searchChildDom = (\r\n                        <span className=\"search-dom\">\r\n                            <NCTZDatePickerEndBetween\r\n                                panelValue={this.Date}\r\n                                arrowKeyDownEnable\r\n                                fieldid={data.attrcode}\r\n                                disabled={!!disabled}\r\n                                //format=\"YYYY-MM-DD HH:mm:ss\"\r\n                                onSelect={that.onDateSelect}\r\n                                onChange={that.onDateTimeBetweenChange.bind(that, data)}\r\n                                // locale={zhCN}\r\n                                value={val}\r\n                                placeholder={data.placeholder}\r\n                                showTimeFunction={true}\r\n                                hiddenFunList={hiddenfunlist}\r\n                                showTime={false}\r\n                                showToday={false}\r\n                                onEnter={this.clickSearch}\r\n                                showClear={true}\r\n                            />\r\n                        </span>\r\n                    );\r\n                    if (this.isTrueEmpty(initialvalue.display)) {\r\n                        timeValue = '';\r\n                    } else {\r\n                        timeValue = Array.isArray(initialvalue.display) ? `${formatDatetime(initialvalue.display[0], 'date') || ''}~${formatDatetime(initialvalue.display[1], 'date') || ''}` : formatDatetime(initialvalue.display, 'date');\r\n                    }\r\n                } else {\r\n                    searchChildDom = (\r\n                        <span className=\"search-dom\">\r\n                            <NCTZDatePickerEnd\r\n                                panelValue={this.Date}\r\n                                arrowKeyDownEnable\r\n                                fieldid={data.attrcode}\r\n                                disabled={!!disabled}\r\n                                //format={data.format || 'YYYY-MM-DD HH:mm:ss'}\r\n                                placeholder={data.placeholder || ''}\r\n                                value={val}\r\n                                onSelect={that.onDateSelect}\r\n                                onChange={that.onDateChange.bind(that, data)}\r\n                                showTimeFunction={true}\r\n                                hiddenFunList={hiddenfunlist}\r\n                                showTime={false}\r\n                                showToday={false}\r\n                                onEnter={this.clickSearch}\r\n                                showClear={true}\r\n                            />\r\n                        </span>\r\n                    );\r\n                    timeValue = initialvalue.display ? initialvalue.display.split(' ')[0] : '';\r\n                }\r\n                fieldTip = val && data.label ? data.label + ':' + formatDatetime(timeValue, 'date') : '';\r\n                break;\r\n            case 'radio':\r\n                searchChildDom = (\r\n                    <span className=\"search-dom\">\r\n                        <Select\r\n                            disabled={!!disabled}\r\n                            showSearch\r\n                            style={{ marginRight: 6 }}\r\n                            placeholder={data.placeholder}\r\n                            value={val}\r\n                            optionFilterProp=\"children\"\r\n                            onChange={that.onSelectedChange.bind(that, data)}\r\n                            fieldid={data.attrcode}\r\n                        >\r\n                            {data.options &&\r\n                                data.options.map((val, index) => {\r\n                                    return (\r\n                                        <Option key={index} value={String(val.value)}>\r\n                                            {val.display}\r\n                                        </Option>\r\n                                    );\r\n                                })}\r\n                        </Select>\r\n                    </span>\r\n                );\r\n                // searchChildDom = (\r\n                // \t<span>\r\n                // \t\t<span className=\"radioName\">{data.label?data.label+':':''}&nbsp;</span>\r\n                // \t\t<NCRadio.NCRadioGroup\r\n                // \t\t\tname={data.label}\r\n                // \t\t\tselectedValue={String(val)}\r\n                // \t\t\tonChange={radioChange.bind(that, data)}\r\n                // \t\t>\r\n                // \t\t\t{data.options.map((val, index) => {\r\n                // \t\t\t\treturn (\r\n                // \t\t\t\t\t<NCRadio disabled={!!disabled} key={index} value={String(val.value)}>\r\n                // \t\t\t\t\t\t{val.display}\r\n                // \t\t\t\t\t</NCRadio>\r\n                // \t\t\t\t);\r\n                // \t\t\t})}\r\n                // \t\t</NCRadio.NCRadioGroup>\r\n                // \t</span>\r\n                // );\r\n\r\n                break;\r\n            case 'number':\r\n                let dataScale = (data.initialvalue || {}).scale;\r\n                let scale = !isEmpty(dataScale) && dataScale != '-1' ? dataScale : data.scale;\r\n                if (snapshotItem.hasOwnProperty('operationSign') && snapshotItem.operationSign === 'between') {\r\n                    searchChildDom = (\r\n                        <span className=\"search-dom\">\r\n                            <NCBetweenNum\r\n                                disabled={!!disabled}\r\n                                onChange={that.changeNumber.bind(that, data)}\r\n                                onBlur={that.inputBlur.bind(that, data, 'number')}\r\n                                scale={Number(scale)}\r\n                                mustFill={mustFillIn2}\r\n                                max={that.checkNumberHandler(data) ? data.max : null}\r\n                                min={that.checkNumberHandler(data) ? data.min : null}\r\n                                maxlength={Number(data.maxlength)}\r\n                                placeholder={data.placeholder}\r\n                                defaultPlaceholder={data.defaultPlaceholder || { start: data.label + multiLang['page-search-0078'], end: data.label + multiLang['page-search-0079'] }}\r\n                                // start={{\r\n                                // \tplaceholder: '起始'\r\n                                // }}\r\n                                // end={{\r\n                                // \tplaceholder: '结束'\r\n                                // }}\r\n                                value={val || []}\r\n                            />\r\n                        </span>\r\n                    );\r\n                } else {\r\n                    searchChildDom = (\r\n                        <span className=\"search-dom\">\r\n                            <NCNumber\r\n                                disabled={!!disabled}\r\n                                onBlur={that.inputBlur.bind(that, data, 'number')}\r\n                                scale={Number(scale)}\r\n                                value={val}\r\n                                maxlength={Number(data.maxlength)}\r\n                                placeholder={data.placeholder}\r\n                                onChange={that.changeNumber.bind(that, data)}\r\n                                max={that.checkNumberHandler(data) ? data.max : null}\r\n                                min={that.checkNumberHandler(data) ? data.min : null}\r\n                            />\r\n                        </span>\r\n                    );\r\n                }\r\n                fieldTip = !this.isTrueEmpty(val) && data.label ? data.label + ':' + this.trustString(val) : '';\r\n                break;\r\n            case 'checkbox':\r\n                if (val === '') {\r\n                    val = undefined;\r\n                }\r\n                /* 初始化checkbox的时候, initialvalue数据格式应该是什么样的 ?先用数组 */\r\n                if (initialvalue.value || initialvalue.value == 0) {\r\n                    data.options.forEach(option => {\r\n                        if (isArray(initialvalue.value)) {\r\n                            if (initialvalue.value.includes(option.value)) {\r\n                                option.checked = true;\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                searchChildDom = (\r\n                    <span className=\"search-dom\">\r\n                        <Select\r\n                            disabled={!!disabled}\r\n                            className=\"multiple-select\"\r\n                            multiple\r\n                            style={{ marginRight: 6 }}\r\n                            placeholder={data.placeholder}\r\n                            value={val}\r\n                            onChange={that.onMultipleChange.bind(that, data)}\r\n                            fieldid={data.attrcode}\r\n                        >\r\n                            {data.options.map((val, index) => {\r\n                                return (\r\n                                    <Option key={index} value={String(val.value)} title={val.display}>\r\n                                        {val.display}\r\n                                    </Option>\r\n                                );\r\n                            })}\r\n                        </Select>\r\n                    </span>\r\n                );\r\n                break;\r\n            case 'checkbox_switch':\r\n                searchChildDom = (\r\n                    <span\r\n                        className=\"condition-item-contant checkbox\"\r\n                        style={{ cursor: 'pointer' }}\r\n                        onClick={e => that.onChangeCheckbox_switch.call(that, data, e)}\r\n                    >\r\n                        <span className=\"switchSpan\">{data.label} </span>\r\n                        <NCCheckbox\r\n                            disabled={!!disabled}\r\n                            ref=\"test\"\r\n                            checked={initialvalue.value}\r\n                            type=\"switch\"\r\n                            onClick={e => that.onChangeCheckbox_switch.call(that, data, e)}\r\n                        />\r\n                    </span>\r\n                );\r\n                break;\r\n            case 'switch':\r\n                searchChildDom = (\r\n                    <span\r\n                        className=\"condition-item-contant switch  search-dom\"\r\n                        style={{ cursor: 'pointer' }}\r\n                        onClick={that.switchChange.bind(that, data)}\r\n                    >\r\n                        <span className=\"switchSpan\">{data.label}</span>\r\n                        <NCCheckbox\r\n                            className=\"checkbox\"\r\n                            disabled={!!disabled}\r\n                            checked={val}\r\n                            onClick={that.switchChange.bind(that, data)}\r\n                        />\r\n                    </span>\r\n                );\r\n                break;\r\n            case 'password':\r\n                searchChildDom = (\r\n                    <span className=\"search-dom\">\r\n                        <FormControl\r\n                            disabled={!!disabled}\r\n                            value={val}\r\n                            onBlur={that.inputBlur.bind(that, data)}\r\n                            placeholder={data.placeholder}\r\n                            onChange={that.onInputChange.bind(that, data)}\r\n                            maxlength={data.maxlength}\r\n                            type=\"password\"\r\n                        />\r\n                    </span>\r\n                );\r\n                break;\r\n            case 'residtxt':\r\n                searchChildDom = (\r\n                    <span className=\"search-dom\">\r\n                        {data.languageMeta && (\r\n                            <NCMultiLangText\r\n                                disabled={!!disabled}\r\n                                value={snapshotItem.valueMap || {}}\r\n                                LangIndex={snapshotItem.initialvalue.index || ''}\r\n                                attrcode={data.attrcode}\r\n                                isCheckChinese={!!data.maxlength}\r\n                                maxlength={data.maxlength}\r\n                                languageMeta={data.languageMeta}\r\n                                onBlur={that.inputBlur.bind(that, data)}\r\n                                placeholder={data.placeholder}\r\n                                onSelect={that.onMultiLangTextSelect.bind(that, data)}\r\n                                onChange={that.onMultiLangTextChange.bind(that, data)}\r\n                            />\r\n                        )}\r\n                    </span>\r\n                );\r\n                fieldTip = !isEmpty(val) && data.label ? data.label + ':' + initialvalue.display : '';\r\n                break;\r\n        }\r\n        let tip = <div className=\"te-tips\" style={{ fontSize: '13px', wordBreak: 'break-all' }}>{fieldTip}</div>;\r\n        // 通过api设置值\r\n        if (initialvalue.value) {\r\n            this.clearRquiredWraning(data);\r\n        }\r\n\r\n        return (\r\n            <div key={data.attrcode} /* onClick={() => console.log('触发单击事件')} onFocus={() => console.log('触发焦点事件')} */>\r\n                {Number(data.leftspace) ? <Col md={Number(data.leftspace)} xs={xs} sm={sm} /> : null}\r\n                {\r\n                    <NCTooltip\r\n                        delayShow={800}\r\n                        inverse\r\n                        className=\"search\"\r\n                        overlay={fieldTip && this.showPlaceholder ? tip : null}\r\n                        placement=\"top\"\r\n                        trigger='hover'\r\n                    //className='search-area-tooltip'\r\n                    // style={!fieldTip && { display: 'none' }}\r\n                    >\r\n                        <div className=\"condition-contant\">\r\n                            {mustFillIn1}\r\n                            {searchChildDom}\r\n                        </div>\r\n                    </NCTooltip>\r\n                }\r\n\r\n                {Number(data.rightspace) ? <Col md={Number(data.rightspace)} xs={xs} sm={sm} key={index} /> : null}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport { templateEngine };\r\n","/*\r\n*   查询区高级查询弹出框组件  --wangshhj\r\n* */\r\nimport React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\n// import Ajax from 'src/api/ajax';\r\n// import { promptBox } from 'src';\r\nimport { PubSub } from '@platform/api';\r\nimport { getSysFieldid, toast, isFunction, isArray, isEmpty } from '@platform/api';\r\nimport { Select as NCSelect, Tabs as NCTabs, Input as NCFormControl, Radio as NCRadio, Tooltip as NCTooltip, HotKeys as NCHotKeys, Tree as NCTree, Icon as NCIcon } from '@platform/base';\r\nimport { getTimezoneOffset, _clone as deepClone, snapshotFilter, tree2Array, beSureBtnClick, beSureBtnClick_Del, plan2snapshotTranslate } from './_methods';\r\nimport {\r\n    _getAllSearchData,\r\n    delNode,\r\n    setSearchValByFieldHigh as setSearchValByField,\r\n    getCurrentTemplate,\r\n    _addData,\r\n    clearAllValue,\r\n    replaceData,\r\n    createOperation,\r\n    setMultiLangHigh as setMultiLang,\r\n} from './methods';\r\nimport { templateEngine } from './templateEngine';\r\nimport { promptBox } from '../PromptBox';\r\n\r\n// import toast from '../../api/toast';\r\n// import getSysFieldid from '../../api/getSysFieldid';\r\n\r\nrequire('./searchAdvModal.less');\r\n\r\nconst NCTabPane = NCTabs.TabPane;\r\nconst NCTreeNode = NCTree.TreeNode;\r\nconst NCOption = NCSelect.Option;\r\nconst NCRadioGroup = NCRadio.RadioGroup;\r\n// 查询区渲染完成发布订阅标识\r\nconst BEFORECOMPLETE = 'beforeAreaChangeComplete'\r\nconst COMPLETE = 'areaChangeComplete';\r\n\r\n/*\r\n*   SearchAdvModal组件，props中的参数解释：\r\n*\r\n*   moduleId ,                   //查询区组件id\r\n*\tadvMeta ,                    //查询区模板\r\n*\tcloseModal ,                 //关闭组件方法\r\n*\tsearchBtnClick ,             //查询按钮回调\r\n*\tonAfterEvent ,               //编辑后事件\r\n*   showAdvSearchPlanBtn ,       //是否显示保存方案按钮 ，默认显示\r\n*   replaceAdvBody ,             //替换高级查询body区域\r\n*   addAdvTabs ,                 //添加自定义tab页签\r\n*   addAdvBody ,                 //添加自定义查询条件\r\n*   replaceRightBody ,           //添加高级查询区右侧区域自定义查询条件Dom (fun)\r\n*   searchPlanCache ,            //查询方案数据\r\n*   searchPlanCacheChange ,      //查询方案修改后，回调\r\n*   oid ,                        // 查询模板的oid\r\n*   hideSearchCondition = false, // 隐藏候选条件\r\n*   hideSearchPlan = false       // 隐藏高级查询的查询方案\r\n*   saveSearchPlan,              // 保存查询方案确定按钮事件 ，用于业务组返回自定义的查询条件\r\n*   clickPlanEve,                // 点击高级面板中的查询方案事件 ,用于业务组为自定义查询区赋值\r\n*   advSearchClearEve,           // 高级面板中的清空按钮点击事件回调，用于业务组清除自定义查询条件的值\r\n* */\r\nexport default class SearchAdvCom extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            showModal: true, // 组件显影性\r\n            moveNode: null, // 拖拽节点\r\n            // planTabKey: props.hideSearchCondition ? '2' : '1', // 查询方案的tabkey, 默认2，业务组不需要候选条件时改为1\r\n            // preparedPlanName: '', // 预制查询方案名称\r\n            // needReveal: false, // 是否需要展示查询方案的未填写项；\r\n            userControlAll: false, // 业务组自定义整个高级查询区,\r\n            // advMeta: '',\r\n            // searchInfo: deepClone(props.searchInfo),\r\n            searchInfo: {\r\n                snapshotMap: {\r\n                    simple: [],\r\n                    normal: [],\r\n                    super: []\r\n                }\r\n            },\r\n            onlyShowSuperBtn: props.onlyShowSuperBtn,\r\n        };\r\n        this.lastStatus = props.lastStatus;\r\n        // 业务组自定义查询区域 ，点查询方案时，不用展示方案中的未填写项\r\n        if (isFunction(props.replaceRightBody)) {\r\n            this.state.userControlAll = true;\r\n            props.statusChange(this.state.status, this.state.userControlAll);\r\n        }\r\n        this.firstInit = true;\r\n        this.multiLang = props.multiLang;\r\n        this.LangData = props.LangData;\r\n        setMultiLang(this.multiLang);\r\n        this.initByProps(props, true);\r\n        // this.getSnapshotCache(this.state.searchInfo);\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (!isFunction(this.props.replaceAdvBody) && !this.props.hideSearchCondition) {\r\n            //每次更新高级查询都更新左侧的内容\r\n            this.createSearchCondition.call(this, this.items);\r\n        }\r\n        // 没办法了 只能通过全局订阅发布做了 \r\n        this.searchChoosePlan = PubSub.subscribe('searchChoosePlan', (msg, data) => {\r\n            if (data) {\r\n                let currentPlan = this.props.searchPlanCache.find(item => item.name == data);\r\n                if (currentPlan) {\r\n                    this.setState({ currentPlan });\r\n                    this.clickSearchPlan(currentPlan);\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.searchChoosePlan && PubSub.unsubscribe(this.searchChoosePlan);\r\n    }\r\n\r\n    componentWillReceiveProps(props) {\r\n\r\n        // this.state.searchInfo = deepClone(props.searchInfo)\r\n        // this.state.searchPlan = props.searchPlanCache;\r\n        // this.state.currentPlan = props.searchInfo.currentPlan;\r\n        // this.getSnapshotCache(this.state.searchInfo);\r\n        // this.lastStatus = props.lastStatus;\r\n        // 当从方案里面切进 super时 选中\"2\" 并选中当前方案\r\n        // if ('leftTab' in props && props.leftTab == '2') {\r\n        //     this.setState({ leftTab: props.leftTab });\r\n        // }\r\n        if (props.searchInfo.showAdvModal) {\r\n            this.initByProps(props, false);\r\n        }\r\n        // if (this.state.currentPlan.name !== props.searchInfo.currentPlan.name) {\r\n        // \tthis.clickSearchPlan(this.state.currentPlan);\r\n        // }\r\n\r\n        // 繁琐判断 需重新思考\r\n        // if('choosePlanName' in props && props.choosePlanName != undefined && !props.choosePlanFlag){\r\n        // \tlet currentPlan = props.searchPlanCache.find(item => item.name == props.choosePlanName)\r\n        // \tif(currentPlan){\r\n        // \t\tthis.setState({\r\n        // \t\t\tcurrentPlan: currentPlan\r\n        // \t\t})\r\n        // \t\tthis.clickSearchPlan(currentPlan)\r\n        // \t}\r\n        // }\r\n    }\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        if (!nextProps.onlyShowAdvArea && !nextProps.searchInfo.showAdvModal) {\r\n            return false\r\n        }\r\n        return true\r\n    }\r\n    initByProps = (props, flag) => {\r\n        if (flag || !this.state.showModal) {\r\n            this.state.status = props.searchInfo.status || 'normal'; // 当前操作区域\r\n            this.state.normalAdvId = props.moduleId + '@' + 'normal'; // 普通查询区id\r\n            this.state.superAdvId = props.moduleId + '@' + 'super'; // 高级查询区id\r\n            this.state.leftTab = props.hideSearchCondition ? '2' : (props.leftTab || '1'); // 左侧tab的key值\r\n            this.state.currentPlan = props.searchInfo.currentClickPlan || props.searchInfo.currentPlan; // 当前正在操作的查询方案\r\n            this.state.searchPlanName = this.state.currentPlan.name || ''; // 修改查询方案名称\r\n            this.state.searchInfo.itemsMap = {};\r\n\r\n            this.state.searchInfo.status = this.state.status;\r\n        }\r\n\r\n        props.searchInfo.currentClickPlan = null;\r\n        //每次更新都需要同步的数据，主要是模板的内容\r\n        this.state.searchInfo.searchPlanCache = props.searchPlanCache || [];// 查询方案数据\r\n        this.state.searchPlan = props.searchPlanCache || [];// 查询方案数据\r\n        let items = props.meta.items || [];\r\n        this.items = items;\r\n        this.state.searchInfo.fixedConditionGroup = props.searchInfo.fixedConditionGroup;\r\n        items.forEach(item => (this.state.searchInfo.itemsMap[item.attrcode] = item));\r\n\r\n        //根据currentPlan初始化普通和高级区域的快照数据\r\n        //如果是预制方案就按照simple的数据去初始化normal和super，如果不是预制方案就根据方案的类型初始化数据\r\n        this.defaultOpen = true;\r\n\r\n        //let items = deepClone(this.props.advMeta)||[];\r\n\r\n        /* 添加树组件需要的字段 */\r\n        items.forEach(item => {\r\n            if (!item.hasOwnProperty('attrcode')) {\r\n                console.error('查询模板中有字段缺少attrcode字段，请检查');\r\n            }\r\n            if (!item.hasOwnProperty('label')) {\r\n                console.error('查询模板中有字段缺少label字段，请检查');\r\n            }\r\n            item.refpk = item.attrcode;\r\n            item.refname = item.label;\r\n            item.isleaf = true;\r\n        });\r\n        //items = items.filter(item=>item.isCondition===true);\r\n\r\n        // 当业务组要替换整个body区域或者不需要候选条件时，不加载候选条件\r\n        if (!isFunction(props.replaceAdvBody) && !props.hideSearchCondition && !flag) {\r\n            //每次更新高级查询都更新左侧的内容\r\n            this.createSearchCondition.call(this, items);\r\n        }\r\n\r\n        // 当业务组需要替换整个body区或者替换右侧body区域时，不默认加载右侧 必输条件\r\n        if (!isFunction(props.replaceAdvBody) && !isFunction(props.replaceRightBody)) {\r\n            this.tabIndex = this.tabIndex || '0';\r\n            if (isFunction(props.addAdvTabs)) {\r\n                let def = [...props.addAdvTabs()];\r\n                for (let index = 0; index < def.length; index++) {\r\n                    const element = def[index];\r\n                    if (element.defaultOpen === true) {\r\n                        this.tabIndex = String(index + 1);\r\n                        break;\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n            //为了处理非首次初始化高级弹窗导致的 根据模板更新右侧区域\r\n            // if (isEmpty(searchInfo.snapshotMap.normal)) { this.addRequiredItems.call(this, items); }\r\n\r\n            let searchInfo = this.state.searchInfo;\r\n            let currentPlan = this.state.currentPlan;\r\n            let isDefaultPlan = currentPlan.pk_ncc_queryscheme == '001';\r\n            searchInfo.isDefaultPlan = isDefaultPlan;\r\n            let currentSnap = deepClone(currentPlan.renderobj4web_snap);\r\n            let defaultSnap = deepClone(props.searchInfo.defaultPlan.renderobj4web);\r\n            if (flag || !this.state.showModal) {\r\n                if (isDefaultPlan) {\r\n                    if (this.state.status == 'super') {\r\n                        this.state.searchInfo.snapshotMap.normal = plan2snapshotTranslate(searchInfo, defaultSnap, props.context, createOperation);\r\n                        this.state.searchInfo.snapshotMap.super = currentSnap;\r\n                    } else {\r\n                        this.state.searchInfo.snapshotMap.normal = plan2snapshotTranslate(searchInfo, currentSnap, props.context, createOperation);\r\n                        this.state.searchInfo.snapshotMap.super = [\r\n                            {\r\n                                attrcode: 'root',\r\n                                refpk: 'root',\r\n                                key: 'root',\r\n                                operationSign: 'and',\r\n                                noRemove: true, //不可移除\r\n                                children: deepClone(this.state.searchInfo.snapshotMap.normal),\r\n                                visible: true,\r\n                            }\r\n                        ];\r\n                    }\r\n\r\n                } else {\r\n                    if (searchInfo.status == 'super') {\r\n                        // let superSnap = [...searchInfo.fixedConditionGroup, ...currentSnap[0].children];\r\n                        // this.state.searchInfo.snapshotMap.super = plan2snapshotTranslate(searchInfo, currentSnap, props.context, createOperation);\r\n\r\n                        if (currentSnap && currentSnap.length && currentSnap[0]) {\r\n                            this.state.searchInfo.snapshotMap.super = plan2snapshotTranslate(searchInfo, currentSnap, props.context, createOperation);\r\n                        } else {\r\n                            this.state.searchInfo.snapshotMap.super = [{\r\n                                attrcode: 'root',\r\n                                refpk: 'root',\r\n                                key: 'root',\r\n                                operationSign: 'and',\r\n                                noRemove: true, //不可移除\r\n                                children: plan2snapshotTranslate(searchInfo, currentSnap, props.context, createOperation),\r\n                                visible: true,\r\n                            }]\r\n                        }\r\n                        this.state.searchInfo.snapshotMap.normal = plan2snapshotTranslate(searchInfo, defaultSnap, props.context, createOperation);\r\n                    } else {\r\n                        // let normalSnap = [...searchInfo.fixedConditionGroup, ...currentSnap[0].children];\r\n                        this.state.searchInfo.snapshotMap.normal = plan2snapshotTranslate(searchInfo, currentSnap, props.context, createOperation);\r\n                        this.state.searchInfo.snapshotMap.super = [{\r\n                            attrcode: 'root',\r\n                            refpk: 'root',\r\n                            key: 'root',\r\n                            operationSign: 'and',\r\n                            noRemove: true, //不可移除\r\n                            children: plan2snapshotTranslate(searchInfo, defaultSnap, props.context, createOperation),\r\n                            visible: true,\r\n                        }]\r\n                    }\r\n                }\r\n            } else {\r\n                console.log('gaoji已经打开');\r\n            }\r\n        }\r\n        //同步高级弹窗的状态\r\n        this.state.showModal = props.searchInfo.showAdvModal;\r\n        props.searchInfo.snapshotMap.normal = this.state.searchInfo.snapshotMap.normal;\r\n        props.searchInfo.snapshotMap.super = this.state.searchInfo.snapshotMap.super;\r\n        // if (!searchInfo.currentPlan.isMyPlan) {\r\n        // \tthis.clickSearchPlan(searchInfo.currentPlan);\r\n        // }\r\n\r\n        this.firstInit = false;\r\n    };\r\n\r\n    createDefaultSnap = (itemsMap, currentSnap) => {\r\n        this.state.searchInfo.snapshotMap.normal = currentSnap.map((item) => {\r\n            let itemObj = itemsMap[item.attrcode];\r\n            if (itemObj) {\r\n                if (itemObj.queryOperateType) {\r\n                    item.operationOptions = createOperation(itemObj.queryOperateType);\r\n                } else {\r\n                    item.operationOptions = createOperation('=');\r\n                }\r\n            }\r\n            return {\r\n                attrcode: item.attrcode,\r\n                initialvalue: { value: item.initialvalue?.value || '', display: item.initialvalue?.display || '' },\r\n                isExtend: item.isExtend,\r\n                key: item.attrcode,\r\n                remove: item.remove,\r\n                visible: item.visible,\r\n                refpk: item.attrcode,\r\n                operationSign: item.operationSign,\r\n                operationOptions: item.operationOptions\r\n            }\r\n        })\r\n        this.state.searchInfo.snapshotMap.super = [\r\n            {\r\n                attrcode: 'root',\r\n                refpk: 'root',\r\n                key: 'root',\r\n                operationSign: 'and',\r\n                noRemove: true, //不可移除\r\n                children: deepClone(this.state.searchInfo.snapshotMap.normal),\r\n                visible: true,\r\n            },\r\n        ]\r\n    }\r\n\r\n    /* setState */\r\n    setStateEve = callback => {\r\n        this.setState(this.state, callback);\r\n    };\r\n\r\n    getSnapshotCache = searchInfo => {\r\n        function setvalue(list, cache) {\r\n            list.forEach(item => {\r\n                if (item.children) {\r\n                    setvalue(item.children, cache);\r\n                } else {\r\n                    if (cache[item.attrcode]) {\r\n                        item.initialvalue = cache[item.attrcode];\r\n\r\n                    }\r\n                }\r\n            });\r\n\r\n        }\r\n        Object.keys(searchInfo.snapshotMap).forEach(status => {\r\n            let snapshot = searchInfo.snapshotMap[status];\r\n            let cache = searchInfo.snapshotCache[status];\r\n            if (!isEmpty(cache)) {\r\n                setvalue(snapshot, cache);\r\n                searchInfo.snapshotCache[status] = {};\r\n            }\r\n\r\n        });\r\n    }\r\n\r\n    // 从meta里面获取 候选条件树\r\n    getConditionTreeFromItems = items => {\r\n        items.forEach(item => {\r\n            if (!item.hasOwnProperty('attrcode')) {\r\n                console.error(this.multiLang['page-search-0026'] + 'attrcode' + this.multiLang['page-search-0027'] + '，' + this.multiLang['page-search-0028']);\r\n            }\r\n            if (!item.hasOwnProperty('label')) {\r\n                console.error(this.multiLang['page-search-0026'] + 'label' + this.multiLang['page-search-0027'] + '，' + this.multiLang['page-search-0028']);\r\n            }\r\n            item.refpk = item.attrcode || '';\r\n            item.refname = item.label || '';\r\n            !item.pid && delete item.pid;\r\n        });\r\n        return this.props.syncTree.createTreeData(items);\r\n    };\r\n\r\n    /* 查询按钮点击事件 */\r\n    searchBtnClickEve = async () => {\r\n        let data = null;\r\n        let id = null;\r\n        let template = [];\r\n        const snapshot = this.state.searchInfo.snapshotMap[this.state.searchInfo.status];\r\n        // let simple_snapshot = tree2Array(this.state.searchInfo.snapshotMap[this.state.searchInfo.status]);\r\n\r\n        // 如果业务组替换整个body或者右侧body区域，则需要业务组自己组织自定义查询条件\r\n        if (isFunction(this.props.replaceRightBody) || isFunction(this.props.replaceAdvBody)) {\r\n            /* 此时查询按钮的回调方法中，data为 'userControl'，表示需要业务组自己处理自定义的查询条件 */\r\n            data = 'userControl';\r\n            if (isFunction(this.props.searchBtnClick)) {\r\n                let f = await this.props.searchBtnClick({ ...this.props._this._this, ...this.props._this._this.props },\r\n                    data, 'super');\r\n                if (!f) {\r\n                    this.state.searchInfo.status = this.lastStatus;\r\n                    this.close(true);\r\n                }\r\n            }\r\n\r\n        } else {\r\n            data = _getAllSearchData.call(this, this.props.id, this.state.searchInfo, true);\r\n            template = getCurrentTemplate.call(this.props._this, this.props.moduleId);\r\n\r\n            if (data !== false) {\r\n                let finalData = {\r\n                    queryAreaCode: this.props.id,\r\n                    oid: this.props.oid || this.props.meta.oid, //这块是一个暂时的处理，因为有些场景this.props.oid ==undefined 原因还没查出来\r\n                    querytype: 'tree',\r\n                    querycondition: data,\r\n                    template,\r\n                    nctz: getTimezoneOffset(),\r\n\r\n                };\r\n                // 外层样式 plan => simple  add by wanglongx 不过滤有值无值\r\n                if (isFunction(this.props.searchBtnClick)) {\r\n                    let clickResult = await this.props.searchBtnClick({ ...this.props._this._this, ...this.props._this._this.props }, data, 'super', data && finalData);\r\n                    if (!clickResult) {\r\n                        // this.state.searchInfo.currentSnapshot = snapshotFilter(snapshot,this.state.searchInfo.itemsMap);\r\n\r\n                        // this.state.searchInfo.currentSnapshot = snapshot;\r\n                        this.props.searchInfo.snapshotMap['simple'] = snapshot;\r\n                        this.state.currentPlan.renderobj4web_snap = snapshot;\r\n                        // this.props.searchInfo.currentPlan.renderobj4web_snap = snapshot;\r\n                        this.props.searchInfo.currentPlan = this.state.currentPlan || {};\r\n                        this.props.searchInfo.status = 'simple';\r\n                        this.close(true);\r\n                    }\r\n                } else {\r\n                    // this.state.searchInfo.currentSnapshot = snapshotFilter(snapshot,this.state.searchInfo.itemsMap);\r\n\r\n                    // this.state.searchInfo.currentSnapshot = snapshot;\r\n                    this.props.searchInfo.snapshotMap['simple'] = snapshot;\r\n                    this.state.currentPlan.renderobj4web_snap = snapshot;\r\n                    // this.props.searchInfo.currentPlan.renderobj4web_snap = snapshot;\r\n                    this.props.searchInfo.currentPlan = this.state.currentPlan || {};\r\n                    this.props.searchInfo.status = 'simple';\r\n                    this.close(true);\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    /* 取消 */\r\n    cancelClick = e => {\r\n        if (e) e.stopPropagation();\r\n        const { backPosition } = this.props;\r\n        isFunction(backPosition) && backPosition();\r\n        if (!this.state.onlyShowSuperBtn) {\r\n            this.props.searchInfo.status = this.lastStatus;\r\n        }\r\n\r\n        this.close(0);\r\n    };\r\n\r\n    /* 保存方案按钮 */\r\n    saveSearchPlanClick = () => {\r\n        // this.props.modal.show('saveSearchPlan@' + this.props.moduleId);\r\n        beSureBtnClick.call(this, 'save');\r\n    };\r\n\r\n    /* 新增方案按钮 */\r\n    addSearchPlanClick = () => {\r\n        this.props.modal.show('addSearchPlan@' + this.props.moduleId);\r\n    };\r\n\r\n    /* 关闭模态框 */\r\n    close = flag => {\r\n        const { onlyShowModalCancelCallback, onlyShowModal } = this.props;\r\n        let statusChangeEvent = this.props.statusChangeEvent;\r\n        statusChangeEvent && statusChangeEvent(this.state.searchInfo.status);\r\n        !flag && onlyShowModal && isFunction(onlyShowModalCancelCallback) && onlyShowModalCancelCallback();\r\n        // 由于卸载导致  state 回调不触发\r\n        // PubSub.publish(COMPLETE, true);\r\n        // let { renderobj4web_snap, renderobj4web } = this.props.searchInfo.currentPlan;\r\n        // if (flag === 0 && renderobj4web_snap.length > 0) {\r\n        //     if (renderobj4web && renderobj4web.length > 0 && renderobj4web[0].attrcode != renderobj4web_snap.attrcode)\r\n        //         delete this.props.searchInfo.currentPlan.renderobj4web_snap;\r\n        // }\r\n\r\n        PubSub.publishSync(BEFORECOMPLETE, true);\r\n        this.props._this._this.infoExchangeController.publishSync('heightChange', { area: 'searchArea' });\r\n        this.setState({ showModal: false }, () => {\r\n            this.props._this._this.infoExchangeController.publishSync('heightChange', { area: 'searchArea' });\r\n            // 发布通知表格更新高度\r\n            PubSub.publish(COMPLETE, true);\r\n        });\r\n        document.body.style.overflow = 'auto';\r\n        this.props.closeModal();\r\n    };\r\n\r\n    /* 字段操作符change事件 */\r\n    mathSignChange = (data, val, oldValue) => {\r\n        let advancedData = this.state.searchInfo.snapshotMap[this.state.searchInfo.status];\r\n        if (val !== 'between' && oldValue === 'between') {\r\n            data.initialvalue.value = '';\r\n            data.initialvalue.display = '';\r\n        } else if (val === 'between' && oldValue !== 'between') {\r\n            data.initialvalue.display = [];\r\n            data.initialvalue.value = [];\r\n        }\r\n        data.operationSign = val;\r\n        //this.mathSignChangeEve(advancedData, data.refpk, val);\r\n        this.setStateEve(() => {\r\n            typeof this.props.onOperateTypeChange === 'function' && this.props.onOperateTypeChange(data.attrcode, val);\r\n        });\r\n    };\r\n\r\n    /* 拖拽到节点 */\r\n    onDropChildren = e => {\r\n        e.preventDefault();\r\n\r\n        const keys = JSON.parse(e.currentTarget.getAttribute('keys'));\r\n        this.state.searchInfo.targetKey = keys.attrcode;\r\n        this.state.searchInfo.targetIsExtend = keys.isExtend;\r\n    };\r\n\r\n    /* 拖拽经过节点 */\r\n    onDragOver = e => {\r\n        e.preventDefault();\r\n        return true;\r\n    };\r\n\r\n    /* 父节点操作符change事件 */\r\n    logicSelectChange = (data, val, oldval) => {\r\n        setSearchValByField.call(this.props._this._this, this.props.moduleId, data.refpk, data, val);\r\n    };\r\n\r\n    /* 左侧tab ，change事件 */\r\n    tabChange = val => {\r\n        if (val === '2') {\r\n            //如果还没查询过查询方案，去查询  暂时注释掉\r\n            //this.querySearchPlan();\r\n        }\r\n        this.setState({ leftTab: val });\r\n    };\r\n\r\n    /* 创建左侧查询条件区域 */\r\n    createSearchCondition = items => {\r\n        //去掉固定条件和模板不显示的项\r\n        let _item = items.filter(item => item.isfixedcondition != true && item.visible == true);\r\n        //_item.forEach(v=>v);\r\n        let tree = this.props.syncTree.createTreeData(deepClone(_item));\r\n        this.props.syncTree.setSyncTreeData(this.props.moduleId, tree);\r\n    };\r\n\r\n    /* 默认将visible:true放到普通和高级区域中 */\r\n    addRequiredItems = items => {\r\n        if (!items) return;\r\n        let newItems = [];\r\n        /* 过滤默认显示项 */\r\n        let filterMeta = data => {\r\n            data.map(item => {\r\n                if (Array.isArray(item.children)) {\r\n                    filterMeta(item.children);\r\n                }\r\n                if (item.visible || item.isfixedcondition) {\r\n                    //item.advrequired = !!item.required;\r\n                    newItems.push(item);\r\n                }\r\n            });\r\n        };\r\n        filterMeta(items);\r\n        //排序这个 先放一下 ，看看在哪里比较合适\r\n        //newItems.sort((v1, v2) => v1.visibleposition - v2.visibleposition);\r\n        if (newItems.length) {\r\n            _addData.call(this, newItems, 'normal', this.firstInit && this.props.setInitValueEvent, this.props.isTemplateOrder);\r\n            _addData.call(this, newItems, 'super', this.firstInit && this.props.setInitValueEvent, this.props.isTemplateOrder);\r\n        }\r\n\r\n    };\r\n\r\n    /* 切换普通和高级 */\r\n    advOrNormal = val => {\r\n        this.state.searchInfo.status = val;\r\n        let statusChangeEvent = this.props.statusChangeEvent;\r\n        statusChangeEvent && statusChangeEvent(this.state.searchInfo.status);\r\n        /* 返回当前页签是普通还是高级 + 业务组是否自定义查询区 */\r\n        this.props.statusChange(val, this.state.userControlAll);\r\n        this.setStateEve();\r\n    };\r\n\r\n    /*拖拽元素在目标元素头上移动的时候*/\r\n    onDragOver = e => {\r\n        e.preventDefault();\r\n        return true;\r\n    };\r\n\r\n    //单击箭头添加查询条件\r\n    clickRight = () => {\r\n        this.onDrop('clickRight');\r\n    };\r\n\r\n    /* 拖到普通查询的区域 */\r\n    onDrop = flag => {\r\n        if (flag === 'clickRight') {\r\n            //hover 候选条件的时候 出现的右侧单击箭头，点击的时候获得node\r\n            this.state.moveNode = deepClone(this.props.syncTree.getHoverNodeKey(this.props.moduleId));\r\n        } else {\r\n            this.state.moveNode = deepClone(this.props.syncTree.getMoveNodeKey(this.props.moduleId));\r\n        }\r\n\r\n        //如果拖拽的节点是数组并且第一项的isdrag为false或者 节点为对象并且isdrag 为false，不允许拖拽\r\n        if (\r\n            (isArray(this.state.moveNode) && this.state.moveNode[0].isdrag === false) ||\r\n            this.state.moveNode.isdrag === false\r\n        ) {\r\n            return;\r\n        }\r\n\r\n        if (this.state.moveNode.hasOwnProperty('children')) {\r\n            delete this.state.moveNode.children;\r\n        }\r\n\r\n        _addData.call(this, this.state.moveNode, this.state.searchInfo.status);\r\n        //this.scrollBottom('normal');\r\n    };\r\n\r\n    //让制定ref的容器滚动条滚到最下方\r\n    scrollBottom = ref => {\r\n        let target = this.refs[ref];\r\n        const clientHeight = target.clientHeight;\r\n        const scrollHeight = target.scrollHeight;\r\n        target.scrollTop = clientHeight + scrollHeight;\r\n    };\r\n\r\n    /* 清空值 */\r\n    clearAdvValue = () => {\r\n        isFunction(this.props.advSearchClearEve) && this.props.advSearchClearEve();\r\n        //同步内外的status\r\n        this.props.searchInfo.status = this.state.searchInfo.status;\r\n        clearAllValue.call(this.props._this._this, this.props.moduleId);\r\n    };\r\n\r\n    /* 修改查询方案 */\r\n    // editSearchPlan = (item) => {\r\n    // \tthis.state.currentPlan = item;\r\n    // \tthis.state.searchPlanName = item.name;\r\n    // \tthis.setStateEve();\r\n    // \tthis.props.modal.show('editSearchPlan@' + this.props.moduleId);\r\n    // };\r\n    /* 修改查询方案名称 */\r\n    // 修改名称项 不一定是当前项  editPlanName\r\n    editSearchPlanName = (item, e) => {\r\n        // e.stopPropagation()  \r\n        this.clickSearchPlan(item);\r\n        // this.state.currentPlan = item;\r\n        // this.state.editPlanName = item.name\r\n        // this.state.searchPlanName = item.name;\r\n        // this.setStateEve();\r\n        this.props.modal.show('editSearchPlanName@' + this.props.moduleId);\r\n    };\r\n\r\n    /* 删除查询方案 */\r\n    delSearchPlan = item => {\r\n        this.clickSearchPlan(item);\r\n        // this.state.currentPlan = item;\r\n        promptBox({\r\n            color: 'warning',\r\n            hotKeyboard: true,\r\n            title: this.multiLang['page-search-0031'],\r\n            content: <div dangerouslySetInnerHTML={{ __html: this.multiLang['page-search-0015'] }} />, // 提示内容,非必输\r\n            beSureBtnName: this.multiLang['page-search-0009'], // 确定按钮名称, 默认为\"确定\",非必输\r\n            cancelBtnName: this.multiLang['page-search-0010'],\r\n            beSureBtnClick: beSureBtnClick_Del.bind(this),\r\n        });\r\n    };\r\n\r\n    /* 为查询方案中,未填写项添加标识。用于点击方案后，在页面展示 */\r\n    addMark = data => {\r\n        data.map(item => {\r\n            if (\r\n                item.initialvalue &&\r\n                (item.initialvalue.value === '' ||\r\n                    item.initialvalue.value === null ||\r\n                    (isArray(item.initialvalue.value) && !item.initialvalue.value.length) ||\r\n                    (isArray(item.initialvalue.value) && item.initialvalue.value[0] === null))\r\n            ) {\r\n                item.isEmpty = true;\r\n            } else {\r\n                item.isEmpty = false;\r\n            }\r\n            if (Array.isArray(item.children)) {\r\n                this.addMark(item.children);\r\n            }\r\n        });\r\n    };\r\n\r\n    /* 点击查询方案 */\r\n    clickSearchPlan = (item, e) => {\r\n        if (item.pk_ncc_queryscheme == this.state.currentPlan.pk_ncc_queryscheme) return;\r\n        item.renderobj4web && item.renderobj4web.forEach(val => (val.advrequired = !!val.required));\r\n        this.state.currentPlan = item;\r\n        this.state.searchInfo.isDefaultPlan = item.pk_ncc_queryscheme == '001';\r\n        this.state.searchPlanName = item.name;\r\n        const extendsList = this.state.searchInfo.fixedConditionGroup;\r\n        // const extendsList = item.pk_ncc_queryscheme == '001' ? [] : this.state.searchInfo.fixedConditionGroup;\r\n        isFunction(this.props.clickPlanEve) && this.props.clickPlanEve(item, this.props._this._this);\r\n        if (item.renderobj4web && item.renderobj4web.length && item.renderobj4web[0].refpk === 'root') {\r\n            //高级\r\n            this.state.searchInfo.status = 'super';\r\n            this.props.searchInfo.status = 'super';\r\n            item.renderobj4web[0].children = extendsList.concat(item.renderobj4web[0].children);\r\n            let plan = item.renderobj4web;\r\n            this.state.searchInfo.snapshotMap.super = plan2snapshotTranslate(this.state.searchInfo, plan, this.props.context, createOperation);\r\n        } else {\r\n            //普通\r\n            this.state.searchInfo.status = 'normal';\r\n            this.props.searchInfo.status = 'normal';\r\n            let plan = item.renderobj4web;\r\n            if (item.pk_ncc_queryscheme == '001') {\r\n                this.state.searchInfo.snapshotMap.normal = plan2snapshotTranslate(this.state.searchInfo, plan, this.props.context, createOperation);\r\n            } else {\r\n                this.state.searchInfo.snapshotMap.normal = plan2snapshotTranslate(this.state.searchInfo, [...extendsList, ...plan], this.props.context, createOperation);\r\n            }\r\n\r\n\r\n            // if (item.pk_ncc_queryscheme !== '001') {\r\n            //     plan = extendsList.concat(plan);\r\n            // }\r\n        }\r\n        //同步内外状态\r\n        this.props.searchInfo.snapshotMap.normal = this.state.searchInfo.snapshotMap.normal;\r\n        this.props.searchInfo.snapshotMap.super = this.state.searchInfo.snapshotMap.super;\r\n        //this.props.changeCompleteFlag && this.props.changeCompleteFlag.call(this, true);\r\n        // replaceData.call(this.props._this._this, this.props.moduleId, plan, item.name);\r\n        // isFunction(this.props.setInitValueEvent) && this.props.setInitValueEvent(this.state.searchInfo.status);\r\n        this.setStateEve();\r\n    };\r\n\r\n    /* 创建查询方案dom */\r\n    createSearchPlan = () => {\r\n        /*ajax*/\r\n        if (!this.props.searchPlanCache || !this.props.searchPlanCache.length) {\r\n            return (\r\n                <li className=\"searchPlanList\">\r\n                    <span className=\"searchPlanName\">{this.multiLang['page-search-0029']}</span>\r\n                </li>\r\n            );\r\n        }\r\n        let newCache = deepClone(this.props.searchPlanCache);\r\n        return newCache.map(item => {\r\n            // if (item.isquickqs) {\r\n            //     this.state.preparedPlanName = item.name;\r\n            // }\r\n            return (\r\n                <li className={`searchPlanList ${this.state.currentPlan.name == item.name ? 'active' : ''}`} key={item.pk_ncc_queryscheme} >\r\n                    <span className=\"searchPlanName\" onClick={this.clickSearchPlan.bind(this, item)}>\r\n\r\n                        <NCTooltip\r\n                            delayShow={800}\r\n                            inverse\r\n                            overlay={<div>{item.name}</div>}\r\n                            placement=\"top\"\r\n                        >\r\n                            <i>{item.name}</i>\r\n                        </NCTooltip>\r\n                    </span>\r\n\r\n                    {!item.isquickqs && !item.isMyPlan && (\r\n                        <NCTooltip\r\n                            placement=\"top\"\r\n                            overlay={this.multiLang['page-search-icon-modify']}\r\n                            delayHide={1}\r\n                            delayShow={1000}\r\n                        >\r\n                            <span className=\"searchPlanEdit\" onClick={this.editSearchPlanName.bind(this, item)}>\r\n                                <i className='iconfont icon-gerenpeizhi' />\r\n\r\n                            </span>\r\n                        </NCTooltip>\r\n                    )}\r\n\r\n                    {!item.isquickqs && !item.isMyPlan && (\r\n                        <NCTooltip\r\n                            placement=\"top\"\r\n                            overlay={this.multiLang['page-search-icon-delete']}\r\n                            delayHide={1}\r\n                            delayShow={1000}\r\n                        >\r\n                            <span className=\"searchPlanDel\" onClick={this.delSearchPlan.bind(this, item)}>\r\n                                <i className='iconfont icon-shanchu' />\r\n                            </span>\r\n                        </NCTooltip>\r\n                    )}\r\n                </li>\r\n            );\r\n        });\r\n    };\r\n\r\n    /* 方案名称change事件 */\r\n    searchPlanNameChange = val => {\r\n        this.setState({ searchPlanName: val });\r\n    };\r\n\r\n    /* 运算符change事件 */\r\n    mathSignChangeEve = (treeData, pk, val) => {\r\n        let len = treeData.length;\r\n        while (len--) {\r\n            let item = treeData[len];\r\n            if (item.refpk === pk) {\r\n                /* 处理between和非between类型切换时，数据格式处理。between数据类型为数组，起始和结束的值都为切换前的value值。非between类型时，数据格式为字符串，取between的起始值 */\r\n                if (val !== 'between' && item.operationSign === 'between') {\r\n                    item.initialvalue.value = '';\r\n                    item.initialvalue.display = '';\r\n                } else if (val === 'between' && item.operationSign !== 'between') {\r\n                    item.initialvalue.display = [];\r\n                    item.initialvalue.value = [];\r\n                }\r\n                item.operationSign = val;\r\n                return true;\r\n            } else if (Array.isArray(item.children)) {\r\n                let res = this.mathSignChangeEve(item.children, pk, val);\r\n                if (res) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    /* 修改方案模态框 */\r\n    modalContent = status => {\r\n        return (\r\n            <div className=\"plan-content\">\r\n                <span className=\"label\">{this.multiLang['page-search-0012'] + ':'}</span>\r\n                <span className=\"content\">\r\n                    <NCHotKeys\r\n                        keyMap={{\r\n                            high: [\r\n                                'enter',\r\n                            ],\r\n                        }}\r\n                        handlers={{ high: beSureBtnClick.bind(this, status, 'enter') }}\r\n                    >\r\n                        <NCFormControl\r\n                            id=\"NC_searchPlanModalInput\"\r\n                            autoFocus\r\n                            className=\"searchPlanModal\"\r\n                            value={this.state.searchPlanName}\r\n                            onChange={this.searchPlanNameChange.bind(this)}\r\n                            maxlength={100}\r\n                        />\r\n                    </NCHotKeys>\r\n                </span>\r\n\r\n            </div>\r\n        );\r\n    };\r\n\r\n    // 生成查询条件单元\r\n    createDomItem = snapshotItem => {\r\n        let templetItem = this.state.searchInfo.itemsMap[snapshotItem.attrcode];\r\n        let renderItem = this.props.renderItem;\r\n        if (!templetItem) {\r\n            //\r\n            return null;\r\n        } else {\r\n            return new templateEngine({\r\n                id: this.props.moduleId,\r\n                searchInfo: this.state.searchInfo,\r\n                snapshotItem,\r\n                onAfterEvent: this.props.onAfterEvent,\r\n                setStateEve: this.setStateEve,\r\n                renderItem,\r\n                context: this.props.context,\r\n                showRequire: false,\r\n                createScript: this.props.createScript,\r\n                showPlaceholder: false,\r\n                hiddenFunList: this.props.hiddenFunList,\r\n                multiLang: this.multiLang,\r\n                LangData: this.LangData,\r\n                // parentRef:this.refs.NCSearchAdvComBox\r\n            });\r\n        }\r\n    };\r\n\r\n    /* 生成查询条件 */\r\n    createDom = status => {\r\n        // const fixedConditionGroup = this.state.searchInfo.fixedConditionGroup;\r\n        if (typeof status === 'string') {\r\n\r\n            var snapshot = this.state.searchInfo.snapshotMap[status].filter(item => item.visible);\r\n\r\n        } else if (typeof status === 'object') {\r\n            var snapshot = status.filter(item => item.visible);\r\n        }\r\n        if (!snapshot.length) {\r\n            return;\r\n        }\r\n        return snapshot.map((data, ind) => {\r\n            //  必输项标识\r\n            let item = this.state.searchInfo.itemsMap[data.attrcode];\r\n            if (!item && !data.attrcode.includes('root')) {\r\n                return null;\r\n            }\r\n            let mustFillIn = null;\r\n            if (item && item.required) {\r\n                mustFillIn = <div className=\"mustFillIn\">*</div>;\r\n            }\r\n            let searchChildDom = this.createDomItem(data);\r\n\r\n            /* 树节点dom */\r\n            const treeTitle = () => {\r\n                let logicOptions = {\r\n                    and: this.multiLang['page-search-0035'],\r\n                    or: this.multiLang['page-search-0036'],\r\n                };\r\n\r\n                if (data.children && data.children.length) {\r\n                    return (\r\n                        <div className=\"advancedSearchSign\">\r\n                            <div\r\n                                key={data.refpk} // 疑问：key为什么没设置上？？？_targetInit中是null\r\n                                keys={JSON.stringify({ attrcode: data.refpk, isExtend: !!data.isExtend })}\r\n                                // field={data.refpk}\r\n                                className=\"advancedSearchChild\"\r\n                                onDrop={this.onDropChildren}\r\n                                onDragOver={this.onDragOver}\r\n                            >\r\n                                {data.attrcode === 'root' ? (\r\n                                    <div className=\"advancedSearch_root\">{logicOptions[data.operationSign]}</div>\r\n                                ) : (\r\n                                    <div className=\"select-containter\">\r\n                                        <NCSelect\r\n                                            className=\"NC_logicSign\"\r\n                                            showClear={false}\r\n                                            value={String(data.operationSign || 'and')}\r\n                                            onChange={this.logicSelectChange.bind(this, data)}\r\n                                            fieldid={data.attrcode}\r\n                                        >\r\n                                            {Object.keys(logicOptions).map((val, index) => {\r\n                                                return (\r\n                                                    <NCOption key={index} value={String(val)}>\r\n                                                        {logicOptions[val]}\r\n                                                    </NCOption>\r\n                                                );\r\n                                            })}\r\n                                        </NCSelect>\r\n                                    </div>\r\n\r\n                                )}\r\n                            </div>\r\n                            {!data.noRemove &&\r\n                                !data.isfixedcondition && (\r\n                                    <div className=\"searchAdvCom_remove\" onClick={this.removeDom.bind(this, data)}>\r\n                                        {this.multiLang['page-search-0037']}\r\n                                    </div>\r\n                                )}\r\n                        </div>\r\n                    );\r\n                } else {\r\n                    if (data.operationOptions) {\r\n                        let selectDom = (\r\n                            <div\r\n                                className=\"NC_searchAdvCom\"\r\n                                key={data.refpk}\r\n                                // field={data.refpk}\r\n                                //keys={data.refpk}\r\n                                keys={JSON.stringify({ attrcode: data.refpk, isExtend: !!data.isExtend })}\r\n                                onDrop={this.onDropChildren}\r\n                                onDragOver={this.onDragOver}\r\n                            >\r\n                                {\r\n                                    this.state.searchInfo.status === 'super' ? (\r\n                                        <span className='remove' >\r\n                                            <div className=\"link\" />\r\n                                        </span>\r\n                                    ) : null\r\n                                }\r\n\r\n                                <span className='remove'>{data.remove ? (\r\n                                    <div className=\"searchAdvCom_remove\" onClick={this.removeDom.bind(this, data)}>\r\n                                        <i className='iconfont icon-qingkong' />\r\n                                    </div>\r\n                                ) : <div className=\"searchAdvCom_remove\">{this.state.searchInfo.status === 'super' ? <div className=\"link\" /> : null}</div>}\r\n                                </span>\r\n                                <span className='content'>\r\n                                    {mustFillIn}\r\n                                    <NCTooltip\r\n                                        delayShow={800}\r\n                                        inverse\r\n                                        overlay={<div>{item.label}</div>}\r\n                                        placement=\"top\"\r\n                                    >\r\n                                        <div className=\"searchAdvCom_name\">{item.label}</div>\r\n                                    </NCTooltip>\r\n\r\n                                    <div className=\"searchAdvCom_select\">\r\n                                        {data.operationOptions.length > 1 ? (\r\n\r\n                                            <NCSelect\r\n                                                className=\"NC_operateSign\"\r\n                                                showClear={false}\r\n                                                disabled={!!item.disabled}\r\n                                                value={String(data.operationSign || this.multiLang['page-search-0035'])}\r\n                                                onChange={this.mathSignChange.bind(this, data)}\r\n                                                fieldid=\"operateSign\"\r\n                                            >\r\n                                                {data.operationOptions.map((val, index) => {\r\n                                                    return (\r\n                                                        <NCOption key={index} value={String(val.value)}>\r\n                                                            {val.display}\r\n                                                        </NCOption>\r\n                                                    );\r\n                                                })}\r\n                                            </NCSelect>\r\n\r\n                                        ) : (\r\n                                            <span className=\"option-label\">{(data.operationOptions[0] || {}).display}</span>\r\n                                        )}\r\n                                    </div>\r\n                                    <div className=\"searchAdvCom_com\">{searchChildDom}</div>\r\n                                </span>\r\n\r\n                            </div>\r\n\r\n                        );\r\n\r\n                        return selectDom;\r\n                    } else {\r\n                        console.log('the data is', data);\r\n                    }\r\n                }\r\n            };\r\n\r\n            if (data.children && data.children.length) {\r\n                let logicOptions = {\r\n                    and: this.multiLang['page-search-0035'],\r\n                    or: this.multiLang['page-search-0036'],\r\n                };\r\n                const children = data.children;\r\n                return (\r\n                    <NCTreeNode\r\n                        key={data.refpk + ind}\r\n                        title={treeTitle.call(this, data)}\r\n                        className=\"search-right-area-tree-node\"\r\n                        liAttr={{ fieldid: getSysFieldid(logicOptions[data.operationSign] + '_node') }}\r\n                    >\r\n                        {this.createDom(children)}\r\n                    </NCTreeNode>\r\n                );\r\n            }\r\n\r\n            return (\r\n                <NCTreeNode\r\n                    key={data.attrcode + ind}\r\n                    title={treeTitle.call(this, data)}\r\n                    liAttr={{ fieldid: getSysFieldid(data.attrcode + '_node') }}\r\n                    className={`search-right-area-tree-node${this.state.searchInfo.status === 'super' ? ' child-node' : ''}`}\r\n                />\r\n            );\r\n        }).filter(item => item);\r\n\r\n    };\r\n\r\n    /* 移除控件 */\r\n    removeDom = data => {\r\n        const { status, snapshotMap } = this.props.searchInfo;\r\n        const queryconditionCount = snapshotMap[status].filter(item => item.attrcode === data.attrcode).length;\r\n        if (!this.props.removeQuerConditionEve || !this.props.removeQuerConditionEve.call(this.props._this._this, this.props.moduleId, data.attrcode, queryconditionCount)) {\r\n            this.state.searchInfo.targetKey = null;\r\n            delNode.call(this.props._this._this, this.props.moduleId, data.refpk);\r\n        }\r\n\r\n        // isFunction(advData.remove) && advData.remove(this.comId)\r\n    };\r\n\r\n    onDragEnterBox = () => {\r\n        this.state.searchInfo.targetKey = null;\r\n    };\r\n\r\n    creatConditionUIDom = data => {\r\n        return (\r\n            <div\r\n                id={this.props.moduleId}\r\n                ref=\"NCSearchAdvComBox\"\r\n                className=\"NC_searchAdvComBox\"\r\n                // onDrop={ onDrop.bind(this)}\r\n                onDragEnter={this.onDragEnterBox.bind(this)}\r\n                fieldid={getSysFieldid('advSearch_tree-area')}\r\n            >\r\n                {/*console.log(\"refs is\",this.refs)*/}\r\n                <div fieldid={getSysFieldid('advSearch_tree')}>\r\n                    <NCTree\r\n                        // showLine = {showLine}\r\n                        // selectedKeys = { thisTree.selectedValue }\r\n                        // onSelect = { onSelect.bind(this) }\r\n                        // onExpand={ onExpand.bind(this) }    //  节点展开事件\r\n                        // expandedKeys={ [] }    //搜索节点关键字后要展开的父节点\r\n                        // autoExpandParent={ thisTree.autoExpandParent }    //是否展开所有节点\r\n                        // onMouseLeave={ onMouseLeave.bind(this) }    //鼠标离开节点事件\r\n                        // onMouseEnter={ onMouseEnter.bind(this) }    // 鼠标进入节点事件\r\n                        // multiple = {true} //是否允许选择多个节点\r\n                        defaultExpandedKeys=\"root0\"\r\n\r\n                        closeIcon={(\r\n                            <p className=\"tree-icon-content\">\r\n                                <NCIcon className=\"first\" type=\"uf-add-s-o\" />\r\n                                <NCIcon className=\"secend\" type=\"uf-minus\" />\r\n                                <NCIcon className=\"third\" type=\"uf-treefolderopen\" />\r\n                            </p>\r\n                        )}\r\n                        openIcon={(\r\n                            <p className=\"tree-icon-content\">\r\n                                <NCIcon className=\"first\" type=\"uf-reduce-s-o\" />\r\n                                <NCIcon className=\"secend\" type=\"uf-minus\" />\r\n                                <NCIcon className=\"third\" type=\"uf-treefolderopen\" />\r\n                            </p>\r\n                        )}\r\n                    // draggable\r\n                    // onDragEnter={ onDragEnter.bind(this) }\r\n                    // onDragOver={ onDragOverBox.bind(this) }\r\n                    // onDragStart={ onDragStart.bind(this) }\r\n                    // onDrop = { onDrop.bind(this) }\r\n                    >\r\n                        {this.createDom(data)}\r\n                    </NCTree>\r\n                </div>\r\n\r\n            </div>\r\n        );\r\n    };\r\n\r\n    handleChange(value) {\r\n        this.state.searchInfo.status = value;\r\n        this.props.searchInfo.status = value;\r\n        let statusChangeEvent = this.props.statusChangeEvent;\r\n        statusChangeEvent && statusChangeEvent(this.state.searchInfo.status);\r\n        this.setStateEve();\r\n    }\r\n\r\n    /* 默认右侧区域dom */\r\n    defRightDom = () => {\r\n        let searchStatus = this.state.searchInfo.status;\r\n        return (\r\n            <div className=\"adv-right-area\" id=\"adv-right-area\">\r\n                {isFunction(this.props.addAdvBody) && this.props.addAdvBody()}\r\n                {!this.props.hideSearchType && <NCRadioGroup selectedValue={searchStatus} onChange={this.handleChange.bind(this)}>\r\n                    <NCRadio value='normal'>{this.multiLang['page-search-0006']}</NCRadio>\r\n                    <NCRadio value='super'>{this.multiLang['page-search-0007']}</NCRadio>\r\n                </NCRadioGroup>}\r\n                { searchStatus === 'normal' && (\r\n                    <div\r\n                        ref=\"normal\"\r\n                        className=\"normalArea\"\r\n                        id=\"advArea\"\r\n                        style={{ height: isFunction(this.props.addAdvBody) || this.props.hideSearchType ? 'auto' : 'calc(100% - 40px)' }}\r\n                        onDragOver={this.onDragOver}\r\n                        onDrop={this.onDrop.bind(this)}\r\n                    >\r\n                        {this.creatConditionUIDom('normal')}\r\n                    </div>\r\n                )}\r\n                {searchStatus === 'super' && (\r\n                    <div id=\"advArea\" className=\"superArea\" style={{ height: isFunction(this.props.addAdvBody) ? 'auto' : 'calc(100% - 40px)' }} onDragOver={this.onDragOver} onDrop={this.onDrop.bind(this)}>\r\n                        {this.creatConditionUIDom('super')}\r\n                    </div>\r\n                )\r\n                }\r\n            </div>\r\n        );\r\n    };\r\n\r\n    tabOnChange = e => {\r\n        this.tabIndex = e;\r\n        e = Number(e);\r\n        if (e > 0 && isFunction(this.props.addAdvTabs)) {\r\n            let callback = this.props.addAdvTabs()[e - 1].callback;\r\n            isFunction(callback) && callback();\r\n        }\r\n        this.setStateEve();\r\n    }\r\n\r\n    /* 创建右侧区域dom */\r\n    createRightDom = () => {\r\n        let def = [\r\n            {\r\n                name: this.props.searchConditionName || this.multiLang['page-search-0025'],\r\n                content: this.defRightDom(),\r\n            },\r\n        ];\r\n        if (isFunction(this.props.addAdvTabs)) {\r\n            def = [...def, ...this.props.addAdvTabs()];\r\n        }\r\n        return def;\r\n    };\r\n    onInputFocus = () => {\r\n        const input = document.getElementById('NC_searchPlanModalInput').focus()\r\n    }\r\n    render() {\r\n        return (\r\n            <div className=\"modalBody\" ref=\"modalBody\">\r\n\r\n                {/* 业务组替换高级面板的整个body区域时，不加载公共查询条件，只加载自定义条件 */}\r\n                {isFunction(this.props.replaceAdvBody) && this.props.replaceAdvBody()}\r\n\r\n                {!isFunction(this.props.replaceAdvBody) && (\r\n                    <div className=\"modalBodyBox\">\r\n                        <div className=\"leftArea\" fieldid={getSysFieldid('left_area')}>\r\n                            <NCTabs\r\n                                defaultActiveKey=\"1\"\r\n                                onChange={this.tabChange.bind(this)}\r\n                                activeKey={this.state.leftTab}\r\n                                tabBarStyle=\"noborder\"\r\n                                className=\"searchTabStyle\"\r\n                            >\r\n                                {!this.props.hideSearchCondition && (\r\n                                    // <NCTabPane tab={this.multiLang['page-search-0004']} key=\"1\">\r\n                                    <NCTabPane\r\n                                        tab={(\r\n                                            <div className={this.state.leftTab == '1' && 'tab-label-in'}>{this.multiLang['page-search-0004']}</div>\r\n                                        )}\r\n                                        key=\"1\"\r\n                                    >\r\n                                        {this.props.syncTree.createSyncTree({\r\n                                            treeId: this.props.moduleId,\r\n                                            showLine: false,\r\n                                            neverDisable: true,\r\n                                            expandedKeys: ['root'],\r\n                                            onDoubleClickEve: this.clickRight,\r\n                                            // metaId:'treeForm',  // 树模板的id\r\n                                            needEdit: false, //是否需要编辑节点功能，默认为true,可编辑；false：不可编辑\r\n                                            draggable: true,\r\n                                            searchType: 'filtration',\r\n                                            nodeRightOpt:\r\n                                                this.state.searchInfo.status === 'normal'\r\n                                                    ? {\r\n                                                        icon: 'uf-triangle-right',\r\n                                                        callback: this.clickRight,\r\n                                                    }\r\n                                                    : false,\r\n                                        })}\r\n                                    </NCTabPane>\r\n                                )}\r\n\r\n                                {!this.props.hideSearchPlan && (<NCTabPane\r\n                                    tab={(\r\n                                        <div className={this.state.leftTab == '2' && 'tab-label-in'}>{this.multiLang['page-search-0005']}</div>\r\n                                    )}\r\n                                    key='2'\r\n                                // key={this.state.planTabKey}\r\n                                >\r\n                                    <ul className=\"searchPlanUl\">{this.createSearchPlan()}</ul>\r\n                                </NCTabPane>)}\r\n                            </NCTabs>\r\n                        </div>\r\n\r\n                        <div className=\"rightArea\" fieldid={getSysFieldid('rigit_area')} style={{ overflow: isFunction(this.props.replaceRightBody) ? 'auto' : 'hidden' }}>\r\n                            {isFunction(this.props.replaceRightBody) && this.props.replaceRightBody()}\r\n                            {!isFunction(this.props.replaceRightBody) && (\r\n                                <span className=\"clearData\" onClick={this.clearAdvValue}>\r\n                                    {this.multiLang['page-search-0017']}\r\n                                </span>\r\n                            )}\r\n                            {!isFunction(this.props.replaceRightBody) && (\r\n                                <NCTabs style={{ height: '100%' }} className=\"lucia\" onChange={this.tabOnChange.bind(this)} activeKey={this.tabIndex || '0'}>\r\n                                    {this.createRightDom().map((e, i) => {\r\n                                        if (e.defaultOpen === true && this.defaultOpen) {\r\n                                            // this.tabIndex = String(i);\r\n                                            this.defaultOpen = false;\r\n                                        }\r\n                                        return (\r\n                                            <NCTabPane tab={e.name} key={i}>\r\n                                                {e.content}\r\n                                            </NCTabPane>\r\n                                        );\r\n                                    }, this)}\r\n                                </NCTabs>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n                {!isEmpty(this.multiLang) && this.props.modal.createModal('editSearchPlanName@' + this.props.moduleId, {\r\n                    title: this.multiLang['page-search-0082'],\r\n                    content: this.modalContent.call(this, 'edit'),\r\n                    beSureBtnClick: beSureBtnClick.bind(this, 'edit'),\r\n                    leftBtnName: this.multiLang['page-search-0009'],\r\n                    rightBtnName: this.multiLang['page-search-0010'],\r\n                    zIndex: 310,\r\n                    onEntered: this.onInputFocus,\r\n                    size: 'sm',\r\n                    className: 'search-modal',\r\n                })}\r\n\r\n                {!isEmpty(this.multiLang) && this.props.modal.createModal('addSearchPlan@' + this.props.moduleId, {\r\n                    title: this.multiLang['page-search-0081'],\r\n                    content: this.modalContent.call(this, 'add'),\r\n                    size: 'sm',\r\n                    backdrop: 'static',\r\n                    beSureBtnClick: beSureBtnClick.bind(this, 'add'),\r\n                    leftBtnName: this.multiLang['page-search-0009'],\r\n                    rightBtnName: this.multiLang['page-search-0010'],\r\n                    zIndex: 310,\r\n                    onEntered: this.onInputFocus,\r\n                    className: 'search-modal',\r\n\r\n                })}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","/*\r\n * @Author: summer\r\n * @Date: 2019-08-07 13:32:42\r\n * @LastEditTime: 2020-08-04 13:55:37\r\n * @LastEditors: wanglongx\r\n * @Description: \r\n */\r\n/*\r\n*   查询区高级查询弹出框组件  --wangshhj\r\n* */\r\nimport React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Button as NCButton, HotKeys as NCHotKeys, Dnd as NCDnd } from '@platform/base';\r\nimport SearchAdvCom from './SearchAdvCom';\r\nimport { getSysFieldid } from '@platform/api';\r\n\r\nrequire('./searchAdvModal.less');\r\n\r\nexport default class SearchAdvModal extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t}\r\n\r\n\tstate = { position: null }\r\n\r\n\tcomponentDidMount() { }\r\n\r\n\tcomponentWillReceiveProps(props) { }\r\n\r\n\tgetFunction(savePlanFun, queryFun, cancelClick, addPlanFun) {\r\n\t\t// this.savePlanFun = savePlanFun;\r\n\t\t// this.queryFun = queryFun;\r\n\t\t// this.cancelClick = cancelClick;\r\n\t\t// this.addPlanFun = addPlanFun;\r\n\t}\r\n\r\n\t// 从新回到原来位置\r\n\tbackPosition = () => {\r\n\t\tthis.setState({ position: { x: 0, y: 0 } });\r\n\t}\r\n\r\n\thandStart = (a, b) => {\r\n\t\tthis.setState({ position: { x: b.x, y: b.y } });\r\n\t}\r\n\r\n\thandleStop = (a, b) => {\r\n\t\tthis.setState({ position: { x: b.x, y: b.y } });\r\n\t}\r\n\tgetChildrenRef = ref => {\r\n\t\tif (ref) {\r\n\t\t\tthis.savePlanFun = ref.saveSearchPlanClick;\r\n\t\t\tthis.queryFun = ref.searchBtnClickEve;\r\n\t\t\tthis.cancelClick = ref.cancelClick;\r\n\t\t\tthis.addPlanFun = ref.addSearchPlanClick;\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet { multiLang, searchModalTitle, fieldid } = this.props;\r\n\t\t// 业务组传入  title \r\n\t\tlet title = searchModalTitle || multiLang['page-search-0025'];\r\n\t\treturn ReactDOM.createPortal(\r\n\t\t\t<div className={`NC_searchAdvModalBox ${this.props.className} search_${this.props.moduleId}`} >\r\n\t\t\t\t<NCHotKeys\r\n\t\t\t\t\tkeyMap={{ colse: NCHotKeys.USUAL_KEYS.ICON_CLOSE }}\r\n\t\t\t\t\thandlers={{\r\n\t\t\t\t\t\tcolse: this.props.searchInfo.status === 'normal' ? () => {\r\n\t\t\t\t\t\t\tthis.cancelClick()\r\n\t\t\t\t\t\t} : function () { }\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tclassName=\"close-hotkeys-wrapper\"\r\n\t\t\t\t\tfocused={true}\r\n\t\t\t\t\tdisplay=\"inline\"\r\n\t\t\t\t/>\r\n\t\t\t\t<div className=\"NC_searchAdvModalBackground\">\r\n\t\t\t\t\t<div className=\"NC_searchAdvModal\" fieldid={getSysFieldid(fieldid) ? `${fieldid}-search_modal-area` : \"search_modal-area\"}>\r\n\t\t\t\t\t\t<NCDnd\r\n\t\t\t\t\t\t\thandle=\".super-handle\"\r\n\t\t\t\t\t\t\tcancel=\".super-cancel\"\r\n\t\t\t\t\t\t\tposition={this.state.position}\r\n\t\t\t\t\t\t\t// onStart = {this.handStart}\r\n\t\t\t\t\t\t\tonStop={this.handleStop}\r\n\t\t\t\t\t\t\tbounds={`.search_${this.props.moduleId}`}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<div className=\"NC_searchAdvModal_drag\">\r\n\t\t\t\t\t\t\t\t<div className=\"modalHead super-handle\" fieldid={getSysFieldid('header-area')}>\r\n\t\t\t\t\t\t\t\t\t<img src={require(\"../../static/images/modal-img.png\")} className=\"modal-header-img\" />\r\n\t\t\t\t\t\t\t\t\t<span fieldid={getSysFieldid(`${title}_title`)} className=\"modalTitle\">{title}</span>\r\n\t\t\t\t\t\t\t\t\t<span className=\"closeBtn iconfont icon-guanbi super-cancel\" onClick={() => {\r\n\t\t\t\t\t\t\t\t\t\tthis.cancelClick();\r\n\t\t\t\t\t\t\t\t\t}} title=\"Esc\" />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<SearchAdvCom ref={this.getChildrenRef} {...this.props} backPosition={this.backPosition} />\r\n\t\t\t\t\t\t\t\t<div className=\"modalFooter\" fieldid={getSysFieldid('bottom-area')}>\r\n\t\t\t\t\t\t\t\t\t{this.props.showAdvSearchPlanBtn && (\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"saveSearchPlan\">\r\n\t\t\t\t\t\t\t\t\t\t\t<NCButton\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => { this.savePlanFun() }}\r\n\t\t\t\t\t\t\t\t\t\t\t\tshape=\"border\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t//colors=\"danger\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"secondary-button secondary-button-wrapper footer-button-left\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tfieldid=\"savePlan\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{multiLang['page-search-0008']}\r\n\t\t\t\t\t\t\t\t\t\t\t</NCButton>\r\n\t\t\t\t\t\t\t\t\t\t\t<NCButton\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => { this.addPlanFun() }}\r\n\t\t\t\t\t\t\t\t\t\t\t\tshape=\"border\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t//colors=\"danger\"//\r\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"secondary-button secondary-button-wrapper footer-button-right\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tfieldid=\"addPlan\"\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{multiLang['page-search-0081']}\r\n\t\t\t\t\t\t\t\t\t\t\t</NCButton>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t<div className='searchBtnGroup'>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"searchBtn search-btn-wrapper\">\r\n\t\t\t\t\t\t\t\t\t\t\t<NCButton onClick={() => { this.queryFun() }} colors=\"danger\" fieldid=\"search\" className=\"button-primary button-primary-wrapper \">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{this.props.searchBtnName || multiLang['page-search-0001']}\r\n\t\t\t\t\t\t\t\t\t\t\t</NCButton>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"cancelBtn search-btn-wrapper\">\r\n\t\t\t\t\t\t\t\t\t\t\t<NCButton onClick={() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.cancelClick();\r\n\t\t\t\t\t\t\t\t\t\t\t}} shape=\"border\" fieldid=\"cancel\" className=\"secondary-button secondary-button-wrapper\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{multiLang['page-search-0010']}\r\n\t\t\t\t\t\t\t\t\t\t\t</NCButton>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</NCDnd>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>,\r\n\t\t\tdocument.body\r\n\t\t);\r\n\t}\r\n}\r\n","/*\r\n * @Author: wanglongx\r\n * @Date: 2019-05-10 10:39:14\r\n * @LastEditors: wanglongx\r\n * @desc 外层方案修改\r\n * @LastEditTime: 2020-08-04 13:49:09\r\n */\r\n\r\nimport React, { Component } from 'react';\r\nimport classnames from 'classnames';\r\nimport { Input, HotKeys as NCHotKeys, Tooltip as NCTooltip } from '@platform/base';\r\n// query items \r\nimport { toast } from '@platform/api';\r\n\r\nexport default class Item extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    state = {\r\n        value: this.props.value,\r\n        showFlag: true,\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps, nextState) {\r\n        const { searchInfo } = nextProps;\r\n        if (searchInfo.showFlag) {\r\n            this.setState({ showFlag: true });\r\n        }\r\n        if ('value' in nextProps) {\r\n            this.setState({ value: nextProps.value });\r\n        }\r\n    }\r\n\r\n    handleChange = v => {\r\n        this.setState({ value: v });\r\n    }\r\n\r\n    // 确定按钮时 名称重复校验 空校验\r\n    handleConfirm = e => {\r\n        const { searchInfo, multiLang, value, editSearchPlan, beSureBtnClick } = this.props;\r\n        if (e) {\r\n            e.stopPropagation();\r\n        }\r\n        if (this.state.value === value) {\r\n            this.setState({ showFlag: true });\r\n            return;\r\n        } else if (searchInfo.searchPlanCache.find(item => item.name === this.state.value) !== undefined) {\r\n            {\r\n                toast({ content: multiLang['page-search-0083'], color: 'warning' });\r\n            }\r\n            this.setState({ showFlag: false });\r\n            return;\r\n        } else if (this.state.value.replace(/\\s+/g, '') === '') {\r\n            {\r\n                toast({ content: multiLang['page-search-0032'], color: 'warning' });\r\n            }\r\n            this.setState({ showFlag: false });\r\n            return;\r\n        }\r\n        this.setState({ showFlag: true });\r\n        editSearchPlan(this.state.value);\r\n        beSureBtnClick();\r\n    }\r\n\r\n    render() {\r\n\r\n        const { chooseSearchPlan, item, searchAdvBtnClick, delSearchPlan, multiLang, searchInfo, value } = this.props;\r\n        const current = searchInfo.currentPlan || searchInfo.defaultPlan;\r\n        let currentPlan = current.name;\r\n        const currentpk = current.pk_ncc_queryscheme;\r\n        let iconClass = classnames({ 'icon-disable': item.isMyPlan || item.isquickqs });\r\n        let itemClass = classnames({ 'item-current': currentPlan == value });\r\n        return (\r\n            <div className={`query_item ${itemClass}`} >\r\n                {this.state.showFlag ?\r\n                    (\r\n                        <span className=\"search_planName\" onClick={chooseSearchPlan}>\r\n                            {this.state.value}&nbsp;&nbsp;\r\n                            {currentPlan == this.state.value && currentpk == this.props.item.pk_ncc_queryscheme ? <i className=\"iconfont icon-shenpitongguo\" /> : null}\r\n                        </span>\r\n                    ) : (\r\n                        <NCHotKeys\r\n                            keyMap={{\r\n                                high: [\r\n                                    'enter',\r\n                                ],\r\n                            }}\r\n                            handlers={{ high: this.handleConfirm }}\r\n                        >\r\n                            <Input\r\n                                className=\"search_input\"\r\n                                autoFocus={true}\r\n                                value={this.state.value}\r\n                                onClick={e => {\r\n                                    e.stopPropagation();\r\n                                }}\r\n                                onChange={v => {\r\n                                    this.setState({ value: v });\r\n                                }}\r\n                            />\r\n                        </NCHotKeys>\r\n                    )}\r\n                {this.state.showFlag ? (\r\n                    <span className=\"search-plan-set\">\r\n                        <NCTooltip\r\n                            delayShow={800}\r\n                            inverse\r\n                            delayHide={1}\r\n                            overlay={multiLang['page-search-0092']}\r\n                            placement=\"top\"\r\n                        >\r\n                            <i\r\n                                className={`iconfont icon-cxzhongmingming ${iconClass}`}\r\n                                onClick={e => {\r\n                                    e.stopPropagation();\r\n                                    if (item.isMyPlan || item.isquickqs) return;\r\n                                    this.setState({ showFlag: !this.state.showFlag });\r\n                                }}\r\n                            />\r\n                        </NCTooltip>\r\n                        <NCTooltip\r\n                            delayShow={800}\r\n                            inverse\r\n                            delayHide={1}\r\n                            overlay={multiLang['page-search-0093']}\r\n                            placement=\"top\"\r\n                        >\r\n                            <i\r\n                                className=\"iconfont icon-cxxiugai\"\r\n                                onClick={searchAdvBtnClick}\r\n                            />\r\n                        </NCTooltip>\r\n                        <NCTooltip\r\n                            delayShow={800}\r\n                            delayHide={1}\r\n                            inverse\r\n                            overlay={multiLang['page-search-0094']}\r\n                            placement=\"top\"\r\n                        >\r\n                            <i\r\n                                className={`iconfont icon-cxshanchu ${iconClass}`}\r\n                                onClick={e => {\r\n                                    e.stopPropagation();\r\n                                    if (item.isMyPlan || item.isquickqs) return;\r\n                                    delSearchPlan();\r\n                                }}\r\n                            />\r\n                        </NCTooltip>\r\n                    </span>\r\n                ) : (\r\n                        <div className=\"search-list-button\">\r\n                            <span\r\n                                className=\"button-item right\"\r\n                                onClick={this.handleConfirm}\r\n                            >\r\n                                {multiLang['page-search-0009']}\r\n                            </span>\r\n                            <span\r\n                                className=\"button-item left\"\r\n                                onClick={e => {\r\n                                    e.stopPropagation();\r\n                                    this.setState({\r\n                                        showFlag: true,\r\n                                        value: this.props.value,\r\n                                    });\r\n                                }}\r\n                            >\r\n                                {multiLang['page-search-0010']}\r\n                            </span>\r\n                        </div>\r\n                    )}\r\n            </div>\r\n        );\r\n    }\r\n\r\n}","/*\r\n * @Author: wanglongx\r\n * @Date: 2019-05-13 14:30:27\r\n * @LastEditors: bbq\r\n * @desc 处理 查询时必填项获取光标\r\n * @LastEditTime: 2021-03-05 15:25:25\r\n */\r\n\r\nimport React, { Component } from 'react';\r\n\r\nimport SearchWithAutoFocus from '../WithAutoFocus/searchWithAutoFocus';\r\nimport classnames from 'classnames';\r\n@SearchWithAutoFocus\r\nexport default class SearchItem extends Component {\r\n\r\n    render() {\r\n        const { dom, isPass, className, ...others } = this.props;\r\n        let verify = classnames({ un_pass: !isPass })\r\n        return (\r\n            <div\r\n                {...others}\r\n                className={`${className} ${verify}`}\r\n            >\r\n                {dom}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","/*\r\n * @Descripttion: \r\n * @version: \r\n * @Author: bbq\r\n * @Date: 2020-10-10 09:56:58\r\n * @LastEditors: bbq\r\n * @LastEditTime: 2021-03-05 15:47:43\r\n */\r\nimport React, { Component } from 'react';\r\nimport { PubSub } from '@platform/api';\r\nimport { matchItemFocus } from './executeAutoFocus';\r\n\r\nfunction SearchWithAutoFocus(WrappedComponent) {\r\n    return class WithAutoFocus extends Component {\r\n        state = { isPass: true }\r\n\r\n        componentDidMount() {\r\n            let { areaId, name } = this.props;\r\n            this.searchRequiredToken = PubSub.subscribe('searchRequired', (msg, data) => {\r\n                let selector = '';\r\n                if (Array.isArray(data) && data.includes(name)) {\r\n                    // 如果没有获取到对应的itemtype 就统一用normal来处理， 如果碰到特殊的就在往matchItemFocus里加\r\n                    this.setState({ isPass: false })\r\n                    if (name === data[0]) {\r\n                        selector = `${areaId ? ('#' + areaId) : ''} [hotkeytag=\"searchArea-${data[0]}\"]`;\r\n                        // console.log(selector);\r\n                        matchItemFocus[this.props.itemtype] === undefined\r\n                            ? matchItemFocus['normal'](selector)\r\n                            : matchItemFocus[this.props.itemtype](selector);\r\n                    }\r\n                } else if (data === name) {\r\n                    this.setState({ isPass: false });\r\n                    selector = `${areaId ? ('#' + areaId) : ''} [hotkeytag=\"searchArea-${data}\"]`;\r\n                    // console.log(selector);\r\n                    matchItemFocus[this.props.itemtype] === undefined\r\n                        ? matchItemFocus['normal'](selector)\r\n                        : matchItemFocus[this.props.itemtype](selector);\r\n                }\r\n            });\r\n            this.clearWarningToken = PubSub.subscribe('clearWarning', (msg, data) => {\r\n                if (Array.isArray(data) && data.includes(name)) {\r\n                    this.setState({ isPass: true })\r\n                } else if (name == data) {\r\n                    this.setState({ isPass: true })\r\n                }\r\n            })\r\n        }\r\n\r\n        componentWillUnmount() {\r\n            this.searchRequiredToken && PubSub.subscribe(this.searchRequiredToken);\r\n            this.clearWarningToken && PubSub.subscribe(this.clearWarningToken);\r\n            this.dom = null;\r\n        }\r\n\r\n        render() {\r\n            return (\r\n                <WrappedComponent\r\n                    ref={dom => {\r\n                        this.dom = dom;\r\n                    }}\r\n                    {...this.props}\r\n                    isPass={this.state.isPass}\r\n                />\r\n            );\r\n        }\r\n    };\r\n}\r\n\r\nexport default SearchWithAutoFocus;","/**\r\n * Created by wangshhj on 2018/1/11.  本地 xuyang updata\r\n * 说明 E8PyA2FlmQx8\r\n * 查询区组件的核心数据存在 this.state.searchInfo内。\r\n * 查询区内部存在4个状态,simple：简单查询，plan:查询方案，nomarl：普通，super:高级 ,存在 this.state.searchInfo.status。\r\n * 查询区用户输入的数据（主要是value和 操作符数据）存在 this.state.searchInfo.snapshotMap里面，它有四个属性对应四个状态（simple，plan，nomarl,super）\r\n */\r\nimport React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\n// import { moment } from '@platform/api';\r\nimport { promptBox } from '../PromptBox';\r\n// import { setTimeout } from 'timers';\r\nimport { Row, Dropdown, Col, Tooltip as NCTooltip, HotKeys as NCHotKeys, Button as NCButton, Checkbox as NCCheckbox } from '@platform/base';\r\nimport { getAllSearchDataEve, closeSearchPlanArea, setMultiLang } from './methods';\r\nimport {\r\n    initDefaultSnapshot,\r\n    templateFilter,\r\n    planExtend,\r\n    getTimezoneOffset,\r\n    getFunctionValueFromViewModal,\r\n    _clone,\r\n    allItemsFillComplete,\r\n    setOperationOptionsMultiLang,\r\n    beSureBtnClick,\r\n    beSureBtnClick_Del,\r\n    isDateFunction,\r\n    tree2Array,\r\n} from './_methods';\r\nimport { clearAllValueEve } from './methods';\r\nimport { getMultiLang, getSysFieldid, ViewModel, localeLang, isFunction, isArray, deepClone, isEmpty, PubSub } from '@platform/api';\r\nimport SearchAdvModal from './SearchAdvModal';\r\nimport { templateEngine } from './templateEngine';\r\nimport SearchAdvCom from './SearchAdvCom';\r\n// import toast from '../../api/toast';\r\n// import { getMultiLang } from '../GetMultiLang';\r\n// import { localeLang } from '../../public/currentLocale';\r\n// import ViewModel from '../../shell/viewmodel/viewmodel';\r\nimport { setMultiLang as getFunctionList, timeFunctionHandler } from 'platform/base/DatePickerTimeZoneConversion/dateFunction';\r\n// import getSysFieldid from '../../api/getSysFieldid';\r\n// 外层方案\r\nimport Item from './item';\r\n\r\n// 查询区每一项\r\nimport SearchItem from './searchItem';\r\n\r\n// import searchOpen from '../../../public/static/images/searchOpen.png';\r\n// import searchClose from '../../../public/static/images/searchClose.png';\r\n\r\nrequire('./createSearch.less');\r\n// 查询区渲染完成发布订阅标识\r\nconst BEFORECOMPLETE = 'beforeAreaChangeComplete';\r\nconst COMPLETE = 'areaChangeComplete';\r\nconst INITNUM = 5;\r\nlet ConstSearchInfo = {};\r\n\r\nlet searchPlanId = 'search@plan';\r\n\r\nexport default class SearchComponent extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.completeFlag = true;\r\n        this.state = {\r\n            searchInfo: {},\r\n            json: {},\r\n            LangData: null,\r\n            leftTab: '1',\r\n            isRenderAdv: false,\r\n        };\r\n        this.props.get_this(this); //把当前this 注册到全局this去\r\n        this._this = this.props.getGloablThis();\r\n        this.meta = this._this.state.meta[this.props.id];\r\n        this.preHandlerFlag = true;\r\n        this.searchAreaHeight = 0;\r\n    }\r\n\r\n    componentDidMount() {\r\n        let meta = this.meta;\r\n        let that = this;\r\n        if (this.completeFlag) {\r\n            let renderCompleteEvent = this.props.renderCompleteEvent;\r\n            // 发布通知表格更新高度\r\n            PubSub.publish(COMPLETE, true);\r\n            setTimeout(() => {\r\n                if (that.completeFlag && !isEmpty(meta)) {\r\n                    that._this.infoExchangeController.publish('heightChange', { area: 'searchArea' });\r\n                    renderCompleteEvent && renderCompleteEvent('');\r\n                    that.completeFlag = false;\r\n                }\r\n            });\r\n        }\r\n    }\r\n    // componentWillUpdate(){\r\n    //     let meta = this.meta;\r\n    //     let that = this;\r\n    //     if (this.completeFlag) {\r\n    //         let renderCompleteEvent = this.props.renderCompleteEvent;\r\n    //         // 发布通知表格更新高度\r\n    //         PubSub.publish(COMPLETE, true);\r\n    //         setTimeout(() => {\r\n    //             if (that.completeFlag && !isEmpty(meta)) {\r\n    //                 that._this.infoExchangeController.publish('heightChange', { area: 'searchArea' });\r\n    //                 renderCompleteEvent && renderCompleteEvent('');\r\n    //                 that.completeFlag = false;\r\n    //             }\r\n    //         });\r\n    //     }\r\n    // }\r\n    render() {\r\n        return NCCreateSearch.call(this, this.props);\r\n    }\r\n\r\n    //WARNING! To be deprecated in React v17. Use new lifecycle static getDerivedStateFromProps instead.\r\n    componentWillReceiveProps(nextProps) {\r\n        // 说明切换查询区了 by liyxt\r\n        if (this.props.id !== nextProps.id) {\r\n            this.completeFlag = true;\r\n            nextProps.get_this(this); //把当前this 注册到全局this去\r\n            this.meta = deepClone(this._this.state.meta[nextProps.id]);\r\n            // console.log(this.meta);\r\n        } else {\r\n            this.meta = this._this.state.meta[nextProps.id];\r\n        }\r\n        if (!this.state.searchInfo.showAdvModal) {\r\n            initSearchArea.call(this, nextProps, this.state.searchInfo);\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.searchDom) {\r\n            // if (this.state.searchInfo.status == 'simple') {\r\n            //     this.state.searchInfo.currentPlan.renderobj4web_snap = this.state.searchInfo.snapshotMap.simple;\r\n            //     this.state.searchInfo.searchPlanSnap[this.state.searchInfo.currentPlan.pk_ncc_queryscheme] = this.state.searchInfo.currentPlan;\r\n            // }\r\n            if (this.searchAreaHeight !== this.searchDom.offsetHeight) {\r\n                // 发布通知表格更新高度\r\n                PubSub.publish(COMPLETE, true);\r\n                this.searchAreaHeight = this.searchDom.offsetHeight;\r\n\r\n                // if (this.completeFlag) {\r\n                //     let renderCompleteEvent = this.props.renderCompleteEvent;\r\n                //     renderCompleteEvent && renderCompleteEvent('');\r\n                //     this.completeFlag = false;\r\n\r\n                // }\r\n\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    componentWillMount() {\r\n        initSearchArea.call(this, this.props, this.state.searchInfo);\r\n        // 初始化调用getMultiLang方法获取多语\r\n        let callback = (json, bool, LangData) => {\r\n            this.setState({ json, LangData });\r\n        };\r\n\r\n        getMultiLang({ moduleId: 'page_search', callback }); // moduleId为所需加载json文件夹名称前缀\r\n        if (this.props.useCache) {\r\n            let searchInfo = ViewModel.getData(`search_${this.meta.oid || this.props.id}`);\r\n            if (searchInfo) {\r\n                this.setState({ searchInfo });\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    // componentDidMount() {\r\n    //     //解决NCC-38603问题\r\n    //     PubSub.publish(COMPLETE, true);\r\n    // }\r\n\r\n    componentWillUnmount() {\r\n        // this.props.remove_this();\r\n        // if(this.meta&&this.meta.queryschemes)\r\n        // \tthis.meta.queryschemes.splice(0,1);\r\n        this.completeFlag = true;\r\n        if (this.props.useCache) {\r\n            ViewModel.setData(`search_${this.meta.oid || this.props.id}`, this.state.searchInfo);\r\n        }\r\n        PubSub.publish(COMPLETE, true);\r\n        // 移除 pubsub 事件监听\r\n        PubSub.unsubscribe('searchRequired');\r\n        PubSub.unsubscribe('clearWarning');\r\n    }\r\n}\r\n\r\nfunction initSearchArea(props, info) {\r\n    let statusList = ['simple', 'normal', 'super'];\r\n    let flag = false;//标识是否是第一次初始化\r\n    info.status = props.onlyShowAdvArea ? 'normal' : 'simple';\r\n    info.itemsMap = {};\r\n    let meta = this.meta;\r\n    meta.items.forEach(item => (info.itemsMap[item.attrcode] = item));\r\n\r\n    // info.snapshotCache = {};\r\n    info.snapshotMap = {};\r\n    statusList.forEach(item => {\r\n        info.snapshotMap[item] = [];\r\n        // info.snapshotCache[item] = {};\r\n    });\r\n\r\n\r\n    //如果没有高级就一直展开，如果有高级就按照isunfold为true展开\r\n    info.showSearchItems = !meta.isunfold;\r\n    info.showSearchItems = props.showAdvBtn ? info.showSearchItems : false;\r\n    //根据模板先把快照初始化出来，然后再根据方案缓存把快照恢复，主要是value\r\n    let defaultRenderobj4web = initDefaultSnapshot.call(this, meta.items, props.context, props.isTemplateOrder);\r\n    info.fixedConditionGroup = defaultRenderobj4web.filter(item => item.isExtend) || [];\r\n    info.defaultPlan = {\r\n        pk_ncc_queryscheme: '001',\r\n        isMyPlan: true,\r\n        name: '预置方案',\r\n        renderobj4web: defaultRenderobj4web,\r\n        // renderobj4web_snap: spreadQueryPlan(defaultRenderobj4web),//方案快照，页面显示的内容，用户的操作都存在方案的快照中，每次更新都根据都根据模板和shang\r\n    };\r\n    let conditions;\r\n    info.searchPlanCache = [info.defaultPlan, ...(meta.queryschemes || [])];\r\n\r\n    if (meta.queryschemes) {\r\n        meta.queryschemes.forEach(item => {\r\n            if (item.isquickqs) {\r\n                conditions = item;\r\n            }\r\n            // if (item.renderobj4web && item.renderobj4web.length && item.renderobj4web[0].refpk === 'root') {\r\n            //     let superSnap = [...info.fixedConditionGroup, ...item.renderobj4web[0].children];\r\n            //     item.renderobj4web_snap = spreadQueryPlan(superSnap);\r\n            // } else {\r\n            //     let normalSnap = [...info.fixedConditionGroup, item.renderobj4web];\r\n            //     item.renderobj4web_snap = spreadQueryPlan(normalSnap);\r\n            // }\r\n        });\r\n    }\r\n    if (!info.hasOwnProperty('moduletype')) {\r\n        info.snapshotCache = {};\r\n        statusList.forEach(item => {\r\n            info.snapshotCache[item] = {};\r\n        });\r\n        info.moduletype = 'search';\r\n    }\r\n\r\n    //用于存储 查询区的基本状态 用于重置\r\n    if (!ConstSearchInfo.hasOwnProperty(props.id)) {\r\n        // info.searchPlanSnap = {};\r\n        info.showAdvModal = false; // 高级面板的显隐性\r\n        info.showSearchPlan = false; // 显示查询方案\r\n        ConstSearchInfo[props.id] = {};\r\n    }\r\n    if (!info.isCompleted) {\r\n        if (conditions) {\r\n            // info.snapshotMap[info.status] = info.fixedConditionGroup.concat(conditions.renderobj4web_snap);\r\n            // 快速方案添加到 当前方案\r\n            info.currentPlan = conditions;\r\n            // info.isDefaultPlan = false;\r\n        } else {\r\n            info.currentPlan = info.defaultPlan;\r\n            // info.isDefaultPlan = true;\r\n        }\r\n    }\r\n\r\n    if (info.currentPlan.isMyPlan) {\r\n        let prev = '';\r\n        let next = '';\r\n        //预制方案\r\n        info.currentPlan.renderobj4web.forEach(item => prev = prev + item.attrcode);\r\n        info.defaultPlan.renderobj4web.forEach(item => next = next + item.attrcode);\r\n        //模板变了\r\n        if (prev != next) {\r\n            info.currentPlan = info.defaultPlan;\r\n        }\r\n    } else {\r\n        let plan = info.searchPlanCache.find(item => item.pk_ncc_queryscheme == info.currentPlan.pk_ncc_queryscheme);\r\n        //说明查询区的查询方案变了\r\n        if (!plan) {\r\n            info.currentPlan = info.defaultPlan;\r\n        }\r\n    }\r\n\r\n\r\n    info.isDefaultPlan = info.currentPlan.pk_ncc_queryscheme == '001';\r\n    //初始化并恢复快照\r\n    initSimpleSnap(props.context, info, info.currentPlan);\r\n    // info.snapshotMap['simple'] = recoverCurrentSnap(info.currentPlan, info.searchPlanSnap);\r\n    info.snapshotMap['simple'] = info.currentPlan.renderobj4web_snap;\r\n    if (!info.hasOwnProperty('isCompleted')) {\r\n        info.isCompleted = true;\r\n        flag = true;\r\n    }\r\n    if (flag) {\r\n        isFunction(props.setInitValueEvent) && (props.setInitValueEvent('simple'));\r\n    }\r\n\r\n\r\n\r\n}\r\n// 展开查询方案 并处理成 快照\r\nfunction spreadQueryPlan(context, planItems, temItem, level = 0) {\r\n    if (Array.isArray(planItems)) {\r\n        return planItems.map(item => {\r\n            if (Array.isArray(item.children)) {\r\n                item.children = spreadQueryPlan(context, item.children, temItem, ++level);\r\n                return item;\r\n            } else {\r\n                let initialvalue = {\r\n                    value: '',\r\n                    display: '',\r\n                };\r\n                if (!isEmpty(item.initialvalue)) {\r\n                    // initialvalue = { ...initialvalue, ...item.initialvalue };\r\n                    initialvalue.value = item.initialvalue.value;\r\n                    initialvalue.display = item.initialvalue.display;\r\n                }\r\n                item.initialvalue = item.initialvalue || item.value; //此处是为了兼容老版本代码的value 已经变成initialvalue了\r\n                let tempItem = temItem[item.attrcode];\r\n                // let temItem = searchInfo.itemsMap;\r\n                if (tempItem) {\r\n                    if (tempItem.itemtype === 'checkbox_switch') {\r\n                        if (item.initialvalue && item.initialvalue.value === '') {\r\n                            item.initialvalue.value = false;\r\n                        }\r\n                    } else if (tempItem.itemtype === 'refer' && item.initialvalue) {\r\n                        let refervalue = getFunctionValueFromViewModal(item.initialvalue, context);\r\n                        item.initialvalue.display = refervalue.display || item.initialvalue.display;\r\n                    } else if (tempItem.itemtype === 'residtxt') {\r\n                        let index = tempItem.languageMeta.filter(val => val.languageCode == localeLang)[0]?.index || 1;\r\n                        initialvalue.index = index;\r\n                        if (item.initialvalue && !item.initialvalue.hasOwnProperty('index')) {\r\n                            item.initialvalue.index = index;\r\n                        }\r\n                    }\r\n                    let obj = {\r\n                        attrcode: item.attrcode,\r\n                        initialvalue: initialvalue,\r\n\r\n                        operationSign:\r\n                            item.operationSign || (item.queryOperateType ? item.queryOperateType.split('@')[0] : ''),\r\n                        visible: item.visible === false ? item.visible : tempItem.visible,\r\n                        isExtend: !!tempItem.isfixedcondition,\r\n                    };\r\n                    if (tempItem.itemtype === 'residtxt') {\r\n                        if (!isEmpty(item.valueMap)) {\r\n                            obj.valueMap = item.valueMap;\r\n                        } else if (item.initialvalue && item.initialvalue.value) {\r\n                            obj.valueMap = {};\r\n                            obj.valueMap[item.attrcode + item.initialvalue.index] = { value: item.initialvalue.value };\r\n                        }\r\n                    }\r\n                    // if (tempItem.isfixedcondition && level < 2) {\r\n                    //     obj.visible = false;\r\n                    // }\r\n                    return obj;\r\n                }\r\n            }\r\n        }).filter(obj => obj && obj.visible);\r\n    }\r\n}\r\n\r\nfunction recoverCurrentSnap(cerrentplan, searchPlanSnap) {\r\n    if (searchPlanSnap[cerrentplan.pk_ncc_queryscheme]) {\r\n        return searchPlanSnap[cerrentplan.pk_ncc_queryscheme].renderobj4web_snap;\r\n    } else {\r\n        return cerrentplan.renderobj4web_snap;\r\n    }\r\n}\r\n\r\nfunction initSimpleSnap(context, info, currentPlan, flag = true) {\r\n    if (!currentPlan) return;\r\n    let isDefaultPlan = currentPlan.pk_ncc_queryscheme == '001';\r\n    if (currentPlan.renderobj4web_snap && flag) {\r\n        currentPlan.renderobj4web_snap = spreadQueryPlan(context, currentPlan.renderobj4web_snap, info.itemsMap);\r\n    } else {\r\n        if (isDefaultPlan) {\r\n            currentPlan.renderobj4web_snap = spreadQueryPlan(context, info.defaultPlan.renderobj4web, info.itemsMap);\r\n        } else {\r\n            if (currentPlan.renderobj4web && currentPlan.renderobj4web.length && currentPlan.renderobj4web[0].refpk === 'root') {\r\n                let superSnap = [...info.fixedConditionGroup, ...currentPlan.renderobj4web[0].children];\r\n                let currentPlanCopy = _clone(currentPlan);\r\n                currentPlanCopy.renderobj4web[0].children = superSnap;\r\n                currentPlan.renderobj4web_snap = spreadQueryPlan(context, currentPlanCopy.renderobj4web, info.itemsMap);\r\n            } else {\r\n                let normalSnap = [...info.fixedConditionGroup, ...currentPlan.renderobj4web];\r\n                currentPlan.renderobj4web_snap = spreadQueryPlan(context, normalSnap, info.itemsMap);\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\nfunction NCCreateSearch(\r\n    {\r\n        id,\r\n        clickSearchBtn, // 查询按钮点击事件回调，只返回公共查询条件，不包含自定义查询条件；如果有自定义查询条件，需要业务组在clickPlanEve方法中接收查询方案信息，并保存到业务组的state中，然后在 clickSearchBtn方法中自行合并公共条件和自定义条件。\r\n        searchBtnName = '',\r\n        onAfterEvent, // 编辑后事件\r\n        showSearchBtn = true, // 是否显示查询按钮 ,默认显示\r\n        showAdvBtn = true, // 是否显示高级查询按钮和查询方案按钮 ,默认显示\r\n        showClearBtn = true, // 是否显示清空按钮\r\n        showAdvSearchPlanBtn = true, // 高级面板中是否显示保存和另存方案按钮\r\n        replaceAdvBtnEve, // 业务组替换高级面板 (fun)\r\n        replaceAdvBody, // 业务组替换高级面板中的body (fun)\r\n        addAdvTabs, // 添加高级查询区自定义页签 (fun)\r\n        addAdvBody, // 添加高级查询区右侧自定义查询条件Dom (fun)\r\n        replaceRightBody, // 替换高级面板右侧body区域 (fun)\r\n        // oid, // 查询模板的oid\r\n        hideSearchCondition = false, // 是否显示高级查询左侧的候选条件\r\n        hideSearchPlan = false, // 是否显示高级查询左侧的查询方案\r\n        saveSearchPlan, // 保存查询方案确定按钮事件 ，用于业务组返回自定义的查询条件\r\n        clickPlanEve, // 点击高级面板中的查询方案事件 ,用于业务组为自定义查询区赋值\r\n        clickAdvBtnEve, //单击高级之后的回调方法\r\n        hideBtnArea = false, // 隐藏查询按钮区域，默认false\r\n        advSearchClearEve, // 高级查询面板中的清空按钮 点击事件回调，用于业务组清除自定义查询条件值\r\n        onlyShowSuperBtn = false, // 只显示高级按钮\r\n        replaceSuperBtn = '', // 替换高级按钮\r\n        onOperateTypeChange, // 操作符改变时的回调\r\n        onlyShowAdvArea = false, //在查询区只显示 高级查询部分\r\n        onlyShowModal = false, //在查询区只显示模态框\r\n        renderCompleteEvent, //渲染完成回调函数\r\n        statusChangeEvent, //状态切换\r\n        context = {},\r\n        renderItem = {},\r\n        createScript = function () { },\r\n        setInitValueEvent,\r\n        isSynInitAdvSearch,\r\n        onlyShowPlan = false, // 只显示方案列表和高级查询\r\n        searchModalTitle = '', // 高级查询区 modal title\r\n        searchConditionName = '', //高级查询 \"查询条件\" 名称自定义\r\n        currentSearch = true,\r\n        fieldid,\r\n        opneBtnClick,//点击展开收起的回调\r\n        removeQuerConditionEve,//删除查询条件的回调\r\n        isTemplateOrder,\r\n        hideSearchType = false,//隐藏高级擦查询的普通和高级radio\r\n        onlyShowSuperCondition = false,\r\n        hiddenFunList\r\n    } = {},\r\n) {\r\n    let searchInfo = this.state.searchInfo;\r\n    let meta = this.meta;\r\n    //给供应链郑新测试用\r\n    // let meta = this._this.state.meta[id];\r\n    // let context = this.props.context;\r\n    let oid = meta.oid;\r\n    let multiLang = this.state.json;\r\n    let LangData = this.state.LangData;\r\n    setStateEve = setStateEve.bind(this);\r\n    this.oid = oid;\r\n    //这两句要回头看看xuyangt\r\n    searchAdvBtnClick = searchAdvBtnClick.bind(this);\r\n    this.state.searchAdvBtnClick = searchAdvBtnClick;\r\n    // initSearchArea.call(this, searchInfo);\r\n\r\n    if (!isEmpty(multiLang)) {\r\n        setMultiLang(multiLang);\r\n        setOperationOptionsMultiLang(multiLang);\r\n        if (this.state.searchInfo.hasOwnProperty('snapshotMap') && this.preHandlerFlag) {\r\n            this.preHandlerFlag = false;\r\n            metaPreHandler(meta, multiLang);\r\n        }\r\n    }\r\n\r\n    if (!isEmpty(multiLang) && !isEmpty(searchInfo.searchPlanCache)) {\r\n        searchInfo.searchPlanCache.forEach(item => {\r\n            if (item.pk_ncc_queryscheme == '001') {\r\n                item.name = multiLang['page-search-0018'];\r\n            }\r\n        });\r\n    }\r\n    searchBtnName = searchBtnName || <i className=\"iconfont icon-sousuo\" />;\r\n    replaceSuperBtn = replaceSuperBtn || multiLang['page-search-0003'];\r\n\r\n    // 查询区初始化配置相关方法\r\n\r\n\r\n\r\n    //更新查询区数据\r\n    function setStateEve(callBack) {\r\n        this.setState(\r\n            { searchInfo },\r\n            function () {\r\n                if (typeof callBack === 'function') {\r\n                    callBack();\r\n                }\r\n            },\r\n        );\r\n    }\r\n    function metaPreHandler(meta, multiLang) {\r\n        const items = meta.items;\r\n        const functionList = getFunctionList(multiLang);\r\n        const select = 'select';\r\n        const targt = ['datepicker',\r\n            'datetimepicker',\r\n            'rangepicker',\r\n            'NCTZDatePickerStart',\r\n            'NCTZDatePickerEnd',\r\n            'NCTZDatePickClientTime',\r\n            'NCTZDatePickClientHourTime',\r\n            'NCTZDatePickerRangeDay',\r\n            'datePickerNoTimeZone'];\r\n        const handler = i => {\r\n            if (i.children) {\r\n                i.children.forEach(ii => handler(ii));\r\n            } else {\r\n                const item = items.find(ii => ii.attrcode == i.attrcode) || {};\r\n                const mytar = [select, ...targt];\r\n                let value = i.initialvalue.value;\r\n                if (value && mytar.some(ii => ii == item.itemtype)) {\r\n                    if (i.operationSign === 'between' || item.isMultiSelectedEnabled) {\r\n                        if (typeof value == 'string') {\r\n                            value = value.split(',');\r\n                        }\r\n                    }\r\n                    if (item.itemtype == 'select') {\r\n                        if (isEmpty(item.options)) {\r\n                            item.options = [i.initialvalue];\r\n                        }\r\n                        let res = item.options.filter(ii => {\r\n                            if (typeof value == 'string') {\r\n                                return ii.value == value;\r\n                            } else {\r\n                                return value.find(iii => ii.value === iii);\r\n                            }\r\n                        }) || [];\r\n                        i.initialvalue.display = res.map(ii => ii.display).join(',');\r\n\r\n                    } else if (targt.some(ii => ii == item.itemtype)) {\r\n                        if (Array.isArray(value)) {\r\n                            i.initialvalue.display = value.map(ii => (timeFunctionHandler(ii) ? functionList[ii] : ii)).join('~');\r\n                        } else {\r\n                            i.initialvalue.display = timeFunctionHandler(value) ? functionList[value] : value;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        if (Array.isArray(meta.queryschemes)) {\r\n            meta.queryschemes.forEach(qs => {\r\n                if (Array.isArray(qs.renderobj4web)) { qs.renderobj4web.forEach(i => handler(i)); }\r\n            });\r\n        }\r\n\r\n    }\r\n    /* 请求到查询方案后，如果有默认方案，则筛选显示默认方案；没有默认方案，显示visible:true的条件 */\r\n    function afterQuerySearchPlan(res) {\r\n        if (res.length) {\r\n            res.forEach(item => item.renderobj4web_snap = spreadQueryPlan(item.renderobj4web));//过滤掉undefined\r\n            let conditions = res.find(item => item.isquickqs);\r\n            if (conditions) {\r\n                searchInfo.status = 'simple';\r\n                searchInfo.snapshotMap[searchInfo.status] = searchInfo.fixedConditionGroup.concat(conditions.renderobj4web_snap);\r\n                // 快速方案添加到 当前方案\r\n                searchInfo.currentPlan = conditions;\r\n                searchInfo.isDefaultPlan = false;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n    /* 从模板借口获得查询方案*/\r\n    function querySearchPlanFromTemplate(plan) {\r\n        if (plan) {\r\n            searchInfo.searchPlanCache = [...plan];\r\n        } else {\r\n            searchInfo.searchPlanCache = [];\r\n        }\r\n        searchInfo.searchPlanCache.unshift(searchInfo.defaultPlan);\r\n\r\n        /* 等后台候选条件查询写好了之后，逻辑就没问题了 -- wangshhj */\r\n        afterQuerySearchPlan(searchInfo.searchPlanCache);\r\n        // ConstSearchInfo[id] = deepClone(searchInfo);\r\n        //setStateEve();\r\n    }\r\n    //点击查询按钮事件\r\n    const clickSearch = () => {\r\n        setTimeout(() => {\r\n            let type = 'simple';\r\n\r\n            let snapshot = searchInfo.snapshotMap[searchInfo.status];\r\n            let data = getAllSearchDataEve.call(this, id, snapshot, true);\r\n            if (data) {\r\n                let template = templateFilter(searchInfo.itemsMap, snapshot);\r\n\r\n                let finalData = {\r\n                    queryAreaCode: id,\r\n                    oid,\r\n                    querytype: 'tree',\r\n                    querycondition: data,\r\n                    template,\r\n                    nctz: getTimezoneOffset(),\r\n                };\r\n\r\n                if (clickSearchBtn && typeof clickSearchBtn == 'function') {\r\n                    clickSearchBtn({ ...this._this, ...this._this.props }, data, type, data && finalData);\r\n                }\r\n            }\r\n        }, 0);\r\n    };\r\n\r\n    //重置按钮事件\r\n    const resetEvent = () => {\r\n        let oldvalue = _clone(searchInfo.snapshotMap[searchInfo.status]);\r\n        let snapshot = searchInfo.status === 'plan' ? searchInfo.currentSnapshot : searchInfo.snapshotMap[searchInfo.status];\r\n        clearAllValueEve.call(this, snapshot);\r\n        this.state.searchInfo = searchInfo;\r\n        if (advSearchClearEve && typeof advSearchClearEve == 'function') {\r\n            advSearchClearEve(oldvalue);\r\n        }\r\n\r\n        setStateEve();\r\n    };\r\n\r\n    /* 高级查询按钮事件,控制查询面板的显影性 */\r\n    function searchAdvBtnClick(search, type, choosePlanName) {\r\n\r\n        if (isFunction(replaceAdvBtnEve)) {\r\n            replaceAdvBtnEve();\r\n        } else {\r\n            /* 请求候选条件 */ //暂时不访问请求候选条件的接口\r\n            document.body.style.overflow = 'hidden';\r\n            search.showAdvModal = true;\r\n            search.showSearchPlan = false;\r\n            this.lastStatus = search.status;\r\n            let currentClickPlan = search.searchPlanCache.find(item => item.name === choosePlanName);\r\n            //如果点击的查询方案和当前方案不一致\r\n            if (currentClickPlan && currentClickPlan.pk_ncc_queryscheme !== search.currentPlan.pk_ncc_queryscheme) {\r\n                search.currentClickPlan = currentClickPlan;\r\n            }\r\n            search.isDefaultPlan = search.currentPlan.pk_ncc_queryscheme == '001';\r\n            search.currentPlan.renderobj4web_snap || initSimpleSnap(context, search, search.currentPlan);\r\n            search.currentClickPlan?.renderobj4web_snap || initSimpleSnap(context, search, search.currentClickPlan)\r\n            let currentPlan = search.currentClickPlan || search.currentPlan;\r\n            if (currentPlan && !isEmpty(currentPlan.renderobj4web_snap) && currentPlan.renderobj4web_snap[0].attrcode == 'root') {\r\n                search.status = 'super';\r\n            } else {\r\n                search.status = 'normal';\r\n            }\r\n            if (type?.target) type = '1';\r\n            this.state.leftTab = type || '1';\r\n            this.state.isRenderAdv = true;\r\n            if (choosePlanName) {\r\n                PubSub.publish('searchChoosePlan', choosePlanName);\r\n            }\r\n            setStateEve(() => {\r\n                if (isFunction(clickAdvBtnEve)) {\r\n                    clickAdvBtnEve();\r\n                } else if (isFunction(statusChangeEvent)) {\r\n                    statusChangeEvent(search.status);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    //生成查询、清空、高级 按钮\r\n    const createButton = () => {\r\n        return (\r\n            <div className='search-component-rowArea'>\r\n                {!onlyShowSuperBtn &&\r\n                    showSearchBtn && (\r\n                        <NCTooltip\r\n                            delayShow={800}\r\n                            inverse\r\n                            overlay={<div>{typeof searchBtnName == 'string' ? searchBtnName : `${multiLang['page-search-0001']}(Enter)`}</div>}\r\n                            placement=\"top\"\r\n                        >\r\n                            <span\r\n                                fieldid={getSysFieldid('search_btn')}\r\n                                className={\r\n                                    showAdvBtn ? (\r\n                                        'search-component-searchBtn'\r\n                                    ) : (\r\n                                        'search-component-searchBtn hide-adv-btn'\r\n                                    )\r\n                                }\r\n                                onClick={clickSearch.bind(this)}\r\n                            >\r\n                                {searchBtnName}\r\n                            </span>\r\n                        </NCTooltip>\r\n\r\n                    )}\r\n                {!onlyShowSuperBtn &&\r\n                    showClearBtn && (\r\n                        <NCTooltip\r\n                            delayShow={800}\r\n                            inverse\r\n                            overlay={<div style={{ padding: '0' }}>{`${multiLang['page-search-0002']}(Alt+Del)`}</div>}\r\n                            placement=\"top\"\r\n                        >\r\n                            <span\r\n                                className=\"clearBtn\"\r\n                                fieldid={getSysFieldid('searchClear_btn')}\r\n                                onClick={resetEvent.bind(this)}\r\n                            >\r\n                                <i className=\"iconfont icon-qingkong1\" />\r\n                            </span>\r\n                        </NCTooltip>\r\n                    )}\r\n                {onlyShowSuperBtn && (\r\n                    <NCTooltip\r\n                        delayShow={800}\r\n                        inverse\r\n                        overlay={<div>{replaceSuperBtn}</div>}\r\n                        placement=\"top\"\r\n                    >\r\n                        <NCButton\r\n                            style={{ maxWidth: onlyShowSuperBtn ? 'initial' : '29%' }}\r\n                            // className=\"superBtn\"\r\n                            colors=\"primary\"\r\n                            onClick={searchAdvBtnClick.bind(this, searchInfo)}\r\n                            fieldid=\"replaceSuper\"\r\n                        >\r\n                            {replaceSuperBtn}\r\n                        </NCButton>\r\n                    </NCTooltip>\r\n\r\n                )}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    // 生成查询条件\r\n    const createDom = (snapshotItem, flag = false, buttonFlag, zindex, index) => {\r\n        if (buttonFlag && zindex === 0) {\r\n            return (\r\n                !searchInfo.showSearchItems && (\r\n                    <div className=\"search-button\">\r\n                        {hideBtnArea ? null : createButton()}\r\n                    </div>\r\n                )\r\n            );\r\n        }\r\n        let templetItem = searchInfo.itemsMap[snapshotItem.attrcode];\r\n        if (!templetItem) {\r\n            //toast({ content: '查询方案损坏！', color: 'warning' });\r\n            return null;\r\n        } else {\r\n            let dom = new templateEngine({\r\n                id,\r\n                searchInfo,\r\n                snapshotItem,\r\n                onAfterEvent,\r\n                setStateEve,\r\n                renderItem,\r\n                context: this.props.context,\r\n                createScript,\r\n                multiLang,\r\n                LangData,\r\n                clickSearch,\r\n                hiddenFunList\r\n            });\r\n            return (\r\n                <SearchItem\r\n                    areaId={id}\r\n                    key={snapshotItem.attrcode + zindex + index}\r\n                    name={snapshotItem.attrcode}\r\n                    itemtype={templetItem.itemtype}\r\n                    fieldid={getSysFieldid(snapshotItem.attrcode)}\r\n                    style={{ marginTop: flag ? '8px' : '0' }}\r\n                    className=\"search-item-wrap\"\r\n                    dom={dom}\r\n                    hotkeytag={`searchArea-${snapshotItem.attrcode}`}\r\n                />\r\n            );\r\n        }\r\n    };\r\n\r\n    // 显示查询方案\r\n    const showSearchPlanEve = e => {\r\n        e.stopPropagation();\r\n        searchInfo.showSearchPlan = !searchInfo.showSearchPlan;\r\n        setStateEve();\r\n    };\r\n    // 隐藏查询方案\r\n    const hideSearchPlanEve = () => {\r\n        searchInfo.showSearchPlan = false;\r\n        setStateEve();\r\n    };\r\n    // 点击查询方案  plan => simple\r\n    const chooseSearchPlan = (item, e) => {\r\n        if (item.pk_ncc_queryscheme == searchInfo.currentPlan.pk_ncc_queryscheme) return;\r\n        let attrcodeArr = [];\r\n        // let searchInfo = this.state.searchInfo;\r\n        searchInfo.status = 'simple';\r\n        searchInfo.currentPlan = item;\r\n        searchInfo.isDefaultPlan = item.pk_ncc_queryscheme == '001';\r\n        if (!searchInfo.userControlAdvArea) {\r\n            let advId = id;\r\n            afterClickSearchPlan(advId);\r\n        }\r\n        initSimpleSnap(context, searchInfo, item, false);\r\n        searchInfo.snapshotMap.simple = item.renderobj4web_snap;\r\n\r\n        searchInfo.currentSnapshot = [];\r\n\r\n        searchInfo.snapshotMap.simple.forEach(item => {\r\n            if (item.initialvalue) {\r\n                let VALUE = item.initialvalue;\r\n                let tempItem = searchInfo.itemsMap[item.attrcode];\r\n                if (tempItem.itemtype === 'refer') {\r\n                    VALUE = getFunctionValueFromViewModal(VALUE, context);\r\n                }\r\n                if (isEmpty(VALUE.value) && isEmpty(VALUE.display)) {\r\n                    searchInfo.currentSnapshot.push(item);\r\n                }\r\n            }\r\n            // if (searchInfo.snapshotCache && searchInfo.snapshotCache[searchInfo.status] && searchInfo.snapshotCache[searchInfo.status][item.attrcode]) {\r\n            //     item.initialvalue = searchInfo.snapshotCache[searchInfo.status][item.attrcode];\r\n            // }\r\n            attrcodeArr.push(item.attrcode);\r\n        });\r\n\r\n        hideSearchPlanEve();\r\n\r\n        if (isFunction(clickPlanEve)) {\r\n            clickPlanEve(item, this._this);\r\n        }\r\n        isFunction(setInitValueEvent) && setInitValueEvent('plan');\r\n        isFunction(statusChangeEvent) && statusChangeEvent('plan');\r\n        //暂时去掉保存选择查询方案时 查询的方法 xuyang\r\n        if (isFunction(clickSearchBtn) && allItemsFillComplete(searchInfo.snapshotMap[searchInfo.status], searchInfo, context)) {\r\n            clickSearch();\r\n        }\r\n        //选择查询方案的时候触发变化方法\r\n        this._this.infoExchangeController.publish('heightChange', { area: 'searchArea' });\r\n        // 发布通知表格更新高度\r\n        PubSub.publish(COMPLETE, true);\r\n        // 切换方案时  clearWraning\r\n        PubSub.publish('clearWarning', attrcodeArr);\r\n    };\r\n    // 修改方案名称\r\n    const editSearchPlan = (index, newValue) => {\r\n        this.state.searchPlanName = newValue;\r\n    };\r\n    /* 删除查询方案 */\r\n    const delSearchPlan = pk_ncc_queryscheme => {\r\n        // this.props.modal.show('delSearchPlan@' + id);\r\n        promptBox({\r\n            color: 'warning',\r\n            hotKeyboard: true,\r\n            title: multiLang['page-search-0031'],\r\n            content: <div dangerouslySetInnerHTML={{ __html: multiLang['page-search-0015'] }} />, // 提示内容,非必输\r\n            beSureBtnName: multiLang['page-search-0009'], // 确定按钮名称, 默认为\"确定\",非必输\r\n            cancelBtnName: multiLang['page-search-0010'],\r\n            beSureBtnClick: beSureBtnClick_Del.bind(this, true, pk_ncc_queryscheme, clickSearch),\r\n        });\r\n    };\r\n    // 创建查询方案\r\n    const createSearchPlan = () => {\r\n        // console.log(searchInfo)\r\n        let searchPlan = searchInfo.searchPlanCache;\r\n        let dom = null;\r\n        if (!searchPlan || !searchPlan.length) {\r\n            dom = (\r\n                <a>\r\n                    <p className=\"searchPlanList\" fiedlid={`${multiLang['page-search-0019']}_sub-btn`}>\r\n                        <span className=\"searchPlanName\">{multiLang['page-search-0019']}</span>\r\n                    </p>\r\n                    <p className=\"searchPlanList\" fiedlid={`${multiLang['page-search-0020']}_sub-btn`}>\r\n                        <span className=\"addSearchPlanHref\" onClick={searchAdvBtnClick.bind(this, searchInfo)}>\r\n                            {multiLang['page-search-0020']}\r\n                        </span>\r\n                    </p>\r\n                </a>\r\n            );\r\n        } else {\r\n            // 外层方案查询 (已提出,可放置到内部)\r\n            dom = searchPlan.map((key, index) => (\r\n                <p key={key.pk_ncc_queryscheme} className=\"searchPlanList\" fielid={`${key.name}_sub-btn`}>\r\n                    <Item\r\n                        item={key}\r\n                        value={key.name}\r\n                        searchInfo={searchInfo}\r\n                        chooseSearchPlan={chooseSearchPlan.bind(this, key)}\r\n                        searchAdvBtnClick={searchAdvBtnClick.bind(this, searchInfo, '2', key.name)}\r\n                        editSearchPlan={editSearchPlan.bind(this, index)}\r\n                        delSearchPlan={delSearchPlan.bind(this, key.pk_ncc_queryscheme)}\r\n                        beSureBtnClick={beSureBtnClick.bind(this, 'edit', true, key.name)}\r\n                        showFlag={searchInfo.showFlag}\r\n                        multiLang={multiLang}\r\n                    />\r\n                </p>\r\n            ));\r\n        }\r\n        return (\r\n            <div\r\n                className={`searchPlanBox  ${!searchInfo.showSearchPlan ? 'hideMore' : null}`}\r\n            >\r\n                {dom}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    /* 关闭模态框 */\r\n    const closeModal = () => {\r\n        searchInfo.showAdvModal = false;\r\n        setStateEve();\r\n    };\r\n\r\n    /* 修改查询方案 */\r\n    const searchPlanCacheChange = newSearch => {\r\n        searchInfo.searchPlanCache = newSearch;\r\n        //把新的方案同步到模板上\r\n        this._this.state.meta[id].queryschemes = newSearch.filter(item => item.pk_ncc_queryscheme != '001');\r\n        setStateEve();\r\n    };\r\n    // 更新界面方案(外部请求处理需要) add by wanglongx\r\n    const upDateSearchPlan = newSearch => {\r\n        searchInfo.snapshotMap['simple'] = newSearch.renderobj4web;\r\n        searchInfo.currentPlan = newSearch;\r\n        setStateEve();\r\n    };\r\n    /* 点击查询方案之后,需要展示未填写的查询条件 */\r\n    const afterClickSearchPlan = dataSource => {\r\n        searchInfo.dataSource = dataSource; // 查询方案区域的数据来源 ,高级面板中的普通区域id/高级区域的id\r\n        setStateEve();\r\n    };\r\n    // count search conditions --- add by wanglongx\r\n    const countQueryConditions = item => {\r\n        switch (searchInfo.itemsMap[item.attrcode].itemtype) {\r\n            case 'refer':\r\n                return item.initialvalue.display;\r\n            case 'select':\r\n                return item.initialvalue.display;\r\n            case 'datepicker':\r\n                return item.initialvalue.display;\r\n            case 'NCTZDatePickerEnd':\r\n                return item.initialvalue.display;\r\n            case 'NCTZDatePickerStart':\r\n                return item.initialvalue.display;\r\n            case 'radio':\r\n                return item.initialvalue.display;\r\n            case 'checkbox':\r\n                return <NCCheckbox checked={!(item.initialvalue.value === 'N' || item.initialvalue.value === false)} disabled />;\r\n            case 'checkbox_switch':\r\n                return <NCCheckbox checked={!(item.initialvalue.value === 'N' || item.initialvalue.value === false)} disabled />;\r\n            case 'rangepicker':\r\n                return item.initialvalue.display;\r\n            case 'datetimepicker':\r\n                return item.initialvalue.display;\r\n            default:\r\n                return item.initialvalue.value;\r\n        }\r\n    };\r\n\r\n    // add by wanglongx \r\n\r\n    const createTitle = () => {\r\n\r\n        let res = null;\r\n\r\n        res = <span>{multiLang['page-search-0025']}: <span className=\"search-conditions-number\">({tree2Array(searchInfo.snapshotMap['simple']).filter(item => checkIsVisible(item)).length})</span></span>;\r\n        return res;\r\n    };\r\n\r\n    //查询区目前展示方式 ：1、只显示高级按钮 ；2、都显示\r\n    const createSearchDom = () => {\r\n        let { status, snapshotMap, itemsMap, showAdvModal } = searchInfo;\r\n        if (onlyShowSuperBtn) {\r\n            return <div className=\"lightapp-component-search\">{hideBtnArea ? null : createButton()}</div>;\r\n        } else {\r\n            // 每五个一行 第一行后面放 button\r\n            let allItem = [];\r\n            let temp = [];\r\n            // let items1 = [];\r\n            // let items2 = [];\r\n            let snapshot_list = tree2Array(snapshotMap['simple']);\r\n            let snapshot = snapshot_list.filter(item => item.visible);\r\n            // let template  = templateFilter(itemsMap,snapshot);\r\n            snapshot.map((item, index) => {\r\n                let val = itemsMap[item.attrcode];\r\n                if (val) {\r\n                    temp.push(item);\r\n                    if (temp.length === INITNUM) {\r\n                        allItem.push([...temp]);\r\n                        temp = [];\r\n                    }\r\n                }\r\n            });\r\n            allItem.push(temp);\r\n\r\n            return (\r\n                // 1909 search add by wanglongx\r\n                // 内部快捷键 enter\r\n                <NCHotKeys\r\n                    className=\"lightapp-component-search\"\r\n                    keyMap={{\r\n                        query: [\r\n                            'enter',\r\n                        ],\r\n                        delete: ['Alt+Del'],\r\n                    }}\r\n                    handlers={{\r\n                        delete: () => {\r\n                            // blur 触发保存 强制让 body 获取焦点\r\n                            document.body.focus();\r\n                            resetEvent.call(this);\r\n                        },\r\n                        query: () => {\r\n                            clickSearch();\r\n                        },\r\n                    }}\r\n                    attach={false}\r\n                >\r\n                    {/* 注册全局 F3 */}\r\n                    <NCHotKeys\r\n                        keyMap={{\r\n                            high: [\r\n                                'f3',\r\n                            ],\r\n                        }}\r\n                        handlers={{\r\n                            high: () => {\r\n                                // f3 部分情况下禁用.\r\n                                currentSearch && showAdvBtn && !showAdvModal && searchAdvBtnClick(searchInfo);\r\n                            },\r\n                        }}\r\n                        display=\"inline\"\r\n                        attach={document.body}\r\n                        focused={true}\r\n                    />\r\n                    {showAdvBtn && (\r\n                        <div className={`${searchInfo.showSearchItems ? 'search-open-close' : ' '} search-top`}>\r\n                            <div className=\"search-edit\">\r\n                                <Dropdown\r\n                                    trigger={[\r\n                                        'click',\r\n                                    ]}\r\n                                    placement=\"bottomLeft\"\r\n                                    overlay={(\r\n                                        <div className=\"query_condo\">\r\n                                            <ul className=\"query_content\">\r\n                                                {createSearchPlan.call(this)}\r\n                                            </ul>\r\n                                            <div\r\n                                                className=\"create_new\"\r\n                                                onClick={() => {\r\n                                                    searchAdvBtnClick(searchInfo);\r\n                                                }}\r\n                                                fieldid={getSysFieldid('create_new_btn')}\r\n                                            >\r\n                                                <sapn className=\"new_content\">{` + ${multiLang['page-search-0080']}`}</sapn>\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n                                    onVisibleChange={a => {\r\n                                        if (a) {\r\n                                            searchInfo.showFlag = true;\r\n                                            setStateEve();\r\n                                        }\r\n                                    }}\r\n                                    fieldid=\"search-plan\"\r\n                                >\r\n                                    <div className=\"search-name-wrapper\" fieldid={getSysFieldid('search-plan_btn')}>\r\n                                        <span className=\"search-plan-name\">{(searchInfo.currentPlan && searchInfo.currentPlan.name) || searchInfo.defaultPlan.name}</span>\r\n                                        <i className=\"iconfont icon-bottom\" />\r\n                                    </div>\r\n                                </Dropdown>\r\n                                <NCTooltip\r\n                                    delayShow={800}\r\n                                    inverse\r\n                                    overlay={<div style={{ padding: '10px' }}>F3</div>}\r\n                                    placement=\"top\"\r\n                                >\r\n                                    <span\r\n                                        className=\"search-super\"\r\n                                        onClick={e => {\r\n                                            searchAdvBtnClick(searchInfo);\r\n                                        }}\r\n                                    >\r\n                                        {multiLang['page-search-0003']}\r\n                                    </span>\r\n                                </NCTooltip>\r\n\r\n                            </div>\r\n\r\n                            {searchInfo.showSearchItems && (\r\n                                <Dropdown\r\n                                    trigger={[\r\n                                        'hover',\r\n                                    ]}\r\n                                    overlayClassName=\"search-dropdown\"\r\n                                    minOverlayWidthMatchTrigger={false}\r\n                                    delayShow={0.8}\r\n                                    // overlayClassName=\"multi-lang-text-collapse\"\r\n                                    placement=\"bottomLeft\"\r\n                                    overlay={\r\n                                        snapshot_list.filter(item => item.initialvalue.value).length && (\r\n                                            <div className=\"search-condition\">\r\n                                                {snapshot_list.map(item => {\r\n                                                    if (checkIsVisible(item)) {\r\n                                                        return (\r\n                                                            <p className=\"search-condition-item\">\r\n                                                                <span className=\"item-title\">{`${searchInfo.itemsMap[item.attrcode].label}: `}</span>\r\n                                                                <span className=\"item-content\">{countQueryConditions(item)}</span>\r\n                                                            </p>\r\n                                                        );\r\n                                                    }\r\n                                                })}\r\n                                            </div>\r\n                                        )\r\n                                    }\r\n                                >\r\n                                    <div\r\n                                        className=\"search-conditions-value\"\r\n                                        onClick={() => {\r\n                                            searchInfo.showSearchItems = false;\r\n                                            setStateEve();\r\n                                        }}\r\n                                    >\r\n                                        <span>\r\n                                            {searchInfo.showSearchItems && createTitle()}&nbsp;&nbsp;\r\n                                                 {snapshot_list.map(item => {\r\n                                                if (checkIsVisible(item)) {\r\n\r\n                                                    return searchInfo.itemsMap[item.attrcode].label + ';';\r\n                                                }\r\n                                            })}\r\n                                        </span>\r\n                                    </div >\r\n                                </Dropdown>\r\n                            )}\r\n                            {(!onlyShowPlan && !onlyShowSuperBtn && showAdvBtn) && (\r\n                                <div\r\n                                    className=\"search-open\"\r\n                                    onClick={() => {\r\n                                        searchInfo.showSearchItems = !searchInfo.showSearchItems;\r\n                                        PubSub.publishSync(BEFORECOMPLETE, true);\r\n                                        setStateEve(() => {\r\n                                            this._this.infoExchangeController.publishSync('heightChange', { area: 'searchArea' });\r\n                                            // 发布通知表格更新高度\r\n                                            opneBtnClick && opneBtnClick();\r\n                                            // PubSub.publish(COMPLETE, true);\r\n                                        });\r\n                                    }}\r\n                                >\r\n                                    {searchInfo.showSearchItems ? <span className=\"search-open-icon\" ><i className=\"label\">{multiLang['page-search-0087']}</i><i className=\"iconfont icon-chaxunmoren\" /></span> : <span className=\"search-open-icon\" ><i className=\"label\">{multiLang['page-search-0088']}</i><i className=\"down iconfont icon-chaxunmoren\" /></span>}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                    {!onlyShowPlan && !searchInfo.showSearchItems && (\r\n                        <div className=\"item-contant\">\r\n                            {allItem.map((item, zindex) => {\r\n                                if (zindex === 0) item.push('button');\r\n                                return (\r\n                                    <div className={`item-rows ${searchInfo.hideSearch && zindex != 0 ? 'hideMore' : ''}`}>\r\n                                        {item.map((data, index) => createDom(data, zindex > 0, index === item.length - 1, zindex, index))}\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    )}\r\n                </NCHotKeys>\r\n            );\r\n        }\r\n    };\r\n    function checkIsVisible(item) {\r\n        if (item.operationSign == 'is null' || item.operationSign == 'is not null') {\r\n            return true;\r\n        } else if (!isEmpty(item.initialvalue.value) && item.type != 'refer') {\r\n            return true;\r\n        } else if (!isEmpty(item.initialvalue.value) && item.type == 'refer' && !isDateFunction(item.initialvalue.value)) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n\r\n    }\r\n    const createEmptySearch = snapshot => {\r\n        return <div className=\"NC_searchPlanMain\">{snapshot.map(item => createDom(item))}</div>;\r\n    };\r\n    /* 关闭查询方案区 */\r\n    const closeSearchPlan = () => {\r\n        closeSearchPlanArea.call(this._this, id);\r\n    };\r\n    /* 更多按钮点击事件，展示隐藏项 */\r\n    const moreSearchPlanClick = () => {\r\n        searchInfo.showHideSearchPlan = !searchInfo.showHideSearchPlan;\r\n        setStateEve();\r\n    };\r\n    /* 创建查询方案未填写项区域 及查询按钮 */\r\n    const createSearchPlanArea = () => {\r\n        if (!isEmpty(searchInfo.currentSnapshot) && searchInfo.currentSnapshot.length > 12) {\r\n            searchInfo.showMoreBtn = true;\r\n        }\r\n        return (\r\n\r\n            <Col className={`lightapp-component-search ${searchInfo.showHideSearchPlan && 'lightapp-component-search-absolute'}`}>\r\n                <Col\r\n                    md={10}\r\n                    sm={8}\r\n                    xs={6}\r\n                    id={id}\r\n                    className={`NC_searchPlanBox ${searchInfo.showHideSearchPlan ? null : 'searchPlanBoxHeight'}`}\r\n                >\r\n                    <p className=\"NC_searchPlanName\">{searchInfo.currentPlan.name}</p>\r\n                    {createEmptySearch(searchInfo.currentSnapshot)}\r\n                    <div className=\"NC_searchPlanBtn\">\r\n                        <NCTooltip\r\n                            delayShow={800}\r\n                            inverse\r\n                            overlay={multiLang['page-search-0021']}\r\n                            placement=\"top\"\r\n                        >\r\n                            <span className=\"closeSearchPlan\" onClick={closeSearchPlan.bind(this)}>\r\n                                ×\r\n                                 </span>\r\n                        </NCTooltip>\r\n\r\n                        {searchInfo.showMoreBtn ? (\r\n                            <span className=\"moreSearchPlan\" onClick={moreSearchPlanClick.bind(this)}>\r\n                                {searchInfo.showHideSearchPlan ? multiLang['page-search-0022'] : multiLang['page-search-0023']}\r\n                            </span>\r\n                        ) : null}\r\n                    </div>\r\n                </Col>\r\n                {createButton()}\r\n            </Col>\r\n        );\r\n    };\r\n\r\n    /* 当前高级查询面板中的状态 （普通/高级） and 业务组是否自定义高级查询区 true/false  */\r\n    const advSearchStatus = (status, userControl) => {\r\n        searchInfo.advSearchStatus = status;\r\n        searchInfo.userControlAdvArea = userControl;\r\n    };\r\n\r\n    /* 如果修改了默认方案，则需要更新查询区展示 */\r\n    const afterEditSearchPlan = res => {\r\n        // searchInfo.items = [];\r\n        // filterData(res);\r\n        setStateEve();\r\n    };\r\n\r\n    return (isEmpty(multiLang) ? null : (\r\n        <div\r\n            ref={dom => { this.searchDom = ReactDOM.findDOMNode(dom); }}\r\n            className={`search-area-contant ${showAdvBtn ? '' : 'search-area-contant-margin'}`}\r\n            fieldid={getSysFieldid(fieldid ? `${fieldid}_search-area` : 'search-area')}>\r\n            {!onlyShowAdvArea ? (\r\n                !onlyShowModal ? (\r\n                    <div>\r\n                        <Row\r\n                            id={id}\r\n                            style={{ minHeight: searchInfo.showHideSearchPlan ? '90px' : '0px' }}\r\n                            className={` NC_CreateSearch ${searchInfo.status === 'plan' ? 'NC_searchAreaHeight' : null}`}\r\n                        >\r\n                            {(searchInfo.status === 'simple' || searchInfo.showAdvModal || onlyShowSuperBtn) && createSearchDom()}\r\n                            {(searchInfo.status === 'plan') && !onlyShowSuperBtn && createSearchPlanArea()}\r\n\r\n                            {showAdvBtn && (isSynInitAdvSearch || this.state.isRenderAdv) ? (\r\n                                <SearchAdvModal\r\n                                    moduleId={id}\r\n                                    searchBtnName={searchBtnName}\r\n                                    searchModalTitle={searchModalTitle}\r\n                                    searchConditionName={searchConditionName}\r\n                                    onlyShowSuperCondition={onlyShowSuperCondition}\r\n                                    hideSearchType={hideSearchType}\r\n                                    className={`${searchInfo.showAdvModal ? 'showAdvModal' : 'hideAdvModal'}`}\r\n                                    closeModal={closeModal}\r\n                                    searchBtnClick={clickSearchBtn}\r\n                                    onAfterEvent={onAfterEvent} // 编辑后事件\r\n                                    showAdvSearchPlanBtn={showAdvSearchPlanBtn} // 是否显示保存方案按钮\r\n                                    replaceAdvBody={replaceAdvBody} // 替换整个body\r\n                                    addAdvTabs={addAdvTabs} // 添加自定义页签\r\n                                    addAdvBody={addAdvBody} // 在body区域添加自定义条件\r\n                                    searchPlanCache={searchInfo.searchPlanCache} // 查询方案变量缓存记录\r\n                                    searchPlanCacheChange={i => searchPlanCacheChange(i)} // 查询方案修改回调\r\n                                    upDateSearchPlan={e => upDateSearchPlan(e)} //更新当前界面的查询方案\r\n                                    oid={oid}\r\n                                    hideSearchCondition={hideSearchCondition} // 隐藏候选条件\r\n                                    hideSearchPlan={hideSearchPlan}\r\n                                    saveSearchPlan={saveSearchPlan} // 业务组自定义查询条件当前数据\r\n                                    replaceRightBody={replaceRightBody} // 替换右侧body区域\r\n                                    afterClickSearchPlan={afterClickSearchPlan} // 点击查询方案后，需要展示未填写的查询方案\r\n                                    clickPlanEve={clickPlanEve} // 查询方案点击事件回调函数，用于业务组设置自定义查询区数据\r\n                                    statusChange={advSearchStatus} // 获取当前高级面板中的状态\r\n                                    advSearchClearEve={advSearchClearEve} // 高级面板中的清空按钮点击事件回调\r\n                                    afterEditSearchPlan={afterEditSearchPlan} // 如果修改了默认方案，则需要更新查询展示\r\n                                    onOperateTypeChange={onOperateTypeChange}\r\n                                    searchInfo={searchInfo}\r\n                                    _this={this}\r\n                                    changeCompleteFlag={flag => (this.completeFlag = flag)}\r\n                                    statusChangeEvent={statusChangeEvent}\r\n                                    onlyShowSuperBtn={onlyShowSuperBtn}\r\n                                    createScript={createScript}\r\n                                    renderItem={renderItem}\r\n                                    setInitValueEvent={setInitValueEvent}\r\n                                    meta={this.meta}\r\n                                    multiLang={this.state.json}\r\n                                    LangData={LangData}\r\n                                    lastStatus={this.lastStatus}\r\n                                    leftTab={this.state.leftTab} // 控制页签\r\n                                    fieldid={fieldid}\r\n                                    removeQuerConditionEve={removeQuerConditionEve}\r\n                                    isTemplateOrder={isTemplateOrder}\r\n                                    hiddenFunList={hiddenFunList}\r\n                                    {...this.props}\r\n                                />\r\n                            ) : null}\r\n                        </Row>\r\n\r\n                    </div>\r\n                ) : (\r\n                    showAdvBtn && (isSynInitAdvSearch || this.state.isRenderAdv) ? (\r\n                        <SearchAdvModal\r\n                            moduleId={id}\r\n                            searchBtnName={searchBtnName}\r\n                            searchModalTitle={searchModalTitle}\r\n                            searchConditionName={searchConditionName}\r\n                            hideSearchType={hideSearchType}\r\n                            onlyShowSuperCondition={onlyShowSuperCondition}\r\n                            className={`${searchInfo.showAdvModal ? 'showAdvModal' : 'hideAdvModal'}`}\r\n                            closeModal={closeModal}\r\n                            searchBtnClick={clickSearchBtn}\r\n                            onAfterEvent={onAfterEvent} // 编辑后事件\r\n                            showAdvSearchPlanBtn={showAdvSearchPlanBtn} // 是否显示保存方案按钮\r\n                            replaceAdvBody={replaceAdvBody} // 替换整个body\r\n                            addAdvTabs={addAdvTabs} // 添加自定义页签\r\n                            addAdvBody={addAdvBody} // 在body区域添加自定义条件\r\n                            searchPlanCache={searchInfo.searchPlanCache} // 查询方案变量缓存记录\r\n                            searchPlanCacheChange={i => searchPlanCacheChange(i)} // 查询方案修改回调\r\n                            upDateSearchPlan={e => upDateSearchPlan(e)} //更新当前界面的查询方案\r\n                            oid={oid}\r\n                            hideSearchCondition={hideSearchCondition} // 隐藏候选条件\r\n                            hideSearchPlan={hideSearchPlan}\r\n                            saveSearchPlan={saveSearchPlan} // 业务组自定义查询条件当前数据\r\n                            replaceRightBody={replaceRightBody} // 替换右侧body区域\r\n                            afterClickSearchPlan={afterClickSearchPlan} // 点击查询方案后，需要展示未填写的查询方案\r\n                            clickPlanEve={clickPlanEve} // 查询方案点击事件回调函数，用于业务组设置自定义查询区数据\r\n                            statusChange={advSearchStatus} // 获取当前高级面板中的状态\r\n                            advSearchClearEve={advSearchClearEve} // 高级面板中的清空按钮点击事件回调\r\n                            afterEditSearchPlan={afterEditSearchPlan} // 如果修改了默认方案，则需要更新查询展示\r\n                            onOperateTypeChange={onOperateTypeChange}\r\n                            searchInfo={searchInfo}\r\n                            _this={this}\r\n                            changeCompleteFlag={flag => (this.completeFlag = flag)}\r\n                            statusChangeEvent={statusChangeEvent}\r\n                            onlyShowSuperBtn={onlyShowSuperBtn}\r\n                            createScript={createScript}\r\n                            renderItem={renderItem}\r\n                            setInitValueEvent={setInitValueEvent}\r\n                            meta={this.meta}\r\n                            multiLang={this.state.json}\r\n                            LangData={LangData}\r\n                            lastStatus={this.lastStatus}\r\n                            leftTab={this.state.leftTab} // 控制页签\r\n                            removeQuerConditionEve={removeQuerConditionEve}\r\n                            isTemplateOrder={isTemplateOrder}\r\n                            hiddenFunList={hiddenFunList}\r\n                            {...this.props}\r\n                        />\r\n                    ) : null)\r\n            ) : (\r\n                <div className=\"NC_searchAdvModal\" fieldid={getSysFieldid('search_modal-area')} style={{ width: '100%' }}>\r\n                    <SearchAdvCom\r\n                        className={`${searchInfo.showAdvModal ? 'showAdvModal' : 'hideAdvModal'}`}\r\n                        moduleId={id}\r\n                        searchBtnName={searchBtnName}\r\n                        closeModal={closeModal}\r\n                        searchBtnClick={clickSearchBtn}\r\n                        onAfterEvent={onAfterEvent} // 编辑后事件\r\n                        showAdvSearchPlanBtn={showAdvSearchPlanBtn} // 是否显示保存方案按钮\r\n                        replaceAdvBody={replaceAdvBody} // 替换整个body\r\n                        addAdvTabs={addAdvTabs} // 添加自定义页签\r\n                        searchConditionName={searchConditionName}\r\n                        hideSearchType={hideSearchType}\r\n                        onlyShowSuperCondition={onlyShowSuperCondition}\r\n                        addAdvBody={addAdvBody} // 在body区域添加自定义条件\r\n                        searchPlanCache={searchInfo.searchPlanCache} // 查询方案变量缓存记录\r\n                        searchPlanCacheChange={i => searchPlanCacheChange(i)} // 查询方案修改回调\r\n                        upDateSearchPlan={e => upDateSearchPlan(e)} //更新当前界面的查询方案\r\n                        oid={oid}\r\n                        hideSearchCondition={hideSearchCondition} // 隐藏候选条件\r\n                        hideSearchPlan={hideSearchPlan}\r\n                        saveSearchPlan={saveSearchPlan} // 业务组自定义查询条件当前数据\r\n                        replaceRightBody={replaceRightBody} // 替换右侧body区域\r\n                        afterClickSearchPlan={afterClickSearchPlan} // 点击查询方案后，需要展示未填写的查询方案\r\n                        clickPlanEve={clickPlanEve} // 查询方案点击事件回调函数，用于业务组设置自定义查询区数据\r\n                        statusChange={advSearchStatus} // 获取当前高级面板中的状态\r\n                        advSearchClearEve={advSearchClearEve} // 高级面板中的清空按钮点击事件回调\r\n                        afterEditSearchPlan={afterEditSearchPlan} // 如果修改了默认方案，则需要更新查询展示\r\n                        onOperateTypeChange={onOperateTypeChange}\r\n                        searchInfo={searchInfo}\r\n                        _this={this}\r\n                        changeCompleteFlag={flag => (this.completeFlag = flag)}\r\n                        statusChangeEvent={statusChangeEvent}\r\n                        onlyShowSuperBtn={onlyShowSuperBtn}\r\n                        createScript={createScript}\r\n                        renderItem={renderItem}\r\n                        meta={this.meta}\r\n                        setInitValueEvent={setInitValueEvent}\r\n                        multiLang={this.state.json}\r\n                        LangData={LangData}\r\n                        lastStatus={this.lastStatus}\r\n                        isTemplateOrder={isTemplateOrder}\r\n                        removeQuerConditionEve={removeQuerConditionEve}\r\n                        hiddenFunList={hiddenFunList}\r\n                        {...this.props}\r\n                    />\r\n                </div>\r\n            )}\r\n        </div>\r\n    ));\r\n}\r\n","/**\r\n * Created by wangshhj on 2018/1/11.\r\n */\r\nimport NCCreateSearch from './createSearch';\r\nimport {\r\n    setSearchValue,\r\n    setSearchValByField,\r\n    getAllSearchData,\r\n    getSearchValByField,\r\n    setDisabledByField,\r\n    closeSearchPlanArea,\r\n    openAdvSearch,\r\n    setDisabled,\r\n    clearSearchArea,\r\n    getQueryInfo,\r\n    getOprtypeByField,\r\n    changeItemVisibleByField,\r\n    setRequiredByField,\r\n    setTemlateByField,\r\n} from './methods';\r\nlet search = {\r\n    NCCreateSearch,\r\n    setSearchValue,\r\n    setSearchValByField,\r\n    getAllSearchData,\r\n    getSearchValByField,\r\n    setDisabledByField,\r\n    closeSearchPlanArea,\r\n    openAdvSearch,\r\n    setDisabled,\r\n    clearSearchArea,\r\n    getQueryInfo,\r\n    getOprtypeByField,\r\n    changeItemVisibleByField,\r\n    setRequiredByField,\r\n    setTemlateByField,\r\n};\r\n\r\nexport default search;\r\n","/**\r\n * Created by wangshhj on 2018/1/11.  本地 xuyang updata\r\n */\r\nimport React, { Component } from 'react';\r\nimport SearchComponent from './searchComponent';\r\nimport { isEmpty, createScript, createScripts, ViewModel } from '@platform/api';\r\n// import { timeFunctionTranslater } from '../../public/timer';\r\n// import ViewModel from '../../shell/viewmodel/viewmodel';\r\n\r\n/*\r\n*   @ 查询区交互说明：\r\n*   1、如果查询区需要查询方案，并且不是只显示高级按钮时，则先请求查询方案 ；如果查询方案中有默认查询方案，则页面永远展示默认查询方案中的查询条件；否则，展示查询模板中的visible:true的查询条件；\r\n*   2、当用户修改了默认查询方案 ，需要实时更新同步查询区展示\r\n*   3、当用户点击查询方案去查询时（无论是外面的查询方案还是高级面板中的查询方案），外面查询区需要展示该方案中的未填写项（该未填写项只按照保存方案时标记，修改了查询方案中的查询条件但是未保存的不算）\r\n*   4、高级面板中，普通查询区不能拖拽多个相同的查询条件；\r\n*   5、高级面板中，高级区域可以拖拽多个相同的查询条件，但是，默认展示的查询条件不能移除，也不能拖到默认展示的查询条件之上形成一组新的查询条件。非默认显示的查询条件可以和拖拽项组成新的、带逻辑运算的查询条件\r\n*   6、默认查询方案只能修改不能删除\r\n*   7、clickSearchBtn方法，在点击查询方案触发查询时，只返回方案中的公共查询条件，不包含自定义查询条件；如果有自定义查询条件，需要业务组在clickPlanEve方法中接收查询方案信息，并保存到业务组的state中，然后在 clickSearchBtn方法中自行合并公共条件和自定义条件，再去请求查询。\r\n*   8、需要查询方案功能时，必须传参数oid（查询模板中的oid），可以通过createUIDom(data, callback)  回调拿到模板信息；\r\n*   9、当只显示高级按钮时，不加载简单查询区的查询条件和查询按钮，点方案进行查询也不加载方案中的未填写项。\r\n*\r\n* */\r\nexport default function NCCreateSearch(\r\n    id,\r\n    {\r\n        clickSearchBtn, // 查询按钮点击事件回调，只返回公共查询条件，不包含自定义查询条件；如果有自定义查询条件，需要业务组在clickPlanEve方法中接收查询方案信息，并保存到业务组的state中，然后在 clickSearchBtn方法中自行合并公共条件和自定义条件。\r\n        searchBtnName = '',\r\n        onAfterEvent, // 编辑后事件\r\n        showSearchBtn = true, // 是否显示查询按钮 ,默认显示\r\n        showAdvBtn = true, // 是否显示高级查询按钮和查询方案按钮 ,默认显示\r\n        showClearBtn = true, // 是否显示清空按钮\r\n        showAdvSearchPlanBtn = true, // 高级面板中是否显示保存方案按钮\r\n        replaceAdvBtnEve, // 业务组替换高级面板 (fun)\r\n        replaceAdvBody, // 业务组替换高级面板中的body (fun)\r\n        addAdvTabs, // 添加高级查询区自定义页签 (fun)\r\n        addAdvBody, // 添加高级查询区自定义查询条件Dom (fun)\r\n        replaceRightBody, // 添加高级查询区右侧区域自定义查询条件Dom (fun)\r\n        // oid, // 查询模板的oid\r\n        hideSearchCondition = false, // 隐藏候选条件\r\n        hideSearchPlan = false, // 隐藏高级弹窗的查询计划\r\n        saveSearchPlan, // 保存查询方案确定按钮事件 ，用于业务组返回自定义的查询条件\r\n        clickPlanEve, // 点击高级面板中的查询方案事件 ,用于业务组为自定义查询区赋值\r\n        clickAdvBtnEve, //单击高级之后的回调方法\r\n        hideBtnArea = false, // 隐藏查询按钮区域，默认false\r\n        advSearchClearEve, // 高级查询面板中的清空按钮 点击事件回调，用于业务组清除自定义查询条件值\r\n        onlyShowSuperBtn = false, // 只显示高级按钮\r\n        replaceSuperBtn = '', // 替换高级按钮\r\n        onOperateTypeChange, // 操作符改变时的回调\r\n        onlyShowAdvArea = false, //在查询区只显示 高级查询部分,\r\n        onlyShowModal = false, //在查询区只显示 模态框,\r\n        renderCompleteEvent, //查询区渲染完成之后的回调事件\r\n        statusChangeEvent, //切换查询区状态时的回调\r\n        context = '', //如果业务组传了上下文进来，就用业务组的数据\r\n        setInitValueEvent, //初始化四状态默认值的时候的回调函数\r\n        useCache = true, //是否启用查询区缓存，默认启用\r\n        isSynInitAdvSearch = false, //是否同步渲染高级查询\r\n        onlyShowModalCancelCallback, // 只渲染modal时 关闭modal 触发的回调\r\n        onlyShowPlan = false, // 只显示方案列表和高级查询\r\n        searchModalTitle = '', // 高级查询 modal title\r\n        searchConditionName = '', //高级查询 \"查询条件\" 名称自定义\r\n        currentSearch = true,\r\n        opneBtnClick, //展开收起按钮的单击事件，触发是在面板展开或关闭之后进行的\r\n        isTemplateOrder = false, //默认不是模板顺序，如果是模板顺序，则取消必填项优先的逻辑\r\n        removeQuerConditionEve, //移除查询条件的触发条件，返回ture 则 不能移除\r\n        fieldid,\r\n        hideSearchType = false,\r\n        onlyShowSuperCondition = false,\r\n        hiddenFunList = {}\r\n    } = {},\r\n) {\r\n    //模板没有值 就不渲染\r\n    if (!(!isEmpty(this.state.meta[id]) && !isEmpty(this.state.meta[id].items))) {\r\n        return null;\r\n    } else {\r\n        // let id = arguments[0];\r\n        // let props = { id, ...arguments[1] };\r\n\r\n        function get_this(_this) {\r\n            this.myState.search[`searchArea_${id}`] = _this;\r\n        }\r\n        function remove_this() {\r\n            this.myState.search[`searchArea_${id}`] = {};\r\n            delete this.myState.search[`searchArea_${id}`];\r\n        }\r\n        function getGloablThis() {\r\n            return this;\r\n        }\r\n        //渲染监控=======\r\n        // if (!this.hasOwnProperty('searchAreaRenderCount')) {\r\n        //     this.searchAreaRenderCount = 1;\r\n        // } else {\r\n        //     this.searchAreaRenderCount++;\r\n        // }\r\n        // console.log('查询区组件渲染了' + this.searchAreaRenderCount + '次');\r\n\r\n        //===============================\r\n        // let refers = this.state.meta[id].items.filter((item) => item.itemtype === 'refer');\r\n\r\n        // createScripts.call(this, 'search', id, refers);\r\n        let contextMixin = { ...ViewModel.getContext(), ...(context || this.app_context) };\r\n        // console.log('contextMixin', contextMixin);\r\n\r\n        return (\r\n            <SearchComponent\r\n                renderItem={\r\n                    this.state.renderItem.search && this.state.renderItem.search.hasOwnProperty(id) ? (\r\n                        this.state.renderItem.search[id]\r\n                    ) : (\r\n                            {}\r\n                        )\r\n                } //全局参照列表\r\n                context={contextMixin} //上下文数据 用于 函数翻译\r\n                syncTree={this.syncTree} //树\r\n                modal={this.modal}\r\n                get_this={get_this.bind(this)}\r\n                remove_this={remove_this.bind(this)}\r\n                createScript={createScript.bind(this)}\r\n                search={this.search}\r\n                getGloablThis={getGloablThis.bind(this)}\r\n                id={id}\r\n                clickSearchBtn={clickSearchBtn}\r\n                searchBtnName={searchBtnName}\r\n                onAfterEvent={onAfterEvent}\r\n                showSearchBtn={showSearchBtn}\r\n                showAdvBtn={showAdvBtn}\r\n                showClearBtn={showClearBtn}\r\n                showAdvSearchPlanBtn={showAdvSearchPlanBtn}\r\n                replaceAdvBtnEve={replaceAdvBtnEve}\r\n                replaceAdvBody={replaceAdvBody}\r\n                addAdvTabs={addAdvTabs}\r\n                addAdvBody={addAdvBody}\r\n                replaceRightBody={replaceRightBody}\r\n\r\n                hideSearchCondition={hideSearchCondition}\r\n                hideSearchPlan={hideSearchPlan}\r\n                saveSearchPlan={saveSearchPlan}\r\n                clickPlanEve={clickPlanEve}\r\n                clickAdvBtnEve={clickAdvBtnEve}\r\n                hideBtnArea={hideBtnArea}\r\n                advSearchClearEve={advSearchClearEve}\r\n                onlyShowSuperBtn={onlyShowSuperBtn}\r\n                replaceSuperBtn={replaceSuperBtn}\r\n                onOperateTypeChange={onOperateTypeChange}\r\n                onlyShowAdvArea={onlyShowAdvArea}\r\n                onlyShowModal={onlyShowModal}\r\n                renderCompleteEvent={renderCompleteEvent}\r\n                statusChangeEvent={statusChangeEvent}\r\n                setInitValueEvent={setInitValueEvent}\r\n                useCache={useCache}\r\n                isSynInitAdvSearch={isSynInitAdvSearch}\r\n                onlyShowModalCancelCallback={onlyShowModalCancelCallback}\r\n                onlyShowPlan={onlyShowPlan}\r\n                searchModalTitle={searchModalTitle}\r\n                searchConditionName={searchConditionName}\r\n                onlyShowSuperCondition={onlyShowSuperCondition}\r\n                currentSearch={currentSearch}\r\n                fieldid={fieldid}\r\n                opneBtnClick={opneBtnClick}\r\n                isTemplateOrder={isTemplateOrder}\r\n                removeQuerConditionEve={removeQuerConditionEve}\r\n                hideSearchType={hideSearchType}\r\n                hiddenFunList={hiddenFunList}\r\n            />\r\n        );\r\n    }\r\n}\r\n","/**\r\n * Created by wangshhj on 2018/3/13.\r\n */\r\nimport React, { Component } from 'react';\r\nimport {\r\n    Modal,\r\n    Button,\r\n    HotKeys,\r\n    Tooltip,\r\n} from '@platform/base';\r\nimport { getMultiLang } from '@platform/api';\r\n\r\nrequire('./createModal.less');\r\n\r\nclass NCModal extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { json: {} };\r\n    }\r\n\r\n    componentWillMount() {\r\n        let callback = (json, bool) => {\r\n            if (bool) {\r\n                this.setState({ json }, () => {\r\n                    //console.log('多语加载完成')\r\n                });\r\n            }\r\n        };\r\n        getMultiLang({ moduleId: 'container_toast', callback });\r\n    }\r\n\r\n    getTitle = (title, color) => {\r\n        let { json } = this.state;\r\n        if (!title && color) {\r\n            if (color === 'success') {\r\n                title = json['0001'];\r\n            } else if (color === 'info') {\r\n                title = json['0002'];\r\n            } else if (color === 'warning') {\r\n                title = json['0003'];\r\n            } else if (color === 'danger') {\r\n                title = json['0004'];\r\n            }\r\n        }\r\n        return title;\r\n    };\r\n\r\n    render() {\r\n        let { json } = this.state;\r\n        let {\r\n            modalData,\r\n            close,\r\n            size,\r\n            className,\r\n            getClassName,\r\n            hasCloseBtn,\r\n            backdrop,\r\n            indexInfo,\r\n            beSureClick,\r\n            cancelClick,\r\n            noFooter,\r\n            showCustomBtns,\r\n            customBtns,\r\n            hotKeyboard = true,\r\n            ...others\r\n        } = this.props;\r\n        let {\r\n            leftBtnName = json['0005'],\r\n            rightBtnName = json['0006'],\r\n            color,\r\n            title,\r\n            content,\r\n        } = modalData;\r\n        return (\r\n            <Modal\r\n                show={modalData.showModal}\r\n                onHide={close.bind(this)}\r\n                size={size}\r\n                className={className}\r\n                backdrop={backdrop}\r\n                indexInfo={indexInfo}\r\n                // draggable={false}\r\n                // resizable={false}\r\n                {...others}\r\n                ref={Modal => (this.Modal = Modal)}\r\n            >\r\n                {hotKeyboard && !noFooter && (\r\n                    <HotKeys\r\n                        keyMap={{\r\n                            sureBtnHandler:\r\n                                HotKeys.USUAL_KEYS.MODAL_CONFIRM,\r\n                            cancelBtnHandler:\r\n                                HotKeys.USUAL_KEYS.MODAL_CALCEL,\r\n                        }}\r\n                        handlers={{\r\n                            sureBtnHandler: () => {\r\n                                // 确定按钮的事件 增加top的判断避免所有弹窗逻辑都被触发  by bbqin\r\n                                if (this.Modal && this.Modal.isTopModal()) {\r\n                                    console.log(\r\n                                        'createModal sureBtnHandler 事件回调',\r\n                                    );\r\n                                    beSureClick.bind(this)();\r\n                                }\r\n                            },\r\n                            cancelBtnHandler: () => {\r\n                                // 取消按钮的事件  增加top的判断避免所有弹窗逻辑都被触发  by bbqin\r\n                                if (this.Modal && this.Modal.isTopModal()) {\r\n                                    console.log(\r\n                                        'createModal cancelBtnHandler 事件回调',\r\n                                    );\r\n                                    cancelClick.bind(this)();\r\n                                }\r\n                            },\r\n                        }}\r\n                        className=\"ncmodel-hotkeys-wrapper\"\r\n                        focused={true}\r\n                        attach={document.body}\r\n                        display=\"inline\"\r\n                    />\r\n                )}\r\n                <Modal.Header fieldid=\"header-area\" closeButton={!!hasCloseBtn}>\r\n                    <span>{json['0007']}</span>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <Modal.Title fieldid={`${json['0007']}`}>\r\n                        {getClassName(color)} {this.getTitle(title, color)}\r\n                    </Modal.Title>\r\n                    <div className=\"createModal-body-content\">{content}</div>\r\n                </Modal.Body>\r\n\r\n                {\r\n                    !noFooter ? (\r\n                        showCustomBtns ? (\r\n                            <Modal.Footer>\r\n                                {showCustomBtns && customBtns ? customBtns : null}\r\n                            </Modal.Footer>\r\n                        ) : (\r\n                            < Modal.Footer >\r\n                                <Tooltip\r\n                                    placement=\"top\"\r\n                                    inverse\r\n                                    overlay={`${leftBtnName}  (${\r\n                                        HotKeys.USUAL_KEYS.MODAL_CONFIRM\r\n                                    })`}\r\n                                    trigger={['hover', 'focus']}\r\n                                    className=\"model-helper-overlay\"\r\n                                >\r\n                                    <Button\r\n                                        fieldid=\"confirm\"\r\n                                        onClick={beSureClick.bind(this)}\r\n                                        colors=\"primary\"\r\n                                        tabIndex=\"0\"\r\n                                    >\r\n                                        {leftBtnName}(<span className=\"text-decoration-underline\">Y </span>)\r\n                                    </Button>\r\n                                </Tooltip>\r\n                                <Tooltip\r\n                                    placement=\"top\"\r\n                                    inverse\r\n                                    overlay={`${rightBtnName}  (${\r\n                                        HotKeys.USUAL_KEYS.MODAL_CALCEL\r\n                                    })`}\r\n                                    trigger={['focus', 'hover']}\r\n                                    className=\"model-helper-overlay\"\r\n                                >\r\n                                    <Button\r\n                                        fieldid=\"cancel\"\r\n                                        onClick={cancelClick.bind(this)}\r\n                                        shape=\"border\"\r\n                                        tabIndex=\"0\"\r\n                                    >\r\n                                        {rightBtnName}(<span className=\"text-decoration-underline\">N</span>)\r\n                                    </Button>\r\n                                </Tooltip>\r\n                            </Modal.Footer>\r\n                        ))\r\n                        : null\r\n                }\r\n            </Modal>\r\n        );\r\n    }\r\n}\r\nexport default function createModal(\r\n    id,\r\n    {\r\n        title, //标题\r\n        content, //内容\r\n        beSureBtnClick, //确定按钮事件回调\r\n        cancelBtnClick, //取消按钮事件回调\r\n        leftBtnName, //左侧按钮名称\r\n        rightBtnName, //右侧按钮名称\r\n        noFooter = false, //是否需要底部按钮\r\n        size, //  模态框大小 sm/lg/xlg\r\n        color = 'warning',\r\n        hasCloseBtn = false,\r\n        closeByClickBackDrop = false,\r\n        zIndex = 200,\r\n        // draggable=false,\r\n        // resizable=false,\r\n        ...others\r\n    } = {},\r\n) {\r\n    if (!this.state.modal.hasOwnProperty(id)) {\r\n        this.state.modal[id] = {\r\n            color,\r\n            showModal: false,\r\n            title,\r\n            content,\r\n            beSureBtnClick,\r\n            cancelBtnClick,\r\n            leftBtnName,\r\n            rightBtnName,\r\n        };\r\n    }\r\n    let modalData = this.state.modal[id];\r\n\r\n    // 按钮class\r\n    let getClassName = color => {\r\n        let iconName;\r\n        //   let iconName = 'icon-wancheng';\r\n        if (color === 'danger') {\r\n            iconName = 'icon-shibai';\r\n        } else if (color === 'warning') {\r\n            iconName = 'icon-zhuyi1';\r\n        } else if (color === 'info') {\r\n            iconName = 'icon-tixing';\r\n        } else if (color === 'success') {\r\n            iconName = 'icon-wancheng';\r\n        } else {\r\n            iconName = 'icon-warning';\r\n        }\r\n        let name = `iconfont ${iconName} ${color}`;\r\n        return <span className={name}> </span>;\r\n    };\r\n\r\n    //关闭模态框\r\n    let close = () => {\r\n        modalData.showModal = false;\r\n        this.setState({ modal: this.state.modal });\r\n    };\r\n\r\n    /* 取消按钮事件 */\r\n    let cancelClick = () => {\r\n        close();\r\n        if (typeof modalData.cancelBtnClick === 'function') {\r\n            modalData.cancelBtnClick.call(this);\r\n        }\r\n    };\r\n\r\n    //确认按钮事件\r\n    let beSureClick = () => {\r\n        close();\r\n        if (typeof modalData.beSureBtnClick === 'function') {\r\n            modalData.beSureBtnClick.call(this);\r\n        }\r\n    };\r\n    let indexInfo = { id, zIndex };\r\n\r\n    return (\r\n        <NCModal\r\n            fieldid={id}\r\n            modalData={modalData}\r\n            hasCloseBtn={hasCloseBtn}\r\n            beSureClick={beSureClick}\r\n            cancelClick={cancelClick}\r\n            getClassName={getClassName}\r\n            noFooter={noFooter}\r\n            close={close}\r\n            size={size}\r\n            // draggable={draggable}\r\n            // resizable={resizable}\r\n            className={`${id} NC_confirmModal createNcModal`}\r\n            backdrop={closeByClickBackDrop ? true : 'static'}\r\n            indexInfo={indexInfo}\r\n            {...others}\r\n        />\r\n    );\r\n}\r\n","/**\r\n * Created by wangshhj on 2018/3/13.\r\n */\r\n\r\nexport function show(id, config = {}) {\r\n    if (!this.state.modal.hasOwnProperty(id)) {\r\n        return false;\r\n    }\r\n    let modalData = this.state.modal[id];\r\n    modalData = Object.assign(modalData, config);\r\n    modalData.showModal = true;\r\n    this.setState({ modal: this.state.modal });\r\n}\r\n\r\nexport function close(id) {\r\n    let modalData = this.state.modal[id];\r\n    modalData.showModal = false;\r\n    this.setState({ modal: this.state.modal });\r\n}","/*\r\n * @Author: liyxt\r\n * @Date: 2019-10-21 14:15:59\r\n * @LastEditors: liyxt\r\n * @LastEditTime: 2020-06-03 14:54:19\r\n * @Description: file content\r\n */ \r\n/**\r\n * Created by zhouxini on 2018/7/19.\r\n */\r\nimport React from 'react';\r\n\r\nexport default function createUploader(\r\n    id,\r\n    {\r\n        billId, // 单据主键\r\n        billNo, // 单据编码，显示在左侧\r\n        target, // 点击的目标element DOM 【可选】（配合placement使用)\r\n        placement, // 上传控件相对弹窗的位置 String 【可选】（配合target使用）\r\n        beforeUpload, // 上传前事件 Function 【可选】返回值Boolean\r\n        size, // 上传质量大小限制 Number 【可选】\r\n        accept, // 上传文件类型 String 【可选】\r\n        upData, // 上传时用户自定义参数Object 【可选】\r\n        multiple, // 是否支持批量上传 Boolean 【可选】 默认值为false，不支持\r\n        beforeDelete, // 删除前事件 Function 【可选】返回值Boolean\r\n        onHide, // 点击关闭的钩子函数 Function 【可选】\r\n        ...others\r\n    } = {},\r\n) {\r\n    if (!this.state.uploader.hasOwnProperty(id)) {\r\n        this.state.uploader[id] = {\r\n            billId,\r\n            billNo,\r\n            target,\r\n            placement,\r\n            beforeUpload,\r\n            size,\r\n            accept,\r\n            upData,\r\n            multiple,\r\n            beforeDelete,\r\n            onHide,\r\n            showUploader: false,\r\n        };\r\n    }\r\n    let uploaderData = this.state.uploader[id];\r\n\r\n    // 上传前事件\r\n    let beforeUploadFun = null;\r\n\r\n    if (typeof uploaderData.beforeUpload === 'function') {\r\n        beforeUploadFun = uploaderData.beforeUpload.bind(this);\r\n    }\r\n\r\n    // 删除前事件\r\n    let beforeDeleteFun = null;\r\n    if (typeof uploaderData.beforeDelete === 'function') {\r\n        beforeDeleteFun = uploaderData.beforeDelete.bind(this);\r\n    }\r\n\r\n    let onHideFun = () => {\r\n        uploaderData.showUploader = false;\r\n        this.setState({ uploader: this.state.uploader })\r\n        if (typeof uploaderData.onHide === 'function') {\r\n            uploaderData.onHide.call(this);\r\n        }\r\n    }\r\n\r\n    return uploaderData.showUploader ? (\r\n        <Uploader\r\n            billId={uploaderData.billId}\r\n            billNo={uploaderData.billNo}\r\n            target={uploaderData.target}\r\n            placement={uploaderData.placement}\r\n            beforeUpload={beforeUploadFun}\r\n            size={uploaderData.size}\r\n            accept={uploaderData.accept}\r\n            upData={uploaderData.upData}\r\n            multiple={uploaderData.multiple}\r\n            beforeDelete={beforeDeleteFun}\r\n            onHide={onHideFun}\r\n            {...others}\r\n        />\r\n    ) : null;\r\n}\r\n","/**\r\n * Created by zhouxini on 2018/7/19.\r\n */\r\n\r\nexport function show(id, config = {}) {\r\n\tif (!this.state.uploader.hasOwnProperty(id)) {\r\n\t\treturn false;\r\n\t}\r\n\tlet uploaderData = this.state.uploader[id];\r\n\tuploaderData = Object.assign(uploaderData, config);\r\n\tuploaderData.showUploader = true;\r\n\tthis.setState({\r\n\t\tuploader: this.state.uploader\r\n\t});\r\n}\r\n\r\nexport function close(id) {\r\n\tif (!this.state.uploader.hasOwnProperty(id)) {\r\n\t\treturn false;\r\n\t}\r\n\tlet uploaderData = this.state.uploader[id];\r\n\tuploaderData.showUploader = false;\r\n\tthis.setState({\r\n\t\tuploader: this.state.uploader\r\n\t});\r\n}\r\n","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Tooltip, BillErrorTrack } from '@platform/base';\r\n//import BillErrorTrack from '../BillErrorTrack';\r\n\r\nimport { getMultiLang, ViewModel } from '@platform/api';\r\n\r\nconst nameSpace = 'nccloud_platfrom_native_socket_billinfo';\r\n\r\nrequire('./index.less');\r\n\r\n/**\r\n * 用于列表操作列的组件\r\n */\r\nexport function createErrorButton(config) {\r\n    let { record = {}, sucessCallBack } = config;\r\n    // record 可能还有一级  需要完善下数据\r\n    record = record.values || record;\r\n\r\n    // 这个方法以后会无效\r\n    return typeof sucessCallBack === 'function' && sucessCallBack(this.props, record, this);\r\n    // return saga_status.value !== '1' && typeof sucessCallBack === 'function' && sucessCallBack(this.props, record, this);\r\n\r\n    // return (\r\n    //     <CrossServiceListBtn\r\n    //         pageInstance={this}\r\n    //         isError={saga_status.value === \"1\"}\r\n    //         sucessCallBack={sucessCallBack}\r\n    //         output={this.output}\r\n    //         rootprops={this.props}\r\n    //     />\r\n    // )\r\n\r\n}\r\n\r\n// class CrossServiceListBtn extends Component {\r\n//     constructor(props) {\r\n//         super(props);\r\n//     }\r\n\r\n//     render() {\r\n//         let { isError, sucessCallBack } = this.props;\r\n//         return (\r\n//             <span>{!isError && typeof sucessCallBack === \"function\" && sucessCallBack()}</span>\r\n//         )\r\n//     }\r\n// }\r\n\r\n/**\r\n * 用于卡片标题区\r\n */\r\n\r\n\r\nexport function createErrorFlag(config) {\r\n    let { headBtnAreaCode } = config;\r\n    return (\r\n        <CrossServiceCardBtn\r\n            getThis={_this => {\r\n                this.myCrossServiceBtn[headBtnAreaCode] = _this;\r\n            }}\r\n            pageInstance={this}\r\n            moduleId={headBtnAreaCode}\r\n            output={this.output}\r\n            rootprops={this.props}\r\n        />\r\n    );\r\n}\r\n\r\n// get nearest parent element matching selector   origin from stackoverflow  add by bbqin\r\nconst Closest = function (el, selector) {\r\n    if (!el) {\r\n        return null;\r\n    }\r\n    var matchesSelector = el.matches || el.webkitMatchesSelector || el.mozMatchesSelector || el.msMatchesSelector;\r\n\r\n    while (el) {\r\n        if (matchesSelector.call(el, selector)) {\r\n            break;\r\n        }\r\n        el = el.parentElement;\r\n    }\r\n    return el;\r\n};\r\n\r\n\r\nclass CrossServiceCardBtn extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        typeof this.props.getThis === 'function' && this.props.getThis(this);\r\n        this.state = {\r\n            isError: this.props.isError || false,\r\n            showBillTrack: false,\r\n            json: {},\r\n            LangData: null,\r\n        };\r\n        this.gtxid = '';\r\n        this.billpk = '';\r\n        this.billtype = '';\r\n\r\n    }\r\n\r\n    componentWillMount() {\r\n        let callback = (json, bool, LangData) => {\r\n            this.setState({ json, LangData });\r\n        };\r\n        getMultiLang({ moduleId: 'base_errorTip', callback });\r\n    }\r\n\r\n    //根据 props 更新 \r\n    componentWillReceiveProps(nextProps) {\r\n        let oldState = this.state;\r\n        let isEquat = true;\r\n        for (let pop of Object.keys(nextProps)) {\r\n            if (oldState.hasOwnProperty(pop) && oldState[pop] !== nextProps[pop]) {\r\n                isEquat = false;\r\n                oldState[pop] = nextProps[pop];\r\n            }\r\n        }\r\n        //判断两个对象是否相等\r\n        if (!isEquat) {\r\n            this.setState({ oldState });\r\n        }\r\n    }\r\n\r\n    queryBillTrack = () => {\r\n        let { pageInstance } = this.props;\r\n\r\n       // let { formAreaCode, billtype, billpkname } = pageInstance.nativeSocketBillInfo;\r\n        let { formAreaCode, billtype, billpkname } = ViewModel.getData(nameSpace) || {};\r\n\r\n        this.billtype = billtype;\r\n\r\n        let gtxid = pageInstance.form.getFormItemsValue(formAreaCode, 'saga_gtxid');\r\n        this.gtxid = gtxid && gtxid.value;\r\n\r\n        let billpk = pageInstance.form.getFormItemsValue(formAreaCode, billpkname);\r\n        this.billpk = billpk && billpk.value;\r\n\r\n        this.setState({ showBillTrack: true });\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        let isError = this.state.isError,\r\n            $this = ReactDOM.findDOMNode(this),\r\n            $parent = Closest($this, '.nc-bill-header-area,.u-affix-content');\r\n        if (!$parent) return;\r\n        $parent.className = $parent.className.replace(/socket-error-class/g, '');\r\n        if (isError) {\r\n            $parent.className = $parent.className + ' socket-error-class';\r\n        }\r\n        // console.log('dom in cross', $this, $parent);\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        let isError = this.state.isError,\r\n            $this = ReactDOM.findDOMNode(this),\r\n            $parent = Closest($this, '.nc-bill-header-area,.socket-error-class,.u-affix-content');\r\n        if (!$parent) return;\r\n        $parent.className = $parent.className.replace(/socket-error-class/g, '');\r\n        if (isError) {\r\n            $parent.className = $parent.className + ' socket-error-class';\r\n        }\r\n        // console.log('dom in cross', $this, $parent);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        let $this = ReactDOM.findDOMNode(this),\r\n            $parent = Closest($this, '.socket-error-class,.nc-bill-header-area,.u-affix-content');\r\n        if (!$parent) return;\r\n        $parent.className = $parent.className.replace(/socket-error-class/g, '');\r\n    }\r\n\r\n    render() {\r\n        let { isError, showBillTrack, json } = this.state;\r\n        let { errorViewType } = this.props;\r\n        return (\r\n            <span className=\"billHead-errorBtn-wrapper\">\r\n                {\r\n                    isError && (\r\n                        <Tooltip\r\n                            inverse\r\n                            trigger=\"hover\"\r\n                            overlay={json['base-error-tip-0001'] || '点击查看错误原因'}\r\n                            placement=\"top\"\r\n                            delay={1}\r\n                            delayShow={800}\r\n                        >\r\n                            <span\r\n                                className=\"error-flag iconfont icon icon-gantanhao\"\r\n                                onClick={this.queryBillTrack}\r\n                            />\r\n                        </Tooltip>\r\n                    )}\r\n\r\n                {\r\n                    errorViewType !== 'none' && (\r\n                        <BillErrorTrack\r\n                            show={showBillTrack}\r\n                            close={() => {\r\n                                this.setState({ showBillTrack: false });\r\n                            }}\r\n                            pk={this.billpk} //单据id\r\n                            type={this.billtype} //单据类型\r\n                            gtxid={this.gtxid} //错误id\r\n                            errorViewType={errorViewType}\r\n                        // pk= \"1001Z81000000001PYQH\" //单据id\r\n                        // type='5F'  //单据类型\r\n                        // gtxid='2019110863519ada-eef2-4a47-93b5-446478d3d31b' //错误id\r\n                        //bodyClientHeight=\"500\" //在第二层iframe里不用配置，如果iframe层更多，需要传一下body的高度\r\n                        />\r\n                    )\r\n                }\r\n            </span>\r\n        );\r\n\r\n    }\r\n}\r\n","import { createErrorButton, createErrorFlag } from './create';\r\nimport { toggleErrorStatus } from './methods';\r\n\r\nexport default {\r\n    createErrorButton, \r\n    createErrorFlag,\r\n    toggleErrorStatus,\r\n}","/**\r\n * 更新跨服务按钮状态\r\n * @param {*string} areaId 按钮区域id\r\n * @param {*object} data 配置参数\r\n * data示例：{\r\n *   isError: true //显示重试、回退；否则显示浏览器按钮\r\n * } \r\n */\r\nexport function toggleErrorStatus(areaId, data) {\r\n    if (!this.myCrossServiceBtn[areaId]) { \r\n        return\r\n    }\r\n    let btnInstance = this.myCrossServiceBtn[areaId];\r\n  \r\n    let newState = { ...btnInstance.state, ...data };\r\n    btnInstance.setState({\r\n        isError: newState.isError,\r\n        tipContent: newState.tipContent,\r\n    })\r\n}","import { ViewModel } from '@platform/api'\r\nlet { getGlobalStorage } = ViewModel;\r\n\r\nexport default function getUserId() {\r\n    let userid = '';\r\n    let userDataJSON = getGlobalStorage('localStorage', \"STOREFORINFODATA\");\r\n    let userData = userDataJSON && JSON.parse(userDataJSON);\r\n    userid = userData && userData.userId;\r\n    return userid;\r\n}   ","import { ViewModel } from '@platform/api'\r\nlet { getGlobalStorage } = ViewModel;\r\n\r\nexport default function getUserInfo(name) {\r\n    let userDataJSON = getGlobalStorage('localStorage', 'STOREFORINFODATA');\r\n    let userData = userDataJSON && JSON.parse(userDataJSON);\r\n    return name && userData && userData[name];\r\n}   ","// https://developer.mozilla.org/en-US/docs/Web/API/CloseEvent#Status_codes\r\n// https://tools.ietf.org/html/rfc6455#section-7.4.1\r\n\r\nexport let codes = {\r\n    1000: {\r\n        reason: 'Normal Closure',\r\n        desc: 'Normal closure; the connection successfully completed whatever purpose for which it was created.',\r\n        tips: ''\r\n    },\r\n    1001: {\r\n        reason: 'Going Away',\r\n        desc: 'The endpoint is going away, either because of a server failure or because the browser is navigating away from the page that opened the connection.',\r\n        tips: ''\r\n    },\r\n    1002: {\r\n        reason: 'Protocol Error',\r\n        desc: 'The endpoint is terminating the connection due to a protocol error.',\r\n        tips: ''\r\n    },\r\n    1003: {\r\n        reason: 'Unsupported Data',\r\n        desc: 'The connection is being terminated because the endpoint received data of a type it cannot accept (for example, a text-only endpoint received binary data).',\r\n        tips: ''\r\n    },\r\n    1004: {\r\n        reason: '',\r\n        desc: 'Reserved. A meaning might be defined in the future.',\r\n        tips: ''\r\n    },\r\n    1005: {\r\n        reason: 'No Status Received',\r\n        desc: 'Reserved.  Indicates that no status code was provided even though one was expected.',\r\n        tips: ''\r\n    },\r\n    // 异常关闭比较常见\r\n    1006: {\r\n        reason: 'Abnormal Closure',\r\n        desc: 'Reserved. Used to indicate that a connection was closed abnormally (that is, with no close frame being sent) when a status code is expected.',\r\n        tips: ''\r\n    },\r\n    1007: {\r\n        reason: 'Invalid frame payload data',\r\n        desc: 'The endpoint is terminating the connection because a message was received that contained inconsistent data (e.g., non-UTF-8 data within a text message).',\r\n        tips: ''\r\n    },\r\n    1008: {\r\n        reason: 'Policy Violation',\r\n        desc: 'The endpoint is terminating the connection because it received a message that violates its policy. This is a generic status code, used when codes 1003 and 1009 are not suitable.',\r\n        tips: ''\r\n    },\r\n    1009: {\r\n        reason: 'Message too big',\r\n        desc: 'The endpoint is terminating the connection because a data frame was received that is too large.',\r\n        tips: ''\r\n    },\r\n    1010: {\r\n        reason: 'Missing Extension',\r\n        desc: 'The client is terminating the connection because it expected the server to negotiate one or more extension, but the server didn\\'t.',\r\n        tips: ''\r\n    },\r\n    1011: {\r\n        reason: 'Internal Error',\r\n        desc: 'The server is terminating the connection because it encountered an unexpected condition that prevented it from fulfilling the request.',\r\n        tips: ''\r\n    },\r\n    1012: {\r\n        reason: 'Service Restart',\r\n        desc: 'The server is terminating the connection because it is restarting. [Ref]',\r\n        tips: ''\r\n    },\r\n    1013: {\r\n        reason: 'Try Again Later',\r\n        desc: 'The server is terminating the connection due to a temporary condition, e.g. it is overloaded and is casting off some of its clients. [Ref]',\r\n        tips: ''\r\n    },\r\n    1014: {\r\n        reason: 'Bad Gateway',\r\n        desc: 'The server was acting as a gateway or proxy and received an invalid response from the upstream server. This is similar to 502 HTTP Status Code.',\r\n        tips: ''\r\n    },\r\n    1015: {\r\n        reason: 'TLS Handshake',\r\n        desc: 'Reserved. Indicates that the connection was closed due to a failure to perform a TLS handshake (e.g., the server certificate can\\'t be verified).',\r\n        tips: ''\r\n    },\r\n    4501: {\r\n        reason: '服务内部的错误。',\r\n        desc: '服务内部的错误。',\r\n        tips: '联系管理员或者相关技术人员进行分析解决。'\r\n    }\r\n};","// socket 全局消息控制器\r\n\r\nimport { ViewModel, getSafeRandom } from '@platform/api'\r\n\r\nconst { setGlobalStorage, getGlobalStorage, removeGlobalStorage, getDecryptData } = ViewModel;\r\n\r\n/**\r\n * 生成唯一标 识\r\n */\r\nfunction uuidv4() {\r\n    return \"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\r\n        var r = (getSafeRandom() * 16) | 0,\r\n            v = c == \"x\" ? r : (r & 0x3) | 0x8;\r\n        return v.toString(16);\r\n    });\r\n}\r\n\r\n\r\nclass ChannelCtrl {\r\n\r\n    // 动作标识\r\n    static ChannelAction = {\r\n        check: 'checkUnique',\r\n        message: 'sendMessage',\r\n        reply: 'uniqueReply'\r\n    }\r\n\r\n    constructor(props = {}) {\r\n        this.props = props;\r\n        this.recieve = this.recieve.bind(this);\r\n        this.uuidv4 = uuidv4();\r\n        this.unique = props.unique || this.uuidv4;\r\n        this.re = new RegExp('^' + this.unique);\r\n    }\r\n\r\n    recieve(e) {\r\n        let { onRecieve } = this.props;\r\n        if (String(e.key).match(this.re)) { // localStorage.setItem時 如   ___socket_channel___ 前缀  localStorage.setItem('___socket_channel___XXXX')\r\n            let key = e.key.replace(this.re, '');\r\n            let value = getDecryptData(e.newValue) || getGlobalStorage('localStorage', e.key);\r\n            let obj = value ? JSON.parse(value) : '';\r\n            onRecieve && onRecieve(obj, key);\r\n        }\r\n    }\r\n\r\n    setRecieve(f) {\r\n        this.props.onRecieve = f;\r\n    }\r\n\r\n    start() {\r\n        window.addEventListener('storage', this.recieve, false);\r\n        return this;\r\n    }\r\n\r\n    send(event, message) {\r\n        setGlobalStorage('localStorage', this.unique + event, JSON.stringify(message));\r\n        // clean up localstorage\r\n        setTimeout(() => {\r\n            removeGlobalStorage('localStorage', this.unique + event);\r\n        }, 10);\r\n    }\r\n\r\n    destroy() {\r\n        this.props.onRecieve = null;\r\n        window.removeEventListener('storage', this.recieve);\r\n    }\r\n}\r\n\r\nexport default ChannelCtrl;","// 心跳检测  暂时不需要使用 send方法socket服务端不支持\r\nexport default class HeartCheck {\r\n    constructor(props = {}) {\r\n        this.props = props;\r\n        this.count = props.count || 3;\r\n        this.timeout = props.timeout || 3000;\r\n    }\r\n\r\n    start() {\r\n        let { running } = this.props;\r\n        console.log(this.timeout);\r\n        this.timeoutObj = setInterval(() => {\r\n            this.count--;\r\n            running && running(this);\r\n        }, this.timeout);\r\n    }\r\n\r\n    restart() {\r\n        this.count = 3;\r\n        this.stop();\r\n        this.start();\r\n    }\r\n\r\n    stop() {\r\n        clearInterval(this.timeoutObj);\r\n    }\r\n\r\n    destory() {\r\n        // TODO\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport getUserId from './getUserId';\r\nimport getUserInfo from './getUserInfo';\r\n//import BillErrorTrack from '../BillErrorTrack';\r\nimport { BillErrorTrack } from '@platform/base';\r\nimport { codes } from './closeStatus';\r\nimport { toast, ajax, ViewModel, clearToast, Cipher, gzip as Gzip, getMultiLang, getSafeRandom } from '@platform/api';\r\nimport ChannelCtrl from './uniqueChannel';\r\nimport HeartCheck from './heartCheck';\r\n\r\nconst gzip = new Gzip();\r\n\r\nrequire('./index.less');\r\n\r\nlet { getGlobalStorage, setGlobalStorage } = ViewModel;\r\n\r\nconst isLocal = NODE_ENV === 'development';\r\n\r\nconst defaultUserId = isLocal ? 'renyjk' : ''; // 仅仅用于本地测试 \r\n\r\nconst ReadyState = ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'],\r\n    Timeout = 4000,\r\n    Count = 99999,\r\n    MESSAGE = ChannelCtrl.ChannelAction.message;\r\n\r\nexport default class SocketConnect extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        // 错误追溯使用\r\n        this.state = {\r\n            showBillTrack: false,\r\n            userId: props.userId,\r\n            ds: props.ds,\r\n            json: {},\r\n            LangData: null,\r\n        };\r\n        this.saga_popInfo = {};\r\n        this.gtxid = '';\r\n        this.billpk = '';\r\n        this.billtype = props.billtype;\r\n\r\n        // 页面连接标识，用户接收消息时，判断是不是该连接\r\n        this.tabid = '';\r\n        // 重连计数器\r\n        this.count = Count;\r\n\r\n        // soket实例\r\n        this.CWebSocket = null;\r\n        // 连接标识，避免重复连接\r\n        this.lockReconnect = false;\r\n        // 创建多页签消息机制\r\n        this.recieve = this.recieve.bind(this);\r\n        this.running = this.running.bind(this);\r\n\r\n        this.ChannelCtrl = new ChannelCtrl({\r\n            unique: '___socket_channel___',\r\n            onRecieve: this.recieve,\r\n        }).start();\r\n        // 添加心跳检测\r\n        this.HeartCheck = new HeartCheck({\r\n            running: this.running,\r\n            count: 99999,\r\n            timeout: 50 * 1000, // 每50秒发送一次信息\r\n        });\r\n\r\n        console.log('socket connect channel ');\r\n    }\r\n\r\n    running() {\r\n        console.log('send message for connect check');\r\n        this.isConnect && this.CWebSocket && this.CWebSocket.send(String(new Date().getTime()));\r\n    }\r\n\r\n    // 接收多页签消息\r\n    recieve(obj, key) {\r\n        // 收到其他页签的socket的消息  然后提示\r\n        if (key == MESSAGE && obj && !this.isConnect) { //TODO 可能还要判断消息是不是自己发的 避免自己提示自己\r\n            console.log(obj);\r\n            try {\r\n                this.sendMessageToIframe({ data: obj });\r\n            } catch (error) {\r\n                console.error ? console.error(error) : console.log(error);\r\n                // throw error;\r\n            }\r\n\r\n            // 这里一定要先更新内页  这样才能把一些信息参数更新掉\r\n            // 比如把内页的参数  更新之后就可以同步到外页了\r\n            this.handleMessage({ data: obj });\r\n\r\n        }\r\n    }\r\n\r\n    sendMessageToIframe(obj) {\r\n        if (top && top.SocketMessageFun) {\r\n            for (let item in top.SocketMessageFun) {\r\n                if (typeof top.SocketMessageFun[item] == 'function') {\r\n                    top.SocketMessageFun[item](obj);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        console.log(nextProps.userId);\r\n        if (nextProps.userId !== this.state.userId) { // 更新链接\r\n            this.setState({\r\n                userId: nextProps.userId,\r\n                ds: nextProps.ds,\r\n            }, () => {\r\n                // 销毁之后不在重连\r\n                this.lockReconnect = true;\r\n                this.closeSocket();\r\n                this.createWebSocket();\r\n            });\r\n        }\r\n    }\r\n\r\n    componentWillMount() {\r\n        let callback = (json, bool, LangData) => {\r\n            this.setState({ json, LangData });\r\n        };\r\n        getMultiLang({ moduleId: 'page_socket', callback });\r\n    }\r\n\r\n    componentDidMount() {\r\n        // 界面初始化时，建立websocket连接\r\n        this.createWebSocket();\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        // 销毁之后不在重连\r\n        this.lockReconnect = true;\r\n        this.closeSocket();\r\n        this.isConnect && setGlobalStorage('localStorage', '__socket_connect_', 'N');\r\n        this.ChannelCtrl.destroy();\r\n        this.HeartCheck.stop();\r\n    }\r\n\r\n    closeSocket = () => {\r\n        this.isConnect && setGlobalStorage('localStorage', '__socket_connect_', 'N');\r\n        if (this.CWebSocket) {\r\n            //关闭websocket连接\r\n            this.CWebSocket.close(); // 1000 组件注销关闭\r\n            // alert(\"关闭了WebSocket连接\")\r\n            this.CWebSocket = null;\r\n        }\r\n    }\r\n\r\n    WebSocketConnect = () => {\r\n        if (!this.tabid) { // 使用top来保持多层的tabid相同\r\n            this.tabid = top && top.WebSocketTabid ? top.WebSocketTabid : this.randomNumber();\r\n            // 挂载下 给ajax 使用\r\n            window.WebSocketTabid = this.tabid;\r\n            top.WebSocketTabid = this.tabid;\r\n            console.log('页签时间戳值为：', this.tabid);\r\n        }\r\n\r\n        // 判断当前浏览器中是否已经建立了链接\r\n        let isConnect = getGlobalStorage('localStorage', '__socket_connect_') === 'Y';\r\n        if (isConnect) return;\r\n\r\n        // 启动定时器 不停发送消息避免链接中断\r\n        this.HeartCheck.restart();\r\n\r\n        // 注意下用户信息的获取顺序\r\n        let userid = this.state.userid || getUserId() || defaultUserId,\r\n            ds = this.state.ds || getUserInfo('datasource') || '',\r\n            serverIP = window.top.location.hostname,\r\n            serverPort = window.location.port ? (':' + window.location.port) : window.location.port,\r\n            wsLocation = serverIP + serverPort,\r\n            { serverLocation: loacalWsLocation } = this.props;\r\n\r\n        if (loacalWsLocation) wsLocation = loacalWsLocation;\r\n\r\n        // 加密\r\n        let cipherFlag = getGlobalStorage('localStorage', 'rockin');\r\n        // 将是否加密缓存到组件单例上\r\n        Cipher.CipherFlag = cipherFlag === 'true';\r\n        let socketParams = Cipher.CipherFlag ? Cipher.encrypt(`userid=${userid}${ds}`, '15469120627904bc557cd9d084a8fae1') : `userid=${userid}${ds}`;\r\n\r\n        if (!userid) return;\r\n        this.wsUrl = `${window.location.protocol == 'https:' ? 'wss' : 'ws'}://${wsLocation}/websocket/api/messagelistener/?` + socketParams;\r\n\r\n        try {\r\n            this.CWebSocket = new WebSocket(this.wsUrl);\r\n            this.init();\r\n        } catch (e) {\r\n            console.log('catch');\r\n            this.reconnect();\r\n        }\r\n    }\r\n\r\n    createWebSocket = () => {\r\n        // 请求开发 判断是否是合盘环境，若为合盘环境，不使用websocket\r\n        let connectSwitch = getGlobalStorage('localStorage', '_ncc_websocket_switch_');\r\n        if (connectSwitch === null) {\r\n            ajax({\r\n                url: '/nccloud/platform/query/merge.do',\r\n                data: {},\r\n                async: false,\r\n                method: 'post',\r\n                success: res => {\r\n                    if (res.success) {\r\n                        if (res.data) {\r\n                            //合盘环境，开关是“0” 不建立websocket\r\n                            setGlobalStorage('localStorage', '_ncc_websocket_switch_', '0');\r\n                        } else {\r\n                            //分盘环境，开关时“1”建立webscoket\r\n                            setGlobalStorage('localStorage', '_ncc_websocket_switch_', '1');\r\n                            this.WebSocketConnect();\r\n\r\n                        }\r\n                    }\r\n                },\r\n            });\r\n        } else if (connectSwitch === '1') {\r\n            this.WebSocketConnect();\r\n        }\r\n    }\r\n\r\n    //初始化，监听事件\r\n    init = () => {\r\n        this.CWebSocket.onclose = event => {\r\n            console.log('websocket连接关闭', event, event.reason, codes[event.code]);\r\n            setGlobalStorage('localStorage', '__socket_connect_', 'N'); // 记录是否已经链接了\r\n            if (event.code != 1000) {\r\n                this.reconnect();\r\n            }\r\n        };\r\n        this.CWebSocket.onerror = event => {\r\n            console.log('websocket连接发生异常了', event);\r\n            setGlobalStorage('localStorage', '__socket_connect_', 'N'); // 记录是否已经链接了\r\n            this.reconnect();\r\n        };\r\n        this.CWebSocket.onopen = () => {\r\n            this.count = Count;\r\n            setGlobalStorage('localStorage', '__socket_connect_', 'Y'); // 记录是否已经链接了\r\n            // 记录当前socket 是否链接\r\n            this.isConnect = true;\r\n            // 链接是否打开\r\n            console.log(this.CWebSocket);\r\n            console.log(ReadyState[this.CWebSocket.readyState]);\r\n        };\r\n        this.CWebSocket.onmessage = event => {\r\n            this.count = Count;\r\n            setGlobalStorage('localStorage', '__socket_connect_', 'Y'); // 记录是否已经链接了\r\n            // 记录当前socket 是否链接\r\n            this.isConnect = true;\r\n            console.log('websocket接收到消息');\r\n            // 发消息给其他页签\r\n            this.ChannelCtrl.send(MESSAGE, event.data);\r\n            this.sendMessageToIframe({ data: event.data });\r\n            this.handleMessage(event);\r\n            //拿到任何消息都说明当前连接是正常的\r\n        };\r\n    }\r\n\r\n    //接收消息 处理界面\r\n    handleMessage = evt => {\r\n        let userid = getUserId() || defaultUserId,\r\n            ds = getUserInfo('datasource') || '',\r\n            data = JSON.parse(evt.data);\r\n        if (data && data.origin === 'websocket-server') {\r\n            // system 是 true时，为公共系统提示\r\n            return;\r\n        }\r\n\r\n        let { json } = this.state;\r\n\r\n        let resMessage = gzip.unzip(data.message) || {};\r\n\r\n        let {\r\n            isShowView = true,\r\n            isShowToast = true,\r\n            onMessage, //注册回调\r\n            billpkname, //列表表格主键名\r\n        } = this.props;\r\n\r\n        // 当前用户，激活页签下显示\r\n        let condition = data.targetids.includes(userid + ds) && !document.hidden;\r\n\r\n        // 为 saga 错误类型时显示\r\n        let saga_mesg = data.origin === 'ncc-server' && resMessage.type === 'saga_error';\r\n\r\n        // 为龙哥新增 重试、回退成功后的错误消息\r\n        let hint_mesg = data.origin === 'ncc-server' && resMessage.type === 'saga_hint';\r\n\r\n        if (condition) {\r\n            // 如果返回了消息清除  重试中和回退中的提示 \r\n            clearToast('socketReSetErrorToast');\r\n            clearToast('socketBackErrorToast');\r\n\r\n            // saga出错提示\r\n            if (saga_mesg) {\r\n                if (resMessage.error) {\r\n                    if (resMessage.billtype) this.billtype = resMessage.billtype;\r\n                    if (Array.isArray(resMessage.refreshData) && resMessage.refreshData.length > 0) {\r\n                        this.gtxid = resMessage.refreshData[0].saga_gtxid;\r\n                        this.billpk = resMessage.refreshData[0][billpkname || '_businessPk'];\r\n                    }\r\n                    // 内外页参数同步\r\n                    isShowView = top && this.gtxid && top.SocketConfig && top.SocketConfig[this.gtxid] ? top.SocketConfig[this.gtxid] : isShowView;\r\n                    isShowToast = top && this.gtxid && top.SocketConfig && top.SocketConfig[this.gtxid] ? top.SocketConfig[this.gtxid] : isShowToast;\r\n\r\n                    if (resMessage.msg) {\r\n                        let isdisplay = typeof resMessage.isdisplay === 'undefined' ? true : resMessage.isdisplay;\r\n                        isShowToast && toast({\r\n                            mark: 'socketErrorToast' + this.gtxid,\r\n                            color: 'danger',\r\n                            title: json['page-socket-0001'] || '发送失败',\r\n                            customBtnBeforeClose: (isShowView && isdisplay) ? (\r\n                                <span\r\n                                    data-mark={this.gtxid}\r\n                                    onClick={event => {\r\n                                        //-- 解决CLOUD-182009\r\n                                        let current_gtxid = event.target.getAttribute('data-mark');\r\n                                        if (current_gtxid) {\r\n                                            this.gtxid = current_gtxid;\r\n                                            let current_saga = this.saga_popInfo[this.gtxid];\r\n                                            this.billpk = current_saga && current_saga.billpk;\r\n                                            this.billtype = current_saga && current_saga.billtype;\r\n                                        }\r\n                                        this.setState({ showBillTrack: true });\r\n                                    }}\r\n                                >{json['page-socket-0002'] || '立即查看'}\r\n                                </span>\r\n                            ) : <span />,\r\n                            groupOperation: true,\r\n                            groupOperationMsg: [resMessage.msg],\r\n                        });\r\n\r\n                        //存储当前页面多条saga返回数据,解决CLOUD-182009\r\n                        this.saga_popInfo[this.gtxid] = {\r\n                            billpk: this.billpk,\r\n                            billtype: this.billtype,\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    // 只是给测试统计跨服务事务效率用的，先单元测试，去掉\r\n                    isShowToast && toast({\r\n                        // mark: 'socketErrorToast',\r\n                        color: 'success',\r\n                        title: json['page-socket-0003'] || '跨服务事务处理成功！'\r\n                    });\r\n                }\r\n            }\r\n\r\n            // 重试或者回退成功的消息提示\r\n            if (hint_mesg) {\r\n                // 清除一进入页面就出现的提示\r\n                console.log('socketErrorToast' + this.gtxid);\r\n                clearToast('socketErrorToast');\r\n                clearToast('socketErrorToast' + this.gtxid);\r\n                if (!resMessage.error) { //成功的消息提示\r\n                    // clearToast('socketErrorToast'); // 清除一进入页面就出现的提示\r\n                    isShowToast && toast({\r\n                        color: 'success',\r\n                        content: resMessage.msg,\r\n                    });\r\n                } else { // 失败的消息提示\r\n                    isShowToast && toast({\r\n                        color: 'danger',\r\n                        content: resMessage.msg,\r\n                    });\r\n                }\r\n            }\r\n\r\n        }\r\n        // 消息和交互分開\r\n        if (data.targetids.includes(userid + ds) && resMessage.tabid === this.tabid) {\r\n            //调用业务组注册的回调\r\n            if (typeof onMessage === 'function') {\r\n                // 错误中心，重试或者回退成功的提示，无法获取到，因为重试或者回退成功，龙哥给的tabid不对(始终是第一次重试的tabid)\r\n                onMessage({ ...this.props, ...this.output }, resMessage);\r\n            }\r\n\r\n            if (typeof window.top.onSocketMessage === 'function') {\r\n                window.top.onSocketMessage(resMessage);\r\n            }\r\n        }\r\n    }\r\n\r\n    // 异常关闭时，发起重连\r\n    reconnect = () => {\r\n        if (this.lockReconnect) {\r\n            return;\r\n        }\r\n        if (this.count <= 0) {\r\n            toast({\r\n                color: 'error',\r\n                title: this.state.json['page-socket-0004'] || 'Socket重连已达次数上限,请联系管理员或者刷新页面重试！',\r\n            });\r\n            return;\r\n        }\r\n        this.lockReconnect = true;\r\n        this.count--;\r\n        console.log(this.count);\r\n        //没连接上会一直重连，设置延迟避免请求过多\r\n        setTimeout(() => {\r\n            console.log('websocket发起重连');\r\n            this.createWebSocket();\r\n            this.lockReconnect = false;\r\n        }, Timeout);\r\n    }\r\n\r\n    // 创建连接时间戳\r\n    randomNumber = () => {\r\n        const now = new Date();\r\n        let month = now.getMonth() + 1;\r\n        let day = now.getDate();\r\n        let hour = now.getHours();\r\n        let minutes = now.getMinutes();\r\n        let seconds = now.getSeconds();\r\n        return now.getFullYear().toString() + month.toString() + day + hour + minutes + seconds + (Math.round(getSafeRandom() * 23 + 100)).toString();\r\n    }\r\n\r\n    render() {\r\n        let { errorViewType = true, // 是否显示 单据追溯\r\n        } = this.props;\r\n        errorViewType = top && top.SocketConfig && top.SocketConfig[this.gtxid] ? top.SocketConfig[this.gtxid] : errorViewType;\r\n\r\n        return errorViewType === 'none' ? null : (\r\n            <BillErrorTrack\r\n                show={this.state.showBillTrack}\r\n                close={() => {\r\n                    this.setState({ showBillTrack: false });\r\n                }}\r\n                pk={this.billpk} //单据id\r\n                type={this.billtype} //单据类型\r\n                gtxid={this.gtxid} //错误id\r\n                errorViewType={errorViewType}\r\n            // bodyClientHeight=\"500\" //在第二层iframe里不用配置，如果iframe层更多，需要传一下body的高度\r\n            />\r\n        );\r\n    }\r\n}","/**\r\n * 快捷键描述的静态数据 维护老麻烦了\r\n */\r\n\r\nlet langJson = {};\r\n\r\nfunction getLangJson(code) {\r\n    return langJson[code] || \"\";\r\n}\r\n\r\nfunction getData(type) {\r\n    let data = [];\r\n    switch (type) {\r\n        case \"grid\":\r\n            data = [\r\n                {\r\n                    name: \"Tab\",\r\n                    desc: getLangJson(\"hk-0012\")\r\n                },\r\n                {\r\n                    name: \"Shift+Tab\",\r\n                    desc: getLangJson(\"hk-0013\")\r\n                },\r\n                {\r\n                    name: \"↑\",\r\n                    desc: getLangJson(\"hk-0010\")\r\n                },\r\n                {\r\n                    name: \"↓\",\r\n                    desc: getLangJson(\"hk-0011\")\r\n                },\r\n                {\r\n                    name: \"Enter\",\r\n                    desc: getLangJson(\"hk-0014\")\r\n                },\r\n                {\r\n                    name: \"Esc\",\r\n                    desc: getLangJson(\"hk-0023\")\r\n                },\r\n                {\r\n                    name: \"Alt+Y\",\r\n                    desc: getLangJson(\"hk-0015\")\r\n                },\r\n                {\r\n                    name: \"Alt+N\",\r\n                    desc: getLangJson(\"hk-0016\")\r\n                },\r\n                {\r\n                    name: \"Fn+↑、Pageup\",\r\n                    desc: getLangJson(\"hk-0017\")\r\n                },\r\n                {\r\n                    name: \"Fn+↓、Pagedown\",\r\n                    desc: getLangJson(\"hk-0018\")\r\n                },\r\n                {\r\n                    name: \"Fn+←\",\r\n                    desc: getLangJson(\"hk-0019\")\r\n                },\r\n                {\r\n                    name: \"Fn+→\",\r\n                    desc: getLangJson(\"hk-0020\")\r\n                },\r\n                {\r\n                    name: \"Ctrl+←\",\r\n                    desc: getLangJson(\"hk-0021\")\r\n                },\r\n                {\r\n                    name: \"Ctrl+→\",\r\n                    desc: getLangJson(\"hk-0022\")\r\n                }\r\n            ];\r\n            break;\r\n        case \"gridMulti\":\r\n            data = [\r\n                {\r\n                    name: \"Tab\",\r\n                    desc: getLangJson(\"hk-0012\")\r\n                },\r\n                {\r\n                    name: \"Shift+Tab\",\r\n                    desc: getLangJson(\"hk-0013\")\r\n                },\r\n                {\r\n                    name: \"↑\",\r\n                    desc: getLangJson(\"hk-0010\")\r\n                },\r\n                {\r\n                    name: \"↓\",\r\n                    desc: getLangJson(\"hk-0011\")\r\n                },\r\n                {\r\n                    name: getLangJson(\"hk-0025\"),\r\n                    desc: getLangJson(\"hk-0024\")\r\n                },\r\n                {\r\n                    name: \"Enter\",\r\n                    desc: getLangJson(\"hk-0014\")\r\n                },\r\n                {\r\n                    name: \"Esc\",\r\n                    desc: getLangJson(\"hk-0023\")\r\n                },\r\n                {\r\n                    name: \"Alt+Y\",\r\n                    desc: getLangJson(\"hk-0015\")\r\n                },\r\n                {\r\n                    name: \"Alt+N\",\r\n                    desc: getLangJson(\"hk-0016\")\r\n                },\r\n                {\r\n                    name: \"Fn+↑、Pageup\",\r\n                    desc: getLangJson(\"hk-0017\")\r\n                },\r\n                {\r\n                    name: \"Fn+↓、Pagedown\",\r\n                    desc: getLangJson(\"hk-0018\")\r\n                },\r\n                {\r\n                    name: \"Fn+←\",\r\n                    desc: getLangJson(\"hk-0019\")\r\n                },\r\n                {\r\n                    name: \"Fn+→\",\r\n                    desc: getLangJson(\"hk-0020\")\r\n                },\r\n                {\r\n                    name: \"Ctrl+←\",\r\n                    desc: getLangJson(\"hk-0021\")\r\n                },\r\n                {\r\n                    name: \"Ctrl+→\",\r\n                    desc: getLangJson(\"hk-0022\")\r\n                }\r\n            ];\r\n            break;\r\n        case \"tree\":\r\n            data = [\r\n                {\r\n                    name: \"Tab\",\r\n                    desc: getLangJson(\"hk-0012\")\r\n                },\r\n                {\r\n                    name: \"Shift+Tab\",\r\n                    desc: getLangJson(\"hk-0013\")\r\n                },\r\n                {\r\n                    name: \"↑\",\r\n                    desc: getLangJson(\"hk-0010\")\r\n                },\r\n                {\r\n                    name: \"↓\",\r\n                    desc: getLangJson(\"hk-0011\")\r\n                },\r\n                {\r\n                    name: \"←\",\r\n                    desc: getLangJson(\"hk-0026\")\r\n                },\r\n                {\r\n                    name: \"→\",\r\n                    desc: getLangJson(\"hk-0027\")\r\n                },\r\n                {\r\n                    name: \"Enter\",\r\n                    desc: getLangJson(\"hk-0014\")\r\n                },\r\n                {\r\n                    name: \"Esc\",\r\n                    desc: getLangJson(\"hk-0023\")\r\n                },\r\n                {\r\n                    name: \"Alt+Y\",\r\n                    desc: getLangJson(\"hk-0015\")\r\n                },\r\n                {\r\n                    name: \"Alt+N\",\r\n                    desc: getLangJson(\"hk-0016\")\r\n                },\r\n                {\r\n                    name: \"Fn+↑、Pageup\",\r\n                    desc: getLangJson(\"hk-0017\")\r\n                },\r\n                {\r\n                    name: \"Fn+↓、Pagedown\",\r\n                    desc: getLangJson(\"hk-0018\")\r\n                },\r\n                {\r\n                    name: \"Fn+←\",\r\n                    desc: getLangJson(\"hk-0019\")\r\n                },\r\n                {\r\n                    name: \"Fn+→\",\r\n                    desc: getLangJson(\"hk-0020\")\r\n                },\r\n                {\r\n                    name: \"Ctrl+←\",\r\n                    desc: getLangJson(\"hk-0021\")\r\n                },\r\n                {\r\n                    name: \"Ctrl+→\",\r\n                    desc: getLangJson(\"hk-0022\")\r\n                }\r\n            ];\r\n            break;\r\n        case \"treeMulti\":\r\n            data = [\r\n                {\r\n                    name: \"Tab\",\r\n                    desc: getLangJson(\"hk-0012\")\r\n                },\r\n                {\r\n                    name: \"Shift+Tab\",\r\n                    desc: getLangJson(\"hk-0013\")\r\n                },\r\n                {\r\n                    name: \"↑\",\r\n                    desc: getLangJson(\"hk-0010\")\r\n                },\r\n                {\r\n                    name: \"↓\",\r\n                    desc: getLangJson(\"hk-0011\")\r\n                },\r\n                {\r\n                    name: \"←\",\r\n                    desc: getLangJson(\"hk-0026\")\r\n                },\r\n                {\r\n                    name: \"→\",\r\n                    desc: getLangJson(\"hk-0027\")\r\n                },\r\n                {\r\n                    name: getLangJson(\"hk-0025\"),\r\n                    desc: getLangJson(\"hk-0024\")\r\n                },\r\n                {\r\n                    name: \"Enter\",\r\n                    desc: getLangJson(\"hk-0014\")\r\n                },\r\n                {\r\n                    name: \"Esc\",\r\n                    desc: getLangJson(\"hk-0023\")\r\n                },\r\n                {\r\n                    name: \"Alt+Y\",\r\n                    desc: getLangJson(\"hk-0015\")\r\n                },\r\n                {\r\n                    name: \"Alt+N\",\r\n                    desc: getLangJson(\"hk-0016\")\r\n                },\r\n                {\r\n                    name: \"Fn+↑、Pageup\",\r\n                    desc: getLangJson(\"hk-0017\")\r\n                },\r\n                {\r\n                    name: \"Fn+↓、Pagedown\",\r\n                    desc: getLangJson(\"hk-0018\")\r\n                },\r\n                {\r\n                    name: \"Fn+←\",\r\n                    desc: getLangJson(\"hk-0019\")\r\n                },\r\n                {\r\n                    name: \"Fn+→\",\r\n                    desc: getLangJson(\"hk-0020\")\r\n                },\r\n                {\r\n                    name: \"Ctrl+←\",\r\n                    desc: getLangJson(\"hk-0021\")\r\n                },\r\n                {\r\n                    name: \"Ctrl+→\",\r\n                    desc: getLangJson(\"hk-0022\")\r\n                }\r\n            ];\r\n            break;\r\n        case \"gridTree\":\r\n            data = [\r\n                {\r\n                    name: \"Tab\",\r\n                    desc: getLangJson(\"hk-0012\")\r\n                },\r\n                {\r\n                    name: \"Shift+Tab\",\r\n                    desc: getLangJson(\"hk-0013\")\r\n                },\r\n                {\r\n                    name: \"↑\",\r\n                    desc: getLangJson(\"hk-0010\")\r\n                },\r\n                {\r\n                    name: \"↓\",\r\n                    desc: getLangJson(\"hk-0011\")\r\n                },\r\n                {\r\n                    name: \"←\",\r\n                    desc: getLangJson(\"hk-0010\")\r\n                },\r\n                {\r\n                    name: \"→\",\r\n                    desc: getLangJson(\"hk-0011\")\r\n                },\r\n                {\r\n                    name: \"Shift+←\",\r\n                    desc: getLangJson(\"hk-0028\")\r\n                },\r\n                {\r\n                    name: \"Shift+→\",\r\n                    desc: getLangJson(\"hk-0029\")\r\n                },\r\n                {\r\n                    name: \"Enter\",\r\n                    desc: getLangJson(\"hk-0014\")\r\n                },\r\n                {\r\n                    name: \"Esc\",\r\n                    desc: getLangJson(\"hk-0023\")\r\n                },\r\n                {\r\n                    name: \"Alt+Y\",\r\n                    desc: getLangJson(\"hk-0015\")\r\n                },\r\n                {\r\n                    name: \"Alt+N\",\r\n                    desc: getLangJson(\"hk-0016\")\r\n                },\r\n                {\r\n                    name: \"Fn+↑、Pageup\",\r\n                    desc: getLangJson(\"hk-0017\")\r\n                },\r\n                {\r\n                    name: \"Fn+↓、Pagedown\",\r\n                    desc: getLangJson(\"hk-0018\")\r\n                },\r\n                {\r\n                    name: \"Fn+←\",\r\n                    desc: getLangJson(\"hk-0019\")\r\n                },\r\n                {\r\n                    name: \"Fn+→\",\r\n                    desc: getLangJson(\"hk-0020\")\r\n                },\r\n                {\r\n                    name: \"Ctrl+←\",\r\n                    desc: getLangJson(\"hk-0021\")\r\n                },\r\n                {\r\n                    name: \"Ctrl+→\",\r\n                    desc: getLangJson(\"hk-0022\")\r\n                }\r\n            ];\r\n            break;\r\n        case \"gridTreeMulti\":\r\n            data = [\r\n                {\r\n                    name: \"Tab\",\r\n                    desc: getLangJson(\"hk-0012\")\r\n                },\r\n                {\r\n                    name: \"Shift+Tab\",\r\n                    desc: getLangJson(\"hk-0013\")\r\n                },\r\n                {\r\n                    name: \"↑\",\r\n                    desc: getLangJson(\"hk-0010\")\r\n                },\r\n                {\r\n                    name: \"↓\",\r\n                    desc: getLangJson(\"hk-0011\")\r\n                },\r\n                {\r\n                    name: \"←\",\r\n                    desc: getLangJson(\"hk-0026\")\r\n                },\r\n                {\r\n                    name: \"→\",\r\n                    desc: getLangJson(\"hk-0027\")\r\n                },\r\n                {\r\n                    name: \"Shift+←\",\r\n                    desc: getLangJson(\"hk-0028\")\r\n                },\r\n                {\r\n                    name: \"Shift+→\",\r\n                    desc: getLangJson(\"hk-0029\")\r\n                },\r\n                {\r\n                    name: getLangJson(\"hk-0025\"),\r\n                    desc: getLangJson(\"hk-0024\")\r\n                },\r\n                {\r\n                    name: \"Enter\",\r\n                    desc: getLangJson(\"hk-0014\")\r\n                },\r\n                {\r\n                    name: \"Esc\",\r\n                    desc: getLangJson(\"hk-0023\")\r\n                },\r\n                {\r\n                    name: \"Alt+Y\",\r\n                    desc: getLangJson(\"hk-0015\")\r\n                },\r\n                {\r\n                    name: \"Alt+N\",\r\n                    desc: getLangJson(\"hk-0016\")\r\n                },\r\n                {\r\n                    name: \"Fn+↑、Pageup\",\r\n                    desc: getLangJson(\"hk-0017\")\r\n                },\r\n                {\r\n                    name: \"Fn+↓、Pagedown\",\r\n                    desc: getLangJson(\"hk-0018\")\r\n                },\r\n                {\r\n                    name: \"Fn+←\",\r\n                    desc: getLangJson(\"hk-0019\")\r\n                },\r\n                {\r\n                    name: \"Fn+→\",\r\n                    desc: getLangJson(\"hk-0020\")\r\n                },\r\n                {\r\n                    name: \"Ctrl+←\",\r\n                    desc: getLangJson(\"hk-0021\")\r\n                },\r\n                {\r\n                    name: \"Ctrl+→\",\r\n                    desc: getLangJson(\"hk-0022\")\r\n                }\r\n            ];\r\n            break;\r\n        case \"view\":\r\n            data = [\r\n                {\r\n                    area: getLangJson(\"hk-0032\"),\r\n                    name: \"Ctrl+/\",\r\n                    desc: getLangJson(\"hk-0037\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0032\"),\r\n                    name: \"Ctrl+/\",\r\n                    desc: getLangJson(\"hk-0038\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0032\"),\r\n                    name: \"Alt+P\",\r\n                    desc: getLangJson(\"hk-0039\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0032\"),\r\n                    // name: \"Ctrl+Del\",\r\n                    name: \"Ctrl+Backspace\",\r\n                    desc: getLangJson(\"hk-0040\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0032\"),\r\n                    name: \"Alt+C\",\r\n                    desc: getLangJson(\"hk-0041\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0032\"),\r\n                    name: \"Alt+B\",\r\n                    desc: getLangJson(\"hk-0042\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0032\"),\r\n                    name: \"Ctrl+B\",\r\n                    desc: getLangJson(\"hk-0043\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0032\"),\r\n                    name: \"Alt+R\",\r\n                    desc: getLangJson(\"hk-0044\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0032\"),\r\n                    name: \"Esc\",\r\n                    desc: getLangJson(\"hk-0045\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0032\"),\r\n                    name: \"Alt+Pageup\",\r\n                    desc: getLangJson(\"hk-0046\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0032\"),\r\n                    name: \"Alt+Pagedown\",\r\n                    desc: getLangJson(\"hk-0047\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0032\"),\r\n                    name: \"F5\",\r\n                    desc: getLangJson(\"hk-0048\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0032\"),\r\n                    name: getLangJson(\"hk-0051\"),\r\n                    desc: getLangJson(\"hk-0049\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0032\"),\r\n                    name: getLangJson(\"hk-0051\"),\r\n                    desc: getLangJson(\"hk-0050\")\r\n                },\r\n                // --2\r\n                {\r\n                    area: getLangJson(\"hk-0035\"),\r\n                    name: \"Ctrl+I\",\r\n                    desc: getLangJson(\"hk-0052\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0035\"),\r\n                    name: \"Alt+I\",\r\n                    desc: getLangJson(\"hk-0053\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0035\"),\r\n                    name: \"Ctrl+U\",\r\n                    desc: getLangJson(\"hk-0054\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0035\"),\r\n                    name: \"Alt+U\",\r\n                    desc: getLangJson(\"hk-0055\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0035\"),\r\n                    name: \"Ctrl+G\",\r\n                    desc: getLangJson(\"hk-0056\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0035\"),\r\n                    name: \"Alt+G\",\r\n                    desc: getLangJson(\"hk-0057\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0035\"),\r\n                    name: \"Ctrl+J\",\r\n                    desc: getLangJson(\"hk-0058\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0035\"),\r\n                    name: \"Alt+J\",\r\n                    desc: getLangJson(\"hk-0059\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0035\"),\r\n                    name: \"Ctrl+J\",\r\n                    desc: getLangJson(\"hk-0060\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0035\"),\r\n                    name: \"Alt+J\",\r\n                    desc: getLangJson(\"hk-0061\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0035\"),\r\n                    name: \"Ctrl+Alt+E\",\r\n                    desc: getLangJson(\"hk-0062\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0035\"),\r\n                    name: \"Ctrl+Alt+C\",\r\n                    desc: getLangJson(\"hk-0063\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0035\"),\r\n                    name: \"Ctrl+P\",\r\n                    desc: getLangJson(\"hk-0064\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0035\"),\r\n                    name: \"Ctrl+K\",\r\n                    desc: getLangJson(\"hk-0065\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0035\"),\r\n                    name: getLangJson(\"hk-0051\"),\r\n                    desc: getLangJson(\"hk-0066\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0035\"),\r\n                    name: getLangJson(\"hk-0051\"),\r\n                    desc: getLangJson(\"hk-0067\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0035\"),\r\n                    name: \"Alt+O\",\r\n                    desc: getLangJson(\"hk-0068\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0035\"),\r\n                    name: \"Alt+D\",\r\n                    desc: getLangJson(\"hk-0069\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0035\"),\r\n                    name: \"Alt+L\",\r\n                    desc: getLangJson(\"hk-0070\")\r\n                },\r\n\r\n                // -3\r\n\r\n                {\r\n                    area: getLangJson(\"hk-0036\"),\r\n                    name: \"Ctrl+Tab\",\r\n                    desc: getLangJson(\"hk-0071\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0036\"),\r\n                    name: \"Ctrl+Shift+Tab\",\r\n                    desc: getLangJson(\"hk-0072\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0036\"),\r\n                    name: \"Ctrl+W\",\r\n                    desc: getLangJson(\"hk-0073\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0036\"),\r\n                    name: \"Ctrl+R\",\r\n                    desc: getLangJson(\"hk-0074\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0036\"),\r\n                    name: getLangJson(\"hk-0025\"),\r\n                    desc: getLangJson(\"hk-0075\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0036\"),\r\n                    name: \"Home\",\r\n                    desc: getLangJson(\"hk-0076\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0036\"),\r\n                    name: \"End\",\r\n                    desc: getLangJson(\"hk-0077\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0036\"),\r\n                    name: \"Ctrl++\",\r\n                    desc: getLangJson(\"hk-0078\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0036\"),\r\n                    name: \"Ctrl+-\",\r\n                    desc: getLangJson(\"hk-0079\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0036\"),\r\n                    name: \"Ctrl+0\",\r\n                    desc: getLangJson(\"hk-0080\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0036\"),\r\n                    name: \"Ctrl+F\",\r\n                    desc: getLangJson(\"hk-0081\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0036\"),\r\n                    name: \"Ctrl+←\",\r\n                    desc: getLangJson(\"hk-0082\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0036\"),\r\n                    name: \"Ctrl+→\",\r\n                    desc: getLangJson(\"hk-0083\")\r\n                }\r\n            ];\r\n            break;\r\n        case \"edit\":\r\n        default:\r\n            data = [\r\n                // - 1\r\n                {\r\n                    area: getLangJson(\"hk-0030\"),\r\n                    name: \"Tab\",\r\n                    desc: getLangJson(\"hk-0084\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0030\"),\r\n                    name: \"Shift+Tab\",\r\n                    desc: getLangJson(\"hk-0085\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0030\"),\r\n                    name: \"Esc\",\r\n                    desc: getLangJson(\"hk-0086\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0030\"),\r\n                    name: \"←\",\r\n                    desc: getLangJson(\"hk-0087\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0030\"),\r\n                    name: \"→\",\r\n                    desc: getLangJson(\"hk-0088\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0030\"),\r\n                    name: \"↑\",\r\n                    desc: getLangJson(\"hk-0089\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0030\"),\r\n                    name: \"↓\",\r\n                    desc: getLangJson(\"hk-0090\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0030\"),\r\n                    name: \"F3\",\r\n                    desc: getLangJson(\"hk-0091\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0030\"),\r\n                    name: \"F2\",\r\n                    desc: getLangJson(\"hk-0092\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0030\"),\r\n                    name: \"Enter\",\r\n                    desc: getLangJson(\"hk-0093\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0030\"),\r\n                    // name: \"Del\",\r\n                    name: \"Backspace\",\r\n                    desc: getLangJson(\"hk-0094\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0030\"),\r\n                    name: \"Pageup\",\r\n                    desc: getLangJson(\"hk-0095\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0030\"),\r\n                    name: \"Pagedown\",\r\n                    desc: getLangJson(\"hk-0096\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0030\"),\r\n                    name: \"Alt+←\",\r\n                    desc: getLangJson(\"hk-0097\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0030\"),\r\n                    name: \"Alt+→\",\r\n                    desc: getLangJson(\"hk-0098\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0030\"),\r\n                    name: \"Alt+↑\",\r\n                    desc: getLangJson(\"hk-0095\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0030\"),\r\n                    name: \"Alt+↓\",\r\n                    desc: getLangJson(\"hk-0096\")\r\n                },\r\n\r\n                // - 2\r\n                {\r\n                    area: getLangJson(\"hk-0031\"),\r\n                    name: \"Alt+N\",\r\n                    desc: getLangJson(\"hk-0099\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0031\"),\r\n                    // name: \"Alt+Del\",\r\n                    name: \"Alt+Backspace\",\r\n                    desc: getLangJson(\"hk-0100\")\r\n                },\r\n\r\n                {\r\n                    area: getLangJson(\"hk-0031\"),\r\n                    name: \"Alt+I\",\r\n                    desc: getLangJson(\"hk-0101\")\r\n                },\r\n\r\n                {\r\n                    area: getLangJson(\"hk-0031\"),\r\n                    name: \"Alt+C\",\r\n                    desc: getLangJson(\"hk-0102\")\r\n                },\r\n\r\n                {\r\n                    area: getLangJson(\"hk-0031\"),\r\n                    name: \"Alt+V\",\r\n                    desc: getLangJson(\"hk-0103\")\r\n                },\r\n\r\n                {\r\n                    area: getLangJson(\"hk-0031\"),\r\n                    name: \"Ctrl+Alt+V\",\r\n                    desc: getLangJson(\"hk-0104\")\r\n                },\r\n\r\n                {\r\n                    area: getLangJson(\"hk-0031\"),\r\n                    name: \"F4\",\r\n                    desc: getLangJson(\"hk-0105\")\r\n                },\r\n\r\n                {\r\n                    area: getLangJson(\"hk-0031\"),\r\n                    name: getLangJson(\"hk-0051\"),\r\n                    desc: getLangJson(\"hk-0106\")\r\n                },\r\n\r\n                {\r\n                    area: getLangJson(\"hk-0031\"),\r\n                    name: \"Alt+P\",\r\n                    desc: getLangJson(\"hk-0107\")\r\n                },\r\n\r\n                {\r\n                    area: getLangJson(\"hk-0031\"),\r\n                    name: \"Alt+R\",\r\n                    desc: getLangJson(\"hk-0108\")\r\n                },\r\n\r\n                // - 3\r\n                {\r\n                    area: getLangJson(\"hk-0032\"),\r\n                    name: \"F3\",\r\n                    desc: getLangJson(\"hk-0109\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0032\"),\r\n                    name: \"Ctrl+S\",\r\n                    desc: getLangJson(\"hk-0110\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0032\"),\r\n                    name: \"Alt+S\",\r\n                    desc: getLangJson(\"hk-0111\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0032\"),\r\n                    name: \"Alt+T\",\r\n                    desc: getLangJson(\"hk-0112\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0032\"),\r\n                    name: \"Alt+Q\",\r\n                    desc: getLangJson(\"hk-0113\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0032\"),\r\n                    name: \"Ctrl+Alt+S\",\r\n                    desc: getLangJson(\"hk-0114\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0032\"),\r\n                    name: \"Shift+←\",\r\n                    desc: getLangJson(\"hk-0115\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0032\"),\r\n                    name: \"Shift+→\",\r\n                    desc: getLangJson(\"hk-0116\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0032\"),\r\n                    name: \"Shift+↑\",\r\n                    desc: getLangJson(\"hk-0117\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0032\"),\r\n                    name: \"Shift+↓\",\r\n                    desc: getLangJson(\"hk-0118\")\r\n                },\r\n\r\n                // - 4\r\n                {\r\n                    area: getLangJson(\"hk-0033\"),\r\n                    name: \"Alt+Y\",\r\n                    desc: getLangJson(\"hk-0119\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0033\"),\r\n                    name: \"Alt+N\",\r\n                    desc: getLangJson(\"hk-0120\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0033\"),\r\n                    name: \"Enter\",\r\n                    desc: getLangJson(\"hk-0121\")\r\n                },\r\n                {\r\n                    area: getLangJson(\"hk-0033\"),\r\n                    name: \"Esc\",\r\n                    desc: getLangJson(\"hk-0122\")\r\n                }\r\n            ];\r\n            break;\r\n    }\r\n    return data;\r\n}\r\n\r\nexport let staticData = {\r\n    setLangJson(json) {\r\n        langJson = json || [];\r\n    },\r\n    getData: function(type, multi) {\r\n        if (type == \"tree\" && multi) {\r\n            type = \"treeMulti\";\r\n        }\r\n        if (type == \"grid\" && multi) {\r\n            type = \"gridMulti\";\r\n        }\r\n        if (type == \"gridTree\" && multi) {\r\n            type = \"gridTreeMulti\";\r\n        }\r\n        return getData(type);\r\n    }\r\n};\r\n","import React, { Component } from \"react\";\r\nimport { staticData } from \"./staticData\";\r\nimport { HotKeys } from \"@platform/base\";\r\n\r\nrequire(\"./index.less\");\r\n\r\nclass HotkeyHelperPanel extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        // 多语装载\r\n        staticData.setLangJson(this.props.langJson);\r\n\r\n        this.state = {\r\n            data: this.getInitData(),\r\n            currentIndex: 0,\r\n        };\r\n        // 搜索关键字的缓存\r\n        this.caheKey = \"\";\r\n    }\r\n\r\n    // static defaultProps = {};\r\n\r\n    // 更新数据\r\n    componentWillReceiveProps(nextProps) {\r\n        if (nextProps.data != this.props.data) {\r\n            this.setState({\r\n                data: this.getInitData(newData),\r\n                currentIndex: 0,\r\n            });\r\n        }\r\n        // 更新多语\r\n        if (nextProps.langJson != this.props.langJson) {\r\n            // console.log(nextProps.langJson);\r\n            staticData.setLangJson(nextProps.langJson);\r\n            this.setState({\r\n                data: this.getInitData(),\r\n                currentIndex: 0,\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 获取初始化结果\r\n     */\r\n    getInitData(newData) {\r\n        let {\r\n            panelType = \"common\",\r\n            data = [],\r\n            limit,\r\n            isMultiSelectedEnabled,\r\n        } = this.props;\r\n        data = newData || data;\r\n        this.initData = this.currentData = [].concat(\r\n            staticData.getData(panelType, isMultiSelectedEnabled),\r\n            data,\r\n        );\r\n        // 建立缓存区\r\n        this.bufferData = this.currentData.slice(limit);\r\n        this.currentData = this.currentData.slice(0, limit);\r\n\r\n        return this.currentData;\r\n    }\r\n    /**\r\n     * 获取查询结果\r\n     * @param {*} key\r\n     */\r\n    getSearchData(key) {\r\n        let { panelType = \"common\", limit } = this.props,\r\n            data = [];\r\n        this.initData.map(item => {\r\n            let { area, name, desc } = item;\r\n            // 不区分大小写\r\n            let nameLow = (name + \"\").toLocaleLowerCase();\r\n            let keyLow = (key + \"\").toLocaleLowerCase();\r\n            let descLow = `${desc}`.toLocaleLowerCase();\r\n            // 检索的规则 // area.indexOf(key) != \"-1\" ||\r\n            if (\r\n                nameLow.indexOf(keyLow) != \"-1\" ||\r\n                descLow.indexOf(keyLow) != \"-1\"\r\n            ) {\r\n                data.push(item);\r\n            }\r\n        });\r\n        // 建立缓存区\r\n        this.bufferData = data.slice(limit);\r\n        this.currentData = data.slice(0, limit);\r\n        // 缓存当前的搜索关键字\r\n        this.caheKey = key;\r\n        return this.currentData;\r\n    }\r\n\r\n    /**\r\n     * 处理字符串 添加高亮提示\r\n     */\r\n    highLight(str = \"\", key) {\r\n        if (key === \"\" || key === null || key === undefined) {\r\n            return [str];\r\n        }\r\n        // 不区分大小写\r\n        let keyLow = `${key}`.toLocaleLowerCase();\r\n        let strLow = `${str}`.toLocaleLowerCase();\r\n        if (strLow.indexOf(keyLow) === -1) {\r\n            return [str];\r\n        }\r\n        // 截取\r\n        let remianStr = str;\r\n        let spans = [];\r\n        let len = key.length;\r\n        // 执行计数器\r\n        let count = 0;\r\n        while (remianStr.length > 0 && len > 0 && count < 300) {\r\n            // while 很容易引起崩溃  注意这个问题\r\n            count++;\r\n            let i = strLow.indexOf(keyLow);\r\n            if (i !== -1) {\r\n                spans.push(remianStr.substring(0, i));\r\n                spans.push(\r\n                    <span className=\"search-high\">\r\n                        {remianStr.substring(i, i + len)}\r\n                    </span>,\r\n                );\r\n                remianStr = remianStr.substring(i + len);\r\n                strLow = strLow.substring(i + len);\r\n            } else {\r\n                spans.push(remianStr);\r\n                remianStr = \"\";\r\n            }\r\n        }\r\n        // let arrStr = str.split(key),\r\n        //     spans = [];\r\n        // arrStr.map((item, i) => {\r\n        //     if (i != 0) {\r\n        //         spans.push(<span className=\"search-high\">{key}</span>);\r\n        //     }\r\n        //     spans.push(item);\r\n        // });\r\n        return spans;\r\n    }\r\n\r\n    /**\r\n     * 区域是否存在判断\r\n     */\r\n    hasArea() {\r\n        let { panelType, isMultiSelectedEnabled } = this.props;\r\n        return (\r\n            isMultiSelectedEnabled &&\r\n            [\"tree\", \"grid\", \"gridTree\"].indexOf(panelType) != -1\r\n        );\r\n    }\r\n\r\n    /**\r\n     * 数据分组\r\n     */\r\n    dataGrouping(data) {\r\n        let md = new Map();\r\n\r\n        data.map(({ area = \"unknown\", name = \"\", desc = \"\" }, i) => {\r\n            let child = md.get(area) || [];\r\n            child.push({\r\n                name,\r\n                desc,\r\n            });\r\n            md.set(area, child);\r\n        });\r\n\r\n        return md;\r\n    }\r\n    /**\r\n     * 渲染表格行\r\n     */\r\n    renderItems() {\r\n        let data = this.state.data,\r\n            currentIndex = this.state.currentIndex,\r\n            key = this.caheKey,\r\n            dg = this.dataGrouping(data),\r\n            result = [];\r\n        // 数据分组\r\n        // console.log(data, dg);\r\n        dg.forEach((items, area) => {\r\n            let len = items.length;\r\n            items.map(({ name = \"\", desc = \"\" }, i) => {\r\n                result.push(\r\n                    <tr tabIndex={currentIndex === i ? \"0\" : \"-1\"}>\r\n                        {this.hasArea() || i !== 0 ? (\r\n                            \"\"\r\n                        ) : (\r\n                            <td rowSpan={len} className=\"hkq-group\">\r\n                                {this.highLight(area, key)}\r\n                            </td>\r\n                        )}\r\n                        <td>{this.highLight(name, key)}</td>\r\n                        <td>{this.highLight(desc, key)}</td>\r\n                    </tr>,\r\n                );\r\n            });\r\n        });\r\n\r\n        return result;\r\n    }\r\n    /**\r\n     * 查询\r\n     * @param {*} e\r\n     */\r\n    searchHandle(e) {\r\n        if (e.target) {\r\n            e.target.value && (e.target.nextElementSibling.style.display = \"\");\r\n            this.setState({\r\n                data: this.getSearchData(e.target.value),\r\n                currentIndex: 0,\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * move to tabindex\r\n     */\r\n    moveHandle(currentIndex) {\r\n        let prevIndex = this.state.currentIndex,\r\n            panelDOM = this.panel;\r\n        this.setState(\r\n            {\r\n                currentIndex: currentIndex,\r\n                data: this.currentData,\r\n            },\r\n            () => {\r\n                // 聚焦到下一个行\r\n                let next =\r\n                    panelDOM &&\r\n                    panelDOM.querySelector(\r\n                        `tbody tr:nth-child(${currentIndex + 1})`,\r\n                    );\r\n                // next && next.focus();\r\n            },\r\n        );\r\n    }\r\n\r\n    /**\r\n     * 文本框事件\r\n     * // TODO 这里可以考虑把input作为单独的组件抽取  自己管理自己的状态\r\n     */\r\n    focusInputHandle(e) {\r\n        if (e.target && e.target.value) {\r\n            e.target.nextElementSibling.style.display = \"\";\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 文本框事件\r\n     * // TODO 这里可以考虑把input作为单独的组件抽取  自己管理自己的状态\r\n     */\r\n    blurInputHandle(e) {\r\n        if (e.target && !this.enterClose) {\r\n            e.target.nextElementSibling.style.display = \"none\";\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 清除按钮\r\n     */\r\n    clearHandle(e) {\r\n        let i = (this.panel && this.panel.querySelector(\"input\")) || { value: \"\" };\r\n        // 清空当前的搜索关键字\r\n        this.caheKey = \"\";\r\n        i.value = \"\";\r\n        this.setState({\r\n            data: this.getSearchData(\"\"),\r\n            currentIndex: 0,\r\n        });\r\n        this.enterClose = false;\r\n        e.target && (e.target.style.display = \"none\");\r\n    }\r\n    /**\r\n     * 文本框查询按钮\r\n     * @param {*} e\r\n     */\r\n    searchBtnHandle(e) {\r\n        let i = (this.panel && this.panel.querySelector(\"input\")) || { value: \"\" };\r\n        this.setState({\r\n            data: this.getSearchData(i.value),\r\n            currentIndex: 0,\r\n        });\r\n        e.target &&\r\n            e.target.value &&\r\n            (e.target.nextElementSibling.style.display = \"\");\r\n    }\r\n\r\n    /**\r\n     * 展示更多\r\n     */\r\n    moreShow() {\r\n        let { limit } = this.props;\r\n        if (this.bufferData.length > 0) {\r\n            this.currentData = this.currentData.concat(this.bufferData);\r\n            this.bufferData = [];\r\n            this.moveHandle.bind(this)(limit - 1);\r\n        }\r\n    }\r\n\r\n    render() {\r\n        let bufferLen = this.bufferData.length;\r\n        let langJson = this.props.langJson;\r\n        return [\r\n            <div\r\n                className=\"hkq-helper-panel\"\r\n                ref={dom => {\r\n                    this.panel = dom;\r\n                }}\r\n            >\r\n                <HotKeys\r\n                    keyMap={{ more: [\"fn+up\", \"fn+down\", \"up\", \"down\"] }}\r\n                    handlers={{\r\n                        more: () => {\r\n                            this.moreShow();\r\n                        },\r\n                    }}\r\n                    attach={false}\r\n                >\r\n                    <div className=\"hkq-helper-input\">\r\n                        <input\r\n                            placeholder={langJson[\"hk-0004\"]}\r\n                            onChange={this.searchHandle.bind(this)}\r\n                            onFocus={this.focusInputHandle.bind(this)}\r\n                            onBlur={this.blurInputHandle.bind(this)}\r\n                            type=\"text\"\r\n                        />\r\n                        <i\r\n                            className=\"icon iconfont hkq-close\"\r\n                            style={{ display: \"none\" }}\r\n                            onClick={this.clearHandle.bind(this)}\r\n                            onMouseEnter={() => {\r\n                                this.enterClose = true;\r\n                            }}\r\n                            onMouseLeave={() => {\r\n                                this.enterClose = false;\r\n                            }}\r\n                        >\r\n                            &#xe68d;\r\n                        </i>\r\n                        <i\r\n                            className=\"icon iconfont hkq-search\"\r\n                            onClick={this.searchBtnHandle.bind(this)}\r\n                        >\r\n                            &#xe611;\r\n                        </i>\r\n                    </div>\r\n\r\n                    <div className=\"hkq-scroll-header\">\r\n                        <table>\r\n                            <colgroup>\r\n                                {this.hasArea() ? (\r\n                                    \"\"\r\n                                ) : (\r\n                                    <col\r\n                                        style={{\r\n                                            \"width\": \"140px\",\r\n                                            \"min-width\": \"140px\",\r\n                                        }}\r\n                                    />\r\n                                )}\r\n                                <col\r\n                                    style={{\r\n                                        \"width\": \"140px\",\r\n                                        \"min-width\": \"140px\",\r\n                                    }}\r\n                                />\r\n                                <col />\r\n                            </colgroup>\r\n                            <thead>\r\n                                <tr>\r\n                                    {this.hasArea() ? (\r\n                                        \"\"\r\n                                    ) : (\r\n                                        <th>{langJson[\"hk-0005\"]}</th>\r\n                                    )}\r\n                                    <th>{langJson[\"hk-0006\"]}</th>\r\n                                    <th>{langJson[\"hk-0007\"]}</th>\r\n                                </tr>\r\n                            </thead>\r\n                        </table>\r\n                    </div>\r\n                    <div\r\n                        className=\"hkq-scroll-table\"\r\n                        onScroll={() => {\r\n                            this.moreShow();\r\n                        }}\r\n                    >\r\n                        <table>\r\n                            <colgroup>\r\n                                {this.hasArea() ? (\r\n                                    \"\"\r\n                                ) : (\r\n                                    <col\r\n                                        style={{\r\n                                            \"width\": \"140px\",\r\n                                            \"min-width\": \"140px\",\r\n                                        }}\r\n                                    />\r\n                                )}\r\n                                <col\r\n                                    style={{\r\n                                        \"width\": \"140px\",\r\n                                        \"min-width\": \"140px\",\r\n                                    }}\r\n                                />\r\n                                <col />\r\n                            </colgroup>\r\n\r\n                            <tbody>{this.renderItems()}</tbody>\r\n                        </table>\r\n                    </div>\r\n                </HotKeys>\r\n            </div>,\r\n            <button\r\n                className=\"hk-show-more\"\r\n                tabIndex=\"-1\"\r\n                onClick={this.moreShow.bind(this)}\r\n            >\r\n                {bufferLen !== 0 ? langJson[\"hk-0008\"] : langJson[\"hk-0009\"]}\r\n            </button>,\r\n        ];\r\n    }\r\n}\r\n\r\nHotkeyHelperPanel.defaultProps = {\r\n    limit: 14,\r\n    bufferSize: 4,\r\n    data: [],\r\n};\r\n\r\nexport default HotkeyHelperPanel;\r\n","import React, { Component } from \"react\";\r\nimport HotkeyHelperPanel from \"./panel\";\r\nimport { HotKeys, Modal, Tooltip,Icon } from \"@platform/base\";\r\nimport { getMultiLang } from '@platform/api';\r\n\r\nrequire(\"./index.less\");\r\n\r\nclass HotkeyHelper extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            show: false,\r\n            langJson: {},\r\n        };\r\n    }\r\n\r\n    componentWillMount() {\r\n        let callback = (langJson, bool) => {\r\n            if (bool) {\r\n                this.setState({ langJson });\r\n            }\r\n        };\r\n        getMultiLang({ moduleId: \"hotkey_helper\", callback });\r\n    }\r\n\r\n    static defaultProps = {\r\n        className: \"\",\r\n        backdrop: true,\r\n        enabled: true,\r\n    };\r\n\r\n    hideHandle() {\r\n        // TODO  关闭时  聚焦回原来的元素位置\r\n        this.setState({\r\n            show: false,\r\n        });\r\n    }\r\n\r\n    render() {\r\n        let { langJson } = this.state;\r\n        let {\r\n            size,\r\n            className,\r\n            backdrop,\r\n            indexInfo,\r\n            enabled,\r\n            data,\r\n            panelType,\r\n            ...others\r\n        } = this.props;\r\n        let overlay = (\r\n            <div className=\"hkq-helper-content\">{langJson[\"hk-0003\"]}</div>\r\n        );\r\n        return enabled ? (\r\n            <div className=\"hkq-helper-wrapper\">\r\n                <HotKeys\r\n                    display={\"inline-block\"}\r\n                    keyMap={{ open: [\"f3\"] }}\r\n                    handlers={{\r\n                        open: () => {\r\n                            this.setState({\r\n                                show: true,\r\n                            });\r\n                        },\r\n                    }}\r\n                    focused={true}\r\n                />\r\n                <Tooltip\r\n                    placement=\"left\"\r\n                    inverse\r\n                    overlay={overlay}\r\n                    trigger={[\"focus\", \"hover\"]}\r\n                    className=\"hkq-helper-overlay\"\r\n                >\r\n                    <i className=\"hkq-helper-btn\" />\r\n                </Tooltip>\r\n                <Modal\r\n                    ref={Modal => (this.Modal = Modal)}\r\n                    show={this.state.show}\r\n                    onHide={this.hideHandle.bind(this)}\r\n                    size={size}\r\n                    className={\"combine  hkq-helper-modal  \" + className}\r\n                    backdrop={backdrop}\r\n                    indexInfo={indexInfo}\r\n                    {...others}\r\n                    fieldid = \"hkq-helper\"\r\n                >\r\n                    <Modal.Header closeButton={true}>\r\n                        <span className=\"hkq-helper-title\">\r\n                            {langJson[\"hk-0001\"]}\r\n                        </span>\r\n                        <span className=\"hkq-helper-toast\">\r\n                            {langJson[\"hk-0002\"]}\r\n                        </span>\r\n                        <i\r\n                            className=\"hkq-helper-esc\"\r\n                            onClick={this.hideHandle.bind(this)}\r\n                        >\r\n                            <Icon type=\"uf-close\" />\r\n                            &nbsp;(esc)\r\n                        </i>\r\n                    </Modal.Header>\r\n                    <Modal.Body>\r\n                        <HotkeyHelperPanel\r\n                            data={data}\r\n                            panelType={panelType}\r\n                            langJson = {langJson}\r\n                            {...others}\r\n                        />\r\n                    </Modal.Body>\r\n                </Modal>\r\n            </div>\r\n        ) : null;\r\n    }\r\n}\r\n\r\nexport default HotkeyHelper;\r\n","export let CONST_IS_MULTILINGUAL = {};\r\nCONST_IS_MULTILINGUAL.isMul = false;","/**\r\n * Created by wangshhj on 2018/1/18.\r\n */\r\n\r\nimport { warningOnce, isFunction, isWrong, formatAcuracy, isArray } from '@platform/api';\r\nimport { CONST_IS_MULTILINGUAL } from './constant';\r\n// 总配置文件\r\nconst timeTypes = ['datepicker', 'NCTZDatePickerStart', 'NCTZDatePickerEnd', 'timepicker', 'datetimepicker', 'rangepicker', 'datePickerNoTimeZone']\r\nconst displayTypes = ['select', 'radio', 'checkbox', 'refer']\r\nimport { utils } from '@platform/table-core';\r\nconst { getPageSizeStorage } = utils;\r\n\r\nexport function getInsertTableValue(id) {\r\n    return this.state.insertTable[id];\r\n}\r\n\r\n/*\r\n*   获取当前表格勾选所有数据\r\n*   @ mianCord  主表主键字段\r\n*   @childCord  子表主键字段\r\n* */\r\nexport function getInsertTableSelectedValue(id, mainCord, childCord) {\r\n    let table = this.state.insertTable[id];\r\n    let newArr = [];\r\n    let bodyKey = null;\r\n    table.mainCheckObj.checkedArray.map((item, index) => {\r\n\r\n        //先判断主表是否勾选，如果勾选，只返回主表主键即可，如果没有勾选，查看子表是否有数据，是否有勾选项，如果有，返回主表主键+子表主键\r\n        let newObj = {};\r\n        if (table.mainCheckObj.checkedArray[index]) {\r\n            if (table.outerData[index].values.hasOwnProperty(mainCord)) {\r\n                newObj[mainCord] = table.outerData[index].values[mainCord].value;\r\n                newArr.push(newObj);\r\n            } else {\r\n                alert('没有找到主表主键');\r\n            }\r\n        } else {\r\n            bodyKey = table.outerData[index].values.key;\r\n            if (table.childCheckObj.hasOwnProperty(bodyKey)) {\r\n                newObj[childCord] = [];\r\n                table.childCheckObj[bodyKey].checkedArrayChild.map((val, index2) => {\r\n                    if (table.childCheckObj[bodyKey].checkedArrayChild[index2]) {\r\n                        newObj[mainCord] = table.outerData[index].values[mainCord].value;\r\n                        newObj[childCord].push(table.bodyData.data[bodyKey].rows[index2].values[childCord].value);\r\n                    }\r\n                });\r\n                if (newObj[mainCord]) {\r\n                    newArr.push(newObj);\r\n                }\r\n            }\r\n        }\r\n    });\r\n    return newArr;\r\n}\r\n\r\n//获取pageInfo信息\r\nexport function getPageInfo(id) {\r\n    return this.state.insertTable[id].pageInfo;\r\n}\r\n\r\n/*\r\n\"refreshData\": [{\r\n  \"saga_status\": \"1\",\r\n  \"mny\": \"123\",\r\n  \"cbillid\": \"123124\",\r\n  \"ts\": \"2019-10-28 12:23:23\"\r\n }, {\r\n  \"saga_status\": \"1\",\r\n  \"mny\": \"444\",\r\n  \"cbillid\": \"44444\",\r\n  \"ts\": \"2019-10-28 12:23:23\"\r\n }]\r\n */\r\n\r\n/**34\r\n *  根据wensocket推送值，更新表格数据\r\n * refreshData\r\n */\r\n\r\nexport function updateDataByRefresh(tableId, pkname, refreshData, saga_errormesg) {\r\n    let myTable = this.state.insertTable[tableId];\r\n    if (typeof tableId == 'string' && myTable && Array.isArray(refreshData)) {\r\n        let outerData = myTable.outerData,\r\n            bodyData = myTable.bodyData,\r\n            oLen = outerData.length,\r\n            refreshLen = refreshData.length,\r\n            bLen = bodyData && bodyData.data && Object.keys(bodyData.data),\r\n            RD = {};\r\n\r\n        if (!oLen || !refreshLen) return;\r\n        // 数据转型\r\n        refreshData.forEach((item, index) => {\r\n            let obj = {};\r\n            for (const key in item) {\r\n                if (item.hasOwnProperty(key)) {\r\n                    const val = item[key];\r\n                    obj[key] = {\r\n                        value: val.value || val,\r\n                        display: val.display || val\r\n                    };\r\n                }\r\n            }\r\n            RD[item[pkname]] = obj;\r\n        });\r\n        // 外层数据 过滤\r\n        outerData.forEach((item, index) => {\r\n            let values = item.values,\r\n                pkn = values[pkname],\r\n                pkv = pkn && pkn.value,\r\n                rd = RD[pkv];\r\n            if (rd && pkn) {\r\n                // 合并數據\r\n                values = Object.assign(values, rd);\r\n                //有错误信息时，将错误信息数据放表格行\r\n                rd['saga_status'] === '1' && (values.saga_errormesg = saga_errormesg);\r\n            }\r\n        });\r\n        // 内存数据过滤\r\n        if (bLen) {\r\n            bodyData = bodyData.data;\r\n            for (const key in bodyData) {\r\n                if (bodyData.hasOwnProperty(key)) {\r\n                    const element = bodyData[key];\r\n                    element.rows.forEach((item, index) => {\r\n                        let values = item.values,\r\n                            pkn = values[pkname],\r\n                            pkv = pkn && pkn.value,\r\n                            rd = RD[pkv];\r\n                        if (rd && pkn) {\r\n                            // 合并數據\r\n                            values = Object.assign(values, rd);\r\n                            //有错误信息时，将错误信息数据放表格行\r\n                            rd['saga_status'] === '1' && (values.saga_errormesg = saga_errormesg);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        this.setState({ insertTable: this.state.insertTable });\r\n    }\r\n}\r\n\r\n/*\r\n*   更新外层表格数据\r\n*   @ newData  外层表格数据\r\n*   @ rowId  主表主键字段\r\n* */\r\nexport function setInsertTableValue(id, newData, rowId, reset) {\r\n    CONST_IS_MULTILINGUAL.isMul = false;\r\n    let currentTable = this.state.insertTable[id];\r\n\r\n    if (newData.hasOwnProperty('pageInfo') && !isWrong(newData.pageInfo)) {\r\n        //前端重置后端返回的页码，初次为0，应该改为1，有问题在看看\r\n        newData.pageInfo.pageIndex === '0' ? (newData.pageInfo.pageIndex = '1') : '';\r\n        //this.myTable[moduleId].state.table.pageInfo = data.pageInfo;\r\n    } else {\r\n        let prePageSize = getPageSizeStorage(this.state.meta, id);\r\n        if (newData.rows.length > 0) {\r\n            newData.pageInfo = currentTable\r\n                ? currentTable.pageInfo\r\n                : {\r\n                    pageSize: prePageSize,\r\n                    pageIndex: '1'\r\n                };\r\n        } else {\r\n            newData.pageInfo = {\r\n                pageSize: currentTable ? currentTable.pageInfo.pageSize : prePageSize,\r\n                pageIndex: '1'\r\n            };\r\n        }\r\n    }\r\n\r\n    if (reset) {\r\n        newData.pageInfo.pageIndex = '1';\r\n    }\r\n\r\n    if (newData.hasOwnProperty('allpks')) {\r\n        //this.myTable[moduleId].state.table.allpks = data.allpks;\r\n        // 存储到本地缓存中，卡片翻页需要用\r\n        // CacheTools.set(\"allpks\", data.allpks);\r\n    } else {\r\n        if (newData.rows.length > 0) {\r\n            newData.allpks = currentTable\r\n                ? currentTable.allpks\r\n                : [];\r\n        } else {\r\n            newData.allpks = [];\r\n        }\r\n    }\r\n\r\n    // expandedRowKeys\r\n    newData.rows.map((val, index) => {\r\n        if (!val.rowId && val.rowId !== 0) {\r\n            // val.rowId = new Date().getTime() + index;\r\n            if (!val.values[rowId]) {\r\n                console.error('setInsertTableValue方法中，rowId没找到');\r\n                return false;\r\n            }\r\n            val.rowId = val.values[rowId].value;\r\n        }\r\n        val.values.key = val.rowId;\r\n        val.values.rowIndex = index;\r\n    });\r\n\r\n    this.state.insertTable[id] = {\r\n        outerData: newData.rows,\r\n        pageInfo: newData.pageInfo,\r\n        allpks: newData.allpks,\r\n        firstTime: true,\r\n        expandedRowKeys: []\r\n    };\r\n\r\n    this.setState({\r\n        insertTable: this.state.insertTable\r\n    });\r\n}\r\n\r\n/*\r\n*   设置展开的子表数据\r\n*   @ record  主表当前行信息\r\n*   @ column  子表列模板信息\r\n*   @ datas  子表数据\r\n*   @ rowId  子表行 主键字段\r\n* */\r\nexport function setChildTableData(id, record, datas, rowId) {\r\n    let table = this.state.insertTable[id];\r\n    let checkedArrayChild = [];//子表每行勾选状态\r\n    let key = record.key;\r\n    let rowIndex = record.rowIndex;\r\n    datas.rows.map((val, index) => {\r\n        if (!val.rowId && val.rowId !== 0) {\r\n            // val.rowId = new Date().getTime() + index;\r\n            if (!val.values[rowId]) {\r\n                console.error('setChildTableData方法，没有找到rowId');\r\n                return false;\r\n            }\r\n            val.rowId = val.values[rowId].value;\r\n        }\r\n        val.values.key = val.rowId;\r\n        if (table.mainCheckObj.checkedArray[rowIndex]) {\r\n            checkedArrayChild.push(true);\r\n        } else {\r\n            checkedArrayChild.push(false);\r\n        }\r\n    });\r\n\r\n    table.bodyData.data[key] = datas;\r\n\r\n    // 根据主表当前行是否勾选，设置子表复选框 勾选\r\n    if (!table.childCheckObj.hasOwnProperty(key)) {\r\n        table.childCheckObj[key] = {\r\n            checkedAllChild: table.mainCheckObj.checkedArray[rowIndex],\r\n            checkedArrayChild\r\n        };\r\n    }\r\n\r\n    this.setState({\r\n        insertTable: this.state.insertTable\r\n    });\r\n}\r\n\r\n/**\r\n * 获取一列合计\r\n *\r\n * @export\r\n * @param {*} column \r\n * @param {*} source\r\n * @returns  res  为需要合计的列和值k v 集合\r\n */\r\nexport function getTotal(column, source) {\r\n    if (Object.prototype.toString.call(source) !== '[object Array]') {\r\n        console.warn('源数据类型不为数组');\r\n        return false;\r\n    }\r\n    if (Object.prototype.toString.call(column) !== '[object Array]') {\r\n        console.warn('模板配置列数据类型不为数组');\r\n        return false;\r\n    }\r\n    // 获取需要合计的属性 并储存\r\n    const fileds = new Set();\r\n    // col.hasOwnProperty('istotal')\r\n    column.map(col => {\r\n        if (col.visible && col.istotal) {\r\n            fileds.add(col.key);\r\n        }\r\n    });\r\n\r\n    // 获取合计属性值\r\n    const values = new Map();\r\n    fileds.forEach((filed) => {\r\n        if (!values.has(filed)) {\r\n            values.set(filed, []);\r\n        }\r\n        source.map(node => {\r\n            if (node.hasOwnProperty(filed) && node[filed].renderValue) {\r\n                values.get(filed).push(node[filed].renderValue.replace(/,/g, ''));\r\n            };\r\n        });\r\n    });\r\n\r\n    const res = {};\r\n    // 进行加和计算\r\n    values.forEach((counts, filed) => {\r\n\r\n        let avg = 0;\r\n        // 计算counts数组最长精度，如果位数不够需要补零\r\n        const countPre = precision(counts);\r\n        counts.map(v => {\r\n            avg += Number(v);\r\n        });\r\n        let stringTypeOfAvg = String(avg);\r\n\r\n        res[filed] = formatAcuracy(stringTypeOfAvg, countPre);\r\n    });\r\n\r\n    return res;\r\n\r\n}\r\n\r\nfunction precision(count) {\r\n    // 如果是数组的话就获取最长精度\r\n    if (Object.prototype.toString.call(count) === '[object Array]') {\r\n        const precs = count.map(c => {\r\n            if (String(c).split('.')[1] === undefined) {\r\n                return 0;\r\n            } else {\r\n                return String(c).split('.')[1].length;\r\n            }\r\n\r\n        });\r\n\r\n        return Math.max.apply(null, precs);\r\n\r\n    } else {\r\n        if (String(count).split('.')[1]) {\r\n            return String(count).split('.')[1].length;\r\n        } else {\r\n            return 0;\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * liumings 获取选中的行\r\n * @param {*} moduleId 表格id\r\n * mofify\r\n */\r\nexport function getCheckedRows(moduleId) {\r\n    let insetTable = this.state.insertTable[moduleId];\r\n    if (typeof moduleId == 'string' && insetTable) {\r\n        let consArr = [];\r\n        if (insetTable.mainCheckObj && isArray(insetTable.mainCheckObj.checkedArray)) {\r\n            insetTable.mainCheckObj.checkedArray.map((item, index) => {\r\n                if (item) {\r\n                    consArr.push({\r\n                        data: insetTable.outerData[index],\r\n                        index\r\n                    });\r\n                }\r\n            });\r\n        }\r\n        return consArr;\r\n    }\r\n    warningOnce(false, `所操作的表格中无ID为${moduleId}的数据`);\r\n    return false;\r\n\r\n}\r\n\r\nexport function deleteTableRowsByIndex(moduleId, index) {\r\n    let insertTable = this.state.insertTable[moduleId];\r\n    if (typeof moduleId == 'string' && insertTable) {\r\n        if (typeof index == 'number' || isArray(index)) {\r\n            if (typeof index == 'number') {\r\n                index = [index];\r\n            }\r\n            let arr = JSON.parse(JSON.stringify(insertTable.outerData));\r\n            let newdata = [];\r\n            newdata = arr.filter((item, i) => {\r\n                return !index.includes(i);\r\n            });\r\n            // debugger\r\n            insertTable.outerData = newdata;\r\n            insertTable.mainCheckObj.data = newdata;\r\n            let checkarr = insertTable.mainCheckObj.checkedArray.concat();\r\n            for (let i = 0; i < checkarr.length; i++) {\r\n                if (index.includes(i)) {\r\n                    checkarr.splice(i, 1);\r\n                    i--;\r\n                }\r\n            }\r\n            insertTable.mainCheckObj.checkedArray = checkarr;\r\n\r\n            this.setState({\r\n                insertTable: this.state.insertTable\r\n            });\r\n            console.log(insertTable);\r\n            return false;\r\n        } else {\r\n            warningOnce(typeof rowId == 'string', '传入的第二个参数为数字，或数字的数组');\r\n            return false;\r\n        }\r\n    }\r\n    warningOnce(false, `所操作的表格中无ID为${tableId}的数据`);\r\n    return false;\r\n}\r\n\r\n\r\nexport function getMultiChildChangeWidth(width, isMultiChild) {\r\n    if (isMultiChild && width) {\r\n        this.setState({\r\n            fixedWidth: width\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * 点击表头部排序图标排序对列进行排序\r\n * @param {*} val 被排序的每一行的详细数据\r\n * @param {*Object} sortType: \r\n *         { mode:'single', backSource:false ,sortFun:(a)=> {console.log(a)}}\r\n*                   mode：值为multiple'(多列排序) 或'single'(单列排序)\r\n                   backSource：false是前端排序，值为true为后端排序,默认false\r\n                   sortFun：后端排序的回调函数\r\n * @param {*Function} customSortRule 自定义排序规则\r\n* 备注：转单内部使用\r\n */\r\nexport function sortColumn(val, sortType, customSortRule) {\r\n    let attrcode = val.attrcode,\r\n        valType = val.itemtype;\r\n    if (!isFunction(customSortRule)) {\r\n        switch (true) {\r\n            case valType === 'number':\r\n                val.sorter = (front, behind) => {\r\n                    const frontValue = front[attrcode] ? front[attrcode].value || '0' : '0';\r\n                    const behindValue = behind[attrcode] ? behind[attrcode].value || '0' : '0';\r\n                    return Number(frontValue) - Number(behindValue);\r\n                };\r\n                break;\r\n            case timeTypes.includes(valType):\r\n                val.sorter = (front, behind) => {\r\n                    const frontValue = front[attrcode] ? front[attrcode].value || '0' : '0';\r\n                    const behindValue = behind[attrcode] ? behind[attrcode].value || '0' : '0';\r\n                    return Number(new Date(frontValue).getTime()) - Number(new Date(behindValue).getTime());\r\n                };\r\n                break;\r\n            case displayTypes.includes(valType):\r\n                val.sorter = (front, behind) => {\r\n                    const frontValue = String(front[attrcode] ? front[attrcode].display || '' : '');\r\n                    const behindValue = String(behind[attrcode] ? behind[attrcode].display || '' : '');\r\n                    // if (behindValue > frontValue) {\r\n                    //     return -1;\r\n                    // } else if (behindValue < frontValue) {\r\n                    //     return 1;\r\n                    // } else {\r\n                    //     return 0;\r\n                    // }\r\n                    return frontValue.localeCompare(behindValue);\r\n                };\r\n                break;\r\n            case valType === 'label':\r\n                val.sorter = (front, behind) => {\r\n                    const fvalue = front[attrcode] ? front[attrcode].value || '' : '';\r\n                    const fdisplay = front[attrcode] ? front[attrcode].display : '';\r\n                    const bvalue = behind[attrcode] ? behind[attrcode].value || '' : '';\r\n                    const bdisplay = behind[attrcode] ? behind[attrcode].display : '';\r\n                    const frontValue = String(isNullOrVoid(fdisplay) ? fvalue : fdisplay);\r\n                    const behindValue = String(isNullOrVoid(bdisplay) ? bvalue : bdisplay);\r\n                    // if (behindValue > frontValue) {\r\n                    //     return -1;\r\n                    // } else if (behindValue < frontValue) {\r\n                    //     return 1;\r\n                    // } else {\r\n                    //     return 0;\r\n                    // }\r\n                    return frontValue.localeCompare(behindValue);\r\n                };\r\n                break;\r\n            case attrcode !== 'numberindex' && attrcode !== 'opr':\r\n                val.sorter = (front, behind) => {\r\n                    const frontValue = String(front[attrcode] ? front[attrcode].value || '' : '');\r\n                    const behindValue = String(behind[attrcode] ? behind[attrcode].value || '' : '');\r\n                    // if (behindValue > frontValue) {\r\n                    //     return -1;\r\n                    // } else if (behindValue < frontValue) {\r\n                    //     return 1;\r\n                    // } else {\r\n                    //     return 0;\r\n                    // }\r\n                    return frontValue.localeCompare(behindValue);\r\n                };\r\n                break;\r\n        }\r\n    } else {\r\n        customSortRule(val);\r\n    }\r\n    /**\r\n     * columnInfo:排序的列的模板信息\r\n     * type:排序的类型\r\n     */\r\n    val.sorterClick = (columnInfo, type) => { //排序的回调函数\r\n        if (sortType && sortType.backSource === true && isFunction(sortType.sortFun)) { //后端排序\r\n            sortType.sortFun(columnInfo, type);\r\n        }\r\n    };\r\n}\r\n\r\n//设置行勾选状态 \r\n//id string\r\n//index是要设置的行的数组 array\r\n//ischeck是设置是否勾选 bool\r\nexport function changeCheck(id, index, ischeck) {\r\n    let currentTable = this.state.insertTable[id];\r\n    let allFlag = false;\r\n    let mainCheckObj = currentTable.mainCheckObj;\r\n\r\n    index.map(i => {\r\n        mainCheckObj.checkedArray[i] = ischeck;\r\n    });\r\n\r\n\r\n    for (var i = 0; i < mainCheckObj.checkedArray.length; i++) {\r\n        if (!mainCheckObj.checkedArray[i]) {\r\n            allFlag = false;\r\n            break;\r\n        } else {\r\n            allFlag = true;\r\n        }\r\n    }\r\n\r\n    mainCheckObj.checkedAll = allFlag;\r\n\r\n    let data = mainCheckObj.data;\r\n    index.map(i => {\r\n        let thisKey = data[i].values.key;\r\n        //设置子表勾选\r\n        if (\r\n            JSON.stringify(currentTable.childCheckObj) !== '{}' &&\r\n            currentTable.childCheckObj.hasOwnProperty(thisKey)\r\n        ) {\r\n            currentTable.childCheckObj[thisKey].checkedAllChild = ischeck;\r\n            currentTable.childCheckObj[thisKey].checkedArrayChild.map((val, ind) => {\r\n                currentTable.childCheckObj[thisKey].checkedArrayChild[ind] = ischeck;\r\n            });\r\n        }\r\n    });\r\n\r\n    this.setState({ insertTable: this.state.insertTable });\r\n}","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport classnames from 'classnames';\r\nimport { Tooltip as NCTooltip } from '@platform/base';\r\n\r\nclass ToolCell extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            tipStatus: false\r\n        };\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.cellDom = null;\r\n    }\r\n\r\n    handleMouseOver = () => {\r\n        if (this.cellDom) {\r\n            let { tipStatus } = this.state;\r\n            if (this.cellDom.scrollWidth > this.cellDom.clientWidth && tipStatus === false) {\r\n                this.setState({ tipStatus: true });\r\n            }\r\n            if (this.cellDom.scrollWidth <= this.cellDom.clientWidth && tipStatus === true) {\r\n                this.setState({ tipStatus: false });\r\n            }\r\n        }\r\n    };\r\n\r\n    render() {\r\n        let { context, multipleRowCell, isLineAll } = this.props;\r\n\r\n        return (\r\n            <NCTooltip\r\n                onMouseOver={this.handleMouseOver}\r\n                placement=\"top\"\r\n                overlay={this.state.tipStatus ? context : ''}\r\n                className=\"tooltip-word-color\"\r\n                delay={1}\r\n                inverse\r\n            >\r\n                <span\r\n                    className={classnames(\r\n                        { textLineAll: !multipleRowCell },\r\n                        { noTextLineAll: !isLineAll }\r\n                    )}\r\n                    ref={dom => {\r\n                        this.cellDom = ReactDOM.findDOMNode(dom);\r\n                    }}\r\n                >\r\n                    {context ? context : <span>&nbsp;</span>}\r\n                </span>\r\n            </NCTooltip>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ToolCell;\r\n","/*\r\n * @Description: In User Settings Edit\r\n * @Author: your name\r\n * @Date: 2019-08-12 10:09:01\r\n * @LastEditTime: 2021-03-05 17:17:49\r\n * @LastEditors: bbq\r\n */\r\n/**\r\n * Created by wangshhj on 2018/1/16.\r\n */\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport classnames from 'classnames';\r\nimport { Col, Table as NCTable, Pagination, Checkbox, Select as NCSelect, ErrorPop } from '@platform/base'\r\nimport { isFunction, changeTime, formatAcuracy, getMultiLang, getSysFieldid, formatDatetime, formatNumber } from '@platform/api'\r\nimport { lib, utils } from '@platform/table-core';\r\nimport { getTotal, sortColumn } from './methods';\r\nconst { setPageSizeStorage, getPageSizeStorage } = utils;\r\n\r\nimport { CONST_IS_MULTILINGUAL } from './constant';\r\nimport ToolCell from './toolCell';\r\nconst { total } = lib;\r\nconst defaultColor = ['#111111', '#555555', '#111', '#555'];\r\nrequire('./insertTable.less');\r\n\r\nconst MetaTable = NCTable.SortTable;\r\nconst ComplexTable = total(MetaTable)\r\n//缓存全局多语\r\nlet varMultil;\r\n\r\n// 计算主表表体高度\r\nlet tableHeight = 0;\r\nconst screenHeight = window.screen.width;\r\n\r\nif (screenHeight <= 1919 > 1440) {\r\n    tableHeight = 48 * 10 + 'px';\r\n} else if (screenHeight > 1919) {\r\n    tableHeight = 56 * 10 + 'px';\r\n} else {\r\n    tableHeight = 40 * 10 + 'px';\r\n}\r\n\r\nlet inserttableDom;\r\n\r\n// currentTable.tableHeight = 0;\r\nlet NCOption = NCSelect.Option;\r\nlet bodyKey = null; //当前行的key\r\n\r\nconst defaultProps = {\r\n    //复选框\r\n    prefixCls: 'bee-table',\r\n    multiSelect: {\r\n        type: 'checkbox',\r\n        param: 'key',\r\n    },\r\n};\r\n\r\n//  检测所有子表是否有选中项\r\nconst checkChildSelected = data => {\r\n    let res = false;\r\n    for (let key in data) {\r\n        let item = data[key];\r\n        if (item.checkedAllChild) {\r\n            res = true;\r\n            break;\r\n        } else {\r\n            let child = item.checkedArrayChild;\r\n            let len = child.length;\r\n            for (let i = 0; i < len; i++) {\r\n                if (child[i]) {\r\n                    res = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return res;\r\n};\r\n\r\n//  检测主表是否有选中项\r\nconst checkOutTableSelected = data => {\r\n    let i = data.length;\r\n    let res = false;\r\n    while (i--) {\r\n        if (data[i]) {\r\n            res = true;\r\n            break;\r\n        }\r\n    }\r\n    return res;\r\n};\r\n\r\n//  检测主表是否全选\r\nconst checkOutTableAllSelected = Obj => {\r\n    let out = Obj.mainCheckObj;\r\n    let len = out.checkedArray.length;\r\n    out.checkedAll = true;\r\n    while (len--) {\r\n        if (!out.checkedArray[len]) {\r\n            out.checkedAll = false;\r\n            break;\r\n        }\r\n    }\r\n};\r\n\r\nexport function createInsertTable({\r\n    headTableId, // 外层主表表格的组件id\r\n    bodyTableId, // 子表表格的组件id\r\n    setTableBodyData, // 设置子表表格数据\r\n    pageIndexChange,\r\n    pageSizeChange,\r\n    rowCheckChildChange,\r\n    onAllCheckChangeEve, // 全选事件\r\n    rowCheckChange, // 行勾选事件\r\n    comType, // 嵌套表格类型。'normal':普通，不带复选框。hasCheckBox:只有外层表格带复选框。hasCheckBox_child:内外表格都带复选框\r\n    needIndex = true, // 默认显示序号，如不需要，传false\r\n    childNeedIndex = false,\r\n    mockRadio = false,\r\n    isDrag = true,\r\n    multipleRowCell = false,\r\n    adaptionHeight = false,\r\n    inModal = false,\r\n    customSortRule, //自定义排序规则\r\n    // cancelCustomRightMenu = false,\r\n    fieldid,\r\n    insertTableHeight = false,\r\n}) {\r\n    if (!this.state.meta) {\r\n        return false;\r\n    }\r\n    if (\r\n        !this.state.meta.hasOwnProperty(headTableId) ||\r\n        !this.state.meta[headTableId]\r\n    ) {\r\n        return false;\r\n    }\r\n    if (!this.state.insertTable[headTableId]) {\r\n        return false;\r\n    }\r\n    //默认分页信息\r\n    this.defPageInfo = {\r\n        pageSize: getPageSizeStorage(this.state.meta, headTableId),\r\n        pageIndex: 1,\r\n        totalPageIndex: 5,\r\n    };\r\n\r\n    const meta = this.state.meta;\r\n\r\n    function adddDataIndex(colums) {\r\n        colums.map(col => {\r\n            col.dataIndex = col.attrcode;\r\n        });\r\n    }\r\n\r\n    adddDataIndex(meta[headTableId].items);\r\n\r\n    const sortTypeHead = { //排序的类型 Object\r\n        mode: 'single', //'multiple'(多列排序) 或'single'(单列排序)(如果前端排序的时候想多列排序，对象里就穿这个字段就可以了),\r\n        backSource: false, //false是前端排序，值为true为后端排序,默认false\r\n        sortFun: (sortParam, sortData) => {\r\n            let sortObj = {};\r\n            let mainCheckObj = this.state.insertTable[headTableId].mainCheckObj || {}\r\n            let rows = this.state.insertTable[headTableId].outerData || []\r\n            let sortRows = []\r\n            let colums = meta[headTableId].items;\r\n\r\n            sortParam.forEach(item => {\r\n                sortObj[item.field] = item;\r\n            });\r\n\r\n            colums.forEach(item => {\r\n                //保存返回的column状态，没有则终止order状态\r\n                if (sortObj[item.attrcode]) {\r\n                    item.order = sortObj[item.attrcode].order;\r\n                    item.orderNum = sortObj[item.attrcode].orderNum;\r\n                } else {\r\n                    item.order = 'flatscend';\r\n                    item.orderNum = '';\r\n                }\r\n            });\r\n\r\n            sortData.forEach(el => {\r\n                rows.forEach(row => {\r\n                    if (el.key === row.values.key) {\r\n                        sortRows.push(row);\r\n                    }\r\n                });\r\n            });\r\n            this.state.insertTable[headTableId].outerData = sortRows\r\n            mainCheckObj.data = sortRows\r\n        },\r\n    };\r\n\r\n    // const getColSetConfig = () => {\r\n    //   //const appcode = pageTo.getAppCode();\r\n    //   //const pagecode = pageTo.getPageCode();\r\n    //   const areaCode = headTableId;\r\n    //   let areaCodeMeta = this.state.meta[areaCode] || {};\r\n    //   const appcode = areaCodeMeta.appcode || pageTo.getAppCode();\r\n    //   const pagecode = areaCodeMeta.pagecode || pageTo.getPageCode();\r\n    //   const areaId = areaCodeMeta.oid;\r\n    //   const code = areaCodeMeta.templateCode || this.state.meta.code;\r\n    //   const pageId = areaCodeMeta.pageid || this.state.meta.pageid;\r\n    //   return { appcode, pagecode, areaCode, areaId, code, pageId };\r\n    // };\r\n\r\n    let currentTable = this.state.insertTable[headTableId];\r\n\r\n    currentTable.tableHeight = tableHeight;\r\n    console.log(\r\n        '子表表格的组件id:',\r\n        headTableId,\r\n        ';子表表格的组件id:',\r\n        bodyTableId,\r\n    );\r\n\r\n    // 如果是自适应的就进行高度计算\r\n    // if (adaptionHeight) {\r\n\r\n    //   if (inserttableDom) {\r\n    //     // 普通情况\r\n    //     let tableBody = inserttableDom.querySelectorAll('.u-table-body')[0];\r\n    //     if (tableBody) {\r\n    //       const tableHeight =\r\n    //         document.body.offsetHeight - inserttableDom.getBoundingClientRect().bottom + tableBody.offsetHeight;\r\n    //       tableBody = null;\r\n    //       currentTable.tableHeight = tableHeight;\r\n\r\n    //     } else {\r\n    //       const tableHeight = document.body.offsetHeight - inserttableDom.getBoundingClientRect().bottom;\r\n    //       tableBody = null;\r\n    //       currentTable.tableHeight = tableHeight;\r\n    //     }\r\n    //   }\r\n    // }\r\n\r\n    function getExpandTableHeight(data, isTotal, wrapper, tableBody = false) {\r\n        wrapper = wrapper || document;\r\n        let expandTableHeight = 0;\r\n        if (data && data.length) {\r\n            let tableHead = wrapper.querySelector('.u-table-thead');\r\n            let tbody = wrapper.querySelector('.u-table-tbody');\r\n            let tableRow = tbody.querySelectorAll('.u-table-row')[0];\r\n            let theadHeight = tableHead && tableHead.getBoundingClientRect().height;\r\n            let trowHeight = tableRow && tableRow.getBoundingClientRect().height;\r\n            let TotalRowHeight = isTotal ? 45 : 0;//合计行高度\r\n            let BodyMinHeight = 30;//UE定的表体最小高度为55\r\n            let paddingHeight = 10;//上下padding为6\r\n            if (tableRow && theadHeight) {\r\n                let baseHeight = theadHeight + paddingHeight + TotalRowHeight;\r\n                // let baseHeight = theadHeight + TotalRowHeight;\r\n                if (data.length < 11) { //最多展示10行\r\n                    if (data.length * trowHeight < BodyMinHeight) {\r\n                        expandTableHeight = BodyMinHeight + baseHeight;\r\n                    } else {\r\n                        expandTableHeight = data.length * trowHeight + baseHeight;\r\n                    }\r\n                } else {\r\n                    expandTableHeight = 10 * trowHeight + baseHeight;\r\n                }\r\n                if (tableBody) {\r\n                    return data.length > 9 ? (expandTableHeight - baseHeight) : '';\r\n                }\r\n                return expandTableHeight;\r\n            } else {\r\n                return 0;\r\n            }\r\n        }\r\n        if (data && data.length == 0 && isTotal) {\r\n            return 110;\r\n        }\r\n\r\n        if (data && data.length == 0 && !isTotal) {\r\n            return 65;\r\n        }\r\n    }\r\n\r\n    // 订阅查询区高度回调\r\n    // function handlePubSub(msg, data) {\r\n    //   if (data) {\r\n    //     if (inserttableDom) {\r\n    //       let tableBody = inserttableDom.querySelectorAll('.u-table-body')[0];\r\n    //       if (tableBody) {\r\n    //         const tableHeight =\r\n    //           document.body.offsetHeight - inserttableDom.getBoundingClientRect().bottom + tableBody.offsetHeight;\r\n    //         tableBody = null;\r\n    //         currentTable.tableHeight = tableHeight;\r\n    //       } else {\r\n    //         const tableHeight = document.body.offsetHeight - inserttableDom.getBoundingClientRect().bottom;\r\n    //         tableBody = null;\r\n    //         currentTable.tableHeight = tableHeight;\r\n    //       }\r\n    //     }\r\n    //   }\r\n    //   setTimeout(() => {\r\n    //     PubSub.unsubscribe(subscribeToken);\r\n    //   }, 5000);\r\n    // };\r\n\r\n    currentTable.multilingual = varMultil;\r\n\r\n    // const _that = this;\r\n\r\n    //调用多语\r\n    const callback = json => {\r\n        if (CONST_IS_MULTILINGUAL.isMul) return;\r\n        currentTable.multilingual = json;\r\n        varMultil = json;\r\n        this.setState(\r\n            { insertTable: this.state.insertTable },\r\n            () => {\r\n                CONST_IS_MULTILINGUAL.isMul = true;\r\n            },\r\n        );\r\n    };\r\n\r\n    getMultiLang({ moduleId: 'containers_insert_tree_table', callback });\r\n\r\n    currentTable.fatherTable = {};\r\n    Object.defineProperty(currentTable.fatherTable, 'top', {\r\n        set(newVal) {\r\n            currentTable.fatherTable.height =\r\n                document.body.clientHeight - newVal - 100;\r\n        },\r\n    });\r\n\r\n    let data = currentTable.outerData;\r\n    let pageInfo = Object.assign({}, this.defPageInfo, currentTable.pageInfo);\r\n    currentTable.pageInfo = pageInfo;\r\n    let pageSize = pageInfo.pageSize;\r\n    let pageIndex = pageInfo.pageIndex;\r\n    // let totalPage = Math.ceil(pageInfo.total / pageSize);\r\n\r\n    this.setTableBodyData = setTableBodyData; //设置内嵌表格数据\r\n    this.pageIndexChange = pageIndexChange; //切换分页\r\n    this.pageSizeChange = pageSizeChange; //切换每页显示条数\r\n\r\n    let columns = this.state.meta[headTableId].items.filter(e => e.visible);\r\n    let bodyColumn = this.state.meta[bodyTableId].items.filter(e => e.visible);\r\n    let headPaginationInfo = this.state.meta[headTableId].pagination;\r\n    // let bodyPagination = this.state.meta[bodyTableId].pagination;\r\n\r\n    // 分割分页id\r\n    const splitPks = (data, pageIndex, pageSize) => {\r\n        let pks = [];\r\n        let index = Number(pageIndex);\r\n        let size = Number(pageSize);\r\n        let start = (index - 1) * size;\r\n        for (let i = start; i < start + size; i++) {\r\n            if (data[i]) {\r\n                pks.push(data[i]);\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n        return pks;\r\n    };\r\n\r\n    //切换分页\r\n    const pageIndexChanges = eventKey => {\r\n        let pks;\r\n        currentTable.pageInfo.pageIndex = eventKey;\r\n        if (isFunction(this.pageIndexChange)) {\r\n            if (currentTable.allpks) {\r\n                pks = splitPks(\r\n                    currentTable.allpks,\r\n                    currentTable.pageInfo.pageIndex,\r\n                    currentTable.pageInfo.pageSize,\r\n                );\r\n            }\r\n            data = this.pageIndexChange(eventKey, pks);\r\n        }\r\n\r\n        pageIndex = eventKey;\r\n        this.setState(this.state);\r\n    };\r\n\r\n    //每页显示条数\r\n    const pageSizeSelect = val => {\r\n        let total = currentTable.pageInfo.total;\r\n        currentTable.pageInfo.pageSize = val;\r\n        setPageSizeStorage(this.state.meta, headTableId, val);\r\n        currentTable.pageInfo.pageIndex = 1;\r\n        currentTable.pageInfo.totalPage = Math.ceil(\r\n            total / currentTable.pageInfo.pageSize,\r\n        );\r\n\r\n\r\n        if (isFunction(pageSizeChange)) {\r\n            let pks;\r\n            if (currentTable.allpks) {\r\n                pks = splitPks(\r\n                    currentTable.allpks,\r\n                    currentTable.pageInfo.pageIndex,\r\n                    currentTable.pageInfo.pageSize,\r\n                );\r\n            }\r\n\r\n            data = this.pageSizeChange(val, pks);\r\n        }\r\n        pageSize = val;\r\n        this.setState(this.state);\r\n    };\r\n\r\n    //===========================子表添加复选框===========================================\r\n\r\n    //子表复选框全选\r\n    // const onAllCheckChangeChild = (record, index) => {\r\n    //   let checkedArray = [];\r\n    //   let mainCheckObj = currentTable.childCheckObj[record.key];\r\n    //   for (var i = 0; i < mainCheckObj.checkedArrayChild.length; i++) {\r\n    //     checkedArray[i] = !mainCheckObj.checkedAllChild;\r\n    //   }\r\n    //   currentTable.mainCheckObj.checkedArray[\r\n    //     index\r\n    //   ] = mainCheckObj.checkedAllChild = !mainCheckObj.checkedAllChild;\r\n    //   mainCheckObj.checkedArrayChild = checkedArray;\r\n    //   checkOutTableAllSelected(currentTable);\r\n\r\n    //   this.setState(this.state);\r\n\r\n    //   // onAllCheckChangeEve(mainCheckObj.checkedAllChild,currentTable.mainCheckObj.data,currentTable.bodyData)\r\n    // };\r\n\r\n    //子表复选框单个勾选\r\n    const onCheckboxChangeChild = (\r\n        text,\r\n        record,\r\n        index,\r\n        parents,\r\n        parentsIndex,\r\n    ) => {\r\n        let allFlag = false;\r\n        let childCheckObj = currentTable.childCheckObj[parents.key];\r\n        childCheckObj.checkedArrayChild[index] = !childCheckObj.checkedArrayChild[\r\n            index\r\n        ];\r\n\r\n        for (var i = 0; i < childCheckObj.checkedArrayChild.length; i++) {\r\n            if (!childCheckObj.checkedArrayChild[i]) {\r\n                allFlag = false;\r\n                break;\r\n            } else {\r\n                allFlag = true;\r\n            }\r\n        }\r\n        currentTable.mainCheckObj.checkedArray[\r\n            parentsIndex\r\n        ] = childCheckObj.checkedAllChild = allFlag;\r\n        checkOutTableAllSelected(currentTable);\r\n        if (typeof rowCheckChildChange === 'function') {\r\n            rowCheckChildChange(\r\n                childCheckObj.checkedArrayChild[index],\r\n                record,\r\n                currentTable,\r\n            );\r\n        }\r\n        this.setState(this.state);\r\n        // rowCheckChange(checkedArrayChild[index],currentTable.bodyData.data[bodyKey])\r\n    };\r\n\r\n    //子表  表格和复选框列组合到一起\r\n    const renderColumnsMultiSelectChild = (columns, records, indexs) => {\r\n        // if(!currentTable.childCheckObj.hasOwnProperty(bodyKey)){\r\n        //     return false\r\n        // }\r\n        let { checkedArrayChild } = currentTable.childCheckObj[\r\n            records.key\r\n        ];\r\n        let { multiSelect } = defaultProps;\r\n\r\n        let indexCol = [\r\n            {\r\n                label:\r\n                    currentTable.multilingual &&\r\n                    currentTable.multilingual['insert-tree-table-003'],\r\n                attrcode: 'indexCol',\r\n                dataIndex: 'indexCol',\r\n                width: '60px',\r\n                className: 'nunberindex',\r\n                title:\r\n                    currentTable.multilingual &&\r\n                    currentTable.multilingual['insert-tree-table-003'],\r\n                render: (text, record2, index) => {\r\n                    return <span>{index + 1}</span>;\r\n                },\r\n            },\r\n        ]; // 添加序号列\r\n        let newColumn = columns;\r\n        if (needIndex) {\r\n            newColumn = indexCol.concat(newColumn);\r\n        }\r\n\r\n        // let indeterminate_bool = false;\r\n        if (multiSelect && multiSelect.type === 'checkbox') {\r\n            // let i = checkedArrayChild.length;\r\n            // while (i--) {\r\n            //   if (checkedArrayChild[i]) {\r\n            //     indeterminate_bool = true;\r\n            //     break;\r\n            //   }\r\n            // }\r\n            let defaultColumns = [\r\n                {\r\n                    label: '',\r\n                    attrcode: 'innerCheckbox',\r\n                    dataIndex: 'checkbox',\r\n                    width: '120px',\r\n                    render: (text, record, index) => {\r\n                        // Socket改造\r\n                        //let { billpkname, billtype, errorViewType } = this.nativeSocketBillInfo;\r\n\r\n                        let values = record.values || record;\r\n                        return values && values.saga_status && values.saga_status.value === '1' ? (\r\n                            <ErrorPop\r\n                                record={record}\r\n                            />\r\n                        ) : (\r\n                            <Checkbox\r\n                                className=\"table-checkbox\"\r\n                                checked={checkedArrayChild[index]}\r\n                                onChange={onCheckboxChangeChild.bind(\r\n                                    this,\r\n                                    text,\r\n                                    record,\r\n                                    index,\r\n                                    records,\r\n                                    indexs,\r\n                                )}\r\n                            />\r\n                        );\r\n                    },\r\n                },\r\n            ];\r\n            newColumn = defaultColumns.concat(newColumn);\r\n        }\r\n\r\n        return newColumn;\r\n    };\r\n\r\n    //子表添加序号\r\n    const renderColumnsForChildOfIndex = columns => {\r\n        // if(!currentTable.childCheckObj.hasOwnProperty(bodyKey)){\r\n        //     return false\r\n        // }\r\n        // let { checkedAllChild, checkedArrayChild } = currentTable.childCheckObj[\r\n        //   records.key\r\n        // ];\r\n        // let { multiSelect } = defaultProps;\r\n        let indexCol = [\r\n            {\r\n                label:\r\n                    currentTable.multilingual &&\r\n                    currentTable.multilingual['insert-tree-table-003'],\r\n                attrcode: 'indexCol',\r\n                dataIndex: 'indexCol',\r\n                width: '60px',\r\n                className: 'nunberindex',\r\n                title:\r\n                    currentTable.multilingual &&\r\n                    currentTable.multilingual['insert-tree-table-003'],\r\n                render: (text, record2, index) => {\r\n                    return <span>{index + 1}</span>;\r\n                },\r\n            },\r\n        ]; // 添加序号列\r\n        let newColumn = columns;\r\n        if (needIndex) {\r\n            newColumn = indexCol.concat(newColumn);\r\n        }\r\n\r\n        return newColumn;\r\n    };\r\n\r\n    // 处理模板\r\n    const createNewColChild = column => {\r\n        const multiCustomer =\r\n            currentTable.multilingual &&\r\n            currentTable.multilingual['insert-tree-table-008'];\r\n        const multiYes =\r\n            currentTable.multilingual &&\r\n            currentTable.multilingual['insert-tree-table-009'];\r\n        const multiNo =\r\n            currentTable.multilingual &&\r\n            currentTable.multilingual['insert-tree-table-010'];\r\n\r\n        return column.map(item => {\r\n            let render = null;\r\n            if (item.itemtype == 'customer') {\r\n                item.width ? item.width : (item.width = '90px');\r\n                item.title = multiCustomer;\r\n                // item.fixed = \"right\";\r\n            }\r\n            if (\r\n                item.itemtype !== 'customer' &&\r\n                item.attrcode !== 'checkbox' &&\r\n                item.attrcode !== 'indexCol'\r\n            ) {\r\n                item.width ? item.width : (item.width = '120px');\r\n                item.title = (\r\n                    <span\r\n                        fieldid={getSysFieldid(item.attrcode)}\r\n                        style={{ color: defaultColor.includes(item.color) ? '' : item.color }}\r\n                        className={classnames('title-container', { alignRight: item.itemtype === 'number' })}\r\n                    >\r\n                        {item.required && <span className=\"mark-required\">*</span>}\r\n                        {' '}\r\n                        {item.label}{' '}\r\n                    </span>\r\n                );\r\n\r\n                if (item.render) {\r\n                    render = (text, record, index) => {\r\n                        return (\r\n                            <div fieldid={getSysFieldid(item.attrcode)}>\r\n                                <ToolCell context={item.render(text, record, index)} multipleRowCell={false} />\r\n                            </div>\r\n                        );\r\n                    };\r\n                } else {\r\n                    render = (text, record) => {\r\n                        if (record.hasOwnProperty(item.attrcode)) {\r\n                            let display = record[item.attrcode].display;\r\n                            // 行数据里的精度值\r\n                            let valSca = record[item.attrcode].scale;\r\n                            valSca = Number(valSca);\r\n                            let value = record[item.attrcode].value;\r\n\r\n                            // 如果是时间类型\r\n                            // if (isTimeType(item.itemtype)) {\r\n                            //   value = changeTime(value);\r\n                            // }\r\n\r\n                            // timeTypes: ['datepicker', 'NCTZDatePickerStart', 'NCTZDatePickerEnd', 'timepicker', 'datetimepicker', 'rangepicker', 'datePickerNoTimeZone'],\r\n\r\n                            switch (item.itemtype) {\r\n                                case 'datepicker':\r\n                                    value = changeTime(value);\r\n                                    value = formatDatetime(value, 'date');\r\n                                    break;\r\n                                case 'NCTZDatePickerEnd':\r\n                                    value = changeTime(value);\r\n                                    value = formatDatetime(value, 'date');\r\n                                    break;\r\n                                // case 'timepicker':\r\n                                //   value = changeTime(value, 'HH:mm:ss');\r\n                                //   break;\r\n                                case 'datetimepicker':\r\n                                    value = changeTime(value, 'YYYY-MM-DD HH:mm:ss');\r\n                                    value = formatDatetime(value, 'datetime');\r\n                                    break;\r\n                            }\r\n\r\n                            // 布尔值转换处理\r\n                            const itemtypeBool = [\r\n                                'switch',\r\n                                'switch_browse',\r\n                                'checkbox',\r\n                                'checkbox_switch',\r\n                            ];\r\n                            if (itemtypeBool.includes(item.itemtype)) {\r\n                                value = value === 'Y' || value === true ? multiYes : multiNo;\r\n                            }\r\n\r\n                            let dom = '';\r\n                            if (display || display == 0) {\r\n                                dom = display;\r\n                            } else {\r\n                                dom = value;\r\n                            }\r\n                            if (typeof dom === 'boolean') {\r\n                                dom = dom ? multiYes : multiNo;\r\n                            }\r\n\r\n                            if (item.itemtype === 'number') {\r\n                                let sc = Number(item.scale) > 0 ? Number(item.scale) : 0;\r\n\r\n                                if (!isNaN(valSca) && valSca >= 0) {\r\n                                    sc = valSca;\r\n                                }\r\n\r\n                                dom = formatAcuracy(value, sc);\r\n                                dom = formatNumber(dom);\r\n                                record[item.attrcode].renderValue = dom;\r\n                            }\r\n\r\n                            return (\r\n                                <div\r\n                                    fieldid={getSysFieldid(item.attrcode)}\r\n                                    className={classnames({ alignRight: item.itemtype === 'number' })}\r\n                                >\r\n                                    <ToolCell context={dom} multipleRowCell={multipleRowCell} />\r\n                                </div>\r\n                            );\r\n                        }\r\n                    };\r\n                }\r\n            } else {\r\n                render = item.render;\r\n            }\r\n\r\n\r\n            return { ...item, render, key: item.attrcode, title: item.title, required: null };\r\n        });\r\n    };\r\n    //  处理数据\r\n    const createNewData = (data, column) => {\r\n        const colMap = new Map();\r\n\r\n        if (column) {\r\n            column.map(col => {\r\n                if (col.itemtype && col.itemtype === 'number') {\r\n                    if (!colMap.has(col.attrcode)) colMap.set(col.attrcode, {});\r\n\r\n                    if (colMap.has(col.attrcode)) {\r\n                        colMap.get(col.attrcode).scale = col.scale;\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        let datas = [];\r\n        data.map((val, index) => {\r\n            if (column) {\r\n                colMap.forEach((value, key) => {\r\n                    let itemScale = val.values[key] && val.values[key].scale;\r\n                    itemScale = Number(itemScale);\r\n\r\n                    let sc = Number(value.scale) > 0 ? Number(value.scale) : 0;\r\n\r\n                    if (!isNaN(itemScale)) {\r\n                        sc = itemScale;\r\n                    }\r\n\r\n                    if (val.values[key] && val.values[key].value) {\r\n                        let renderValue = formatAcuracy(val.values[key].value, sc);\r\n                        val.values[key].renderValue = renderValue;\r\n                    }\r\n                });\r\n            }\r\n\r\n            if (needIndex) {\r\n                val.values.indexCol = { value: index };\r\n            }\r\n            datas.push(val.values);\r\n        });\r\n        // {value: \"张三\"}\r\n        return datas;\r\n    };\r\n    // 判断是否为需要显示合计\r\n    const isShowTotal = columns => {\r\n        let isShowTotal = false;\r\n        columns.map(v => {\r\n            if (v.hasOwnProperty('istotal') && v.istotal) {\r\n                isShowTotal = true;\r\n            }\r\n        });\r\n        return isShowTotal;\r\n    };\r\n\r\n    const handleColAndSrc = (col, src) => {\r\n        // 重新生成column\r\n        let isGenerantorTotal = false;\r\n        const heji =\r\n            currentTable.multilingual &&\r\n            currentTable.multilingual['insert-tree-table-007'];\r\n\r\n        const totalColumns = col.map(v => {\r\n            // 如果有CheckBox就用这列做合计\r\n\r\n            // 如果没有CheckBox 就用dataIndex做合计\r\n\r\n            const obj = {};\r\n            if (!v.istotal && !isGenerantorTotal) {\r\n                obj.title = heji;\r\n                obj.dataIndex = 'total';\r\n                obj.key = 'total';\r\n                obj.width = v.width ? v.width : '80px';\r\n                isGenerantorTotal = true;\r\n            } else if (\r\n                (v.attrcode === 'checkbox' || v.dataIndex === 'checkbox') &&\r\n                !isGenerantorTotal\r\n            ) {\r\n                obj.title = heji;\r\n                obj.dataIndex = 'total';\r\n                obj.key = 'total';\r\n                obj.width = v.width ? v.width : '60px';\r\n                isGenerantorTotal = true;\r\n            } else if (v.attrcode === 'indexCol' && !isGenerantorTotal) {\r\n                obj.title = heji;\r\n                obj.dataIndex = 'total';\r\n                obj.key = 'total';\r\n                obj.width = v.width ? v.width : '';\r\n                isGenerantorTotal = true;\r\n            } else if (v.itemtype === 'customer' && !isGenerantorTotal) {\r\n                obj.title = heji;\r\n                obj.dataIndex = 'total';\r\n                obj.key = 'total';\r\n                obj.width = v.width ? v.width : '';\r\n                isGenerantorTotal = true;\r\n            } else {\r\n                obj.title = v.title;\r\n                obj.dataIndex = v.dataIndex || v.key;\r\n                obj.width = v.width ? v.width : '';\r\n                obj.key = v.key;\r\n            }\r\n\r\n            if (\r\n                v.itemtype !== 'customer' &&\r\n                v.attrcode !== 'checkbox' &&\r\n                v.attrcode !== 'indexCol'\r\n            ) {\r\n                obj.width = v.width ? v.width : '120px';\r\n            }\r\n            obj.render = text => {\r\n                return (\r\n                    <div className=\"alignRight\" fieldid={getSysFieldid(obj.dataIndex === 'total' ? 'firstcol' : v.attrcode)}>\r\n                        <ToolCell context={text} isLineAll={true} />\r\n                    </div>\r\n                );\r\n            };\r\n            return obj;\r\n        });\r\n        const totalData = getTotal(col, src);\r\n        return {\r\n            totalColumns,\r\n            totalData: [{ total: heji, ...totalData }],\r\n        };\r\n    };\r\n    //表格展开显示的内容\r\n    const expandedRowRender = (record, index) => {\r\n        // if (JSON.stringify(bodyColumn) == \"{}\") {\r\n        //   return false;\r\n        // }\r\n        if (!currentTable.childCheckObj.hasOwnProperty(record.key)) {\r\n            return false;\r\n        }\r\n\r\n        //  根据组件类型，判断是否带复选框\r\n        let newColumn = bodyColumn;\r\n        // let classByType = null;\r\n        if (comType === 'hasCheckBox_child') {\r\n            newColumn = renderColumnsMultiSelectChild.call(\r\n                this,\r\n                newColumn,\r\n                record,\r\n                index,\r\n            );\r\n        }\r\n\r\n        if (childNeedIndex) {\r\n            // 给子表添加序号和父选框\r\n            // newColumn = renderColumnsMultiSelectChild.call(\r\n            //   this,\r\n            //   newColumn,\r\n            //   record,\r\n            //   index\r\n            // );\r\n            newColumn = renderColumnsForChildOfIndex.call(\r\n                this,\r\n                newColumn,\r\n                record,\r\n                index,\r\n            );\r\n        }\r\n\r\n        adddDataIndex(newColumn);\r\n\r\n        const sortTypeChild = { //排序的类型 Object\r\n            mode: 'single', //'multiple'(多列排序) 或'single'(单列排序)(如果前端排序的时候想多列排序，对象里就穿这个字段就可以了),\r\n            backSource: false, //false是前端排序，值为true为后端排序,默认false\r\n            sortFun: sortParam => {\r\n                let sortObj = {};\r\n\r\n                let colums = newColumn;\r\n                sortParam.forEach(item => {\r\n                    sortObj[item.field] = item;\r\n                });\r\n\r\n                colums.forEach(item => {\r\n                    //保存返回的column状态，没有则终止order状态\r\n                    if (sortObj[item.attrcode]) {\r\n                        item.order = sortObj[item.attrcode].order;\r\n                        item.orderNum = sortObj[item.attrcode].orderNum;\r\n                    } else {\r\n                        item.order = 'flatscend';\r\n                        item.orderNum = '';\r\n                    }\r\n                });\r\n            },\r\n        };\r\n\r\n        if (\r\n            currentTable.bodyData.data &&\r\n            currentTable.bodyData.data.hasOwnProperty(record.key)\r\n        ) {\r\n            let finalColumns = createNewColChild(newColumn);\r\n\r\n            finalColumns = finalColumns.map(val => {\r\n\r\n                if (\r\n                    // val.itemtype == 'customer' ||\r\n                    val.attrcode !== 'checkbox' &&\r\n                    val.attrcode !== 'indexCol'\r\n                ) {\r\n                    sortColumn(val, sortTypeChild, customSortRule);\r\n                }\r\n                return val;\r\n            });\r\n\r\n            const fianlyData = createNewData(\r\n                currentTable.bodyData.data[record.key].rows,\r\n                newColumn,\r\n            );\r\n\r\n            // 判断是否需要合计\r\n            const isTotal = isShowTotal(finalColumns);\r\n            let totalConfig = {};\r\n            if (isTotal) {\r\n                totalConfig = handleColAndSrc(finalColumns, fianlyData);\r\n            }\r\n            const childData = createNewData(currentTable.bodyData.data[record.key].rows);\r\n\r\n            const expandTableHeight = getExpandTableHeight(childData, isTotal, ReactDOM.findDOMNode(inserttableDom));\r\n\r\n            const expandTableBodyHeight = getExpandTableHeight(childData, isTotal, ReactDOM.findDOMNode(inserttableDom), true);\r\n\r\n            return (\r\n                <div fieldid={getSysFieldid(`${fieldid || bodyTableId}_table`)} style={{ height: `${expandTableHeight}px` }}>\r\n                    <ComplexTable\r\n                        // lazyload={false}\r\n                        className=\"innerTable\"\r\n                        columns={[...finalColumns]}\r\n                        data={childData}\r\n                        isTotal={isTotal}\r\n                        inserttableTotalConfig={totalConfig}\r\n                        isDrag={isDrag}\r\n                        bodyStyle={{ minHeight: '30px' }}\r\n                        scroll={{ x: true, y: expandTableBodyHeight || 450 }}\r\n                        sort={sortTypeChild}\r\n                        totalBodyHeight={30}\r\n                    // colsSettingParam={getColSetConfig()}\r\n                    // cancelCustomRightMenu={cancelCustomRightMenu}\r\n                    // updateColumnHandle={updateColumnAfterSetting.bind(this)}\r\n                    />\r\n                </div>\r\n            );\r\n        }\r\n    };\r\n\r\n    //当点击展开的时候才去请求内嵌表格数据\r\n    const getData = (expanded, record) => {\r\n        if (expanded) {\r\n            currentTable.expandedRowKeys.push(record.key);\r\n            bodyKey = record.key;\r\n\r\n            //判断是否已经有该子表数据，如果有，不需要再次请求。\r\n            let hasThisChild = currentTable.childCheckObj.hasOwnProperty(bodyKey);\r\n            this.setTableBodyData(record, hasThisChild);\r\n        } else {\r\n            const index = currentTable.expandedRowKeys.indexOf(record.key);\r\n            currentTable.expandedRowKeys.splice(index, 1);\r\n        }\r\n        this.setState(this.state);\r\n    };\r\n\r\n    //============================================添加复选框==================================\r\n\r\n    //主表复选框全选点击事件\r\n    const onAllCheckChange = () => {\r\n        let checkedArray = [];\r\n        let errorDataKey = {};\r\n        let mainCheckObj = currentTable.mainCheckObj;\r\n        for (var i = 0; i < mainCheckObj.checkedArray.length; i++) {\r\n            let cd = currentTable.outerData[i],\r\n                values = cd.values;\r\n            if (values && values.saga_status && values.saga_status.value === '1') { // socket 错误数据过滤\r\n                errorDataKey[cd.rowId || values.key] = cd.rowId || values.key;\r\n                checkedArray[i] = false;\r\n            } else {\r\n                checkedArray[i] = !mainCheckObj.checkedAll;\r\n            }\r\n        }\r\n        mainCheckObj.checkedAll = !mainCheckObj.checkedAll;\r\n        mainCheckObj.checkedArray = checkedArray;\r\n        let childCheckObj = currentTable.childCheckObj;\r\n        //设置子表勾选\r\n        for (let key in childCheckObj) {\r\n            if (errorDataKey[key]) {\r\n                // 如果主表错误  则子表也不能选中数据\r\n                childCheckObj[key].checkedAllChild = false;\r\n                childCheckObj[key].checkedArrayChild = childCheckObj[\r\n                    key\r\n                ].checkedArrayChild.map(() => {\r\n                    return false;\r\n                });\r\n            } else {\r\n                childCheckObj[key].checkedAllChild = mainCheckObj.checkedAll;\r\n                childCheckObj[key].checkedArrayChild = childCheckObj[\r\n                    key\r\n                ].checkedArrayChild.map((val, i) => {\r\n                    let bd = currentTable.bodyData.data[key].rows[i],\r\n                        values = bd.values;\r\n                    if (values && values.saga_status && values.saga_status.value === '1') { // socket 错误数据过滤\r\n                        return false;\r\n                    } else {\r\n                        return mainCheckObj.checkedAll;\r\n                    }\r\n                });\r\n            }\r\n        }\r\n\r\n        // 这里处理Socket saga_status 错误数据比较麻烦\r\n\r\n        this.setState(this.state);\r\n\r\n        if (typeof onAllCheckChangeEve === 'function') {\r\n            onAllCheckChangeEve(\r\n                currentTable.mainCheckObj.checkedAll,\r\n                currentTable.mainCheckObj.data,\r\n                currentTable.bodyData,\r\n            );\r\n        }\r\n    };\r\n\r\n    //主表复选框单个勾选\r\n    const onCheckboxChange = (text, record, index) => {\r\n        let allFlag = false;\r\n        let thisKey = record.key;\r\n        let mainCheckObj = currentTable.mainCheckObj;\r\n        console.log(11122, currentTable);\r\n        let oldState = mainCheckObj.checkedArray[index];\r\n        mainCheckObj.checkedArray[index] = !mainCheckObj.checkedArray[index];\r\n        if (mockRadio) {\r\n            const resetCheckedArray = [];\r\n            mainCheckObj.checkedArray.map((checked, i) => {\r\n                if (index === i) {\r\n                    resetCheckedArray.push(!oldState);\r\n                } else {\r\n                    resetCheckedArray.push(false);\r\n                }\r\n            });\r\n            mainCheckObj.checkedArray = resetCheckedArray;\r\n        }\r\n        for (var i = 0; i < mainCheckObj.checkedArray.length; i++) {\r\n            if (!mainCheckObj.checkedArray[i]) {\r\n                allFlag = false;\r\n                break;\r\n            } else {\r\n                allFlag = true;\r\n            }\r\n        }\r\n\r\n        mainCheckObj.checkedAll = allFlag;\r\n\r\n        //设置子表勾选\r\n        if (\r\n            JSON.stringify(currentTable.childCheckObj) !== '{}' &&\r\n            currentTable.childCheckObj.hasOwnProperty(thisKey)\r\n        ) {\r\n            currentTable.childCheckObj[thisKey].checkedAllChild =\r\n                mainCheckObj.checkedArray[index];\r\n            currentTable.childCheckObj[thisKey].checkedArrayChild.map((val, ind) => {\r\n                currentTable.childCheckObj[thisKey].checkedArrayChild[ind] =\r\n                    mainCheckObj.checkedArray[index];\r\n            });\r\n        }\r\n\r\n        this.setState(this.state);\r\n        if (typeof rowCheckChange === 'function') {\r\n            rowCheckChange(\r\n                mainCheckObj.checkedArray[index],\r\n                currentTable.mainCheckObj.data[index],\r\n                currentTable,\r\n            );\r\n        }\r\n    };\r\n\r\n    //主表  表格和复选框列组合到一起\r\n    const renderColumnsMultiSelect = columns => {\r\n        const { checkedArray } = currentTable.mainCheckObj;\r\n        const { multiSelect } = defaultProps;\r\n        let indeterminate_bool = false; //主表半选\r\n        let indexCol = [\r\n            {\r\n                label:\r\n                    currentTable.multilingual &&\r\n                    currentTable.multilingual['insert-tree-table-003'],\r\n                attrcode: 'indexCol',\r\n                dataIndex: 'indexCol',\r\n                width: '60px',\r\n                className: 'nunberindex',\r\n                title:\r\n                    currentTable.multilingual &&\r\n                    currentTable.multilingual['insert-tree-table-003'],\r\n                render: (text, record, index) => {\r\n                    return <span style={{ width: '60px' }}>{index + 1}</span>;\r\n                },\r\n            },\r\n        ]; // 添加序号列\r\n        let newColumn = columns;\r\n        if (needIndex) {\r\n            newColumn = indexCol.concat(newColumn);\r\n        }\r\n\r\n        if (multiSelect && multiSelect.type === 'checkbox') {\r\n            if (comType === 'hasCheckBox_child') {\r\n                indeterminate_bool = checkOutTableSelected(checkedArray);\r\n                if (!indeterminate_bool) {\r\n                    indeterminate_bool = checkChildSelected(currentTable.childCheckObj);\r\n                }\r\n            } else {\r\n                indeterminate_bool = checkOutTableSelected(checkedArray);\r\n            }\r\n\r\n            const checkTilte = (\r\n                <Checkbox\r\n                    className=\"table-checkbox\"\r\n                    checked={currentTable.mainCheckObj.checkedAll}\r\n                    indeterminate={\r\n                        indeterminate_bool && !currentTable.mainCheckObj.checkedAll\r\n                    }\r\n                    onChange={onAllCheckChange.bind(this)}\r\n                />\r\n            );\r\n\r\n            const tableTitle = mockRadio ? null : checkTilte;\r\n\r\n            let defaultColumns = [\r\n                {\r\n                    title: tableTitle,\r\n                    attrcode: 'checkbox',\r\n                    dataIndex: 'checkbox',\r\n                    width: '80px',\r\n                    render: (text, record, index) => {\r\n                        let indeterminate_bool_child = false; //子表半选\r\n                        if (\r\n                            currentTable.childCheckObj &&\r\n                            currentTable.childCheckObj.hasOwnProperty(record.key)\r\n                        ) {\r\n                            let checkedArrayChild =\r\n                                currentTable.childCheckObj[record.key].checkedArrayChild;\r\n                            let i = checkedArrayChild.length;\r\n\r\n                            while (i--) {\r\n                                if (checkedArrayChild[i]) {\r\n                                    indeterminate_bool_child = true;\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                        if (comType === 'hasCheckBox') {\r\n                            // 如果是子表无复选框，那么主表就不需要半选状态\r\n                            indeterminate_bool_child = false;\r\n                        }\r\n\r\n                        // Socket改造\r\n                        //let { billpkname, billtype, errorViewType } = this.nativeSocketBillInfo;\r\n                        let values = record.values || record;\r\n                        return values && values.saga_status && values.saga_status.value === '1' ? (\r\n                            <ErrorPop\r\n                                record={record}\r\n                            />\r\n                        ) : (\r\n                            <Checkbox\r\n                                className=\"table-checkbox\"\r\n                                checked={currentTable.mainCheckObj.checkedArray[index]}\r\n                                indeterminate={\r\n                                    indeterminate_bool_child &&\r\n                                    !currentTable.mainCheckObj.checkedArray[index]\r\n                                }\r\n                                onChange={onCheckboxChange.bind(this, text, record, index)}\r\n                            />\r\n                        );\r\n                    },\r\n                },\r\n            ];\r\n            newColumn = defaultColumns.concat(newColumn);\r\n        }\r\n\r\n        return newColumn;\r\n    };\r\n\r\n    if (data && currentTable.firstTime) {\r\n        currentTable.firstTime = false;\r\n        //初始化内嵌表格数据\r\n        currentTable.bodyData = {\r\n            column: {},\r\n            data: {},\r\n        };\r\n        currentTable.childCheckObj = {}; //子表勾选情况\r\n\r\n        //初始化复选框\r\n        currentTable.mainCheckObj = {\r\n            // 主表勾选情况\r\n            checkedAll: false,\r\n            checkedArray: [],\r\n            data,\r\n        };\r\n        //设置每行是否勾选\r\n        data.map(() => {\r\n            currentTable.mainCheckObj.checkedArray.push(false);\r\n        });\r\n    }\r\n\r\n    //  根据组件类型，判断是否带复选框\r\n    let column = columns;\r\n    let classByType = null;\r\n    if (comType === 'hasCheckBox' || comType === 'hasCheckBox_child') {\r\n        column = renderColumnsMultiSelect.call(this, columns);\r\n        classByType = 'hasCheckBox';\r\n    }\r\n\r\n    // 处理模板\r\n    const createNewCol = column => {\r\n        const multiCustomer =\r\n            currentTable.multilingual &&\r\n            currentTable.multilingual['insert-tree-table-008'];\r\n        const multiYes =\r\n            currentTable.multilingual &&\r\n            currentTable.multilingual['insert-tree-table-009'];\r\n        const multiNo =\r\n            currentTable.multilingual &&\r\n            currentTable.multilingual['insert-tree-table-010'];\r\n\r\n        return column.map((item, colIndex) => {\r\n            let isLineAll = true;\r\n            let render = null;\r\n            if (item.itemtype == 'customer') {\r\n                item.width ? item.width : (item.width = '90px');\r\n                item.title = multiCustomer;\r\n                // item.fixed = \"right\";\r\n            }\r\n\r\n            if (\r\n                item.itemtype !== 'customer' &&\r\n                item.attrcode !== 'checkbox' &&\r\n                item.attrcode !== 'indexCol'\r\n            ) {\r\n\r\n                if (comType == 'normal' && colIndex == 0) {\r\n                    isLineAll = false;\r\n                }\r\n\r\n                item.width ? item.width : (item.width = '120px');\r\n                item.title = (\r\n                    <span\r\n                        fieldid={getSysFieldid(item.attrcode)}\r\n                        style={{ color: defaultColor.includes(item.color) ? '' : item.color }}\r\n                        className={classnames('title-container', { alignRight: item.itemtype === 'number' })}\r\n                    >\r\n                         {item.required && <span className=\"mark-required\">*</span>}\r\n                         {' '}\r\n                        {item.label}{' '}\r\n                    </span>\r\n                );\r\n\r\n                render = (text, record) => {\r\n\r\n                    if (record.hasOwnProperty(item.attrcode)) {\r\n                        let display = record[item.attrcode].display;\r\n                        // 行数据里的精度值\r\n                        let valSca = record[item.attrcode].scale;\r\n                        valSca = Number(valSca);\r\n                        let value = record[item.attrcode].value;\r\n\r\n                        // 如果是时间类型\r\n\r\n                        switch (item.itemtype) {\r\n                            case 'datepicker':\r\n                                value = changeTime(value);\r\n                                value = formatDatetime(value, 'date');\r\n                                break;\r\n                            case 'NCTZDatePickerEnd':\r\n                                value = changeTime(value);\r\n                                value = formatDatetime(value, 'date');\r\n                                break;\r\n                            case 'timepicker':\r\n                                value = value;\r\n                                break;\r\n                            case 'datetimepicker':\r\n                                value = changeTime(value, 'YYYY-MM-DD HH:mm:ss');\r\n                                value = formatDatetime(value, 'datetime');\r\n                                break;\r\n                        }\r\n\r\n                        // 布尔值转换处理\r\n                        const itemtypeBool = [\r\n                            'switch',\r\n                            'switch_browse',\r\n                            'checkbox',\r\n                            'checkbox_switch',\r\n                        ];\r\n                        if (itemtypeBool.includes(item.itemtype)) {\r\n                            value = value === 'Y' || value === true ? multiYes : multiNo;\r\n                        }\r\n\r\n                        let dom = '';\r\n                        if (display || display == 0) {\r\n                            dom = display;\r\n                        } else {\r\n                            dom = value;\r\n                        }\r\n                        if (typeof dom === 'boolean') {\r\n                            dom = dom ? multiYes : multiNo;\r\n                        }\r\n\r\n                        if (item.itemtype === 'number') {\r\n                            let sc = Number(item.scale) > 0 ? Number(item.scale) : 0;\r\n\r\n                            if (!isNaN(valSca) && valSca >= 0) {\r\n                                sc = valSca;\r\n                            }\r\n\r\n                            dom = formatAcuracy(value, sc);\r\n                            dom = formatNumber(dom);\r\n                            record[item.attrcode].renderValue = dom;\r\n                        }\r\n                        if (comType == 'normal' && colIndex == 0) {\r\n                            return (\r\n                                <span\r\n                                    fieldid={getSysFieldid(item.attrcode)}\r\n                                    className={classnames({ alignRight: item.itemtype === 'number' })}\r\n                                >\r\n                                    <ToolCell context={dom} multipleRowCell={multipleRowCell} isLineAll={isLineAll} />\r\n                                </span>\r\n                            );\r\n                        } else {\r\n                            return (\r\n                                <span\r\n                                    fieldid={getSysFieldid(item.attrcode)}\r\n                                    className={classnames({ alignRight: item.itemtype === 'number' })}\r\n                                >\r\n                                    <ToolCell context={dom} multipleRowCell={multipleRowCell} isLineAll={isLineAll} />\r\n                                </span>\r\n                            );\r\n                        }\r\n                    }\r\n                };\r\n            } else {\r\n                render = item.render;\r\n            }\r\n\r\n            return { ...item, render, key: item.attrcode, title: item.title, required: null };\r\n        });\r\n    };\r\n\r\n    let finalColumns = createNewCol(column);\r\n\r\n    finalColumns = finalColumns.map(val => {\r\n\r\n        if (\r\n            // val.itemtype == 'customer' ||\r\n            val.attrcode !== 'checkbox' &&\r\n            val.attrcode !== 'indexCol'\r\n        ) {\r\n            sortColumn(val, sortTypeHead, customSortRule);\r\n        }\r\n        return val;\r\n    });\r\n\r\n    const finalData = createNewData(currentTable.mainCheckObj.data, finalColumns);\r\n\r\n    // 获取元素的样式属性值\r\n    const getStyle = (obj, attr) => {\r\n        if (obj.currentStyle) {\r\n            return obj.currentStyle[attr];\r\n        } else {\r\n            return document.defaultView.getComputedStyle(obj, null)[attr];\r\n        }\r\n    };\r\n\r\n    const isTotal = isShowTotal(finalColumns);\r\n    let totalConfig = {};\r\n    if (isTotal) {\r\n        totalConfig = handleColAndSrc(finalColumns, finalData);\r\n    }\r\n\r\n    const bottom = Number(getStyle(document.body, 'paddingBottom').replace('px', ''));\r\n\r\n    currentTable.tableHeight = currentTable.tableHeight - bottom;\r\n\r\n    return (\r\n        <div\r\n            className={['insertTable', classByType].join(' ')}\r\n            fieldid={getSysFieldid(`${fieldid || headTableId}_table`)}\r\n            style={{ overflow: 'hidden' }}\r\n            ref={ref => {\r\n                if (ref) {\r\n                    inserttableDom = ref;\r\n                }\r\n            }}\r\n        >\r\n            <ComplexTable\r\n                otherAreaHeight={headPaginationInfo ? 38 : 0}\r\n                adaptionHeight={adaptionHeight}\r\n                inModal={inModal}\r\n                lazyload={false}\r\n                // colsSettingParam={getColSetConfig()}\r\n                // cancelCustomRightMenu={cancelCustomRightMenu}\r\n                // updateColumnHandle={updateColumnAfterSetting.bind(this)}\r\n                // key={Date.parse(new Date())}\r\n                bodyStyle={{ minHeight: insertTableHeight || '419px' }}\r\n                className=\"outerTable\"\r\n                isTotal={isTotal}\r\n                columns={finalColumns}\r\n                data={finalData}\r\n                onExpand={getData.bind(this)}\r\n                expandedRowKeys={currentTable.expandedRowKeys}\r\n                expandedRowRender={expandedRowRender.bind(this)}\r\n                scroll={{ x: true, y: currentTable.tableHeight }}\r\n                inserttableTotalConfig={totalConfig}\r\n                isDrag={isDrag}\r\n                sort={sortTypeHead}\r\n            />\r\n            <Col md={12} xs={12} sm={12}>\r\n                {headPaginationInfo && currentTable.multilingual ? (\r\n                    <div className=\"insertTable-component-paginationDiv\" fieldid={getSysFieldid('pagination-div')}>\r\n                        <div className=\"fl page-size\">\r\n                            <NCSelect\r\n                                className=\"pageSizeDom\"\r\n                                size=\"lg\"\r\n                                value={Number(pageSize || '')}\r\n                                style={{ width: 90, marginRight: 6 }}\r\n                                onChange={pageSizeSelect.bind(this)}\r\n                                fieldid=\"page-size\"\r\n                            >\r\n                                <NCOption value={5}>\r\n                                    5{currentTable.multilingual['insert-tree-table-004']}/\r\n                                    {currentTable.multilingual['insert-tree-table-006']}\r\n                                </NCOption>\r\n                                <NCOption value={10}>\r\n                                    10\r\n                                    {currentTable.multilingual['insert-tree-table-004']}/\r\n                                    {currentTable.multilingual['insert-tree-table-006']}\r\n                                </NCOption>\r\n                                <NCOption value={20}>\r\n                                    20\r\n                                    {currentTable.multilingual['insert-tree-table-004']}/\r\n                                    {currentTable.multilingual['insert-tree-table-006']}\r\n                                </NCOption>\r\n                                <NCOption value={50}>\r\n                                    50\r\n                                    {currentTable.multilingual['insert-tree-table-004']}/\r\n                                    {currentTable.multilingual['insert-tree-table-006']}\r\n                                </NCOption>\r\n                                <NCOption value={100}>\r\n                                    100\r\n                                    {currentTable.multilingual['insert-tree-table-004']}/\r\n                                    {currentTable.multilingual['insert-tree-table-006']}\r\n                                </NCOption>\r\n                            </NCSelect>\r\n                            {!!+pageInfo.total && (\r\n                                <span className=\"NC_total\">\r\n                                    {' '}\r\n                                    {currentTable.multilingual['insert-tree-table-005']}{' '}\r\n                                    <span>{pageInfo.total}{' '}</span>\r\n                                    {currentTable.multilingual['insert-tree-table-004']}{' '}\r\n                                </span>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                ) : null}\r\n                {headPaginationInfo && pageInfo ? (\r\n                    <Pagination\r\n                        // className=\"Pagination\"\r\n                        prev\r\n                        next\r\n                        boundaryLinks\r\n                        items={pageInfo.totalPage ? Number(pageInfo.totalPage) : 1} //总页数\r\n                        maxButtons={5} //显示最多页数按钮\r\n                        activePage={Number(pageIndex)}\r\n                        onSelect={pageIndexChanges.bind(this)}\r\n                    />\r\n                ) : (\r\n                    ''\r\n                )}\r\n            </Col>\r\n        </div>\r\n    );\r\n}\r\n/**\r\n * 列设置后更新模板\r\n * @param {*Array} newColumn 列设置后的模板\r\n * @param {*} areaCode 表格的区域id\r\n */\r\n// export function updateColumnAfterSetting(newColumn, areaCode) {\r\n//   let { meta } = this.state;\r\n//   if (newColumn.length && areaCode) {\r\n//     let finalColumn = [...meta[areaCode].items];\r\n\r\n//     let sortIndexArr = [];\r\n//     let sortObjArr = [];\r\n//     newColumn.map(newItem => {\r\n//       meta[areaCode].items.map((oldItem, index) => {\r\n//         if (newItem.attrcode === oldItem.attrcode) {\r\n//           oldItem.width = newItem.width;\r\n//           oldItem.islock = newItem.islock;\r\n//           oldItem.visible = newItem.visible;\r\n//           sortIndexArr.push(index);\r\n//           sortObjArr.push(oldItem);\r\n//         };\r\n//       });\r\n//     });\r\n//     sortIndexArr.sort((a, b) => a - b);\r\n//     sortIndexArr.map((item, index) => {\r\n//       finalColumn[item] = sortObjArr[index];\r\n//     });\r\n//     meta[areaCode].items = finalColumn;\r\n//     this.setState({ meta });\r\n//   }\r\n// }\r\n","/**\r\n * Created by wangshhj on 2018/1/16.\r\n */\r\nimport { createInsertTable } from './InsertTable';\r\nimport {\r\n    getInsertTableValue,\r\n    setInsertTableValue,\r\n    setChildTableData,\r\n    getInsertTableSelectedValue,\r\n    getPageInfo, getCheckedRows,\r\n    deleteTableRowsByIndex,\r\n    updateDataByRefresh,\r\n    changeCheck,\r\n} from './methods';\r\n\r\nexport default {\r\n    createInsertTable,\r\n    getInsertTableValue,\r\n    setInsertTableValue,\r\n    setChildTableData,\r\n    getInsertTableSelectedValue,\r\n    getPageInfo,\r\n    getCheckedRows,\r\n    deleteTableRowsByIndex,\r\n    updateDataByRefresh,\r\n    changeCheck,\r\n};","import React, { PureComponent } from 'react';\r\nimport { Modal, Button, Radio, HotKeys, Tooltip, Select, Input, InputNumber } from '@platform/base';\r\nimport { formDownload, toast, ajax, getMultiLang } from '@platform/api';\r\nrequire(\"./index.less\");\r\nconst Option = Select.Option;\r\n\r\nfunction is(a, b) {\r\n    return a === b;\r\n}\r\n\r\nexport default class PrintOutput extends PureComponent {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            show: false,\r\n            json: {},\r\n            printTemplateMenu: [],\r\n            data: {\r\n                outputMode: 'pdf',\r\n                MultiConfig: '1',\r\n                pdfConfig: false,\r\n                printTemplateID: '',\r\n                htmlConfig: false,\r\n                prefix: '',\r\n                threshold: 0,\r\n                dsPositionPolicy: 4,\r\n                fileVolume: 16000,\r\n                sheetNamePreFix: '新的工作表',\r\n                isDifDocDifFile: false,\r\n                canModifyType: props.canModifyType || false,\r\n            },\r\n        }\r\n    }\r\n\r\n    componentWillMount() {\r\n        let { json } = this.props\r\n        if (json) {\r\n            this.setState({\r\n                json,\r\n            });\r\n        } else {\r\n            let callback = (json, bool, inlt) => {\r\n                let data = this.state.data;\r\n                data.sheetNamePreFix = json['api-print-0022'] || \"新的工作表\",\r\n                this.setState({\r\n                    json,\r\n                    data,\r\n                });\r\n            }\r\n            getMultiLang({ moduleId: 'api-print', callback })\r\n        }\r\n    }\r\n\r\n    shouldComponentUpdate = (nextProps = {}, nextState = {}) => {\r\n        const thisProps = this.props || {}, thisState = this.state || {};\r\n        if (Object.keys(thisProps).length !== Object.keys(nextProps).length ||\r\n            Object.keys(thisState).length !== Object.keys(nextState).length) {\r\n            return true;\r\n        }\r\n        for (const key in nextProps) {\r\n            if (!is(thisProps[key], nextProps[key])) {\r\n                return true;\r\n            }\r\n        }\r\n        for (const key in nextState) {\r\n            if (thisState[key] !== nextState[key] || !is(thisState[key], nextState[key])) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    close = () => {\r\n        this.setState({ show: false });\r\n    }\r\n    open = () => {\r\n        let { funcode, nodekey, appcode, oids } = this.props.data\r\n\r\n        ajax({\r\n            method: 'post',\r\n            url: '/nccloud/platform/print/queryTemplates.do',\r\n            data: { funcode, nodekey, appcode, oids },\r\n            mode: 'normal',\r\n            success: res => {\r\n                let data = res.data.data || res.data;\r\n                if (!data) {\r\n                    let error = res.data.error || res.error;\r\n                    if (error) {\r\n                        if (typeof error === 'object') {\r\n                            let keys = Object.values(error)\r\n                            toast({ color: 'warning', content: keys.join('||') });\r\n                        } else {\r\n                            toast({ color: 'warning', content: String(res) });\r\n                        }\r\n\r\n                    }\r\n                    return\r\n                }\r\n                let list = res.data.data || []\r\n                let printTemplateID = list.length ? list[0]['m_ctemplateid'] : ''\r\n\r\n                this.setState({\r\n                    printTemplateMenu: list,\r\n                    data: { ...this.state.data, printTemplateID },\r\n                    show: true,\r\n                });\r\n\r\n            },\r\n            error: res => {\r\n                toast({ color: 'danger', content: res.message });\r\n            },\r\n        })\r\n\r\n    }\r\n\r\n    // 提交事件\r\n    submit = () => {\r\n        //新加：license校验成功后，再打印\r\n        ajax({\r\n            method: 'post',\r\n            url: '/nccloud/platform/print/queryPrintAuthorize.do',\r\n            data: {},\r\n            success: res => {\r\n                let data = Object.assign({}, this.props.data, this.state.data)\r\n\r\n                let printTemplateID = this.state.data.printTemplateID;\r\n\r\n                data.printTemplateName = '';\r\n                let printTemplateMenu = this.state.printTemplateMenu;\r\n                if (printTemplateMenu && printTemplateMenu instanceof Array)\r\n                    printTemplateMenu.forEach(item => {\r\n                        if (item.m_ctemplateid == printTemplateID) {\r\n                            data.printTemplateName = item.m_vtemplatename;\r\n                        }\r\n                    })\r\n\r\n                let submitData = {\r\n                    url: this.props.url || '/nccloud/reva/revecont/print.do',\r\n                    params: Object.assign({}, Object.assign({}, data, { outputSetting: JSON.stringify(data), download: \"directOutput\", outputMode: data.outputMode })),\r\n                    enctype: 2,\r\n                    isCipher: true\r\n                };\r\n                formDownload(submitData);\r\n                if (typeof this.props.callback === 'function') {\r\n                    this.props.callback()\r\n                }\r\n                this.close()\r\n            },\r\n        })\r\n    }\r\n\r\n    handleTypeChange = value => {\r\n        this.setState({ data: Object.assign({}, this.state.data, { outputMode: value }) });\r\n    }\r\n    handlePrintTemplateIDChange = value => {\r\n        this.setState({ data: Object.assign({}, this.state.data, { printTemplateID: value }) });\r\n    };\r\n    handleMultiConfigChange = value => {\r\n        this.setState({ data: Object.assign({}, this.state.data, { MultiConfig: value }) });\r\n    }\r\n\r\n    changePdfConfigCheck = value => {\r\n        console.log(value)\r\n        this.setState({ data: Object.assign({}, this.state.data, { pdfConfig: value }) });\r\n    }\r\n\r\n    changeHtmlConfigCheck = value => {\r\n        this.setState({ data: Object.assign({}, this.state.data, { htmlConfig: value }) });\r\n    }\r\n    handlePrefixInputChange = value => {\r\n        this.setState({ data: Object.assign({}, this.state.data, { prefix: value }) });\r\n    }\r\n    handleThresholdInputChange = value => {\r\n        this.setState({ data: Object.assign({}, this.state.data, { threshold: value }) });\r\n    }\r\n\r\n    handleOtherSheet(type, val) {\r\n        this.setState({ data: Object.assign({}, this.state.data, { [type]: val }) });\r\n    }\r\n\r\n    gerMultitaskSetup = () => {\r\n        //  \"api-print-0018\": \"工作表名称\",\"api-print-0019\": \"行数阈值\",\"api-print-0020\": \"多任务设置\",\"api-print-0021\": \"注：设置单个Excel文件的行数，超过此行数自动新建文件\"\r\n        const { outputMode, sheetNamePreFix, dsPositionPolicy, fileVolume, isDifDocDifFile, canModifyType = false } = this.state.data;\r\n        const { json = {} } = this.state;\r\n        let multiTask = \"\";\r\n        const radioStyle = {\r\n            display: 'block',\r\n        };\r\n        const dsPositionPolicyList = [\r\n            { display: json[\"api-print-0013\"], value: 4 },//全部打印任务导出到同一个工作表\r\n            { display: json[\"api-print-0014\"], value: 5 },//每一个打印任务导出到不同的工作表\r\n            { display: json[\"api-print-0015\"], value: 6 },//每一个打印任务导出到不同的工作簿\r\n        ];\r\n        const isDifDocDifFileList = [\r\n            { display: json[\"api-print-0016\"], value: false },//全部打印任务导出到同一个文件\r\n            { display: json[\"api-print-0017\"], value: true },//每一个打印任务导出到不同的文件\r\n        ];\r\n        if (outputMode === \"excel\") {\r\n            multiTask = <div>\r\n                <Radio.RadioGroup\r\n                    name=\"type\"\r\n                    selectedValue={dsPositionPolicy}\r\n                    onChange={this.handleOtherSheet.bind(this, \"dsPositionPolicy\")}\r\n                >\r\n                    {dsPositionPolicyList.map((item, index) => {\r\n                        return (<Radio disabled={!canModifyType} style={radioStyle} key={index.toString()} value={item.value}>\r\n                            {item.display}\r\n                        </Radio>)\r\n                    })}\r\n                </Radio.RadioGroup>\r\n                <div className=\"form-region\">\r\n                    <p className=\"label\">{json[\"api-print-0018\"]}：</p>\r\n                    <div className=\"in-form\">\r\n                        <Input value={sheetNamePreFix}\r\n                            onChange={this.handleOtherSheet.bind(this, \"sheetNamePreFix\")} />\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-region\">\r\n                    <Tooltip inverse placement=\"top\" overlay={json[\"api-print-0021\"]}>\r\n                        <p className=\"label\">{json[\"api-print-0019\"]}：</p>\r\n                    </Tooltip>\r\n\r\n                    <div className=\"in-form\">\r\n                        <InputNumber iconStyle={1} min={1} value={fileVolume}\r\n                            onChange={this.handleOtherSheet.bind(this, \"fileVolume\")} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        } else if ([\"pdf\", \"html\"].includes(outputMode)) {\r\n            multiTask = <div>\r\n                <Radio.RadioGroup\r\n                    name=\"type\"\r\n                    selectedValue={isDifDocDifFile}\r\n                    onChange={this.handleOtherSheet.bind(this, \"isDifDocDifFile\")}\r\n                >\r\n                    {isDifDocDifFileList.map((item, index) => {\r\n                        return (<Radio disabled={!canModifyType} style={radioStyle} key={index.toString()} value={item.value}>\r\n                            {item.display}\r\n                        </Radio>)\r\n                    })}\r\n                </Radio.RadioGroup>\r\n            </div>\r\n        }\r\n        return <div className=\"task-container\">\r\n            <h3>{json[\"api-print-0020\"]}</h3>\r\n            {multiTask}\r\n        </div>\r\n    }\r\n\r\n    render() {\r\n        let { type } = this.state.data,\r\n            { json, printTemplateMenu } = this.state\r\n        /*   let ConfigTag = () => {\r\n\r\n               if (type === 'excel') {\r\n                   return <div className='config'>\r\n                       <fieldset>\r\n                           <legend>多任务设置</legend>\r\n                           <Radio.RadioGroup\r\n                               name=\"MultiConfig\"\r\n                               selectedValue={this.state.data.MultiConfig}\r\n                               onChange={this.handleMultiConfigChange.bind(this)}>\r\n\r\n                               <Radio key={1} value=\"1\">全部打印任务导出到同一个工作表</Radio>\r\n\r\n                               <Radio key={2} disabled value=\"2\">每个打印任务导出到不同的工作表</Radio>\r\n\r\n                               <Radio key={3} disabled value=\"3\">每个打印任务导出到不同的工作簿</Radio>\r\n\r\n                           </Radio.RadioGroup>\r\n                       </fieldset>\r\n\r\n                       <Form>\r\n                           <FormItem isRequire={true}\r\n                                       labelName=\"工作表前缀\"\r\n                                       htmlType=\"chinese\"\r\n                                       errorMessage=\"前缀格式错误\"\r\n                                       method=\"blur\"\r\n                           >\r\n                               <FormControl name=\"prefix\"\r\n                                              value={this.state.data.prefix}\r\n                                              onChange={this.handlePrefixInputChange}\r\n                                              placeholder=\"只能输入中文\"/>\r\n                           </FormItem>\r\n                           <FormItem isRequire={true}\r\n                                       labelName=\"行数阀值\"\r\n                                       method=\"blur\"\r\n                                       reg={/^[0-9]+$/}\r\n                                       errorMessage=\"行数阀值格式错误\">\r\n                               <FormControl name=\"threshold\"\r\n                                              value={this.state.data.threshold}\r\n                                              onChange={this.handleThresholdInputChange}\r\n                               />\r\n                           </FormItem>\r\n                       </Form>\r\n\r\n                   </div>\r\n               } else if (type === 'pdf') {\r\n\r\n                   return <div className='Config'>\r\n                       <Checkbox checked={this.state.data.pdfConfig}\r\n                                   onChange={this.changePdfConfigCheck}>每一个打印任务导出到不同的文件</Checkbox>\r\n                   </div>\r\n               } else {\r\n                   return <div className='Config'>\r\n                       <Checkbox checked={this.state.data.htmlConfig}\r\n                                   onChange={this.changeHtmlConfigCheck}>每一个打印任务导出到不同的文件</Checkbox>\r\n                   </div>\r\n               }\r\n           }*/\r\n        let templateChoice = () => {\r\n            if (!printTemplateMenu || printTemplateMenu.length <= 1) {\r\n                return ''\r\n            } else {\r\n                return (\r\n                    <div className=\"body\" style={{ padding: '20px' }}>\r\n                        <span>{json['api-print-0008' || '选择模板']}：</span>{' '}\r\n                        <Select\r\n                            value={this.state.data.printTemplateID}\r\n                            //style={{ width: 200, marginRight: 6 }}\r\n                            onChange={this.handlePrintTemplateIDChange}\r\n                            disabled={printTemplateMenu.length <= 1 ? true : false}\r\n                            fieldid=\"print-list\"\r\n                            className='print-out-select'\r\n                        >\r\n                            {printTemplateMenu.map((item, index) => {\r\n                                return (\r\n                                    <Option\r\n                                        value={item && item.m_ctemplateid}\r\n                                        key={index}\r\n                                        title={item && item.m_vtemplatename}\r\n                                    >\r\n                                        {item && item.m_vtemplatename}\r\n                                    </Option>\r\n                                );\r\n                            })}\r\n                        </Select>\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n        return <Modal\r\n            {...this.props}\r\n            fieldid=\"print\"\r\n            show={this.state.show}\r\n            ref={Modal => (this.Modal = Modal)}\r\n            className=\"senior print-output-contain\"\r\n            onHide={this.close}\r\n            zIndex={220} //cardtable最大化之后会被盖住，所以加这个属性\r\n        >\r\n            <HotKeys\r\n                keyMap={{\r\n                    sureBtnHandler:\r\n                        HotKeys.USUAL_KEYS.MODAL_CONFIRM,\r\n                    cancelBtnHandler:\r\n                        HotKeys.USUAL_KEYS.MODAL_CALCEL,\r\n                }}\r\n                handlers={{\r\n                    sureBtnHandler: () => {\r\n                        // 确定按钮的事件 增加top的判断避免所有弹窗逻辑都被触发 by bbqin\r\n                        if (this.Modal && this.Modal.isTopModal()) {\r\n                            this.submit();\r\n                        }\r\n                    },\r\n                    cancelBtnHandler: () => {\r\n                        // 取消按钮的事件 增加top的判断避免所有弹窗逻辑都被触发  by bbqin\r\n                        if (this.Modal && this.Modal.isTopModal()) {\r\n                            this.close();\r\n                        }\r\n                    },\r\n                }}\r\n                className=\"print-template-hotkeys-wrapper\"\r\n                focused={true}\r\n                attach={document.body}\r\n                display=\"inline\"\r\n            />\r\n\r\n            <Modal.Header closeButton>\r\n                <Modal.Title>{this.props.title || json['api-print-0009'] || '输出到文件'}</Modal.Title>\r\n            </Modal.Header>\r\n\r\n            <Modal.Body>\r\n\r\n                <div className=\"print-template-wrapper\">\r\n                    <div className=\"header\">\r\n                        <Radio.RadioGroup\r\n                            name=\"type\"\r\n                            selectedValue={this.state.data.outputMode}\r\n                            onChange={this.handleTypeChange.bind(this)}>\r\n\r\n                            <Radio key='excel' value=\"excel\">\r\n                                {json['api-print-0010' || '输出到EXCEL文件']}\r\n                            </Radio>\r\n\r\n                            <Radio key='pdf' value=\"pdf\">{json['api-print-0011' || '输出到PDF文件']}</Radio>\r\n\r\n                            <Radio key='html' value=\"html\">{json['api-print-0012' || '输出到HTML文件']}</Radio>\r\n\r\n                        </Radio.RadioGroup>\r\n                    </div>\r\n                    {\r\n                        templateChoice()\r\n                    }\r\n                    {/*<div className=\"config\">\r\n\r\n                            {ConfigTag()}\r\n                        </div>*/}\r\n                    {this.gerMultitaskSetup()}\r\n                </div>\r\n\r\n            </Modal.Body>\r\n\r\n            <Modal.Footer>\r\n                <Tooltip\r\n                    placement=\"top\"\r\n                    inverse\r\n                    overlay={`${json['api-print-0006']}  (${\r\n                        HotKeys.USUAL_KEYS.MODAL_CONFIRM\r\n                        })`}\r\n                    trigger={[\"hover\", \"focus\"]}\r\n                >\r\n                    <Button fieldid=\"confirm\" onClick={this.submit} colors=\"primary\">\r\n                        {json['api-print-0006' || '确定']}(<span className=\"text-decoration-underline\">Y</span>)\r\n                    </Button>\r\n                </Tooltip>\r\n                <Tooltip\r\n                    placement=\"top\"\r\n                    inverse\r\n                    overlay={`${json['api-print-0007']}  (${\r\n                        HotKeys.USUAL_KEYS.MODAL_CALCEL\r\n                        })`}\r\n                    trigger={[\"hover\", \"focus\"]}\r\n                >\r\n                    <Button fieldid=\"cancel\" onClick={this.close} colors=\"info\">\r\n                        {json['api-print-0007' || '取消']}(<span className=\"text-decoration-underline\">N</span>)\r\n                    </Button>\r\n                </Tooltip>\r\n            </Modal.Footer>\r\n        </Modal>\r\n\r\n    }\r\n}\r\n","import React, { PureComponent } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {\r\n    Modal as NCModal,\r\n    Button as NCButton,\r\n    Radio as NCRadio,\r\n    HotKeys as NCHotKeys,\r\n    Tooltip as NCTooltip,\r\n    Select as NCSelect,\r\n    Input as NCInput,\r\n    InputNumber as NCInputNumber,\r\n} from '@platform/base';\r\nimport { ajax, formDownload, getPlatformLang, toast, getMultiLang } from '@platform/api';\r\nrequire('./index.less');\r\n\r\nconst Option = NCSelect.Option || NCSelect.NCOption;\r\n//const OptGroup = NCSelect.OptGroup;\r\nexport class PrintOutputModal extends PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            json: {},\r\n            show: true,\r\n            data: { //确定输出以后传给后台数据\r\n                printTemplateID: props.printTemplateMenu.length ? props.printTemplateMenu[0]['m_ctemplateid'] : '', //模板id\r\n                outputMode: 'pdf',\r\n                MultiConfig: '1',\r\n                pdfConfig: false,\r\n                htmlConfig: false,\r\n                prefix: '',\r\n                threshold: 0,\r\n                dsPositionPolicy: 4,\r\n                fileVolume: 16000,\r\n                sheetNamePreFix: \"新的工作表\",\r\n                isDifDocDifFile: false,\r\n                canModifyType: props.canModifyType || false,\r\n            },\r\n        };\r\n    }\r\n\r\n    componentWillMount() {\r\n        let { json } = this.props\r\n        if (json) {\r\n            this.setState({ json });\r\n        } else {\r\n            let callback = (json, bool, inlt) => {\r\n                let data = this.state.data;\r\n                data.sheetNamePreFix = json['api-print-0022'] || \"新的工作表\",\r\n\r\n                this.setState({ json, data });\r\n            }\r\n            getPlatformLang({ moduleId: 'api-print', callback })\r\n        }\r\n    }\r\n\r\n    close = () => {\r\n        this.setState({ show: false });\r\n        this.closeTimer = setTimeout(() => {\r\n            let element = document.getElementsByClassName('print-output-modal-liuyjv-wrapper')[0];\r\n            if (element) {\r\n                ReactDOM.unmountComponentAtNode(element);\r\n                clearTimeout(this.closeTimer);\r\n                document.getElementById('app').removeChild(element);\r\n                this.closeTimer = null;\r\n            }\r\n        }, 200);\r\n    };\r\n    open = () => {\r\n        this.setState({ show: true });\r\n    };\r\n\r\n    // 提交事件\r\n    submit = () => {\r\n        let { data = {} } = this.props;\r\n        const { outputtype = \"templateOutput\" } = data;\r\n        //新加：license校验成功后，再打印\r\n        ajax({\r\n            method: 'post',\r\n            url: '/nccloud/platform/print/queryPrintAuthorize.do',\r\n            data: {},\r\n            success: res => {\r\n                data = Object.assign({}, this.props.data, this.state.data);\r\n\r\n                let printTemplateID = this.state.data.printTemplateID;\r\n                data.printTemplateName = '';\r\n                let printTemplateMenu = this.props.printTemplateMenu;\r\n                if (printTemplateMenu && printTemplateMenu instanceof Array)\r\n                    printTemplateMenu.forEach(item => {\r\n                        if (item.m_ctemplateid == printTemplateID) {\r\n                            data.printTemplateName = item.m_vtemplatename;\r\n                        }\r\n                    })\r\n\r\n                let submitData = {\r\n                    url: this.props.url || '/nccloud/reva/revecont/print.do',\r\n                    params: outputtype === \"directOutput\" ?\r\n                        Object.assign({}, Object.assign({}, data, { outputSetting: JSON.stringify(data), download: \"directOutput\", outputMode: data.outputMode }))\r\n                        : data,\r\n                    enctype: 2,\r\n                    isCipher: true,\r\n                };\r\n                formDownload(submitData);\r\n                if (typeof this.props.callback === 'function') {\r\n                    this.props.callback();\r\n                }\r\n                this.close();\r\n            },\r\n        })\r\n\r\n    };\r\n\r\n    handlePrintTemplateIDChange = value => {\r\n        this.setState({ data: Object.assign({}, this.state.data, { printTemplateID: value }) });\r\n    };\r\n    handleTypeChange = value => {\r\n        this.setState({ data: Object.assign({}, this.state.data, { outputMode: value }) });\r\n    };\r\n\r\n    handleOtherSheet(type, val) {\r\n        this.setState({ data: Object.assign({}, this.state.data, { [type]: val }) });\r\n    }\r\n\r\n    gerMultitaskSetup = () => {\r\n        //  \"api-print-0018\": \"工作表名称\",\"api-print-0019\": \"行数阈值\",\"api-print-0020\": \"多任务设置\",\"api-print-0021\": \"注：设置单个Excel文件的行数，超过此行数自动新建文件\"\r\n        const { outputMode, sheetNamePreFix, dsPositionPolicy, fileVolume, isDifDocDifFile, canModifyType = false } = this.state.data;\r\n        const { json = {} } = this.state;\r\n        let multiTask = \"\";\r\n        const radioStyle = { display: 'block' };\r\n        const dsPositionPolicyList = [\r\n            { display: json[\"api-print-0013\"], value: 4 }, //全部打印任务导出到同一个工作表\r\n            { display: json[\"api-print-0014\"], value: 5 }, //每一个打印任务导出到不同的工作表\r\n            { display: json[\"api-print-0015\"], value: 6 }, //每一个打印任务导出到不同的工作簿\r\n        ];\r\n        const isDifDocDifFileList = [\r\n            { display: json[\"api-print-0016\"], value: false }, //全部打印任务导出到同一个文件\r\n            { display: json[\"api-print-0017\"], value: true }, //每一个打印任务导出到不同的文件\r\n        ];\r\n        if (outputMode === \"excel\") {\r\n            multiTask = <div>\r\n                <NCRadio.NCRadioGroup\r\n                    name=\"type\"\r\n                    selectedValue={dsPositionPolicy}\r\n                    onChange={this.handleOtherSheet.bind(this, \"dsPositionPolicy\")}\r\n                >\r\n                    {dsPositionPolicyList.map((item, index) => {\r\n                        return (<NCRadio disabled={!canModifyType} style={radioStyle} key={index.toString()} value={item.value}>\r\n                            {item.display}\r\n                        </NCRadio>)\r\n                    })}\r\n                </NCRadio.NCRadioGroup>\r\n                <div className=\"form-region\">\r\n                    <p className=\"label\">{json[\"api-print-0018\"]}：</p>\r\n                    <div className=\"in-form\">\r\n                        <NCInput value={sheetNamePreFix}\r\n                            onChange={this.handleOtherSheet.bind(this, \"sheetNamePreFix\")} />\r\n                    </div>\r\n                </div>\r\n                <div className=\"form-region\">\r\n                    <NCTooltip inverse placement=\"top\" overlay={json[\"api-print-0021\"]}>\r\n                        <p className=\"label\">{json[\"api-print-0019\"]}：</p>\r\n                    </NCTooltip>\r\n\r\n                    <div className=\"in-form\">\r\n                        <NCInputNumber iconStyle={1} min={1} value={fileVolume}\r\n                            onChange={this.handleOtherSheet.bind(this, \"fileVolume\")} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        } else if ([\"pdf\", \"html\"].includes(outputMode)) {\r\n            multiTask = <div>\r\n                <NCRadio.NCRadioGroup\r\n                    name=\"type\"\r\n                    selectedValue={isDifDocDifFile}\r\n                    onChange={this.handleOtherSheet.bind(this, \"isDifDocDifFile\")}\r\n                >\r\n                    {isDifDocDifFileList.map((item, index) => {\r\n                        return (<NCRadio disabled={!canModifyType} style={radioStyle} key={index.toString()} value={item.value}>\r\n                            {item.display}\r\n                        </NCRadio>)\r\n                    })}\r\n                </NCRadio.NCRadioGroup>\r\n            </div>\r\n        }\r\n        return <div className=\"task-container\">\r\n            <h3>{json[\"api-print-0020\"]}</h3>\r\n            {multiTask}\r\n        </div>\r\n    }\r\n\r\n    render() {\r\n        let { printTemplateMenu, data = {} } = this.props;\r\n        let { json } = this.state;\r\n        let hideChoice = !printTemplateMenu || printTemplateMenu.length <= 1;\r\n        let { outputtype = \"templateOutput\" } = data;\r\n        let templateChoice = () => {\r\n            if (hideChoice) {\r\n                return ''\r\n            } else {\r\n                return (\r\n                    <div className=\"body\" style={{ padding: '20px' }}>\r\n                        <span>{json['api-print-0008' || '选择模板']}：</span>{' '}\r\n                        <NCSelect showClear={false}\r\n                            value={this.state.data.printTemplateID}\r\n                            //style={{ width: 200, marginRight: 6 }}\r\n                            onChange={this.handlePrintTemplateIDChange}\r\n                            disabled={printTemplateMenu.length <= 1 ? true : false}\r\n                            fieldid=\"print-list\"\r\n                            className='print-out-select'\r\n                        >\r\n                            {printTemplateMenu.map((item, index) => {\r\n                                return (\r\n                                    <Option\r\n                                        value={item && item.m_ctemplateid}\r\n                                        key={index}\r\n                                        title={item && item.m_vtemplatename}\r\n                                    >\r\n                                        {item && item.m_vtemplatename}\r\n                                    </Option>\r\n                                );\r\n                            })}\r\n                        </NCSelect>\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n\r\n        return (\r\n            <NCModal\r\n                fieldid=\"output\"\r\n                className='print-output-wrapper senior'\r\n                show={this.state.show}\r\n                ref={NCModal => (this.NCModal = NCModal)}\r\n                onHide={this.close}\r\n                zIndex={220} //cardtable最大化之后会被盖住，所以加这个属性\r\n            >\r\n\r\n                <NCHotKeys\r\n                    keyMap={{\r\n                        sureBtnHandler:\r\n                            NCHotKeys.USUAL_KEYS.NC_MODAL_CONFIRM,\r\n                        cancelBtnHandler:\r\n                            NCHotKeys.USUAL_KEYS.NC_MODAL_CALCEL,\r\n                    }}\r\n                    handlers={{\r\n                        sureBtnHandler: () => {\r\n                            // 确定按钮的事件 增加top的判断避免所有弹窗逻辑都被触发 by bbqin\r\n                            if (this.NCModal && this.NCModal.isTopModal()) {\r\n                                this.submit();\r\n                            }\r\n                        },\r\n                        cancelBtnHandler: () => {\r\n                            // 取消按钮的事件 增加top的判断避免所有弹窗逻辑都被触发  by bbqin\r\n                            if (this.NCModal && this.NCModal.isTopModal()) {\r\n                                this.close();\r\n                            }\r\n                        },\r\n                    }}\r\n                    className=\"print-template-hotkeys-wrapper\"\r\n                    focused={true}\r\n                    attach={document.body}\r\n                    display=\"inline\"\r\n                />\r\n\r\n                <NCModal.Header closeButton>\r\n                    <NCModal.Title>{this.props.title || json['api-print-0009'] || '输出到文件'}</NCModal.Title>\r\n                </NCModal.Header>\r\n\r\n                <NCModal.Body>\r\n                    <div className=\"print-output-template-wrapper\">\r\n                        <div className=\"print-choice\">\r\n                            <NCRadio.NCRadioGroup\r\n                                name=\"type\"\r\n                                selectedValue={this.state.data.outputMode}\r\n                                onChange={this.handleTypeChange.bind(this)}\r\n                            >\r\n                                <NCRadio key=\"excel\" value=\"excel\">\r\n                                    {json['api-print-0010' || '输出到EXCEL文件']}\r\n\r\n                                </NCRadio>\r\n\r\n                                <NCRadio key=\"pdf\" value=\"pdf\">\r\n                                    {json['api-print-0011' || '输出到PDF文件']}\r\n\r\n                                </NCRadio>\r\n\r\n                                <NCRadio key=\"html\" value=\"html\">\r\n                                    {json['api-print-0012' || '输出到HTML文件']}\r\n\r\n                                </NCRadio>\r\n                            </NCRadio.NCRadioGroup>\r\n                        </div>\r\n                        {\r\n                            templateChoice()\r\n                        }\r\n                        {this.gerMultitaskSetup()}\r\n                    </div>\r\n                </NCModal.Body>\r\n\r\n                <NCModal.Footer>\r\n                    <NCTooltip\r\n                        placement=\"top\"\r\n                        inverse\r\n                        overlay={`${json['api-print-0006']}  (${NCHotKeys.USUAL_KEYS.NC_MODAL_CONFIRM\r\n                            })`}\r\n                        trigger={[\"hover\", \"focus\"]}\r\n                    >\r\n                        <NCButton onClick={this.submit} colors=\"primary\" fieldid=\"confirm\">\r\n                            {json['api-print-0006' || '确定']}(<span className=\"text-decoration-underline\">Y</span>)\r\n\t                    </NCButton>\r\n                    </NCTooltip>\r\n                    <NCTooltip\r\n                        placement=\"top\"\r\n                        inverse\r\n                        overlay={`${json['api-print-0007']}  (${NCHotKeys.USUAL_KEYS.NC_MODAL_CALCEL\r\n                            })`}\r\n                        trigger={[\"hover\", \"focus\"]}\r\n                    >\r\n                        <NCButton onClick={this.close} colors=\"info\" fieldid=\"cancel\">\r\n                            {json['api-print-0007' || '取消']}(<span className=\"text-decoration-underline\">N</span>)\r\n\t                    </NCButton>\r\n                    </NCTooltip>\r\n                </NCModal.Footer>\r\n            </NCModal>\r\n        );\r\n    }\r\n}\r\n\r\nexport function output(props) {\r\n    //funcode和appcode一样，nodekey？oids？//问董跃龙\r\n    //默认是模板输出，如果outputtype是directOutput，是直接输出\r\n    let { funcode, nodekey, appcode, oids, outputtype = \"templateOutput\" } = props.data\r\n    //先查模板\r\n    let callback = (json, bool, inlt) => {\r\n        if (outputtype === \"directOutput\") {\r\n            return ReactDOM.render(<PrintOutputModal\r\n                {...props}\r\n                printTemplateMenu={[]}\r\n                json={json}\r\n            ></PrintOutputModal>, div)\r\n        } else {\r\n            ajax({\r\n                method: 'post',\r\n                url: '/nccloud/platform/print/queryTemplates.do', //加 license 校验\r\n                data: { funcode, nodekey, appcode, oids },\r\n                mode: 'normal',\r\n                success: res => {\r\n                    let data = res.data.data || res.data;\r\n                    if (!data) {\r\n                        let error = res.data.error || res.error;\r\n                        if (error) {\r\n                            if (typeof error === 'object') {\r\n                                let keys = Object.values(error)\r\n                                toast({ color: 'warning', content: keys.join('||') });\r\n                            } else {\r\n                                toast({ color: 'warning', content: String(res) });\r\n                            }\r\n\r\n                        }\r\n                        return\r\n                    }\r\n\r\n                    //list模板列表，list是数组，元素为object，object为模板标识，\r\n                    let list = res.data.data\r\n\r\n                    let isShow = document.getElementsByClassName('print-output-modal-liuyjv-wrapper')[0];\r\n                    //阻止连续多次点击时页面出现多个toast弹框\r\n                    if (isShow) {\r\n                        return false;\r\n                    }\r\n                    let div = document.createElement('div');\r\n                    div.className = 'print-output-modal-liuyjv-wrapper';\r\n                    document.getElementById('app').appendChild(div);\r\n\r\n                    return ReactDOM.render(<PrintOutputModal\r\n                        {...props}\r\n                        printTemplateMenu={list}\r\n                        json={json}\r\n                    ></PrintOutputModal>, div)\r\n                },\r\n                error: res => {\r\n                    toast({ color: 'danger', content: res.message });\r\n                },\r\n            })\r\n        }\r\n\r\n    }\r\n    getMultiLang({ moduleId: 'api-print', callback })\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Modal, Radio, Button, HotKeys, Tooltip } from '@platform/base';\r\nimport { toast, getMultiLang, formDownload, ajax, gzip as Gzip, getGlobalStorage } from '@platform/api';\r\n\r\nrequire('./index.less');\r\n\r\nexport class PrintTemplate extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            show: true,\r\n            appcode: this.props.appcode || '',\r\n            nodekey: this.props.nodekey || '',\r\n            type: this.props.type || '',\r\n            url: this.props.url || '',\r\n            data: this.props.data || '',\r\n            printTemplateMenu: this.props.printTemplateMenu || [],\r\n            printTemplateID: '',\r\n            json: {},\r\n        };\r\n    }\r\n\r\n    componentWillMount() {\r\n        let { json } = this.props\r\n        if (json) {\r\n            this.setState({\r\n                printTemplateID: this.props.printTemplateMenu.length ? this.props.printTemplateMenu[0].m_ctemplateid : '',\r\n                json,\r\n            });\r\n        } else {\r\n            let callback = (json, bool, inlt) => {\r\n                this.setState({\r\n                    printTemplateID: this.props.printTemplateMenu.length ? this.props.printTemplateMenu[0].m_ctemplateid : '',\r\n                    json,\r\n                });\r\n            }\r\n            getMultiLang({ moduleId: 'api-print', callback })\r\n        }\r\n    }\r\n\r\n    close = () => {\r\n        this.setState({ show: false });\r\n        this.closeTimer = setTimeout(() => {\r\n            let element = document.getElementsByClassName('print-modal-liuyjv-wrapper')[0];\r\n            if (element) {\r\n                ReactDOM.unmountComponentAtNode(element);\r\n                clearTimeout(this.closeTimer);\r\n                document.getElementById('app').removeChild(element);\r\n                this.closeTimer = null;\r\n            }\r\n        }, 200);\r\n    };\r\n    submit = () => {\r\n        if (!this.state.printTemplateID) {\r\n            return toast({ color: 'warning', content: this.state.json['api-print-0004'] || '模板ID参数为空' })\r\n        }\r\n        let data = Object.assign({}, this.state.data, { printTemplateID: this.state.printTemplateID });\r\n        this.props.callback(this.state.type, this.state.url, data, this.props.isCipher);\r\n        this.close();\r\n    };\r\n    handleChange = value => {\r\n        this.setState({ printTemplateID: value });\r\n    };\r\n\r\n    render() {\r\n        let { json } = this.state\r\n        return (\r\n            <Modal\r\n                fieldid=\"print-template\"\r\n                show={this.state.show}\r\n                className='print-template-modal-wrapper senior'\r\n                ref={Modal => (this.Modal = Modal)}\r\n                onHide={this.close}\r\n            >\r\n                <HotKeys\r\n                    keyMap={{\r\n                        sureBtnHandler:\r\n                            HotKeys.USUAL_KEYS.MODAL_CONFIRM,\r\n                        cancelBtnHandler:\r\n                            HotKeys.USUAL_KEYS.MODAL_CALCEL,\r\n                    }}\r\n                    handlers={{\r\n                        sureBtnHandler: () => {\r\n                            // 确定按钮的事件 增加top的判断避免所有弹窗逻辑都被触发 by bbqin\r\n                            if (this.Modal && this.Modal.isTopModal()) {\r\n                                this.submit();\r\n                            }\r\n                        },\r\n                        cancelBtnHandler: () => {\r\n                            // 取消按钮的事件 增加top的判断避免所有弹窗逻辑都被触发  by bbqin\r\n                            if (this.Modal && this.Modal.isTopModal()) {\r\n                                this.close();\r\n                            }\r\n                        },\r\n                    }}\r\n                    className=\"print-template-hotkeys-wrapper\"\r\n                    focused={true}\r\n                    attach={document.body}\r\n                    display=\"inline\"\r\n                />\r\n                <Modal.Header closeButton>\r\n                    <Modal.Title className={'u-modal-title'}>{this.props.modalTitle || json['api-print-0005'] || '打印模板选择'}</Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                    <div className=\"modal-body-wrapper\">\r\n                        <Radio.RadioGroup\r\n                            name=\"fruit\"\r\n                            selectedValue={this.state.printTemplateID}\r\n                            onChange={this.handleChange.bind(this)}\r\n                        >\r\n                            {this.state.printTemplateMenu.map((item, index) => {\r\n                                return (\r\n                                    <Radio className=\"nc-radio-wrapper\" value={item && item.m_ctemplateid}>\r\n                                        {item && item.m_vtemplatename}\r\n                                    </Radio>\r\n                                );\r\n                            })}\r\n                        </Radio.RadioGroup>\r\n                    </div>\r\n                </Modal.Body>\r\n\r\n                <Modal.Footer>\r\n                    <Tooltip\r\n                        placement=\"top\"\r\n                        inverse\r\n                        overlay={`${json['api-print-0006']}  (${HotKeys.USUAL_KEYS.MODAL_CONFIRM\r\n                            })`}\r\n                        trigger={[\"hover\", \"focus\"]}\r\n                    >\r\n                        <Button onClick={this.submit} colors=\"primary\" fieldid=\"confirm\">\r\n                            {json['api-print-0006' || '确定']}(<span className=\"text-decoration-underline\">Y</span>)\r\n\t                    </Button>\r\n                    </Tooltip>\r\n                    <Tooltip\r\n                        placement=\"top\"\r\n                        inverse\r\n                        overlay={`${json['api-print-0007']}  (${HotKeys.USUAL_KEYS.MODAL_CALCEL\r\n                            })`}\r\n                        trigger={[\"hover\", \"focus\"]}\r\n                    >\r\n                        <Button onClick={this.close} colors=\"info\" fieldid=\"cancel\">\r\n                            {json['api-print-0007' || '取消']}(<span className=\"text-decoration-underline\">N</span>)\r\n\t                    </Button>\r\n                    </Tooltip>\r\n                </Modal.Footer>\r\n            </Modal>\r\n        );\r\n    }\r\n}\r\n\r\nfunction getUserAgent() {\r\n    var userAgent = navigator.userAgent; //取得浏览器的userAgent字符串\r\n    //判断是否Opera浏览器\r\n    if (userAgent.indexOf(\"Opera\") > -1) {\r\n        return \"Opera\";\r\n    }\r\n    //判断是否Firefox浏览器\r\n    if (userAgent.indexOf(\"Firefox\") > -1) {\r\n        return \"FF\";\r\n    }\r\n    //判断是否chorme浏览器\r\n    if (userAgent.indexOf(\"Chrome\") > -1) {\r\n        return \"Chrome\";\r\n    }\r\n    //判断是否Safari浏览器\r\n    if (userAgent.indexOf(\"Safari\") > -1) {\r\n        return \"Safari\";\r\n    }\r\n    //判断是否IE浏览器\r\n    if (\r\n        userAgent.indexOf(\"compatible\") > -1 &&\r\n        userAgent.indexOf(\"MSIE\") > -1 &&\r\n        !isOpera\r\n    ) {\r\n        return \"IE\";\r\n    }\r\n    //判断是否Edge浏览器\r\n    if (userAgent.indexOf(\"Trident\") > -1) {\r\n        return \"Edge\";\r\n    }\r\n}\r\n\r\nfunction htmlPrint(type, url, data, json1, callback) {\r\n    let resCallback = (json, bool, inlt) => {\r\n        ajax({\r\n            method: \"post\",\r\n            url: url,\r\n            data: data,\r\n            print: true,\r\n            mode: \"normal\",\r\n            success: res => {\r\n                if (res.data) {\r\n                    if (callback && typeof callback === \"function\") {\r\n                        callback();\r\n                    }\r\n                    var newWin = window.open(\"\"); //新开页面\r\n                    // newWin.location = 'http://www.baidu.com';\r\n                    if (newWin) {\r\n                        newWin.document.title = json[\"api-print-0003\"] || \"打印预览\";\r\n                        // newWin.document.write(res.data); //输入要打印的内容\r\n                        newWin.document.body.innerHTML = res.data; // write 会导致ie下不能打印的问题\r\n                        // 打印后置\r\n                        if (getUserAgent() === \"Chrome\") {\r\n                            newWin.print();\r\n                            newWin.close();\r\n                        } else {\r\n                            setTimeout(() => {\r\n                                newWin.print();\r\n                                newWin.close();\r\n                            }, 50);\r\n                        }\r\n                    } else {\r\n                        toast({\r\n                            color: \"warning\",\r\n                            content:\r\n                                json[\"api-print-0001\"] ||\r\n                                \"您的浏览器阻止了弹出式窗口,请查看浏览器设置\",\r\n                        });\r\n                    }\r\n                }\r\n            },\r\n            error: res => {\r\n                toast({ color: \"danger\", content: res.message });\r\n            },\r\n        });\r\n    }\r\n    getMultiLang({ moduleId: \"api-print\", callback: resCallback });\r\n}\r\n\r\nfunction pdfPrint(type, url, data, isCipher = true) {\r\n    formDownload({\r\n        params: data,\r\n        url: url,\r\n        enctype: 2,\r\n        isCipher: isCipher\r\n    });\r\n}\r\n\r\nexport function print(\r\n    type = \"html\",\r\n    url,\r\n    data,\r\n    searchTemplate = true,\r\n    isCipher = true,\r\n) {\r\n    let gzip = getGlobalStorage(\"localStorage\", \"gzip\");\r\n    let gziptools = new Gzip();\r\n    //let callback = (json, bool, inlt) => {\r\n    if (searchTemplate) {\r\n        let { funcode, nodekey, appcode, oids } = data;\r\n        ajax({\r\n            method: \"post\",\r\n            url: \"/nccloud/platform/print/queryTemplates.do\",\r\n            data: { funcode, nodekey, appcode, oids },\r\n            //mode: \"normal\",\r\n            //print: true,\r\n            async: false,\r\n            success: res => {\r\n                let list = res.data.data || res.data;\r\n                let error = res.data.error || res.error;\r\n\r\n                //if (gzip) {\r\n                //list = gziptools.unzip(list);\r\n                //}\r\n                if (error) {\r\n                    toast({ color: \"danger\", content: error });\r\n                    return console.error(error);\r\n                }\r\n                if (Array.isArray(list)) {\r\n                    if (list.length === 1) {\r\n                        if (type === 'html') {\r\n                            htmlPrint(\r\n                                type,\r\n                                url,\r\n                                {\r\n                                    ...data,\r\n                                    printTemplateID: list[0][\"m_ctemplateid\"]\r\n                                        ? list[0][\"m_ctemplateid\"]\r\n                                        : null,\r\n                                },\r\n                                {},\r\n                            )\r\n                        } else {\r\n                            pdfPrint(\r\n                                type,\r\n                                url,\r\n                                {\r\n                                    ...data,\r\n                                    printTemplateID: list[0][\"m_ctemplateid\"]\r\n                                        ? list[0][\"m_ctemplateid\"]\r\n                                        : null,\r\n                                },\r\n                                isCipher\r\n                            )\r\n                        }\r\n                        // print(\r\n                        // \ttype,\r\n                        // \turl,\r\n                        // \t{\r\n                        // \t\t...data,\r\n                        // \t\tprintTemplateID: list[0][\"m_ctemplateid\"]\r\n                        // \t\t\t? list[0][\"m_ctemplateid\"]\r\n                        // \t\t\t: null\r\n                        // \t},\r\n                        // \tjson\r\n                        // );\r\n                    } else {\r\n                        if (list.length < 1) {\r\n                            getMultiLang({\r\n                                moduleId: \"api-print\",\r\n                                callback: json => {\r\n                                    toast({\r\n                                        color: \"warning\",\r\n                                        content: json[\"api-print-0002\"] || \"未查询到任何模板信息\",\r\n                                    });\r\n                                },\r\n                            });\r\n                            return;\r\n                        }\r\n                        let isShow = document.getElementsByClassName(\r\n                            \"print-modal-liuyjv-wrapper\",\r\n                        )[0];\r\n                        //阻止连续多次点击时页面出现多个toast弹框\r\n                        if (isShow) {\r\n                            return false;\r\n                        }\r\n                        let div = document.createElement(\"div\");\r\n                        div.className = \"print-modal-liuyjv-wrapper\";\r\n                        document.getElementById(\"app\").appendChild(div);\r\n                        return ReactDOM.render(\r\n                            <PrintTemplate\r\n                                appcode={appcode}\r\n                                nodekey={nodekey}\r\n                                type={type}\r\n                                url={url}\r\n                                data={data}\r\n                                printTemplateMenu={list}\r\n                                //callback={print}\r\n                                callback={type === 'html' ? htmlPrint : pdfPrint}\r\n                                isCipher={isCipher}\r\n                            />,\r\n                            div,\r\n                        );\r\n                    }\r\n                } else {\r\n                    if (list.data.length === 1) {\r\n                        if (type === 'html') {\r\n                            htmlPrint(\r\n                                type,\r\n                                url,\r\n                                {\r\n                                    ...data,\r\n                                    printTemplateID: list.data[0][\"m_ctemplateid\"]\r\n                                        ? list.data[0][\"m_ctemplateid\"]\r\n                                        : null,\r\n                                },\r\n                                {},\r\n                            )\r\n                        } else {\r\n                            pdfPrint(\r\n                                type,\r\n                                url,\r\n                                {\r\n                                    ...data,\r\n                                    printTemplateID: list.data[0][\"m_ctemplateid\"]\r\n                                        ? list.data[0][\"m_ctemplateid\"]\r\n                                        : null,\r\n                                },\r\n                                isCipher\r\n                            )\r\n                        }\r\n                        // print(\r\n                        // \ttype,\r\n                        // \turl,\r\n                        // \t{\r\n                        // \t\t...data,\r\n                        // \t\tprintTemplateID: list.data[0][\"m_ctemplateid\"]\r\n                        // \t\t\t? list.data[0][\"m_ctemplateid\"]\r\n                        // \t\t\t: null\r\n                        // \t},\r\n                        // \tjson\r\n                        // );\r\n                    } else if (list.data.length > 1) {\r\n                        let isShow = document.getElementsByClassName(\r\n                            \"print-modal-liuyjv-wrapper\",\r\n                        )[0];\r\n                        //阻止连续多次点击时页面出现多个toast弹框\r\n                        if (isShow) {\r\n                            return false;\r\n                        }\r\n                        let div = document.createElement(\"div\");\r\n                        div.className = \"print-modal-liuyjv-wrapper\";\r\n                        document.getElementById(\"app\").appendChild(div);\r\n                        return ReactDOM.render(\r\n                            <PrintTemplate\r\n                                appcode={appcode}\r\n                                nodekey={nodekey}\r\n                                type={type}\r\n                                url={url}\r\n                                //json={json}\r\n                                data={data}\r\n                                printTemplateMenu={list.data}\r\n                                //callback={print}\r\n                                callback={type === 'html' ? htmlPrint : pdfPrint}\r\n                                isCipher={isCipher}\r\n                            />,\r\n                            div,\r\n                        );\r\n                    } else {\r\n                        getMultiLang({\r\n                            moduleId: \"api-print\",\r\n                            callback: json => {\r\n                                toast({\r\n                                    color: \"warning\",\r\n                                    content: json[\"api-print-0002\"] || \"未查询到任何模板信息\",\r\n                                });\r\n                            },\r\n                        });\r\n                        return;\r\n                        // return toast({\r\n                        // \tcolor: \"warning\",\r\n                        // \tcontent: json[\"api-print-0002\"] || \"未查询到任何模板信息\"\r\n                        // });\r\n                    }\r\n                }\r\n            },\r\n            error: res => {\r\n                toast({ color: \"danger\", content: res.message });\r\n            },\r\n        });\r\n    } else {\r\n        if (type == \"html\") {\r\n            htmlPrint(type, url, data, {});\r\n        } else {\r\n            pdfPrint(type, url, data, isCipher)\r\n        }\r\n    }\r\n    //};\r\n\r\n}\r\n\r\nexport function printer(type = \"html\", url, data, isCipher = true) {\r\n    let { funcode, nodekey, appcode, oids } = data;\r\n    //let callback = (json, bool, inlt) => {\r\n    ajax({\r\n        method: \"post\",\r\n        url: \"/nccloud/platform/print/queryTemplates.do\",\r\n        data: { funcode, nodekey, appcode, oids },\r\n        //mode: \"normal\",\r\n        async: false,\r\n        success: res => {\r\n            let list = res.data.data || res.data;\r\n            if (list.length === 1) {\r\n                // print(\r\n                //     type,\r\n                //     url,\r\n                //     {\r\n                //         ...data,\r\n                //         printTemplateID: list[0][\"m_ctemplateid\"]\r\n                //             ? list[0][\"m_ctemplateid\"]\r\n                //             : null\r\n                //     },\r\n                //     json\r\n                // );\r\n                if (type === 'html') {\r\n                    htmlPrint(\r\n                        type,\r\n                        url,\r\n                        {\r\n                            ...data,\r\n                            printTemplateID: list[0][\"m_ctemplateid\"]\r\n                                ? list[0][\"m_ctemplateid\"]\r\n                                : null,\r\n                        },\r\n                        {},\r\n                    )\r\n                } else {\r\n                    pdfPrint(\r\n                        type,\r\n                        url,\r\n                        {\r\n                            ...data,\r\n                            printTemplateID: list[0][\"m_ctemplateid\"]\r\n                                ? list[0][\"m_ctemplateid\"]\r\n                                : null,\r\n                        }),\r\n                        isCipher\r\n                }\r\n            } else {\r\n                if (list.length < 1) {\r\n                    getMultiLang({\r\n                        moduleId: \"api-print\",\r\n                        callback: json => {\r\n                            toast({\r\n                                color: \"warning\",\r\n                                content: json[\"api-print-0002\"] || \"未查询到任何模板信息\",\r\n                            });\r\n                        },\r\n                    })\r\n                    return;\r\n                }\r\n                let isShow = document.getElementsByClassName(\r\n                    \"print-modal-liuyjv-wrapper\",\r\n                )[0];\r\n                //阻止连续多次点击时页面出现多个toast弹框\r\n                if (isShow) {\r\n                    return false;\r\n                }\r\n                let div = document.createElement(\"div\");\r\n                div.className = \"print-modal-liuyjv-wrapper\";\r\n                document.getElementById(\"app\").appendChild(div);\r\n                return ReactDOM.render(\r\n                    <PrintTemplate\r\n                        appcode={appcode}\r\n                        nodekey={nodekey}\r\n                        type={type}\r\n                        url={url}\r\n                        // json={json}\r\n                        data={data}\r\n                        printTemplateMenu={list}\r\n                        //callback={print}\r\n                        callback={type === 'html' ? htmlPrint : pdfPrint}\r\n                        isCipher={isCipher}\r\n                    />,\r\n                    div,\r\n                );\r\n            }\r\n        },\r\n        error: res => {\r\n            toast({ color: \"danger\", content: res.message });\r\n        },\r\n    });\r\n    //};\r\n    //getMultiLang({ moduleId: \"api-print\", callback });\r\n}","import React, { Component } from 'react';\r\nimport { toast } from '@platform/api';\r\nimport { ajax } from '@platform/api';\r\nimport getUserId from './getUserId';\r\nimport getUserInfo from './getUserInfo';\r\n//import BillErrorTrack from '..//BillErrorTrack';\r\nimport { BillErrorTrack } from '@platform/base';\r\nimport { codes } from './closeStatus';\r\nimport { ViewModel, getSafeRandom } from '@platform/api'\r\nimport { cardCache } from '@platform/api';\r\nimport { clearToast } from '@platform/api';\r\nimport { gzip as Gzip } from '@platform/api';\r\nimport { getMultiLang } from '@platform/api';\r\n\r\nconst gzip = new Gzip();\r\n\r\nrequire('./index.less');\r\n\r\nlet { getGlobalStorage, setGlobalStorage, getData, setData } = ViewModel;\r\n\r\nconst { updateHeadCache, newUpdateHeadCache } = cardCache;\r\n\r\nconst defaultUserId = ''; // renyjk 仅仅用于本地测试 \r\nconst isLocal = NODE_ENV === 'development';\r\nconst nameSpace = 'nccloud_platfrom_native_socket_billinfo';\r\n\r\n/**\r\n * 生成唯一标识\r\n */\r\nfunction uuidv4() {\r\n    return 'xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n        // eslint-disable-next-line no-bitwise\r\n        var r = (getSafeRandom() * 16) | 0,\r\n            v = c == 'x' ? r : (r & 0x3) | 0x8;\r\n        return v.toString(16);\r\n    });\r\n}\r\n\r\n//let wsLocation = '172.27.35.1:9991';\r\n//let wsLocation = '172.20.53.89:8883';\r\n//let wsLocation = '172.20.58.20:80';\r\n\r\n/**\r\n * 建立webSocket连接，并监听事件\r\n * @param {*} config \r\n */\r\nexport function connectMesg(config) {\r\n    return (\r\n        <Socket\r\n            getThis={_this => {\r\n                this.mySocket = _this;\r\n            }}\r\n            pageInstance={this}\r\n            config={config || {}}\r\n            output={this.output}\r\n            rootprops={this.props}\r\n        />\r\n    );\r\n}\r\n\r\n/**\r\n * 主动显示提示\r\n * @param {*} config \r\n */\r\nexport function showToast(config = {}) {\r\n    if (config.gtxid && this.mySocket) {\r\n        // 使用gtxid进行对象的存储  这样connect中才能比较好一一对应\r\n        top.SocketConfig = top.SocketConfig || {};\r\n        top.SocketConfig[config.gtxid] = {\r\n            ...config,\r\n            ...(top.SocketConfig[config.gtxid] || {}),\r\n        };\r\n    }\r\n    //查询追溯数据\r\n    (config.gtxid || config.message) && ajax({\r\n        url: '/nccloud/platform/fixdata/QueryErrormsgAction.do',\r\n        data: { gtxid: config.gtxid || '' },\r\n        success: res => {\r\n            // console.log(res); res.data && \r\n            if (res.data && res.success) {\r\n                let topMark = 'socketErrorToast' + config.gtxid;\r\n                let toastMark = top && top.document.querySelectorAll(`.toast-zijinyun-project[data-mark=\"${topMark}\"]`);\r\n                // CLOUD-183261  当设置了showtoast为false之后  他们也可能刷新内页  导致这个提示弹出\r\n                if (top.isShowToast && this.mySocket && toastMark && toastMark.length && JSON.stringify(top.isShowToast).indexOf('false') !== -1) {\r\n                    return;\r\n                }\r\n                // 先弹出了外层  然后我刷新内页会导致再弹出一个 所以这里要清理下外层的toast\r\n                if (toastMark && toastMark.length) {\r\n                    Array.from(toastMark).forEach(el => {\r\n                        if (el) {\r\n                            el.parentNode.removeChild(el);\r\n                        }\r\n                    });\r\n                    let toasts = Object.assign([], window.toastModal),\r\n                        n = 0;\r\n                    toasts.forEach((val, index) => {\r\n                        if (val && val.props && val.props.mark && val.props.mark === topMark && window.toastModal) {\r\n                            window.toastModal.splice(index - n, 1);\r\n                            n++;\r\n                        }\r\n                    });\r\n                }\r\n                // 多语获取\r\n                let viewTitle = this.mySocket ? this.mySocket.viewTitleLang : '发送失败';\r\n                let viewBtnText = this.mySocket ? this.mySocket.viewBtnLang : '立即查看';\r\n\r\n                toast({\r\n                    mark: 'socketErrorToast', // 解决当前页面刷新导致的多次弹出问题 也可以为切换数据也cardPagination使用\r\n                    color: 'danger',\r\n                    title: viewTitle,\r\n                    customBtnBeforeClose: config.isShowView !== false ? (\r\n                        <span onClick={() => {\r\n                            if (this.mySocket) {\r\n                                this.mySocket.gtxid = config.gtxid;\r\n                                this.mySocket.billpk = config.billpk;\r\n                                this.mySocket.setState({ showBillTrack: true });\r\n                            }\r\n                        }\r\n                        }\r\n                        > {viewBtnText}\r\n                        </span>\r\n                    ) : <span />,\r\n                    groupOperation: true,\r\n                    groupOperationMsg: [config.message || res.data || ''],\r\n                });\r\n            } else {\r\n                // 没有获取数据情况比较复杂  暂时不进行提示\r\n                console.log('没有res.data或者res不成功', res);\r\n            }\r\n        },\r\n        error: err => {\r\n            if (err) {\r\n                console.error(err);\r\n                toast({ color: 'danger', content: JSON.stringify(err.message) });\r\n            }\r\n        },\r\n    });\r\n}\r\n\r\nclass Socket extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        typeof this.props.getThis === 'function' && this.props.getThis(this);\r\n        this.state = {\r\n            showBillTrack: false,\r\n            json: {},\r\n            LangData: null,\r\n        };\r\n        this.gtxid = '';\r\n        this.billpk = '';\r\n        this.billtype = this.props.config.billtype;\r\n\r\n        //修改表格连续多次更新，只有最后一次更新有效问题\r\n        this.refreshTableData = {};\r\n\r\n        // 页面连接标识，用户接收消息时，判断是不是该连接\r\n        this.tabid = '';\r\n\r\n        // 生成唯一id   解决当前图标因为id唯一导致的不能多次渲染的问题\r\n        this.cuuid = uuidv4();\r\n\r\n        // 全局通信器\r\n        top.SocketMessageFun = top.SocketMessageFun || {};\r\n        top.SocketMessageFun[this.cuuid] = this.handleMessage;\r\n    }\r\n\r\n    componentWillMount() {\r\n        let callback = (json, bool, LangData) => {\r\n            this.setState({ json, LangData });\r\n            this.viewTitleLang = json['page-socket-0001'];\r\n            this.viewBtnLang = json['page-socket-0002'];\r\n        };\r\n        getMultiLang({ moduleId: 'page_socket', callback });\r\n    }\r\n\r\n    componentDidMount() {\r\n        // 信息初始化到page上 给其他组件跨使用\r\n        let { pageInstance, config } = this.props;\r\n        let {\r\n            isShowToast = true,\r\n            tableAreaCode, //列表表格区域编码\r\n            billpkname, //列表表格主键名\r\n            formAreaCode, //卡片表头区域编码\r\n            billtype,\r\n            billtypeFromList, //'string' 若有值，列表的billtype从列表行上取该字段\r\n            errorViewType,\r\n            dataSource,\r\n            extraInfos, // 所有的extraInfos 根据区域等区分 \r\n        } = config;\r\n        // toast 比较特殊  单独一个参数\r\n        top.isShowToast = top.isShowToast || {};\r\n        top.isShowToast[this.cuuid] = isShowToast;\r\n\r\n        let oldBillInfo = getData(nameSpace) || {};\r\n\r\n        let nativeSocketBillInfo = {\r\n            ...oldBillInfo,\r\n            billpkname,\r\n            billtype,\r\n            errorViewType,\r\n            dataSource,\r\n            extraInfos,\r\n            billtypeFromList,\r\n        };\r\n\r\n        console.log('websocket 初始化参数:', config);\r\n\r\n        if (tableAreaCode) { // 列表\r\n            nativeSocketBillInfo.tableAreaCode = tableAreaCode;\r\n        }\r\n\r\n        if (formAreaCode) { //卡片\r\n            nativeSocketBillInfo.formAreaCode = formAreaCode;\r\n        }\r\n\r\n        setData(nameSpace, nativeSocketBillInfo);\r\n\r\n        // tabid 给消息交互做页签标识  当前页签的才产生交互\r\n        if (!this.tabid) {\r\n            this.tabid = top && top.WebSocketTabid ? top.WebSocketTabid : this.randomNumber();\r\n            // 挂载下 给ajax 使用\r\n            window.WebSocketTabid = this.tabid;\r\n            top.WebSocketTabid = this.tabid;\r\n            // 将tabid 放置全局缓存，重试、回退使用\r\n            //this.addTabid();\r\n        }\r\n        console.log('当前页签的tabid为:', window.WebSocketTabid);\r\n\r\n        //关闭当前页签\r\n        window.addEventListener('beforeunload', this.handleBeforeUnLoad);\r\n    }\r\n\r\n    handleBeforeUnLoad = () => {\r\n\r\n        // 修复审批中心 回退成功不更新的bug\r\n        top.SocketMessageFun[this.cuuid] = null;\r\n        delete top.SocketMessageFun[this.cuuid];\r\n\r\n        //this.removeTabid();\r\n\r\n        //有可能页签未关闭，1s后未关闭，重新放入localStorage\r\n        // setTimeout(() => {\r\n        //     this.addTabid();\r\n        // }, 1000);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        // 销毁之后删除tabid\r\n        //this.removeTabid();\r\n        top.SocketMessageFun[this.cuuid] = null;\r\n        delete top.SocketMessageFun[this.cuuid];\r\n        this.props.pageInstance.mySocket = null;\r\n        window.removeEventListener('beforeunload', this.handleBeforeUnLoad);\r\n    }\r\n\r\n    //打开页签，将页签id存localStorage\r\n    addTabid = () => {\r\n        let tabidStore = getGlobalStorage('localStorage', 'tabidStore');\r\n        if (tabidStore) {\r\n            tabidStore = JSON.parse(tabidStore);\r\n            if (tabidStore instanceof Array && this.tabid) {\r\n                tabidStore.push(this.tabid);\r\n            }\r\n        } else {\r\n            tabidStore = [this.tabid];\r\n        }\r\n        setGlobalStorage('localStorage', 'tabidStore', JSON.stringify(tabidStore));\r\n    }\r\n\r\n    //判断socket返回的tadid是否是当前打开页签的\r\n    hasOpenedTab = tabid => {\r\n        let tabidStore = getGlobalStorage('localStorage', 'tabidStore');\r\n        if (tabidStore) {\r\n            tabidStore = JSON.parse(tabidStore);\r\n            if (tabidStore instanceof Array && tabidStore.length && tabidStore.includes(tabid)) return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    //页面关闭时，将页签id从localStorage中删除\r\n    removeTabid = () => {\r\n        let tabidStore = getGlobalStorage('localStorage', 'tabidStore');\r\n        if (tabidStore) {\r\n            tabidStore = JSON.parse(tabidStore);\r\n            if (tabidStore instanceof Array && tabidStore.length && this.tabid) {\r\n                let index = tabidStore.indexOf(this.tabid);\r\n                if (index != -1) {\r\n                    tabidStore.splice(index, 1);\r\n                    setGlobalStorage('localStorage', 'tabidStore', JSON.stringify(tabidStore));\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    //将多次行数据更新合并为一次更新\r\n    mergeTableData = () => {\r\n        let refreshTable = [];\r\n        for (let item of Object.values(this.refreshTableData)) {\r\n            refreshTable.push(...item);\r\n        }\r\n        return refreshTable;\r\n    }\r\n\r\n    //接收消息 处理界面\r\n    handleMessage = evt => {\r\n        let userid = getUserId() || defaultUserId,\r\n            ds = getUserInfo('datasource') || '',\r\n            data = JSON.parse(evt.data);\r\n        if (data && data.origin === 'websocket-server') {\r\n            // system 是 true时，为公共系统提示\r\n            return;\r\n        }\r\n\r\n        let resMessage = gzip.unzip(data.message) || {};\r\n\r\n        let { pageInstance, config } = this.props;\r\n        let {\r\n            isShowView = true,\r\n            errorViewType = true,\r\n            isShowToast = true,\r\n            onMessage, //注册回调\r\n            tableAreaCode, //列表表格区域编码\r\n            tableType = 'table', //表格类型：默认是simpleTable\r\n            billpkname, //列表表格主键名\r\n            headBtnAreaCode, //卡片标题区按钮区域编码\r\n            formAreaCode, //卡片表头区域编码\r\n            dataSource, // 缓存的pk\r\n        } = config;\r\n\r\n        // 当前用户，激活页签下显示\r\n        let condition = data.targetids.includes(userid + ds) && !document.hidden;\r\n\r\n        // 为 saga 错误类型时显示\r\n        let saga_mesg = data.origin === 'ncc-server' && resMessage.type === 'saga_error';\r\n\r\n        if (condition) {\r\n            if (saga_mesg) {\r\n                //if (resMessage.error) {\r\n                if (resMessage.billtype) this.billtype = resMessage.billtype;\r\n                if (Array.isArray(resMessage.refreshData) && resMessage.refreshData.length > 0) {\r\n                    this.gtxid = resMessage.refreshData[0].saga_gtxid;\r\n                    this.billpk = resMessage.refreshData[0][billpkname || '_businessPk'];\r\n                }\r\n                //}\r\n            }\r\n        }\r\n\r\n        // 使用gtxid进行对象的存储  这样connect中才能比较好一一对应\r\n        if (top && this.gtxid) {\r\n            top.SocketConfig = top.SocketConfig || {};\r\n            top.SocketConfig[this.gtxid] = {\r\n                isShowView,\r\n                errorViewType,\r\n                isShowToast,\r\n            };\r\n        }\r\n\r\n        //正常的单据saga错误消息\r\n        let billSagaErrorMesg = data.targetids.includes(userid + ds) && resMessage.tabid === this.tabid;\r\n\r\n        //若返回的tabid 跟当前所有打开页签都不匹配，则对比pk后, 更新当前激活页签数据\r\n        //使用场景：tabid不匹配时，只对比当前页签数据，更新当前页签\r\n        // 1.重试或回退 返回的 tadid 始终是第一次重试的 tabid--后台无法处理;\r\n        // 2.点了提交，关闭页签，又重新打开页签后，消息才返回；由于tabid不对，当前页签无法更新\r\n        //let hintErrorMesg = condition && !this.hasOpenedTab(resMessage.tabid);\r\n        let hintErrorMesg = condition && (resMessage.isRepeat || resMessage.isCompensate);\r\n        console.log('若为重试/回退操作,只更新激活页签,hintErrorMesg:', hintErrorMesg);\r\n\r\n        // 为龙哥新增 重试、回退成功后的错误消息\r\n        let hint_mesg = data.origin === 'ncc-server' && resMessage.type === 'saga_hint';\r\n        // 重试或者回退成功的消息提示\r\n        if (hint_mesg) {\r\n            if (!resMessage.error) {\r\n                clearToast('socketErrorToast'); // 清理一进入页面就提示处理的哪个问题\r\n            }\r\n        }\r\n\r\n        // 消息和交互分開\r\n        if (billSagaErrorMesg || hintErrorMesg) {\r\n            //调用业务组注册的回调\r\n            if (typeof onMessage === 'function') {\r\n                // 错误中心，重试或者回退成功的提示，无法获取到，因为重试或者回退成功，龙哥给的tabid不对(始终是第一次重试的tabid)\r\n                onMessage({ ...this.props, ...this.output }, resMessage);\r\n            }\r\n\r\n            if (typeof window.top.onSocketMessage === 'function') {\r\n                window.top.onSocketMessage(resMessage);\r\n            }\r\n\r\n            //标准交互只监听来源为 ncc-server 且 错误类型为 saga_error 的消息\r\n            if (!saga_mesg) return;\r\n\r\n            // 更新界面时，先对比pk是否相同，相同时，在更新组件数据  已确认全领域 pk 唯一\r\n            //1------------------更新列表 ----------------------//\r\n            //更新表格状态\r\n            if (tableAreaCode) {\r\n                if (tableType === 'simpleTable') {\r\n                    tableType = 'table';\r\n                }\r\n                // 更新表格数据\r\n                // 存在问题：连续调用多次，表格只更新一次， state更新问题\r\n                // 根据billpk gtxid累加数据 更新时 累加数据一次更新\r\n                this.refreshTableData[this.billpk || tableAreaCode] = resMessage.refreshData;\r\n                if (!resMessage.refreshData) { // 有一些节点不传refreshData （财务杨龙  会计平台  平台日志）\r\n                    return;\r\n                }\r\n                let refreshData = this.mergeTableData();\r\n                pageInstance[tableType].updateDataByRefresh(tableAreaCode, billpkname, refreshData, resMessage.msg);\r\n            }\r\n            //2-------------------更新卡片-----------------------//\r\n            if (Array.isArray(resMessage.refreshData)) {\r\n\r\n                let oldBillPk = pageInstance.form.getFormItemsValue(formAreaCode, billpkname);\r\n                oldBillPk = oldBillPk && oldBillPk.value; // 当前页面billpk\r\n\r\n                let refreshData = resMessage.refreshData[0];\r\n                if (resMessage.refreshData.length > 1) {\r\n                    refreshData = resMessage.refreshData.find(e => (e[billpkname] && e[billpkname] == oldBillPk) || e['_businessPk'] == oldBillPk);\r\n                }\r\n                let billpk = refreshData && (refreshData[billpkname] || refreshData['_businessPk']); // 返回数据中的billpk\r\n\r\n                console.log('billpk:', billpk, 'oldBillPk', oldBillPk);\r\n\r\n                //更新标题区按钮状态 \r\n                if (headBtnAreaCode && billpk == oldBillPk) {\r\n                    pageInstance.button.toggleErrorStatus(headBtnAreaCode, { isError: resMessage.error });\r\n                }\r\n\r\n                //更新卡片表头数据\r\n                if (formAreaCode) {\r\n                    pageInstance.form.updateDataByRefresh(formAreaCode, refreshData, billpkname, dataSource, resMessage.msg);\r\n                }\r\n            }\r\n\r\n            // 更新缓存\r\n            // let newData = resMessage.refreshData && (resMessage.refreshData[0] || {});\r\n            // dataSource && formAreaCode && updateHeadCache(dataSource, newData[billpkname], formAreaCode, newData);\r\n\r\n            // 特殊场景处理，一次返回多条数据的情况 --修复黄开高问题，待验证\r\n            let newData = resMessage.refreshData || [];\r\n            dataSource && formAreaCode && newUpdateHeadCache(dataSource, billpkname, formAreaCode, newData);\r\n        }\r\n    }\r\n\r\n    // 创建连接时间戳\r\n    randomNumber = () => {\r\n        const now = new Date();\r\n        let month = now.getMonth() + 1;\r\n        let day = now.getDate();\r\n        let hour = now.getHours();\r\n        let minutes = now.getMinutes();\r\n        let seconds = now.getSeconds();\r\n        return now.getFullYear().toString() + month.toString() + day + hour + minutes + seconds + (Math.round(getSafeRandom() * 23 + 100)).toString();\r\n    }\r\n\r\n    render() {\r\n        let { config } = this.props;\r\n        let {\r\n            billtype, //单据类型\r\n            errorViewType = true, // 是否显示 单据追溯\r\n        } = config;\r\n\r\n        return errorViewType === 'none' ? null : (\r\n            <BillErrorTrack\r\n                show={this.state.showBillTrack}\r\n                close={() => {\r\n                    this.setState({ showBillTrack: false });\r\n                }}\r\n                pk={this.billpk} //单据id\r\n                type={this.billtype || billtype} //单据类型\r\n                gtxid={this.gtxid} //错误id\r\n                errorViewType={errorViewType}\r\n                fromToastTip={true}\r\n            />\r\n        );\r\n    }\r\n}","import { connectMesg, showToast } from './create';\r\nexport default { connectMesg, showToast };","\r\nimport { isArray } from '@platform/api';\r\nconst PID = '__root__';\r\nlet parentPk = null;\r\n\r\n/* 根据key获取子树 */\r\nexport function getItem(treeData, key) {\r\n    if (!key) {\r\n        return treeData;\r\n    }\r\n    let length = treeData.length;\r\n    for (let i = 0; i < length; i++) {\r\n        let item = treeData[i];\r\n        if (item.key == key || item.refpk == key) {\r\n            return item;\r\n        } else if (Array.isArray(item.children)) {\r\n            let res = getItem(item.children, key);\r\n            if (res) {\r\n                return res;\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\n/** 将树拉平为数据 */\r\nexport function treeToList(treeData, list = []) {\r\n    if (Array.isArray(treeData)) {\r\n        treeData.forEach(e => {\r\n            // 获取除 children 外的其他属性，并且放进list数组\r\n            let { children, ...others } = e;\r\n            list.push({ ...others });\r\n            if (Array.isArray(e.children)) {\r\n                treeToList(e.children, list);\r\n            }\r\n        });\r\n        // 返回list集合\r\n        return list;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\n/**获取所有主键*/\r\nexport function getAllTreeKeys(treeData,list=[]){\r\n    if (Array.isArray(treeData)) {\r\n        treeData.forEach(e => {\r\n            // 获取除 children 外的其他属性，并且放进list数组\r\n            let { refpk,key,id } = e;\r\n            let pk =  refpk || key || id;\r\n            list.push(pk);\r\n            if (Array.isArray(e.children)) {\r\n                getAllTreeKeys(e.children, list);\r\n            }\r\n        });\r\n        // 返回list集合\r\n        return list;\r\n    } else {\r\n        return false;\r\n    }\r\n}\r\n\r\n/** 添加isleaf标识 ？？？？？*/\r\n/// 外部未引用\r\nexport function addIsLeaf(data, { resetIcon } = {}) {\r\n    (data || []).forEach(item => {\r\n        // 不应该一股脑\r\n        let ib = item.iconBox || {};\r\n        // 需求要求的是取  默认true\r\n        item.iconBox = resetIcon === false ? ib : {\r\n            addIcon: true,\r\n            delIcon: true,\r\n            editIcon: true,\r\n            ...ib,\r\n        };\r\n        if (!item.hasOwnProperty('isleaf')) {\r\n            if (Array.isArray(item.children) && item.children.length) {\r\n                item.isleaf = false;\r\n                addIsLeaf(item.children);\r\n            } else {\r\n                item.isleaf = true;\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n\r\nexport function addNodeFun(treeData, child, isBefore) {\r\n    if (!child.pid) {\r\n        treeData.push(child);\r\n        return;\r\n    }\r\n    const loop = data => {\r\n        data.forEach(item => {\r\n            if (item.refpk === child.pid) {\r\n                if (Array.isArray(item.children)) {\r\n                    if (isBefore) {\r\n                        item.children.unshift(child);\r\n                    } else {\r\n                        item.children.push(child);\r\n                    }\r\n                } else {\r\n                    item.children = [child];\r\n                }\r\n                item.isleaf = false;\r\n                item.isLeaf = false;\r\n                return true;\r\n            } else if (Array.isArray(item.children)) {\r\n                let res = loop(item.children);\r\n                if (res) {\r\n                    return false;\r\n                }\r\n            }\r\n        });\r\n    };\r\n    loop(treeData);\r\n}\r\n\r\n\r\n//外部未引用\r\n//  获取符合查询关键字的节点的父节点\r\nexport function getParentKey(key, tree) {\r\n    let parentKey;\r\n    for (let i = 0; i < tree.length; i++) {\r\n        const node = tree[i];\r\n        if (node.children) {\r\n            if (node.children.some(item => (item.key || item.id) === key)) {\r\n                parentKey = node.key || node.id;\r\n            } else if (getParentKey(key, node.children)) {\r\n                parentKey = getParentKey(key, node.children);\r\n            }\r\n        }\r\n    }\r\n\r\n    return parentKey;\r\n};\r\n\r\n//外部未引用\r\n//  获取符合查询关键字的节点的父节点\r\nexport function getAllParentKey(key, tree, parentKeys = []) {\r\n    let parentKey;\r\n    while(parentKey=getParentKey(key,tree)){\r\n        parentKeys.push(parentKey);\r\n        key = parentKey;\r\n    }\r\n    return parentKeys;\r\n};\r\n\r\n\r\nexport function moveNodeEve(tree, node, targetpk) {\r\n    let i = tree.length;\r\n    while (i--) {\r\n        let data = tree[i];\r\n        if (data.refpk === targetpk) {\r\n            if (Array.isArray(data.children)) {\r\n                data.children.push(node);\r\n            } else {\r\n                data.children = [node];\r\n            }\r\n            return true;\r\n        } else {\r\n            if (Array.isArray(data.children)) {\r\n                let res = moveNodeEve(data.children, node, targetpk);\r\n                if (res) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport function setLeafEdit(data, status) {\r\n    data.forEach(item => {\r\n        if (item.isleaf) {\r\n            item.iconBox = {\r\n                addIcon: status,\r\n                delIcon: status,\r\n                editIcon: status,\r\n            };\r\n        } else if (Array.isArray(item.children)) {\r\n            setLeafEdit(item.children, status);\r\n        }\r\n    });\r\n}\r\n\r\nexport function hideIconEve(tree, key, iconObj) {\r\n    let i = tree.length;\r\n    while (i--) {\r\n        let data = tree[i];\r\n        if (data.key === key) {\r\n            data.iconBox = Object.assign(data.iconBox || {}, iconObj);\r\n            return true;\r\n        } else {\r\n            if (Array.isArray(data.children)) {\r\n                let res = hideIconEve(data.children, key, iconObj);\r\n                if (res) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport function addBrotherFun(treeData, child) {\r\n    if (!child.pid) {\r\n        treeData.push(child);\r\n        return;\r\n    }\r\n    const loop = data => {\r\n        let len = data.length;\r\n        for (let i = 0; i < len; i++) {\r\n            let item = data[i];\r\n            if (item.pid === child.pid) {\r\n                data.push(child);\r\n                return true;\r\n            } else if (Array.isArray(item.children)) {\r\n                let res = loop(item.children);\r\n                if (res) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    loop(treeData);\r\n}\r\n\r\nexport function editNodeFun(treeData, child) {\r\n    if (!child.refpk) {\r\n        console.error('树，编辑节点方法，传参错误，没找到refpk');\r\n        return false;\r\n    }\r\n    let list = treeToList(treeData),\r\n        old = list.find(e => e.refpk === child.refpk);\r\n    old && Object.assign(old, child);\r\n    return createTreeData(list);\r\n}\r\n\r\nexport function delNode(tree, key,parentNode = {}) {\r\n    if (!tree) return;\r\n    let i = tree.length;\r\n    while (i--) {\r\n        let data = tree[i];\r\n        if (data.refpk === key) {\r\n            parentNode.parentPk = data.pid;\r\n            tree.splice(i, 1);\r\n            return true;\r\n        } else {\r\n            if (Array.isArray(data.children)) {\r\n                let res = delNode(data.children, key);\r\n                if (res) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport function addIconBox(data) {\r\n    if (data && data instanceof Array && data.length > 0) {\r\n        data.forEach(item => {\r\n            let ib = item.iconBox || {};\r\n            item.iconBox = {\r\n                addIcon: true,\r\n                delIcon: true,\r\n                editIcon: true,\r\n                ...ib,\r\n            };\r\n            if (Array.isArray(item.children)) {\r\n                addIconBox(item.children);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport function setNodeDisableEve(treeData, disable, pk) {\r\n    let findYou = false;\r\n    let len = treeData.length;\r\n\r\n    for (let i = 0; i < len; i++) {\r\n        let item = treeData[i];\r\n        if (pk) {\r\n            if (item.refpk === pk) {\r\n                treeData[i].disabled = disable;\r\n                findYou = true;\r\n                return;\r\n            }\r\n        } else {\r\n            treeData[i].disabled = disable;\r\n        }\r\n        if (Array.isArray(item.children)) {\r\n            setNodeDisableEve(item.children, disable, pk);\r\n            if (findYou) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport function checkHasChildren(tree, pk) {\r\n    let i = tree.length;\r\n    while (i--) {\r\n        let data = tree[i];\r\n        if (data.refpk === pk) {\r\n            if (Array.isArray(data.children) && data.children.length === 0) {\r\n                delete data.children;\r\n                data.isleaf = true;\r\n            }\r\n            return true;\r\n        } else {\r\n            if (Array.isArray(data.children)) {\r\n                let res = checkHasChildren(data.children, pk);\r\n                if (res) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport function createTreeData(data, { resetIcon } = {}) {\r\n    if (!isArray(data)) {\r\n        console.warn('createTreeData方法，参数应该为数组');\r\n        return false;\r\n    }\r\n\r\n    // 创建Map集合\r\n    let group = new Map();\r\n    data.forEach(e => {\r\n        // 如果没有pid的节点标记为 __root__ 祖节点\r\n        e.pid = e.pid || PID;\r\n        // 处理查询区树没有key的问题\r\n        e.key || (e.key = e.refpk);\r\n\r\n        // 把相同pid的节点放在一起 结构：以pid为键 以相同pid节点组成的数组为值\r\n        group.get(e.pid) ? group.get(e.pid).push(e) : group.set(e.pid, [e]);\r\n    });\r\n\r\n    function makeDOM(pid) {\r\n        // 如果map 里面 pid 有值，就给每个节点追加children属性\r\n        if (group.get(pid)) {\r\n            // 返回的是map生成的数组,数组成员是e\r\n            return group.get(pid).map(e => {\r\n                // 处理查询区树没有key的问题\r\n                e.key || (e.key = e.refpk);\r\n                e.children = makeDOM(e.refpk);\r\n                return e;\r\n            });\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n    let newData = makeDOM(PID);\r\n\r\n    addIsLeaf(newData, { resetIcon });\r\n    return newData;\r\n}\r\n","\r\nimport { BaseStore, hookFactory } from \"@platform/template\";\r\nimport Form from '@platform/form';\r\nimport { isArray, isString, isObj, isFunction } from '@platform/api';\r\nimport * as TreeUtils from './util';\r\nlet parentPk = null;\r\n\r\nclass Store extends BaseStore {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n\r\n    // 影响视图更新的数据\r\n    store = {\r\n        formStore:null,\r\n        //state 修改会影响视图\r\n        searchValue: '', //搜索框录入值\r\n        // 树组件属性\r\n        focusable: true,//是否开启快捷键功能，使用Tab 键导航获取焦点↓↑选中下、上一个节点，→←展开或者收起一个节点,enter键为节点双击事件\r\n        selectedKeys: [], // 设置选中的树节点 selectedKeys\r\n        expandedKeys: [],//展开指定的树节点\r\n        autoExpandParent: true,//是否自动展开父节点\r\n        checkedKeys: [],//选中复选框的树节点:父子节点有关联，如果传入父节点 key，则子节点自动选中；相应当子节点 key 都传入，父节点也自动选中。当设置checkable和checkStrictly，它是一个有checked和halfChecked属性的对象，并且父子节点的选中与否不再关联\r\n\r\n\r\n        treeData: [],//表格数据\r\n        firstTime: false,//触发dataList计算\r\n        needEdit: true,\r\n        noDisableId: '',\r\n\r\n        //addNodeName: '', //新增节点名\r\n\r\n        disabledSearch: false,\r\n\r\n        showEditModal: false\r\n\r\n    }\r\n\r\n    //记录的属性和操作数据\r\n    cache = {\r\n        deepData: [],//搜索前暂存数据\r\n        saveExpandedKeys: [],//搜索前暂存展开状态\r\n        saveCheckedKeys: [],//搜索前暂存复选框选中状态\r\n\r\n        currentNode: null,//记录当前编辑行\r\n        moveKey: '',//记录拖拽节点key\r\n        isHover: '',//记录鼠标hover节点key\r\n        selectedNode: null,//记录选中子树\r\n        userControlIcon: false,//业务组控制图标按钮是否显示\r\n\r\n        showModal: true,\r\n        metaId: '',//记录业务传的表单metaId\r\n        treeNodeOperation: '',\r\n        searchType: 'location',\r\n        treeType: \"syncTree\",\r\n        noCheckWhenSelect: false //当选中文本时不勾选\r\n\r\n    }\r\n\r\n    //监听函数\r\n    listeners = {\r\n        // onTreeStatusChange,\r\n        // selectedForInit,\r\n        // onSelectEve,\r\n        // onSelectedChange,\r\n        // clickAddIconEve,\r\n        // clickEditIconEve,\r\n        // clickDelIconEve,\r\n    }\r\n\r\n    getListener = (listener) => {\r\n        return this.listeners[listener];\r\n    }\r\n\r\n    setListener = (listener, func) => {\r\n        this.listeners[listener] = func;\r\n    }\r\n\r\n    getStore(paths) {\r\n        return super.get(paths);\r\n    }\r\n\r\n    setStore(paths, value) {\r\n        let res = super.set(paths, value);\r\n        return res;\r\n    }\r\n\r\n    setStateEve = () => {\r\n        this.forceUpdate();\r\n    }\r\n\r\n    getCache(path) {\r\n        return this.cache[path];\r\n    }\r\n\r\n\r\n    setCache(path, value) {\r\n        this.cache[path] = value;\r\n    }\r\n\r\n    // 搜索功能处理展开节点\r\n    handleExpand = (value, expandedKeys) => {\r\n        // let uniqueExpandedKeys = [];\r\n        // expandedKeys.forEach(item => {\r\n        //     if (item && uniqueExpandedKeys.indexOf(item) === -1) {\r\n        //         uniqueExpandedKeys.push(item);\r\n        //     }\r\n        // });\r\n\r\n        let uniqueExpandedKeys = [...new Set(expandedKeys)];\r\n        this.setStore(\"expandedKeys\", uniqueExpandedKeys);\r\n        this.setStore(\"searchValue\", value);\r\n        this.setStore(\"autoExpandParent\", true);\r\n\r\n        if ((!value || value == '') && value !== '0') {\r\n            this.setStore(\"expandedKeys\", this.getCache('saveExpandedKeys'));\r\n        }\r\n    };\r\n\r\n    //设置选中节点\r\n    setNodeChecked = (pk) => {\r\n        if (isArray(pk)) {\r\n            this.setStore('checkedKeys', pk);\r\n            this.setCache('saveCheckedKeys',pk);\r\n        } else if (isString(pk)) {\r\n            this.setStore('checkedKeys', [pk]);\r\n            this.setCache('saveCheckedKeys',[pk]);\r\n        } else {\r\n            console.error(\r\n                'setNodeChecked方法传参格式不正确，第二个参数应该是数组或字符串',\r\n            );\r\n            return false;\r\n        }\r\n        this.setStateEve();\r\n    }\r\n\r\n    //删除成功\r\n    delNodeSuceess = (pk, noneChangeLeaf = false) => {\r\n        let parentNode = {};\r\n        if (typeof pk === 'undefined') {\r\n            console.error('delNodeSuceess方法第二个参数不能为空');\r\n            return false;\r\n        }\r\n\r\n        let treeData = this.getStore('treeData');\r\n        TreeUtils.delNode(treeData, pk,parentNode);\r\n\r\n        let treeType = this.getCache('treeType');\r\n        if (treeType === \"syncTree\") {\r\n            let deepData = this.getCache('deepData');\r\n            // 删除备份的节点\r\n            TreeUtils.delNode(deepData, pk,parentNode);\r\n        }\r\n\r\n        this.setCache('selectedNode', null)\r\n\r\n        if (!noneChangeLeaf) {\r\n            TreeUtils.checkHasChildren(treeData, parentNode.parentPk);\r\n        }\r\n        this.setStore('treeData', [...treeData]);\r\n        this.setStore('showEditModal', false);\r\n        this.setStateEve();\r\n    }\r\n\r\n    //修改成功\r\n    editNodeSuccess = (newItem) => {\r\n        let treeData = this.getStore('treeData');\r\n        let treeType = this.getCache('treeType');\r\n        let deepData = [];\r\n        if (treeType === \"syncTree\") {\r\n            deepData = this.getCache('deepData');\r\n        }\r\n        if (isArray(newItem)) {\r\n            newItem.forEach(item => {\r\n                if (treeData.length != 0) {\r\n                    let newTreeData = TreeUtils.editNodeFun(treeData, item);\r\n                    this.setStore('treeData', [...newTreeData]);\r\n                    treeData =  [...newTreeData];\r\n                }\r\n                if (treeType === \"syncTree\") {\r\n                    let newDeepData = TreeUtils.editNodeFun(deepData, item);\r\n                    this.setCache('deepData', newDeepData);\r\n                    deepData = newDeepData;\r\n                }\r\n               \r\n            });\r\n            // TODO: 异步树没有这个逻辑\r\n        } else {\r\n            if (treeData.length != 0) {\r\n                let newTreeData = TreeUtils.editNodeFun(treeData, newItem);\r\n                this.setStore('treeData', [...newTreeData]);\r\n            }\r\n            if (treeType === \"syncTree\") {\r\n                let newDeepData = TreeUtils.editNodeFun(deepData, newItem);\r\n                this.setCache('deepData', newDeepData);\r\n            }\r\n        }\r\n        this.setStateEve();\r\n\r\n    }\r\n\r\n    closeNodeByPk = (key) => {\r\n        let expandedKeys = this.getStore('expandedKeys');\r\n        if (key || key == 0) {\r\n            if (isArray(key)) {\r\n                key.forEach(item => {\r\n                    expandedKeys.splice(expandedKeys.indexOf(item), 1);\r\n                });\r\n            } else if (isString(key)) {\r\n                if (expandedKeys.indexOf(key) !== -1) {\r\n                    expandedKeys.splice(expandedKeys.indexOf(key), 1);\r\n                }\r\n            }\r\n        } else {\r\n            expandedKeys = [];\r\n        }\r\n        this.setStore('expandedKeys', expandedKeys);\r\n        this.setStateEve();\r\n    }\r\n\r\n    hideIcon = (key, data) => {\r\n        if (!isObj(data)) {\r\n            console.warn(\r\n                '同步组件hideIcon方法，第三个参数应为对象，数据格式参考同步树API文档',\r\n            );\r\n            return false;\r\n        }\r\n        let treeData = this.getStore('treeData');\r\n        TreeUtils.hideIconEve(treeData, key, data);\r\n        this.setStateEve();\r\n    }\r\n\r\n    addBrotherNode = (data) => {\r\n        let treeData = this.getStore('treeData');\r\n        let userControlIcon = this.getCache('userControlIcon');\r\n        if (isArray(data)) {\r\n            !userControlIcon && TreeUtils.addIconBox(data);\r\n            data.forEach(item => TreeUtils.addBrotherFun(treeData, item));\r\n        } else {\r\n            !userControlIcon && TreeUtils.addIconBox([data]);\r\n            TreeUtils.addBrotherFun(treeData, data);\r\n        }\r\n        this.setStore('firstTime', true);  //新增节点成功时，需要重新分割当前树，用于查询定位树节点\r\n        this.setStore('treeData', [...treeData]);\r\n        this.setStateEve();\r\n    }\r\n\r\n    setNodeSelected = (pk) => {\r\n        let treeData = this.getStore('treeData');\r\n        if (isArray(pk)) {\r\n            this.setStore('selectedKeys', pk);\r\n        } else if (isString(pk)) {\r\n            this.setStore('selectedKeys', [pk]);\r\n            this.setCache('selectedNode', TreeUtils.getItem(treeData, pk));\r\n        } else {\r\n            console.error(\r\n                'setNodeSelected方法传参格式不正确，第二个参数应该是数组或字符串',\r\n            );\r\n            return false;\r\n        }\r\n        this.setStateEve();\r\n    }\r\n\r\n    cancelSelectedNode = () => {\r\n        this.setStore('selectedKeys', []);\r\n        this.setCache('selectedNode', null);\r\n        this.setStateEve();\r\n    }\r\n\r\n    searchChange = (value) => {\r\n        let deepData = this.getCache('deepData');\r\n        let treeData = this.getStore('treeData');\r\n        let searchType = this.getCache('searchType');\r\n        let dataList = this.getCache('dataList');\r\n\r\n        // let expandedKeys = [dataList[0].key];\r\n        let expandedKeys = [];\r\n\r\n        let ySrc = [...deepData];\r\n\r\n        if (searchType === 'filtration') {\r\n            // 这里还有有一个神坑的 deepData 中不一定拥有树所有状态的数据 treeData\r\n            // TODO deepData 与 treeData 数据状态的同步  主要包括 item内的设置项的同步 by bbqin \r\n            // need fixed 王洋\r\n            let res = this.filterTree(value, ySrc);\r\n            //   let newDataKeys = res.parentKeys;\r\n            dataList.forEach(item => {\r\n                if (this.strToLocaleLowerCase(item.title).indexOf(this.strToLocaleLowerCase(value)) > -1) {\r\n                    expandedKeys.push(item.key);\r\n                }\r\n            });\r\n\r\n            if (res.stack && res.stack.length > 0) {\r\n                //data = res.stack;\r\n                this.setStore('treeData', res.stack)\r\n\r\n            } else {\r\n                res.stack = [];\r\n                //data = [];\r\n                this.setStore('treeData', [])\r\n            }\r\n\r\n            let list = TreeUtils.treeToList(res.stack);\r\n            list.map(item => {\r\n                expandedKeys.push(item.refpk);\r\n            });\r\n            this.handleExpand(value, expandedKeys, ySrc);\r\n            if ((!value || value == '') && value !== '0') {\r\n                this.setStore(\"expandedKeys\", this.getCache('saveExpandedKeys'));\r\n                this.setStore(\"selectedKeys\",this.getCache(\"saveCheckedKeys\"));\r\n                //data = ySrc;\r\n                this.setStore('treeData', ySrc)\r\n            }\r\n        } else {\r\n            expandedKeys = this.getStore('expandedKeys');\r\n            dataList.forEach(item => {\r\n                if (this.strToLocaleLowerCase(item.title).indexOf(this.strToLocaleLowerCase(value)) > -1) {\r\n                    expandedKeys = expandedKeys.concat(TreeUtils.getAllParentKey((item.key || item.id), treeData));\r\n                }\r\n            });\r\n            expandedKeys = [...new Set(expandedKeys)];\r\n            this.handleExpand(value, expandedKeys);\r\n        }\r\n\r\n        this.setStateEve();\r\n    }\r\n\r\n    filterTree = (value, treeData) => {\r\n        let overWriteFilterTree = this.getListener('overWriteFilterTree');\r\n        let selectedKeys = this.getStore('selectedKeys');\r\n        let res = [],\r\n            keys = [];\r\n        if (isFunction(overWriteFilterTree)) {\r\n            let overWriteTreeData = overWriteFilterTree(value, treeData);\r\n            let overWriteList = TreeUtils.treeToList(overWriteTreeData);\r\n\r\n            let isHasSelectedValue = overWriteList.some(node => {\r\n                if (node) {\r\n                    return node.key === selectedKeys[0];\r\n                }\r\n            });\r\n\r\n            res = TreeUtils.createTreeData(overWriteList);\r\n\r\n            return {\r\n                stack: res,\r\n                parentKeys: [...keys],\r\n                isHasSelectedValue,\r\n            };\r\n        }\r\n\r\n        // 拍平数据\r\n        let list = TreeUtils.treeToList(treeData);\r\n\r\n        // 过滤出带有关键字的节点\r\n        let filterNodes = list.filter(v => {\r\n\r\n            let beforeName = v.beforeName ? v.beforeName : '';\r\n            let afterName = v.afterName ? v.afterName : '';\r\n            let name = v.refname ? v.refname : '';\r\n\r\n            // 如果beforeName afterName 是字符串参与搜索\r\n\r\n            if (typeof beforeName === 'string') {\r\n                name = beforeName + name;\r\n            }\r\n\r\n            if (typeof afterName === 'string') {\r\n                name = name + afterName;\r\n            }\r\n            name = name.toLocaleLowerCase();\r\n\r\n            value = value.toLocaleLowerCase();\r\n\r\n            return name.includes(value);\r\n        });\r\n\r\n        //........ 筛选出所有相关节点\r\n        let nodesMap = new Map();\r\n\r\n        let findAllParents = child => {\r\n            // 递归优化处理，已经走过的路径不再做递归操作\r\n            if (nodesMap.has(child.refpk)) return;\r\n            // 存入路径相关的树节点\r\n            nodesMap.set(child.refpk, child);\r\n\r\n            list.map(node => {\r\n                // 如果当前节点child 有父节点  把当且节点父节点放进nodesMap集合\r\n                if (child.pid === node.refpk) {\r\n                    findAllParents(node);\r\n                } else {\r\n                    // 出口\r\n                    return true;\r\n                }\r\n            });\r\n        };\r\n\r\n        // 递归函数入口\r\n        filterNodes.map(node => {\r\n            // 每一个含有搜索关键字的节点都会成为递归函数的入口\r\n            findAllParents(node);\r\n        });\r\n\r\n        // Map结构转换为map结构\r\n        let finalLists = [];\r\n\r\n        for (let node of nodesMap.values()) finalLists.push(node);\r\n\r\n        let isHasSelectedValue = finalLists.some(node => {\r\n            if (node) {\r\n                return node.key === selectedKeys[0];\r\n            }\r\n        });\r\n\r\n        // 判断当前筛选数据是否有被选择的节点\r\n\r\n        // 进行树结构重组处理\r\n        res = TreeUtils.createTreeData(finalLists, { resetIcon: false });\r\n\r\n        return {\r\n            stack: res,\r\n            parentKeys: [...keys],\r\n            isHasSelectedValue,\r\n        };\r\n    };\r\n\r\n    strToLocaleLowerCase = str => {\r\n        return Object.prototype.toString.call(str) === '[object String]' ? str.toLocaleLowerCase() : String(str).toLocaleLowerCase();\r\n    }\r\n\r\n\r\n    getHooks = () => {\r\n        return {\r\n            getCache: this.getCache.bind(this),\r\n            setCache: this.setCache.bind(this),\r\n            handleExpand: this.handleExpand.bind(this),\r\n            setStateEve: this.setStateEve.bind(this),\r\n            setStore: this.setStore.bind(this),\r\n            getStore: this.getStore.bind(this),\r\n            getListener: this.getListener.bind(this),\r\n            setListener: this.setListener.bind(this),\r\n            setNodeChecked: this.setNodeChecked.bind(this),\r\n            delNodeSuceess: this.delNodeSuceess.bind(this),\r\n            editNodeSuccess: this.editNodeSuccess.bind(this),\r\n            closeNodeByPk: this.closeNodeByPk.bind(this),\r\n            hideIcon: this.hideIcon.bind(this),\r\n            addBrotherNode: this.addBrotherNode.bind(this),\r\n            setNodeSelected: this.setNodeSelected.bind(this),\r\n            cancelSelectedNode: this.cancelSelectedNode.bind(this),\r\n            searchChange: this.searchChange.bind(this),\r\n            filterTree: this.filterTree.bind(this),\r\n            strToLocaleLowerCase: this.strToLocaleLowerCase.bind(this),\r\n        }\r\n    }\r\n}\r\n\r\nexport default hookFactory(Store);","/*\r\n * 同步树组件\r\n */\r\nimport React from \"react\";\r\nimport { BaseComponent } from \"@platform/template\";\r\nimport { Tree, Icon, Tooltip, Modal, Button } from '@platform/base';\r\nimport classnames from 'classnames';\r\nimport * as TreeUtils from './util';\r\nimport {\r\n  isFunction,\r\n  getMultiLang,\r\n  getSysFieldid,\r\n  getGlobalStorage\r\n} from \"@platform/api\";\r\nimport Form from '@platform/form';\r\nconst TreeNode = Tree.TreeNode;\r\n\r\nlet strToLocaleLowerCase = str => {\r\n  return Object.prototype.toString.call(str) === '[object String]' ? str.toLocaleLowerCase() : String(str).toLocaleLowerCase();\r\n}\r\n\r\nrequire(\"./Tree.less\");\r\n\r\nexport default class SyncTree extends BaseComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.searchInputRef = null;\r\n    this.ncc_automated = \"0\";\r\n    this.dropped = false;\r\n    this.state = {\r\n      langJson: {},\r\n      _: \"\",\r\n    };\r\n    this.ncc_automated = getGlobalStorage(\"localStorage\", \"_ncc_automated_\");\r\n\r\n    //业务初始化数据 存store\r\n    let { store, meta, metaId, treeType, formStore } = this.props;\r\n\r\n    store.setCache('treeType', treeType);\r\n\r\n    store.setStore('formStore', formStore);\r\n    if (meta[metaId]) {\r\n      formStore.setMeta(meta, metaId);\r\n    }\r\n    this.transerDefaultConfigToStore(props);\r\n  }\r\n\r\n\r\n  componentWillMount() {\r\n    //调用多语\r\n    let callback = (json) => {\r\n      this.setState({ langJson: json });\r\n    };\r\n\r\n    getMultiLang({ moduleId: \"containers_tree\", callback });\r\n\r\n  }\r\n\r\n\r\n  componentWillUpdate(newProps, newState) {\r\n    let { store, defaultExpandAll = false, treeType } = newProps;\r\n    if (treeType === 'syncTree') {\r\n      let firstTime = store.getStore(\"firstTime\");\r\n      let treeData = store.getStore(\"treeData\");\r\n      if (firstTime) {\r\n        this.generateList(treeData, this.dataList);\r\n        store.setCache(\"dataList\", this.dataList);\r\n        store.setStore(\"firstTime\", false);\r\n        if (defaultExpandAll) {\r\n          store.setStore(\"expandedKeys\", this.getAllNodeKeys(treeData));\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    let { meta, store, metaId } = nextProps;\r\n    let formStore = store.getStore('formStore');\r\n    if (meta[metaId]) {\r\n      formStore.setMeta(meta, metaId);\r\n    }\r\n    this.transerDefaultConfigToStore(nextProps);\r\n  }\r\n\r\n  transerDefaultConfigToStore = (props) => {\r\n    this.listeners = [\r\n      'onTreeStatusChange', 'selectedForInit', 'onSelectEve',\r\n      'onSelectedChange', 'clickAddIconEve', 'clickEditIconEve', 'clickDelIconEve',\r\n      'loadTreeData', //异步树\r\n      'overWriteFilterTree',\r\n    ]\r\n    this.listeners.forEach(item => {\r\n      if (typeof props[item] !== 'undefined') {\r\n        this.props.store.setListener([item], props[item])\r\n      }\r\n    });\r\n\r\n    this.lastData = [];//记录上次点击节点\r\n    this.dataList = [];\r\n\r\n    //业务初始化数据 存store\r\n    let { store } = this.props;\r\n    this.cacheProps = ['showModal', 'userControlIcon', 'metaId', 'disabledSearch', 'searchType','noCheckWhenSelect'];\r\n    this.cacheProps.forEach(item => {\r\n      if (typeof props[item] !== 'undefined') {\r\n        store.setCache([item], props[item]);\r\n      }\r\n    })\r\n\r\n    if (typeof props.needEdit !== 'undefined') {\r\n      store.setStore('needEdit', props.needEdit);\r\n    }\r\n  }\r\n\r\n  //  获取所有节点的key,返回数组\r\n  getAllNodeKeys = data => {\r\n    let allKeys = [];\r\n    let getAllNodeKey = data => {\r\n      data.forEach(item => {\r\n        if (Array.isArray(item.children)) {\r\n          allKeys.push(item.key);\r\n          getAllNodeKey(item.children);\r\n        }\r\n      });\r\n    };\r\n    getAllNodeKey(data);\r\n    return allKeys;\r\n  };\r\n\r\n\r\n  //  拆分数据，用于查询关键字\r\n  generateList = (data, dataList) => {\r\n    for (let i = 0; i < data.length; i++) {\r\n      let node = data[i];\r\n      let key = node.key || node.id;\r\n\r\n      let beforeName = node.beforeName ? node.beforeName : '';\r\n      let afterName = node.afterName ? node.afterName : '';\r\n      let name = node.refname ? node.refname : '';\r\n\r\n      if (typeof beforeName === 'string') {\r\n        name = beforeName + name;\r\n      }\r\n\r\n      if (typeof afterName === 'string') {\r\n        name = name + afterName;\r\n      }\r\n      dataList.push({\r\n        key,\r\n        title: name,\r\n      });\r\n      if (node.children) {\r\n        this.generateList(node.children, dataList);\r\n      }\r\n    }\r\n  };\r\n\r\n  //---------搜索框事件--------------//\r\n  handleClearState = () => {\r\n    let { store } = this.props;\r\n    store.setStore('searchValue', '');\r\n    store.setStore('expandedKeys', store.getCache('saveExpandedKeys'));\r\n    store.setStore('treeData', store.getCache('deepData'));\r\n  }\r\n\r\n  handleClearSearchVal = () => {\r\n    let { getSearchVal, clearSearchVal, store } = this.props;\r\n\r\n    if (this.searchInputRef) {\r\n      this.searchInputRef.value = '';\r\n    }\r\n    // 处理清空状态\r\n    this.handleClearState();\r\n    store.setStateEve();\r\n    if (isFunction(clearSearchVal)) {\r\n      clearSearchVal();\r\n    }\r\n    if (isFunction(getSearchVal)) {\r\n      getSearchVal(store.getStore('searchValue'));\r\n    }\r\n  }\r\n\r\n  focusEve = () => {\r\n    // let { store } = this.props;\r\n    // let expandedKeys = store.getStore('expandedKeys');\r\n    // let checkedKeys = store.getStore('checkedKeys');\r\n    // if (store.getStore('treeData').length != store.getCache('deepData').length) return;\r\n    // store.setCache('saveExpandedKeys', JSON.parse(JSON.stringify(expandedKeys)));\r\n    // store.setCache('saveCheckedKeys', JSON.parse(JSON.stringify(checkedKeys)));\r\n  }\r\n\r\n  //----------树组件事件------------------//\r\n  onDoubleClickHandler = (pk, node) => {\r\n    let { onDoubleClickEve } = this.props;\r\n    if (isFunction(onDoubleClickEve)) {\r\n      onDoubleClickEve(pk, node);\r\n    }\r\n\r\n    this.expandedRows(pk, node);\r\n  }\r\n\r\n  // 双击行展开节点\r\n  expandedRows = (pk, node) => {\r\n    let { store, expandWhenDoubleClick } = this.props;\r\n    if (expandWhenDoubleClick) {\r\n      return;\r\n    }\r\n    let expandedKeys = store.getStore('expandedKeys');\r\n\r\n    let selectedItemKeys = node.node.props.refpk;\r\n    let copy = JSON.parse(JSON.stringify(expandedKeys));\r\n\r\n    if (copy.indexOf(selectedItemKeys) === -1) {\r\n      copy.push(selectedItemKeys);\r\n    } else {\r\n      copy.map((v, i) => {\r\n        if (v === selectedItemKeys) copy.splice(i, 1);\r\n      });\r\n    }\r\n    this.onExpand(copy, node);\r\n  };\r\n\r\n  //  节点展开事件\r\n  onExpand = (expandedKeys, info) => {\r\n    let { store, onTreeExpand, treeType } = this.props;\r\n    store.setStore('expandedKeys', expandedKeys);\r\n    //store.setStore('autoExpandParent', false);\r\n    store.setStateEve();\r\n    if (isFunction(onTreeExpand)) {\r\n      onTreeExpand(expandedKeys, info);\r\n    }\r\n  };\r\n\r\n  onSelect = (pk, node) => {\r\n    let { onSelectCallBack, onSelectAndChecked, onSelectedChange, onSelectEve, onCheckEve,store, treeType,pageOutput,triggerCheckWhenSelect } = this.props;\r\n\r\n    //经营会计 王建卫  利润中心成本动因 公式编辑器\r\n    if (isFunction(onSelectCallBack)) {\r\n      onSelectCallBack(pk, node);\r\n    }\r\n\r\n    if (!node.selected) return;\r\n    store.setStore('selectedKeys', pk);\r\n    let checkedKeys = store.getStore('checkedKeys');\r\n\r\n    //------------TODO: 同步树逻辑，异步树没有\r\n    //勾选节点操作，判断checkedKeys数组是否只有一个成员，如果有就勾选\r\n    let noCheckWhenSelect = store.getCache('noCheckWhenSelect');\r\n    if (checkedKeys.length < 2 && !noCheckWhenSelect) {\r\n      checkedKeys = pk;\r\n      store.setStore('checkedKeys', checkedKeys);\r\n      let saveCheckedKeys = store.getCache(\"saveCheckedKeys\");\r\n      store.setCache(\"saveCheckedKeys\",[...new Set([...saveCheckedKeys,...pk])])\r\n      //triggerCheckWhenSelect 设置选中时触发勾选回调\r\n      if(triggerCheckWhenSelect){\r\n        let {selectedNodes,node:checkedNode} = node;\r\n        typeof onCheckEve === 'function' && onCheckEve({ ...this.props, ...pageOutput }, checkedKeys, {\r\n          checked:true,\r\n          checkedNodes:selectedNodes,\r\n          node:checkedNode,\r\n          event:\"check\"\r\n        });\r\n      }\r\n      if (onSelectAndChecked) {\r\n        onSelectAndChecked(pk);\r\n      }\r\n    }\r\n    //------------TODO: 同步树逻辑，异步树没有\r\n\r\n\r\n    let treeData = store.getStore('treeData');\r\n\r\n    let isChange = () => this.lastData[0] !== pk[0];\r\n    let item = TreeUtils.getItem(treeData, pk[0]);\r\n\r\n    if (isChange()) {\r\n      if (onSelectedChange) {\r\n        onSelectedChange(item);\r\n      }\r\n    }\r\n    if (pk.length !== 0) {\r\n      store.setCache('selectedNode', item);\r\n    }\r\n    if (typeof onSelectEve === 'function' && pk.length !== 0) {\r\n      if(treeType === \"syncTree\"){\r\n        onSelectEve(item.refpk, item, isChange(), node);\r\n      }else{\r\n        onSelectEve(pk, item, isChange(), node);\r\n      }\r\n      this.lastData[0] = pk[0];\r\n    }\r\n    store.setStateEve();\r\n  }\r\n\r\n  // 展开子元素事件\r\n  onLoadData = treeNode => {\r\n    let { loadTreeData } = this.props;\r\n    if (isFunction(loadTreeData)) {\r\n      return new Promise(resolve => {\r\n        loadTreeData(treeNode.props.eventKey, treeNode);\r\n        resolve();\r\n      });\r\n    }\r\n  };\r\n\r\n\r\n  onMouseLeave = () => {\r\n    let { store } = this.props;\r\n    store.setCache(\"isHover\", '')\r\n  }\r\n\r\n  onMouseEnter = (e) => {\r\n    let { store, onMouseEnterEve } = this.props;\r\n    store.setCache(\"isHover\", e.node.props.eventKey)\r\n    if (onMouseEnterEve && typeof onMouseEnterEve === 'function') {\r\n      /* iuap没给当前节点的所有数据，先自己获取，可能会有效率问题——wangshhj */\r\n      onMouseEnterEve(e.node.props.eventKey, e.node.props);\r\n    }\r\n  }\r\n\r\n  // 选中节点回调\r\n  onCheck = (checkedKeys, { checked, checkedNodes, node, event }) => {\r\n    let { store, onCheckEve, pageOutput } = this.props;\r\n    store.setStore(\"checkedKeys\", checkedKeys);\r\n    let saveCheckedKeys = store.getCache(\"saveCheckedKeys\");\r\n    let refpk = node.props.id || node.props.key || node.props.refpk;\r\n    if(checked){\r\n      saveCheckedKeys = [...new Set([...saveCheckedKeys,...checkedKeys])]\r\n    }else{\r\n      let treeData = store.getStore('treeData');\r\n      let allTreeKeys = TreeUtils.getAllTreeKeys(treeData,[]);\r\n      let notRemoveKeys = saveCheckedKeys.filter(x=>!allTreeKeys.includes(x));\r\n      saveCheckedKeys = [...new Set([...checkedKeys,...notRemoveKeys])];\r\n    }\r\n    store.setCache(\"saveCheckedKeys\",saveCheckedKeys);\r\n    typeof onCheckEve === 'function' &&\r\n      //TODO page参数\r\n      onCheckEve({ ...this.props, ...pageOutput }, checkedKeys, {\r\n        checked,\r\n        checkedNodes,\r\n        node,\r\n        event,\r\n      },saveCheckedKeys);\r\n    store.setStateEve();\r\n  }\r\n\r\n  onDragOver = ({ event }) => {\r\n    event.preventDefault();\r\n    return false;\r\n  }\r\n\r\n  onDragStart = ({ event, node }) => {\r\n    this.dropped = false;\r\n    let { store, onDragStartEve } = this.props;\r\n    store.setCache(\"moveKey\", node.props.eventKey)\r\n\r\n    if (isFunction(onDragStartEve)) {\r\n      onDragStartEve({ event, node });\r\n    }\r\n  }\r\n\r\n  onDrop = (info)=>{\r\n    let { store} = this.props;\r\n    this.dropped = true // 如果正常拖动松手时，这个方法一定会执行，且在onDragEnd（如果也执行的话）之前执行。拖到外面时不执行。\r\n    const dropKey = info.node.props.eventKey;\r\n    const dragKey = info.dragNode.props.eventKey;\r\n    const loop = (data, key, callback) => {\r\n      data.forEach((item, index, arr) => {\r\n        if (item.key === key) {\r\n          return callback(item, index, arr);\r\n        }\r\n        if (item.children) {\r\n          return loop(item.children, key, callback);\r\n        }\r\n      });\r\n    };\r\n    const data = store.getStore('treeData');\r\n    let dragObj;\r\n    loop(data, dragKey, (item, index, arr) => {\r\n      arr.splice(index, 1);\r\n      dragObj = item;\r\n    });\r\n    if (info.dropToGap) {\r\n      let ar;\r\n      let i;\r\n      loop(data, dropKey, (item, index, arr) => {\r\n        ar = arr;\r\n        i = index;\r\n      });\r\n      ar.splice(i, 0, dragObj);\r\n    } else {\r\n      loop(data, dropKey, (item) => {\r\n        item.children = item.children || [];\r\n        // where to insert 示例添加到尾部，可以是随意位置\r\n        item.children.push(dragObj);\r\n      });\r\n    }\r\n    store.setStore('treeData',data);\r\n    store.setStateEve();\r\n  }\r\n\r\n  onDragEnd = ()=>{\r\n    if(!this.dropped){\r\n      let { store} = this.props;\r\n      store.setStateEve();\r\n    }\r\n  }\r\n\r\n\r\n  getFloadIcon = (item) => {\r\n    let { store, hiddenDefaultIcon = false } = this.props;\r\n    let expandedKeys = store.getStore('expandedKeys');\r\n\r\n    let floadIcon = null;\r\n    if (!hiddenDefaultIcon) {\r\n      if (item.isleaf == false || (item.children && item.children.length != 0)) {\r\n        floadIcon = expandedKeys.includes(item.refpk) ? (\r\n          <i\r\n            className={classnames(\r\n              'icon iconfont  icon-wenjianjiadakai tree-wenjian',\r\n              { 'stop-node': item.iconBox && item.iconBox.stopUpIon === 'stop' },\r\n            )}\r\n          />\r\n        ) : (<i\r\n          className={classnames(\r\n            'icon iconfont  icon-wenjianjia tree-wenjian',\r\n            { 'stop-node': item.iconBox && item.iconBox.stopUpIon === 'stop' },\r\n          )}\r\n        />);\r\n      } else {\r\n        floadIcon = (\r\n          <i\r\n            className={classnames('tree-dian', {\r\n              'stop-node-dian':\r\n                item.iconBox && item.iconBox.stopUpIon === 'stop',\r\n            })}\r\n          />\r\n        );\r\n      }\r\n    }\r\n\r\n    return floadIcon;\r\n  }\r\n\r\n  getEditIcon = (item) => {\r\n    let { langJson, } = this.state;\r\n    let { nodeIconTooltips = {} } = this.props;\r\n    if (item && item.iconBox && item.iconBox.editIcon) {\r\n      return <Tooltip\r\n        placement=\"top\"\r\n        overlay={nodeIconTooltips.edit || langJson['tree-node-icon-edit']}\r\n        delayHide={1}\r\n        delayShow={1000}\r\n      >\r\n        <i\r\n          className=\"icon iconfont icon-bianji edit-icon\"\r\n          onClick={e => item.disabled !== true && this.editRender.call(this, item, e)\r\n          }\r\n        />\r\n      </Tooltip>\r\n    }\r\n    return null\r\n  }\r\n\r\n  getAddIcon = (item) => {\r\n    let { langJson } = this.state;\r\n    let { nodeIconTooltips = {} } = this.props;\r\n    if (item && item.iconBox && item.iconBox.addIcon) {\r\n      return <Tooltip\r\n        placement=\"top\"\r\n        overlay={nodeIconTooltips.add || langJson['tree-node-icon-add']}\r\n        delayHide={1}\r\n        delayShow={1000}\r\n      >\r\n        <i\r\n          className=\"icon iconfont icon-zengjia add-icon\"\r\n          onClick={e => item.disabled !== true && this.addRender(item, e)\r\n          }\r\n        />\r\n      </Tooltip>\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getDelIcon = (item) => {\r\n    let { langJson } = this.state;\r\n    let { nodeIconTooltips = {} } = this.props;\r\n    if (item && item.iconBox && item.iconBox.delIcon) {\r\n      return <Tooltip\r\n        placement=\"top\"\r\n        overlay={nodeIconTooltips.delete || langJson['tree-node-icon-delete']}\r\n        delayHide={1}\r\n        delayShow={1000}\r\n      >\r\n        <i\r\n          className=\"icon iconfont icon-shanchu delete-icon\"\r\n          onClick={e => item.disabled !== true && this.delRender.call(this, item, e)\r\n          }\r\n        />\r\n      </Tooltip>\r\n    }\r\n    return null;\r\n  }\r\n\r\n\r\n\r\n  getStopUpIcon = (item) => {\r\n    let { langJson } = this.state;\r\n    let { nodeIconTooltips = {} } = this.props;\r\n    if (item && item.iconBox && item.iconBox.stopUpIon) {\r\n      return item.iconBox.stopUpIon === 'up' ? (\r\n        <Tooltip\r\n          placement=\"top\"\r\n          overlay={nodeIconTooltips.unlock || langJson['tree-node-icon-lock']}\r\n          delayHide={1}\r\n          delayShow={1000}\r\n        >\r\n          <i\r\n            className=\"icon iconfont icon-shu_qiyong\"\r\n            onClick={e => {\r\n              item.disabled !== true &&\r\n                this.handleStopAndUp(item, 'up', e);\r\n            }}\r\n          />\r\n        </Tooltip>\r\n      ) : (\r\n          <Tooltip\r\n            placement=\"top\"\r\n            overlay={nodeIconTooltips.lock || langJson['tree-node-icon-unlock']}\r\n            delayHide={1}\r\n            delayShow={1000}\r\n          >\r\n            <i\r\n              className=\"icon iconfont icon-shu_tingyong\"\r\n              onClick={e => {\r\n                item.disabled !== true &&\r\n                  this.handleStopAndUp(item, 'stop', e);\r\n              }}\r\n            />\r\n          </Tooltip>\r\n        );\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  handleStopAndUp = (item, type, e) => {\r\n    let { clickStopIconEve, clickUpIconEve, store } = this.props;\r\n    e.stopPropagation();\r\n    //let getStopUpStatus = item.iconBox;\r\n    switch (type) {\r\n      case 'stop':\r\n        if (isFunction(clickStopIconEve)) {\r\n          clickStopIconEve(item);\r\n        }\r\n        // getStopUpStatus.stopUpIon = 'up';\r\n        break;\r\n      case 'up':\r\n        if (isFunction(clickUpIconEve)) {\r\n          clickUpIconEve(item);\r\n        }\r\n        //getStopUpStatus.stopUpIon = 'stop';\r\n        break;\r\n    }\r\n\r\n    store.setStateEve();\r\n\r\n  }\r\n\r\n  getRightIcon = (item) => {\r\n    let { nodeRightOpt } = this.props;\r\n    if (nodeRightOpt && item.isdrag) {\r\n      return <span\r\n        className=\"NC_iconBox node_right_opt\"\r\n        onClick={nodeRightOpt.callback}\r\n      >\r\n        <Icon type={nodeRightOpt.icon} />\r\n      </span>\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getTitleInfo = (item, name, searchValue, index, nodeLevel, beforeName, afterName) => {\r\n    let { store, tooltipLevels = [], tooltipField } = this.props;\r\n    let beforeStr = name.substr(0, index);\r\n    let searchFromName = name.substr(index, searchValue.length);\r\n    let afterStr = name.substr(index + searchValue.length);\r\n\r\n    let titleInfo = null;\r\n    if (index > -1) {\r\n      titleInfo = <span\r\n        className={classnames('title-middle', {\r\n          'stop-node-title':\r\n            item.iconBox && item.iconBox.stopUpIon === 'stop',\r\n        })}\r\n      >\r\n        {beforeStr}\r\n        <span className=\"u-tree-searchable-filter\">{searchFromName}</span>\r\n        {afterStr}\r\n      </span>\r\n    } else {\r\n      titleInfo = <span className={classnames('title-middle', {\r\n        'stop-node-title':\r\n          item.iconBox && item.iconBox.stopUpIon === 'stop',\r\n      })}\r\n      >{beforeName && typeof beforeName === 'string' ? item.beforeName : ''}{item.refname}{afterName && typeof afterName === 'string' ? item.afterName : ''}\r\n      </span>\r\n    }\r\n\r\n    // 新需求: 节点根据设置的字段和层级显示 tooltip\r\n    if (\r\n      Array.isArray(tooltipLevels) &&\r\n      tooltipLevels.includes(nodeLevel) &&\r\n      tooltipField &&\r\n      item[tooltipField]\r\n    ) {\r\n\r\n      titleInfo = (\r\n        <Tooltip\r\n          className=\"tooltip-word-color\"\r\n          placement=\"top\"\r\n          delayShow={300}\r\n          delay={1}\r\n          inverse\r\n          overlay={item[tooltipField]}\r\n        >\r\n          {titleInfo}\r\n        </Tooltip>\r\n      );\r\n    }\r\n\r\n    return titleInfo;\r\n  }\r\n\r\n  createCustomerTreeIcon = (item) => {\r\n    let { store, customizeIconClick } = this.props;\r\n    let treeData = store.getStore('treeData');\r\n    let customerIcons = item.customerIcons;\r\n    return (\r\n      <span className='NC_iconBox'>\r\n        {\r\n          customerIcons.map((value, index) => {\r\n            if (typeof value === \"string\") {\r\n              return (\r\n                <i\r\n                  key={index}\r\n                  className={`icon iconfont icon-${value} customer-icon`}\r\n                  onClick={e => {\r\n                    if (isFunction(customizeIconClick)) {\r\n                      customizeIconClick({ e, iconType: value, item, treeData });\r\n                    }\r\n                  }}\r\n                />\r\n\r\n              );\r\n            } else if (typeof value === \"object\") {\r\n              return (\r\n                <Tooltip\r\n                  placement=\"top\"\r\n                  overlay={value.title}\r\n                  delayHide={1}\r\n                  delayShow={1000}\r\n                >\r\n                  <i\r\n                    key={index}\r\n                    className={`icon iconfont icon-${value.icon} customer-icon`}\r\n                    onClick={e => {\r\n                      if (isFunction(customizeIconClick)) {\r\n                        customizeIconClick({ e, iconType: value.icon, item, treeData });\r\n                      }\r\n                    }}\r\n                  />\r\n                </Tooltip>\r\n\r\n              );\r\n            }\r\n          })\r\n        }\r\n      </span>\r\n    );\r\n  }\r\n\r\n  //TODO: 同步树与异步树不同的API\r\n  renderTreeTitle = (item, nodeLevel) => {\r\n    let { store, treeType } = this.props;\r\n    let searchValue = store.getStore('searchValue');\r\n    let noDisableId = store.getStore('noDisableId');\r\n    let needEdit = store.getStore('needEdit');\r\n\r\n    let editIcon, addIcon, delIcon, stopUpIon, rightIcon, iconBox;\r\n    let beforeName = item.beforeName ? item.beforeName : '';\r\n    let afterName = item.afterName ? item.afterName : '';\r\n    let name = item.refname ? item.refname : '';\r\n\r\n    if (typeof beforeName === 'string') {\r\n      name = beforeName + name;\r\n    }\r\n    if (typeof afterName === 'string') {\r\n      name = name + afterName;\r\n    }\r\n    let index = (name.toLocaleLowerCase()).indexOf(searchValue.toLocaleLowerCase());\r\n\r\n    let floadIcon = this.getFloadIcon(item);\r\n    let titleInfo = null;\r\n    if (treeType === 'asyncTree') {\r\n      titleInfo = <span className=\"title-middle\">{item.refname}</span>;\r\n    } else {\r\n      titleInfo = this.getTitleInfo(item, name, searchValue, index, nodeLevel, beforeName, afterName);\r\n    }\r\n\r\n    //  设置树的编辑性\r\n    if (needEdit) {\r\n      editIcon = this.getEditIcon(item);\r\n      addIcon = this.getAddIcon(item);\r\n      delIcon = this.getDelIcon(item);\r\n      stopUpIon = this.getStopUpIcon(item);\r\n    }\r\n    //右侧Icon\r\n    rightIcon = this.getRightIcon(item);\r\n\r\n    if (item.customerIcons && item.customerIcons.length > 0) {\r\n      iconBox = this.createCustomerTreeIcon(item);\r\n    } else {\r\n      if (treeType === 'asyncTree') {\r\n        iconBox = (<span className=\"NC_iconBox\">\r\n          {editIcon} {addIcon} {delIcon}\r\n        </span>);\r\n      } else {\r\n        iconBox = (\r\n          <span className=\"NC_iconBox\">\r\n            {editIcon} {addIcon} {delIcon} {stopUpIon}\r\n          </span>\r\n        );\r\n      }\r\n    }\r\n\r\n    if (treeType === 'asyncTree') {\r\n      return (\r\n        <div className=\"title-con\">\r\n          {floadIcon}\r\n          {beforeName}\r\n          {titleInfo}\r\n          {afterName}\r\n          {iconBox}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (beforeName && typeof beforeName === 'string' || afterName && typeof afterName === 'string') {\r\n      return (\r\n        <div\r\n          className={classnames(\r\n            `title-con ${item.className ? item.className : ''}`,\r\n            {\r\n              'active-nodisable': noDisableId === item.refpk,\r\n              'title-con-disabled': item && item.disabled,\r\n            },\r\n          )}\r\n        >\r\n          {floadIcon}\r\n          {titleInfo}\r\n          {iconBox}\r\n          {rightIcon}\r\n        </div>\r\n      );\r\n    } else {\r\n      return (\r\n        <div\r\n          className={classnames(\r\n            `title-con ${item.className ? item.className : ''}`,\r\n            {\r\n              'active-nodisable': noDisableId === item.refpk,\r\n              'title-con-disabled': item && item.disabled,\r\n            },\r\n          )}\r\n        >\r\n          <span className=\"title-single\">\r\n            {floadIcon}\r\n            {beforeName}\r\n            {titleInfo}\r\n            {afterName}\r\n          </span>\r\n          {iconBox}\r\n          {rightIcon}\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n\r\n  getTreeNodesLazy = (treeData) => {\r\n\r\n    //这里去tinper的treeData有bug  tinper给的treeData是上一次的bee-tree的state数据\r\n    //传给tinper的treeData引用相同 数据未改变时 没有更新 因为tinper内部对比的引用\r\n    // let { store } = this.props;\r\n    // let treeData = store.getStore('treeData');\r\n    //更新treeData时 目前给的新数据\r\n    return this.loopLazy(treeData, 0);\r\n  }\r\n\r\n  // 组织节点dom\r\n  loopLazy = (data, nodeLevel) => {\r\n    let { store, neverDisable = false, switcherClass, mustExpandable = false } = this.props;\r\n    let expandedKeys = store.getStore('expandedKeys');\r\n    let selectedKeys = store.getStore('selectedKeys');\r\n\r\n    let newData = data || [];\r\n    return newData.map(item => {\r\n      item.key = item.refpk;\r\n      if (item.key === undefined) {\r\n        console.error('树组件，数据格式错误， 缺少refpk字段，请检查数据格式');\r\n        return false;\r\n      }\r\n      let fieldid = '';\r\n      if (item.attrcode) {\r\n        fieldid = `${item.attrcode}_node`;\r\n      } else if (item.beforeName && typeof item.beforeName === 'string') {\r\n        fieldid = `${item.beforeName.trim()}_node`;\r\n      } else if (item.refname) {\r\n        if (typeof item.refname === \"string\") {\r\n          let refnameArr = item.refname.split(' ');\r\n          let refname = refnameArr[0];\r\n          if (!refname && refnameArr[1]) {\r\n            refname = refnameArr[1];\r\n          }\r\n          fieldid = `${refname}_node`;\r\n        } else {\r\n          fieldid = `${item.refpk || item.key || item.id}_node`\r\n        }\r\n      }\r\n      if (Array.isArray(item.children) && item.children.length) {\r\n        return (\r\n          <TreeNode\r\n            liAttr={{ fieldid: getSysFieldid(fieldid), key: fieldid }}\r\n            {...item}\r\n            className={classnames(\r\n              `node-item ${item.className || ''}`,\r\n              { isexpend: expandedKeys.includes(item.key) },\r\n              { disabledSelected: selectedKeys[0] === item.refpk },\r\n            )}\r\n\r\n            // className={item.isdrag === false ? 'noDrag' : null}\r\n            key={item.key}\r\n            title={this.renderTreeTitle(item, nodeLevel)}\r\n            disabled={neverDisable ? false : item.disabled}\r\n            switcherClass={item.switcherClass || switcherClass}\r\n            mustExpandable={item.mustExpandable || mustExpandable}\r\n            isLeaf={item.isLeaf}\r\n          >\r\n            {this.loop(item.children, nodeLevel + 1)}\r\n          </TreeNode>\r\n        );\r\n      } else {\r\n        if (item.isleaf === false) {\r\n          return (\r\n            <TreeNode\r\n              liAttr={{ fieldid: getSysFieldid(fieldid), key: fieldid }}\r\n              {...item}\r\n              className={classnames(\r\n                `node-item ${item.className || ''}`,\r\n                { isexpend: expandedKeys.includes(item.key) },\r\n                { disabledSelected: selectedKeys[0] === item.refpk },\r\n              )}\r\n              key={item.key}\r\n              title={this.renderTreeTitle(item, nodeLevel)}\r\n              disabled={neverDisable ? false : item.disabled}\r\n              switcherClass={item.switcherClass || switcherClass}\r\n              children={[]}\r\n              mustExpandable={item.mustExpandable || mustExpandable}\r\n              isLeaf={false}\r\n            />\r\n          );\r\n        } else {\r\n          return (\r\n            <TreeNode\r\n              liAttr={{ fieldid: getSysFieldid(fieldid), key: fieldid }}\r\n              {...item}\r\n              className={classnames(\r\n                `node-item ${item.className || ''}`,\r\n                { isexpend: expandedKeys.includes(item.key) },\r\n                { disabledSelected: selectedKeys[0] === item.refpk },\r\n              )}\r\n              key={item.key}\r\n              title={this.renderTreeTitle(item, nodeLevel)}\r\n              disabled={neverDisable ? false : item.disabled}\r\n              switcherClass={item.switcherClass || switcherClass}\r\n              children={null}\r\n              mustExpandable={item.mustExpandable || mustExpandable}\r\n              isLeaf={true}\r\n            />\r\n          );\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  getTreeNodes = (treeData) => {\r\n\r\n    //这里去tinper的treeData有bug  tinper给的treeData是上一次的bee-tree的state数据\r\n    //传给tinper的treeData引用相同 数据未改变时 没有更新 因为tinper内部对比的引用\r\n    // let { store } = this.props;\r\n    // let treeData = store.getStore('treeData');\r\n    //更新treeData时 目前给的新数据\r\n    return this.loop(treeData, 0);\r\n  }\r\n\r\n  // 组织节点dom\r\n  loop = (data, nodeLevel) => {\r\n    let { store, neverDisable = false, switcherClass, mustExpandable = false } = this.props;\r\n    let expandedKeys = store.getStore('expandedKeys');\r\n    let selectedKeys = store.getStore('selectedKeys');\r\n\r\n    let newData = data || [];\r\n    return newData.map(item => {\r\n      item.key = item.refpk;\r\n      if (item.key === undefined) {\r\n        console.error('树组件，数据格式错误， 缺少refpk字段，请检查数据格式');\r\n        return false;\r\n      }\r\n      let fieldid = '';\r\n      if (item.attrcode) {\r\n        fieldid = `${item.attrcode}_node`;\r\n      } else if (item.beforeName && typeof item.beforeName === 'string') {\r\n        fieldid = `${item.beforeName.trim()}_node`;\r\n      } else if (item.refname) {\r\n        if (typeof item.refname === \"string\") {\r\n          let refnameArr = item.refname.split(' ');\r\n          let refname = refnameArr[0];\r\n          if (!refname && refnameArr[1]) {\r\n            refname = refnameArr[1];\r\n          }\r\n          fieldid = `${refname}_node`;\r\n        } else {\r\n          fieldid = `${item.refpk || item.key || item.id}_node`\r\n        }\r\n      }\r\n      if (Array.isArray(item.children) && (item.children.length || this.props.treeType === \"asyncTree\")) {\r\n        return (\r\n          <TreeNode\r\n            liAttr={{ fieldid: getSysFieldid(fieldid), key: fieldid }}\r\n            {...item}\r\n            className={classnames(\r\n              `node-item ${item.className || ''}`,\r\n              { isexpend: expandedKeys.includes(item.key) },\r\n              { disabledSelected: selectedKeys[0] === item.refpk },\r\n            )}\r\n\r\n            // className={item.isdrag === false ? 'noDrag' : null}\r\n            key={item.key}\r\n            title={this.renderTreeTitle(item, nodeLevel)}\r\n            disabled={neverDisable ? false : item.disabled}\r\n            switcherClass={item.switcherClass || switcherClass}\r\n            mustExpandable={item.mustExpandable || mustExpandable}\r\n          >\r\n            {this.loop(item.children, nodeLevel + 1)}\r\n          </TreeNode>\r\n        );\r\n      } else {\r\n        if (item.isleaf === false) {\r\n          return (\r\n            <TreeNode\r\n              liAttr={{ fieldid: getSysFieldid(fieldid), key: fieldid }}\r\n              {...item}\r\n              className={classnames(\r\n                `node-item ${item.className || ''}`,\r\n                { isexpend: expandedKeys.includes(item.key) },\r\n                { disabledSelected: selectedKeys[0] === item.refpk },\r\n              )}\r\n              key={item.key}\r\n              title={this.renderTreeTitle(item, nodeLevel)}\r\n              disabled={neverDisable ? false : item.disabled}\r\n              switcherClass={item.switcherClass || switcherClass}\r\n              mustExpandable={item.mustExpandable || mustExpandable}\r\n              children={[]}\r\n              isLeaf={item.isleaf}\r\n            />\r\n          );\r\n        } else {\r\n          return (\r\n            <TreeNode\r\n              liAttr={{ fieldid: getSysFieldid(fieldid), key: fieldid }}\r\n              {...item}\r\n              className={classnames(\r\n                `node-item ${item.className || ''}`,\r\n                { isexpend: expandedKeys.includes(item.key) },\r\n                { disabledSelected: selectedKeys[0] === item.refpk },\r\n              )}\r\n              key={item.key}\r\n              title={this.renderTreeTitle(item, nodeLevel)}\r\n              disabled={neverDisable ? false : item.disabled}\r\n              switcherClass={item.switcherClass || switcherClass}\r\n              mustExpandable={item.mustExpandable || mustExpandable}\r\n              children={null}\r\n              isLeaf={true}\r\n            />\r\n          );\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n\r\n\r\n\r\n  //-------------树节点编辑模态框事件 ---------------//\r\n\r\n  addNodeEve = () => {\r\n    let { verifyModalForm = false, addNodeCallBack, store } = this.props;\r\n    let currentNode = store.getCache('currentNode');\r\n    let formStore = store.getStore('formStore');\r\n\r\n    if (!verifyModalForm) {\r\n      formStore.setStatus('browse');\r\n    }\r\n    let data = formStore.getAllFormValue();\r\n\r\n    if (isFunction(addNodeCallBack)) {\r\n      let verify = addNodeCallBack(data, currentNode.refpk, currentNode);\r\n      // 如果有回调 并且进行了校验\r\n      if (verifyModalForm && verify) {\r\n        store.setStore('showEditModal', false);\r\n        store.setStateEve();\r\n      }\r\n    }\r\n  };\r\n  //  点击新增图标事件\r\n  addRender = (item, e) => {\r\n    e.stopPropagation();\r\n    let { showModal = true, store, clickAddIconEve, addNodeCallBack, treeType } = this.props;\r\n\r\n    store.setCache('selectedNode', item);\r\n    store.setCache('currentNode', item);\r\n\r\n    if (showModal) {\r\n      let formStore = store.getStore('formStore');\r\n      formStore.emptyAllFormValue();\r\n      formStore.setStatus('edit');\r\n\r\n      store.setCache('treeNodeOperation', 'add');\r\n      store.setStore('showEditModal', true);\r\n      store.setStateEve();\r\n    } else if (treeType === 'asyncTree') {\r\n      if (isFunction(addNodeCallBack)) {\r\n        addNodeCallBack(item);\r\n      }\r\n    }\r\n\r\n\r\n    if (treeType === 'asyncTree') {\r\n      store.setStore('selectedKeys', [item.refpk])\r\n    }\r\n\r\n    if (isFunction(clickAddIconEve)) {\r\n      clickAddIconEve(item);\r\n    }\r\n    store.setStateEve();\r\n  };\r\n\r\n  editRender = (item, e) => {\r\n    let { showModal = true, store, clickEditIconEve, treeType, editNodeCallBack } = this.props;\r\n    e.stopPropagation();\r\n    store.setCache('currentNode', item);\r\n\r\n    if (showModal) {\r\n      let formStore = store.getStore('formStore');\r\n      formStore.emptyAllFormValue();\r\n      formStore.setStatus('edit');\r\n\r\n      store.setCache('treeNodeOperation', 'edit');\r\n      store.setStore('showEditModal', true);\r\n\r\n    } else if (treeType === 'asyncTree') {\r\n      if (isFunction(editNodeCallBack)) {\r\n        editNodeCallBack(item);\r\n      }\r\n    }\r\n\r\n    if (isFunction(clickEditIconEve)) {\r\n      clickEditIconEve(item);\r\n    }\r\n    store.setStore('selectedKeys', [item.refpk]);\r\n    store.setStateEve();\r\n  }\r\n\r\n  delNodeEve = () => {\r\n    let { delNodeCallBack, store } = this.props;\r\n    let currentNode = store.getCache('currentNode');\r\n    isFunction(delNodeCallBack) && delNodeCallBack(currentNode);\r\n  }\r\n\r\n  // 点击删除图标事件，删除节点\r\n  delRender = (item, e) => {\r\n    let { showModal = true, store, clickDelIconEve, treeType, delNodeCallBack } = this.props;\r\n    e.stopPropagation();\r\n    store.setCache('currentNode', item);\r\n    if (showModal) {\r\n\r\n      store.setCache('treeNodeOperation', 'del');\r\n      store.setStore('showEditModal', true);\r\n    } else if (treeType === 'asyncTree') {\r\n      if (isFunction(delNodeCallBack)) {\r\n        delNodeCallBack(item);\r\n      }\r\n    }\r\n    if (treeType === 'asyncTree') {\r\n      store.setStore('selectedKeys', [item.refpk])\r\n    }\r\n    if (isFunction(clickDelIconEve)) {\r\n      clickDelIconEve(item);\r\n    }\r\n    store.setStateEve();\r\n  };\r\n\r\n\r\n  editNodeEve = () => {\r\n    let { verifyModalForm = false, editNodeCallBack, store, modal } = this.props;\r\n    let currentNode = store.getCache('currentNode');\r\n    let formStore = store.getStore('formStore');\r\n    if (!verifyModalForm) {\r\n      formStore.setStatus('browse');\r\n    }\r\n    let data = formStore.getAllFormValue();\r\n    if (isFunction(editNodeCallBack)) {\r\n      let verify = editNodeCallBack(data, currentNode.refpk, currentNode);\r\n      // 如果有回调 并且进行了校验\r\n      if (verifyModalForm && verify) {\r\n        store.setStore('showEditModal', false);\r\n        store.setStateEve();\r\n      }\r\n    }\r\n  }\r\n\r\n  beSureBtnClick = () => {\r\n    let { treeType, store } = this.props;\r\n    let status = store.getCache('treeNodeOperation');\r\n    if (treeType === 'asyncTree') {\r\n      store.setStore('showEditModal', false);\r\n      if (isFunction(this.props[`${status}NodeCallBack`])) {\r\n        let currentNode = store.getCache('currentNode');\r\n        let formStore = store.getStore('formStore');\r\n        this.props[`${status}NodeCallBack`](\r\n          currentNode,\r\n          formStore.getAllFormValue(),\r\n        )\r\n      }\r\n    } else if (treeType === 'syncTree') {\r\n      this[`${status}NodeEve`]();\r\n    }\r\n  }\r\n\r\n  cancelBtnClick = () => {\r\n    let { verifyModalForm, store } = this.props;\r\n    let formStore = store.getStore('formStore');\r\n    if (!verifyModalForm) {\r\n      formStore.setStatus(\"browse\");\r\n    }\r\n    formStore.cancel();\r\n    store.setStore('showEditModal', false);\r\n    store.setStateEve();\r\n  }\r\n\r\n  getScrollContainer = () => {\r\n    // if (this.treeDiv) {\r\n    //   return this.treeDiv;\r\n    // } else {\r\n    //   let treeDiv = document.querySelector(`#${this.props.treeId.trim()}`);\r\n    //   if (treeDiv) {\r\n    //     this.treeDiv = treeDiv.querySelector('.tree-hotkeys-wrapper');\r\n    //   } else {\r\n    //     this.treeDiv = document.querySelector('.tree-hotkeys-wrapper');\r\n    //   }\r\n    //   return this.treeDiv;\r\n    // }\r\n    return document.querySelector(\".tree-hotkeys-wrapper\");\r\n  }\r\n\r\n\r\n  render() {\r\n\r\n    let {\r\n      treeId,\r\n      userDefine,\r\n      needSearch = true, //是否显示搜索\r\n      getSearchVal,\r\n      disabledSearch = false,\r\n      checkable = false,\r\n      checkStrictly = true,\r\n      showModal = true,\r\n      verifyModalForm = false,\r\n      modalSize,\r\n      openIcon,\r\n      closeIcon,\r\n      draggable = false,\r\n      store,\r\n      modal,\r\n      mustExpandable = false,//支持disabled的节点可以自定义展开收起，默认disabled的节点不可以展开收起。\r\n      lazyLoad = false,\r\n      expandWhenDoubleClick,\r\n      showLine = false,\r\n      treeType,\r\n      metaId,\r\n      otherAreaHeight = 0,\r\n      canCloseFreely = true\r\n    } = this.props;\r\n\r\n    let { langJson } = this.state;\r\n    let searchValue = store.getStore('searchValue');\r\n    let focusable = store.getStore('focusable');\r\n    let selectedKeys = store.getStore('selectedKeys');\r\n    let expandedKeys = store.getStore('expandedKeys');\r\n    let autoExpandParent = store.getStore('autoExpandParent');\r\n    let checkedKeys = store.getStore('checkedKeys');\r\n    let treeData = store.getStore('treeData');\r\n    let showEditModal = store.getStore('showEditModal');\r\n    let status = store.getCache('treeNodeOperation');\r\n    let editModalTitle = this.props[`${status}ModalTitle`] || langJson[`containers-tree-${status}`];\r\n    let formStore = store.getStore('formStore');\r\n    let needEdit = store.getStore('needEdit');\r\n\r\n\r\n    // if (treeData && treeData.length === 0) {\r\n    //   return false;\r\n    // }\r\n\r\n    return (\r\n      <div\r\n        fieldid={getSysFieldid(`${treeId}_tree-area`)}\r\n        className=\"syncTreeCom\"\r\n        id={treeId}\r\n      >\r\n        {isFunction(userDefine) && userDefine()}\r\n        {\r\n          needSearch &&\r\n          <div className=\"NC_syncTreeSearch\">\r\n            <input\r\n              ref={(ref) => (this.searchInputRef = ref)}\r\n              className=\"u-form-control\"\r\n              fieldid=\"search\"\r\n              style={{ width: \"100%\", height: 30, \"padding-right\": \"50px\" }}\r\n              placeholder={langJson[\"containers-tree-001\"]}\r\n              onClick={() => {\r\n                if (this.ncc_automated === \"1\") {\r\n                  if(searchValue == \"\") return;\r\n                  store.searchChange(searchValue);\r\n                  store.setStateEve();\r\n                }\r\n              }}\r\n              onChange={(event) => {\r\n                let value = event.target.value;\r\n                if (value == \"\") {\r\n                  // 处理清空状态\r\n                  this.handleClearState();\r\n                }\r\n                if (this.ncc_automated != \"1\") {\r\n                  // 处理搜索空值\r\n                  this.interval = new Date().getTime();\r\n                  let s = setTimeout(() => {\r\n                    if (new Date().getTime() - this.interval >= 500) {\r\n                      store.searchChange(value);\r\n                    }\r\n                    if (isFunction(getSearchVal)) {\r\n                      getSearchVal(value);\r\n                    }\r\n                    clearTimeout(s);\r\n                  }, 500);\r\n                }\r\n                searchValue = value;\r\n                store.setStore('searchValue', searchValue);\r\n                store.setStateEve();\r\n              }}\r\n              onFocus={this.focusEve.bind(this)}\r\n              disabled={disabledSearch}\r\n              onBlur={this.blurEve}\r\n            />\r\n\r\n            <i className=\"icon iconfont icon-sousuo syncTreeSearchIcon\" />\r\n\r\n            {\r\n              searchValue !== \"\" &&\r\n              <i\r\n                style={disabledSearch ? { display: \"none\" } : null}\r\n                className=\"icon iconfont qingkong syncTreeSearchIcon icon-qingkong\"\r\n                onClick={this.handleClearSearchVal}\r\n              />\r\n            }\r\n          </div>\r\n        }\r\n\r\n        <div\r\n          fieldid={getSysFieldid(`${treeId}_tree`)}\r\n          className=\"synctree-area\"\r\n        >\r\n          <Tree\r\n            lazyLoad={lazyLoad}\r\n            renderTreeNodes={lazyLoad ? this.getTreeNodes : null}\r\n            // renderTreeNodes={this.getTreeNodes}\r\n            treeId={treeId}\r\n            treeData={treeData}\r\n            focusable={focusable}\r\n            mustExpandable={mustExpandable}\r\n            onDoubleClick={this.onDoubleClickHandler}\r\n            selectedKeys={selectedKeys}\r\n            onSelect={this.onSelect}\r\n            onExpand={this.onExpand} // 节点展开事件\r\n            expandedKeys={expandedKeys} //搜索节点关键字后要展开的父节点\r\n            autoExpandParent={autoExpandParent} //是否展开所有节点\r\n            onMouseLeave={this.onMouseLeave} //鼠标离开节点事件\r\n            onMouseEnter={this.onMouseEnter} // 鼠标进入节点事件\r\n            onCheck={this.onCheck}\r\n            checkable={checkable}\r\n            checkStrictly={checkStrictly}\r\n            checkedKeys={checkedKeys || []}\r\n            draggable={draggable}\r\n            debounceDuration={5}\r\n            onDragOver={this.onDragOver.bind(this)}\r\n            onDragStart={this.onDragStart.bind(this)}\r\n            onDrop ={this.onDrop}\r\n            onDragEnd={this.onDragEnd}\r\n            getScrollContainer={this.getScrollContainer}\r\n            otherAreaHeight={otherAreaHeight}\r\n            openIcon={\r\n              isFunction(openIcon) ? (\r\n                openIcon()\r\n              ) : (\r\n                  <i className=\"icon iconfont icon-shu_zk tree-swich\" />\r\n                )\r\n            }\r\n            closeIcon={\r\n              isFunction(closeIcon) ? (\r\n                closeIcon()\r\n              ) : (\r\n                  <i className=\"icon iconfont icon-shushouqi tree-swich\" />\r\n                )\r\n            }\r\n            //异步树API\r\n            expandWhenDoubleClick={expandWhenDoubleClick}\r\n            loadData={treeType === 'asyncTree' ? this.onLoadData : null}\r\n            showLine={showLine}\r\n            canCloseFreely={canCloseFreely}//解决层层收起失效问题\r\n          >\r\n            {lazyLoad ? null : this.getTreeNodes(treeData)}\r\n          </Tree>\r\n        </div>\r\n        {\r\n          needEdit && showModal && Object.keys(langJson).length > 0 &&\r\n          <Modal\r\n            fieldid={`${status}Node`}\r\n            show={showEditModal}\r\n            backdrop={\"static\"}\r\n            size={status !== 'del' && modalSize}\r\n            userControl={status !== 'del' && verifyModalForm}\r\n          >\r\n            <Modal.Header>\r\n              <Modal.Title\r\n                fieldid={editModalTitle}\r\n              >\r\n                {editModalTitle}\r\n              </Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n              {\r\n                status === 'del' ?\r\n                  langJson[\"containers-tree-003\"] :\r\n                  <div className=\"addModal\">\r\n                    <Form\r\n                      name={metaId}\r\n                      config={{}}\r\n                      store={formStore}\r\n                    />\r\n                  </div>\r\n              }\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n              <Button\r\n                onClick={this.beSureBtnClick}\r\n                colors=\"primary\"\r\n                style={{ marginRight: 8 }}>\r\n                {langJson['containers-tree-sure-btn']}\r\n              </Button>\r\n              <Button\r\n                onClick={this.cancelBtnClick}\r\n                bordered\r\n              >\r\n                {langJson['containers-tree-cancel-btn']}\r\n              </Button>\r\n            </Modal.Footer>\r\n          </Modal>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}","/**\r\n * 使用异步树的节点：数据权限 节点， 使用权限页签-授权规则(选择新增规则，资源实体选'客户基本信息')\r\n * \r\n * 异步树使用了同步树API    hideIcon\r\n */\r\n\r\n\r\nimport { isArray, isString, isFunction } from '@platform/api';\r\nimport useTree from '../store';\r\nimport Tree from '../Tree';\r\nimport * as TreeUtils from '../util';\r\n\r\nconst existenceCheck = function (id) {\r\n    let store = this.asyncTreeDataSource[id]\r\n    if (!store) {\r\n        store = useTree();\r\n        this.asyncTreeDataSource[id] = store;\r\n        console.warn(`所操作的表格中无ID为${id}的数据`);\r\n        return;\r\n    }\r\n    return store;\r\n}\r\n\r\n\r\n// 创建组件\r\nexport function createAsyncTree(config = {}) {\r\n    let newConfig = Object.assign({}, config);\r\n    let { \r\n        treeId, \r\n        expandWhenDoubleClick=true, \r\n        editType, \r\n        doubleClickEve,\r\n        showModal=true,\r\n        metaId,\r\n        ...others \r\n    } = newConfig;\r\n    // this.register(\"treeTable\"); // 生成 this.treeTableDataSource[id]\r\n    let pageScope = this,\r\n        store = pageScope.asyncTreeDataSource[treeId];\r\n    if (!store) {\r\n        store = useTree();\r\n        pageScope.asyncTreeDataSource[treeId] = store;\r\n    }\r\n    if (!pageScope.formDataSource[metaId] && showModal) {\r\n        pageScope.use.form(metaId);\r\n    }\r\n\r\n    return <Tree\r\n        meta={this.state.meta}\r\n        store={store}\r\n        treeId={treeId}\r\n        needSearch={false}\r\n        expandWhenDoubleClick={expandWhenDoubleClick}\r\n        onDoubleClickEve={doubleClickEve}\r\n        needEdit={editType}\r\n        {...others}\r\n        showModal={showModal}\r\n        metaId={metaId}\r\n        formStore={pageScope.formDataSource[metaId]}\r\n        pageOutput={pageScope.output}\r\n        treeType={'asyncTree'}\r\n    />\r\n}\r\n\r\n/*\r\n*   生成树 需要的数据结构\r\n*   @ data: 数组\r\n* */\r\nexport function createTreeData(data) {\r\n    TreeUtils.createTreeData(data);\r\n}\r\n\r\n/*====================================================================================*/\r\n// 设置树 数据\r\nexport function setTreeData(id, newData, treeNode) {\r\n    if(!isArray(newData)){\r\n        return;\r\n    }\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n   \r\n    if (!treeNode) {\r\n        //判断是否是根节点; 不是根节点要去找对应的父节点插入child\r\n        let treeData = createNewData(newData);\r\n        store.setStore('treeData', treeData);\r\n        store.setStore('selectedKeys', []); // 清空之前的选择项\r\n    } else {\r\n        let key = '';\r\n        if(treeNode.props && treeNode.props.eventKey){\r\n            key = treeNode.props.eventKey;\r\n        }else if(treeNode.key){\r\n            key = treeNode.key;\r\n        }\r\n        if(key){\r\n            let data = createNewData(newData);\r\n            let treeData = store.getStore('treeData');\r\n            getNewTreeData(treeData, key, data);\r\n            store.setStore('treeData', [...treeData]);\r\n        }else{\r\n            console.warn('异步树setTreeData方法，treeNode参数不正确');\r\n            return;\r\n        }\r\n    }\r\n    store.setStateEve();\r\n    let onSelectedChange = store.getListener('onSelectedChange');\r\n    if(isFunction(onSelectedChange && !treeNode)){\r\n        onSelectedChange(null);\r\n    }\r\n}\r\n\r\n/*\r\n *   设置节点勾选\r\n *   @ pk： 目前为字符串\r\n */\r\nexport function setNodeChecked(id, pk) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    store.setNodeChecked(pk);\r\n}\r\n\r\n\r\n//  添加树节点\r\nexport function addTreeData(id, datas) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    let data = createNewData(datas);\r\n    let treeData = store.getStore('treeData');\r\n    if (isArray(data)) {\r\n        TreeUtils.addIconBox(data);\r\n        data.forEach(item => addTreeNode(treeData, item));\r\n    } else {\r\n        TreeUtils.addIconBox([data]);\r\n        addTreeNode(treeData, data);\r\n    }\r\n    store.setStore('treeData', [...treeData])\r\n    store.setStateEve();\r\n}\r\n\r\n//  获取树某个节点或整个树信息\r\nexport function getAsyncTreeValue(id, pk) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    let treeData = store.getStore('treeData');\r\n    return TreeUtils.getItem(treeData, pk);\r\n}\r\n\r\n// 删除树节点\r\nexport function delTreeData(id, pk) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    store.delNodeSuceess(pk)\r\n}\r\n\r\n// 编辑树节点\r\nexport function editTreeData(id, newItem) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    store.editNodeSuccess(newItem);\r\n}\r\n\r\n//  设置节点不可用\r\nexport function setAsyncNodeDisable(id, disable, pk) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n\r\n    let treeData = store.getStore('treeData'); \r\n    //let deepData = store.getCache('deepData'); \r\n\r\n    TreeUtils.setNodeDisableEve(treeData, disable, pk);\r\n    // // 同步deepData禁用状态\r\n    // if (deepData) {\r\n    //     TreeUtil.setNodeDisableEve(deepData, disable, pk);\r\n    // }\r\n    // 如果是整体禁用模式，则禁用快捷键功能\r\n    if (!pk) {\r\n        if (disable) {\r\n            // 全被禁用\r\n            store.setStore('focusable', false);\r\n        } else {\r\n            store.setStore('focusable', true);\r\n        }\r\n    }\r\n    store.setStore('treeData', [...treeData])\r\n    store.setStateEve();\r\n}\r\n\r\n/*\r\n *   设置树的编辑性\r\n *   @ status: true/false\r\n * */\r\nexport function setTreeEdit(id, status) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    let needEdit = store.getStore('needEdit'); \r\n   \r\n    if (needEdit !== status) {\r\n        let onTreeStatusChange = store.getListener('onTreeStatusChange');\r\n        if (onTreeStatusChange) {\r\n            onTreeStatusChange();\r\n        }\r\n    }\r\n    store.setStore('needEdit', status); \r\n    store.setStateEve();\r\n}\r\n\r\n/*\r\n*   获取当前选中节点信息\r\n* */\r\nexport function getSelectNodeAsync(id) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n\r\n   return store.getCache('selectedNode'); \r\n}\r\n\r\n/*\r\n*   展开节点方法\r\n* */\r\nexport function openNodeByPkAsync(id, pk, reset) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    let expandedKeys = store.getStore('expandedKeys');\r\n\r\n    if (reset) {\r\n        expandedKeys = Object.prototype.toString.call(pk) === '[object Array]' ? pk : (pk ? [pk] : []);\r\n    } else if (Object.prototype.toString.call(pk) === '[object Array]') {\r\n        expandedKeys.push(...pk);\r\n    } else if (Object.prototype.toString.call(pk) === '[object String]') {\r\n        if (expandedKeys.indexOf(pk) === -1) {\r\n            expandedKeys.push(pk);\r\n        }\r\n    } else {\r\n        console.warn(\"openNodeByPk方法，参数pk,类型为数组或字符串\");\r\n        return;\r\n    }\r\n\r\n    store.setStore('autoExpandParent', true); \r\n    store.setStore('expandedKeys', expandedKeys); \r\n    store.setStateEve();\r\n\r\n    let loadTreeData = store.getListener('loadTreeData');\r\n    let treeData = store.getStore('treeData');\r\n    if (isFunction(loadTreeData)) {\r\n        if (isString(pk)) {\r\n            loadTreeData(pk, TreeUtils.getItem(treeData, pk));\r\n        } else if (isArray(pk)) {\r\n            pk.forEach(item => {\r\n                loadTreeData(item, TreeUtils.getItem(treeData, item));\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\n/*\r\n*   关闭节点方法\r\n* */\r\nexport function closeNodeByPkAsync(id, pk) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    store.closeNodeByPk(pk);\r\n}\r\n\r\n/*\r\n*   设置图标显示隐藏\r\n*   @ key 节点key值\r\n*   @data 对象，描述图标是否显示  示例：{ editIcon:true, delIcon:false, addIcon:false }\r\n*   true: 显示；  false：隐藏\r\n* */\r\nexport function hideIconAsync(id, key, data) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    store.hideIcon(key, data);\r\n}\r\n\r\n/*\r\n*   新增兄弟节点\r\n* */\r\nexport function addBrotherNodeAsync(id, data) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n   store.addBrotherNode(data);\r\n}\r\n\r\n/*\r\n*   设置节点选中\r\n*   @pk： 目前为字符串\r\n*/\r\nexport function setNodeSelectedAsync(id, pk) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    store.setNodeSelected(pk);\r\n}\r\n\r\n/* 取消当前选中所有节点 */\r\nexport function cancelSelectedNodeAsync(id) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    store.cancelSelectedNode();\r\n}\r\n\r\n\r\n\r\n// 组装树组件需要的结构\r\nfunction createNewData(val){\r\n    if (isArray(val)) {\r\n        val.map((item, index) => {\r\n            item.key = item.refpk;\r\n            if (!item.iconBox) {\r\n                if (item.key) {\r\n                    item.iconBox = {\r\n                        addIcon: true,\r\n                        delIcon: true,\r\n                        editIcon: true,\r\n                    };\r\n                }\r\n            }\r\n            if (item.key === undefined) {\r\n                console.error('createNewData方法报错，异步树的数据中缺少refpk字段，请检查数据格式');\r\n                return false;\r\n            }\r\n        });\r\n    } else if (val.refpk) {\r\n        val.key = val.refpk;\r\n        if (!val.iconBox) {\r\n            val.iconBox = {\r\n                addIcon: true,\r\n                delIcon: true,\r\n                editIcon: true,\r\n            };\r\n        }\r\n    } else {\r\n        console.error('createNewData, 异步树，数据格式不正确');\r\n    }\r\n    return val;\r\n};\r\n\r\n//  插入对应的 树 子节点数据\r\nfunction getNewTreeData(treeData, parentKey, child) {\r\n    if (!child || !isArray(child) || child.length === 0) {\r\n        return false;\r\n    }\r\n    const loop = data => {\r\n        if (!data || data.length === 0) {\r\n            return false;\r\n        }\r\n        for(let item of data){\r\n            if (item.key === child[0].pid) {\r\n                item.children = child;\r\n                return;\r\n            } \r\n             if (item.children) {\r\n               loop(item.children);\r\n            }\r\n        }\r\n    };\r\n    loop(treeData);\r\n    return treeData;\r\n}\r\n\r\n\r\n\r\n// 新增节点，插入节点\r\nfunction addTreeNode(treeData, data) {\r\n    let pid = data.pid;\r\n    if (pid) {\r\n        let len = treeData.length;\r\n        for (let i = 0; i < len; i++) {\r\n            let node = treeData[i];\r\n            if (node.refpk === pid) {\r\n                if (node.children) {\r\n                    node.children.push(data);\r\n                } else {\r\n                    node.children = [data];\r\n                }\r\n                return true;\r\n            } else if (Array.isArray(node.children)) {\r\n                let res = addTreeNode(node.children, data);\r\n                if (res) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n    } else {\r\n        if (data.refpk) {\r\n            treeData.push(data);\r\n        } else {\r\n            console.warn('addTreeNode方法，参数data格式不正确');\r\n        }\r\n    }\r\n}\r\n\r\n","\r\nimport * as asyncTreeApi from './compatible';\r\n\r\nexport default asyncTreeApi;\r\n","/**\r\n * 预警消息查询 树显示不正确 是由于业务根节点 isleaf是true导致\r\n * 账户期初余额  所有层级数据里都没有key\r\n * 计划周期  根节点给了 pid 没给key  子节点没有pid\r\n * 设置： 根节点pid=refpk  没有key   tinper用的是key 业务用的唯一标识是refpk 看tinper能否使用refpk作为唯一标识\r\n * 查询区---图标显示问题------------平台问题\r\n * 交易类型管理-无法搜索 多跟树 无pid 搜索---------平台问题\r\n * 单据类型 出库调整单 搜索不到 业务的pid 重复\r\n */\r\nimport { isArray, isObj, isFunction } from '@platform/api';\r\nimport useTree from '../store';\r\nimport * as TreeUtils from '../util';\r\nimport Tree from '../Tree';\r\n\r\n/**\r\n * 检测组件对象是否存在 \r\n * @param {*} id \r\n */\r\nconst existenceCheck = function (id) {\r\n    let store = this.syncTreeDataSource[id]\r\n    if (!store) {\r\n        store = useTree();\r\n        this.syncTreeDataSource[id] = store;\r\n        console.warn(`所操作的表格中无ID为${id}的数据`);\r\n        return;\r\n    }\r\n    return store;\r\n}\r\n\r\n\r\n\r\n// 创建组件\r\nexport function createSyncTree(config = {}) {\r\n    let newConfig = Object.assign({}, config);\r\n    let { treeId, expandWhenDoubleClick = false, onDoubleClickEve, delNodeCallBack, showModal= true, metaId, ...others } = newConfig;\r\n    // this.register(\"treeTable\"); // 生成 this.treeTableDataSource[id]\r\n    let pageScope = this,\r\n        store = pageScope.syncTreeDataSource[treeId];\r\n    if (!store) {\r\n        store = useTree();\r\n        pageScope.syncTreeDataSource[treeId] = store;\r\n    }\r\n\r\n    if (!pageScope.formDataSource[metaId] && showModal) {\r\n        pageScope.use.form(metaId);\r\n    }\r\n    return <Tree\r\n        key={treeId}\r\n        meta={this.state.meta}\r\n        store={store}\r\n        treeId={treeId}\r\n        onDoubleClickEve={onDoubleClickEve}\r\n        expandWhenDoubleClick={expandWhenDoubleClick}\r\n        delNodeCallBack={(currentNode) => {\r\n            if (isFunction(delNodeCallBack)) {\r\n                delNodeCallBack(currentNode.refpk);\r\n            }\r\n        }}\r\n        formStore={pageScope.formDataSource[metaId]}\r\n        showModal={showModal}\r\n        metaId={metaId}\r\n        {...others}\r\n        pageOutput={pageScope.output}\r\n        treeType={'syncTree'}\r\n    />\r\n}\r\n\r\n// 设置树 数据\r\nexport function setSyncTreeData(id, treeData, iconBoxData) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    store.setStore('firstTime', true)\r\n    store.setStore('searchValue', '')\r\n\r\n    if (!isArray(treeData)) {\r\n        console.warn('setSyncTreeData方法data参数为数组');\r\n        return false;\r\n    }\r\n\r\n    !store.getCache('userControlIcon') && TreeUtils.addIconBox(treeData);\r\n    store.setStore('treeData', [...treeData]);\r\n    store.setStore('expandedKeys', []);\r\n    store.setStore('selectedKeys', []);\r\n    store.setCache('deepData', [...treeData]);\r\n\r\n    // 对功能区按钮初始化\r\n    if (iconBoxData) {\r\n        if (Object.prototype.toString.call(iconBoxData) === '[object Array]') {\r\n            setIconVisible.call(this, id, iconBoxData);\r\n        } else {\r\n            console.error('iconBoxData is not a Array');\r\n        }\r\n    }\r\n    let selectedForInit = store.getListener('selectedForInit');\r\n    let onSelectEve = store.getListener('onSelectEve');\r\n    // 进行默认选中处理\r\n    if (treeData && treeData.length != 0 && selectedForInit) {\r\n        let dataLength = treeData.length;\r\n        let firstRoot = treeData[0];\r\n        let selectedNode;\r\n        // 如果多根，选中第一个根节点\r\n        if (dataLength > 1) {\r\n            selectedNode = firstRoot;\r\n        }\r\n        // 如果单根，首先查看单根是否为实根，如果不是选中并且展开第一个子节点\r\n        if (dataLength == 1) {\r\n            // 有实根的情况\r\n            if (firstRoot.needSelect) {\r\n                selectedNode = firstRoot;\r\n            } else {\r\n                // 虚根情况\r\n                if (firstRoot.children && firstRoot.children != 0) {\r\n                    selectedNode = firstRoot.children[0];\r\n                } else {\r\n                    selectedNode = firstRoot;\r\n                }\r\n            }\r\n            store.setStore('expandedKeys', [firstRoot.refpk]);\r\n        }\r\n\r\n        //当前选中的树节点\r\n        store.setCache('selectedNode', TreeUtils.getItem(treeData, selectedNode.refpk));\r\n\r\n        //获取选中的\r\n        store.setStore('selectedKeys', [selectedNode.refpk]);\r\n\r\n        if (isFunction(selectedForInit)) {\r\n            selectedForInit(selectedNode.refpk, selectedNode, true);\r\n        } else {\r\n            if (isFunction(onSelectEve)) {\r\n                onSelectEve(selectedNode.refpk, selectedNode, true);\r\n            }\r\n        }\r\n    }\r\n\r\n    store.setStateEve();\r\n    let onSelectedChange = store.getListener('onSelectedChange');\r\n    if (isFunction(onSelectedChange)) {\r\n        onSelectedChange(null);\r\n    }\r\n}\r\n\r\n// 编辑成功调用方法\r\nexport function editNodeSuccess(id, newItem) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    store.editNodeSuccess(newItem);\r\n}\r\n\r\n// 编辑禁用函数\r\nexport function handleEidAddDisbale(id, pk) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    store.setCache('disabledSearch', true)\r\n    store.setStore('noDisableId', pk)\r\n    store.setStore('selectedKeys', [pk])\r\n    setNodeDisable(id, true);\r\n    store.setStateEve();\r\n}\r\n\r\n// 还原状态\r\nexport function handleEidAddNoDisbale(id) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    setNodeDisable(id, false);\r\n    store.setCache('disabledSearch', false)\r\n    store.setStore('selectedKeys', [store.getStore('noDisableId')]);\r\n    store.setStore('noDisableId', '')\r\n    store.setStateEve();\r\n}\r\n\r\n// 新增节点成功调用方法\r\nexport function addNodeSuccess(id, data, isBefore) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n\r\n    let treeData = store.getStore('treeData');\r\n    let deepData = store.getCache('deepData');\r\n    let userControlIcon = store.getCache('userControlIcon');\r\n\r\n    let list = TreeUtils.treeToList(treeData);\r\n    treeData = TreeUtils.createTreeData(list) || [];\r\n\r\n    if (isArray(data)) {\r\n        !userControlIcon && TreeUtils.addIconBox(data);\r\n        data.forEach(item => {\r\n            TreeUtils.addNodeFun(treeData, item, isBefore);\r\n\r\n            // if (thisTree.searchValue.length != 0) {\r\n            TreeUtils.addNodeFun(deepData, item, isBefore);\r\n            // }\r\n        });\r\n    } else {\r\n        !userControlIcon && TreeUtils.addIconBox([data]);\r\n        TreeUtils.addNodeFun(treeData, data, isBefore);\r\n\r\n        // if (thisTree.searchValue.length != 0) {\r\n        TreeUtils.addNodeFun(deepData, data, isBefore);\r\n        // }\r\n    }\r\n\r\n    store.setStore('treeData', [...treeData])\r\n    store.setStore('firstTime', true)\r\n    store.setStateEve();\r\n}\r\n\r\n// 删除节点成功调用\r\nexport function delNodeSuceess(id, pk, noneChangeLeaf = false) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    store.delNodeSuceess(pk, noneChangeLeaf);\r\n}\r\n\r\n//  获取树某个节点或整个树信息\r\nexport function getSyncTreeValue(id, pk) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    let deepData = store.getCache('deepData');\r\n    // 更改获取节点数据\r\n    return TreeUtils.getItem(deepData, pk);\r\n}\r\n\r\n/*\r\n *   设置某个节点或整个树不可点击\r\n *   disable:true 不可用； false:可用\r\n *   pk:不传，设置整个树不可用。\r\n * */\r\nexport function setNodeDisable(id, disable, pk) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    let treeData = store.getStore('treeData');\r\n    let deepData = store.getCache('deepData');\r\n\r\n    TreeUtils.setNodeDisableEve(treeData, disable, pk);\r\n    // 同步deepData禁用状态\r\n    if (deepData) {\r\n        TreeUtils.setNodeDisableEve(deepData, disable, pk);\r\n    }\r\n    // 如果是整体禁用模式，则禁用快捷键功能\r\n    if (!pk) {\r\n        if (disable) {\r\n            // 全被禁用\r\n            store.setStore('focusable', false);\r\n        } else {\r\n            store.setStore('focusable', true);\r\n        }\r\n    }\r\n    store.setStore('treeData', [...treeData])\r\n    store.setStateEve();\r\n}\r\n\r\n/*\r\n *   设置树的编辑性\r\n *   @ status: true/false\r\n * */\r\nexport function setTreeEdit(id, status) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    let needEdit = store.getStore('needEdit');\r\n\r\n    if (needEdit !== status) {\r\n        let onTreeStatusChange = store.getListener('onTreeStatusChange');\r\n        if (onTreeStatusChange) {\r\n            onTreeStatusChange();\r\n        }\r\n    }\r\n    store.setStore('needEdit', status);\r\n    store.setStateEve();\r\n}\r\n\r\n/*\r\n *   获取当前选中节点信息\r\n * */\r\nexport function getSelectNode(id) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    return store.getCache('selectedNode');\r\n}\r\n/*\r\n *   展开节点方法\r\n * */\r\nexport function openNodeByPk(id, pk, autoExpandParent = true) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    let expandedKeys = store.getStore('expandedKeys');\r\n\r\n    if (Object.prototype.toString.call(pk) === '[object Array]') {\r\n        expandedKeys.push(...pk);\r\n    } else if (Object.prototype.toString.call(pk) === '[object String]') {\r\n        if (expandedKeys.indexOf(pk) === -1) {\r\n            expandedKeys.push(pk);\r\n        }\r\n    } else {\r\n        console.warn('openNodeByPk方法，参数pk,类型为数组或字符串');\r\n        return;\r\n    }\r\n    store.setStore('expandedKeys', [...expandedKeys]);\r\n    store.setStore('autoExpandParent', autoExpandParent);\r\n    store.setStateEve();\r\n}\r\n\r\n/*\r\n *   关闭节点方法\r\n * */\r\nexport function closeNodeByPk(id, key) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    store.closeNodeByPk(key);\r\n}\r\n\r\n/*\r\n *   生成树 需要的数据结构\r\n *   @ data: 数组\r\n * */\r\nexport function createTreeData(data, resetInfo) {\r\n    return TreeUtils.createTreeData(data, resetInfo)\r\n}\r\n\r\n// 获取树的数据\r\nexport function getTreeData(id) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    let treeData = store.getStore('treeData');\r\n    return JSON.parse(JSON.stringify(treeData || [], (key, value) => {\r\n        if (key == 'beforeName' || key == 'afterName') {\r\n            return undefined;\r\n        }\r\n        return value;\r\n    }));\r\n}\r\n\r\n/*\r\n *   设置图标显示隐藏\r\n *   @ key 节点key值\r\n *   @ data 对象，描述图标是否显示  示例：{ editIcon:true, delIcon:false, addIcon:false }\r\n *   true: 显示；  false：隐藏\r\n * */\r\nexport function hideIcon(id, key, data) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n\r\n    store.hideIcon(key, data);\r\n}\r\n\r\n/*\r\n *   批量设置节点图标的显隐性\r\n *   @ data: 数组或对象\r\n * */\r\nexport function setIconVisible(id, data) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n\r\n    let treeData = store.getStore('treeData');\r\n    if (isObj(data)) {\r\n        TreeUtils.hideIconEve(treeData, data.key, data.value);\r\n    } else if (isArray(data)) {\r\n        data.map(item => TreeUtils.hideIconEve(treeData, item.key, item.value));\r\n    }\r\n    store.setStateEve();\r\n}\r\n\r\n/*\r\n *   新增兄弟节点\r\n * */\r\nexport function addBrotherNode(id, data) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    store.addBrotherNode(data);\r\n}\r\n\r\n/*\r\n *   设置节点选中\r\n *   @ pk： 目前为字符串\r\n */\r\nexport function setNodeSelected(id, pk) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    store.setNodeSelected(pk);\r\n}\r\n\r\n/*\r\n *   设置节点勾选\r\n *   @ pk： 目前为字符串\r\n */\r\nexport function setNodeChecked(id, pk) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    store.setNodeChecked(pk);\r\n}\r\n\r\n/**\r\n *获取所有被勾选的数据 pks\r\n *\r\n * @export\r\n * @param {*} id\r\n * @returns\r\n */\r\nexport function getCheckedKeys(id) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    return store.getStore('checkedKeys');\r\n}\r\n\r\n/* 取消当前选中所有节点 */\r\nexport function cancelSelectedNode(id) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    store.cancelSelectedNode();\r\n}\r\n\r\n/* 设置叶子节点不可编辑/可编辑，父节点可以编辑  */\r\nexport function setLeafNodeEdit(id, status) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    let treeData = store.getStore('treeData')\r\n    TreeUtils.setLeafEdit(treeData, status);\r\n    store.setStateEve();\r\n}\r\n\r\n/*\r\n *  移动节点 （先获取要移动的节点对象，删除该节点，将节点放到目标节点children中）\r\n *  @ pk: 要移动的节点pk\r\n *  @ targetPk: 目标节点pk\r\n * */\r\nexport function moveNode(id, pk, targetPk) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    let treeData = store.getStore('treeData')\r\n    let thisNode = TreeUtils.getItem(treeData, pk);\r\n    TreeUtils.delNode(treeData, pk);\r\n    TreeUtils.moveNodeEve(treeData, thisNode, targetPk);\r\n    store.setStateEve();\r\n}\r\n\r\n/* 获取拖拽的节点key */\r\nexport function getMoveNodeKey(id) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    };\r\n    let treeData = store.getStore('treeData')\r\n    let moveKey = store.getCache('moveKey')\r\n    return TreeUtils.getItem(treeData, moveKey);\r\n}\r\n/* 获取hover的节点key */\r\nexport function getHoverNodeKey(id) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    };\r\n    let treeData = store.getStore('treeData')\r\n    let isHover = store.getCache('isHover')\r\n    return TreeUtils.getItem(treeData, isHover);\r\n}\r\n\r\n/* 暴露搜索功能方法 */\r\nexport function getSearchChangeEven(value, treeId) {\r\n    let store = existenceCheck.call(this, treeId);\r\n    if (!store) {\r\n        return;\r\n    };\r\n    if (Object.prototype.toString.call(value) !== '[object String]') {\r\n        console.warn('搜索参数为字符串类型');\r\n    }\r\n    // let defSource;\r\n    // try {\r\n    //     defSource = store.getStore('treeData');\r\n    // } catch (e) {\r\n    //     console.warn(e);\r\n    // }\r\n    store.searchChange(value);\r\n}\r\n\r\n/**\r\n * @desc 设置树节点的图标\r\n * @param id {string} 区域Id\r\n * @param items {array} [{ key: 'refpk', icons: ['uf-search'] }]\r\n */\r\nexport function setTreeItemIcons({ id, items }) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    };\r\n    let treeData = store.getStore('treeData')\r\n\r\n    items.map(item => {\r\n        setCustomerIcons({ treeData, item });\r\n    });\r\n\r\n    store.setStateEve();\r\n}\r\n\r\n/* 根据key获取子树 */\r\nexport function getItem(treeData, key) {\r\n    if (!key) {\r\n        return treeData;\r\n    }\r\n    let length = treeData.length;\r\n    for (let i = 0; i < length; i++) {\r\n        let item = treeData[i];\r\n        if (item.key == key) {\r\n            return item;\r\n        } else if (Array.isArray(item.children)) {\r\n            let res = getItem(item.children, key);\r\n            if (res) {\r\n                return res;\r\n            }\r\n        }\r\n    }\r\n};\r\n\r\n\r\n\r\n/**\r\n * @desc 根据用户传入的items 遍历树节点，寻找到具体节点后在此节点中添加 customerIcons 字段\r\n * @param treeData {array}\r\n * @param item {object}\r\n */\r\nfunction setCustomerIcons({ treeData, item }) {\r\n    let i = treeData.length;\r\n    while (i--) {\r\n        let data = treeData[i];\r\n        if (data.key === item.key) {\r\n            data.customerIcons = item.icons;\r\n            return true;\r\n        } else {\r\n            if (Array.isArray(data.children)) {\r\n                let res = setCustomerIcons({ treeData: data.children, item });\r\n                if (res) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * @desc 打开添加树节点模态框，与createSyncTree 内部的 addRender方法相同\r\n * @param item {object} 树节点信息\r\n * @param e {object} 事件信息\r\n * @param treeId {string}\r\n */\r\n\r\nexport function showAddTreeItemModal({ item, e, treeId }) {\r\n    let store = existenceCheck.call(this, treeId);\r\n    if (!store) {\r\n        return;\r\n    };\r\n\r\n    let showModal = store.getCache('showModal');\r\n    let metaId = store.getCache('metaId');\r\n    let clickAddIconEve = store.getListener('clickAddIconEve')\r\n\r\n    let { setFormStatus, EmptyAllFormValue } = this.form;\r\n    e.stopPropagation();\r\n    setFormStatus(metaId, 'edit');\r\n    store.setCache('currentNode', item);\r\n\r\n    EmptyAllFormValue(metaId);\r\n    if (showModal) {\r\n        store.setStore('showEditModal', true);\r\n        store.setCache('treeNodeOperation', 'add');\r\n    }\r\n    if (isFunction(clickAddIconEve)) {\r\n        clickAddIconEve(item);\r\n    }\r\n    store.setStateEve();\r\n}\r\n\r\n/**\r\n * @desc 打开修改树节点模态框，与createSyncTree 内部的 editRender方法相同\r\n * @param item {object} 树节点信息\r\n * @param e {object} 事件信息\r\n * @param treeId {string}\r\n */\r\n\r\nexport function showEditTreeItemModal({ item, e, treeId }) {\r\n    let store = existenceCheck.call(this, treeId);\r\n    if (!store) {\r\n        return;\r\n    };\r\n\r\n    let showModal = store.getCache('showModal')\r\n    let metaId = store.getCache('metaId')\r\n    let clickEditIconEve = store.getListener('clickEditIconEve')\r\n\r\n    let { setFormStatus } = this.form;\r\n    e.stopPropagation();\r\n    store.setCache('currentNode', item);\r\n\r\n    if (showModal) {\r\n        setFormStatus(metaId, 'edit');\r\n        store.setStore('showEditModal', true);\r\n        store.setCache('treeNodeOperation', 'edit');\r\n    }\r\n    if (isFunction(clickEditIconEve)) {\r\n        clickEditIconEve(item);\r\n    }\r\n    store.setStore('selectedKeys', [item.refpk])\r\n    store.setStateEve();\r\n}\r\n\r\n/**\r\n * @desc 打开删除树节点模态框，与createSyncTree 内部的 delRender方法相同\r\n * @param item {object} 树节点信息\r\n * @param e {object} 事件信息\r\n * @param treeId {string}\r\n */\r\n\r\nexport function showDeleteTreeItemModal({ item, e, treeId }) {\r\n    let store = existenceCheck.call(this, treeId);\r\n    if (!store) {\r\n        return;\r\n    };\r\n\r\n    let showModal = store.getCache('showModal')\r\n    let clickDelIconEve = store.getListener('clickDelIconEve')\r\n    e.stopPropagation();\r\n    store.setCache('currentNode', item);\r\n    if (showModal) {\r\n        store.setStore('showEditModal', true);\r\n        store.setCache('treeNodeOperation', 'del');\r\n    }\r\n    if (isFunction(clickDelIconEve)) {\r\n        clickDelIconEve(item);\r\n    }\r\n}\r\n\r\nexport function updataDataSource(id, callBack) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    };\r\n    let treeData = store.getStore('treeData')\r\n    if (callBack) {\r\n        let newDataSource = callBack(JSON.parse(JSON.stringify(treeData)));\r\n        if (Array.isArray(newDataSource)) {\r\n            store.getCache('deepData', newDataSource);\r\n            store.setStore('treeData', newDataSource);\r\n        }\r\n        store.setStateEve();\r\n    } else {\r\n        console.warn('请传回调参数，并且返回新的数据源');\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * 更新某个树节点\r\n * @param {*} id  树id\r\n * @param {*} updataNode 将要更新的节点\r\n */\r\nexport function updataTreeNode(id, updataNode) {\r\n    let store = existenceCheck.call(this, id);\r\n    if (!store) {\r\n        return;\r\n    };\r\n\r\n    let treeData = store.getStore('treeData')\r\n    let deepData = store.getCache('deepData')\r\n\r\n    function findEditNode(nodes) {\r\n        for (let i = 0; i < nodes.length; i++) {\r\n            let node = nodes[i];\r\n            if (node.refpk == updataNode.pid) {\r\n                node.children = node.children.map(child => {\r\n                    if (child.refpk == updataNode.refpk) return updataNode;\r\n                    return child;\r\n                })\r\n                return true;\r\n            }\r\n        }\r\n        nodes.map(node => {\r\n            if (node.children) {\r\n                findEditNode(node.children);\r\n            }\r\n        })\r\n    }\r\n    findEditNode(treeData);\r\n    findEditNode(deepData);\r\n}\r\n\r\n","\r\nimport * as syncTreeApi from './compatible';\r\n\r\nexport default syncTreeApi;\r\n","import React, { Component } from 'react';\r\nimport { Tooltip, Transfer, Button, Icon } from '@platform/base';\r\nimport classNames from 'classnames';\r\nimport { getMultiLang, getSysFieldid } from '@platform/api';\r\nrequire('./index.less');\r\n\r\nexport default class ListToListTransfer extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            serachKeyword: '', //搜索框的查询关键词\r\n            upDisabled: true, //上移和置顶按钮的禁用状态\r\n            downDisabled: true, //下移和置底按钮的禁用状态\r\n            targetSelectedKeys: [], //目标框中选中的元素的key集合\r\n            // 多语\r\n            LangData: null,\r\n            json: {},\r\n        };\r\n    }\r\n    componentWillMount() {\r\n        // 初始化调用getPlatformLang方法获取多语\r\n        let callback = (json, bool, LangData) => {\r\n            this.setState({ json, LangData }, () => {\r\n                //  在这里进行之前组件willMount的操作，比如加载缓存之类的\r\n            })\r\n        }\r\n        getMultiLang({ moduleId: 'container_transfer', callback }) // moduleId为所需加载json文件夹名称前缀\r\n    }\r\n    // 点击向左向右穿梭按钮\r\n    handleTransfer = (targetKeys, direction, moveKeys) => {\r\n        if (direction === 'right') {\r\n            // 让新移动到右边的项添加到右边已有项的底部\r\n            targetKeys = this.props.targetKeys.concat(moveKeys);\r\n        }\r\n        this.props.onTargetKeysChange(targetKeys);\r\n    };\r\n\r\n    // 列表项选中状态切换\r\n    onCheck = (sourceSelectedKeys, targetSelectedKeys) => {\r\n        this.setState({ targetSelectedKeys }, this.changeDisabled);\r\n    };\r\n\r\n    // 上移下移和置顶置底按钮禁用状态切换\r\n    changeDisabled = (targetKeys = this.props.targetKeys) => {\r\n        // 找到选中的targetSelectedKeys中每一项在targetKeys 对应的索引,组成indexAry\r\n        // 对indexAry从小到大排序, 如果相邻两项的差都为1, 说明选中的是连续的节点, 否则不不连续\r\n        let { targetSelectedKeys } = this.state;\r\n        let indexAry = targetSelectedKeys.map(item => targetKeys.indexOf(item)).sort((a, b) => a - b);\r\n        let continuous = () => {\r\n            if (indexAry.length > 1) {\r\n                for (let i = 0; i < indexAry.length - 1; i++) {\r\n                    if (indexAry[i + 1] - indexAry[i] != 1) {\r\n                        return false;\r\n                    }\r\n                }\r\n            } else if (indexAry.length == 0) {\r\n                return false;\r\n            }\r\n            return true;\r\n        };\r\n\r\n        let continuousFlag = continuous();\r\n        // console.log(indexAry, continuousFlag, 99);\r\n        if (continuousFlag) {\r\n            // 选中的是连续的\r\n            // 选中的包含了目标框中的第一个元素，不能上移\r\n            if (indexAry[0] === 0) {\r\n                this.setState({ upDisabled: true });\r\n            } else {\r\n                this.setState({ upDisabled: false });\r\n            }\r\n\r\n            // 选中的包含了目标框中的最后一个元素，不能下移\r\n            if (indexAry[indexAry.length - 1] === targetKeys.length - 1) {\r\n                this.setState({ downDisabled: true });\r\n            } else {\r\n                this.setState({ downDisabled: false });\r\n            }\r\n        } else {\r\n            this.setState({\r\n                upDisabled: true,\r\n                downDisabled: true,\r\n            });\r\n        }\r\n    };\r\n\r\n    // 点击上移和下移按钮\r\n    handleMove = direction => {\r\n        let { targetKeys } = this.props;\r\n        let { targetSelectedKeys } = this.state;\r\n        let temp = JSON.parse(JSON.stringify(targetKeys));\r\n        let indexAry = targetSelectedKeys.map(item => targetKeys.indexOf(item)).sort((a, b) => a - b);\r\n        let before = targetKeys.slice(0, indexAry[0]);\r\n        let selected = targetSelectedKeys;\r\n        let after = targetKeys.slice(indexAry[indexAry.length - 1] + 1, targetKeys.length);\r\n        switch (direction) {\r\n            case 'up':\r\n                if (before.length > 0) {\r\n                    let lastBeforeItem = before[before.length - 1];\r\n                    before.splice(before.length - 1, 1);\r\n                    temp = [...before, ...selected, lastBeforeItem, ...after];\r\n                }\r\n                break;\r\n            case 'down':\r\n                if (after.length > 0) {\r\n                    let firstAfterItem = after[0];\r\n                    after.splice(0, 1);\r\n                    temp = [...before, firstAfterItem, ...selected, ...after];\r\n                }\r\n                break;\r\n            case 'top':\r\n                temp = [...selected, ...before, ...after];\r\n                break;\r\n            case 'bottom':\r\n                temp = [...before, ...after, ...selected];\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        this.handleTransfer(temp);\r\n        this.getRightSelectEle()\r\n        this.changeDisabled(temp);\r\n    };\r\n\r\n    // 按关键词搜索过滤已有列表项展示匹配到的内容\r\n    handleFilterOption = (inputValue, option) => {\r\n        return option.title.indexOf(inputValue) > -1;\r\n    };\r\n\r\n    // 获取右侧第一个选中的元素 input聚焦 滚动到视口区域 \r\n    getRightSelectEle = () => {\r\n        let el = document.querySelector('li.u-transfer-list-content-item > label.is-checked > input[type=\"checkbox\"]')\r\n        setTimeout(() => {\r\n            el && el.focus()\r\n        }, 20)\r\n    }\r\n    render() {\r\n        let {\r\n            className,\r\n            dataSource,\r\n            targetKeys,\r\n            showSearch,\r\n            listRender,\r\n            titles,\r\n            operations,\r\n            searchPlaceholder,\r\n            notFoundContent,\r\n            showMoveBtn,\r\n        } = this.props;\r\n        titles = titles || [this.state.json['container-transfer-0001'], this.state.json['container-transfer-0002']]\r\n        notFoundContent = notFoundContent || this.state.json['container-transfer-0003']\r\n        searchPlaceholder = searchPlaceholder || this.state.json['container-transfer-0004']\r\n        let { upDisabled, downDisabled } = this.state;\r\n        const transferClass = classNames({\r\n            'transfer-wrap': true,\r\n            [className]: !!className, // 接收传进来的 class 名\r\n        });\r\n        return (\r\n            <div className=\"list-to-list\">\r\n                <div className={transferClass} fieldid={getSysFieldid('transfer_area')}>\r\n                    <Transfer\r\n                        lazy={this.props.lazy}\r\n                        dataSource={dataSource}\r\n                        targetKeys={targetKeys}\r\n                        onChange={this.handleTransfer}\r\n                        onSelectChange={this.onCheck}\r\n                        filterOption={this.handleFilterOption}\r\n                        showSearch={showSearch}\r\n                        render={listRender}\r\n                        titles={titles}\r\n                        operations={operations}\r\n                        searchPlaceholder={searchPlaceholder}\r\n                        notFoundContent={notFoundContent}\r\n                    />\r\n                    {showMoveBtn && (\r\n                        <div className=\"move-btns\">\r\n                            {upDisabled ? <Button\r\n                                className=\"move-btn move-top\"\r\n                                disabled={upDisabled}\r\n                                onClick={() => this.handleMove('top')}\r\n                            >\r\n                                <Icon type=\"uf uf-2arrow-up\"></Icon>\r\n                            </Button> : <Tooltip\r\n                                placement=\"top\"\r\n                                overlay={this.state.json['container-transfer-up-top']}\r\n                                delayHide={1}\r\n                                delayShow={1000}\r\n                            >\r\n                                <Button\r\n                                    className=\"move-btn move-top\"\r\n                                    disabled={upDisabled}\r\n                                    onClick={() => this.handleMove('top')}\r\n                                >\r\n                                    <Icon type=\"uf uf-2arrow-up\"></Icon>\r\n                                </Button>\r\n                            </Tooltip>}\r\n                            {upDisabled ? <Button\r\n                                className=\"move-btn move-up\"\r\n                                disabled={upDisabled}\r\n                                onClick={() => this.handleMove('up')}\r\n                            >\r\n                                <Icon type=\"uf uf-arrow-up\"></Icon>\r\n                            </Button> : <Tooltip\r\n                                placement=\"top\"\r\n                                overlay={this.state.json['container-transfer-up']}\r\n                                delayHide={1}\r\n                                delayShow={1000}\r\n                            >\r\n                                <Button\r\n                                    className=\"move-btn move-up\"\r\n                                    disabled={upDisabled}\r\n                                    onClick={() => this.handleMove('up')}\r\n                                >\r\n                                    <Icon type=\"uf uf-arrow-up\"></Icon>\r\n                                </Button>\r\n                            </Tooltip>}\r\n                            {downDisabled ? <Button\r\n                                className=\"move-btn move-down\"\r\n                                disabled={downDisabled}\r\n                                onClick={() => this.handleMove('down')}\r\n                            >\r\n                                <Icon type=\"uf uf-arrow-down\"></Icon>\r\n                            </Button> : <Tooltip\r\n                                placement=\"top\"\r\n                                overlay={this.state.json['container-transfer-down']}\r\n                                delayHide={1}\r\n                                delayShow={1000}\r\n                            >\r\n                                <Button\r\n                                    className=\"move-btn move-down\"\r\n                                    disabled={downDisabled}\r\n                                    onClick={() => this.handleMove('down')}\r\n                                >\r\n                                    <Icon type=\"uf uf-arrow-down\"></Icon>\r\n                                </Button>\r\n                            </Tooltip>}\r\n                            {downDisabled ? <Button\r\n                                className=\"move-btn move-bottom\"\r\n                                disabled={downDisabled}\r\n                                onClick={() => this.handleMove('bottom')}\r\n                            >\r\n                                <Icon type=\"uf uf-2arrow-down\"></Icon>\r\n                            </Button> : <Tooltip\r\n                                placement=\"top\"\r\n                                overlay={this.state.json['container-transfer-down-bottom']}\r\n                                delayHide={1}\r\n                                delayShow={1000}\r\n                            >\r\n                                <Button\r\n                                    className=\"move-btn move-bottom\"\r\n                                    disabled={downDisabled}\r\n                                    onClick={() => this.handleMove('bottom')}\r\n                                >\r\n                                    <Icon type=\"uf uf-2arrow-down\"></Icon>\r\n                                </Button>\r\n                            </Tooltip>}\r\n                        </div>\r\n                    )}\r\n                    {this.props.children}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nListToListTransfer.defaultProps = {\r\n    showSearch: false, // 是否显示搜索框\r\n    showMoveBtn: false, //是否显示上移下移，置顶置底按钮\r\n    // titles: [ '来源', '目标' ], // 两侧框的顶部标题\r\n    operations: ['', ''], // 穿梭按钮的文字\r\n    // searchPlaceholder: '请输入内容', // 搜索框的提示文字\r\n    // notFoundContent: '暂无数据', // 列表为空时显示的内容\r\n    dataSource: [], // 数据源\r\n    targetKeys: [], // 目标框数据的 keys\r\n    listRender: ({ title }) => title, // 列表渲染的字段内容\r\n};\r\n","/**\r\n * Todo\r\n * 异步树处理\r\n * 搜索点击 X 号清除搜索数据\r\n * 勾选相邻的实现排序\r\n * 带着子级穿梭\r\n */\r\n\r\n/**\r\n * 逻辑说明：\r\n * props.checkable 为 true 时，树带复选框，只有叶子节点可以穿梭到右边，勾选复选框选中实现穿梭；\r\n * props.checkable 为 false 时，树不带复选框，所有节点都可以穿梭到右边，通过点击树节点选中实现穿梭\r\n*/\r\n\r\nimport React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Tooltip, Icon, Button, Tree, Input as FormControl, Checkbox, Alert } from '@platform/base';\r\nimport classNames from 'classnames';\r\nimport difference from 'lodash/difference';\r\nimport { hasUnLoadNode, toggle } from './methods';\r\nimport { getMultiLang, getSysFieldid } from '@platform/api';\r\n\r\nrequire('./index.less');\r\n\r\nconst TreeNode = Tree.TreeNode;\r\nexport default class TreeToListTransfer extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        const { treeNode, listData, leafKeys, treeData } = this.generate(props);\r\n        let treeCheckedKeys = [];\r\n        let treeSelectedKeys = [];\r\n        let targetKeys = listData.map(({ key }) => key);\r\n        props.checkable ? (treeCheckedKeys = targetKeys) : (treeSelectedKeys = targetKeys);\r\n        this.state = {\r\n            treeNode, // 树的树型数据\r\n            treeData, // 树所有的扁平数据\r\n            listData, // 列表的扁平数据\r\n            leafKeys, // 树的叶子节点的 key 集合\r\n            treeCheckedKeys, // 树复选框选中的 key 集合\r\n            treeSelectedKeys, // 树节点选中的 key 集合\r\n            treeExpandedKeys: treeCheckedKeys, // 树展开的节点的 key集合\r\n            treeAutoExpandParent: true, // 自动展开父节点 初始为true 有展开操作的时候为false\r\n            listCheckedKeys: [], // 目标框列表勾选中的 key 集合\r\n            listSelectedKeys: [], // 目标框列表点击选中的 key 集合\r\n            treeSearchKey: '', // 树的搜索关键词\r\n            listSearchKey: '', // 列表的搜索关键词\r\n            unLoadAlert: false, // 异步加载提示显示状态\r\n            upDisabled: true, // 上移禁用状态\r\n            downDisabled: true, //下移禁用状态\r\n            // 多语\r\n            LangData: null,\r\n            json: {},\r\n        };\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        const { treeNode, listData, leafKeys, expandedKeys } = this.generate(nextProps, this.state);\r\n        const keys = this.props.checkable ? 'treeCheckedKeys' : 'treeSelectedKeys'; // 根据 checkable 来决定是修改树的 checked 还是 selected keys 的值；\r\n        const selected = listData.map(({ key }) => key);\r\n        const { treeSearchKey, treeExpandedKeys } = this.state;\r\n        const searching = !!(nextProps.showSearch && treeSearchKey && treeSearchKey.length > 0);\r\n        this.setState(\r\n            {\r\n                treeNode,\r\n                listData,\r\n                leafKeys,\r\n                [keys]: selected,\r\n                treeExpandedKeys: searching ? [...new Set([...[keys], ...expandedKeys])] : treeExpandedKeys,\r\n                treeAutoExpandParent: searching, // 搜索的时候 自动展开父节点设为true\r\n            },\r\n            () => this.changeDisabled(nextProps.targetKeys),\r\n        );\r\n    }\r\n    componentWillMount() {\r\n        // 初始化调用getPlatformLang方法获取多语\r\n        let callback = (json, bool, LangData) => {\r\n            this.setState({ json, LangData }, () => {\r\n                //  在这里进行之前组件willMount的操作，比如加载缓存之类的\r\n            })\r\n        }\r\n        getMultiLang({ moduleId: 'container_transfer', callback }) // moduleId为所需加载json文件夹名称前缀\r\n    }\r\n    // 根据传进来的 props 数据生成本页面需要的各种数据\r\n    generate = (props, state = {}) => {\r\n        const { dataSource, targetKeys, rowKey, rowTitle, rowChildren, showSearch, showListSearch, listRender } = props;\r\n        const { treeSearchKey } = state;\r\n        const leafKeys = []; // 叶子节点 key 的集合\r\n        const listData = []; // 列表数据\r\n        const expandedKeys = []; // 搜索时 展开的节点\r\n        const leafNodes = []; // 叶子节点集合\r\n        const treeData = []; // 所有节点集合\r\n        // title 前icon 通过 jsx  HTML和content\r\n        const getIcon = el => {\r\n            return <span><i className=\"iconfont\"></i>{el}</span>\r\n        }\r\n        const loop = data =>\r\n            data.map(item => {\r\n                const { [rowChildren]: children, [rowKey]: key, [rowTitle]: title, ...otherProps } = item;\r\n                treeData.push({ key, title });\r\n                if (Object.prototype.toString.call(children) !== '[object Array]') {\r\n                    leafKeys.push(key);\r\n                    let nodeTitle = listRender(item);\r\n                    if (showSearch && treeSearchKey && treeSearchKey.length > 0) {\r\n                        // if tree searching\r\n                        if (title.indexOf(treeSearchKey) > -1) {\r\n                            expandedKeys.push(key);\r\n                            const idx = nodeTitle.indexOf(treeSearchKey);\r\n                            nodeTitle = (\r\n                                <span>\r\n                                    {nodeTitle.substr(0, idx)}\r\n                                    <span style={{ color: '#f50' }}>{treeSearchKey}</span>\r\n                                    {nodeTitle.substr(idx + treeSearchKey.length)}\r\n                                </span>\r\n                            );\r\n                        }\r\n                    }\r\n                    leafNodes.push({ key, title: nodeTitle });\r\n                    return <TreeNode {...otherProps} className='node-item' key={key} title={getIcon(nodeTitle)} disableCheckbox={this.props.disable} isLeaf />;\r\n                } else {\r\n                    return (\r\n                        <TreeNode {...otherProps} className='node-item' key={key} title={getIcon(listRender(item))} disableCheckbox={this.props.disable}>\r\n                            {loop(item.children)}\r\n                        </TreeNode>\r\n                    );\r\n                }\r\n            });\r\n\r\n        let treeNode = loop(dataSource);\r\n        targetKeys.map(key => {\r\n            let listItem = treeData.find(cur => cur.key == key);\r\n            listItem && listData.push(listItem);\r\n        });\r\n        return {\r\n            treeNode,\r\n            leafKeys,\r\n            listData,\r\n            expandedKeys,\r\n            treeData,\r\n        };\r\n    };\r\n\r\n    // 左边树勾选选中\r\n    onTreeCheck = (checkedKeys, e) => {\r\n        let checked = typeof e === 'object' ? e.checked : e;\r\n        if (checked) {\r\n            if (this.props.onLoadData && hasUnLoadNode([e.node])) {\r\n                this.setState({ unLoadAlert: true });\r\n            } else {\r\n                this.setState({\r\n                    treeCheckedKeys: checkedKeys.filter(key => this.state.leafKeys.indexOf(key) > -1),\r\n                    unLoadAlert: false,\r\n                });\r\n            }\r\n        } else {\r\n            this.setState({\r\n                treeCheckedKeys: checkedKeys.filter(key => this.state.leafKeys.indexOf(key) > -1),\r\n                unLoadAlert: false,\r\n            });\r\n        }\r\n    };\r\n\r\n    // 右边列表的勾选选中\r\n    onListCheck = (value, checkedKeys) => {\r\n        let keys = this.props.checkable ? 'listCheckedKeys' : 'listSelectedKeys';\r\n        if (value) {\r\n            this.setState(\r\n                { [keys]: [...new Set([...this.state[keys], ...checkedKeys])] },\r\n                this.changeDisabled,\r\n            );\r\n        } else {\r\n            this.setState(\r\n                { [keys]: this.state[keys].filter(key => checkedKeys.indexOf(key) < 0) },\r\n                this.changeDisabled,\r\n            );\r\n        }\r\n    };\r\n\r\n    // 左边树点击选中\r\n    onTreeSelect = (treeSelectedKeys, info) => {\r\n        if (this.props.checkable) return false; // 如果有复选框，就不能点击选中树节点\r\n        this.setState({ treeSelectedKeys });\r\n    };\r\n\r\n    // 右边列表点击选中\r\n    onListSelect = key => {\r\n        // console.log('点击列表项 ', key);\r\n        let keys = this.props.checkable ? 'listCheckedKeys' : 'listSelectedKeys';\r\n        this.setState(\r\n            { [keys]: toggle(this.state[keys], key) },\r\n            this.changeDisabled,\r\n        );\r\n    };\r\n\r\n    // 搜索左边树\r\n    onTreeSearch = value => {\r\n        this.setState(\r\n            { treeSearchKey: value },\r\n            () => {\r\n                if (this.props.onLoadData && this.props.onTreeSearch) {\r\n                    // async search\r\n                    this.props.onTreeSearch(value);\r\n                } else {\r\n                    const { treeNode, listData, leafKeys, expandedKeys } = this.generate(this.props, this.state);\r\n                    const treeCheckedKeys = listData.map(({ key }) => key);\r\n                    this.setState({\r\n                        treeNode,\r\n                        listData,\r\n                        leafKeys,\r\n                        treeCheckedKeys,\r\n                        treeExpandedKeys: [...new Set([...treeCheckedKeys, ...expandedKeys])],\r\n                        treeAutoExpandParent: true, // 搜索的时候 自动展开父节点设为true\r\n                    });\r\n                }\r\n            },\r\n        );\r\n    };\r\n\r\n    // 搜索右边列表\r\n    onListSearch = value => {\r\n        this.setState({ listSearchKey: value });\r\n    };\r\n\r\n    // 上移下移和置顶置底按钮禁用状态切换\r\n    // 上移下移和置顶置底按钮禁用状态切换\r\n    changeDisabled = (targetKeys = this.props.targetKeys) => {\r\n        // 找到选中的targetSelectedKeys中每一项在targetKeys 对应的索引,组成indexAry\r\n        // 对indexAry从小到大排序, 如果相邻两项的差都为1, 说明选中的是连续的节点, 否则不不连续\r\n        let { listCheckedKeys, listSelectedKeys } = this.state;\r\n        let keysAry = this.props.checkable ? listCheckedKeys : listSelectedKeys;\r\n\r\n        let indexAry = keysAry.map(item => targetKeys.indexOf(item)).sort((a, b) => a - b);\r\n        let continuous = () => {\r\n            if (indexAry.length > 1) {\r\n                for (let i = 0; i < indexAry.length - 1; i++) {\r\n                    if (indexAry[i + 1] - indexAry[i] != 1) {\r\n                        return false;\r\n                    }\r\n                }\r\n            } else if (indexAry.length == 0) {\r\n                return false;\r\n            }\r\n            return true;\r\n        };\r\n\r\n        let continuousFlag = continuous();\r\n        if (continuousFlag) {\r\n            // 选中的是连续的\r\n            // 选中的包含了目标框中的第一个元素，不能上移\r\n            if (indexAry[0] === 0) {\r\n                this.setState({ upDisabled: true });\r\n            } else {\r\n                this.setState({ upDisabled: false });\r\n            }\r\n            // 选中的包含了目标框中的最后一个元素，不能下移\r\n            if (indexAry[indexAry.length - 1] === targetKeys.length - 1) {\r\n                this.setState({ downDisabled: true });\r\n            } else {\r\n                this.setState({ downDisabled: false });\r\n            }\r\n        } else {\r\n            this.setState({\r\n                upDisabled: true,\r\n                downDisabled: true,\r\n            });\r\n        }\r\n    };\r\n    // 点击上移和下移按钮\r\n    handleMove = direction => {\r\n        let { targetKeys, checkable } = this.props;\r\n        let { listCheckedKeys, listSelectedKeys } = this.state;\r\n        let temp = JSON.parse(JSON.stringify(targetKeys));\r\n        let keysAry = checkable ? listCheckedKeys : listSelectedKeys;\r\n        let indexAry = keysAry.map(item => targetKeys.indexOf(item)).sort((a, b) => a - b);\r\n        let before = targetKeys.slice(0, indexAry[0]);\r\n        let selected = keysAry;\r\n        let after = targetKeys.slice(indexAry[indexAry.length - 1] + 1, targetKeys.length);\r\n        switch (direction) {\r\n            case 'up':\r\n                if (before.length > 0) {\r\n                    let lastBeforeItem = before[before.length - 1];\r\n                    before.splice(before.length - 1, 1);\r\n                    temp = [...before, ...selected, lastBeforeItem, ...after];\r\n                }\r\n                break;\r\n            case 'down':\r\n                if (after.length > 0) {\r\n                    let firstAfterItem = after[0];\r\n                    after.splice(0, 1);\r\n                    temp = [...before, firstAfterItem, ...selected, ...after];\r\n                }\r\n                break;\r\n            case 'top':\r\n                temp = [...selected, ...before, ...after];\r\n                break;\r\n            case 'bottom':\r\n                temp = [...before, ...after, ...selected];\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        this.props.onTargetKeysChange(temp);\r\n        this.getRightSelectEle();\r\n        this.changeDisabled(temp);\r\n    };\r\n    // 获取右侧第一个选中的元素 input聚焦 滚动到视口区域\r\n    getRightSelectEle = () => {\r\n        let el = document.querySelector('li.u-transfer-list-content-item > label.is-checked > input[type=\"checkbox\"]')\r\n        setTimeout(() => {\r\n            el && el.focus()\r\n        }, 20)\r\n    }\r\n    render() {\r\n        let {\r\n            className,\r\n            treeLoading,\r\n            titles,\r\n            showSearch,\r\n            showListSearch,\r\n            onLoadData,\r\n            operations,\r\n            searchPlaceholder,\r\n            notFoundContent,\r\n            showMoveBtn,\r\n            style,\r\n            checkable,\r\n            disable,\r\n        } = this.props;\r\n        titles = titles || [this.state.json['container-transfer-0001'], this.state.json['container-transfer-0002']]\r\n        notFoundContent = notFoundContent || this.state.json['container-transfer-0003']\r\n        searchPlaceholder = searchPlaceholder || this.state.json['container-transfer-0004']\r\n        let [sourceTitle, targetTitle] = titles;\r\n        const {\r\n            treeNode,\r\n            treeData,\r\n            listData,\r\n            leafKeys,\r\n            treeCheckedKeys,\r\n            treeSelectedKeys,\r\n            listCheckedKeys,\r\n            listSelectedKeys,\r\n            treeExpandedKeys,\r\n            treeAutoExpandParent,\r\n            listSearchKey,\r\n            unLoadAlert,\r\n            upDisabled,\r\n            downDisabled,\r\n        } = this.state;\r\n\r\n        let leftTemp = checkable ? treeCheckedKeys : treeSelectedKeys; // 左边选中的 key 集合\r\n        let validTreeNum = checkable ? leafKeys.length : treeData.length; // 树中可以穿梭到列表中有效的数据的总数\r\n        let rightTemp = checkable ? listCheckedKeys : listSelectedKeys; // 右边选中的 key 集合\r\n\r\n        const treeTransferClass = classNames({\r\n            'transfer-wrap': true,\r\n            [className]: !!className, // 接收传进来的 class 名\r\n        });\r\n        const treeTransferlistBodyClass = classNames({\r\n            'u-transfer-list-body': true,\r\n            'u-transfer-list-body-with-search': showSearch,\r\n        });\r\n        const treeTransferlistBodyClassRight = classNames({\r\n            'u-transfer-list-body': true,\r\n            'u-transfer-list-body-with-search': showListSearch,\r\n        });\r\n        const openIcon = <Icon type=\"uf-reduce-s-o\" />\r\n        const closeIcon = <Icon type=\"uf-add-s-o\" />\r\n        const treeProps = {\r\n            checkable,\r\n            multiple: !checkable,\r\n            showLine: false,\r\n            checkedKeys: treeCheckedKeys,\r\n            selectedKeys: treeSelectedKeys,\r\n            onSelect: this.onTreeSelect,\r\n            onCheck: this.onTreeCheck,\r\n            expandedKeys: treeExpandedKeys,\r\n            autoExpandParent: treeAutoExpandParent,\r\n            onExpand: expandedKeys => {\r\n                this.setState({\r\n                    treeAutoExpandParent: false,\r\n                    treeExpandedKeys: expandedKeys,\r\n                });\r\n            },\r\n            loadData: onLoadData,\r\n            openIcon,\r\n            closeIcon,\r\n        };\r\n\r\n        const sourceHeaderCheckProps = {\r\n            checked: treeCheckedKeys.length > 0 && treeCheckedKeys.length === leafKeys.length,\r\n            indeterminate: treeCheckedKeys.length > 0 && treeCheckedKeys.length < leafKeys.length,\r\n            onChange: value => {\r\n                let checkedKeys = value ? leafKeys : [];\r\n                this.onTreeCheck(checkedKeys, value);\r\n            },\r\n        };\r\n\r\n        let keys = checkable ? 'listCheckedKeys' : 'listSelectedKeys';\r\n        const listHeaderCheckProps = {\r\n            checked: this.state[keys].length > 0 && this.state[keys].length === listData.length,\r\n            indeterminate: this.state[keys].length > 0 && this.state[keys].length < listData.length,\r\n            onChange: value => this.onListCheck(value, listData.map(({ key }) => key)),\r\n        };\r\n\r\n        const operaRightButtonProps = {\r\n            className: 'btn-primary',\r\n            size: 'sm',\r\n            disabled:\r\n                difference(leftTemp, listData.map(({ key }) => key)).length === 0 &&\r\n                difference(listData.map(({ key }) => key), leftTemp).length === 0,\r\n            onClick: () => {\r\n                this.setState({ unLoadAlert: false });\r\n                this.props.onTargetKeysChange && this.props.onTargetKeysChange(leftTemp);\r\n            },\r\n        };\r\n\r\n        const operaLeftButtonProps = {\r\n            className: 'btn-primary',\r\n            size: 'sm',\r\n            disabled: rightTemp.length === 0,\r\n            onClick: () => {\r\n                this.setState({\r\n                    listCheckedKeys: [],\r\n                    listSelectedKeys: [],\r\n                    unLoadAlert: false,\r\n                });\r\n                let restTargetKeys = this.state.listData\r\n                    .map(({ key }) => key)\r\n                    .filter(key => rightTemp.indexOf(key) < 0); //剩下的目标项\r\n                this.props.onTargetKeysChange && this.props.onTargetKeysChange(restTargetKeys);\r\n            },\r\n        };\r\n        // all to right\r\n        const operaAllRightButtonProps = {\r\n            className: 'btn-primary',\r\n            size: 'sm',\r\n            disabled: disable || false,\r\n            onClick: () => {\r\n                this.setState({ unLoadAlert: false })\r\n                this.props.onTargetKeysChange && this.props.onTargetKeysChange(leafKeys, 'allToRight');\r\n            },\r\n        }\r\n        // all to left\r\n        const operaAllLeftButtonProps = {\r\n            className: 'btn-primary',\r\n            size: 'sm',\r\n            disabled: this.state.listData.length === 0,\r\n            onClick: () => {\r\n                this.setState({\r\n                    listCheckedKeys: [],\r\n                    listSelectedKeys: [],\r\n                    unLoadAlert: false,\r\n                });\r\n                this.props.onTargetKeysChange && this.props.onTargetKeysChange([], 'allToLeft');\r\n            },\r\n        }\r\n        return (\r\n            <div className={treeTransferClass}>\r\n                <div className=\"u-transfer\" fieldid={getSysFieldid('transfer_area')}>\r\n                    <div className=\"u-transfer-list u-transfer-list-left\" fieldid={getSysFieldid('left_area')}>\r\n                        <div className=\"u-transfer-list-header\">\r\n                            {checkable && <Checkbox disabled={disable} {...sourceHeaderCheckProps} />}\r\n                            <span className=\"u-transfer-list-header-selected\">\r\n                                {`${leftTemp.length > 0 ? `${leftTemp.length}/` : ''}${validTreeNum} `}\r\n                                {this.state.json['container-transfer-0005']}\r\n                            </span>\r\n                            <span className=\"u-transfer-list-header-title\">{sourceTitle}</span>\r\n                        </div>\r\n                        <div className={treeTransferlistBodyClass}>\r\n                            {showSearch ? (\r\n                                <div className=\"u-transfer-list-body-search-wrapper\">\r\n                                    <FormControl\r\n                                        type=\"search\"\r\n                                        placeholder={searchPlaceholder}\r\n                                        onChange={this.onTreeSearch}\r\n                                        value={this.state.treeSearchKey}\r\n                                    />\r\n                                </div>\r\n                            ) : null}\r\n                            {unLoadAlert ? (\r\n                                <div className=\"tree-transfer-panel-body-alert\">\r\n                                    <Alert dark onDismiss={() => this.setState({ unLoadAlert: false })} closeLabel=\"关闭\">\r\n                                        无法选中，原因：子节点未完全加载\r\n\t                                </Alert>\r\n                                </div>\r\n                            ) : null}\r\n                            <div className=\"u-transfer-list-content\">\r\n                                <Tree {...treeProps}>{treeNode}</Tree>\r\n                            </div>\r\n                            {this.props.dataSource.length === 0 && (\r\n                                <div style={{ display: 'block' }} className=\"u-transfer-list-body-not-found\">\r\n                                    {notFoundContent}\r\n                                </div>\r\n                            )}\r\n                            {/* <Loadingstate show={treeLoading} colors=\"info\">\r\n\t\t\t\t\t\t</Loadingstate> */}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"u-transfer-operation\">\r\n                        <Tooltip\r\n                            placement=\"top\"\r\n                            overlay={this.state.json['container-transfer-right'] || 'ssss'}\r\n                            delayHide={1}\r\n                            delayShow={1000}\r\n                        >\r\n                            <Button {...operaRightButtonProps}>\r\n                                <span>\r\n                                    {operations[0]}\r\n                                    <Icon className=\"uf uf-arrow-right\" />\r\n                                </span>\r\n                            </Button>\r\n                        </Tooltip>\r\n                        <Tooltip\r\n                            placement=\"top\"\r\n                            overlay={this.state.json['container-transfer-right-all']}\r\n                            delayHide={1}\r\n                            delayShow={1000}\r\n                        >\r\n                            <Button {...operaAllRightButtonProps}>\r\n                                <span>\r\n                                    <Icon className=\"uf uf-2arrow-right\"></Icon>\r\n                                </span>\r\n                            </Button>\r\n                        </Tooltip>\r\n                        <Tooltip\r\n                            placement=\"top\"\r\n                            overlay={this.state.json['container-transfer-left-all']}\r\n                            delayHide={1}\r\n                            delayShow={1000}\r\n                        >\r\n                            <Button {...operaAllLeftButtonProps}>\r\n                                <span>\r\n                                    <Icon className=\"uf uf-2arrow-left\"></Icon>\r\n                                </span>\r\n                            </Button>\r\n                        </Tooltip>\r\n                        <Tooltip\r\n                            placement=\"top\"\r\n                            overlay={this.state.json['container-transfer-left']}\r\n                            delayHide={1}\r\n                            delayShow={1000}\r\n                        >\r\n                            <Button {...operaLeftButtonProps}>\r\n                                <span>\r\n                                    <Icon className=\"uf uf-arrow-left\" />\r\n                                    {operations[1]}\r\n                                </span>\r\n                            </Button>\r\n                        </Tooltip>\r\n                    </div>\r\n                    <div className=\"u-transfer-list u-transfer-list-right\" fieldid={getSysFieldid('right_area')}>\r\n                        <div className=\"u-transfer-list-header\">\r\n                            <Checkbox {...listHeaderCheckProps} />\r\n                            <span className=\"u-transfer-list-header-select\">\r\n                                {`${rightTemp.length > 0 ? `${rightTemp.length}/` : ''}${listData.length} `}\r\n                                {this.state.json['container-transfer-0005']}\r\n                            </span>\r\n                            <span className=\"u-transfer-list-header-title\">{targetTitle}</span>\r\n                        </div>\r\n                        <div className={treeTransferlistBodyClassRight}>\r\n                            {showListSearch ? (\r\n                                <div className=\"u-transfer-list-body-search-wrapper\">\r\n                                    <FormControl\r\n                                        type=\"search\"\r\n                                        placeholder={searchPlaceholder}\r\n                                        onChange={this.onListSearch}\r\n                                        value={this.state.listSearchKey}\r\n                                    />\r\n                                </div>\r\n                            ) : null}\r\n                            <ul className=\"u-transfer-list-content\">\r\n                                {listData.map(item => (\r\n                                    <li\r\n                                        className={\r\n                                            listSelectedKeys.indexOf(item.key) == -1 ? (\r\n                                                'u-transfer-list-content-item'\r\n                                            ) : (\r\n                                                'u-transfer-list-content-item u-transfer-list-content-item-selected'\r\n                                            )\r\n                                        }\r\n                                        key={item.key}\r\n                                        title={item.title}\r\n                                        onClick={() => this.onListSelect(item.key)}\r\n                                    >\r\n                                        {checkable && (\r\n                                            <Checkbox\r\n                                                checked={listCheckedKeys.indexOf(item.key) > -1}\r\n                                                onChange={value => this.onListCheck(value, [item.key])}\r\n                                            />\r\n                                        )}\r\n                                        {showSearch &&\r\n                                            listSearchKey &&\r\n                                            listSearchKey.length > 0 &&\r\n                                            item.title.indexOf(listSearchKey) > -1 ? (\r\n                                                <span style={{ verticalAlign: 'top' }}>\r\n                                                    {item.title.substr(0, item.title.indexOf(listSearchKey))}\r\n                                                    <span style={{ color: '#f50' }}>{listSearchKey}</span>\r\n                                                    {item.title.substr(\r\n                                                        item.title.indexOf(listSearchKey) + listSearchKey.length,\r\n                                                    )}\r\n                                                </span>\r\n                                            ) : (\r\n                                                <span>{item.title}</span>\r\n                                            )}\r\n                                    </li>\r\n                                ))}\r\n                                {listData.length === 0 && (\r\n                                    <div style={{ display: 'block' }} className=\"u-transfer-list-body-not-found\">\r\n                                        {notFoundContent}\r\n                                    </div>\r\n                                )}\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                {showMoveBtn && (\r\n                    <div className=\"move-btns\">\r\n                        {upDisabled ? <Button\r\n                            className=\"move-btn move-up\"\r\n                            disabled={upDisabled}\r\n                            onClick={() => this.handleMove('up')}\r\n                        >\r\n                            <Icon type=\"uf uf-arrow-up\"></Icon>\r\n                        </Button> : <Tooltip\r\n                            placement=\"top\"\r\n                            overlay={this.state.json['container-transfer-up']}\r\n                            delayHide={1}\r\n                            delayShow={1000}\r\n                        >\r\n                            <Button\r\n                                className=\"move-btn move-up\"\r\n                                disabled={upDisabled}\r\n                                onClick={() => this.handleMove('up')}\r\n                            >\r\n                                <Icon type=\"uf uf-arrow-up\"></Icon>\r\n                            </Button>\r\n                        </Tooltip>}\r\n                        {downDisabled ? <Button\r\n                            className=\"move-btn move-down\"\r\n                            disabled={downDisabled}\r\n                            onClick={() => this.handleMove('down')}\r\n                        >\r\n                            <Icon type=\"uf uf-arrow-down\"></Icon>\r\n                        </Button> : <Tooltip\r\n                            placement=\"top\"\r\n                            overlay={this.state.json['container-transfer-down']}\r\n                            delayHide={1}\r\n                            delayShow={1000}\r\n                        >\r\n                            <Button\r\n                                className=\"move-btn move-down\"\r\n                                disabled={downDisabled}\r\n                                onClick={() => this.handleMove('down')}\r\n                            >\r\n                                <Icon type=\"uf uf-arrow-down\"></Icon>\r\n                            </Button>\r\n                        </Tooltip>}\r\n                        {upDisabled ? <Button\r\n                            className=\"move-btn move-top\"\r\n                            disabled={upDisabled}\r\n                            onClick={() => this.handleMove('top')}\r\n                        >\r\n                            <Icon type=\"uf uf-2arrow-up\"></Icon>\r\n                        </Button> : <Tooltip\r\n                            placement=\"top\"\r\n                            overlay={this.state.json['container-transfer-up-top']}\r\n                            delayHide={1}\r\n                            delayShow={1000}\r\n                        >\r\n                            <Button\r\n                                className=\"move-btn move-top\"\r\n                                disabled={upDisabled}\r\n                                onClick={() => this.handleMove('top')}\r\n                            >\r\n                                <Icon type=\"uf uf-2arrow-up\"></Icon>\r\n                            </Button>\r\n                        </Tooltip>}\r\n                        {downDisabled? <Button\r\n                            className=\"move-btn move-bottom\"\r\n                            disabled={downDisabled}\r\n                            onClick={() => this.handleMove('bottom')}\r\n                        >\r\n                            <Icon type=\"uf uf-2arrow-down\"></Icon>\r\n                        </Button> : <Tooltip\r\n                            placement=\"top\"\r\n                            overlay={this.state.json['container-transfer-down-bottom']}\r\n                            delayHide={1}\r\n                            delayShow={1000}\r\n                        >\r\n                            <Button\r\n                                className=\"move-btn move-bottom\"\r\n                                disabled={downDisabled}\r\n                                onClick={() => this.handleMove('bottom')}\r\n                            >\r\n                                <Icon type=\"uf uf-2arrow-down\"></Icon>\r\n                            </Button>\r\n                        </Tooltip>}\r\n                    </div>\r\n                )}\r\n                {this.props.children}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nTreeToListTransfer.propTypes = {\r\n    style: PropTypes.object,\r\n    showSearch: PropTypes.bool,\r\n    showListSearch: PropTypes.bool, // 右侧列表搜索框\r\n    showMoveBtn: PropTypes.bool,\r\n    checkable: PropTypes.bool,\r\n    // titles: PropTypes.array,\r\n    treeLoading: PropTypes.bool,\r\n    className: PropTypes.string,\r\n    rowKey: PropTypes.string,\r\n    rowTitle: PropTypes.string,\r\n    rowChildren: PropTypes.string,\r\n    // searchPlaceholder: PropTypes.string,\r\n    // notFoundContent: PropTypes.string,\r\n    operations: PropTypes.array,\r\n    dataSource: PropTypes.array,\r\n    targetKeys: PropTypes.array,\r\n    listRender: PropTypes.func,\r\n    onTargetKeysChange: PropTypes.func,\r\n    onLoadData: PropTypes.func,\r\n    onTreeSearch: PropTypes.func,\r\n    disable: PropTypes.bool,\r\n};\r\nTreeToListTransfer.defaultProps = {\r\n    // 显示tree search\r\n    showSearch: true,\r\n    showListSearch: false,\r\n    showMoveBtn: false,\r\n    checkable: true,\r\n    disable: false,\r\n    // titles: [ '来源', '目标' ],\r\n    operations: ['', ''],\r\n    rowKey: 'key',\r\n    rowTitle: 'title',\r\n    rowChildren: 'children',\r\n    dataSource: [],\r\n    targetKeys: [],\r\n    treeLoading: false,\r\n    // searchPlaceholder: '提示词', // 搜索框的提示文字\r\n    // notFoundContent: '暂无数据', // 列表为空时显示的内容\r\n    listRender: ({ title }) => title, // 列表渲染的字段内容\r\n};\r\n","export const hasUnLoadNode = (node) => {\r\n\tlet status = false;\r\n\tconst loop = (data) =>\r\n\t\tdata.forEach((item) => {\r\n\t\t\tif (item.props.children && !status) {\r\n\t\t\t\tif (item.props.children.length === 0) {\r\n\t\t\t\t\tstatus = true;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tloop(item.props.children);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\tloop(node);\r\n\treturn status;\r\n};\r\n\r\n// ary数组中没有ele这个元素有则增加，有则删除，要求 ele 为基本数据类型\r\nexport const toggle = (ary, ele) => {\r\n\tif (typeof ele === 'object') {\r\n\t\tconsole.error('参数错误,要求传入的元素是基本数据类型');\r\n\t\treturn;\r\n\t}\r\n\tary = JSON.parse(JSON.stringify(ary));\r\n\tlet index = ary.indexOf(ele);\r\n\tif (index == -1) {\r\n\t\tary.push(ele);\r\n\t} else {\r\n\t\tary.splice(index, 1);\r\n\t}\r\n\treturn ary;\r\n};\r\n","/*\r\n * @Author: hufei \r\n * @PageInfo: 两种穿梭框合并后的外壳\r\n * @Date: 2018-04-13 15:38:49 \r\n * @Last Modified by: hufei\r\n * @Last Modified time: 2018-06-07 17:11:46\r\n */\r\nimport React, { Component } from 'react';\r\nimport ListToListTransfer from './ListToListTransfer';\r\nimport TreeToListTransfer from './TreeToListTransfer';\r\nexport default class Transfer extends Component {\r\n\trender() {\r\n\t\tlet { treeType, ...others } = this.props;\r\n\t\treturn treeType ? <TreeToListTransfer {...others} /> : <ListToListTransfer {...others} />;\r\n\t}\r\n}\r\n","//import intl from 'react-intl-universal';\r\nimport axios from 'axios';\r\nimport { getLangCode, isObj }  from '@platform/api';\r\nlet localeLang = getLangCode() || 'simpchn';\r\n\r\nexport function init(moduleId, callback, domainName) {\r\n    let domainPath = domainName ? `../../../../${domainName}/public/lang/` : '../../../public/lang/';\r\n    let _dir = NODE_ENV == 'development' ? '../src/platform/public/lang/' : domainPath;\r\n\r\n    if (moduleId) {\r\n        // axios.get(`${_dir}customer/${localeLang}/${moduleId}.json`)\r\n        axios.get(`${_dir}standard/${localeLang}/${moduleId}.json`)\r\n            .then(res => {\r\n                if (res) {\r\n                    setRes.call(this, moduleId, res.data, callback);\r\n                }\r\n            }).catch((error) => {\r\n                //  加载industry\r\n                axios\r\n                    .get(`${_dir}industry/${localeLang}/${moduleId}.json`)\r\n                    .then(res => {\r\n                        if (res) {\r\n                            setRes.call(this, moduleId, res.data, callback);\r\n                        }\r\n                    }).catch((error) => {\r\n                        //  加载standard\r\n                        // axios.get(`${_dir}standard/${localeLang}/${moduleId}.json`)\r\n                        axios.get(`${_dir}customer/${localeLang}/${moduleId}.json`)\r\n                            .then(res => {\r\n                                // console.log(moduleId, '------')\r\n                                if (res) {\r\n                                    setRes.call(this, moduleId, res.data, callback);\r\n                                }\r\n                            }).catch((res) => {\r\n                                callback && callback(res.data, false, {})\r\n                            })\r\n\r\n                    })\r\n\r\n            })\r\n    }\r\n}\r\n\r\nfunction setRes(moduleId, data, callback){\r\n    if (this.state.intl) {\r\n        this.state.intl = {};\r\n    }\r\n    if(!this.state.intl[moduleId]) this.state.intl[moduleId]={}\r\n    this.state.intl[moduleId][localeLang] = data\r\n\r\n    this.setState({ intl: this.state.intl }, () => {\r\n        callback && callback(data, true, {})\r\n    })\r\n}\r\n\r\n// 获取多语插件 \r\nexport function getIntl(moduleId) {\r\n    if (!moduleId){\r\n\t\treturn;\r\n\t}\r\n    return {\r\n        get:(code, valMap)=>{\r\n            if(this.state.intl[moduleId] && this.state.intl[moduleId][localeLang]){\r\n                let langJson = this.state.intl[moduleId][localeLang][code];\r\n                if(isObj(valMap)){\r\n                    for(let pop in valMap){\r\n                        if(langJson.includes(`{${pop}}`)){\r\n                            let reg = new RegExp('{\\\\s*'+ pop +'\\\\s*}','g');\r\n                            langJson = langJson.replace(reg, valMap[pop]);\r\n                        }\r\n                    }\r\n                }\r\n                return langJson;\r\n            }  \r\n        } \r\n    } \r\n    \r\n}\r\n\r\n","/**\r\n * zhanghengh\r\n * 18/5/31\r\n * 公式编辑器的搜索树部分，用的包装后的钉耙Tree和Input，如有问题，可以参考钉耙的搜索树的例子\r\n * 后端是汪建伟\r\n */\r\nimport React, { Component } from \"react\";\r\nimport { Tree, Input } from \"@platform/base\";\r\nconst { TreeNode } = Tree;\r\nimport { ajax, toast, isObj, isString, getMultiLang } from \"@platform/api\";\r\nrequire(\"./metaattr.less\");\r\n\r\nconst dataList = []; //自己得到的key和title的数组   这里以后有时间优化一下，这个dataList\r\nconst pathList = []; //已经加载过得节点路径，记录下来，再次展开就不再发请求\r\n\r\nexport default class MetaAttr extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            expandedKeys: [], //指定展开的节点\r\n            treeData: [], //树数据\r\n            isAsync: false,\r\n            searchValue: \"\", //输入input 的值\r\n            autoExpandParent: true, //是否自定展开父节点\r\n            json: {}, //多语\r\n        };\r\n    }\r\n    /**\r\n     * 得需要打开的TreeNode的key得需要打开的TreeNode的key\r\n     * @param {*} key\r\n     * @param {*} tree\r\n     */\r\n    getParentKey = (key, tree) => {\r\n        let parentKey;\r\n\r\n        for (let i = 0; i < tree.length; i++) {\r\n            const node = tree[i];\r\n            if (node.children) {\r\n                if (node.children.some(item => item.inputSig === key)) {\r\n                    parentKey = node.inputSig;\r\n                } else if (this.getParentKey(key, node.children)) {\r\n                    parentKey = this.getParentKey(key, node.children);\r\n                }\r\n            }\r\n        }\r\n        return parentKey;\r\n    };\r\n    /**\r\n     * zhanghengh 18/5/31\r\n     * 得到数据数据的{inputSig, displayName}数组的函数\r\n     */\r\n\r\n    generateList = data => {\r\n        const { isAsync } = this.state;\r\n        for (let i = 0; i < data.length; i++) {\r\n            const node = data[i];\r\n            let { inputSig, displayName, refcode, refname } = node;\r\n            if (isAsync) {\r\n                displayName = refname + ' ' + refcode;\r\n                inputSig = refcode;\r\n            }\r\n            dataList.push({\r\n                displayName,\r\n                inputSig,\r\n            });\r\n            if (node.children) {\r\n                this.generateList(node.children);\r\n            }\r\n        }\r\n    };\r\n\r\n    componentWillMount() {\r\n        const { metaParam, metaUrl } = this.props;\r\n        // 初始化调用getMultiLang方法获取多语\r\n        let callback = (json, bool, LangData) => {\r\n            this.setState({ json, LangData }, () => {\r\n                ajax({\r\n                    url: isString(metaUrl)\r\n                        ? metaUrl\r\n                        : '/nccloud/formula/web/formulaentitytree.do',\r\n                    loading: false,\r\n                    data: isObj(metaParam) ? metaParam : {},\r\n                    success: res => {\r\n                        if (metaUrl && metaUrl === '/nccloud/riart/print/mdtree.do') {\r\n                            let treeData = res.data.rows || [];\r\n                            this.setState({ treeData, isAsync: true });\r\n                            this.generateList(treeData);\r\n                        } else {\r\n                            this.setState({ treeData: [res.data], isAsync: false });\r\n                            this.generateList([res.data]);\r\n                        }\r\n\r\n                    },\r\n                    error: () => {\r\n                        toast({\r\n                            color: 'danger',\r\n                            content: `${this.state.json['formula0010']}`,\r\n                        });\r\n                    },\r\n                });\r\n\r\n            });\r\n        };\r\n        getMultiLang({ moduleId: 'container_formulaEditor', callback }); // moduleId为所需加载json文件夹名称前缀\r\n    }\r\n\r\n    /**\r\n     * zhanghengh 18/5/31\r\n     * 当打开或关闭树节点触发的方法\r\n     */\r\n    handleExpand = expandedKeys => {\r\n        this.setState({\r\n            expandedKeys,\r\n            autoExpandParent: false,\r\n        });\r\n    };\r\n    /**\r\n     * @value 搜索的值\r\n     * zhanghengh 18/5/31\r\n     * input onchange 回调\r\n     */\r\n    handleInput = value => {\r\n        const _this = this;\r\n        const { treeData, isAsync } = this.state;\r\n        const expandedKeys = [];\r\n        dataList.forEach(item => {\r\n            const { displayName, inputSig } = item;\r\n            if (value && displayName.indexOf(value) > -1) {\r\n                if (isAsync) {\r\n                    expandedKeys.push(inputSig);\r\n                } else {\r\n                    expandedKeys.push(_this.getParentKey(inputSig, treeData));\r\n                }\r\n\r\n            }\r\n        });\r\n        const uniqueExpandedKeys = [];\r\n        expandedKeys.forEach(item => {\r\n            if (item && uniqueExpandedKeys.indexOf(item) === -1) {\r\n                uniqueExpandedKeys.push(item);\r\n            }\r\n        });\r\n        this.setState({\r\n            expandedKeys: uniqueExpandedKeys,\r\n            searchValue: value,\r\n            autoExpandParent: true,\r\n        });\r\n    };\r\n    /**\r\n     * zhanghengh 18/5/31\r\n     * 选择树节点时候的回调\r\n     */\r\n    handleDoubleClick = value => {\r\n        // 添加判断让树的根节点不可以双击赋值 罗敏让加的，说的和nc保持一致\r\n        if (!value.includes('$$formulaTreeRootFlag$$')) {\r\n            this.props.setName(value);\r\n        }\r\n    };\r\n    /**\r\n     * zhanghengh 18/5/31\r\n     * 选择树节点时候的回调\r\n     */\r\n    handleSelect = (value, event) => {\r\n        this.props.setExplain(event.node.props.explain);\r\n    };\r\n\r\n    //加载异步树数据\r\n    loadData = node => {\r\n        const { metaParam, metaUrl } = this.props;\r\n        const { queryCondition = {} } = metaParam;\r\n        const { props = {} } = node;\r\n        const { pos } = props;\r\n        return new Promise(resolve => {\r\n            if (pathList.includes(pos)) {\r\n                resolve();\r\n                return;\r\n            }\r\n            ajax({\r\n                url: metaUrl,\r\n                loading: false,\r\n                data: {\r\n                    queryCondition: {\r\n                        mdclass: queryCondition.mdclass,\r\n                        pid: props.refpk,\r\n                    },\r\n                },\r\n                success: res => {\r\n                    let { treeData } = this.state;\r\n                    let path = pos.split('-');\r\n                    pathList.push(pos);\r\n\r\n                    let set = (data, path) => {\r\n                        path.shift();\r\n                        if (path.length) {\r\n                            if (!data[path[0]].children) {\r\n                                data[path[0]].children = res.data.rows;\r\n                            } else {\r\n                                let children = data[path[0]].children;\r\n                                set(children, path);\r\n                            }\r\n                        }\r\n                    }\r\n                    set(treeData, path);\r\n\r\n                    this.setState(treeData);\r\n                    this.generateList(treeData);\r\n                    resolve();\r\n                },\r\n                error: () => {\r\n                    toast({\r\n                        color: 'danger',\r\n                        content: `${this.state.json['formula0010']}`,\r\n                    });\r\n                    resolve();\r\n                },\r\n            });\r\n        });\r\n    }\r\n\r\n    createAsyncTree = () => {\r\n        const {\r\n            searchValue,\r\n            expandedKeys,\r\n            autoExpandParent,\r\n            treeData,\r\n        } = this.state;\r\n        // 只给根节点设置一次标记的标志\r\n        // let callNumFlag = true;\r\n        // 需要给根节点加的标记\r\n        // let rootFlag = '';\r\n        const loop = data => data.map(item => {\r\n            const { refcode, refname, refpk, children, isleaf } = item;\r\n            let displayName = refname + ' ' + refcode;\r\n            const index = displayName.search(searchValue);\r\n            const beforeStr = displayName.substr(0, index);\r\n            const afterStr = displayName.substr(index + searchValue.length);\r\n            const title =\r\n                index > -1 ? (\r\n                    <span>\r\n                        {beforeStr}\r\n                        <span className=\"u-tree-searchable-filter\">\r\n                            {searchValue}\r\n                        </span>\r\n                        {afterStr}\r\n                    </span>\r\n                ) : (\r\n                        <span>{displayName}</span>\r\n                    );\r\n\r\n            // if (!isleaf) {\r\n            //     // 只对根节点设置一次，其他下级节点不生效\r\n            //     // 添加判断让树的根节点不可以双击赋值 罗敏让加的，说的和nc保持一致\r\n            //     rootFlag = '$$formulaTreeRootFlag$$';\r\n            //     // callNumFlag = false;\r\n            // } else {\r\n            //     rootFlag = '';\r\n            // }\r\n            if (Array.isArray(children) && children[0]) {\r\n                return (\r\n                    <TreeNode\r\n                        key={refcode}\r\n                        title={title}\r\n                        explain={refname}\r\n                        isLeaf={isleaf}\r\n                        refpk={refpk}\r\n                    >\r\n                        {loop(children)}\r\n                    </TreeNode>\r\n                );\r\n            }\r\n            return (\r\n                <TreeNode key={refcode} title={title} explain={refname} isLeaf={isleaf} refpk={refpk} />\r\n            );\r\n        });\r\n        return (\r\n            <Tree\r\n                onDoubleClick={this.handleDoubleClick}\r\n                onSelect={this.handleSelect}\r\n                onExpand={this.handleExpand}\r\n                expandedKeys={expandedKeys}\r\n                autoExpandParent={autoExpandParent}\r\n                loadData={this.loadData}\r\n            >\r\n                {loop(treeData, [])}\r\n            </Tree>\r\n        );\r\n    }\r\n\r\n    createSyncTree = () => {\r\n        const {\r\n            searchValue,\r\n            expandedKeys,\r\n            autoExpandParent,\r\n            treeData,\r\n        } = this.state;\r\n        // 只给根节点设置一次标记的标志\r\n        let callNumFlag = true;\r\n        // 需要给根节点加的标记\r\n        let rootFlag = '';\r\n\r\n        const loop = data => data.map((item, dataIndex) => {\r\n            const { displayName, inputSig, children, hintMsg } = item;\r\n            const index = displayName.search(searchValue);\r\n            const beforeStr = displayName.substr(0, index);\r\n            const afterStr = displayName.substr(index + searchValue.length);\r\n            const title =\r\n                index > -1 ? (\r\n                    <span>\r\n                        {beforeStr}\r\n                        <span className=\"u-tree-searchable-filter\">\r\n                            {searchValue}\r\n                        </span>\r\n                        {afterStr}\r\n                    </span>\r\n                ) : (\r\n                        <span>{displayName}</span>\r\n                    );\r\n\r\n            if (callNumFlag && dataIndex === 0) {\r\n                // 只对根节点设置一次，其他下级节点不生效\r\n                // 添加判断让树的根节点不可以双击赋值 罗敏让加的，说的和nc保持一致\r\n                rootFlag = '$$formulaTreeRootFlag$$';\r\n                callNumFlag = false;\r\n            } else {\r\n                rootFlag = '';\r\n            }\r\n\r\n            if (Array.isArray(children) && children[0]) {\r\n                return (\r\n                    <TreeNode\r\n                        key={inputSig + rootFlag}\r\n                        title={title}\r\n                        explain={hintMsg}\r\n                    >\r\n                        {loop(children)}\r\n                    </TreeNode>\r\n                );\r\n            }\r\n            return (\r\n                <TreeNode key={inputSig} title={title} explain={hintMsg} />\r\n            );\r\n        });\r\n        return (\r\n            <Tree\r\n                onDoubleClick={this.handleDoubleClick}\r\n                onSelect={this.handleSelect}\r\n                onExpand={this.handleExpand}\r\n                expandedKeys={expandedKeys}\r\n                autoExpandParent={autoExpandParent}\r\n            >\r\n                {loop(treeData)}\r\n            </Tree>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * zhanghengh 18/5/31 \r\n     * 创建全部区域的方法\r\n     */\r\n    _createAll = () => {\r\n        const { json, isAsync, searchValue } = this.state;\r\n\r\n        return (\r\n            <div className=\"search-tree-area formulaeditor-search-tree-area\">\r\n                <Input\r\n                    style={{ width: '100%' }}\r\n                    placeholder={json['formula0017']}\r\n                    value={searchValue}\r\n                    onChange={this.handleInput}\r\n                />\r\n                <div className=\"tree-content\">\r\n                    {isAsync ? this.createAsyncTree() : this.createSyncTree()}\r\n                </div>\r\n            </div>\r\n        );\r\n    };\r\n    render() {\r\n        return <div>{this._createAll()}</div>;\r\n    }\r\n}\r\n","/**\r\n * zhanghengh\r\n * 18/5/31\r\n * 公式编辑器的表和数据部分，用的包装后的钉耙的组件，如有问题，可以参考钉耙的的例子\r\n * 后端是汪建伟\r\n */\r\nimport React, { Component } from 'react';\r\nimport {\r\n    Button,\r\n    Row,\r\n    Col,\r\n    Checkbox,\r\n    Input,\r\n} from '@platform/base';\r\nimport { ajax, toast, isString, getMultiLang } from '@platform/api';\r\n\r\nrequire('./surface.less');\r\n\r\nexport default class Surface extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            checked: false, //控制checkbox的状态\r\n            surfaceData: [], //表的数据\r\n            fieldData: [], //字段的数据\r\n            inputValue: '', // input 的值\r\n            json: {},\r\n        };\r\n    }\r\n\r\n    componentWillMount() {\r\n        const { surfaceUrl } = this.props;\r\n        // 初始化调用getPlatformLang方法获取多语\r\n        let callback = (json, bool, LangData) => {\r\n            this.setState({ json, LangData });\r\n        };\r\n        getMultiLang({ moduleId: 'container_formulaEditor', callback }); // moduleId为所需加载json文件夹名称前缀\r\n        ajax({\r\n            //初始加载数据\r\n            url: isString(surfaceUrl) ? surfaceUrl : '/nccloud/formula/web/formulatab.do',\r\n            loading: false,\r\n            success: res => {\r\n                this.setState({\r\n                    surfaceData: res.data, //当前数据\r\n                    cacheData: res.data, //初始数据\r\n                });\r\n            },\r\n            error: e => {\r\n                toast({ color: 'danger', content: e.message });\r\n            },\r\n        });\r\n    }\r\n\r\n    // componentWillReceiveProps(nextProps) {  //暂时注释不要删除，可能会有用\r\n    //   const { surfaceUrl } = nextProps;  //最新的props\r\n    //   const { surfaceUrl: oldSurfaceUrl } = this.props;  //上一次的props\r\n    //   if(surfaceUrl !== oldSurfaceUrl) {  //当传入的路径变化时才重新请求，做到优化作用\r\n    //     ajax({\r\n    //       url: isString(surfaceUrl) ? surfaceUrl : '/nccloud/formula/web/formulatab.do',\r\n    //       loading: false,\r\n    //       success: (res) => {\r\n    //         this.setState({\r\n    //           surfaceData: res.data,//当前数据\r\n    //           cacheData: res.data//初始数据\r\n    //         });\r\n    //       },\r\n    //       error: (e) => {\r\n    //         toast({ color: 'danger', content: e.message });\r\n    //       }\r\n    //     });\r\n    //   }\r\n    // }\r\n  /**\r\n   * zhanghengh\r\n   * 18/5/30\r\n   * 点击刷新回调\r\n   */\r\n  handleRefresh = () => {\r\n      const { cacheData } = this.state;\r\n      if (cacheData) {\r\n          this.setState(\r\n              {\r\n                  surfaceData: cacheData,\r\n                  inputValue: '',\r\n              },\r\n              () => {\r\n                  this._getFieldData(cacheData[0].displayName);\r\n              },\r\n          );\r\n      }\r\n  };\r\n\r\n  /**\r\n   * zhanghengh\r\n   * 18/5/30\r\n   * checkbox变化回调\r\n   */\r\n  handleCheckbox = () => {\r\n      this.setState({ checked: !this.state.checked });\r\n  };\r\n\r\n  /**\r\n   * zhanghengh\r\n   * 18/5/30\r\n   * input变化回调\r\n   */\r\n  handleInput = value => {\r\n      const { cacheData } = this.state;\r\n      if (cacheData) {\r\n          const newData = cacheData.filter(eve => {\r\n              if (eve.displayName.includes(value)) {\r\n                  return true;\r\n              }\r\n          });\r\n          this.setState(\r\n              {\r\n                  surfaceData: newData,\r\n                  inputValue: value,\r\n              },\r\n              () => {\r\n                  if (newData.length > 0) {\r\n                      this._getFieldData(newData[0].displayName);\r\n                  } else {\r\n                      this.setState({ fieldData: [] });\r\n                  }\r\n              },\r\n          );\r\n      }\r\n  };\r\n\r\n  /**\r\n   * zhanghengh\r\n   * 18/5/30\r\n   * 创建列表内容\r\n   */\r\n  _createContent(data) {\r\n      return data.map((eve, index) => {\r\n          const { displayName, inputSig, hintMsg } = eve;\r\n          return (\r\n              <li key={index} data-name={inputSig} data-explain={hintMsg} data-title={displayName} onDoubleClick={this.handleDbList}>\r\n                  {displayName}\r\n              </li>\r\n          );\r\n      });\r\n  }\r\n\r\n  /**\r\n   * 获取字段的数据\r\n   * zhanghengh\r\n   */\r\n  _getFieldData = title => {\r\n      let json = this.state.json;\r\n      ajax({\r\n          url: '/nccloud/formula/web/formulatabfield.do',\r\n          loading: false,\r\n          data: { tablename: title },\r\n          success: res => {\r\n              this.setState({ fieldData: res.data });\r\n          },\r\n          error: () => {\r\n              toast({ color: 'danger', content: `${json['formula0011']}` });\r\n          },\r\n      });\r\n  };\r\n\r\n  /**\r\n   * zhanghengh\r\n   * 18/5/30\r\n   * 单击表格列表的回调\r\n   */\r\n  handleSurfaceList = e => {\r\n      const { surfaceData } = this.state;\r\n      const { setExplain } = this.props;\r\n      const { explain, title } = e.target.dataset;\r\n      if (surfaceData.length && title) {\r\n          setExplain(explain);\r\n          this._getFieldData(title);\r\n      }\r\n  };\r\n\r\n  /**\r\n   * zhanghengh\r\n   * 18/5/30\r\n   * 单击字段列表的回调\r\n   */\r\n  handleFieldList = e => {\r\n      this.props.setExplain(e.target.dataset.explain);\r\n  };\r\n\r\n  /**\r\n   * zhanghengh\r\n   * 18/5/30\r\n   * 双击列表的回调\r\n   */\r\n  handleDbList = e => {\r\n      const { surfaceData } = this.state;\r\n      if (surfaceData.length) {\r\n          const { name } = e.target.dataset;\r\n          this.props.setName(name);\r\n      }\r\n  };\r\n\r\n  /**\r\n   * zhanghengh\r\n   * 18/5/30\r\n   * 创建内容\r\n   */\r\n  _createAll = () => {\r\n      const { checked, surfaceData, fieldData, inputValue, json } = this.state;\r\n      return (\r\n          <Row>\r\n              <Col md={6} xs={6} sm={6}>\r\n                  <div>\r\n                      <div className=\"surface-left-title\">{json['formula0018']}</div>\r\n                      <ul className=\"surface-left\" onClick={this.handleSurfaceList}>\r\n                          {this._createContent(surfaceData)}\r\n                      </ul>\r\n                      <div className=\"input-area\">\r\n                          <Checkbox className=\"checkbox\" colors=\"info\" checked={checked} onChange={this.handleCheckbox}>\r\n                              {json['formula001']}\r\n                          </Checkbox>\r\n                          <Input\r\n                              value={inputValue}\r\n                              disabled={!checked}\r\n                              style={{\r\n                                  width: '100%',\r\n                                  display: 'block',\r\n                              }}\r\n                              placeholder=\"Search\"\r\n                              onChange={this.handleInput}\r\n                          />\r\n                      </div>\r\n                      <Button\r\n                          disabled={!checked}\r\n                          style={{\r\n                              width: '100%',\r\n                              margin: 0,\r\n                              display: 'block',\r\n                              background: '#1e88e5',\r\n                          }}\r\n                          onClick={this.handleRefresh}\r\n                      >\r\n                          {json['formula002']}\r\n                      </Button>\r\n                  </div>\r\n              </Col>\r\n              <Col md={6} xs={6} sm={6}>\r\n                  <div className=\"surface-right-title\">{json['formula0019']}</div>\r\n                  <ul className=\"surface-right\" onClick={this.handleFieldList}>\r\n                      {this._createContent(fieldData)}\r\n                  </ul>\r\n              </Col>\r\n          </Row>\r\n      );\r\n  };\r\n\r\n  render() {\r\n      return <div className=\"surface-area\">{this._createAll()}</div>;\r\n  }\r\n}\r\n","/**\r\n * 公式编辑器  zhanghengh\r\n * 2014/4\r\n * 主要用于资产、财务、供应链等\r\n *\r\n */\r\nimport React, { Component } from 'react';\r\nimport { findDOMNode } from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport MetaAttr from './components/metaattr';\r\nimport Surface from './components/surface';\r\nimport {\r\n    Button,\r\n    Row,\r\n    Col,\r\n    Tabs,\r\n    TextArea,\r\n    Modal,\r\n} from '@platform/base';\r\nimport { isFunction, isString, ajax, toast, getMultiLang } from '@platform/api';\r\n\r\nconst { TabPane } = Tabs;\r\nconst { Header, Title, Body } = Modal;\r\n\r\nrequire('./index.less');\r\n\r\nexport default class FormulaEditor extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        // textarea 中的文本是否被全选\r\n        this.selected = false;\r\n        this.state = {\r\n            formulaData: [], //公式的数据\r\n            showData: '', //展示出来的数据,\r\n            isShow: false, //控制model展示隐藏\r\n            explainData: '', //解释数据\r\n            optBtnsConfig: [\r\n                //选项按钮配置\r\n                { name: 7 },\r\n                { name: 8 },\r\n                { name: 9 },\r\n                { name: 0 },\r\n                { name: 4 },\r\n                { name: 5 },\r\n                { name: 6 },\r\n                { name: '.' },\r\n                { name: 1 },\r\n                { name: 2 },\r\n                { name: 3 },\r\n                { name: '00' },\r\n            ],\r\n            computedBtnconfig: [\r\n                { name: '+' },\r\n                { name: '-' },\r\n                { name: '*' },\r\n                { name: '/' },\r\n                { name: '->' },\r\n                { name: '==' },\r\n                { name: '(' },\r\n                { name: ')' },\r\n                { name: '<' },\r\n                { name: '>' },\r\n                { name: '<=' },\r\n                { name: '>=' },\r\n            ],\r\n            json: {},\r\n        };\r\n    }\r\n\r\n    async componentWillMount() {\r\n        // 初始化调用getPlatformLang方法获取多语\r\n        let callback = (json, bool, LangData) => {\r\n            this.setState({ json, LangData });\r\n        };\r\n        await getMultiLang({ moduleId: 'container_formulaEditor', callback }); // moduleId为所需加载json文件夹名称前缀\r\n        const { value = '', show = false, noShowFormula, formulaUrl } = this.props;\r\n        let { json } = this.state;\r\n        this.setShow(show); // 设置modal展示和隐藏\r\n        this.handleTextAreaChange(value); // 设置编辑器初始值\r\n        (Array.isArray(noShowFormula) && noShowFormula.length === 1 && noShowFormula[0] === 'all') ||\r\n            ajax({\r\n                url: isString(formulaUrl) ? formulaUrl : '/nccloud/formula/web/formulatype.do',\r\n                loading: false,\r\n                success: res => {\r\n                    this.setState({ formulaData: res.data });\r\n                },\r\n                error: () => {\r\n                    toast({ color: 'danger', content: `${json['formula0012']}` });\r\n                },\r\n            });\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        const { value = '', show = false, noShowFormula, formulaUrl } = nextProps; //最新的props\r\n        const { formulaUrl: oldFormulaUrl } = this.props; //上一次的props\r\n        let { json } = this.state;\r\n        this.handleTextAreaChange(value); // 设置编辑器初始值\r\n        // textarea 中的文本全选状态变成false\r\n        this.selected && (this.selected = false);\r\n        this.setShow(show); // 设置modal展示和隐藏\r\n        if (formulaUrl !== oldFormulaUrl) {\r\n            ////当传入的路径变化时才重新请求，做到优化作用\r\n            (Array.isArray(noShowFormula) && noShowFormula.length === 1 && noShowFormula[0] === 'all') ||\r\n                ajax({\r\n                    url: isString(formulaUrl) ? formulaUrl : '/nccloud/formula/web/formulatype.do',\r\n                    loading: false,\r\n                    success: res => {\r\n                        this.setState({ formulaData: res.data });\r\n                    },\r\n                    error: () => {\r\n                        toast({ color: 'danger', content: `${json['formula0012']}` });\r\n                    },\r\n                });\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        //打开默认就获取焦点\r\n        const { isShow: prevIsShow } = prevState;\r\n        const { isShow } = this.state;\r\n        if (this.textArea && isShow !== prevIsShow) {\r\n            let textArea = this.textArea.querySelectorAll('textarea')[0];\r\n            if (textArea) {\r\n                this.setCursorPosition(textArea, textArea.value.length); // 兼容其他火狐浏览器,火狐浏览器默认光标在第一位，而chrome默认在最后一位\r\n            }\r\n        }\r\n    }\r\n\r\n    getControlBtnsConfig = () => {\r\n        let { json } = this.state;\r\n        return [\r\n            //操作按钮配置\r\n            { key: 'ok', name: json['formula003'], onClick: this.handleOk },\r\n            { key: 'cancel', name: json['formula004'], onClick: this.handleCancel },\r\n            {\r\n                key: 'validate',\r\n                name: json['formula005'],\r\n                onClick: this.handleValidate,\r\n            },\r\n            {\r\n                key: 'checkAll',\r\n                name: json['formula006'],\r\n                onClick: this.handleCheckAll,\r\n            },\r\n            { key: 'clear', name: json['formula007'], onClick: this.handleClear },\r\n        ];\r\n    };\r\n\r\n    /**\r\n     * 事件回调区域\r\n     * ================================================\r\n     */\r\n    /**add by zhanghengh\r\n     * TextArea change callback\r\n     * value 文本域内容\r\n     * e 事件对象\r\n     */\r\n    handleTextAreaChange = value => {\r\n        this.setState({ showData: value });\r\n    };\r\n\r\n    /**add by zhanghengh\r\n     * 向文本域设置选中值的方法\r\n     * e | 事件对象\r\n     */\r\n    handelSetName = e => {\r\n        const { name } = e.target.dataset;\r\n        this.handlePushStr(name);\r\n    };\r\n\r\n    /**add by zhanghengh\r\n     * 点击tabitem的回调\r\n     * e | 事件对象\r\n     */\r\n    handleClickTabItem = e => {\r\n        const { explain } = e.target.dataset;\r\n        this.setExplain(explain);\r\n    };\r\n\r\n    /**add by zhanghengh\r\n     * 点击清除按钮回调\r\n     */\r\n    handleClear = () => {\r\n        this.setState({ showData: '' });\r\n        this.textArea.querySelectorAll('textarea')[0].focus();\r\n    };\r\n\r\n    /**add by zhanghengh\r\n     * 点击全选回调\r\n     */\r\n    handleCheckAll = () => {\r\n        // 全选的时候将状态设置成true\r\n        this.selected = true;\r\n        this.textArea.querySelectorAll('textarea')[0].select(); //实现全选\r\n    };\r\n\r\n    /**add by zhanghengh\r\n     * 点击验证回调\r\n     */\r\n    handleValidate = () => {\r\n        const { showData, json } = this.state;\r\n        const { validateUrl, validateData = {} } = this.props;\r\n        ajax({\r\n            url: isString(validateUrl) ? validateUrl : '/nccloud/formula/web/formulaverfify.do',\r\n            loading: false,\r\n            data: { formulastr: showData, ...validateData },\r\n            success: res => {\r\n                if (res.data.status === 'Y') {\r\n                    toast({ color: 'success', content: `${json['formula0013']}` });\r\n                } else if (res.data.status === 'N') {\r\n                    toast({\r\n                        color: 'danger',\r\n                        content: res.data.error ? res.data.error : `${json['formula0014']}`,\r\n                    });\r\n                }\r\n            },\r\n            error: () => {\r\n                toast({ color: 'danger', content: `${json['formula0015']}` });\r\n            },\r\n        });\r\n    };\r\n\r\n    /**add by zhanghengh\r\n     * 点击取消回调\r\n     */\r\n    handleCancel = () => {\r\n        const { onCancel } = this.props;\r\n        if (onCancel && isFunction(onCancel)) {\r\n            onCancel();\r\n        }\r\n    };\r\n\r\n    /**add by zhanghengh\r\n     * 设置公式编辑器的显示和隐藏\r\n     */\r\n    setShow = value => {\r\n        this.setState({ isShow: value });\r\n    };\r\n\r\n    /**\r\n     * zhanghengh\r\n     *设置需要展示的解释字段方法\r\n     */\r\n    setExplain = data => {\r\n        this.setState({ explainData: data });\r\n    };\r\n\r\n    /**add by zhanghengh\r\n     * 点击确认回调\r\n     */\r\n    handleOk = () => {\r\n        const { showData, json } = this.state;\r\n        const { onOk, isValidateOnOK = true, validateUrl, validateData = {} } = this.props;\r\n        if (isValidateOnOK) {\r\n            //判断确定的时候是否需要校验\r\n            ajax({\r\n                url: isString(validateUrl) ? validateUrl : '/nccloud/formula/web/formulaverfify.do',\r\n                loading: false,\r\n                data: { formulastr: showData, ...validateData },\r\n                success: res => {\r\n                    if (res.data.status === 'Y') {\r\n                        if (onOk && isFunction(onOk)) {\r\n                            onOk(showData);\r\n                        }\r\n                    } else if (res.data.status === 'N') {\r\n                        toast({\r\n                            color: 'danger',\r\n                            content: res.data.error ? res.data.error : `${json['formula0014']}`,\r\n                        });\r\n                    }\r\n                },\r\n                error: () => {\r\n                    toast({ color: 'danger', content: `${json['formula0015']}` });\r\n                },\r\n            });\r\n        } else {\r\n            if (onOk && isFunction(onOk)) {\r\n                onOk(showData);\r\n            }\r\n        }\r\n    };\r\n\r\n    /**add by zhanghengh\r\n     * 在光标位置插入文本，插入文本后光标位置不变\r\n     * @param {*} btnContent //按钮的内容\r\n     */\r\n    handlePushStr = btnContent => {\r\n        let textArea = this.textArea.querySelectorAll('textarea')[0];\r\n        if (this.selected) {\r\n            // 全选后,在选择的值,直接覆盖之前的值解决  CLOUD-166749 这个bug, 财务 杨龙,和测试周崚 让改\r\n            this.selected = false;\r\n            this.setState({ showData: btnContent }, () => {\r\n                this.setCursorPosition(textArea, btnContent.length);\r\n            });\r\n        } else {\r\n            let textAreaLen = textArea.value.length;\r\n            let textAreaValue = textArea.value;\r\n            let selectionStart = textArea.selectionStart;\r\n            let finalRange = (textAreaValue.substr(0, selectionStart) + btnContent).length;\r\n            let finalValue =\r\n                textAreaValue.substr(0, selectionStart) + btnContent + textAreaValue.substring(selectionStart, textAreaLen);\r\n            this.setState({ showData: finalValue }, () => {\r\n                this.setCursorPosition(textArea, finalRange);\r\n            });\r\n        }\r\n    };\r\n\r\n    /**\r\n     * 设置输入域(input/textarea)光标的位置\r\n     */\r\n    setCursorPosition = (elem, index) => {\r\n        var val = elem.value;\r\n        var len = val.length;\r\n        // 超过文本长度直接返回\r\n        if (len < index) return;\r\n        setTimeout(function () {\r\n            elem.focus();\r\n            if (elem.setSelectionRange) {\r\n                // 标准浏览器\r\n                elem.setSelectionRange(index, index);\r\n            } else {\r\n                // IE9- 这个里面有问题在看\r\n                var range = elem.createTextRange();\r\n                range.moveStart('character', -len);\r\n                range.moveEnd('character', -len);\r\n                range.moveStart('character', index);\r\n                range.moveEnd('character', 0);\r\n                range.select();\r\n            }\r\n        }, 10);\r\n    };\r\n    //=======================================================\r\n\r\n    /**\r\n     * 创建内容的函数区域\r\n     * add by zhanghengh\r\n     * 创建操作区\r\n     */\r\n    _createWorkStation = () => {\r\n        let { showData, optBtnsConfig, computedBtnconfig } = this.state;\r\n        const { noControlBtns } = this.props;\r\n        if (Array.isArray(noControlBtns) && noControlBtns.length > 0) {\r\n            //进行操作按钮可配置判断\r\n            noControlBtns.forEach(eve => {\r\n                this.getControlBtnsConfig().filter(item => {\r\n                    const { key } = item;\r\n                    return key !== eve;\r\n                });\r\n            });\r\n        }\r\n        return (\r\n            <Row>\r\n                <Col md={8} xs={8} sm={8}>\r\n                    <div className=\"editor-submit-area\">\r\n                        <TextArea\r\n                            ref={dom => {\r\n                                this.textArea = findDOMNode(dom);\r\n                            }}\r\n                            selfRangControl={false}\r\n                            onBlur={() => {\r\n                                // 全选的时候让textarea里面的文本一直处于全选的状态\r\n                                this.selected && (this.textArea.querySelectorAll('textarea')[0].select());\r\n                            }}\r\n                            value={showData}\r\n                            className=\"editor-show-area\"\r\n                            onChange={this.handleTextAreaChange}\r\n                            onEnter={() => { }}//为了ctrl+enter换行\r\n                            fieldid=\"editor\"\r\n                        />\r\n                        <div className=\"editor-control-btns\">{this._createControlBtns(this.getControlBtnsConfig())}</div>\r\n                    </div>\r\n                </Col>\r\n                <Col md={4} xs={4} sm={4}>\r\n                    <div className=\"centerWrap\">\r\n                        <div className=\"editor-opt-btns\">{this._createOptBtns(optBtnsConfig)}</div>\r\n                        <div className=\"editor-comp-btns\">{this._createOptBtns(computedBtnconfig)}</div>\r\n                    </div>\r\n                </Col>\r\n            </Row>\r\n        );\r\n    };\r\n\r\n    /**\r\n     * add by zhanghengh\r\n     * 创建标签组\r\n     */\r\n    _createTabs = () => {\r\n        let {\r\n            formulaConfig = [],\r\n            attrConfig = [],\r\n            noShowFormula,\r\n            noShowAttr,\r\n            defaultFormulaKey,\r\n            tabActiveKey,\r\n            defaultAttrKey,\r\n            onTabChange,\r\n        } = this.props;\r\n        let { json } = this.state;\r\n        let defaultFormulaObj = isString(defaultFormulaKey) ? { defaultActiveKey: defaultFormulaKey } : {}; //  公式tab的默认展示tab\r\n        let defaultAttrObj = isString(defaultAttrKey) ? { defaultActiveKey: defaultAttrKey } : {}; //  属性tab的默认展示tab\r\n        let tabActiveKeyObj = isString(tabActiveKey) ? { activeKey: tabActiveKey } : {};\r\n        let { formulaData } = this.state;\r\n        let tabAttrConfig = [];\r\n        if (json['formula008']) {\r\n            tabAttrConfig = [\r\n                //右侧tabPane配置数据\r\n                {\r\n                    tab: `${json['formula008']}`,\r\n                    key: `${json['formula008']}`,\r\n                    TabPaneContent: MetaAttr,\r\n                },\r\n                {\r\n                    tab: `${json['formula009']}`,\r\n                    key: `${json['formula009']}`,\r\n                    TabPaneContent: Surface,\r\n                },\r\n            ];\r\n        }\r\n        let tabFormulaConfig = formulaData.map(eve => {\r\n            //左侧侧tabPane配置数据\r\n            return {\r\n                tab: eve.typeName,\r\n                key: eve.typeName,\r\n                TabPaneContent: this._createFormulaTabPane(eve.name2FormItemMap),\r\n            };\r\n        });\r\n        Array.isArray(attrConfig) && (tabAttrConfig = tabAttrConfig.concat(attrConfig)); //判断右侧tabs配置\r\n        if (Array.isArray(noShowAttr) && noShowAttr.length > 0) {\r\n            //对用户不需要tab属性的进行筛选\r\n            if (noShowAttr.length === 1 && noShowAttr[0] === 'all') {\r\n                //  隐藏所有tab页签\r\n                tabAttrConfig = [];\r\n            } else if (noShowAttr.length === 1 && noShowAttr[0] === 'allBuiltIn') {\r\n                tabAttrConfig = attrConfig;\r\n            } else {\r\n                tabAttrConfig = tabAttrConfig.filter(eve => {\r\n                    let isChange = true;\r\n                    noShowAttr.forEach(attr => {\r\n                        if (attr === eve.key || (eve.key && eve.key.includes(attr))) {\r\n                            // 这是实现有些问题，暂时兼容一下\r\n                            isChange = false;\r\n                        }\r\n                    });\r\n                    return isChange;\r\n                });\r\n            }\r\n        }\r\n\r\n        if (Array.isArray(noShowFormula) && noShowFormula.length > 0) {\r\n            //对用户不需要的tab公式进行筛选\r\n            if (noShowFormula.length === 1 && noShowFormula[0] === 'all') {\r\n                //  隐藏所有tab页签\r\n                tabFormulaConfig = [];\r\n                formulaConfig = [];\r\n            } else if (noShowFormula.length === 1 && noShowFormula[0] === 'allBuiltIn') {\r\n                //  隐藏所有内置tab页签\r\n                tabFormulaConfig = [];\r\n            } else {\r\n                tabFormulaConfig = tabFormulaConfig.filter(eve => {\r\n                    //内置的\r\n                    let isChange = true;\r\n                    noShowFormula.forEach(attr => {\r\n                        if (attr === eve.key) {\r\n                            isChange = false;\r\n                        }\r\n                    });\r\n                    return isChange;\r\n                });\r\n                formulaConfig = formulaConfig.filter(eve => {\r\n                    //用户传入的\r\n                    let isChange = true;\r\n                    noShowFormula.forEach(attr => {\r\n                        if (attr === eve.key) {\r\n                            isChange = false;\r\n                        }\r\n                    });\r\n                    return isChange;\r\n                });\r\n            }\r\n        }\r\n\r\n        const originalTabs = this._createFormulaTabPanes(tabFormulaConfig); //左侧初始Tabs\r\n        return (\r\n            <div className=\"detailInfoWrap\" style={{ height: this.state.footerHeight || 359, overflow: 'auto' }}>\r\n                <Row>\r\n                    <Col md={6} xs={6} sm={6}>\r\n                        <div className=\"tabs-left\">\r\n                            <Tabs\r\n                                tabBarStyle=\"primary\"\r\n                                {...defaultFormulaObj}\r\n                                onChange={key => {\r\n                                    isFunction(onTabChange) && onTabChange(key);\r\n                                }}\r\n                            >\r\n                                {this._createFormulaAllTabPanes(originalTabs, formulaConfig)}\r\n                            </Tabs>\r\n                        </div>\r\n                    </Col>\r\n                    <Col md={6} xs={6} sm={6}>\r\n                        <div className=\"tabs-right\">\r\n                            <Tabs\r\n                                tabBarStyle=\"primary\"\r\n                                {...defaultAttrObj}\r\n                                onChange={key => {\r\n                                    isFunction(onTabChange) && onTabChange(key);\r\n                                }}\r\n                                {...tabActiveKeyObj}\r\n                            >\r\n                                {this._createAttrTabPanes(tabAttrConfig)}\r\n                            </Tabs>\r\n                        </div>\r\n                    </Col>\r\n                </Row>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    /**\r\n     * add by zhanghengh\r\n     * 创建左侧每项TabPane\r\n     * 创建左侧TabPanes\r\n     * tabPaneConfig | Array TabPane配置\r\n     */\r\n    _createFormulaTabPane = TabPaneContent => {\r\n        return (\r\n            <ul className=\"tab-content\" onClick={this.handleClickTabItem} onDoubleClick={this.handelSetName}>\r\n                {this._createTabPaneContent(TabPaneContent)}\r\n            </ul>\r\n        );\r\n    };\r\n\r\n    /**\r\n     * add by zhanghengh\r\n     * 创建TabPanes\r\n     * tabPaneConfig | Array TabPane配置\r\n     */\r\n    _createFormulaTabPanes = tabPaneConfig => {\r\n        return tabPaneConfig.map(eve => {\r\n            const { TabPaneContent, tab, key } = eve;\r\n            return (\r\n                <TabPane tab={tab} style={{ overflow: 'auto', height: '283px' }} key={key}>\r\n                    {TabPaneContent}\r\n                </TabPane>\r\n            );\r\n        });\r\n    };\r\n\r\n    /**\r\n     * add by zhanghengh\r\n     * 创建全部的TabPanes\r\n     * tabPaneConfig | Array TabPane配置\r\n     */\r\n    _createFormulaAllTabPanes = (originalTabs, introTabConfig) => {\r\n        return originalTabs.concat(\r\n            introTabConfig.map(eve => {\r\n                const { TabPaneContent, tab, params = {}, key } = eve;\r\n                return (\r\n                    <TabPane tab={tab} style={{ overflow: 'auto', height: '283px' }} key={key}>\r\n                        <TabPaneContent setExplain={this.setExplain} setName={this.handlePushStr} {...params} />\r\n                    </TabPane>\r\n                );\r\n            }),\r\n        );\r\n    };\r\n\r\n    /**\r\n     * add by zhanghengh\r\n     * 创建右侧TabPanes\r\n     * tabPaneConfig | Array TabPane配置\r\n     */\r\n    _createAttrTabPanes = tabPaneConfig => {\r\n        const { metaParam, metaUrl, surfaceUrl } = this.props;\r\n        return tabPaneConfig.map(eve => {\r\n            const { TabPaneContent, tab, params = {}, key } = eve;\r\n            return (\r\n                <TabPane tab={tab} style={{ overflow: 'auto', height: '283px' }} key={key}>\r\n                    <TabPaneContent\r\n                        setExplain={this.setExplain}\r\n                        setName={this.handlePushStr}\r\n                        metaParam={metaParam}\r\n                        metaUrl={metaUrl}\r\n                        surfaceUrl={surfaceUrl}\r\n                        {...params}\r\n                    />\r\n                </TabPane>\r\n            );\r\n        });\r\n    };\r\n\r\n    /**\r\n     * add by zhanghengh\r\n     * 创建TabPaneContent\r\n     * TabPaneContent | Array TabPane配置\r\n     */\r\n    _createTabPaneContent = TabPaneContent => {\r\n        return TabPaneContent.map(eve => {\r\n            const { inputSig, displayName, hintMsg } = eve;\r\n            return (\r\n                <li className=\"tab-content-item\" data-name={inputSig} data-explain={hintMsg}>\r\n                    {displayName}\r\n                </li>\r\n            );\r\n        });\r\n    };\r\n\r\n    /**\r\n     * add by zhanghengh\r\n     * 创建选项按钮组\r\n     * btnConfig | Array 按钮配置项数组\r\n     */\r\n    _createOptBtns = btnConfig => {\r\n        return btnConfig.map((eve, index) => {\r\n            const { name } = eve;\r\n            return (\r\n                <Button onClick={this.handelSetName} key={index} data-name={name} className=\"opt-btn\">\r\n                    {name}\r\n                </Button>\r\n            );\r\n        });\r\n    };\r\n\r\n    /**\r\n     * add by zhanghengh\r\n     * 创建操作按钮组\r\n     * btnConfig | Array 按钮配置项数组\r\n     */\r\n    _createControlBtns = btnConfig => {\r\n        return btnConfig.map((eve, index) => {\r\n            const { name, onClick, key } = eve;\r\n            return (\r\n                <Button key={index} onClick={onClick} className=\"opt-btn\" fieldid={key}>\r\n                    {name}\r\n                </Button>\r\n            );\r\n        });\r\n    };\r\n\r\n    render() {\r\n        // 解释区域显示文字\r\n        const { isShow, json, explainData } = this.state;\r\n        const { onHide = () => { }, className = '', message = '', zIndex } = this.props;\r\n        return (\r\n            <div>\r\n                <Modal\r\n                    className={`${className} FormulaEditorWrap`}\r\n                    size=\"lg\"\r\n                    show={isShow && !this.exiting}\r\n                    backdrop=\"static\" //是否展示遮罩层\r\n                    onHide={onHide}\r\n                    onExit={() => {\r\n                        // 隐藏开始\r\n                        this.exiting = true;\r\n                    }}\r\n                    onExited={() => {\r\n                        // 隐藏结束  为了解决input focus 弹出面板时  关闭弹窗触发focus事件  特此延时以让一定时间内不会二次弹出\r\n                        setTimeout(() => {\r\n                            this.exiting = false; // 不确定这里是否会产生 内存问题  可以考虑把这个变量放到全局去  应该也不会产生问题\r\n                        }, 0);\r\n                    }}\r\n                    onEntered={dom => {\r\n                        let modalbody = dom.querySelector('.u-modal-body')\r\n                        if (modalbody) {\r\n                            if (modalbody.offsetHeight > 0) {\r\n                                let footerHeight = modalbody.offsetHeight - 226\r\n                                this.setState({ footerHeight })\r\n                            }\r\n\r\n                        }\r\n                    }}\r\n\r\n                    zIndex={zIndex}\r\n                    fieldid=\"formulaEditor\"\r\n                >\r\n                    <Header closeButton>\r\n                        <Title fieldid={`${json['formula0016']}`}>\r\n                            <span >{json['formula0016']} </span>\r\n                            <span style={{ marginLeft: '20px' }}>{message}</span>\r\n                        </Title>\r\n                    </Header>\r\n                    <Body>\r\n                        <div className=\"editor-containers\">\r\n                            {this._createWorkStation()}\r\n                            {this._createTabs()}\r\n                        </div>\r\n                        <div className=\"explain-area\">{explainData}</div>\r\n                    </Body>\r\n                </Modal>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nFormulaEditor.defaultProps = {\r\n    formulaConfig: [], //左侧tab配置\r\n    attrConfig: [], //右侧tab配置\r\n    onOk: () => { }, //点击确定回调\r\n};\r\nFormulaEditor.propTypes = {\r\n    formulaConfig: PropTypes.array, //左侧tab配置\r\n    attrConfig: PropTypes.array, //右侧tab配置\r\n    metaParam: PropTypes.object, //元素与属性请求参数\r\n    metaUrl: PropTypes.string, //元素与属性的请求路径\r\n    surfaceUrl: PropTypes.string, //表和字段的请求路径\r\n    formulaUrl: PropTypes.string, //公式的的请求路径\r\n    validateUrl: PropTypes.string, //自定义的验证接口\r\n    onOk: PropTypes.func, //点击确定回调\r\n    value: PropTypes.string, //设置编辑器的值\r\n    show: PropTypes.bool, //控制模态框展示和隐藏\r\n    noShowFormula: PropTypes.array, //公式tab不展示那些项\r\n    noShowAttr: PropTypes.array, //属性tab不展示那些项\r\n    onHide: PropTypes.func, //点击x按钮的回调\r\n    noControlBtns: PropTypes.array, //不需要展示的操作按钮\r\n    isValidateOnOK: PropTypes.bool, //点击确定后是否需要验证\r\n    defaultAttrKey: PropTypes.string, //属性tabs默认展示的页签\r\n    defaultFormulaKey: PropTypes.string, //公式tabs默认展示的页签\r\n    tabActiveKey: PropTypes.string, //公式tabs当前展示的页签\r\n};\r\n","import { PubSub } from '@platform/api';\r\nimport ReactDOM from 'react-dom';\r\nimport { keyByModuleId } from '../WithKeyboardChange/createKeyMap';\r\n\r\n/**\r\n * @desc 根据不同的formItem类型获取可聚焦的input元素\r\n * @types {\r\n *     1: refer,\r\n *     2: input, select, timepicker, dateTimePicker, datePicker, number,\r\n *     3: textarea\r\n * }\r\n * @matchItemFocus{\r\n *     refer: func\r\n * }\r\n */\r\nlet matchItemFocus = {\r\n    refer: setReferItemFocus,\r\n    input: setNormalItemFocus,\r\n    textarea: setTextAreaFocus,\r\n    select: setSelectItemFocus,\r\n    switch: setSwitchItemFocus,\r\n    switch_browse: setSwitchItemFocus,\r\n    normal: setNormalItemFocus,\r\n};\r\nfunction setReferItemFocus(selector) {\r\n    // let dom = ReactDOM.findDOMNode(component);\r\n    let dom = selector && document.querySelector(selector);\r\n    let inputEl = dom && dom.querySelector(\"input[tabindex='0']\");\r\n    let spanEl = dom && dom.querySelector(\"span[tabindex='0']\");\r\n\r\n    if (inputEl) {\r\n        //元素存在就让它聚焦\r\n        inputEl.focus();\r\n        dom = null;\r\n    } else if (spanEl) {\r\n        spanEl.focus();\r\n        dom = null;\r\n    } else {\r\n        dom && dom.addEventListener(\r\n            'DOMSubtreeModified',\r\n            //autoFocusInTricky.bind(null, dom)\r\n            function wrap(e) {\r\n                autoFocusInTricky(dom, wrap, e);\r\n            },\r\n        );\r\n    }\r\n    // dom = null;\r\n    inputEl = null;\r\n    spanEl = null\r\n}\r\n\r\n/**\r\n * todo: 由于refer组件是异步加载，input获取焦点时无法得到dom元素，因此在这儿监听dom更改事件, 希望在refer内部触发一个告诉外部，组件一渲染完成\r\n */\r\n\r\nfunction autoFocusInTricky(dom, fn, e) {\r\n    let inputEl = e.target.querySelector(\"input[tabindex='0']\");\r\n    // inputEl = null\r\n    if (inputEl) {\r\n        setTimeout(() => {\r\n            inputEl.focus();\r\n            dom && dom.removeEventListener('DOMSubtreeModified', fn);\r\n            inputEl = null;\r\n            dom = null;\r\n        });\r\n    }\r\n}\r\n\r\nfunction setNormalItemFocus(selector) {\r\n    // let dom = ReactDOM.findDOMNode(component);\r\n    let dom = selector && document.querySelector(selector);\r\n    let inputEl = dom && dom.querySelector('input');\r\n\r\n    inputEl && inputEl.focus();\r\n    dom = null;\r\n    inputEl = null;\r\n}\r\n\r\nfunction setTextAreaFocus(selector) {\r\n    // let dom = ReactDOM.findDOMNode(component);\r\n    let dom = selector && document.querySelector(selector);\r\n    let textEl = dom && dom.querySelector('textarea');\r\n\r\n    textEl && textEl.focus();\r\n    dom = null;\r\n    textEl = null;\r\n}\r\n\r\nfunction setSelectItemFocus(selector) {\r\n    // let dom = ReactDOM.findDOMNode(component);\r\n    let dom = selector && document.querySelector(selector);\r\n    let focusDom = dom && dom.querySelector('.u-select-selection[tabindex]') || dom.querySelector('input');\r\n\r\n    focusDom && focusDom.focus();\r\n    dom = null;\r\n    focusDom = null;\r\n}\r\n\r\nfunction setSwitchItemFocus(selector) {\r\n    // let dom = ReactDOM.findDOMNode(component);\r\n    let dom = selector && document.querySelector(selector);\r\n    let switchEl = dom && dom.querySelector('span[tabindex]');\r\n\r\n    switchEl && switchEl.focus();\r\n    dom = null;\r\n    switchEl = null;\r\n}\r\n\r\n//标签切换时首个自动聚焦\r\nfunction cellFocusAfterTabChange(item) {\r\n    if (keyByModuleId[item]) {\r\n        let focusItem = keyByModuleId[item].firstItem;\r\n\r\n        let moduleId = keyByModuleId[item] && keyByModuleId[item]['parent']\r\n            ? keyByModuleId[item]['parent']\r\n            : item;\r\n        focusItem && PubSub.publish('autoFocus', {\r\n            data: focusItem,\r\n            force: true,\r\n            moduleId,\r\n        });\r\n    }\r\n\r\n}\r\n\r\nexport {\r\n    matchItemFocus,\r\n    cellFocusAfterTabChange,\r\n};\r\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nif (process.env.NODE_ENV !== 'production') {\n  var ReactIs = require('react-is');\n\n  // By explicitly using `prop-types` you are opting into new development behavior.\n  // http://fb.me/prop-types-in-prod\n  var throwOnDirectAccess = true;\n  module.exports = require('./factoryWithTypeCheckers')(ReactIs.isElement, throwOnDirectAccess);\n} else {\n  // By explicitly using `prop-types` you are opting into new production behavior.\n  // http://fb.me/prop-types-in-prod\n  module.exports = require('./factoryWithThrowingShims')();\n}\n","/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = isEqual;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./es/react-hotkeys.production.min.js');\n} else {\n  module.exports = require('./es/index.js');\n}\n","import React, { Component } from 'react';\r\nimport { PubSub } from '@platform/api';\r\nimport { HotKeys as OriginHotKeys } from 'react-hotkeys';\r\n\r\nrequire('./index.less');\r\n/**\r\n * 通用的组合键\r\n */\r\nconst USUAL_KEYS = {\r\n    // 新增\r\n    ADD: ['Ctrl+/'],\r\n    // 刪除\r\n    DELETE: ['Del'],\r\n    // 保存\r\n    SAVE: ['Ctrl+S'],\r\n    // 保存新增\r\n    SAVE_ADD: ['Alt+S'],\r\n    // 編輯\r\n    EDIT: ['Ctrl+E'],\r\n    // 保存提交\r\n    SAVE_SUBMIT: ['Ctrl+T'],\r\n    // 取消\r\n    CAEL: ['Alt+Q'],\r\n    // 暂存\r\n    STORAGE: ['Ctrl+Alt+S'],\r\n    // 刪除行\r\n    DELETE_ROW: ['Alt+Del'],\r\n\r\n    // 窗口取消按钮\r\n    MODAL_CALCEL: ['Alt+N'],\r\n    // 窗口确定按钮\r\n    MODAL_CONFIRM: ['Alt+Y'],\r\n\r\n    // CardPagination\r\n    // 卡片分页末页按钮\r\n    CARDPAGE_END: ['Alt+End'],\r\n    // 卡片分页上一页按钮\r\n    CARDPAGE_UP: ['Alt+Pageup'],\r\n    // 卡片分页下一页按钮\r\n    CARDPAGE_DOWN: ['Alt+Pagedown'],\r\n    // 卡片分页首页按钮\r\n    CARDPAGE_HOME: ['Alt+Home'],\r\n\r\n    // 常用按钮\r\n    BTN_PRINT: ['Ctrl+P'],\r\n\r\n    // 窗口的x\r\n    ICON_CLOSE: ['Esc'],\r\n};\r\n\r\nconst defaultProps = {\r\n    // 事件key集合  {addData: ['ctrl+s']}\r\n    keyMap: {},\r\n    // 处理方法集合  {addData: ()=> {}}  注意键的配置和处理逻辑的配置对应\r\n    handlers: {},\r\n    // 是否启用\r\n    enabled: true,\r\n    // 触发事件的目标\r\n    attach: document.body, // 如果为flase 则聚焦到当前包裹区域时才触发\r\n    // focused: false, // 是否默认聚焦  设置true 不聚焦到区域也可以触发\r\n    display: 'block',\r\n    // 是否清理 弹窗\r\n    clearOpenPanel: true, // 可以是方法回调\r\n};\r\n\r\n/**\r\n * 首字母大写\r\n * @param {*} str\r\n */\r\nfunction firstToUpperCase(str) {\r\n    str = str.replace(/ /g, '');\r\n    return str.toLowerCase().replace(/( |^)[a-z]/g, L => L.toUpperCase());\r\n}\r\n\r\n/**\r\n * 转换为小写\r\n * @param {*} str\r\n */\r\nfunction toLowerCase(str) {\r\n    str = str.replace(/ /g, '');\r\n    return str.toLowerCase();\r\n}\r\n\r\nfunction _typeof(obj) {\r\n    if (obj == null) {\r\n        return String(obj);\r\n    }\r\n    return typeof obj === 'object' || typeof obj === 'function'\r\n        ? Object.prototype.toString.call(obj).replace(/object|\\[|\\]| /g, '') ||\r\n        'object'\r\n        : typeof obj;\r\n}\r\n\r\n/**\r\n * 二次封装了  hotkeys 组件\r\n */\r\nclass HotKeys extends Component {\r\n    static USUAL_KEYS = USUAL_KEYS;\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { enabled: this.props.enabled };\r\n    }\r\n\r\n    UNSAFE_componentWillReceiveProps(nextProps) {\r\n        if (!!nextProps.enabled && nextProps.enabled !== this.state.enabled) {\r\n            this.setState({ enabled: nextProps.enabled });\r\n        }\r\n    }\r\n\r\n    UNSAFE_componentWillMount() {\r\n        // 在iframe中使用时会导致  聚焦不到iframe内部\r\n        let attach = this.props.attach;\r\n        // if (attach === document.body) {\r\n        //     document.body.tabindex = \"0\";\r\n        //     document.body.setAttribute('tabindex', 0);\r\n        // }\r\n    }\r\n\r\n    componentDidMount() {\r\n        // HotKeys.USUAL_KEYS.EDIT = ['ctrl+g'];\r\n        // TODO 未来可以请求数据  然后设置数据\r\n    }\r\n\r\n    /**\r\n     * 获取翻译之后的keys\r\n     * @param {*} keys\r\n     */\r\n    getTranslateKeys(keys) {\r\n        let type = _typeof(keys);\r\n        if (type === 'string') {\r\n            keys = toLowerCase(USUAL_KEYS[keys] ? USUAL_KEYS[keys][0] : keys);\r\n        } else if (type === 'Array') {\r\n            // 翻译\r\n            keys = keys.map(function (item, index) {\r\n                return toLowerCase(\r\n                    USUAL_KEYS[item] ? USUAL_KEYS[item][0] : item,\r\n                );\r\n            });\r\n            // 去重\r\n            keys = [...new Set(keys)];\r\n        } else if (type === 'Object' && keys.sequence && keys.action) {\r\n            keys = { sequence: keys.sequence, action: keys.action };\r\n        } else {\r\n            keys = ['up+down+left+right+b+a+b+a'];\r\n        }\r\n        return keys;\r\n    }\r\n\r\n    /**\r\n     * 清理頁面的彈出面板\r\n     * TODO: 后续要考虑下其他方案  目前这个方案太low了\r\n     */\r\n    clearOpenPanel(keyCode) {\r\n        // 特殊键处理\r\n        if (keyCode === 'enter' || keyCode[0] === 'enter') {\r\n            return false;\r\n        }\r\n        // 日期和时间太复杂  特殊处理下\r\n        let d =\r\n            document.querySelector('.rc-calendar-picker') ||\r\n            document.querySelector('.u-time-picker-panel');\r\n        if (d) {\r\n            PubSub.publish('clearOpenPanel', { type: 'picker' });\r\n        }\r\n        // 这里没有考虑多个展开的问题 而且 有多个展开时应该如何处理\r\n        // 也没有考虑到 组件本身用了 hotkeys 操作的问题\r\n        if (\r\n            document &&\r\n            (document.querySelector('.u-dropdown:not(.u-dropdown-hidden)') ||\r\n                document.querySelector('.u-select-dropdown:not(.u-select-dropdown-hidden)') ||\r\n                document.querySelector('.mores-list-wrapper:not(.mores-list-hide-wrapper)'))\r\n        ) { // 这一坨我也是醉了  要判断  非隐藏的情况下显示了\r\n            console.log('use hotkeys and clear panel');\r\n            document.activeElement.click();\r\n            console.log(document.activeElement);\r\n        }\r\n    }\r\n\r\n    triggerEventHandle(k, e, sequence) {\r\n        let {\r\n            handlers = {},\r\n            clearOpenPanel = true,\r\n        } = this.props;\r\n        // console.log(k, e, sequence);\r\n        if (Object.prototype.toString.call(clearOpenPanel) === '[object Function]') {\r\n            clearOpenPanel();\r\n        }\r\n        if (clearOpenPanel === true) {\r\n            this.clearOpenPanel(sequence);\r\n        }\r\n        e.preventDefault();\r\n        handlers[k] && handlers[k](e, sequence);\r\n    }\r\n\r\n    /**\r\n     * 獲取KeyMapsAndHandlers\r\n     */\r\n    getKeyMapsAndHandlers() {\r\n        let {\r\n            keyMap = {},\r\n            handlers = {},\r\n            keyMapX = {},\r\n            handlersX = {},\r\n        } = this.props;\r\n\r\n        for (let k in keyMap) {\r\n            keyMapX[k] = this.getTranslateKeys(keyMap[k]);\r\n\r\n            // handlersX[k] = function (e) {\r\n            //     this.clearOpenPanel(keyMapX[k]);\r\n            //     e.preventDefault();\r\n            //     handlers[k] && handlers[k](e, keyMapX[k]);\r\n            // };\r\n\r\n            // handlersX[k] = ((k, handlers, keyMapX, self) => {\r\n            //     // 包装\r\n            //     return function (e) {\r\n            //         self.clearOpenPanel(keyMapX[k]);\r\n            //         e.preventDefault();\r\n            //         handlers[k] && handlers[k](e, keyMapX[k]);\r\n            //     };\r\n            // })(k, handlers, keyMapX, this);\r\n\r\n            handlersX[k] = this.triggerEventHandle.bind(this, k);\r\n        }\r\n        keyMapX = Object.assign({}, keyMapX);\r\n        handlersX = Object.assign({}, handlersX);\r\n        // 过滤一些空的hotkeys\r\n        if (\r\n            Object.keys(keyMapX).length === 0 ||\r\n            Object.keys(handlersX).length === 0\r\n        ) {\r\n            return false;\r\n        }\r\n        return {\r\n            keyMapX,\r\n            handlersX,\r\n        };\r\n    }\r\n\r\n    render() {\r\n        let {\r\n            enabled,\r\n            keyMap,\r\n            handlers,\r\n            children = null,\r\n            className = '',\r\n            display,\r\n            clearOpenPanel,\r\n            ...others\r\n        } = this.props;\r\n\r\n        let assignResult = this.getKeyMapsAndHandlers(); // 處理一下 合并結果\r\n        return assignResult && enabled ? (\r\n            <OriginHotKeys\r\n                keyMap={assignResult.keyMapX}\r\n                handlers={assignResult.handlersX}\r\n                ref={dom => (this.hotkeyWrapped = dom)}\r\n                className={'nc-hotkeys-wrapper ' + className}\r\n                style={{ display }}\r\n                {...others}\r\n            >\r\n                {children}\r\n            </OriginHotKeys>\r\n        ) : (<div className={className} style={{ display }}>\r\n            {children}\r\n        </div>);\r\n    }\r\n}\r\n\r\nHotKeys.defaultProps = defaultProps;\r\n\r\nexport default HotKeys;\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","/**\r\n * @desc 表格可编辑的状态下checkbox类型的单元格没有浏览态与编辑态之分, 因此需要在checkbox的属性上去判断此单元格是否可编辑\r\n */\r\nexport function checkboxInTable(dom) {\r\n\tif (dom.tagName !== 'INPUT') return false;\r\n\r\n\t//如果是不可编辑的checkbox就继续查找下一个可聚焦元素\r\n\tif (dom && dom.disabled === true) {\r\n\t\treturn true;\r\n\t}\r\n\r\n}\r\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","import getCellIdentity from './getCellIdentity';\r\nimport { checkboxInTable } from './handleSpecialCase';\r\nimport { keyByModuleId } from '../createKeyMap';\r\nimport { MODULE_TYPE } from '../config/moduleType';\r\nimport { config as CONFIG } from '@platform/api'\r\nimport { findParentTd } from '@platform/api';\r\nimport { executeAutoFocus } from './findNextFocusItemInTable';\r\nimport { findLastFocusItemInForm } from './findNextFocusItemInForm';\r\n\r\n\r\n/**\r\n * @desc 查找下一个可聚焦元素\r\n * @param target {dom} 事件源\r\n * @param ViewModel {object} 全局变量\r\n * @param moduleId {string} 当前区域Id\r\n * @param orderOfHotKey {array} 区域显示顺序配置\r\n */\r\nfunction findPrevFocusItemInTable({ eventTarget, ViewModel, moduleId, orderOfHotKey }) {\r\n    var parentTd = eventTarget.tagName === 'TD' ? eventTarget : findParentTd(eventTarget);\r\n    if (!parentTd) {\r\n        // 这里报错的原因是因为某些事件（下拉的keydown）执行了两次\r\n        console.warn('not find parentTd, prev hotkey invalid');\r\n        return;\r\n    }\r\n    var prevTd = parentTd.previousElementSibling;\r\n    var currentTr = parentTd.parentElement;\r\n    var firstTd = findFirstTdInRow(currentTr);\r\n    var div = prevTd && prevTd.querySelector('[tabindex=\"0\"]');\r\n\r\n    //如果是第一一个元素就需要判断跳到上一行还是跳到上一个区域\r\n    if (firstTd === parentTd) {\r\n        var lastTr = currentTr.parentElement.lastElementChild;\r\n\r\n        currentTr === lastTr\r\n            ? perceptionHotKeyConfig({ currentModuleId: moduleId, ViewModel, orderOfHotKey })\r\n            : findPrevRowTd({ tr: currentTr, ViewModel, moduleId, orderOfHotKey });\r\n        return;\r\n    }\r\n\r\n    // 如果下一个元素没有找到就继续查找\r\n    if (div === null || checkboxInTable(div)) {\r\n        findPrevSiblings({ td: prevTd, ViewModel, moduleId, orderOfHotKey });\r\n        return;\r\n    }\r\n\r\n    // 解决table 设值后重新渲染导致焦点缺失的问题,在这里保留一下id\r\n    let cellIdentity = getCellIdentity(prevTd);\r\n    cellIdentity\r\n        ? ViewModel.enterTriggerCellId = cellIdentity\r\n        : '';\r\n    executeAutoFocus({ div, ViewModel });\r\n}\r\n\r\n/**\r\n * @desc 查找当前行里的第一个td，需要排除操作列\r\n * @param tr {dom}\r\n * @return td {dom}\r\n */\r\nfunction findFirstTdInRow(tr) {\r\n    let tds = tr.querySelectorAll('td');\r\n\r\n    let td = Array.prototype.find.call(tds, function (td) {\r\n        return !td.className.includes('fixed');\r\n    });\r\n\r\n    return td;\r\n}\r\n\r\n/**\r\n * @desc 判断业务组是否配置快捷键，如果没有就在本区域内循环 反之根据orderOfHotKey跳转上个区域\r\n * @param currentModuleId {string} 当前的区域ID\r\n * @param ViewModel 全局变量\r\n * @param orderOfHotKey {array} 区域展示顺序\r\n */\r\nfunction perceptionHotKeyConfig({ currentModuleId, ViewModel, orderOfHotKey }) {\r\n    if (orderOfHotKey && orderOfHotKey.length === 0) {\r\n        findLastFocusItemInCurrentModule({ currentModuleId, ViewModel });\r\n    } else {\r\n        orderOfHotKey &&\r\n            jumpToPrevModuleFocusItem({ currentModuleId, ViewModel, orderOfHotKey });\r\n    }\r\n}\r\n\r\nfunction findLastFocusItemInCurrentModule({ currentModuleId, ViewModel }) {\r\n    let id = `${CONFIG.hotKeyModuleIdPrefix}-${currentModuleId}`;\r\n    let tableTr = document.querySelectorAll(`#${id} table tbody tr.u-table-row`);\r\n    let lastOneIndex = tableTr[tableTr.length - 1];\r\n    let tds = tableTr[lastOneIndex].querySelectorAll('td');\r\n\r\n    let lastFocusItem = findLastChild(tds);\r\n\r\n    let cellIdentity = getCellIdentity(lastFocusItem);\r\n    cellIdentity\r\n        ? ViewModel.enterTriggerCellId = cellIdentity\r\n        : '';\r\n\r\n    var div = lastFocusItem.querySelector('[tabindex=\"0\"]');\r\n    div && executeAutoFocus({ div, ViewModel });\r\n}\r\n\r\n/**\r\n * @desc 寻找最后一个可编辑啊元素\r\n * @param tds {nodeList}\r\n */\r\nfunction findLastChild(tds) {\r\n    // eslint-disable-next-line no-empty\r\n    for (var i = tds.length; i > -1; i--) {\r\n        if (tds[i].querySelector('[tabindex=\"0\"]') !== null) {\r\n            return tds[i];\r\n        }\r\n    }\r\n}\r\n\r\n\r\nfunction jumpToPrevModuleFocusItem({ currentModuleId, ViewModel, orderOfHotKey }) {\r\n    let prevModuleId = calculatePrevModuleId(currentModuleId, orderOfHotKey);\r\n\r\n    let prevModuleKeyMap = keyByModuleId[prevModuleId];\r\n\r\n    if (prevModuleKeyMap === undefined) return;\r\n\r\n    let type = prevModuleKeyMap.type;\r\n    if (type === MODULE_TYPE.cardTable || type === MODULE_TYPE.editTable) {\r\n        //如果是table类型就获取当前table显示的页签\r\n        let activeTableKeyMap = keyByModuleId[prevModuleKeyMap.activeTable];\r\n        let lastItemDom = document.querySelector(`div[${activeTableKeyMap.lastItem}]`);\r\n        let div = lastItemDom.querySelector('[tabindex=\"0\"]');\r\n\r\n        if (div === null) {\r\n            let td = lastItemDom.parentElement;\r\n            findPrevSiblings({ td, ViewModel, moduleId: activeTableKeyMap.moduleId, orderOfHotKey });\r\n        } else {\r\n            let td = findParentTd(div);\r\n\r\n            /**\r\n             * @desc 表格编辑后会导致页面重新渲染导致聚焦状态丢失，因此enter键跳转的需要在全局记录一下，为操作的连续性渲染完成后重新聚焦做标识\r\n             * @type {string}\r\n             */\r\n            let cellIdentity = getCellIdentity(td);\r\n            cellIdentity\r\n                ? ViewModel.enterTriggerCellId = cellIdentity\r\n                : '';\r\n            executeAutoFocus({ div, ViewModel });\r\n        }\r\n\r\n    } else {\r\n        findLastFocusItemInForm(prevModuleKeyMap, prevModuleId);\r\n    }\r\n}\r\n\r\n/**\r\n * @desc 递归查找上一个可聚焦元素\r\n * @param td {dom} 前一个td\r\n * @param ViewModel {object} 全局变量\r\n * @param moduleId {string} 当前区域的Id\r\n * @param orderOfHotKey\r\n */\r\nfunction findPrevSiblings({ td, ViewModel, moduleId, orderOfHotKey }) {\r\n    var prevTd = td.previousElementSibling;\r\n    var currentTr = prevTd && prevTd.parentElement;\r\n    var firstTd = currentTr && findFirstTdInRow(currentTr);\r\n    var currentDiv = td.querySelector('[tabindex=\"0\"]');\r\n    var div = prevTd && prevTd.querySelector('[tabindex=\"0\"]');\r\n\r\n    //如果下个需要聚焦的单元格与最后一个单元相同并且没有可聚焦元素就在下一行查找\r\n    if ((firstTd === prevTd && div === null) || (firstTd === td && currentDiv === null)) {\r\n        findPrevRowTd({ tr: currentTr, ViewModel, moduleId, orderOfHotKey });\r\n        return;\r\n    }\r\n\r\n    if (div === null || checkboxInTable(div)) {\r\n        findPrevSiblings({ td: prevTd, ViewModel, moduleId, orderOfHotKey });\r\n        return;\r\n    }\r\n\r\n    let cellIdentity = getCellIdentity(prevTd);\r\n    cellIdentity\r\n        ? ViewModel.enterTriggerCellId = cellIdentity\r\n        : '';\r\n    executeAutoFocus({ div, ViewModel });\r\n}\r\n\r\nfunction calculatePrevModuleId(currentModuleId, orderOfHotKey) {\r\n    let orderOfHotKeyLen = orderOfHotKey.length;\r\n    let currentModuleIndex = orderOfHotKey.indexOf(currentModuleId);\r\n\r\n    let prevModuleIndex = currentModuleIndex - 1 < -1\r\n        ? orderOfHotKey[orderOfHotKeyLen - 1]\r\n        : currentModuleIndex - 1;\r\n    return orderOfHotKey[prevModuleIndex];\r\n}\r\n\r\n//查找上一行可聚焦元素\r\nfunction findPrevRowTd({ tr, ViewModel, moduleId, orderOfHotKey }) {\r\n    var prevTr = tr && tr.previousElementSibling;\r\n\r\n    //如果是最后一行就查找下个区域的第一个可聚焦元素\r\n    if (prevTr === null) {\r\n        orderOfHotKey &&\r\n            jumpToPrevModuleFocusItem({ currentModuleId: moduleId, ViewModel, orderOfHotKey });\r\n        return;\r\n    }\r\n\r\n    if (prevTr.getAttribute('tabindex') === '-1') {\r\n        findPrevRowTd({ tr: prevTr, ViewModel, moduleId, orderOfHotKey });\r\n        return;\r\n    }\r\n\r\n    var divs = prevTr.querySelectorAll('td [tabindex=\"0\"]');\r\n    var lastDiv = divs[divs.length - 1];\r\n    var td = findParentTd(lastDiv);\r\n\r\n    let cellIdentity = getCellIdentity(td);\r\n    cellIdentity\r\n        ? ViewModel.enterTriggerCellId = cellIdentity\r\n        : '';\r\n    executeAutoFocus({ div: lastDiv, ViewModel });\r\n}\r\n\r\n\r\nexport {\r\n    findPrevFocusItemInTable,\r\n};\r\n","/*\r\n * @Descripttion: \r\n * @version: \r\n * @Author: bbq\r\n * @Date: 2020-08-17 09:56:43\r\n * @LastEditors: bbq\r\n * @LastEditTime: 2021-02-20 09:37:22\r\n */\r\nimport getCellIdentity from './getCellIdentity';\r\nimport { findParentTd } from '@platform/api';\r\nimport { executeAutoFocus } from './findNextFocusItemInTable';\r\nimport calculateNeedJumpTimes from './calculateNeedJumpTimes';\r\n\r\n/**\r\n * @desc 查找上一行元素\r\n * @param target {dom} 事件源\r\n * @param ViewModel {object} 全局变量\r\n * @param moduleId {string} 当前区域Id\r\n * @param orderOfHotKey {array} 区域显示顺序配置\r\n */\r\nfunction findUpStairsFocusItemInTable({ eventTarget, ViewModel, moduleId, orderOfHotKey }) {\r\n    let parentTd = eventTarget.tagName === 'TD' ? eventTarget : findParentTd(eventTarget);\r\n    let upStairTr = parentTd.parentElement.previousElementSibling;\r\n    let jumpedLines = 1; //向上跳跃的行数\r\n    if (upStairTr === null) return;\r\n\r\n    if (upStairTr.getAttribute('tabindex') === '-1') {\r\n        jumpedLines = calculateNeedJumpTimes(upStairTr, jumpedLines, 'up');\r\n    }\r\n\r\n    let cellIdentity = getCellIdentity(parentTd);\r\n\r\n    if (!cellIdentity) {\r\n        return console.warn('not find cell identity!');\r\n    }\r\n\r\n    let cellIdentityArray = cellIdentity && cellIdentity.split('-');\r\n    let upStairsLine = Number(cellIdentityArray.pop()) - jumpedLines;\r\n\r\n    if (upStairsLine > -1) {\r\n        cellIdentityArray.push(upStairsLine);\r\n        let upStairsCellIdentity = cellIdentityArray.join('-');\r\n        ViewModel.upStairsCellIdentity = cellIdentityArray;\r\n\r\n        let div = document.querySelector(`div[${upStairsCellIdentity}=\"${upStairsCellIdentity}\"] [tabindex=\"0\"], div[${upStairsCellIdentity}=\"${upStairsCellIdentity}\"][tabindex=\"0\"]`);\r\n\r\n        executeAutoFocus({ div, ViewModel });\r\n    }\r\n}\r\nexport {\r\n    findUpStairsFocusItemInTable,\r\n};\r\n","/*\r\n * @Author: liyxt\r\n * @Date: 2020-05-19 15:47:39\r\n * @LastEditors: bbq\r\n * @LastEditTime: 2021-02-20 09:37:12\r\n * @Description: file content\r\n */\r\nimport getCellIdentity from './getCellIdentity';\r\nimport { config as CONFIG } from '@platform/api'\r\nimport { findParentTd } from '@platform/api';\r\nimport { executeAutoFocus } from './findNextFocusItemInTable';\r\nimport calculateNeedJumpTimes from './calculateNeedJumpTimes';\r\n\r\n/**\r\n * @desc 查找上一行元素\r\n * @param target {dom} 事件源\r\n * @param ViewModel {object} 全局变量\r\n * @param moduleId {string} 当前区域Id\r\n * @param orderOfHotKey {array} 区域显示顺序配置\r\n */\r\nfunction findDownStairsFocusItemInTable({ eventTarget, ViewModel, moduleId }) {\r\n    // debugger;\r\n    let parentTd = eventTarget.tagName === 'TD' ? eventTarget : findParentTd(eventTarget);\r\n    let downStairTr = parentTd.parentElement.nextElementSibling;\r\n    let jumpedLines = 1; //向下跳跃的行数\r\n\r\n    if (downStairTr === null) return;\r\n\r\n    if (downStairTr.getAttribute('tabindex') === '-1') {\r\n        jumpedLines = calculateNeedJumpTimes(downStairTr, jumpedLines, 'down');\r\n\r\n    }\r\n\r\n    let cellIdentity = getCellIdentity(parentTd);\r\n\r\n    if (!cellIdentity) {\r\n        return console.warn('not find cell identity!');\r\n    }\r\n\r\n    let cellIdentityArray = cellIdentity && cellIdentity.split('-');\r\n    let downStairsLine = Number(cellIdentityArray.pop()) + jumpedLines;\r\n\r\n    let id = `${CONFIG.hotKeyModuleIdPrefix}-${moduleId}`;\r\n    // let tableTr = document.querySelectorAll(`#${id} table tbody tr.u-table-row`);\r\n\r\n    // if (downStairsLine < tableTr.length) {\r\n    cellIdentityArray.push(downStairsLine);\r\n    let upStairsCellIdentity = cellIdentityArray.join('-');\r\n    ViewModel.upStairsCellIdentity = upStairsCellIdentity;\r\n\r\n    let div = document.querySelector(`div[${upStairsCellIdentity}=\"${upStairsCellIdentity}\"] [tabindex=\"0\"], div[${upStairsCellIdentity}=\"${upStairsCellIdentity}\"][tabindex=\"0\"]`);\r\n\r\n    executeAutoFocus({ div, ViewModel });\r\n    // }\r\n}\r\n\r\nexport { findDownStairsFocusItemInTable };\r\n","import { keyByModuleId, orderOfHotKey } from './createKeyMap';\r\nimport { MODULE_TYPE } from './config/moduleType';\r\nimport { ViewModel, config, PubSub } from '@platform/api'\r\nimport { findNextFocusItemInTable } from './util/findNextFocusItemInTable';\r\nimport { findPrevFocusItemInTable } from './util/findPrevFoucsItemInTable';\r\nimport { findUpStairsFocusItemInTable } from './util/findUpStairsFocusItemInTable';\r\nimport { findDownStairsFocusItemInTable } from './util/findDownStairsFocusItemInTable';\r\n\r\nconst ARROW_KEY = {\r\n    37: handleLeftArrow,\r\n    38: handleUpArrow,\r\n    39: handleRightArrow,\r\n    40: handleDownArrow,\r\n};\r\n\r\n/**\r\n *\r\n * @param moduleId { String } 事件触发时得到的当前moduleId\r\n * @param e { Object } 事件源\r\n * @param key  { String } 触发的按钮\r\n */\r\n\r\nfunction keyDownOfShiftUp(moduleId, e, key) {\r\n    let nextFocus = key === 'shift+down' ? +1 : -1;\r\n\r\n    let nextFocusModuleIdIndex = orderOfHotKey.indexOf(moduleId) + nextFocus;\r\n    let nextFocusModuleId = orderOfHotKey[nextFocusModuleIdIndex];\r\n\r\n    if (e.target) { // 逻辑修正\r\n        let code = null;\r\n        // item 根本没有item\r\n        // if (keyByModuleId[moduleId][item]) {\r\n        //     code = keyByModuleId[moduleId][item];\r\n        // }\r\n\r\n        if (!isLastModule(nextFocusModuleId) && keyByModuleId[nextFocusModuleId].firstItem) {\r\n            code = keyByModuleId[nextFocusModuleId].firstItem;\r\n        }\r\n        let wrapperDom = document.querySelector(`div[field=${code}]`);\r\n        if (!wrapperDom || !(wrapperDom && wrapperDom.contains(e.target))) {\r\n            e.target.blur();\r\n        }\r\n    }\r\n\r\n    if (isLastModule(nextFocusModuleId)) {\r\n        focusInSelfModule({ key, moduleId });\r\n        return;\r\n    }\r\n\r\n    //如果下一个聚焦区域没有数据就跳过\r\n    if (nextItemNotHaveData(this.props, moduleId, nextFocusModuleId)) {\r\n        keyDownOfShiftUp.call(this, nextFocusModuleId, e, key);\r\n        return;\r\n    }\r\n\r\n    PubSub.publish('autoFocus', {\r\n        data: keyByModuleId[nextFocusModuleId].firstItem,\r\n        moduleId,\r\n    });\r\n}\r\n\r\n/**\r\n * @desc 如果在keyByModuleId中没有找到 nextFocusModuleId 就在当前moduleId中来回跳，从第一个可聚焦点跳到最后一个可聚焦点\r\n * @param nextFocusModuleId {string}\r\n * @return {boolean}\r\n */\r\nfunction isLastModule(nextFocusModuleId) {\r\n    return keyByModuleId[nextFocusModuleId] === undefined;\r\n}\r\n\r\nfunction focusInSelfModule({ key, moduleId }) {\r\n    let item = key === 'shift+down' ? 'lastItem' : 'firstItem';\r\n\r\n    //判断是否有关联tab标签\r\n    if (hasTabRelation(moduleId)) {\r\n        activeItemFocus(moduleId, item);\r\n        return;\r\n    }\r\n\r\n    PubSub.publish('autoFocus', {\r\n        data: keyByModuleId[moduleId][item],\r\n        moduleId,\r\n    });\r\n}\r\n\r\n// 判断是否有关联表\r\nfunction hasTabRelation(moduleId) {\r\n    let moduleInfo = keyByModuleId[moduleId];\r\n    return moduleInfo && (moduleInfo.parent || moduleInfo.children);\r\n}\r\n\r\n/**\r\n * @desc: 当前活跃的标签获取焦点\r\n * @param: moduleId {string} 当前区域Id\r\n * @param: item {string} 表格里的聚焦项\r\n */\r\nfunction activeItemFocus(moduleId, item) {\r\n    //如果当前活跃的标签是undefined 就用区域ID\r\n    let activeKey = ViewModel.tableActiveKey || moduleId;\r\n\r\n    PubSub.publish('autoFocus', {\r\n        data: keyByModuleId[activeKey][item],\r\n        moduleId,\r\n    });\r\n}\r\n\r\n/**\r\n * @desc 判断下一个需要聚焦的moduleId是否有数据,如果没有就再次keyDownOfShiftUp,\r\n * @param props {object}\r\n * @param currentModuleId {string} 当前聚焦的区域ID\r\n * @param nextModuleId {string} 下个聚焦的区域ID\r\n */\r\nfunction nextItemNotHaveData(props, currentModuleId, nextModuleId) {\r\n    const currentModuleType = keyByModuleId[currentModuleId].type;\r\n    const nextModuleType = keyByModuleId[nextModuleId].type;\r\n    let data = [];\r\n\r\n    //type: {form, cardTable, editTable}\r\n    if (currentModuleType === MODULE_TYPE.form) {\r\n        data = getDataByFormDataStructure(props, nextModuleType, nextModuleId);\r\n    } else if (currentModuleType === MODULE_TYPE.cardTable) {\r\n        data = getDataByCardTableDataStructure(props, nextModuleType, nextModuleId);\r\n    } else if (currentModuleType === MODULE_TYPE.editTable) {\r\n        data = getDataByCardTableDataStructure(props, nextModuleType, nextModuleId);\r\n    }\r\n\r\n    return data.length === 0;\r\n}\r\n/**\r\n * \r\n * TODO\r\n * @desc 由于form, table 类型的数据存放于不同的地方\r\n * @param props\r\n * @param nextModuleType\r\n * @param nextModuleId\r\n */\r\nfunction getDataByFormDataStructure(props, nextModuleType, nextModuleId) {\r\n    let data;\r\n    let myTable = props._this.myTable;\r\n    if (nextModuleType === MODULE_TYPE.cardTable) {\r\n        data = myTable[nextModuleId].state.table.rows;\r\n    } else if (nextModuleType === MODULE_TYPE.editTable) {\r\n        data = myTable.myEditTable[nextModuleId].state.table.rows;\r\n    } else {\r\n        data = props._this.state.meta[nextModuleId].items;\r\n    }\r\n\r\n    return data;\r\n}\r\n\r\n// TODO\r\nfunction getDataByCardTableDataStructure(props, nextModuleType, nextModuleId) {\r\n    let data;\r\n    let myTable = props.pageScope.myTable;\r\n    if (nextModuleType === MODULE_TYPE.cardTable) {\r\n        data = myTable[nextModuleId].state.table.rows;\r\n    } else if (nextModuleType === MODULE_TYPE.editTable) {\r\n        data = myTable.myEditTable[nextModuleId].state.table.rows;\r\n    } else {\r\n        data = props.pageScope.state.meta[nextModuleId].items;\r\n    }\r\n\r\n    return data;\r\n}\r\n\r\n/**\r\n * @desc: 处理上下左右键\r\n * @param eventTarget {dom} 事件源\r\n * @param ViewModel {object} 全局变量\r\n * @param moduleId {string} 区域ID\r\n * @param orderOfHotKey {array} 区域显示顺序\r\n * @param itemType {string} 基础组件类型 input/datePicker\r\n * @param keyCode {number} 按键号\r\n */\r\nfunction handleArrowKeyDown({ eventTarget, ViewModel, moduleId, orderOfHotKey, itemType, keyCode }) {\r\n    ARROW_KEY[keyCode]({ eventTarget, ViewModel, moduleId, orderOfHotKey, itemType });\r\n}\r\n\r\n/**\r\n * @desc 处理按左方向键\r\n * @param eventTarget\r\n * @param ViewModel\r\n * @param moduleId\r\n * @param orderOfHotKey\r\n * @param itemType\r\n */\r\nfunction handleLeftArrow({ eventTarget, ViewModel, moduleId, orderOfHotKey, itemType }) {\r\n    //日期类型延迟执行时eventTarget已被移出document导致寻找不到父元素td,所以日期类型立即执行\r\n    if (itemType === config.hotKeyDatePicker) {\r\n        findPrevFocusItemInTable({ eventTarget, ViewModel, moduleId, orderOfHotKey });\r\n        return;\r\n    }\r\n\r\n    //CLOUD-147579 中文输入法下会带进冒号空格等符号，原因是因为输入法的enter比我们的enter后执行导致\r\n    let timer = setTimeout(() => {\r\n        findPrevFocusItemInTable({ eventTarget, ViewModel, moduleId });\r\n        clearTimeout(timer);\r\n    });\r\n}\r\n\r\nfunction handleUpArrow({ eventTarget, ViewModel, moduleId, orderOfHotKey, itemType }) {\r\n    //日期类型延迟执行时eventTarget已被移出document导致寻找不到父元素td,所以日期类型立即执行\r\n    if (itemType === config.hotKeyDatePicker) {\r\n        findUpStairsFocusItemInTable({ eventTarget, ViewModel, moduleId, orderOfHotKey });\r\n        return;\r\n    }\r\n\r\n    //CLOUD-147579 中文输入法下会带进冒号空格等符号，原因是因为输入法的enter比我们的enter后执行导致\r\n    let timer = setTimeout(() => {\r\n        findUpStairsFocusItemInTable({ eventTarget, ViewModel, moduleId, orderOfHotKey });\r\n        clearTimeout(timer);\r\n    });\r\n}\r\n\r\nfunction handleRightArrow({ eventTarget, ViewModel, moduleId, orderOfHotKey, itemType }) {\r\n    //日期类型延迟执行时eventTarget已被移出document导致寻找不到父元素td,所以日期类型立即执行\r\n    if (itemType === config.hotKeyDatePicker) {\r\n        findNextFocusItemInTable({ eventTarget, ViewModel, moduleId, orderOfHotKey });\r\n        return;\r\n    }\r\n\r\n    //CLOUD-147579 中文输入法下会带进冒号空格等符号，原因是因为输入法的enter比我们的enter后执行导致\r\n    let timer = setTimeout(() => {\r\n        findNextFocusItemInTable({ eventTarget, ViewModel, moduleId });\r\n        clearTimeout(timer);\r\n    });\r\n}\r\n\r\nfunction handleDownArrow({ eventTarget, ViewModel, moduleId, orderOfHotKey, itemType }) {\r\n    //日期类型延迟执行时eventTarget已被移出document导致寻找不到父元素td,所以日期类型立即执行\r\n    if (itemType === config.hotKeyDatePicker) {\r\n        findDownStairsFocusItemInTable({ eventTarget, ViewModel, moduleId, orderOfHotKey });\r\n        return;\r\n    }\r\n\r\n    //CLOUD-147579 中文输入法下会带进冒号空格等符号，原因是因为输入法的enter比我们的enter后执行导致\r\n    let timer = setTimeout(() => {\r\n        findDownStairsFocusItemInTable({ eventTarget, ViewModel, moduleId, orderOfHotKey });\r\n        clearTimeout(timer);\r\n    });\r\n}\r\n\r\nexport { keyDownOfShiftUp, handleArrowKeyDown };\r\n","var MapCache = require('./_MapCache'),\n    setCacheAdd = require('./_setCacheAdd'),\n    setCacheHas = require('./_setCacheHas');\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nmodule.exports = SetCache;\n","var baseIndexOf = require('./_baseIndexOf');\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array == null ? 0 : array.length;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\nmodule.exports = arrayIncludes;\n","/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arrayIncludesWith;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nmodule.exports = cacheHas;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","import React, { Component } from 'react';\r\n// import PropTypes from 'prop-types';\r\n\r\nrequire('./dragWidth.less');\r\n\r\nexport default class DragWidthCom extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.mouseDown = false;\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.divDom) {\r\n            this.clientWid = this.divDom.clientWidth;\r\n        }\r\n        this.onMouseDown.call(this);\r\n    }\r\n\r\n    onMouseDown() {\r\n        let that = this;\r\n        document.addEventListener('mousemove', e => {\r\n            //e.stopPropagation();\r\n            if (that.mouseDown && that.divDom) {\r\n                // fix bug  IE  e.x !== e.clientx  ie  \r\n                let wid = that.clientWid + (e.clientX - that.beginX);\r\n                if (wid >= that.box.clientWidth - 20 || wid <= 50) {\r\n                    that.divDom.style.width = that.divDom.clientWidth + 'px';\r\n                } else {\r\n                    that.divDom.style.width = wid + 'px';\r\n                }\r\n            }\r\n        });\r\n        /*document.documentElement.onmousemove = e => {\r\n      // e.preventDefault();\r\n\r\n    };*/\r\n\r\n        document.addEventListener('mouseup', () => {\r\n            that.mouseDown = false;\r\n            if (that.divDom) {\r\n                that.clientWid = that.divDom.clientWidth;\r\n            }\r\n            that.maskRightDom && (that.maskRightDom.style.display = 'none');\r\n            that.maskLeftDom && (that.maskLeftDom.style.display = 'none');\r\n            typeof that.props.onDragStop === 'function' && that.props.onDragStop();\r\n        });\r\n        /*document.documentElement.onmouseup = e => {\r\n\r\n    };*/\r\n\r\n        this.spanDom.addEventListener('mousedown', e => {\r\n            that.beginX = e.clientX;\r\n            that.mouseDown = true;\r\n            // 加个遮罩 应对  iframe的情况\r\n            that.maskRightDom && (that.maskRightDom.style.display = 'block');\r\n            that.maskLeftDom && (that.maskLeftDom.style.display = 'block');\r\n        });\r\n    /*this.spanDom.onmousedown = e => {\r\n\r\n    };*/\r\n    }\r\n\r\n    render() {\r\n        let lefWid = this.props.defLeftWid || '150px';\r\n        let leftMinWid = this.props.leftMinWid || '50px',\r\n            rightOverflow = this.props.rightOverflow || \"auto\";\r\n        return (\r\n            <div\r\n                className=\"dragWidthCom\"\r\n                ref={box => {\r\n                    this.box = box;\r\n                }}\r\n            >\r\n                <div\r\n                    className=\"dragWidthCom_left\"\r\n                    style={{ width: lefWid, minWidth: leftMinWid }}\r\n                    ref={div => {\r\n                        this.divDom = div;\r\n                    }}\r\n                >\r\n                    <div className=\"dragWidthCom_mask\" ref={mask => { this.maskLeftDom = mask; }} />\r\n                    {this.props.leftDom}\r\n                </div>\r\n                <div\r\n                    ref={span => {\r\n                        this.spanDom = span;\r\n                    }}\r\n                    className=\"dragWidthCom_line\"\r\n                >\r\n                    <div className=\"dragWidthCom_lines\" />\r\n                </div>\r\n                <div className=\"dragWidthCom_right\" id=\"scroll_container\">\r\n                    <div className=\"dragWidthCom_mask\" ref={mask => { this.maskRightDom = mask; }} />\r\n                    {this.props.rightDom}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","/*\r\n * @Descripttion: \r\n * @version: \r\n * @Author: jinfjk\r\n * @Date: 2020-08-17 09:56:43\r\n * @LastEditors: bbq\r\n * @LastEditTime: 2021-02-01 14:04:57\r\n */\r\nimport React, { Component } from 'react';\r\nimport { HotKeys } from 'react-hotkeys';\r\n\r\nimport { createByModuleType, deleteKeyByModuleId } from './createKeyMap';\r\nimport { stopFormHotKeyChange } from './config/stopHotKeyChange';\r\nimport { keyDownOfShiftUp } from './handleKeyDown';\r\nimport { keyMap } from './config/tableKeyboardMap';\r\nimport { config as CONFIG, PubSub } from '@platform/api';\r\nimport './hotKey.less';\r\n\r\nfunction FormWithKeyboardChange(WrappedComponent) {\r\n    return class WithHotKey extends Component {\r\n        constructor(props) {\r\n            super(props);\r\n            this.formStatusChanged = this.formStatusChanged.bind(this);\r\n        }\r\n\r\n        componentDidMount() {\r\n            //监听业务组手动执行的聚焦事件\r\n            this.autoFocusToken = PubSub.subscribe('autoFocus-IoC', () => {\r\n                //form的状态， 浏览态， add, edit\r\n                let status = this.props.store.getStatus();\r\n\r\n                //如果是业务组控制执行 autoFocusDeferred 设为false；\r\n                let autoFocusDeferred = false;\r\n\r\n                if (stopFormHotKeyChange({ props: this.props, autoFocusDeferred, status }) || status === 'browse') return;\r\n                createByModuleType['form'](this.props, true);\r\n            });\r\n        }\r\n\r\n        componentWillUnmount() {\r\n            // 部分情况下KeyByModuleId 没有清除  导致创建不能直接聚焦\r\n            deleteKeyByModuleId(this.props.moduleId || this.props.name);\r\n            this.autoFocusToken && PubSub.subscribe(this.autoFocusToken);\r\n        }\r\n\r\n        formStatusChanged(props, status) {\r\n            if (status === 'browse') {\r\n                deleteKeyByModuleId(props.moduleId || props.name);\r\n            } else {\r\n                this.judgeCreateKeyMap(props, status);\r\n            }\r\n\r\n        }\r\n\r\n        judgeCreateKeyMap(props, status) {\r\n            let { autoFocusDeferred = false } = props.getHotKeyConfig ? props.getHotKeyConfig() : {};\r\n            if (stopFormHotKeyChange({ props, autoFocusDeferred, status })) return;\r\n            createByModuleType['form'](props);\r\n        }\r\n\r\n        render() {\r\n            const moduleId = this.props.name;\r\n            return (\r\n                <HotKeys\r\n                    keyMap={keyMap}\r\n                    handlers={{\r\n                        shiftUp: keyDownOfShiftUp.bind(this, moduleId),\r\n                        shiftDown: keyDownOfShiftUp.bind(this, moduleId),\r\n                    }}\r\n                    id={`${CONFIG.hotKeyModuleIdPrefix}-${moduleId}`}\r\n                >\r\n                    <WrappedComponent\r\n                        {...this.props}\r\n                        formStatusChanged={this.formStatusChanged}\r\n                    />\r\n                </HotKeys>\r\n            );\r\n        }\r\n    };\r\n}\r\n\r\nexport default FormWithKeyboardChange;","/*\r\n * @Descripttion: \r\n * @version: \r\n * @Author: jinfjk\r\n * @Date: 2020-08-17 09:56:43\r\n * @LastEditors: bbq\r\n * @LastEditTime: 2021-01-25 19:25:48\r\n */\r\nimport React, { Component } from 'react';\r\nimport { PubSub } from '@platform/api';\r\nimport { matchItemFocus } from './executeAutoFocus';\r\n\r\nfunction FormWithAutoFocus(WrappedComponent) {\r\n    return class WithAutoFocus extends Component {\r\n        componentDidMount() {\r\n            let { name, form } = this.props;\r\n\r\n            this.autoFocusToken = PubSub.subscribe('autoFocus', (msg, { data, id }) => {\r\n                let selector = `[hotkeytag=\"${name}-${data}\"]`;\r\n                let itemtype = 'normal';\r\n                if (form && data) {\r\n                    form.setItemAttribute(data, 'autoFocus', true);\r\n                    itemtype = form.getItemAttribute(data, 'itemtype');\r\n                }\r\n                console.log(selector, form, id, data, itemtype);\r\n\r\n                // 表单\r\n                if (id) {\r\n                    if (name === id) {\r\n                        console.log(id)\r\n                        // 如果没有获取到对应的itemtype 就统一用normal来处理， 如果碰到特殊的就在往matchItemFocus里加\r\n                        matchItemFocus[itemtype] === undefined\r\n                            ? matchItemFocus['normal'](selector)\r\n                            : matchItemFocus[itemtype](selector);\r\n                    }\r\n                } else {\r\n                    if (data) {\r\n                        // 如果没有获取到对应的itemtype 就统一用normal来处理， 如果碰到特殊的就在往matchItemFocus里加\r\n                        matchItemFocus[itemtype] === undefined\r\n                            ? matchItemFocus['normal'](selector)\r\n                            : matchItemFocus[itemtype](selector);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        componentWillUnmount() {\r\n            // this.dom = null;\r\n            this.autoFocusToken && PubSub.subscribe(this.autoFocusToken);\r\n        }\r\n\r\n        render() {\r\n            // console.log(this.props.children);\r\n            return (\r\n                <WrappedComponent\r\n                    // ref={dom => {\r\n                    //     console.log(dom);\r\n                    //     this.dom = dom;\r\n                    // }}\r\n                    {...this.props}\r\n                />\r\n            );\r\n        }\r\n    };\r\n}\r\n\r\nexport default FormWithAutoFocus;","module.exports = \"data:image/png;base64,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\"","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    arrayMap = require('./_arrayMap'),\n    baseUnary = require('./_baseUnary'),\n    cacheHas = require('./_cacheHas');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of methods like `_.difference` without support\n * for excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee == null ? value : iteratee(value);\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseDifference;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","var arrayPush = require('./_arrayPush'),\n    isFlattenable = require('./_isFlattenable');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport classnames from 'classnames';\r\nimport { Tooltip as NCTooltip } from '@platform/base';\r\nimport { getSysFieldid } from '@platform/api';\r\n\r\nclass Cell extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { tipStatus: false };\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.cellDom = null;\r\n    }\r\n\r\n    handleMouseOver = () => {\r\n        if (this.cellDom) {\r\n            let { tipStatus } = this.state;\r\n            let firstCol = this.cellDom.parentNode.getAttribute('class').includes('first-col');\r\n            let tipNode = null;\r\n            let cellParent = this.cellDom.parentNode;\r\n            let realNode = this.cellDom.querySelector('.cell-context')\r\n            if (cellParent) {\r\n                tipNode = firstCol ? cellParent.parentNode && cellParent.parentNode.parentNode : cellParent;\r\n            }\r\n            if (tipNode) {\r\n                if (realNode.offsetWidth > tipNode.clientWidth && tipStatus === false) {\r\n                    this.setState({ tipStatus: true });\r\n                }\r\n                if (realNode.offsetWidth <= tipNode.clientWidth && tipStatus === true) {\r\n                    this.setState({ tipStatus: false });\r\n                }\r\n            }\r\n\r\n        }\r\n    };\r\n\r\n    render() {\r\n        let { item, fixedStyle, context, multipleRowCell, searchValue, beforeStr, index, afterStr, record, onCellMouseDown, isEllipsis } = this.props;\r\n        return (\r\n            <div\r\n                fieldid={getSysFieldid(item.attrcode)}\r\n                className={classnames('dobule-text', { 'dobule-text-fixed': !!(item.fixed && item.fixed === 'left') })}\r\n                style={fixedStyle}\r\n                ref={dom => {\r\n                    this.cellDom = ReactDOM.findDOMNode(dom);\r\n                }}\r\n                onMouseOver={this.handleMouseOver}\r\n                onMouseDown={e => {\r\n                    onCellMouseDown && onCellMouseDown(record, index, item.attrcode, item, e);\r\n                }}\r\n            >\r\n                <NCTooltip\r\n                    placement=\"top\"\r\n                    overlay={this.state.tipStatus ? context : ''}\r\n                    className=\"tooltip-word-color\"\r\n                    delay={1}\r\n                    inverse\r\n                >\r\n                    <div className={classnames({\r\n                        'single-line-and-ellipsis': !multipleRowCell && isEllipsis,\r\n                        'three-line-and-ellipsis': !isEllipsis,\r\n                    })}>\r\n                        {(beforeStr || afterStr || searchValue) ?\r\n                            <span className=\"cell-context\">\r\n                                {beforeStr}\r\n                                {index !== -1 && !!searchValue ?\r\n                                    < span className=\"u-table-searchable-filter\">{searchValue}</span> : ''}\r\n                                {afterStr}\r\n                            </span>\r\n                            : <span className=\"cell-context\">&nbsp;</span>}  {/* 单元格无数据时，显示空格，为了自动化测试可以点击到该单元格*/}\r\n                    </div>\r\n                </NCTooltip>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Cell;\r\n","export const SAVE_MULTI = {};\r\nexport const STOP_CHECK_ELEMENT = 'stop-check-element';\r\nexport const STOP_CHECK_OPERATION_ELEMENT = 'stop-check-operation-element';\r\n","\r\nimport {\r\n    STOP_CHECK_ELEMENT,\r\n    STOP_CHECK_OPERATION_ELEMENT,\r\n} from \"./containers\";\r\n\r\nimport { getSafeRandom } from '@platform/api'\r\n/*\r\n * @Descripttion:\r\n * @version:\r\n * @Author: bbq\r\n * @Date: 2020-12-08 16:04:10\r\n * @LastEditors: bbq\r\n * @LastEditTime: 2020-12-11 14:38:00\r\n */\r\nconst getVarType = function (v) {\r\n    return Object.prototype.toString.call(v).slice(8, -1);\r\n};\r\n\r\n/**\r\n * 判断是否为对象\r\n * @param {*object} obj \r\n */\r\nexport function isObject(obj) {\r\n    return getVarType(obj) === 'Object';\r\n}\r\n\r\n/* 检测类型是否为数组 */\r\nexport function isArray(param) {\r\n    return getVarType(param) === 'Array' || Array.isArray(param);\r\n}\r\n\r\n/* 检测类型是否为字符串 */\r\nexport function isString(param) {\r\n    return getVarType(param) === 'String';\r\n}\r\n\r\n/* 检测类型是否为方法 */\r\nexport function isFunction(param) {\r\n    return getVarType(param) === 'Function';\r\n}\r\n\r\n/* 检测类型是否为Promise对象 */\r\nexport function isPromise(param) {\r\n    return getVarType(param) === 'Promise';\r\n}\r\n\r\n/* 检测类型是否为数字 */\r\nexport function isNumber(param) {\r\n    return getVarType(param) === 'Number' && !Number.isNaN(param);\r\n}\r\n\r\n/*\r\n * @method   检测是否是需要是boolean类型\r\n */\r\nexport function isBoolean(param) {\r\n    return getVarType(param) === 'Boolean';\r\n}\r\n\r\n/*\r\n * @method   是否是undefined\r\n */\r\nexport function isUndefined(origin) {\r\n    return typeof origin === 'undefined' || origin === void 0;\r\n}\r\n\r\n/*\r\n * @method   if条件下为false   除去NaN、0、-0、false   剩余undefined、null、\"\"\r\n */\r\nexport function isWrong(param) {\r\n    return typeof param === 'undefined' || param === null || param === '';\r\n}\r\n\r\nexport function isNullOrVoid(param) {\r\n    return typeof param === 'undefined' || param === null;\r\n}\r\n\r\n/*\r\n * @method   if条件下为false   除去NaN、0、-0、false   剩余undefined、null、\"\"\r\n */\r\nexport function isWrongFalse(param) {\r\n    return typeof param === 'undefined' || param === null || param === '' || param === false;\r\n}\r\n\r\n/**\r\n * 生成唯一标识\r\n */\r\nexport function uuidv4() {\r\n    return 'xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n        var r = (getSafeRandom() * 16) | 0,\r\n            v = c == 'x' ? r : (r & 0x3) | 0x8;\r\n        return v.toString(16);\r\n    });\r\n}\r\n\r\nexport function getLists(source) {\r\n    const lists = [];\r\n\r\n    const handleLists = node => {\r\n        lists.push(node);\r\n        if (node.children) {\r\n            node.children.map((n, i) => {\r\n                handleLists(n);\r\n            });\r\n        } else {\r\n            return;\r\n        }\r\n    };\r\n\r\n    source.map(node => handleLists(node));\r\n\r\n    return lists;\r\n}\r\n\r\n//   获取最深树层级 数\r\nexport function countDeep(source) {\r\n    if (!source) return;\r\n    // 铺平数据\r\n    const lists = getLists(source);\r\n\r\n    // 找到孙子  没有自己的儿子的都是孙子  所以我要加油找女朋友\r\n    const sunLists = [];\r\n    lists.map((v, i) => {\r\n        if (!v.children || v.children.length == 0) sunLists.push(v);\r\n    });\r\n\r\n    // 现在查找孙子的层级\r\n    const count = node => {\r\n        let count = 0;\r\n        const findFather = child => {\r\n            count++;\r\n            lists.map(node => {\r\n                if (node.key === child.pid) {\r\n                    findFather(node);\r\n                } else {\r\n                    return;\r\n                }\r\n            });\r\n        };\r\n        findFather(node);\r\n        return count;\r\n    };\r\n\r\n    const saveCount = [];\r\n\r\n    sunLists.forEach(node => {\r\n        saveCount.push(count(node));\r\n    });\r\n\r\n    // 获取数组最大值 得到最深树层数\r\n    if (saveCount.length === 0) {\r\n        return 0;\r\n    } else {\r\n        return Math.max.apply(null, saveCount);\r\n    }\r\n}\r\n\r\nfunction findParentTd(el) {\r\n    while (el.parentElement) {\r\n        el = el.parentElement;\r\n        if (el.tagName === \"TD\") {\r\n            return el;\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\n/**\r\n * @desc 如果点击的是操作列，展开图标，文本夹图标就不执行选中事件。 选中文本时也不执行\r\n * @param e {object} 事件源\r\n * @param checkOnRowClick {boolean} 配置是否需要勾选功能\r\n */\r\nexport function stopCheckBoxChange(e, checkOnRowClick) {\r\n    //业务组配置不需要勾选功能\r\n    if (checkOnRowClick === false) {\r\n        return true;\r\n    }\r\n\r\n    //点击的是展开图标\r\n    if (e.target.className.includes(\"u-table-row-expand-icon\")) {\r\n        return true;\r\n    }\r\n\r\n    //点击阻止选中按钮元素（文本夹图）\r\n    if (e.target.className.includes(STOP_CHECK_ELEMENT)) {\r\n        return true;\r\n    }\r\n\r\n    //点击操作列元素\r\n    let td = findParentTd(e.target);\r\n\r\n    if (td) {\r\n        let operationContainer = td.querySelector(\r\n            `.${STOP_CHECK_OPERATION_ELEMENT}`,\r\n        );\r\n\r\n        if (operationContainer && operationContainer.contains(e.target)) {\r\n            td = operationContainer = null;\r\n            return true;\r\n        }\r\n    }\r\n\r\n    //选中文本后触发click事件\r\n    if (document.getSelection().toString()) {\r\n        return true;\r\n    }\r\n}\r\n\r\nexport function getChildren(data, parentKey) {\r\n    if (data == null || data.length == 0) return false;\r\n    let children = [];\r\n    for (var i = 0; i < data.length; i++) {\r\n        if (data[i].key == parentKey) {\r\n            return data[i].children;\r\n        } else if (Array.isArray(data[i].children) && data[i].children.length > 0) {\r\n            children = children.concat(data[i].children);\r\n        }\r\n    }\r\n    return getChildren(children, parentKey);\r\n}\r\n","/*\r\n * @Descripttion:\r\n * @version:\r\n * @Author: bbq\r\n * @Date: 2020-12-08 14:51:21\r\n * @LastEditors: bbq\r\n * @LastEditTime: 2020-12-24 15:08:59\r\n */\r\nimport { BaseStore, hookFactory } from \"@platform/template\";\r\nimport { isArray, isUndefined, isNullOrVoid, isObject, uuidv4, isFunction } from './utils';\r\nimport Form from '@platform/form';\r\n\r\nclass Store extends BaseStore {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.name = \"treeTableStore\";\r\n        this.refresh = this.refresh.bind(this);\r\n        this.uuid = this.store.uuid = uuidv4();\r\n    }\r\n\r\n    // 数据源\r\n    store = {\r\n        // 表单组件对象\r\n        formStore: Form.useForm(),\r\n        // 表格数据\r\n        data: [],\r\n\r\n        // 对象模式数据\r\n        fullDataObject: {},\r\n\r\n        // 列模板\r\n        meta: {},\r\n\r\n        // 表格属性\r\n        async: false,\r\n\r\n        rowId: 'rowId',\r\n\r\n        // 是否子\r\n        isCheckedHasChild: false,\r\n\r\n        // 展开项\r\n        expandedKeys: [],\r\n\r\n        // 选中项\r\n        checkedKeys: {},\r\n        // 半选\r\n        indeterminateKeys: {},\r\n\r\n        currentSelectedRow: null,\r\n        currentRow: null,\r\n\r\n        // 弹窗类型\r\n        modalType: null,\r\n\r\n        // 折行\r\n        isEllipsis: true,\r\n\r\n        // 搜索结果\r\n        searchValue: '',\r\n    };\r\n\r\n    // 缓存\r\n    cache = {\r\n        cacheData: [],\r\n        langJson: {},\r\n    };\r\n\r\n    /**\r\n     * @description: 复写\r\n     * @param {type}\r\n     * @return:\r\n     */\r\n    getStore(paths) {\r\n        return super.get(paths);\r\n    }\r\n\r\n    /**\r\n     * @description: 复写\r\n     * @param {type}\r\n     * @return:\r\n     */\r\n    setStore(paths, value, shouldForceUpdate = true, callback) {\r\n        let res = super.set(paths, value);\r\n        shouldForceUpdate && this.forceUpdate(callback);\r\n        return res;\r\n    }\r\n\r\n    /*-------------缓存-------------*/\r\n\r\n    /**\r\n     * @description: 设置缓存\r\n     * @param {type}\r\n     * @return:\r\n     */\r\n    setCache(path, value) {\r\n        if (!path) {\r\n            console.warn(\"invalid params <path> to setting\");\r\n            return;\r\n        }\r\n        if (!isArray(path)) {\r\n            path = [path];\r\n        }\r\n        let current = this.cache;\r\n        let len = path.length;\r\n        path.forEach((item, index) => {\r\n            if (!current[item]) {\r\n                current[item] = {};\r\n            }\r\n            if (index === len - 1) {\r\n                current[item] = value;\r\n            } else {\r\n                current = current[item];\r\n            }\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @description: 获取缓存\r\n     * @param {type}\r\n     * @return:\r\n     */\r\n    getCache(paths) {\r\n        if (isUndefined(paths)) {\r\n            console.warn(\"invalid params <paths> to setting\");\r\n            return;\r\n        }\r\n        if (!isArray(paths)) {\r\n            paths = [paths];\r\n        }\r\n        let current = this.cache;\r\n        paths.some(item => {\r\n            if (isUndefined(item) || isNullOrVoid(current)) {\r\n                isUndefined(item) &&\r\n                    console.warn(\"paths has empty item[%s]\", paths);\r\n                return;\r\n            }\r\n            if (!current[item]) {\r\n                current = null;\r\n                return;\r\n            }\r\n            current = current[item];\r\n            return true;\r\n        });\r\n        // console.log(this.cache);\r\n        return current;\r\n    }\r\n\r\n    /*-------------私有-------------*/\r\n\r\n    /*-------------列-------------*/\r\n    /**\r\n     * @description: 设置所有meta\r\n     * @param {type}\r\n     * @return:\r\n     */\r\n    setMeta(meta, id, shouldForceUpdate = true) {\r\n        let name = this.getStore(\"name\");\r\n        id && this.setStore(\"name\", id || name, false);\r\n\r\n        // 我觉得这里应该 考虑page上的meta更新\r\n        this.setStore(\"meta\", meta, shouldForceUpdate);\r\n\r\n        // 更新表单的meta\r\n        let formStore = this.getStore('formStore');\r\n        if (formStore && meta[id] && isArray(meta[id].items)) {\r\n            let formColumns = [];\r\n            meta[id].items.map(item => {\r\n                if (item.itemtype !== 'customer') {\r\n                    // item 内部东西太复杂 直接给会导致一些问题\r\n                    let nItem = JSON.parse(\r\n                        JSON.stringify(item || {}, (key, value) => {\r\n                            if (key == 'render' || key == 'title') {\r\n                                // title 和 value 是react对象  会导致问题\r\n                                return undefined;\r\n                            }\r\n                            return value;\r\n                        }),\r\n                    );\r\n                    delete nItem.render;\r\n                    delete nItem.title;\r\n                    formColumns.push(nItem);\r\n                }\r\n            });\r\n\r\n            console.log(formColumns);\r\n\r\n            formStore.setMeta({\r\n                [this.uuid]: {\r\n                    status: 'edit',\r\n                    items: formColumns,\r\n                    moduletype: \"form\",\r\n                    isunfold: false,\r\n                },\r\n            }, this.uuid);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * @description: 获取所有meta\r\n     * @param {type}\r\n     * @return:\r\n     */\r\n    getMeta = () => {\r\n        let meta = this.getStore(\"meta\");\r\n        return meta;\r\n    };\r\n\r\n    /**\r\n     * @description: 是否包含当前meta\r\n     * @param {type}\r\n     * @return:\r\n     */\r\n    _hasMeta(id) {\r\n        let meta = this.getStore(\"meta\") || {};\r\n        if (!id || !isObject(meta[id]) || !meta[id].items) {\r\n            console.warn('not find meta');\r\n            return [];\r\n        }\r\n        return meta[id].items;\r\n    }\r\n\r\n    /**\r\n     * @description: 获取id所在视图的meta\r\n     * @param {type}\r\n     * @return:\r\n     */\r\n    getViewMeta(id) {\r\n        let viewMeta = this._hasMeta(id);\r\n        return viewMeta;\r\n    }\r\n\r\n    /**\r\n     * @description: 设置数据\r\n     * @param {type}\r\n     * @return:\r\n     */\r\n    setData({ data = [], shouldForceUpdate = true, callback }) {\r\n        let res = isArray(data) ? data : this.getData();\r\n        // console.log(res);\r\n        // 格式化data\r\n        this.setStore([\"data\"], res, shouldForceUpdate, callback);\r\n    }\r\n\r\n    /**\r\n     * regexp 可以是方法 也可以是参数\r\n     * @description: 获取数据\r\n     * @param {type}\r\n     * @return:\r\n     */\r\n    // @infoLog\r\n    getData(regexp = []) {\r\n        let data = this.getStore(\"data\");\r\n        // console.log(data);\r\n        // 添加规则什么的  比如删除 \r\n\r\n        data = data.filter(item => {\r\n            return !regexp.includes(item.status);\r\n        });\r\n        return data || [];\r\n    }\r\n\r\n    // 刷新整个绑定对象\r\n    refresh(callback) {\r\n        this.forceUpdate && this.forceUpdate(callback);\r\n    }\r\n\r\n    getHooks = () => {\r\n        // 这样处理的一下 才能报错  方法内部的this 永远指向 实例  否则会指向下面的 {} 对象\r\n        this.getMeta = this.getMeta.bind(this);\r\n        this.setMeta = this.setMeta.bind(this);\r\n        return {\r\n            // 按路径索引 给内部使用\r\n            getStore: this.getStore.bind(this),\r\n            setStore: this.setStore.bind(this),\r\n            /*-------------------上面的部分------------------*/\r\n            //模板\r\n            getMeta: this.getMeta.bind(this),\r\n            setMeta: this.setMeta.bind(this),\r\n            getViewMeta: this.getViewMeta.bind(this),\r\n\r\n            // 缓存\r\n            getCache: this.getCache.bind(this),\r\n            setCache: this.setCache.bind(this),\r\n\r\n            //\r\n            setData: this.setData.bind(this),\r\n            getData: this.getData.bind(this),\r\n\r\n            // 刷新\r\n            refresh: this.refresh,\r\n        };\r\n    }\r\n}\r\n\r\nexport default hookFactory(Store);","/*\r\n * @Descripttion:树状表组件\r\n * @version:\r\n * @Author: bbq\r\n * @Date: 2020-12-07 17:01:56\r\n * @LastEditors: bbq\r\n * @LastEditTime: 2021-02-26 14:01:42\r\n */\r\nimport React, { Fragment } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport classnames from 'classnames';\r\nimport { Table, Checkbox, Selectable as NCSelectable } from '@platform/base';\r\nimport { isUndefined, isFunction, isArray, getLangCode, getMultiLang, getSysFieldid, pageTo, changeTime, formatDatetime } from '@platform/api';\r\nimport Cell from './Cell';\r\nimport { STOP_CHECK_ELEMENT, STOP_CHECK_OPERATION_ELEMENT } from './containers';\r\nimport { BaseComponent } from '@platform/template';\r\nimport Form from '@platform/form';\r\nimport { getChildren, stopCheckBoxChange, countDeep, getLists } from './utils';\r\nimport useTreeTable from './store';\r\nrequire('./treeTableManyCol.less');\r\n\r\nconst defaultColor = ['#111111', '#555555', '#111', '#555'];\r\n\r\nclass TreeTable extends BaseComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            langJson: {},\r\n            _: '',\r\n        };\r\n        const { store, id, isCheckedHasChild, async } = props;\r\n        store.setStore('name', id, false);\r\n        // 表单\r\n        this.uuid = store.getStore('uuid');\r\n\r\n        // 计算主表表体高度\r\n        let tableHeight = 0;\r\n        const screenHeight = window.screen.width;\r\n        if (screenHeight <= 1919 > 1440) {\r\n            tableHeight = 48 * 10 + 'px';\r\n        } else if (screenHeight > 1919) {\r\n            tableHeight = 56 * 10 + 'px';\r\n        } else {\r\n            tableHeight = 40 * 10 + 'px';\r\n        }\r\n        store.setStore('tableHeight', tableHeight, false);\r\n\r\n        store.setStore('isCheckedHasChild', isCheckedHasChild, false);\r\n        store.setStore('async', async, false);\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n    }\r\n\r\n    UNSAFE_componentWillMount() {\r\n        const { store } = this.props;\r\n        const { setCache } = store;\r\n        //加载多语\r\n        const callback = json => {\r\n            // this.setState({ json });\r\n            setCache('langJson', json || {});\r\n            this.setState({ langJson: json });\r\n        };\r\n        getMultiLang({ moduleId: \"containers_insert_tree_table\", callback });\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        const { store, isCheckedHasChild, async } = nextProps;\r\n        isUndefined(isCheckedHasChild) && store.setStore('isCheckedHasChild', isCheckedHasChild, false);\r\n        store.setStore('async', async, false);\r\n    }\r\n\r\n    componentWillUnMount() {\r\n    }\r\n\r\n    /* setState */\r\n    setStateEve = () => {\r\n        this.forceUpdate();\r\n    };\r\n\r\n    // 查找数据类型，并返回\r\n    checkDataType = field => {\r\n        const { store, id } = this.props;\r\n        const meta = store.getMeta();\r\n        const columns = meta[id];\r\n        let data = columns.items.find(item => item.attrcode === field);\r\n        if (data) {\r\n            return data.itemtype;\r\n        }\r\n    };\r\n\r\n    //  处理数据格式\r\n    createNewData = (data, fullDataObject = {}, childKeyRecord = []) => {\r\n        const dataSource = data.map((item, index) => {\r\n            item.key = item.rowId;\r\n            // 记录一下行顺序给 框选使用\r\n            item.rowIndex = index;\r\n            fullDataObject[item.key] = fullDataObject[item.key] || {};\r\n\r\n            if (item.values.pid) {\r\n                item.pid = item.values.pid.value;\r\n            }\r\n            if (Array.isArray(item.children)) {\r\n                let childrenKeys = [];\r\n                this.createNewData(item.children, fullDataObject, childrenKeys);\r\n                fullDataObject[item.key].childrenKeys = childrenKeys;\r\n            }\r\n            fullDataObject[item.key].item = item;\r\n            // 取值给父级\r\n            childKeyRecord.push(item.key);\r\n            return item;\r\n        });\r\n        return dataSource;\r\n    };\r\n\r\n    /* 复选框change事件(多选) */\r\n    itemCheckBoxChange = (data, key) => {\r\n        let { store, showContextMenu } = this.props;\r\n        let checkedKeys = store.getStore('checkedKeys');\r\n        let indeterminateKeys = store.getStore('indeterminateKeys');\r\n        checkedKeys[key] = !checkedKeys[key];\r\n        let isCheckedHasChild = store.getStore('isCheckedHasChild');\r\n\r\n        function setChecked(children) {\r\n            if (Array.isArray(children)) {\r\n                children.forEach(item => {\r\n                    checkedKeys[item.key] = checkedKeys[key];\r\n                    if (Array.isArray(item.children)) {\r\n                        setChecked(item.children);\r\n                    }\r\n                })\r\n            }\r\n        }\r\n\r\n        //包含下级时，全部选中\r\n        if (isCheckedHasChild && showContextMenu) {\r\n            let children = getChildren(data, key);\r\n            console.log(\"设置children选中:  children\", children)\r\n            setChecked(children);\r\n        }\r\n\r\n        //只有在勾选下级选中情况下才会设置半选状态\r\n        if (isCheckedHasChild) {\r\n            //设置半选状态\r\n            indeterminateKeys[key] = false;\r\n            const fullDataObject = store.getStore('fullDataObject') || {};\r\n            let pid = fullDataObject[key] && fullDataObject[key].item.pid;\r\n            function setPidCheckedStatus(pid) {\r\n                function getAllChilrenList() {\r\n                    let children = getChildren([fullDataObject[pid].item], pid);\r\n                    let treeToList = getLists(children);\r\n                    return treeToList;\r\n                }\r\n\r\n                let allChilrenList = getAllChilrenList();\r\n                let allLength = allChilrenList.length;\r\n                let checkedLength = allChilrenList.filter(x => checkedKeys[x.key]).length;\r\n                if (allLength === checkedLength) {\r\n                    checkedKeys[pid] = true;\r\n                    indeterminateKeys[pid] = false;\r\n                } else if (checkedLength) {\r\n                    checkedKeys[pid] = false;\r\n                    indeterminateKeys[pid] = true;\r\n                } else {\r\n                    checkedKeys[pid] = false;\r\n                    indeterminateKeys[pid] = false;\r\n                }\r\n            }\r\n            while (pid) {\r\n                //indeterminateKeys[pid] = true;\r\n                if (fullDataObject[pid] && fullDataObject[pid].item) {\r\n                    setPidCheckedStatus(pid);\r\n                }\r\n                pid = fullDataObject[pid] && fullDataObject[pid].item && fullDataObject[pid].item.pid;\r\n            }\r\n            /*  let OriginFullDataObj = {...fullDataObject};\r\n            delete OriginFullDataObj[\"all\"];\r\n            let OriginCheckedKeys = {...checkedKeys};\r\n            delete OriginCheckedKeys[\"all\"];\r\n            let allKeysCount = Object.keys(OriginFullDataObj).length;\r\n            let checkedCount = Object.values(OriginCheckedKeys).filter(x=>x).length;\r\n            if(allKeysCount === checkedCount){\r\n                checkedKeys[\"all\"] = true;\r\n                indeterminateKeys[\"all\"] = false;\r\n            }else if(checkedCount){\r\n                checkedKeys[\"all\"] = false;\r\n                indeterminateKeys[\"all\"] = true;\r\n            }else{\r\n                checkedKeys[\"all\"] = false;\r\n                indeterminateKeys[\"all\"] = false;\r\n            } */\r\n        }\r\n\r\n        store.setStore('checkedKeys', checkedKeys, false);\r\n        store.setStore('indeterminateKeys', indeterminateKeys, true);\r\n    };\r\n\r\n    /* 全选按钮change事件 */\r\n    selectAllChange = checked => {\r\n        /*  let { store } = this.props;\r\n        const fullDataObject = store.getStore('fullDataObject') || {};\r\n        let checkedKeys = store.getStore('checkedKeys');\r\n        let indeterminateKeys = store.getStore('indeterminateKeys');\r\n        let allKeys = Object.keys(fullDataObject);\r\n        checkedKeys[\"all\"] = checked;\r\n        indeterminateKeys[\"all\"] = false;\r\n        for (let key of allKeys) {\r\n            checkedKeys[key] = checked;\r\n            indeterminateKeys[key] = false;\r\n        }\r\n        store.setStore('checkedKeys', checkedKeys, false);\r\n        store.setStore('indeterminateKeys', indeterminateKeys, true); */\r\n    }\r\n\r\n    /* 复选框change事件(单选) */\r\n    checkBoxChange_radio = (data, key) => {\r\n        let { store } = this.props;\r\n        let checkedKeys = store.getStore('checkedKeys');\r\n\r\n        if (checkedKeys[key]) {\r\n            checkedKeys = {};\r\n        } else {\r\n            checkedKeys = { [key]: true };\r\n        }\r\n        store.setStore('checkedKeys', checkedKeys, false);\r\n    };\r\n\r\n    /* 复选框选中事件 */\r\n    onCheckboxChangeChild = (text, record, index, e) => {\r\n        let { store, checkboxChange, checkedType } = this.props;\r\n        let data = store.getData();\r\n\r\n        e.stopPropagation();\r\n        if (checkedType === 'radio') {\r\n            //单选\r\n            this.checkBoxChange_radio(data, record.key);\r\n        } else {\r\n            //多选\r\n            this.itemCheckBoxChange(data, record.key);\r\n        }\r\n\r\n        if (isFunction(checkboxChange)) {\r\n            checkboxChange(record, index, e);\r\n        }\r\n\r\n        // 更新\r\n        this.forceUpdate();\r\n    };\r\n\r\n    /* 查找对应的行数据 */\r\n    findItem = (data, key) => {\r\n        let res = null;\r\n        let f = data => {\r\n            data.map(item => {\r\n                if (item.rowId === key) {\r\n                    res = item;\r\n                    return true;\r\n                } else if (Array.isArray(item.values.children)) {\r\n                    let r = f(item.values.children);\r\n                    if (r) {\r\n                        return false;\r\n                    }\r\n                }\r\n            });\r\n        };\r\n        f(data);\r\n        return res;\r\n    };\r\n\r\n    // 处理模板\r\n    createNewCol = (data, maxDeep) => {\r\n        let { showCheckBox, onCellMouseDown, store, multipleRowCell } = this.props;\r\n        let { langJson } = this.state;\r\n        let expandedKeys = store.getStore('expandedKeys');\r\n        let checkedKeys = store.getStore('checkedKeys');\r\n        let indeterminateKeys = store.getStore('indeterminateKeys');\r\n        let oldSearchValue = store.getStore('searchValue');\r\n        const multiYes = langJson && langJson['insert-tree-table-009'];\r\n        const multiNo = langJson && langJson['insert-tree-table-010'];\r\n        let newArr = [];\r\n\r\n        if (!isArray(data) || data.length < 1) {\r\n            return [];\r\n        }\r\n\r\n        data.forEach(item => {\r\n            if (item.visible) {\r\n                item._width = item._width || item.width || 120;\r\n                item.width = item.width || 120;\r\n                item.title = (\r\n                    <span\r\n                        fieldid={getSysFieldid(item.attrcode || 'opr')}\r\n                        style={{ color: defaultColor.includes(item.color) ? '' : item.color }}\r\n                    >\r\n                        {' '}\r\n                        {item.label}{' '}\r\n                    </span>\r\n                );\r\n                item.dataIndex = item.attrcode;\r\n                if (item.itemtype !== 'customer' && item.itemtype !== 'numberindex') {\r\n                    if (!item.hasOwnProperty('render')) {\r\n                        item.render = (text, record, index) => {\r\n                            if (record && record.values.hasOwnProperty(item.attrcode)) {\r\n                                if (item.itemtype === 'switch') {\r\n                                    return (\r\n                                        <span fieldid={getSysFieldid(item.attrcode)}\r\n                                            onMouseDown={e => {\r\n                                                onCellMouseDown && onCellMouseDown(record, index, item.attrcode, item, e);\r\n                                            }}\r\n                                        >\r\n                                            {record.values[item.attrcode].value ? multiYes : multiNo}\r\n                                        </span>\r\n                                    );\r\n                                } else {\r\n                                    let langIndex;\r\n                                    let langAttrCode;\r\n                                    let context = '';\r\n                                    if (item.itemtype === 'residtxt') {\r\n                                        let LangCode = getLangCode();\r\n                                        let loginLang = item.languageMeta.filter(i => i.languageCode == LangCode);\r\n                                        if (loginLang[0]) {\r\n                                            langIndex = loginLang[0].index == '1' ? '' : loginLang[0].index;\r\n                                            langAttrCode = item.attrcode + langIndex;\r\n                                        }\r\n                                    }\r\n\r\n                                    if (\r\n                                        langAttrCode && record.values[langAttrCode] &&\r\n                                        (record.values[langAttrCode].display || record.values[langAttrCode].value)\r\n                                    ) {\r\n                                        context =\r\n                                            record.values[langAttrCode].display ||\r\n                                            record.values[langAttrCode].value ||\r\n                                            '';\r\n                                    } else {\r\n                                        context =\r\n                                            record.values[item.attrcode].display ||\r\n                                            record.values[item.attrcode].value ||\r\n                                            '';\r\n                                    }\r\n\r\n                                     //格式化时间格式\r\n                                     switch (item.itemtype) {\r\n                                        case 'datetimepicker':\r\n                                        case 'NCTZDatePickClientTime':\r\n                                            context = changeTime(context , 'YYYY-MM-DD HH:mm:ss');\r\n                                            break;\r\n                                        case 'NCTZDatePickerStart':\r\n                                        case 'NCTZDatePickerEnd':\r\n                                        case 'NCTZDatePickClientHourTime':\r\n                                        case 'datepicker':\r\n                                            context = changeTime(context , 'YYYY-MM-DD');\r\n                                            break;\r\n                                    }\r\n                                    switch (item.itemtype) {\r\n                                        case 'NCTZDatePickerStart':\r\n                                        case 'NCTZDatePickerEnd':\r\n                                        case 'NCTZDatePickClientHourTime':\r\n                                        case 'datePickerNoTimeZone':\r\n                                        case 'datepicker':\r\n                                            context = formatDatetime(context, 'date');\r\n                                            break;\r\n                                        case 'timepicker':\r\n                                            context = formatDatetime(context, 'time');\r\n                                            break;\r\n                                        case 'datetimepicker':\r\n                                        case 'NCTZDatePickClientTime':\r\n                                            context = formatDatetime(context, 'datetime');\r\n                                            break;\r\n                                    }\r\n\r\n\r\n                                    const fixedStyle = { display: '' };\r\n\r\n                                    if (item.fixed && item.fixed === 'left') {\r\n                                        if (item.width) {\r\n                                            let width = String(item.width).replace('px', '');\r\n                                            if (width != '120' && showCheckBox) {\r\n                                                fixedStyle.width = item.width;\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                    if (typeof context != 'string') {\r\n                                        context += '';\r\n                                    }\r\n                                    // 添加高亮 by bbqin\r\n                                    let searchValue = oldSearchValue || '';\r\n                                    const searchValueLow = searchValue.toLocaleLowerCase();\r\n                                    const contextLow = context.toLocaleLowerCase();\r\n                                    let beforeStr = '';\r\n                                    let afterStr = context;\r\n                                    const index = contextLow.indexOf(searchValueLow);\r\n                                    if (searchValue && index !== -1) {\r\n                                        beforeStr = context.substr(0, index);\r\n                                        afterStr = context.substr(index + searchValue.length);\r\n                                        searchValue = context.substr(index, searchValue.length);\r\n                                    }\r\n                                    let isEllipsis = this.props.store.getStore('isEllipsis');\r\n                                    return (\r\n                                        <Cell\r\n                                            item={item}\r\n                                            beforeStr={beforeStr}\r\n                                            afterStr={afterStr}\r\n                                            searchValue={searchValue}\r\n                                            fixedStyle={fixedStyle}\r\n                                            context={context}\r\n                                            isEllipsis={isEllipsis}\r\n                                            multipleRowCell={multipleRowCell}\r\n                                            index={index}\r\n                                            record={record}\r\n                                            onCellMouseDown={onCellMouseDown}\r\n                                        />\r\n                                    );\r\n                                }\r\n                            } else {\r\n                                return <span\r\n                                    style={{\r\n                                        width: '100%',\r\n                                        height: '100%',\r\n                                        display: 'inline-block',\r\n                                    }}\r\n                                    onMouseDown={e => {\r\n                                        onCellMouseDown && onCellMouseDown(record, index, item.attrcode, item, e);\r\n                                    }}\r\n                                ></span>;\r\n                            }\r\n                        };\r\n                    }\r\n                } else if (\r\n                    item.itemtype === 'customer' &&\r\n                    item.hasOwnProperty('render') &&\r\n                    item.alreadyAssignment === undefined\r\n                ) {\r\n                    let Irender = item.render;\r\n                    item.alreadyAssignment = true;\r\n                    item.render = (text, record, index) => {\r\n                        return (\r\n                            <span fieldid={getSysFieldid('opr')} className={STOP_CHECK_OPERATION_ELEMENT}\r\n                                onMouseDown={e => {\r\n                                    onCellMouseDown && onCellMouseDown(record, index, item.attrcode, item, e);\r\n                                }}\r\n                            >\r\n                                {Irender(text, record, index)}\r\n                            </span>\r\n                        );\r\n                    };\r\n                }\r\n                newArr.push(item);\r\n            }\r\n        });\r\n        let defaultColumns = [\r\n            {\r\n                title: <span fieldid={getSysFieldid('firstcol')} />,\r\n                /*   title: showCheckBox ? (<Checkbox className=\"table-checkbox\" fieldid={getSysFieldid('firstcol')}\r\n                    onChange={this.selectAllChange} checked={checkedKeys[\"all\"]}\r\n                    indeterminate={indeterminateKeys[\"all\"]} />) : <span fieldid={getSysFieldid('firstcol')} />, */\r\n                attrcode: 'checkbox',\r\n                dataIndex: 'checkbox',\r\n                itemtype: 'customer',\r\n                width: '100px',\r\n                _width: '100px',\r\n                render: (text, record, index) => {\r\n                    // console.log(record, index);\r\n                    if (showCheckBox) {\r\n                        return (\r\n                            <Checkbox\r\n                                onMouseDown={e => {\r\n                                    onCellMouseDown && onCellMouseDown(record, index, 'checkbox', {\r\n                                        attrcode: 'checkbox',\r\n                                        itemtype: 'customer',\r\n                                    }, e);\r\n                                }}\r\n                                className=\"table-checkbox\"\r\n                                checked={checkedKeys[record.key]}\r\n                                indeterminate={indeterminateKeys[record.key]}\r\n                                onClick={this.onCheckboxChangeChild.bind(this, text, record, index)}\r\n                            />\r\n                        );\r\n                    }\r\n                },\r\n            },\r\n        ];\r\n\r\n        if (newArr[0].fixed && newArr[0].fixed == 'left') {\r\n            defaultColumns[0].fixed = 'left';\r\n        }\r\n\r\n        let resArr = showCheckBox ? defaultColumns.concat(newArr) : newArr;\r\n        // 给第一行增加图标\r\n        const oldFirstColRender = resArr[0].render;\r\n        resArr[0].render = null;\r\n        resArr[0].render = (text, record, index) => {\r\n            let expendSwich;\r\n            if ((Object.prototype.toString.call(record.isLeaf) == '[object Boolean]' && !record.isLeaf) ||\r\n                (Object.prototype.toString.call(record.isleaf) == '[object Boolean]' && !record.isleaf)) {\r\n                expendSwich = expandedKeys.includes(record.key) ? (\r\n                    <i\r\n                        className={`icon iconfont  icon-wenjianjiadakai tree-wenjian treeTableIcon ${STOP_CHECK_ELEMENT}`}\r\n                    />\r\n                ) : (<i className={`icon iconfont  icon-wenjianjia tree-wenjian treeTableIcon ${STOP_CHECK_ELEMENT}`} />);\r\n            } else {\r\n                expendSwich = <i className=\"dian\" style={{ display: 'none' }} />;\r\n            }\r\n            const res = oldFirstColRender(text, record, index);\r\n\r\n            if (\r\n                res &&\r\n                res.props &&\r\n                res.props.children &&\r\n                res.props.children[0] &&\r\n                res.props.children[0].props &&\r\n                res.props.children[0].props.className === 'expend-switch'\r\n            ) {\r\n                return res;\r\n            }\r\n\r\n            if (res && res.props && res.props.className === 'table-checkbox') {\r\n                return (\r\n                    <span fieldid={getSysFieldid('firstcol')}\r\n                        onMouseDown={e => {\r\n                            onCellMouseDown && onCellMouseDown(record, index, 'checkbox', {\r\n                                attrcode: 'checkbox',\r\n                                itemtype: 'customer',\r\n                            }, e);\r\n                        }}\r\n                    >\r\n                        <span className=\"first-col\">{res}</span>\r\n                        <span className=\"expend-switch\">{expendSwich}</span>\r\n                    </span>\r\n                );\r\n            }\r\n\r\n            return (\r\n                <span\r\n                    fieldid={getSysFieldid('firstcol')}\r\n                    onMouseDown={e => {\r\n                        onCellMouseDown && onCellMouseDown(record, index, 'checkbox', {\r\n                            attrcode: 'checkbox',\r\n                            itemtype: 'customer',\r\n                        }, e);\r\n                    }}\r\n\r\n                    className={\r\n                        classnames({ zaiyihang: showCheckBox })\r\n                    }\r\n                >\r\n                    <span className=\"expend-switch\">{expendSwich}</span>\r\n                    <span className=\"first-col\">{res}</span>\r\n                </span >\r\n            );\r\n        };\r\n\r\n        // 给第一列追加宽度\r\n        let width = resArr[0]._width;\r\n        if (width) {\r\n            if (typeof width === 'string') {\r\n                if (width.includes('px')) {\r\n                    width = width.replace('px', '');\r\n                }\r\n                width = Number(width);\r\n            }\r\n            width += countDeep(maxDeep) * 16;\r\n        }\r\n        resArr[0].width = width;\r\n        return resArr;\r\n    };\r\n\r\n    //\t展开行\r\n    onExpand = (status, item, e) => {\r\n        let { store, expandEve, collapandEve } = this.props;\r\n        let isCheckedHasChild = store.getStore('isCheckedHasChild')\r\n        if (status) {\r\n            if (expandEve && typeof expandEve === 'function') {\r\n                store.setStore('currentRow', item, false);\r\n                expandEve(item, isCheckedHasChild);\r\n            }\r\n        } else {\r\n            if (isFunction(collapandEve)) {\r\n                collapandEve(item);\r\n            }\r\n        }\r\n        // 更新\r\n        this.forceUpdate();\r\n    };\r\n\r\n    // 新增节点弹出框内容\r\n    modalContent = () => {\r\n        const { store, onAfterEvent, onBeforeEvent } = this.props;\r\n        let formStore = store.getStore('formStore');\r\n        // console.log(this.uuid);\r\n\r\n        return (\r\n            <div className=\"addModal\">\r\n                <Form\r\n                    name={this.uuid}\r\n                    config={{\r\n                        onAfterEvent,\r\n                        onBeforeEvent,\r\n                    }}\r\n                    store={formStore}\r\n                />\r\n            </div>\r\n        );\r\n    };\r\n\r\n    // 删除 事件回调\r\n    delNodeEve = () => {\r\n        let { delNodeCallBack } = this.props;\r\n        if (isFunction(delNodeCallBack)) {\r\n            delNodeCallBack(this.uuid);\r\n        }\r\n    };\r\n\r\n    // 模态框确定按钮事件\r\n    beSureBtnClick = () => {\r\n        let { modal, store, addNodeCallBack, editNodeCallBack } = this.props;\r\n        let modalType = store.getStore('modalType');\r\n        let currentRow = store.getStore('currentRow');\r\n        let formStore = store.getStore('formStore');\r\n        let isValid = formStore.isCheckNow();\r\n        // console.log(isValid); TODO\r\n        if (!isValid) {\r\n            return false;\r\n        }\r\n        let data = { values: JSON.parse(JSON.stringify(formStore.getAllFormValue())) };\r\n        if (modalType === 'add') {\r\n            data.status = 2;\r\n            if (isFunction(addNodeCallBack)) {\r\n                addNodeCallBack(data, currentRow);\r\n            }\r\n        } else if (modalType === 'edit') {\r\n            if (isFunction(editNodeCallBack)) {\r\n                editNodeCallBack(data, currentRow);\r\n            }\r\n        }\r\n        modal.close('treeTableManyColModal');\r\n    };\r\n\r\n    // 双击行\r\n    onRowDoubleClick = (record, index, event) => {\r\n        let { ncOnRowDoubleClick } = this.props;\r\n        if (isFunction(ncOnRowDoubleClick)) {\r\n            ncOnRowDoubleClick(record, index, event);\r\n        }\r\n    };\r\n\r\n    // 单击行\r\n    onRowClick = (row, index, e) => {\r\n        let { store, checkOnRowClick, showCheckBox, onRowClickEve } = this.props;\r\n        store.setStore('currentSelectedRow', row, false);\r\n        // 为了避免和新开发的行框选点选区域选事件冲突\r\n        if (e.ctrlKey || e.shiftKey || e.metaKey) {\r\n            return;\r\n        }\r\n        if (showCheckBox && stopCheckBoxChange(e, checkOnRowClick)) return;\r\n        if (isFunction(onRowClickEve)) {\r\n            onRowClickEve(row, index, e);\r\n        }\r\n        this.onCheckboxChangeChild(null, row, index, e);\r\n    };\r\n\r\n    // 行样式\r\n    rowClassName = (record, current) => {\r\n        let { store } = this.props;\r\n        let currentSelectedRow = store.getStore('currentSelectedRow');\r\n        if (currentSelectedRow && currentSelectedRow.key == record.key) {\r\n            return 'tree-table-col-selected';\r\n        } else {\r\n            return '';\r\n        }\r\n\r\n    };\r\n\r\n    // 菜单\r\n    createContextMenu = () => {\r\n        let { store, closeAllEve, hideExpandAll, expandAllEve, hideIncludeChild, extendRightMenu } = this.props;\r\n        let { langJson } = this.state;\r\n        let data = store.getData();\r\n        let isCheckedHasChild = store.getStore('isCheckedHasChild');\r\n\r\n        return <Fragment>\r\n            {\r\n                !hideExpandAll && <li\r\n                    className={\r\n                        classnames({ 'menu expand-all': true })\r\n                    }\r\n                    onClick={() => {\r\n                        let expandedKeys = [];\r\n                        function getAllExpandKeys(data) {\r\n                            data.forEach(item => {\r\n                                expandedKeys.push(item.key);\r\n                                if (Array.isArray(item.children)) {\r\n                                    getAllExpandKeys(item.children);\r\n                                }\r\n                            })\r\n                        }\r\n                        getAllExpandKeys(data)\r\n\r\n                        // 带更新\r\n                        store.setStore('expandedKeys', expandedKeys);\r\n\r\n                        //若为异步，调用业务全部展开回调\r\n                        isFunction(expandAllEve) && expandAllEve()\r\n                    }}\r\n                >\r\n                    {langJson['insert-tree-table-0013'] || '全部展开'}\r\n                </li>\r\n            }\r\n            <li\r\n                className={\r\n                    classnames({ 'menu close-all': true })\r\n                }\r\n                onClick={() => {\r\n                    // 更新\r\n                    store.setStore('expandedKeys', []);\r\n                    //业务全部收起的回调\r\n                    isFunction(closeAllEve) && closeAllEve();\r\n                }}\r\n            >\r\n                {langJson['insert-tree-table-0014'] || '全部收起'}\r\n            </li>\r\n\r\n            {\r\n                !hideIncludeChild && <li\r\n                    className={\r\n                        classnames({ 'menu include-child': true })\r\n                    }\r\n                    onClick={() => {\r\n                        // 带更新\r\n                        store.setStore('isCheckedHasChild', !isCheckedHasChild);\r\n                    }}\r\n                >\r\n                    <Checkbox\r\n                        className={'include-child-checkbox'}\r\n                        checked={isCheckedHasChild}\r\n                        onChange={() => {\r\n                            store.setStore('isCheckedHasChild', !isCheckedHasChild);\r\n                        }}\r\n                    />\r\n                    <span className={\r\n                        classnames({ 'include-child-selected': isCheckedHasChild })\r\n                    }> {langJson['insert-tree-table-0015'] || '包含下级'}</span>\r\n                </li>\r\n            }\r\n\r\n            {isFunction(extendRightMenu) && extendRightMenu()}\r\n        </Fragment>\r\n    }\r\n\r\n    getColSetConfig = () => { //---by liuxis 鼠标不做列设置\r\n        let { id, store } = this.props\r\n        const { getMeta } = store;\r\n        let meta = getMeta();\r\n        const appcode = meta.appcode || meta.code || pageTo.getAppCode();\r\n        const pagecode = meta.pagecode || pageTo.getPageCode();\r\n        const areaCode = id;\r\n        // return { appcode: '1', pagecode: '2', areaCode: '3' };\r\n        return { appcode, pagecode, areaCode };\r\n    };\r\n    render() {\r\n        let {\r\n            modal,\r\n            id,\r\n            store,\r\n            showCheckBox = false, // 是否需要复选框   默认false不显示\r\n            checkedType = 'checkbox', //勾选方式  多选/单选  checkbox/radio\r\n            checkboxChange,\r\n            scrollConfig,\r\n            isDrag = true,\r\n            adaptionHeight = true, //高度是否自适应\r\n            otherAreaHeight,\r\n            inModal = false,\r\n            fieldid,\r\n            isLazyload = true,\r\n            addBlankCol = true,\r\n            showContextMenu = false,\r\n            extendRightMenu,\r\n            showWidthAndHeightConfig = true,\r\n        } = this.props;\r\n\r\n        let { langJson } = this.state;\r\n\r\n        const { getStore, getViewMeta, getData, setStore } = store;\r\n        // 模板\r\n        let columns = getViewMeta(id);\r\n\r\n        // 全数据对象\r\n        let fullDataObject = {};\r\n        // 数据   this.createNewDataRes\r\n        let data = getData();\r\n\r\n        if (!columns || columns.length === 0 || !data) {\r\n            // 没有列模板就不渲染  避免特殊情况导致 操作列等列显示展开符号\r\n            return null;\r\n        }\r\n\r\n        let treeData = this.createNewData(data, fullDataObject);\r\n        // 记录下给 checkbox 渲染用 用于渲染checkbox 父子集关系\r\n        // console.log(fullDataObject);\r\n        store.setStore('fullDataObject', fullDataObject, false);\r\n        // 最大深度\r\n        const maxDeep = JSON.parse(JSON.stringify(treeData));\r\n        // 展开项\r\n        let expandedKeys = getStore('expandedKeys');\r\n        // 表格高度\r\n        let tableHeight = getStore('tableHeight');\r\n\r\n        // console.log(store, columns);\r\n\r\n        return (\r\n            <div id={id} className=\"treeTableManyCol\" fieldid={getSysFieldid(`${fieldid || id}_table`)}>\r\n                {showCheckBox && checkedType !== 'radio' && (\r\n                    <NCSelectable\r\n                        canvas={`#${id}`}\r\n                        // 注意可以加下前后空格\r\n                        selector=\" tbody tr \"\r\n                        unitKey=\"key\"\r\n                        disabled={checkedType === 'radio' || 'slide'} // 可选值 true false 'shift' 'ctrl' 'slide'\r\n                        userSelect={true} // 启用用户文字选中\r\n                        // unitsData={fullDataObject}  // 用dom做shift 操作 数据的问题是目前顺序不对 // 数组改为对象 给下面使用\r\n                        // 开始项  主要配合外部的 单选事件处理\r\n                        startItem=\"\"\r\n                        onSelect={(selectedRowKeys, hotkey, { currentKey }) => {\r\n                            // 树状数据不太好处理 需要一个拉平数据\r\n                            let rowLen = Object.keys(selectedRowKeys).length;\r\n                            if (rowLen > 0) {\r\n                                if (hotkey === 'ctrl') {\r\n                                    setStore(['checkedKeys', currentKey], selectedRowKeys[currentKey], true, () => {\r\n                                        let selectedRecord = fullDataObject[currentKey].item;\r\n                                        console.log(fullDataObject, currentKey, selectedRecord, '数据的问题处理');\r\n                                        if (isFunction(checkboxChange) && selectedRecord) {\r\n                                            checkboxChange(selectedRecord, selectedRecord.rowIndex, {});\r\n                                        }\r\n                                    });\r\n                                } else {\r\n                                    setStore('checkedKeys', {});\r\n                                    for (const key in selectedRowKeys) {\r\n                                        if (selectedRowKeys.hasOwnProperty(key)) {\r\n                                            setStore(['checkedKeys', key], selectedRowKeys[key], false);\r\n                                        }\r\n                                    }\r\n\r\n                                    // 更新\r\n                                    store.refresh(() => {\r\n                                        // TODO 先使用循环调用时间 如果不行的话  后面需要单独加一个回调\r\n                                        for (const key in selectedRowKeys) {\r\n                                            if (selectedRowKeys.hasOwnProperty(key) && isFunction(checkboxChange)) {\r\n                                                let selectedRecord = fullDataObject[key];\r\n                                                selectedRowKeys[key] && checkboxChange(selectedRecord, selectedRecord.rowIndex, {});\r\n                                            }\r\n                                        }\r\n                                    });\r\n                                }\r\n                            }\r\n                        }}\r\n                    />\r\n                )}\r\n                <Table\r\n                    lazyload={isLazyload}\r\n                    className={classnames(\"tree-table-manyCol-container\", { 'firstcol-ellipsis': this.props.store.getStore('isEllipsis') })}\r\n                    expandedRowKeys={expandedKeys} //搜索节点关键字后要展开的父节点\r\n                    columns={this.createNewCol(columns, maxDeep)}\r\n                    columnKey='attrcode'\r\n                    data={treeData}\r\n                    onExpand={this.onExpand}\r\n                    onExpandedRowsChange={expandedRowKeys => {\r\n                        // 更新\r\n                        store.setStore('expandedKeys', expandedRowKeys);\r\n                    }}\r\n                    bodyDisplayInRow={false}\r\n                    //折行回调\r\n                    foldingRowChange={isEllipsis => {\r\n                        store.setStore('isEllipsis', isEllipsis);\r\n                    }}\r\n                    scroll={scrollConfig || { y: tableHeight }}\r\n                    bodyStyle={{ minHeight: (scrollConfig && scrollConfig.y) ? scrollConfig.y : 60 }}\r\n                    onRowDoubleClick={this.onRowDoubleClick}\r\n                    adaptionHeight={adaptionHeight}\r\n                    otherAreaHeight={otherAreaHeight}\r\n                    inModal={inModal}\r\n                    onRowClick={this.onRowClick}\r\n                    isDrag={isDrag}\r\n                    ref={dom => {\r\n                        this.dom = ReactDOM.findDOMNode(dom);\r\n                    }}\r\n                    rowClassName={this.rowClassName}\r\n                    addBlankCol={addBlankCol}\r\n                    extendRightMenu={\r\n                        showContextMenu ? this.createContextMenu() :\r\n                            isFunction(extendRightMenu) ? extendRightMenu() : null\r\n                    }\r\n                    cancelCustomRightMenu={true}\r\n                    colsSettingParam={this.getColSetConfig()}\r\n                    showWidthAndHeightConfig={showWidthAndHeightConfig}\r\n                />\r\n\r\n                {langJson ? (\r\n                    modal.createModal('delNode', {\r\n                        title: langJson['insert-tree-table-001'],\r\n                        content: langJson['insert-tree-table-002'],\r\n                        beSureBtnClick: this.delNodeEve.bind(this),\r\n                        backdrop: 'static',\r\n                    })\r\n                ) : null}\r\n\r\n                {modal.createModal('treeTableManyColModal', {\r\n                    content: this.modalContent.call(this),\r\n                    beSureBtnClick: this.beSureBtnClick.bind(this),\r\n                    cancelBtnClick: () => {\r\n                        modal.close('treeTableManyColModal');\r\n                    },\r\n                    size: 'lg',\r\n                    userControl: true,\r\n                    backdrop: 'static',\r\n                })}\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nTreeTable.displayName = 'TreeTable';\r\nTreeTable.useTreeTable = useTreeTable;\r\n\r\nexport default TreeTable;\r\n","/*\r\n *   create by wangshhj\r\n * */\r\nimport React from 'react';\r\nimport TreeTable from './treeTable';\r\nimport useTreeTable from './store';\r\nimport { getSafeRandom } from '@platform/api'\r\nimport { countDeep as utilCountDeep, stopCheckBoxChange as utilStopCheckBoxChange, getChildren as utilGetChildren } from './utils';\r\n\r\nconst MODALNAME = {\r\n    add: \"新增节点\",\r\n    edit: \"编辑节点\",\r\n};\r\n\r\n/**\r\n * @desc 保存列的宽度\r\n * @type {{\r\n *   'attrCode': Number\r\n * }}\r\n */\r\nlet cellWidth = {};\r\nconst PID = \"root\";\r\n\r\n/**\r\n * 检测组件对象是否存在 bbq\r\n * @param {*} id \r\n */\r\nconst existenceCheck = function (id) {\r\n    let store = this.treeTableDataSource[id]\r\n    if (!store) {\r\n        store = useTreeTable();\r\n        this.treeTableDataSource[id] = store;\r\n        // 同步模板\r\n        store.setMeta(this.meta.getMeta());\r\n        console.warn(`所操作的表格中无ID为${id}的数据`);\r\n        return;\r\n    }\r\n    return store;\r\n}\r\n\r\n// 创建组件\r\nexport function treeTableCol(moduleId, config = {}) {\r\n    // this.register(\"treeTable\"); // 生成 this.treeTableDataSource[id]\r\n    let pageScope = this,\r\n        store = pageScope.treeTableDataSource[moduleId];\r\n    if (!store) {\r\n        store = useTreeTable();\r\n        pageScope.treeTableDataSource[moduleId] = store;\r\n        // 同步模板\r\n        store.setMeta(pageScope.meta.getMeta(), moduleId, false);\r\n        console.log(pageScope);\r\n    }\r\n\r\n    let { async, ...others } = config;\r\n\r\n    return <TreeTable\r\n        async={async}\r\n        store={store}\r\n        id={moduleId}\r\n        modal={this.modal}\r\n        {...others}\r\n    />\r\n}\r\n\r\n/*\r\n *    插入子节点数据\r\n *    @ child 子表数据\r\n *    @ parent 当前行信息\r\n * */\r\nfunction setChildNodeEve(\r\n    tableData,\r\n    child,\r\n    parent,\r\n    checkedKeys = {},\r\n    expandedKeys,\r\n    isCheckedHasChild,\r\n) {\r\n    child = JSON.parse(JSON.stringify(child)); // 清理 并拷贝对象\r\n    let parentKey = parent.key;\r\n    let len = tableData.length;\r\n    for (let i = 0; i < len; i++) {\r\n        let item = tableData[i];\r\n        if (item.rowId === parentKey) {\r\n\r\n            if (expandedKeys && expandedKeys.length) {\r\n                clearExpandedKeys(tableData[i].children, expandedKeys)\r\n            }\r\n\r\n            tableData[i].children = child;\r\n\r\n            //父级勾选 包含下级时，勾选所有子级\r\n            if (isCheckedHasChild && checkedKeys[item.rowId]) {\r\n                setChecked(child, checkedKeys)\r\n            }\r\n            return true;\r\n        } else if (Array.isArray(item.children)) {\r\n            let res = setChildNodeEve(item.children, child, parent, checkedKeys, expandedKeys, isCheckedHasChild);\r\n            if (res) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/*\r\n *   添加rowId;\r\n *   field: rowId字段\r\n * */\r\nfunction addRowId(data, field, expandedKeys) {\r\n    if (!Array.isArray(data)) {\r\n        console.warn(\"addRowId方法，第一个参数应为数组\");\r\n        return false;\r\n    }\r\n    if (data.length > 0 && !data[0].values[field]) {\r\n        console.warn(`addRowId方法，没有找到参数${field}`);\r\n        return false;\r\n    }\r\n    data.forEach(item => {\r\n        item.key = item.rowId = item.values[field].value;\r\n        expandedKeys && expandedKeys.push(item.values[field].value);\r\n        if (Array.isArray(item.children)) {\r\n            addRowId(item.children, field, expandedKeys);\r\n        }\r\n    });\r\n}\r\n\r\n\r\n\r\n/*\r\n *   根据isleaf 添加children\r\n * */\r\nfunction addChildren(data) {\r\n    data.forEach(item => {\r\n        if (item.hasOwnProperty(\"isleaf\") && !item.isleaf) {\r\n            item.children = item.children || [];\r\n        }\r\n    });\r\n}\r\n\r\n/*\r\n *   编辑行事件\r\n * */\r\nfunction editRow(tableData, newItem) {\r\n    newItem = JSON.parse(JSON.stringify(newItem));\r\n    let i = tableData.length;\r\n    while (i--) {\r\n        let item = tableData[i];\r\n        if (item.rowId === newItem.rowId) {\r\n            tableData[i] = { ...tableData[i], ...newItem };\r\n            return true;\r\n        } else {\r\n            if (Array.isArray(item.children)) {\r\n                let res = editRow(item.children, newItem);\r\n                if (res) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/*\r\n *   增加子节点事件\r\n * */\r\nfunction addChildNode(tableData, newItem, parent, syncAddNode) {\r\n    newItem = JSON.parse(JSON.stringify(newItem)); // 清理 并拷贝对象\r\n    let pk = null;\r\n    if (!parent) {\r\n        if (!newItem.values.pid) {\r\n            console.error(\"树状表添加子节点的方法没找到pid\");\r\n            return false;\r\n        }\r\n        pk = newItem.values.pid.value;\r\n    } else {\r\n        pk = parent.key;\r\n    }\r\n    let i = tableData.length;\r\n    while (i--) {\r\n        let item = tableData[i];\r\n        if (item.rowId === pk) {\r\n            if (!newItem.values.pid) {\r\n                newItem.values.pid = { value: pk };\r\n            }\r\n\r\n            // addChildRowEve 补丁\r\n            if (tableData[i] && syncAddNode) tableData[i].isleaf = false;\r\n\r\n            if (Array.isArray(tableData[i].children)) {\r\n                tableData[i].children.push(newItem);\r\n            } else {\r\n                if (syncAddNode) tableData[i].isleaf = false;\r\n                tableData[i].children = [newItem];\r\n            }\r\n            return true;\r\n        } else {\r\n            if (Array.isArray(item.children)) {\r\n                let res = addChildNode(\r\n                    item.children,\r\n                    newItem,\r\n                    parent,\r\n                    syncAddNode,\r\n                );\r\n                if (res) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/*\r\n *   增加兄弟节点事件\r\n * */\r\nfunction addBrother(tableData, newItem, brother) {\r\n    newItem = JSON.parse(JSON.stringify(newItem)); // 清理 并拷贝对象\r\n    let pk = brother.key;\r\n    let len = tableData.length;\r\n    for (let i = 0; i < len; i++) {\r\n        let item = tableData[i];\r\n        if (item.rowId === pk) {\r\n            tableData.splice(i + 1, 0, newItem);\r\n            return true;\r\n        } else {\r\n            if (Array.isArray(item.children)) {\r\n                let res = addBrother(item.children, newItem, brother);\r\n                if (res) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/*\r\n *   删除行\r\n * */\r\n\r\nfunction delRow(tableData, key) {\r\n    let len = tableData.length;\r\n    for (let i = 0; i < len; i++) {\r\n        let item = tableData[i];\r\n        if (item.rowId === key) {\r\n            tableData.splice(i, 1);\r\n            return true;\r\n        } else {\r\n            if (Array.isArray(item.children)) {\r\n                let res = delRow(item.children, key);\r\n                if (res) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/*\r\n *   删除后检测节点是否还有子节点，若没有，删除children 。 只检测删除行的父元素\r\n * */\r\nfunction checkHasChildren(tableData, parentRowId) {\r\n    let i = tableData.length;\r\n    while (i--) {\r\n        let item = tableData[i];\r\n        if (item.rowId === parentRowId) {\r\n            if (Array.isArray(item.children) && item.children.length === 0) {\r\n                delete item.children;\r\n            }\r\n            return true;\r\n        } else {\r\n            if (Array.isArray(item.children)) {\r\n                let res = checkHasChildren(item.children);\r\n                if (res) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * 根据rowid获取当前行数据\r\n */\r\nfunction getValueByRowIdEve(tableData, rowId) {\r\n    let i = tableData.length;\r\n    while (i--) {\r\n        let item = tableData[i];\r\n        if (item.rowId === rowId) {\r\n            return item;\r\n        } else {\r\n            if (Array.isArray(item.children)) {\r\n                let res = getValueByRowIdEve(item.children, rowId);\r\n                if (res) {\r\n                    return res;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/*  获取勾选项 */\r\nfunction getSelectedRowEve(data, store) {\r\n    let checkedKeys = store.getStore('checkedKeys');\r\n\r\n    let res = [];\r\n    const G = data => {\r\n        data.map(item => {\r\n            if (checkedKeys[item.key]) {\r\n                res.push(item);\r\n            }\r\n            if (Array.isArray(item.children)) {\r\n                G(item.children);\r\n            }\r\n        });\r\n    };\r\n    G(data);\r\n    return res;\r\n}\r\n\r\n/**\r\n * 设置勾选项\r\n * @param {*} moduleId\r\n * @param {*} checkedKeys\r\n * @param {*} merge\r\n */\r\nexport function setCheckedKeys(moduleId, checkedKeys, merge) {\r\n    let store = existenceCheck.call(this, moduleId);\r\n    if (!store) {\r\n        return;\r\n    }\r\n\r\n    let oldCheckedKeys = store.getStore('checkedKeys');\r\n\r\n    if (merge) {\r\n        checkedKeys = Object.assign(oldCheckedKeys, checkedKeys);\r\n    } else {\r\n        checkedKeys = Object.assign({}, checkedKeys);\r\n    }\r\n\r\n    store.setStore('checkedKeys', checkedKeys);\r\n}\r\n\r\n/**\r\n * 是否包含下级---未导出\r\n * @param {string} moduleId\r\n */\r\nexport function isCheckHasChild(moduleId) {\r\n    let store = existenceCheck.call(this, moduleId);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    return store.getStore('isCheckedHasChild');\r\n}\r\n\r\n/**\r\n * 设置选中行\r\n * @param {*} moduleId\r\n * @param {*} record\r\n */\r\nexport function setSelectedRow(moduleId, record) {\r\n    let store = existenceCheck.call(this, moduleId);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    store.setStore('currentSelectedRow', record);\r\n}\r\n\r\n/*==================================================================================*/\r\n\r\n/*\r\n *   初始化树状表数据\r\n *   @ data 数据\r\n *   @ rowId  表示行id的字段名\r\n *   @ 默认展开所有行 defaultExpandAllRows\r\n * */\r\nexport function initTreeTableData(\r\n    moduleId,\r\n    data,\r\n    rowId,\r\n    defaultExpandAllRows,\r\n    expandedRowKeys,\r\n) {\r\n    if (rowId === undefined) {\r\n        console.warn(\"树状表addRowId方法，第三个参数需要传表示行rowid 的字段\");\r\n        return false;\r\n    }\r\n    let store = existenceCheck.call(this, moduleId);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    let { async, isCheckedHasChild, checkedKeys } = store.getStore();\r\n    if (async) {\r\n        //异步时，需要添加children字段。\r\n        addChildren(data);\r\n    }\r\n    let res,\r\n        expandedKeys = [];\r\n    if (defaultExpandAllRows) {\r\n        res = addRowId(\r\n            data,\r\n            rowId,\r\n            expandedKeys,\r\n        );\r\n        if (isCheckedHasChild && checkedKeys) {\r\n            data.map(item => {\r\n                if (checkedKeys[item.key] && Array.isArray(item.children)) {\r\n                    setChecked(item.children, checkedKeys)\r\n                }\r\n            });\r\n        }\r\n    } else {\r\n        res = addRowId(data, rowId);\r\n        expandedRowKeys && (store.setStore('expandedKeys', expandedRowKeys, false));\r\n    }\r\n    if (res === false) {\r\n        console.warn(\r\n            `树状表addRowId方法，没有找到表示rowId的字段，请检查数据中是否存在${rowId}字段`,\r\n        );\r\n        return false;\r\n    }\r\n    store.setData({ data, shouldForceUpdate: false });\r\n    store.setStore('rowId', rowId, false);\r\n    isCheckedHasChild && (store.setStore('checkedKeys', checkedKeys, false));\r\n    defaultExpandAllRows && (store.setStore('expandedKeys', expandedKeys, false));\r\n    // 缓存数据以用于  前端查找 --bbqin\r\n    store.setCache('cacheData', JSON.parse(JSON.stringify(data)));\r\n    store.setStore('searchValue', null, true);\r\n}\r\n\r\n//设置子数据勾选\r\nfunction setChecked(children, checkedKeys) {\r\n    if (Array.isArray(children)) {\r\n        children.forEach(item => {\r\n            checkedKeys[item.key] = true;\r\n            if (Array.isArray(item.children)) {\r\n                setChecked(item.children);\r\n            }\r\n        });\r\n    }\r\n}\r\n//设置子数据勾选\r\nfunction clearExpandedKeys(children, expandedKeys) {\r\n    if (Array.isArray(children)) {\r\n        children.forEach(item => {\r\n            let index = expandedKeys.indexOf(item.key)\r\n            if (index !== -1) {\r\n                expandedKeys.splice(index, 1)\r\n            }\r\n            if (Array.isArray(item.children)) {\r\n                clearExpandedKeys(item.children, expandedKeys);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nexport function updataDataSource(moduleId, callBack) {\r\n    let store = existenceCheck.call(this, moduleId);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    let data = store.getData();\r\n\r\n    if (callBack) {\r\n        const newDataSource = callBack(\r\n            JSON.parse(JSON.stringify(data)),\r\n        );\r\n        if (Array.isArray(newDataSource)) {\r\n            store.setCache('cacheData', newDataSource);\r\n            // 更新\r\n            store.setData({ data: newDataSource });\r\n        }\r\n    } else {\r\n        console.warn(\"请传回调参数，并且返回新的数据源\");\r\n    }\r\n}\r\n\r\n/**\r\n * 查询树表\r\n * @param {String} moduleId 模块Id\r\n * @param {String} searchValue 查詢字符串\r\n * @param {Array} filters 过滤关键字\r\n */\r\nexport function searchTreeTable({\r\n    moduleId,\r\n    searchValue,\r\n    filters = [],\r\n    expanded = true,\r\n    defaultExpandAllRows = false,\r\n}) {\r\n\r\n    let store = existenceCheck.call(this, moduleId);\r\n    if (!store) {\r\n        return;\r\n    }\r\n\r\n    if (Object.prototype.toString.call(filters) !== \"[object Array]\") {\r\n        // 如果不是数组\r\n        filters = [String(filters)];\r\n    }\r\n    // 确定是不是检索所有字段\r\n    let data = store.getCache('cacheData') || store.getData(),\r\n        expandedKeys = [],\r\n        expectData = [];\r\n    // 清空 数据\r\n    store.setStore('expandedKeys', [], false);\r\n\r\n    let searchResult = findDataByValueFilters({\r\n        data,\r\n        searchValue,\r\n        filters,\r\n        expandedKeys,\r\n        expanded,\r\n        defaultExpandAllRows,\r\n        expectData,\r\n    });\r\n\r\n    // 展开的键 expandedKeys 检索后是否展开 理论上被检索到的行应该展开\r\n    store.setData({\r\n        data: searchResult,\r\n        shouldForceUpdate: false\r\n    });\r\n    console.log(data);\r\n    // 记录一下关键字 用于做替换\r\n    store.setStore('searchValue', searchValue, false);\r\n    store.setStore('expandedKeys', expandedKeys, false);\r\n    store.refresh(() => {\r\n        // store.setStore('searchValue', null, false);\r\n    });\r\n}\r\n\r\n/**\r\n * 遍历  并且查询  符合要求的数据\r\n * @param {*} param0\r\n */\r\nfunction findDataByValueFilters({\r\n    data,\r\n    expandedKeys,\r\n    searchValue,\r\n    filters,\r\n    expanded,\r\n    defaultExpandAllRows,\r\n    expectData = [],\r\n}) {\r\n    if (!searchValue || data.length === 0) {\r\n        return data || [];\r\n    }\r\n    let needFilters = false,\r\n        filtersLength = filters.length;\r\n    // 不区分大小写\r\n    searchValue = searchValue.toLocaleLowerCase();\r\n    data.map(item => {\r\n        let isMatch = false,\r\n            values = item.values,\r\n            value;\r\n        let expectItem = JSON.parse(\r\n            JSON.stringify(item, function (k, v) {\r\n                if (\r\n                    k === \"children\" &&\r\n                    Object.prototype.toString.call(v) === \"[object Array]\"\r\n                ) {\r\n                    return null;\r\n                }\r\n                return v;\r\n            }),\r\n        ); // 数据拷贝\r\n        // console.log(expectItem);\r\n        for (let vi in values) {\r\n            // 该字段是否需要过滤\r\n            needFilters =\r\n                filtersLength === 0 ? true : filters.indexOf(vi) !== -1;\r\n            // 不区分大小写\r\n            value = String(\r\n                values[vi][\"display\"] || values[vi][\"value\"],\r\n            ).toLocaleLowerCase();\r\n            if (needFilters && value && value.indexOf(searchValue) !== -1) {\r\n                // 匹配到行\r\n                isMatch = true;\r\n                break;\r\n            }\r\n        }\r\n        if (Array.isArray(item.children)) {\r\n            // 子循环\r\n            expectItem.children = findDataByValueFilters({\r\n                data: item.children,\r\n                expandedKeys,\r\n                searchValue,\r\n                filters,\r\n                expanded,\r\n                defaultExpandAllRows,\r\n                expectData: [],\r\n            });\r\n            expectItem.children.length === 0 && (expectItem.children = null);\r\n        }\r\n        (isMatch || (expectItem.children && expectItem.children.length > 0)) &&\r\n            expectData.push(expectItem);\r\n        if (\r\n            (isMatch ||\r\n                (expectItem.children && expectItem.children.length > 0)) &&\r\n            (expanded || defaultExpandAllRows)\r\n        ) {\r\n            // 默认展开 或者全部展开\r\n            expandedKeys.push(item.key || item.rowId);\r\n        }\r\n    });\r\n    return expectData;\r\n}\r\n\r\n/*\r\n *   异步加载时，设置子表数据\r\n *    @ child 子表数据\r\n *    @ parent 点击的当前行数据\r\n * */\r\nexport function setChildNode(moduleId, child, parent, isCheckedHasChild) {\r\n    if (!moduleId || !child || !parent) {\r\n        console.warn(\"树状表setChildNode 方法参数不正确\");\r\n        return false;\r\n    }\r\n    if (!Array.isArray(child)) {\r\n        console.warn(\"树状表setChildNode 方法,第二个参数应为数组\");\r\n        return false;\r\n    }\r\n    let store = existenceCheck.call(this, moduleId);\r\n    if (!store) {\r\n        return;\r\n    }\r\n\r\n    let rowId = store.getStore('rowId');\r\n    let async = store.getStore('async');\r\n    let checkedKeys = store.getStore('checkedKeys');\r\n    let expandedKeys = store.getStore('expandedKeys');\r\n    let data = store.getData();\r\n    let cacheData = store.getCache('cacheData');\r\n\r\n    isCheckedHasChild = isCheckedHasChild || store.getStore('isCheckedHasChild');\r\n\r\n    if (async) {\r\n        addChildren(child);\r\n        addRowId(child, rowId);\r\n        setChildNodeEve(\r\n            data,\r\n            child,\r\n            parent,\r\n            checkedKeys,\r\n            expandedKeys,\r\n            isCheckedHasChild,\r\n        );\r\n        // 更新缓存数据以用于查找 by bbqin\r\n        setChildNodeEve(\r\n            cacheData,\r\n            child,\r\n            parent,\r\n            checkedKeys,\r\n            expandedKeys,\r\n            isCheckedHasChild,\r\n        );\r\n        // 更新\r\n        store.setStore('searchValue', null);\r\n    } else {\r\n        console.warn(\"setChildNode方法只能异步加载时调用\");\r\n    }\r\n}\r\n\r\nexport function getChildren(data, parentKey) {\r\n    return utilGetChildren(data, parentKey);\r\n}\r\n\r\n/*\r\n *   编辑行\r\n * */\r\nexport function editRowEve(moduleId, newData) {\r\n    let store = existenceCheck.call(this, moduleId);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    let rowId = store.getStore('rowId');\r\n    let data = store.getData();\r\n    let cacheData = store.getCache('cacheData');\r\n\r\n    if (!newData.values[rowId]) {\r\n        console.warn &&\r\n            console.warn(\r\n                `树状表editRowEve 方法,第二个参数中没有找到表示RowId的字段，请检查数据中是否有${rowId}字段`,\r\n            );\r\n        return false;\r\n    }\r\n    newData.rowId = newData.values[rowId].value;\r\n    addChildren([newData]);\r\n    editRow(data, newData);\r\n    // 更新缓存数据以用于查找 by bbqin\r\n    editRow(cacheData, newData);\r\n    // 更新\r\n    store.setStore('searchValue', null);\r\n}\r\n\r\n/*\r\n *   增加子节点\r\n * */\r\nexport function addChildRowEve(moduleId, newData) {\r\n    let store = existenceCheck.call(this, moduleId);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    let rowId = store.getStore('rowId');\r\n    let currentRow = store.getStore('currentRow');\r\n    let data = store.getData();\r\n    let cacheData = store.getCache('cacheData');\r\n\r\n    console.log(newData, currentRow, data, cacheData);\r\n\r\n    let runThis = item => {\r\n        let kValue = item.values[rowId];\r\n        item.values[rowId] =\r\n            kValue && kValue.value !== undefined && kValue.value !== null\r\n                ? kValue\r\n                : { value: getSafeRandom() };\r\n        // if (!item.values[rowId]) {\r\n        // \tconsole.warn(`树状表editRowEve 方法,第二个参数中没有找到表示RowId的字段，请检查数据中是否有${rowId}字段`);\r\n        // \treturn false;\r\n        // }\r\n        item.key = item.rowId = item.values[rowId].value;\r\n        addChildren([item]);\r\n\r\n        addChildNode(data, item, currentRow, true);\r\n        // 更新缓存数据以用于查找 by bbqin\r\n        addChildNode(cacheData, item, currentRow, true);\r\n\r\n        store.setStore('searchValue', null, false);\r\n    };\r\n    if (Array.isArray(newData)) {\r\n        newData.forEach(items => {\r\n            runThis(items);\r\n        });\r\n    } else {\r\n        runThis(newData);\r\n    }\r\n\r\n    // 更新\r\n    store.refresh();\r\n}\r\n/*\r\n *   更新全部子节点\r\n * */\r\nexport function updateChildRow(moduleId, newData, parentRow) {\r\n    let store = existenceCheck.call(this, moduleId);\r\n    if (!store) {\r\n        return;\r\n    }\r\n\r\n    let rowId = store.getStore('rowId');\r\n    let currentRow = store.getStore('currentRow');\r\n    let data = store.getData();\r\n\r\n    let newDataArr = []\r\n    let pk = \"root\"\r\n    if (currentRow) pk = currentRow.key\r\n    if (parentRow) pk = parentRow.key\r\n    if (Array.isArray(newData)) {\r\n        newDataArr = newData\r\n    } else {\r\n        newDataArr = [newDataArr]\r\n    }\r\n    const loop = (data, pk) => {\r\n        if (!data.length) return\r\n        data.map(item => {\r\n            let kValue = item.values[rowId];\r\n            item.values[rowId] = kValue && kValue.value !== undefined ? kValue : { value: getSafeRandom() };\r\n            item.key = item.rowId = item.values[rowId].value;\r\n            if (!item.values.pid) {\r\n                item.values.pid = { value: pk };\r\n            }\r\n            if (item.hasOwnProperty(\"isleaf\") && !item.isleaf) {\r\n                item.children = item.children || [];\r\n                loop(item.children, item.key)\r\n            }\r\n        })\r\n    }\r\n    const updateRowByRowId = (tableData, rowId) => {\r\n        let i = tableData.length;\r\n        while (i--) {\r\n            let item = tableData[i];\r\n            if (item.rowId === rowId) {\r\n                tableData[i].children = newDataArr\r\n                tableData[i].isleaf = false\r\n                return true\r\n            } else {\r\n                if (Array.isArray(item.children)) {\r\n                    let res = updateRowByRowId(item.children, rowId)\r\n                    if (res) return true\r\n                }\r\n            }\r\n        }\r\n    }\r\n    loop(newDataArr, pk) // 处理节点数据，检查key，rowId，children\r\n    if (!updateRowByRowId(data, pk)) {\r\n        data = newDataArr\r\n    }\r\n    // 更新\r\n    store.setStore('searchValue', null);\r\n}\r\n\r\n/*\r\n *   增加兄弟节点\r\n * */\r\nexport function addBrotherRow(moduleId, newData) {\r\n    let store = existenceCheck.call(this, moduleId);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    let rowId = store.getStore('rowId');\r\n    let currentRow = store.getStore('currentRow');\r\n    let data = store.getData();\r\n    let cacheData = store.getCache('cacheData');\r\n\r\n    if (!newData.values[rowId]) {\r\n        console.warn(\r\n            `树状表addBrotherRow 方法,第二个参数中没有找到表示RowId的字段，请检查数据中是否有${rowId}字段`,\r\n        );\r\n        return false;\r\n    }\r\n    newData.rowId = newData.values[rowId].value;\r\n    addChildren([newData]);\r\n    addBrother(data, newData, currentRow);\r\n    // 更新缓存数据以用于查找 by bbqin\r\n    addBrother(cacheData, newData, currentRow);\r\n    // 更新\r\n    store.setStore('searchValue', null);\r\n}\r\n\r\n/*\r\n *   删除节点\r\n * */\r\nexport function delRowByPk(moduleId, record) {\r\n    let store = existenceCheck.call(this, moduleId);\r\n    if (!store) {\r\n        return;\r\n    }\r\n\r\n    let data = store.getData();\r\n    let cacheData = store.getCache('cacheData');\r\n\r\n    let key = record.key;\r\n    delRow(data, key);\r\n    // 更新缓存数据以用于查找 by bbqin\r\n    delRow(cacheData, key);\r\n    if (record.pid) {\r\n        checkHasChildren(data, record.pid);\r\n        // 更新缓存数据以用于查找 by bbqin\r\n        checkHasChildren(cacheData, record.pid);\r\n    }\r\n\r\n    // 更新数据\r\n    store.setData({ data: data, shouldForceUpdate: false });\r\n    store.setCache('cacheData', cacheData);\r\n    // 更新\r\n    store.setStore('searchValue', null);\r\n}\r\n\r\n/*\r\n *   同步时，组装树状表所需要的数据结构\r\n * */\r\nexport function createNewData(data) {\r\n    if (!Array.isArray(data)) {\r\n        console.warn(\"createTreeData方法，参数应该为数组\");\r\n        return false;\r\n    }\r\n    let group = new Map();\r\n    data.forEach(e => {\r\n        if (!(e.values.pid && e.values.pid.value)) {\r\n            e.values.pid = { value: PID };\r\n        }\r\n        group.get(e.values.pid.value)\r\n            ? group.get(e.values.pid.value).push(e)\r\n            : group.set(e.values.pid.value, [e]);\r\n    });\r\n\r\n    function makeDOM(pid) {\r\n        if (group.get(pid)) {\r\n            return group.get(pid).map(e => {\r\n                e.children = makeDOM(e.values.refpk.value);\r\n                return e;\r\n            });\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n    let newData = makeDOM(PID) || [];\r\n    /* 添加isleaf字段 */\r\n    const addIsLeaf = data => {\r\n        data.forEach(item => {\r\n            if (item.checked) {\r\n                item.checked = true;\r\n            } else {\r\n                item.checked = false;\r\n            }\r\n            if (Array.isArray(item.children)) {\r\n                item.isleaf = false;\r\n                addIsLeaf(item.children);\r\n            } else {\r\n                item.isleaf = true;\r\n            }\r\n        });\r\n    };\r\n\r\n    addIsLeaf(newData);\r\n\r\n    return newData;\r\n}\r\n\r\n/*\r\n *   获取当前表格所有数据\r\n * */\r\nexport function getAllValue(moduleId) {\r\n    let store = existenceCheck.call(this, moduleId);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    return store.getData();\r\n}\r\n\r\nexport function getExpandedRowKeys(moduleId) {\r\n    let store = existenceCheck.call(this, moduleId);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    return store.getStore('expandedKeys');\r\n}\r\n\r\n/*\r\n *   获取当前表格某行数据 byId\r\n * */\r\nexport function getValueByRowId(moduleId, rowId) {\r\n    let store = existenceCheck.call(this, moduleId);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    let data = store.getData();\r\n    return getValueByRowIdEve(data, rowId);\r\n}\r\n\r\n/*\r\n *   弹出框  (要改)\r\n * */\r\nexport function showModal(moduleId, record, modalType) {\r\n    let store = existenceCheck.call(this, moduleId);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    let langJson = store.getCache('langJson');\r\n    let formStore = store.getStore('formStore');\r\n    let uuid = store.getStore('uuid');\r\n\r\n    MODALNAME.add = langJson[\"insert-tree-table-012\"];\r\n    MODALNAME.edit = langJson[\"insert-tree-table-011\"];\r\n\r\n    store.setStore('currentRow', record, false);\r\n    // this.state.form[moduleId + 'form'] = modalType === 'edit' ? record.values : {};\r\n    const formValues = JSON.parse(JSON.stringify(modalType === \"edit\" ? record.values : {}));\r\n\r\n    console.log(formValues, formStore);\r\n    formStore.emptyAllFormValue();\r\n    formStore.setAllFormValue(formValues);\r\n\r\n    store.setStore('modalType', modalType, true);\r\n\r\n    this.modal.show(\"treeTableManyColModal\", { title: `${MODALNAME[modalType]}` });\r\n}\r\n\r\n/* 清空表格 */\r\nexport function emptyAllData(moduleId) {\r\n    let store = existenceCheck.call(this, moduleId);\r\n    if (!store) {\r\n        return;\r\n    }\r\n\r\n    store.setData({ data: [], shouldForceUpdate: false });\r\n    store.setCache('cacheData', []);\r\n    // 更新缓存数据以用于查找 by bbqin\r\n    store.setStore('searchValue', null);\r\n}\r\n\r\n/* 展开节点*/\r\nexport function openRow(moduleId, key) {\r\n    let store = existenceCheck.call(this, moduleId);\r\n    if (!store) {\r\n        return;\r\n    }\r\n\r\n    let expandedKeys = store.getStore('expandedKeys');\r\n\r\n    !expandedKeys.find(i => i === key) &&\r\n        expandedKeys.push(key);\r\n    store.refresh();\r\n}\r\n\r\n/* 收起节点*/\r\nexport function closeRow(moduleId, key) {\r\n    let store = existenceCheck.call(this, moduleId);\r\n    if (!store) {\r\n        return;\r\n    }\r\n\r\n    let expandedKeys = store.getStore('expandedKeys');\r\n    let index = expandedKeys.findIndex(i => i === key);\r\n    expandedKeys.splice(index, 1);\r\n    store.refresh();\r\n}\r\n\r\n/* 获取选中行数据 */\r\nexport function getSelectedRow(moduleId) {\r\n    let store = existenceCheck.call(this, moduleId);\r\n    if (!store) {\r\n        return;\r\n    }\r\n    let data = store.getData();\r\n    let expandedKeys = store.getStore('expandedKeys');\r\n    let isCheckedHasChild = store.getStore('isCheckedHasChild');\r\n\r\n    const selectedRows = getSelectedRowEve(data, store);\r\n    let res = JSON.parse(JSON.stringify(selectedRows));\r\n\r\n    res = res.map(item => {\r\n        let { children, ...others } = item;\r\n        //勾选节点未展开, 且children不存在\r\n        if (\r\n            !expandedKeys.includes(item.key) &&\r\n            (!children || (Array.isArray(children) && children.length === 0))\r\n        ) {\r\n            //若勾选项不是叶子节点，且设置了isCheckHasChild:true\r\n            if (item.isleaf !== false && isCheckedHasChild) {\r\n                others.isCheckHasChild = true;\r\n            }\r\n        }\r\n        return others;\r\n    });\r\n    return res;\r\n}\r\n\r\n// /* 获取选中行数据 */\r\n// export function getSelectedRow(moduleId) {\r\n\r\n// }\r\n\r\n//   获取最深树层级 数\r\nexport function countDeep(source) {\r\n    return utilCountDeep(source);\r\n}\r\n\r\n/**\r\n * @desc 如果点击的是操作列，展开图标，文本夹图标就不执行选中事件。 选中文本时也不执行\r\n * @param e {object} 事件源\r\n * @param checkOnRowClick {boolean} 配置是否需要勾选功能\r\n */\r\nexport function stopCheckBoxChange(e, checkOnRowClick) {\r\n    return utilStopCheckBoxChange(e, checkOnRowClick);\r\n}\r\n\r\n\r\n/**\r\n * @desc 判断此单元格是否需要显示tooltip\r\n * @param cellDom {object} 单元格dom\r\n * @param attrCode {string}\r\n * @param fixed {string} 锁定列表\r\n * @return {boolean} true -> 显示tooltip, false -> 不显示\r\n */\r\nexport function perceptionTooltip({ cellDom, attrCode, fixed }) {\r\n    const PRE_FIX = \"nc_tree\";\r\n    let id = `${PRE_FIX}_${attrCode}`;\r\n    let cloneDom = document.getElementById(id);\r\n\r\n    if (cloneDom) {\r\n        cloneDom.innerText = cellDom.innerText;\r\n        return cloneDom.offsetWidth > cellWidth[attrCode];\r\n    } else if (fixed === \"left\") {\r\n        let fixedDom = document.querySelectorAll(\r\n            `.u-table-fixed-left span[fieldid=\"${attrCode}\"] span`,\r\n        )[0];\r\n\r\n        if (fixedDom === null) return false;\r\n\r\n        cloneDom = createCloneDomAndSetAttribute({\r\n            id,\r\n            attrCode,\r\n            cellWidth,\r\n            originDom: fixedDom,\r\n        });\r\n        return cloneDom.offsetWidth > fixedDom.offsetWidth;\r\n    } else {\r\n        cloneDom = createCloneDomAndSetAttribute({\r\n            id,\r\n            attrCode,\r\n            cellWidth,\r\n            originDom: cellDom,\r\n        });\r\n\r\n        return cloneDom.offsetWidth > cellDom.offsetWidthh;\r\n    }\r\n}\r\n\r\nfunction createCloneDomAndSetAttribute({ originDom, id, attrCode, cellWidth }) {\r\n    let cloneDom = originDom.cloneNode();\r\n    cloneDom.className = \"u-cell-hidden\";\r\n\r\n    cloneDom.id = id;\r\n    document.body.appendChild(cloneDom);\r\n    cloneDom.innerText = originDom.innerText;\r\n    cloneDom.height = \"0px\";\r\n    cellWidth[attrCode] = originDom.offsetWidth;\r\n    return cloneDom;\r\n}\r\n","/*\r\n * @Author: liyxt\r\n * @Date: 2019-10-21 14:15:59\r\n * @LastEditors: bbq\r\n * @LastEditTime: 2020-08-07 14:28:12\r\n * @Description: file content\r\n */\r\n/*\r\n *  \t树状表组件\r\n * */\r\nimport React, { Fragment } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport classnames from 'classnames';\r\nimport { Table, Checkbox, Selectable as NCSelectable } from '@platform/base';\r\nimport Cell from './Cell';\r\nimport { isFunction, isArray, cloneObj, getLangCode, getMultiLang, getSysFieldid } from '@platform/api'\r\nimport { countDeep, stopCheckBoxChange } from './methods';\r\nimport { SAVE_MULTI, STOP_CHECK_ELEMENT, STOP_CHECK_OPERATION_ELEMENT } from './containers';\r\nimport { getChildren } from './methods';\r\nconst defaultColor = ['#111111', '#555555', '#111', '#555'];\r\n\r\nrequire('./treeTableManyCol.less');\r\n\r\nlet isMultilingual = false;\r\n// 计算主表表体高度\r\nlet tableHeight = 0;\r\nconst screenHeight = window.screen.width;\r\n\r\nif (screenHeight <= 1919 > 1440) {\r\n    tableHeight = 48 * 10 + 'px';\r\n} else if (screenHeight > 1919) {\r\n    tableHeight = 56 * 10 + 'px';\r\n} else {\r\n    tableHeight = 40 * 10 + 'px';\r\n}\r\n\r\nlet formId = null;\r\nfunction TreeTableManyCol(\r\n    id,\r\n    {\r\n        expandEve, //异步执行，点击加号展开子节点\r\n        collapandEve, //异步执行，点击收起\r\n        async, // 加载方式，同步或异步\r\n        editNodeCallBack, //编辑 回调\r\n        addNodeCallBack, //新增回调\r\n        delNodeCallBack, // 删除回调\r\n        onAfterEvent,\r\n        showCheckBox = false, // 是否需要复选框   默认false不显示\r\n        checkedType = 'checkbox', //勾选方式  多选/单选  checkbox/radio\r\n        checkboxChange,\r\n        scrollConfig,\r\n        ncOnRowDoubleClick,\r\n        isDrag = true,\r\n        multipleRowCell = false,\r\n        adaptionHeight = true, //高度是否自适应\r\n        inModal = false,\r\n        checkOnRowClick = true, //业务组配置点击行时勾选复选框\r\n        fieldid,\r\n        onRowClickEve, //单击行回调\r\n        isLazyload = true,\r\n        addBlankCol = true,\r\n        showContextMenu = false,\r\n        //全部展开回调\r\n        expandAllEve,\r\n        //收起全部\r\n        closeAllEve,\r\n        hideExpandAll = false,\r\n        hideIncludeChild = false,\r\n        onCellMouseDown,\r\n        extendRightMenu,\r\n        isCheckedHasChild = false,\r\n    } = {},\r\n) {\r\n    let flag = false;\r\n    let that = this;\r\n    if (!this.state.treeTableCol.hasOwnProperty(id)) {\r\n        this.state.treeTableCol[id] = {\r\n            firstTime: true,\r\n            async,\r\n            expandedKeys: [],\r\n            checkedKeys: {},\r\n            tableHeight,\r\n            isEllipsis: true,\r\n        };\r\n    }\r\n    let columns = this.state.meta[id];\r\n\r\n    if (!columns) {\r\n        return;\r\n    }\r\n    if (!this.state.treeTableCol[id].data) {\r\n        return;\r\n        // this.state.treeTableCol[id].data = [];\r\n    }\r\n\r\n    let thisTable = this.state.treeTableCol[id];\r\n\r\n    if(typeof thisTable.isCheckedHasChild === \"undefined\"){\r\n        thisTable.isCheckedHasChild = isCheckedHasChild;\r\n    }\r\n    \r\n    let treeData = thisTable.data;\r\n    let defTreeData = JSON.parse(JSON.stringify(treeData));\r\n    let defCol = cloneObj(columns);\r\n\r\n    //调用多语\r\n    const callback = (json, bool, LangData) => {\r\n        if (isMultilingual) return;\r\n        thisTable.multilingual = json;\r\n        SAVE_MULTI.lang = json;\r\n        that.setState(\r\n            { treeTableCol: that.state.treeTableCol },\r\n            () => {\r\n                isMultilingual = true;\r\n            },\r\n        );\r\n    };\r\n\r\n    getMultiLang({ moduleId: 'containers_insert_tree_table', callback });\r\n\r\n    //\t第一次渲染，处理数据，并设置编辑弹出模态框模板\r\n    if (thisTable.firstTime) {\r\n        formId = id + 'form';\r\n        let formItem = [];\r\n        if (!isArray(defCol.items)) {\r\n            console.error('树状表模板中，items应为数组,请参考文档');\r\n            return;\r\n        }\r\n        defCol.items.map(item => {\r\n            if (item.itemtype !== 'customer') {\r\n                // item 内部东西太复杂 直接给会导致一些问题\r\n                let nItem = JSON.parse(\r\n                    JSON.stringify(item || {}, (key, value) => {\r\n                        if (key == 'render' || key == 'title') {\r\n                            // title 和 value 是react对象  会导致问题\r\n                            return undefined;\r\n                        }\r\n                        return value;\r\n                    }),\r\n                );\r\n                delete nItem.render;\r\n                delete nItem.title;\r\n                formItem.push(nItem);\r\n            }\r\n        });\r\n        this.state.meta[formId] = {\r\n            moduletype: 'form',\r\n            items: formItem,\r\n            status: 'edit',\r\n        };\r\n        this.use.form(formId);\r\n        this.formDataSource[formId].setMeta(this.state.meta, formId);\r\n        thisTable.firstTime = false;\r\n    }\r\n\r\n    /* setState */\r\n    const setStateEve = () => {\r\n        this.setState({ treeTableCol: this.state.treeTableCol });\r\n    };\r\n\r\n    // 查找数据类型，并返回\r\n    const checkDataType = field => {\r\n        let data = columns.items.find(item => item.attrcode === field);\r\n        if (data) {\r\n            return data.itemtype;\r\n        }\r\n    };\r\n    // 设置一个拉平数据 给框选用  超大数据量时不知道有没有性能问题 by bbqin\r\n    // 由于框选需要数据顺序 现在取出来的顺序不对 后面再调整\r\n    let fullDataArray = {};\r\n\r\n    //  处理数据格式\r\n    const createNewData = data => {\r\n        const dataSource = data.map((item, index) => {\r\n            item.key = item.rowId;\r\n            // 记录一下行顺序给 框选使用\r\n            item.rowIndex = index;\r\n            if (item.values.pid) {\r\n                item.pid = item.values.pid.value;\r\n            }\r\n            if (Array.isArray(item.children)) {\r\n                createNewData(item.children);\r\n            }\r\n            fullDataArray[item.key] = item;\r\n            return item;\r\n        });\r\n        return dataSource;\r\n    };\r\n\r\n    const createNewDataRes = createNewData(defTreeData);\r\n    const cp = JSON.parse(JSON.stringify(createNewDataRes));\r\n\r\n    //   获取到最深层级\r\n    //   countDeep(cp)\r\n\r\n    /* 复选框change事件(多选) */\r\n    const itemCheckBoxChange = (data, key) => {\r\n        thisTable.checkedKeys[key] = !thisTable.checkedKeys[key];\r\n        //包含下级时，全部选中\r\n        if (thisTable.isCheckedHasChild && showContextMenu) {\r\n            let children = getChildren(data, key);\r\n            console.log(\"设置children选中:  children\", children)\r\n            setChecked(children);\r\n            function setChecked(children) {\r\n                if (Array.isArray(children)) {\r\n                    children.forEach(item => {\r\n                        thisTable.checkedKeys[item.key] = thisTable.checkedKeys[key];\r\n                        if (Array.isArray(item.children)) {\r\n                            setChecked(item.children);\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    /* 复选框change事件(单选) */\r\n    const checkBoxChange_radio = (data, key) => {\r\n\r\n        if (thisTable.checkedKeys[key]) {\r\n            thisTable.checkedKeys = {};\r\n        } else {\r\n            thisTable.checkedKeys = { [key]: true };\r\n        }\r\n\r\n        // thisTable.isCheckedHasChild\r\n    };\r\n\r\n    /* 复选框选中事件 */\r\n    const onCheckboxChangeChild = (text, record, index, e) => {\r\n        e.stopPropagation();\r\n        if (checkedType === 'radio') {\r\n            //单选\r\n            checkBoxChange_radio(thisTable.data, record.key);\r\n        } else {\r\n            //多选\r\n            itemCheckBoxChange(thisTable.data, record.key);\r\n        }\r\n        if (isFunction(checkboxChange)) {\r\n            checkboxChange(record, index, e);\r\n        }\r\n\r\n        setStateEve();\r\n    };\r\n\r\n    /* 查找对应的行数据 */\r\n    const findItem = (data, key) => {\r\n        let res = null;\r\n        let f = data => {\r\n            data.map(item => {\r\n                if (item.rowId === key) {\r\n                    res = item;\r\n                    return true;\r\n                } else if (Array.isArray(item.values.children)) {\r\n                    let r = f(item.values.children);\r\n                    if (r) {\r\n                        return false;\r\n                    }\r\n                }\r\n            });\r\n        };\r\n        f(data);\r\n        return res;\r\n    };\r\n\r\n    // 处理模板\r\n    const createNewCol = data => {\r\n        const multiYes = thisTable.multilingual && thisTable.multilingual['insert-tree-table-009'];\r\n        const multiNo = thisTable.multilingual && thisTable.multilingual['insert-tree-table-010'];\r\n        let newArr = [];\r\n        data.forEach(item => {\r\n            if (item.visible) {\r\n                item._width = item._width || item.width || 120;\r\n                item.width = item.width || 120;\r\n                item.title = (\r\n                    <span\r\n                        fieldid={getSysFieldid(item.attrcode || 'opr')}\r\n                        style={{ color: defaultColor.includes(item.color) ? '' : item.color }}\r\n                    >\r\n                        {' '}\r\n                        {item.label}{' '}\r\n                    </span>\r\n                );\r\n                item.dataIndex = item.attrcode;\r\n                if (item.itemtype !== 'customer' && item.itemtype !== 'numberindex') {\r\n                    if (!item.hasOwnProperty('render')) {\r\n                        item.render = (text, record, index) => {\r\n                            if (record && record.values.hasOwnProperty(item.attrcode)) {\r\n                                if (item.itemtype === 'switch') {\r\n                                    return (\r\n                                        <span fieldid={getSysFieldid(item.attrcode)}\r\n                                            onMouseDown={e=>{\r\n                                                onCellMouseDown && onCellMouseDown(record, index, item.attrcode, item, e);  \r\n                                            }}\r\n                                        >\r\n                                            {record.values[item.attrcode].value ? multiYes : multiNo}\r\n                                        </span>\r\n                                    );\r\n                                } else {\r\n                                    let langIndex;\r\n                                    let langAttrCode;\r\n                                    let context = '';\r\n                                    if (item.itemtype === 'residtxt') {\r\n                                        let LangCode = getLangCode();\r\n                                        let loginLang = item.languageMeta.filter(i => i.languageCode == LangCode);\r\n                                        if (loginLang[0]) {\r\n                                            langIndex = loginLang[0].index == '1' ? '' : loginLang[0].index;\r\n                                            langAttrCode = item.attrcode + langIndex;\r\n                                        }\r\n                                    }\r\n                                    if (\r\n                                        langAttrCode &&\r\n                                        (record.values[langAttrCode].display || record.values[langAttrCode].value)\r\n                                    ) {\r\n                                        context =\r\n                                            record.values[langAttrCode].display ||\r\n                                            record.values[langAttrCode].value ||\r\n                                            '';\r\n                                    } else {\r\n                                        context =\r\n                                            record.values[item.attrcode].display ||\r\n                                            record.values[item.attrcode].value ||\r\n                                            '';\r\n                                    }\r\n\r\n                                    const fixedStyle = { display: '' };\r\n\r\n                                    if (item.fixed && item.fixed === 'left') {\r\n                                        if (item.width) {\r\n                                            let width = String(item.width).replace('px', '');\r\n                                            if (width != '120' && showCheckBox) {\r\n                                                fixedStyle.width = item.width;\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                    if (typeof context != 'string') {\r\n                                        context += '';\r\n                                    }\r\n                                    // 添加高亮 by bbqin\r\n                                    let searchValue = thisTable.searchValue || '';\r\n                                    const searchValueLow = searchValue.toLocaleLowerCase();\r\n                                    const contextLow = context.toLocaleLowerCase();\r\n                                    let beforeStr = '';\r\n                                    let afterStr = context;\r\n                                    const index = contextLow.indexOf(searchValueLow);\r\n                                    if (searchValue && index !== -1) {\r\n                                        beforeStr = context.substr(0, index);\r\n                                        afterStr = context.substr(index + searchValue.length);\r\n                                        searchValue = context.substr(index, searchValue.length);\r\n                                    }\r\n                                    return (\r\n                                        <Cell\r\n                                            item={item}\r\n                                            beforeStr={beforeStr}\r\n                                            afterStr={afterStr}\r\n                                            searchValue={searchValue}\r\n                                            fixedStyle={fixedStyle}\r\n                                            context={context}\r\n                                            isEllipsis={thisTable.isEllipsis}\r\n                                            multipleRowCell={multipleRowCell}\r\n                                            index={index}\r\n                                            record={record}\r\n                                            onCellMouseDown={onCellMouseDown}\r\n                                        />\r\n                                    );\r\n                                }\r\n                            } else {\r\n                                return <span\r\n                                    style={{\r\n                                        width:'100%',\r\n                                        height: '100%',\r\n                                        display: 'inline-block'\r\n                                    }}\r\n                                    onMouseDown={e=>{\r\n                                        onCellMouseDown && onCellMouseDown(record, index, item.attrcode, item, e);  \r\n                                    }}\r\n                                ></span>;\r\n                            }\r\n                        };\r\n                    }\r\n                } else if (\r\n                    item.itemtype === 'customer' &&\r\n                    item.hasOwnProperty('render') &&\r\n                    item.alreadyAssignment === undefined\r\n                ) {\r\n                    let Irender = item.render;\r\n                    item.alreadyAssignment = true;\r\n                    item.render = (text, record, index) => {\r\n                        return (\r\n                            <span fieldid={getSysFieldid('opr')} className={STOP_CHECK_OPERATION_ELEMENT} \r\n                                onMouseDown={e=>{\r\n                                    onCellMouseDown && onCellMouseDown(record, index, item.attrcode, item, e);  \r\n                                }}\r\n                            >\r\n                                {Irender(text, record, index)}\r\n                            </span>\r\n                        );\r\n                    };\r\n                }\r\n                newArr.push(item);\r\n            }\r\n        });\r\n        let defaultColumns = [\r\n            {\r\n                title: <span fieldid={getSysFieldid('firstcol')} />,\r\n                attrcode: 'checkbox',\r\n                dataIndex: 'checkbox',\r\n                itemtype: 'customer',\r\n                width: '100px',\r\n                _width: '100px',\r\n                render: (text, record, index) => {\r\n                    // let item = findItem( thisTable.data, record.key);\r\n                    // console.log(record, index);\r\n                    if (showCheckBox) {\r\n                        return (\r\n                            <Checkbox\r\n                                onMouseDown={e=>{\r\n                                    onCellMouseDown && onCellMouseDown(record, index, 'checkbox', {\r\n                                        attrcode: 'checkbox',\r\n                                        itemtype: 'customer'\r\n                                    }, e);  \r\n                                }}\r\n                                className=\"table-checkbox\"\r\n                                checked={thisTable.checkedKeys[record.key]}\r\n                                onClick={onCheckboxChangeChild.bind(this, text, record, index)}\r\n                            />\r\n                        );\r\n                    }\r\n                },\r\n            },\r\n        ];\r\n\r\n        if (newArr[0].fixed && newArr[0].fixed == 'left') {\r\n            defaultColumns[0].fixed = 'left';\r\n        }\r\n\r\n        let resArr = showCheckBox ? defaultColumns.concat(newArr) : newArr;\r\n        // 给第一行增加图标\r\n        const oldFirstColRender = resArr[0].render;\r\n        resArr[0].render = null;\r\n        resArr[0].render = (text, record, index) => {\r\n            let expendSwich;\r\n            if ((Object.prototype.toString.call(record.isLeaf) == '[object Boolean]' && !record.isLeaf) ||\r\n                (Object.prototype.toString.call(record.isleaf) == '[object Boolean]' && !record.isleaf)) {\r\n                expendSwich = thisTable.expandedKeys.includes(record.key) ? (\r\n                    <i\r\n                        className={`icon iconfont  icon-wenjianjiadakai tree-wenjian treeTableIcon ${STOP_CHECK_ELEMENT}`}\r\n                    />\r\n                ) : (\r\n                        <i className={`icon iconfont  icon-wenjianjia tree-wenjian treeTableIcon ${STOP_CHECK_ELEMENT}`} />\r\n                    );\r\n            } else {\r\n                expendSwich = <i className=\"dian\" style={{ display: 'none' }} />;\r\n            }\r\n            const res = oldFirstColRender(text, record, index);\r\n\r\n            if (\r\n                res &&\r\n                res.props &&\r\n                res.props.children &&\r\n                res.props.children[0] &&\r\n                res.props.children[0].props &&\r\n                res.props.children[0].props.className === 'expend-switch'\r\n            ) {\r\n                return res;\r\n            }\r\n\r\n            if (res && res.props && res.props.className === 'table-checkbox') {\r\n                return (\r\n                    <span fieldid={getSysFieldid('firstcol')}\r\n                        onMouseDown={e=>{\r\n                            onCellMouseDown && onCellMouseDown(record, index, 'checkbox', {\r\n                                attrcode: 'checkbox',\r\n                                itemtype: 'customer'\r\n                            }, e);  \r\n                        }}\r\n                    >\r\n                        <span className=\"first-col\">{res}</span>\r\n                        <span className=\"expend-switch\">{expendSwich}</span>\r\n                    </span>\r\n                );\r\n            }\r\n\r\n            return (\r\n                <span\r\n                    fieldid={getSysFieldid('firstcol') }\r\n                    onMouseDown={e=>{\r\n                        onCellMouseDown && onCellMouseDown(record, index, 'checkbox', {\r\n                            attrcode: 'checkbox',\r\n                            itemtype: 'customer'\r\n                        }, e);  \r\n                    }}\r\n                   \r\n                    className={\r\n                        classnames({ zaiyihang: showCheckBox })\r\n                    }\r\n                >\r\n                    <span className=\"expend-switch\">{expendSwich}</span>\r\n                    <span className=\"first-col\">{res}</span>\r\n                </span >\r\n            );\r\n        };\r\n\r\n        // 给第一列追加宽度\r\n        let width = resArr[0]._width;\r\n        if (!flag && width) {\r\n            if (typeof width === 'string') {\r\n                if (width.includes('px')) {\r\n                    width = width.replace('px', '');\r\n                }\r\n                width = Number(width);\r\n            }\r\n            width += countDeep(cp) * 16;\r\n            flag = true;\r\n        }\r\n        resArr[0].width = width;\r\n        return resArr;\r\n    };\r\n\r\n    //\t展开行\r\n    const onExpand = (status, item, e) => {\r\n        if (status) {\r\n            if (expandEve && typeof expandEve === 'function') {\r\n                thisTable.currentRow = item;\r\n                expandEve(item, thisTable.isCheckedHasChild);\r\n            }\r\n        } else {\r\n            if (isFunction(collapandEve)) {\r\n                collapandEve(item);\r\n            }\r\n        }\r\n        setStateEve();\r\n    };\r\n\r\n    // 新增节点弹出框内容\r\n    const modalContent = () => {\r\n        return (\r\n            <div className=\"addModal\">\r\n                {this.form.createForm(formId, { onAfterEvent })}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    // 删除 事件回调\r\n    const delNodeEve = () => {\r\n        if (isFunction(delNodeCallBack)) {\r\n            delNodeCallBack(formId);\r\n        }\r\n    };\r\n\r\n    // 模态框确定按钮事件回调\r\n    const beSureBtnClick = () => {\r\n        let isValid = this.form.isCheckNow(formId);\r\n        if (!isValid) {\r\n            return false;\r\n        }\r\n        let data = this.form.getAllFormValue(formId).rows[0];\r\n        if (thisTable.modalType === 'add') {\r\n            data.status = 2;\r\n            if (isFunction(addNodeCallBack)) {\r\n                addNodeCallBack(data, thisTable.currentRow);\r\n            }\r\n        } else if (thisTable.modalType === 'edit') {\r\n            if (isFunction(editNodeCallBack)) {\r\n                editNodeCallBack(data, thisTable.currentRow);\r\n            }\r\n        }\r\n        this.modal.close('treeTableManyColModal');\r\n    };\r\n\r\n    const onRowDoubleClick = (record, index, event) => {\r\n        if (isFunction(ncOnRowDoubleClick)) {\r\n            ncOnRowDoubleClick(record, index, event);\r\n        }\r\n    };\r\n\r\n    // const getColSetConfig = () => { //---by liuxis 鼠标不做列设置\r\n    //   const appcode = pageTo.getAppCode();\r\n    //   const pagecode = pageTo.getPageCode();\r\n    //   const areaCode = id;\r\n    //   const areaId = this.state.meta[areaCode] && this.state.meta[areaCode].oid;\r\n    //   const code = this.state.meta.code;\r\n    //   const pageId = this.state.meta.pageid;\r\n    //   return { appcode, pagecode, areaCode, areaId, code, pageId };\r\n    // };\r\n\r\n    /**\r\n    * @param row 行数据\r\n    * @param index 行数\r\n    * @param e 事件源\r\n    */\r\n    const onRowClick = (row, index, e) => {\r\n        thisTable.currentSelectedRow = row;\r\n        // 为了避免和新开发的行框选点选区域选事件冲突\r\n        if (e.ctrlKey || e.shiftKey || e.metaKey) {\r\n            return;\r\n        }\r\n        if (showCheckBox && stopCheckBoxChange(e, checkOnRowClick)) return;\r\n        if (isFunction(onRowClickEve)) {\r\n            onRowClickEve(row, index, e);\r\n        }\r\n        onCheckboxChangeChild(null, row, index, e);\r\n    };\r\n\r\n    const rowClassName = (record, current) => {\r\n        if (thisTable.currentSelectedRow && thisTable.currentSelectedRow.key == record.key) {\r\n            return 'tree-table-col-selected';\r\n        } else {\r\n            return '';\r\n        }\r\n\r\n    };\r\n\r\n    const createContextMenu = () => {\r\n        let multilingual = thisTable.multilingual || {};\r\n\r\n        return <Fragment>\r\n            {\r\n                !hideExpandAll && <li\r\n                    className={\r\n                        classnames({\r\n                            'menu expand-all': true\r\n                        })\r\n                    }\r\n                    onClick={() => {\r\n                        let expandedKeys = [];\r\n                        getAllExpandKeys(thisTable.data)\r\n                        thisTable.expandedKeys = expandedKeys;\r\n                        setStateEve();\r\n                        function getAllExpandKeys(data) {\r\n                            data.forEach(item => {\r\n                                expandedKeys.push(item.key);\r\n                                if (Array.isArray(item.children)) {\r\n                                    getAllExpandKeys(item.children);\r\n                                }\r\n                            })\r\n                        }\r\n                        //若为异步，调用业务全部展开回调\r\n                        isFunction(expandAllEve) && expandAllEve()\r\n                    }}\r\n                >\r\n                    {multilingual['insert-tree-table-0013'] || '全部展开'}\r\n                </li>\r\n            }\r\n            <li\r\n                className={\r\n                    classnames({\r\n                        'menu close-all': true\r\n                    })\r\n                }\r\n                onClick={() => {\r\n                    thisTable.expandedKeys = [];\r\n                    setStateEve();\r\n                    //业务全部收起的回调\r\n                    isFunction(closeAllEve) && closeAllEve();\r\n                }}\r\n            >\r\n                {multilingual['insert-tree-table-0014'] || '全部收起'}\r\n            </li>\r\n\r\n            {\r\n                !hideIncludeChild && <li\r\n                    className={\r\n                        classnames({\r\n                            'menu include-child': true\r\n                        })\r\n                    }\r\n                    onClick={() => {\r\n                        thisTable.isCheckedHasChild = !thisTable.isCheckedHasChild;\r\n                        setStateEve();\r\n                    }}\r\n                >\r\n                    <Checkbox\r\n                        className={'include-child-checkbox'}\r\n                        checked={thisTable.isCheckedHasChild}\r\n                        onChange={() => {\r\n                            thisTable.isCheckedHasChild = !thisTable.isCheckedHasChild;\r\n                            setStateEve();\r\n                        }}\r\n                    />\r\n                    <span className={\r\n                        classnames({\r\n                            'include-child-selected': thisTable.isCheckedHasChild\r\n                        })\r\n                    }> {multilingual['insert-tree-table-0015'] || '包含下级'}</span>\r\n                </li>\r\n            }\r\n\r\n            {isFunction(extendRightMenu) && extendRightMenu()}\r\n\r\n        </Fragment>\r\n\r\n    }\r\n\r\n\r\n    return (\r\n        <div id={id} className=\"treeTableManyCol\" fieldid={getSysFieldid(`${fieldid || id}_table`)}>\r\n            {showCheckBox && checkedType !== 'radio' ? (\r\n                <NCSelectable\r\n                    canvas={`#${id}`}\r\n                    // 注意可以加下前后空格\r\n                    selector=\" tbody tr \"\r\n                    unitKey=\"key\"\r\n                    disabled={checkedType === 'radio' || 'slide'} // 可选值 true false 'shift' 'ctrl' 'slide'\r\n                    userSelect={true} // 启用用户文字选中\r\n                    // unitsData={fullDataArray}  // 用dom做shift 操作 数据的问题是目前顺序不对 // 数组改为对象 给下面使用\r\n                    // 开始项  主要配合外部的 单选事件处理\r\n                    startItem=\"\"\r\n                    onSelect={(selectedRowKeys, hotkey, { currentKey }) => {\r\n                        // 树状数据不太好处理 需要一个拉平数据\r\n                        let rowLen = thisTable.data.length;\r\n                        if (rowLen > 0) {\r\n                            if (hotkey === 'ctrl') {\r\n                                thisTable.checkedKeys[currentKey] = selectedRowKeys[currentKey];\r\n                                // thisTable.isCheckedHasChild\r\n\r\n                                this.setState({ treeTableCol: this.state.treeTableCol }, () => {\r\n                                    let selectedRecord = fullDataArray[currentKey];\r\n                                    // console.log(fullDataArray, currentKey, selectedRecord, '数据的问题处理');\r\n                                    if (isFunction(checkboxChange) && selectedRecord) {\r\n                                        checkboxChange(selectedRecord, selectedRecord.rowIndex, {});\r\n                                    }\r\n                                });\r\n                            } else {\r\n                                thisTable.checkedKeys = {};\r\n                                for (const key in selectedRowKeys) {\r\n                                    if (selectedRowKeys.hasOwnProperty(key)) {\r\n                                        thisTable.checkedKeys[key] = selectedRowKeys[key];\r\n\r\n                                        // thisTable.isCheckedHasChild\r\n                                    }\r\n                                }\r\n                                // TODO 先使用循环调用时间 如果不行的话  后面需要单独加一个回调\r\n                                this.setState({ treeTableCol: this.state.treeTableCol }, () => {\r\n\r\n                                    for (const key in selectedRowKeys) {\r\n                                        if (selectedRowKeys.hasOwnProperty(key) && isFunction(checkboxChange)) {\r\n                                            let selectedRecord = fullDataArray[key];\r\n                                            selectedRowKeys[key] && checkboxChange(selectedRecord, selectedRecord.rowIndex, {});\r\n                                        }\r\n                                    }\r\n                                });\r\n                            }\r\n\r\n                        }\r\n                    }}\r\n                />\r\n            ) : (\r\n                    ''\r\n                )}\r\n            <Table\r\n                lazyload={isLazyload}\r\n                className=\"tree-table-manyCol-container\"\r\n                expandedRowKeys={thisTable.expandedKeys} //搜索节点关键字后要展开的父节点\r\n                columns={createNewCol(columns.items)}\r\n                columnKey='attrcode'\r\n                data={createNewDataRes}\r\n                onExpand={onExpand.bind(this)}\r\n                onExpandedRowsChange={expandedRowKeys => {\r\n                    thisTable.expandedKeys = expandedRowKeys;\r\n                    setStateEve();\r\n                }}\r\n                bodyDisplayInRow={false}\r\n                //折行回调\r\n                foldingRowChange={isEllipsis => {\r\n                    thisTable.isEllipsis = isEllipsis\r\n                    setStateEve();\r\n                }}\r\n                scroll={scrollConfig || { x: true, y: this.state.treeTableCol[id].tableHeight }}\r\n                onRowDoubleClick={onRowDoubleClick}\r\n                adaptionHeight={adaptionHeight}\r\n                inModal={inModal}\r\n                onRowClick={onRowClick}\r\n                isDrag={isDrag}\r\n                ref={dom => {\r\n                    this.dom = ReactDOM.findDOMNode(dom);\r\n                }}\r\n                rowClassName={rowClassName}\r\n                addBlankCol={addBlankCol}\r\n                extendRightMenu={\r\n                    showContextMenu ? createContextMenu() :\r\n                    isFunction(extendRightMenu) ? extendRightMenu() : null\r\n                }\r\n                cancelCustomRightMenu={true}\r\n            //bodyStyle={{ height: this.state.treeTableCol[id].tableHeight }}\r\n            // colsSettingParam={getColSetConfig()}\r\n            />\r\n\r\n            {thisTable.multilingual ? (\r\n                this.modal.createModal('delNode', {\r\n                    title: thisTable.multilingual['insert-tree-table-001'],\r\n                    content: thisTable.multilingual['insert-tree-table-002'],\r\n                    beSureBtnClick: delNodeEve.bind(this),\r\n                    backdrop: 'static',\r\n                })\r\n            ) : null}\r\n\r\n            {this.modal.createModal('treeTableManyColModal', {\r\n                content: modalContent.call(this),\r\n                beSureBtnClick: beSureBtnClick.bind(this),\r\n                cancelBtnClick: () => {\r\n                    this.modal.close('treeTableManyColModal');\r\n                },\r\n                size: 'lg',\r\n                userControl: true,\r\n                backdrop: 'static',\r\n            })}\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default TreeTableManyCol;\r\n","/*\r\n * @Descripttion: \r\n * @version: \r\n * @Author: bbq\r\n * @Date: 2020-12-11 11:25:40\r\n * @LastEditors: bbq\r\n * @LastEditTime: 2021-01-14 11:08:05\r\n */\r\nimport TreeTableManyCol from './treeTableManyCol';\r\nimport TreeTable from './treeTable';\r\nimport useTreeTable from './store';\r\nimport {\r\n    initTreeTableData,\r\n    setChildNode,\r\n    editRowEve,\r\n    addChildRowEve,\r\n    addBrotherRow,\r\n    delRowByPk,\r\n    createNewData,\r\n    getAllValue,\r\n    getValueByRowId,\r\n    getExpandedRowKeys,\r\n    showModal,\r\n    emptyAllData,\r\n    openRow,\r\n    closeRow,\r\n    getSelectedRow,\r\n    searchTreeTable,\r\n    updataDataSource,\r\n    setCheckedKeys,\r\n    setSelectedRow,\r\n    updateChildRow,\r\n    treeTableCol,\r\n} from './methods';\r\n\r\nlet TreeTableAPI = {\r\n    TreeTableManyCol,\r\n    treeTableCol,\r\n    initTreeTableData,\r\n    setChildNode,\r\n    editRowEve,\r\n    addChildRowEve,\r\n    addBrotherRow,\r\n    delRowByPk,\r\n    createNewData,\r\n    getAllValue,\r\n    getValueByRowId,\r\n    getExpandedRowKeys,\r\n    showModal,\r\n    emptyAllData,\r\n    openRow,\r\n    closeRow,\r\n    getSelectedRow,\r\n    searchTreeTable,\r\n    updataDataSource,\r\n    setCheckedKeys,\r\n    setSelectedRow,\r\n    updateChildRow,\r\n};\r\n\r\n/**\r\n * 兼容旧版本创建表格方法\r\n * @param {string} mainCode 表格主区域编码\r\n * @param {object} config 表格业务配置\r\n */\r\n\r\nexport default function treeTableCompatible() {\r\n    this.register(\"treeTable\", useTreeTable); // 生成 this.treeTableDataSource[id]\r\n    return { ...apiBindPage.call(this, TreeTableAPI) };\r\n}\r\n\r\nfunction apiBindPage(simpleTableAPI) {\r\n    let res = {}\r\n    for (let pop of Object.keys(simpleTableAPI)) {\r\n        res[pop] = simpleTableAPI[pop].bind(this);\r\n    }\r\n    return res;\r\n}\r\n\r\ntreeTableCompatible.component = TreeTable;\r\ntreeTableCompatible.displayName = \"TreeTable\";\r\ntreeTableCompatible.unfinished = [\"treeTableUnFinishedApi\"];\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__42__;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Con = exports.Row = exports.Col = undefined;\n\nvar _Col2 = require('./Col');\n\nvar _Col3 = _interopRequireDefault(_Col2);\n\nvar _Row2 = require('./Row');\n\nvar _Row3 = _interopRequireDefault(_Row2);\n\nvar _Layout = require('./Layout');\n\nvar _Layout2 = _interopRequireDefault(_Layout);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nexports.Col = _Col3[\"default\"];\nexports.Row = _Row3[\"default\"];\nexports.Con = _Layout2[\"default\"];","/*\r\n * @Descripttion: \r\n * @version: \r\n * @Author: jinfjk\r\n * @Date: 2020-08-17 09:56:43\r\n * @LastEditors: bbq\r\n * @LastEditTime: 2020-09-28 15:34:56\r\n */\r\nconst FORM_BROWSE = 'browse';\r\n/**\r\n * @desc 如果以下条件只要有一个不满足就停止执行下面的代码\r\n * @param props {object}\r\n * @param autoFocusDeferred {boolean} true -> 不执行， false -> 执行\r\n * @param status {string} 此状态是form内部的状态，如果此状态不为空优先读取此状态\r\n * @returns {boolean}\r\n */\r\nfunction stopFormHotKeyChange({ props, autoFocusDeferred, status }) {\r\n    let { name } = props;\r\n    let { withHotKeyChange, meta } = props.getHotKeyConfig ? props.getHotKeyConfig() : {};\r\n\r\n    if (!props.getHotKeyConfig) {\r\n        return console.warn('some form hotkey invalid');\r\n    }\r\n\r\n    let moduleType = meta[name] &&\r\n        meta[name]['moduletype'];\r\n\r\n    let formStatus;\r\n    if (status) {\r\n        formStatus = status;\r\n    } else {\r\n        //首先判断meta中是否存在name ？ (如果有就去取meta里的值，如果meta里没有设置status默认设值浏览态) ：（meta中不存在name默认设值浏览态）\r\n        formStatus = meta[name] ? meta[name].status || FORM_BROWSE : FORM_BROWSE;\r\n    }\r\n\r\n    if (name === undefined || withHotKeyChange === false || moduleType === undefined || autoFocusDeferred || formStatus === FORM_BROWSE) {\r\n        return true;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nfunction stopCardTableHotKeyChange(props) {\r\n    let { name, high_hotkey, getHotKeyConfig } = props;\r\n    // console.log(high_hotkey, getHotKeyConfig)\r\n    let { withHotKeyChange, meta } = props.getHotKeyConfig ? props.getHotKeyConfig() : {};\r\n    if (!props.getHotKeyConfig) {\r\n        return console.warn('some form hotkey invalid');\r\n    }\r\n    let { store, tableId } = high_hotkey;\r\n    if (!store) return true;\r\n\r\n    let notEditStatus = store.getTableProps('status') !== 'edit';\r\n    let rows = store.getData();\r\n    let columns = meta[name] && meta[name].items;\r\n\r\n    rows = rows === undefined ? [] : rows;\r\n\r\n    //状态不是编辑状态，无rows数据, 业务组设置withHotKeyChange->false时停止生成keyMap\r\n    return (notEditStatus || rows.length === 0 || !withHotKeyChange || columns === undefined);\r\n}\r\n\r\nfunction stopEditTableHotKeyChange(props, autoFocusDeferred) {\r\n    let { name, high_hotkey, getHotKeyConfig } = props;\r\n    // console.log(high_hotkey, getHotKeyConfig)\r\n    let { withHotKeyChange, meta } = props.getHotKeyConfig ? props.getHotKeyConfig() : {};\r\n    if (!props.getHotKeyConfig) {\r\n        return console.warn('some form hotkey invalid');\r\n    }\r\n    let { store, tableId } = high_hotkey;\r\n    if (!store) return true;\r\n\r\n    let notEditStatus = store.getTableProps('status') !== 'edit';\r\n    let rows = store.getData();\r\n    let columns = meta[name] && meta[name].items;\r\n\r\n    rows = rows === undefined ? [] : rows;\r\n\r\n    //autoFocusDeferred == true || 状态不是编辑状态，rows无数据 并且业务组设置withHotKeyChange->false时才停止生成keyMap\r\n    return (autoFocusDeferred || notEditStatus || rows.length === 0 || !withHotKeyChange || columns === undefined);\r\n\r\n}\r\n\r\nexport {\r\n    stopFormHotKeyChange,\r\n    stopCardTableHotKeyChange,\r\n    stopEditTableHotKeyChange,\r\n};\r\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","import { config as CONFIG } from '@platform/api'\r\nimport { matchItemFocus } from '../../WithAutoFocus/executeAutoFocus';\r\n\r\nfunction findNextFocusItemInForm(nextModuleKeyMap, nextModuleId) {\r\n  let wrapper = document.querySelector(`#${CONFIG.hotKeyModuleIdPrefix}-${nextModuleId}`);\r\n  let formItem = wrapper.querySelector(`.${nextModuleKeyMap.firstItem}`);\r\n  let type = getFormType(formItem);\r\n  matchItemFocus[type] === undefined\r\n    ? matchItemFocus['normal'](wrapper)\r\n    : matchItemFocus[type](wrapper);\r\n}\r\n\r\nfunction findLastFocusItemInForm(nextModuleKeyMap, nextModuleId) {\r\n\r\n}\r\n\r\nfunction getFormType(formItem) {\r\n  return Array.prototype.find.call(formItem.classList, function (item) {\r\n    return item.startsWith('js-type');\r\n  }).split('-')\r\n    .pop();\r\n}\r\n\r\nexport {\r\n  findNextFocusItemInForm,\r\n  findLastFocusItemInForm\r\n};\r\n","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","/**\r\n * @desc：有些行整行不可编辑，添加了标示tabindex = -1,一直循环找到可编辑的行数\r\n * @param tr {node} 当前行不可编辑的行\r\n * @param needJumpTimes {number} 向上/下查找的行数\r\n * @param direction {string}  'down'/ 'up' 向上或向下查找\r\n * @return 返回需要向上/下查找的行数\r\n */\r\nexport default function calculateNeedJumpTimes(tr, needJumpTimes, direction) {\r\n    let tempTr = tr;\r\n    let tempNeedJumpTimes = needJumpTimes;\r\n    while (tempTr !== null && tempTr.getAttribute('tabindex') === '-1') {\r\n        tempNeedJumpTimes += 1;\r\n        tempTr = direction === 'up' ? tempTr.previousElementSibling : tempTr.nextElementSibling;\r\n    }\r\n    return tempNeedJumpTimes;\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__56__;","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__6__;","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","/**\n * lodash 3.0.3 (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright 2012-2016 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the [`toStringTag`](http://ecma-international.org/ecma-262/6.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/**\n * Checks if `value` is classified as a boolean primitive or object.\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is correctly classified, else `false`.\n * @example\n *\n * _.isBoolean(false);\n * // => true\n *\n * _.isBoolean(null);\n * // => false\n */\nfunction isBoolean(value) {\n  return value === true || value === false ||\n    (isObjectLike(value) && objectToString.call(value) == boolTag);\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\nmodule.exports = isBoolean;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }\n\nvar propTypes = {\n  componentClass: _propTypes2[\"default\"].oneOfType([_propTypes2[\"default\"].element, _propTypes2[\"default\"].string]),\n\n  /**\n   * xs显示列数\n   */\n  xs: _propTypes2[\"default\"].number,\n  /**\n   * sm显示列数\n   */\n  sm: _propTypes2[\"default\"].number,\n  /**\n   * md显示列数\n   */\n  md: _propTypes2[\"default\"].number,\n  /**\n   * lg显示列数\n   */\n  lg: _propTypes2[\"default\"].number,\n  /**\n   * xs偏移列数\n   */\n  xsOffset: _propTypes2[\"default\"].number,\n  /**\n   * sm偏移列数\n   */\n  smOffset: _propTypes2[\"default\"].number,\n  /**\n   * md偏移列数\n   */\n  mdOffset: _propTypes2[\"default\"].number,\n  /**\n   * lg偏移列数\n   */\n  lgOffset: _propTypes2[\"default\"].number,\n  /**\n   * xs右偏移列数\n   */\n  xsPush: _propTypes2[\"default\"].number,\n  /**\n   * sm右偏移列数\n   */\n  smPush: _propTypes2[\"default\"].number,\n  /**\n   * md右偏移列数\n   */\n  mdPush: _propTypes2[\"default\"].number,\n  /**\n   * lg右偏移列数\n   */\n  lgPush: _propTypes2[\"default\"].number,\n  /**\n   * xs左偏移列数\n   */\n  xsPull: _propTypes2[\"default\"].number,\n  /**\n   * sm左偏移列数\n   */\n  smPull: _propTypes2[\"default\"].number,\n  /**\n   * md左偏移列数\n   */\n  mdPull: _propTypes2[\"default\"].number,\n  /**\n   * lg左偏移列数\n   */\n  lgPull: _propTypes2[\"default\"].number\n};\n\nvar defaultProps = {\n  componentClass: 'div',\n  clsPrefix: 'u-col'\n};\n\nvar DEVICE_SIZES = ['lg', 'md', 'sm', 'xs'];\n\nvar Col = function (_Component) {\n  _inherits(Col, _Component);\n\n  function Col() {\n    _classCallCheck(this, Col);\n\n    return _possibleConstructorReturn(this, _Component.apply(this, arguments));\n  }\n\n  Col.prototype.render = function render() {\n    var _props = this.props,\n        Component = _props.componentClass,\n        className = _props.className,\n        clsPrefix = _props.clsPrefix,\n        others = _objectWithoutProperties(_props, ['componentClass', 'className', 'clsPrefix']);\n\n    var tbClass = [];\n    /**\n     * 对传入props做样式转化\n     * @type {[type]}\n     */\n    DEVICE_SIZES.forEach(function (size) {\n      function popProp(propSuffix, modifier) {\n        var propName = '' + size + propSuffix;\n        var propValue = others[propName];\n\n        if (propValue != undefined && propValue != null) {\n          tbClass.push(clsPrefix + '-' + size + modifier + '-' + propValue);\n        }\n\n        delete others[propName];\n      }\n\n      popProp('', '');\n      popProp('Offset', '-offset');\n      popProp('Push', '-push');\n      popProp('Pull', '-pull');\n    });\n\n    return _react2[\"default\"].createElement(\n      Component,\n      _extends({\n        className: (0, _classnames2[\"default\"])(tbClass, className)\n      }, others),\n      this.props.children\n    );\n  };\n\n  return Col;\n}(_react.Component);\n\nCol.defaultProps = defaultProps;\nCol.propTypes = propTypes;\n\nexports[\"default\"] = Col;\nmodule.exports = exports['default'];","/**\n * lodash 3.0.2 (Custom Build) <https://lodash.com/>\n * Build: `lodash modern modularize exports=\"npm\" -o ./`\n * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n * Available under MIT license <https://lodash.com/license>\n */\n\n/**\n * Checks if `value` is the [language type](https://es5.github.io/#x8) of `Object`.\n * (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(1);\n * // => false\n */\nfunction isObject(value) {\n  // Avoid a V8 JIT bug in Chrome 19-20.\n  // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }\n\nvar propTypes = {\n  componentClass: _propTypes2[\"default\"].oneOfType([_propTypes2[\"default\"].element, _propTypes2[\"default\"].string])\n};\n\nvar defaultProps = {\n  componentClass: 'div',\n  clsPrefix: 'u-row'\n};\n\nvar Row = function (_Component) {\n  _inherits(Row, _Component);\n\n  function Row() {\n    _classCallCheck(this, Row);\n\n    return _possibleConstructorReturn(this, _Component.apply(this, arguments));\n  }\n\n  Row.prototype.render = function render() {\n    var _props = this.props,\n        Component = _props.componentClass,\n        clsPrefix = _props.clsPrefix,\n        className = _props.className,\n        others = _objectWithoutProperties(_props, ['componentClass', 'clsPrefix', 'className']);\n\n    var bsclass = '' + clsPrefix;\n\n    return _react2[\"default\"].createElement(\n      Component,\n      _extends({}, others, {\n        className: (0, _classnames2[\"default\"])(bsclass, className)\n      }),\n      this.props.children\n    );\n  };\n\n  return Row;\n}(_react.Component);\n\nRow.propTypes = propTypes;\nRow.defaultProps = defaultProps;\n\nexports[\"default\"] = Row;\nmodule.exports = exports['default'];","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }\n\nvar propTypes = {\n  /**\n   * Adds `container-fluid` class.\n   */\n  fluid: _propTypes2[\"default\"].bool,\n  /**\n   * You can use a custom element for this component\n   */\n  componentClass: _propTypes2[\"default\"].oneOfType([_propTypes2[\"default\"].element, _propTypes2[\"default\"].string])\n};\n\nvar defaultProps = {\n  componentClass: 'div',\n  fluid: false,\n  clsPrefix: 'u-container'\n};\n\nvar Con = function (_React$Component) {\n  _inherits(Con, _React$Component);\n\n  function Con() {\n    _classCallCheck(this, Con);\n\n    return _possibleConstructorReturn(this, _React$Component.apply(this, arguments));\n  }\n\n  Con.prototype.render = function render() {\n    var _tbclass;\n\n    var _props = this.props,\n        fluid = _props.fluid,\n        Component = _props.componentClass,\n        clsPrefix = _props.clsPrefix,\n        className = _props.className,\n        others = _objectWithoutProperties(_props, ['fluid', 'componentClass', 'clsPrefix', 'className']);\n\n    var tbclass = (_tbclass = {}, _defineProperty(_tbclass, '' + clsPrefix, !fluid), _defineProperty(_tbclass, clsPrefix + '-fluid', fluid), _tbclass);\n\n    return _react2[\"default\"].createElement(\n      Component,\n      _extends({}, others, {\n        className: (0, _classnames2[\"default\"])(tbclass, className)\n      }),\n      this.props.children\n    );\n  };\n\n  return Con;\n}(_react2[\"default\"].Component);\n\nCon.propTypes = propTypes;\nCon.defaultProps = defaultProps;\n\nexports[\"default\"] = Con;\nmodule.exports = exports['default'];","/**\r\n *\r\n * \r\n *  shiftUp: {sequence: string, action: string}, 让下一个Table的第一个元素聚焦\r\n *  shiftDown: {sequence: string, action: string} 让上一个Table的第一个元素聚焦\r\n *\r\n * \r\n */\r\n\r\nconst keyMap = {\r\n    shiftUp: {\r\n        sequence: 'shift+up',\r\n        action: 'keydown',\r\n    },\r\n    shiftDown: {\r\n        sequence: 'shift+down',\r\n        action: 'keydown',\r\n    },\r\n    tab: {\r\n        sequence: 'tab',\r\n        action: 'keydown',\r\n    },\r\n};\r\n\r\nexport { keyMap };","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = require('./lib/ReactPropTypesSecret');\n\nfunction emptyFunction() {}\nfunction emptyFunctionWithReset() {}\nemptyFunctionWithReset.resetWarningCache = emptyFunction;\n\nmodule.exports = function() {\n  function shim(props, propName, componentName, location, propFullName, secret) {\n    if (secret === ReactPropTypesSecret) {\n      // It is still safe when called from React.\n      return;\n    }\n    var err = new Error(\n      'Calling PropTypes validators directly is not supported by the `prop-types` package. ' +\n      'Use PropTypes.checkPropTypes() to call them. ' +\n      'Read more at http://fb.me/use-check-prop-types'\n    );\n    err.name = 'Invariant Violation';\n    throw err;\n  };\n  shim.isRequired = shim;\n  function getShim() {\n    return shim;\n  };\n  // Important!\n  // Keep this list in sync with production version in `./factoryWithTypeCheckers.js`.\n  var ReactPropTypes = {\n    array: shim,\n    bool: shim,\n    func: shim,\n    number: shim,\n    object: shim,\n    string: shim,\n    symbol: shim,\n\n    any: shim,\n    arrayOf: getShim,\n    element: shim,\n    elementType: shim,\n    instanceOf: getShim,\n    node: shim,\n    objectOf: getShim,\n    oneOf: getShim,\n    oneOfType: getShim,\n    shape: getShim,\n    exact: getShim,\n\n    checkPropTypes: emptyFunctionWithReset,\n    resetWarningCache: emptyFunction\n  };\n\n  ReactPropTypes.PropTypes = ReactPropTypes;\n\n  return ReactPropTypes;\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n'use strict';\n\nvar ReactPropTypesSecret = 'SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED';\n\nmodule.exports = ReactPropTypesSecret;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nmodule.exports = setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nmodule.exports = setCacheHas;\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIsNaN = require('./_baseIsNaN'),\n    strictIndexOf = require('./_strictIndexOf');\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? strictIndexOf(array, value, fromIndex)\n    : baseFindIndex(array, baseIsNaN, fromIndex);\n}\n\nmodule.exports = baseIndexOf;\n","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseFindIndex;\n","/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\nmodule.exports = baseIsNaN;\n","/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = strictIndexOf;\n","var apply = require('./_apply');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nmodule.exports = overRest;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nmodule.exports = apply;\n","var baseSetToString = require('./_baseSetToString'),\n    shortOut = require('./_shortOut');\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nmodule.exports = setToString;\n","var constant = require('./constant'),\n    defineProperty = require('./_defineProperty'),\n    identity = require('./identity');\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nmodule.exports = baseSetToString;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nmodule.exports = shortOut;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","var Symbol = require('./_Symbol'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray');\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","/*\r\n * @Descripttion: \r\n * @version: \r\n * @Author: bbq\r\n * @Date: 2020-08-17 09:56:43\r\n * @LastEditors: bbq\r\n * @LastEditTime: 2021-01-13 13:40:50\r\n */\r\nimport React, { Component } from 'react';\r\nimport { ViewModel, config as CONFIG, PubSub } from '@platform/api'\r\n\r\nfunction TableWithAutoFocus(WrappedComponent) {\r\n    return class WithAutoFocus extends Component {\r\n        componentDidMount() {\r\n            let { store } = this.props;\r\n            this.autoFocusToken = PubSub.subscribe('autoFocus', (msg, { data, moduleId, force }) => {\r\n                let el = document.querySelector(`div[${data}=\"${data}\"] [tabindex=\"0\"]`);\r\n                let activeEl = document.activeElement;\r\n                let tableId = `${CONFIG.hotKeyModuleIdPrefix}-${moduleId}`;\r\n                console.log(tableId, activeEl, store);\r\n                if (WithAutoFocus.judgeFocus(el, activeEl, tableId, force)) {\r\n                    ViewModel.shouldAutoFocus = true;\r\n                    el.ncExecuteFocus = true;\r\n\r\n                    // 设置一个属性\r\n                    let cellselectorkey = el.getAttribute('cellselectorkey') || '';\r\n                    cellselectorkey = cellselectorkey.split('@') || [];\r\n                    store && cellselectorkey[0] && cellselectorkey[1] && store.setCellProps(cellselectorkey[0], cellselectorkey[1], { autoFocus: true }, false);\r\n\r\n                    //如果当点聚焦元素与需要聚焦的元素相同就不执行；\r\n                    !el.contains(activeEl) && el.focus();\r\n                    delete el.ncExecuteFocus;\r\n                    // 直接执行  ie下会有顺序问题\r\n                    setTimeout(() => {\r\n                        ViewModel.shouldAutoFocus = false;\r\n                    }, 100);\r\n                }\r\n            });\r\n        }\r\n\r\n        componentWillUnmount() {\r\n            this.autoFocusToken && PubSub.subscribe(this.autoFocusToken);\r\n        }\r\n\r\n        /**\r\n         * @desc: 业务中存在新增行时先调用addRow后调用setStatus的方法导致焦点在table的第一个可编辑字段，\r\n         *        而不在新增行的第一个可编辑字段上。\r\n         * @resolve: 聚集时判断table是否包含当前活跃元素且活跃元素的tabIndex不等于-1，如果包含就不去执行autoFocus\r\n         *           当前活跃元素可能是table里的操作列，全选功能里的input元素，如果是这些元素就依旧执行focus方法\r\n         * @param el 需要聚焦的元素\r\n         * @param activeEl 当前活跃的元素\r\n         * @param tableId 区域Id\r\n         * @param force true -> 强制执行\r\n         * @return {boolean}\r\n         */\r\n        static judgeFocus(el, activeEl, tableId, force) {\r\n            let tableEL = document.getElementById(tableId);\r\n            if (el) {\r\n                return activeEl.tabIndex !== -1 && tableEL && !tableEL.contains(activeEl) || force;\r\n            }\r\n        }\r\n\r\n        render() {\r\n            return (\r\n                <div\r\n                    id={`${CONFIG.hotKeyModuleIdPrefix}-${this.props.tableId || this.props.name}`}\r\n                >\r\n                    <WrappedComponent\r\n                        {...this.props}\r\n                    />\r\n                </div>\r\n\r\n            );\r\n        }\r\n    };\r\n}\r\n\r\nexport default TableWithAutoFocus;\r\n","/*\r\n * @Descripttion: \r\n * @version: \r\n * @Author: bbq\r\n * @Date: 2020-08-17 09:56:43\r\n * @LastEditors: bbq\r\n * @LastEditTime: 2021-01-27 09:49:43\r\n */\r\nimport React, { Component } from 'react';\r\nimport { PubSub } from '@platform/api';\r\nimport { HotKeys } from 'react-hotkeys';\r\nimport { keyMap } from './config/tableKeyboardMap';\r\nimport { createByModuleType } from './createKeyMap';\r\nimport { handleArrowKeyDown, keyDownOfShiftUp } from './handleKeyDown';\r\nimport { stopEditTableHotKeyChange } from './config/stopHotKeyChange';\r\nimport { findNextFocusItemInTable } from './util/findNextFocusItemInTable';\r\n\r\nfunction EditTableWithKeyboardChange(WrappedComponent) {\r\n    return class WithKeyboardChange extends Component {\r\n        constructor(props) {\r\n            super(props);\r\n            this.hotKeyWithEnter = this.hotKeyWithEnter.bind(this);\r\n        }\r\n\r\n        componentDidUpdate() {\r\n            let { autoFocusDeferred } = this.props.getHotKeyConfig ? this.props.getHotKeyConfig() : {};\r\n            if (stopEditTableHotKeyChange(this.props, autoFocusDeferred)) { return; }\r\n\r\n            createByModuleType['editTable'](this.props);\r\n        }\r\n\r\n        componentDidMount() {\r\n            this.autoFocusToken = PubSub.subscribe('autoFocus-IoC', () => {\r\n                if (stopEditTableHotKeyChange(this.props, false)) { return; }\r\n                createByModuleType['editTable'](this.props, true);\r\n            });\r\n        }\r\n\r\n        componentWillUnmount() {\r\n            this.autoFocusToken && PubSub.subscribe(this.autoFocusToken);\r\n        }\r\n\r\n        hotKeyWithEnter({ e, ViewModel, moduleId, target }) {\r\n            //阻止冒泡会影响Page/index 下的keydown 事件\r\n            //e.stopPropagation();\r\n            let eventTarget = target || e.target;\r\n            let { orderOfHotKey } = this.props.getHotKeyConfig ? this.props.getHotKeyConfig() : {};\r\n            if (!orderOfHotKey) {\r\n                console.warn('not find orderOfHotKey in getHotKeyConfig')\r\n                return;\r\n            }\r\n\r\n            let timer = setTimeout(() => {\r\n                findNextFocusItemInTable({ eventTarget, ViewModel, moduleId, orderOfHotKey });\r\n                clearTimeout(timer);\r\n            });\r\n        }\r\n\r\n        hotKeyWithArrow = ({ e, ViewModel, moduleId, itemType, target }) => {\r\n            let eventTarget = target || e.target;\r\n            let { orderOfHotKey } = this.props.getHotKeyConfig ? this.props.getHotKeyConfig() : {};\r\n            if (!orderOfHotKey) {\r\n                console.warn('not find orderOfHotKey in getHotKeyConfig')\r\n                return;\r\n            }\r\n\r\n            handleArrowKeyDown({\r\n                eventTarget,\r\n                ViewModel,\r\n                moduleId,\r\n                orderOfHotKey,\r\n                itemType,\r\n                keyCode: e.keyCode,\r\n            });\r\n        };\r\n\r\n        render() {\r\n            return (\r\n                <HotKeys\r\n                    keyMap={keyMap}\r\n                    handlers={{\r\n                        shiftUp: keyDownOfShiftUp.bind(this, this.props.moduleId),\r\n                        shiftDown: keyDownOfShiftUp.bind(this, this.props.moduleId),\r\n                    }}\r\n                >\r\n                    <WrappedComponent\r\n                        tableStatusChanged={WithKeyboardChange.tableStatusChanged}\r\n                        hotKeyWithEnter={this.hotKeyWithEnter}\r\n                        hotKeyWithArrow={this.hotKeyWithArrow}\r\n                        {...this.props}\r\n                    />\r\n                </HotKeys>\r\n            );\r\n        }\r\n    };\r\n}\r\n\r\nexport default EditTableWithKeyboardChange;\r\n","/*\r\n * @Descripttion: \r\n * @version: \r\n * @Author: bbq\r\n * @Date: 2020-08-17 09:56:43\r\n * @LastEditors: bbq\r\n * @LastEditTime: 2021-02-01 14:05:45\r\n */\r\nimport React, { Component } from 'react';\r\nimport { HotKeys } from 'react-hotkeys';\r\nimport { keyMap } from './config/tableKeyboardMap';\r\nimport { createByModuleType, deleteKeyByModuleId } from './createKeyMap';\r\nimport { keyDownOfShiftUp, handleArrowKeyDown } from './handleKeyDown';\r\nimport { stopCardTableHotKeyChange } from './config/stopHotKeyChange';\r\nimport { findNextFocusItemInTable } from './util/findNextFocusItemInTable';\r\n\r\nfunction TableWithKeyboardChange(WrappedComponent) {\r\n    return class WithKeyboardChange extends Component {\r\n        constructor(props) {\r\n            super(props);\r\n        }\r\n\r\n        componentDidUpdate() {\r\n            if (stopCardTableHotKeyChange(this.props)) { return; }\r\n\r\n            createByModuleType['table'](this.props);\r\n        }\r\n\r\n        componentWillUnmount() {\r\n            // 部分情况下KeyByModuleId 没有清除  导致创建不能直接聚焦\r\n            deleteKeyByModuleId(this.props.moduleId || this.props.name);\r\n        }\r\n\r\n        static tableStatusChanged({ props, status }) {\r\n            if (status === 'edit' && !stopCardTableHotKeyChange(props)) {\r\n                createByModuleType['table'](props);\r\n            } else {\r\n                deleteKeyByModuleId(props.moduleId);\r\n            }\r\n\r\n        }\r\n\r\n        hotKeyWithEnter = ({ e, ViewModel, moduleId, target, itemType }) => {\r\n            let eventTarget = target || e.target;\r\n            let { orderOfHotKey } = this.props.getHotKeyConfig ? this.props.getHotKeyConfig() : {};\r\n            if (!orderOfHotKey) {\r\n                console.warn('not find orderOfHotKey in getHotKeyConfig')\r\n                return;\r\n            }\r\n\r\n            //日期类型延迟执行时eventTarget已被移出document导致寻找不到父元素td,所以日期类型立即执行\r\n            if (itemType === 'datePicker') {\r\n                findNextFocusItemInTable({ eventTarget, ViewModel, moduleId, orderOfHotKey });\r\n                return;\r\n            }\r\n\r\n            //CLOUD-147579 中文输入法下会带进冒号空格等符号，原因是因为输入法的enter比我们的enter后执行导致\r\n            let timer = setTimeout(() => {\r\n                findNextFocusItemInTable({ eventTarget, ViewModel, moduleId, orderOfHotKey });\r\n                clearTimeout(timer);\r\n            });\r\n        };\r\n\r\n        hotKeyWithArrow = ({ e, ViewModel, moduleId, itemType, target }) => {\r\n            let eventTarget = target || e.target;\r\n            let { orderOfHotKey } = this.props.getHotKeyConfig ? this.props.getHotKeyConfig() : {};\r\n            if (!orderOfHotKey) {\r\n                console.warn('not find orderOfHotKey in getHotKeyConfig')\r\n                return;\r\n            }\r\n\r\n            handleArrowKeyDown({\r\n                eventTarget,\r\n                ViewModel,\r\n                moduleId,\r\n                orderOfHotKey,\r\n                itemType,\r\n                keyCode: e.keyCode,\r\n            });\r\n        };\r\n\r\n        render() {\r\n            return (\r\n                <HotKeys\r\n                    keyMap={keyMap}\r\n                    handlers={{\r\n                        shiftUp: keyDownOfShiftUp.bind(this, this.props.moduleId),\r\n                        shiftDown: keyDownOfShiftUp.bind(this, this.props.moduleId),\r\n                    }}\r\n                >\r\n                    <WrappedComponent\r\n                        {...this.props}\r\n                        tableStatusChanged={WithKeyboardChange.tableStatusChanged}\r\n                        hotKeyWithEnter={this.hotKeyWithEnter}\r\n                        hotKeyWithArrow={this.hotKeyWithArrow}\r\n                    />\r\n                </HotKeys>\r\n            );\r\n        }\r\n    };\r\n}\r\n\r\nexport default TableWithKeyboardChange;\r\n","/*\r\n * @Descripttion: \r\n * @version: \r\n * @Author: jinfjk\r\n * @Date: 2020-08-17 09:56:43\r\n * @LastEditors: bbq\r\n * @LastEditTime: 2020-08-27 14:06:59\r\n */\r\nimport FormWithAutoFocus from './FormWithAutoFocus';\r\nimport TableWithAutoFocus from './TableWithAutoFocus';\r\n\r\nexport {\r\n    FormWithAutoFocus,\r\n    TableWithAutoFocus,\r\n};","/*\r\n * @Descripttion: \r\n * @version: \r\n * @Author: bbq\r\n * @Date: 2020-08-17 09:56:43\r\n * @LastEditors: bbq\r\n * @LastEditTime: 2020-09-19 13:46:46\r\n */\r\nimport FormWithKeyboardChange from './FormWithKeyboardChange';\r\nimport TableWithKeyboardChange from './TableWithKeyboardChange';\r\nimport EditTableWithKeyboardChange from './EditTableWithKeyboardChange';\r\n\r\nexport {\r\n    FormWithKeyboardChange,\r\n    TableWithKeyboardChange,\r\n    EditTableWithKeyboardChange,\r\n};","var baseDifference = require('./_baseDifference'),\n    baseFlatten = require('./_baseFlatten'),\n    baseRest = require('./_baseRest'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Creates an array of `array` values not included in the other given arrays\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. The order and references of result values are\n * determined by the first array.\n *\n * **Note:** Unlike `_.pullAll`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...Array} [values] The values to exclude.\n * @returns {Array} Returns the new array of filtered values.\n * @see _.without, _.xor\n * @example\n *\n * _.difference([2, 1], [2, 3]);\n * // => [1]\n */\nvar difference = baseRest(function(array, values) {\n  return isArrayLikeObject(array)\n    ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true))\n    : [];\n});\n\nmodule.exports = difference;\n","import { Col, Row } from 'bee-layout';\r\nrequire('bee-layout/build/Layout.css');\r\nimport { isFunction } from '@platform/api';\r\nimport HotKeys from '../HotKeys';\r\n\r\nlet _multiLang = {};\r\nlet functionList = {};\r\nexport const setMultiLang = (multiLang = {}) => {\r\n    functionList = {\r\n        '#day(-1)#': multiLang['page-search-0060'],\r\n        '#day(0)#': multiLang['page-search-0061'],\r\n        '#day(1)#': multiLang['page-search-0062'],\r\n        '#month(-1)#': multiLang['page-search-0063'],\r\n        '#month(0)#': multiLang['page-search-0064'],\r\n        '#month(1)#': multiLang['page-search-0065'],\r\n        '#week(-1)#': multiLang['page-search-0066'],\r\n        '#week(0)#': multiLang['page-search-0067'],\r\n        '#week(1)#': multiLang['page-search-0068'],\r\n        '#quarter(-1)#': multiLang['page-search-0069'],\r\n        '#quarter(0)#': multiLang['page-search-0070'],\r\n        '#quarter(1)#': multiLang['page-search-0071'],\r\n        '#year(-1)#': multiLang['page-search-0072'],\r\n        '#year(0)#': multiLang['page-search-0073'],\r\n        '#year(1)#': multiLang['page-search-0074'],\r\n        '#lastDayOfMonth#': multiLang['page-search-0075'],\r\n        '#lastDayOfWeek#': multiLang['page-search-0076'],\r\n        '#finalDayOfLastMonth#': multiLang['page-search-0077'],\r\n    };\r\n    _multiLang = multiLang;\r\n    return functionList;\r\n};\r\n// 用来判断和处理时间函数\r\nexport function timeFunctionHandler(val) {\r\n    let result = false;\r\n    if (typeof val === 'string' && val.indexOf('#') !== -1) {\r\n        result = true;\r\n    }\r\n    return result;\r\n}\r\nfunction selectDateFunction(e, callback, item) {\r\n    console.log(\"触发click事件\", item)\r\n\r\n    pickerState(e, false);\r\n    callback(item);\r\n}\r\nfunction pickerState(e, flag) {\r\n    let pickerDOM = document.getElementsByClassName('rc-calendar-picker')[0];\r\n    if (pickerDOM) {\r\n        pickerDOM.style.display = flag ? 'block' : 'none';\r\n    }\r\n}\r\n\r\nexport const getFuntionValue = value => {\r\n    return functionList[value] || value;\r\n};\r\nexport const getTimeFunctionLabel = (value, show, openCallBack) => {\r\n    let label = functionList[value] || '';\r\n    return show && label ? (\r\n        <div className=\"date-picker-mask\" onClick={() => openCallBack(true)}>\r\n            {label}\r\n        </div>\r\n    ) : null;\r\n};\r\n// value = 选择的时间 callback = 单击回调 show  = 是否显示时间函数\r\nexport const getDateFunNode = (value, callback, show, hiddenFunList) => {\r\n    if (!show) return;\r\n    let spen = 4;\r\n    let newFunList = { ...functionList };\r\n    if (Array.isArray(hiddenFunList)) {\r\n        hiddenFunList.forEach(element => {\r\n            delete newFunList[element];\r\n        });\r\n    }\r\n    return (\r\n        <HotKeys\r\n            keyMap={{\r\n                rightHandler: [\"right\"],\r\n                leftHandler: [\"left\"],\r\n                enterHander: [\"enter\"],\r\n            }}\r\n            handlers={{\r\n                rightHandler: e => {\r\n                    if (document.activeElement.nextElementSibling) {\r\n                        document.activeElement.nextElementSibling.focus();\r\n                    }\r\n                },\r\n                leftHandler: () => {\r\n                    if (document.activeElement.previousElementSibling) {\r\n                        document.activeElement.previousElementSibling.focus();\r\n                    }\r\n                },\r\n                enterHander: () => {\r\n                    if (document.activeElement) {\r\n                        document.activeElement.click();\r\n                    }\r\n\r\n                },\r\n            }}\r\n            clearOpenPanel={false}\r\n        >\r\n            <div className='function-area' style={{ maxHeight: \"160px\", overflow: \"scroll\" }}>\r\n                {Object.keys(newFunList).map((item, index) => (\r\n                    <div\r\n                        tabIndex={index === 0 ? \"0\" : \"-1\"}\r\n                        className=\"fun-plan-area function-area-item\"\r\n                        lg={spen}\r\n                        md={spen}\r\n                        sm={spen}\r\n                        xs={spen}\r\n                        onClick={e => selectDateFunction(e, callback, item)}\r\n                        onKeyDown={e => {\r\n                            e.stopPropagation();\r\n                        }}\r\n                    >\r\n                        <span className={value.toString().includes(item) && 'select'}>{newFunList[item]}</span>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </HotKeys>\r\n    );\r\n};\r\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","module.exports = __WEBPACK_EXTERNAL_MODULE__8__;","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","const availableFormItems = ['input', 'textarea', 'number', 'refer', 'datepicker', 'datetimepicker', 'timepicker', 'select', 'switch', 'residtxt', 'checkbox_switch'];\r\nconst availableTableItems = ['refer', 'datepicker', 'input', 'datetimepicker', 'timepicker', 'select', 'number', 'residtxt', 'checkbox_switch', 'rangepicker', 'datePickerNoTimeZone', 'TZDatePickerStart', 'TZDatePickerStart', 'switch'];\r\n\r\nexport {\r\n    availableFormItems,\r\n    availableTableItems,\r\n};\r\n","\r\nimport { availableFormItems, availableTableItems } from './config/availableItems';\r\nimport { MODULE_TYPE } from './config/moduleType';\r\nimport { config as CONFIG, PubSub } from '@platform/api';\r\n\r\n/**\r\n * 我们要生成的数据格式\r\n *\r\n * @keyByModuleId = {\r\n *     moduleId1: {\r\n *         firstItem: 'attrCode1',\r\n *         lastItem: 'attrCode2',\r\n *         type: 'form'\r\n *     },\r\n *     moduleId2: {\r\n *         firstItem: 'attrCode3',\r\n *         lastItem: 'attrCode4',\r\n *         type: 'table',\r\n *         children: ['moduleId3', 'moduleId4'] // 表示此表格的关联表有哪些\r\n *     },\r\n *     moduleId3: {\r\n *         firstItem: 'attrCode3',\r\n *         lastItem: 'attrCode4',\r\n *         type: 'table',\r\n *         parent: 'moduleId3', // 表示此表格的主表是哪个，\r\n *         activeTable: 'moduleId3' //对于多页签的表格添加此字段表示当显示的是哪个页签，第一次渲染默认展示主\r\n *                                    表\r\n *     }\r\n * }\r\n *\r\n * @formDisableAttrCode = {\r\n *     moduleId: {\r\n *         attrCode1: true,\r\n *         attrCode2: false\r\n *     }\r\n * }\r\n */\r\nlet keyByModuleId = {};\r\nlet formDisableAttrCode = {};\r\nlet tableDisabledAttrCode = {};\r\nlet orderOfHotKey = [];\r\nconst hotKeyPrefix = CONFIG.hotKeyModuleIdPrefix;\r\n\r\n/**\r\n * @desc 实现上面所描述的数据格式\r\n * @param props\r\n * @param force 是否强制执行，如果是通过业务组调用executeAutoFocus方法执行，就强制执行聚焦方法， 默认false\r\n */\r\nfunction keyMapOfForm(props, force = false) {\r\n    let { name } = props;\r\n    let { meta, orderOfHotKey: newOrderOfHotKey } = props.getHotKeyConfig ? props.getHotKeyConfig() : {};\r\n\r\n    // 可以考虑加个参数控制整个快捷键  TOOD\r\n    if (!props.getHotKeyConfig) {\r\n        return console.warn('some form hotkey invalid');\r\n    }\r\n\r\n    let formItems = meta[name]['items'];\r\n    orderOfHotKey = newOrderOfHotKey;\r\n\r\n    let itemsAttrCode = formItems.filter(item => {\r\n        return isAvailableFormItem(item, name);\r\n    }).map(item => {\r\n        return item.attrcode;\r\n    });\r\n\r\n    if (formAutoFocusJudgement(name, force)) {\r\n        keyByModuleId[name] = {\r\n            firstItem: itemsAttrCode[0],\r\n            type: MODULE_TYPE.form,\r\n        };\r\n        let firstItemKey = itemsAttrCode[0];\r\n        PubSub.publish('autoFocus', { data: firstItemKey });\r\n    }\r\n}\r\n\r\n/**\r\n * @desc：keyMapOfForm方法会根据form的状态执行多次。\r\n * 现象：只要meta里面的数据一更改就会重新聚焦到第一个可编辑元素上。\r\n * 解决：keyByModuleId里是否存在此moduleId作为标示，\r\n */\r\nfunction formAutoFocusJudgement(name, force) {\r\n    return (keyByModuleId[name] === undefined && orderOfHotKey[0] === name) || force;\r\n}\r\n\r\n/**\r\n * @desc 判断此item是否需要在按tab键获得焦点\r\n * @param item\r\n * @param name\r\n * @returns {boolean}\r\n */\r\nfunction isAvailableFormItem(item, name) {\r\n    let metaRes = availableFormItems.includes(item.itemtype) &&\r\n        item.disabled !== true &&\r\n        item.visible !== false;\r\n\r\n    let itemDisabled = !!(formDisableAttrCode[name] &&\r\n        formDisableAttrCode[name][item.attrcode] === true);\r\n    return metaRes && !itemDisabled;\r\n}\r\n\r\n/**\r\n *\r\n * @param props\r\n * @param force {Boolean} 是否强制执行\r\n */\r\nfunction keyMapOfTable(props, force = false) {\r\n    let { name, high_hotkey, getHotKeyConfig } = props;\r\n\r\n    // console.log(high_hotkey, getHotKeyConfig)\r\n    let { withHotKeyChange, meta, orderOfHotKey: newOrderOfHotKey } = props.getHotKeyConfig ? props.getHotKeyConfig() : {};\r\n    if (!props.getHotKeyConfig || !newOrderOfHotKey) {\r\n        return console.warn('some form hotkey invalid');\r\n    }\r\n    orderOfHotKey = newOrderOfHotKey;\r\n    let { store, tableId } = high_hotkey;\r\n\r\n    let columns = meta[tableId] && meta[tableId].items;\r\n    let rows = store.getData();\r\n    let lastRowIndex = rows.length - 1;\r\n    let availableItems = columns && iteratorTableColumns(tableId, columns, []);\r\n\r\n    if (rows && rows.length === 0) return;\r\n    processKeyMapOfTable({ tableId, availableItems, lastRowIndex, moduleType: MODULE_TYPE.cardTable, force });\r\n    if (hasTabRelation(props, tableId) && keyByModuleId[tableId]) {\r\n        createTabRelationKeyMap(props, tableId, lastRowIndex);\r\n        //设置关联表\r\n        keyByModuleId[tableId].children = meta.gridrelation[tableId].tabRelation;\r\n    }\r\n}\r\n\r\nfunction keyMapOfEditTable(props, force = false) {\r\n    let { name, high_hotkey, getHotKeyConfig } = props;\r\n    // console.log(high_hotkey, getHotKeyConfig)\r\n    let { withHotKeyChange, meta, orderOfHotKey: newOrderOfHotKey } = props.getHotKeyConfig ? props.getHotKeyConfig() : {};\r\n    if (!props.getHotKeyConfig || !newOrderOfHotKey) {\r\n        return console.warn('some form hotkey invalid');\r\n    }\r\n    orderOfHotKey = newOrderOfHotKey;\r\n    let { store, tableId } = high_hotkey;\r\n\r\n    let columns = meta[tableId] && meta[tableId].items;\r\n    let rows = store.getData();\r\n    let lastRowIndex = rows.length - 1;\r\n    let availableItems = columns && iteratorTableColumns(tableId, columns, []);\r\n\r\n    if (rows && rows.length === 0) return;\r\n\r\n    processKeyMapOfTable({ tableId, availableItems, lastRowIndex, moduleType: MODULE_TYPE.editTable, force });\r\n}\r\n\r\nfunction iteratorTableColumns(tableId, iterable, pool) {\r\n    return iterable.reduce((pre, next) => {\r\n        if (next.children) {\r\n            iteratorTableColumns(tableId, next.children, pre);\r\n        } else {\r\n            isAvailableTableItem(tableId, next)\r\n                ? pre.push(next.attrcode)\r\n                : pre;\r\n        }\r\n\r\n        return pre;\r\n    }, pool);\r\n}\r\n\r\nfunction isAvailableTableItem(moduleId, item) {\r\n    //如果业务组通过table的api修改可编辑性，就根据业务组的设置的只返回，不去读meta里面的值\r\n    if (tableDisabledAttrCode[moduleId]) {\r\n        if (tableDisabledAttrCode[moduleId][item.attrcode] === false) {\r\n            return false;\r\n        }\r\n\r\n        if (tableDisabledAttrCode[moduleId][item.attrcode] === true) {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    return availableTableItems.includes(item.itemtype) &&\r\n        item.visible !== false &&\r\n        item.disabled !== true &&\r\n        item.attrcode !== undefined;\r\n}\r\n\r\nfunction processKeyMapOfTable({ moduleId, availableItems, lastRowIndex, moduleType, force }) {\r\n    let firstItem = `${hotKeyPrefix}-${moduleId}-${availableItems[0]}-0`;\r\n    let lastAvailableItem = availableItems.length - 1;\r\n    let lastItem = `${hotKeyPrefix}-${moduleId}-${availableItems[lastAvailableItem]}-${lastRowIndex}`;\r\n\r\n    publishFocusItem({ orderOfHotKey, moduleId, firstItem, force });\r\n\r\n    keyByModuleId[moduleId] = {\r\n        firstItem,\r\n        lastItem,\r\n        type: moduleType,\r\n        activeTable: moduleId,\r\n    };\r\n}\r\n\r\n/**\r\n * @desc    原因：此方法是在componentDidUpdate生命周期里调用的。\r\n *          现象：只要meta里面的数据一更改就会重新聚焦到第一个可编辑元素上。\r\n *          解决：keyByModuleId里是否存在此moduleId作为标示\r\n *\r\n * @param orderOfHotKey\r\n * @param moduleId\r\n * @param firstItem\r\n * @param force 是否强制执行，如果是业务组通过executeAutoFocus api 执行的，就强制执行\r\n */\r\nfunction publishFocusItem({ orderOfHotKey, moduleId, firstItem, force }) {\r\n    if (tableAutoFocusJudgement({ orderOfHotKey, moduleId, force })) {\r\n        PubSub.publish('autoFocus', { data: firstItem, moduleId });\r\n    }\r\n}\r\n\r\nfunction tableAutoFocusJudgement({ orderOfHotKey = [], moduleId, force }) {\r\n    return (orderOfHotKey[0] === moduleId && keyByModuleId[moduleId] === undefined) || force;\r\n}\r\n\r\n/**\r\n * @desc 判断此table是否有tabRelation\r\n * @param props {object}\r\n * @param moduleId {string}\r\n */\r\n\r\nfunction hasTabRelation(props, moduleId) {\r\n    // console.log(high_hotkey, getHotKeyConfig)\r\n    let { meta } = props.getHotKeyConfig ? props.getHotKeyConfig() : {};\r\n    if (!props.getHotKeyConfig) {\r\n        return console.warn('some form hotkey invalid');\r\n    }\r\n\r\n    let tabRelation = meta.gridrelation &&\r\n        meta.gridrelation[moduleId].tabRelation;\r\n\r\n    return !!(tabRelation && tabRelation.length > 1);\r\n}\r\n\r\nfunction createTabRelationKeyMap(props, moduleId, lastRowIndex) {\r\n    let { meta } = props.getHotKeyConfig ? props.getHotKeyConfig() : {};\r\n    if (!props.getHotKeyConfig) {\r\n        return console.warn('some form hotkey invalid');\r\n    }\r\n\r\n    let tabRelation = meta.gridrelation[moduleId].tabRelation;\r\n\r\n    tabRelation.forEach(item => {\r\n        //因为主表keyMap已经生成不需要重复执行\r\n        if (item !== moduleId) {\r\n            let columns = meta[item] &&\r\n                meta[item].items;\r\n            let availableItems = columns && iteratorTableColumns(moduleId, columns, []);\r\n            let code = meta[item].code;\r\n\r\n            let firstItem = `${hotKeyPrefix}-${moduleId}-${availableItems[0]}-0`;\r\n            let lastAvailableItem = availableItems[availableItems.length - 1];\r\n\r\n            let lastItem = `${hotKeyPrefix}-${moduleId}-${lastAvailableItem}-${lastRowIndex}`;\r\n            /**\r\n             * @type {{parent: string}} 表明此此标签页属于哪个区域ID\r\n             */\r\n            keyByModuleId[code] = {\r\n                firstItem,\r\n                lastItem,\r\n                type: MODULE_TYPE.cardTable,\r\n                parent: moduleId,\r\n            };\r\n        }\r\n    });\r\n}\r\n\r\nfunction deleteKeyByModuleId(moduleId) {\r\n    delete keyByModuleId[moduleId];\r\n}\r\n\r\nfunction setFormDisableAttrCode(moduleId, values) {\r\n    formDisableAttrCode[moduleId] = values;\r\n}\r\n\r\n/**\r\n *\r\n * @param disabledValue {boolean} 是否可编辑 true -> 可编辑 false -> 不可编辑\r\n * @param moduleId  {string}\r\n * @param attrcode {string}\r\n */\r\nfunction editTableFieldEditable(disabledValue, moduleId, attrcode) {\r\n    if (tableDisabledAttrCode[moduleId] === undefined) {\r\n        tableDisabledAttrCode[moduleId] = { [attrcode]: disabledValue };\r\n    } else {\r\n        tableDisabledAttrCode[moduleId][attrcode] = disabledValue;\r\n    }\r\n}\r\n\r\nfunction getFirstItem(moduleId) {\r\n    return keyByModuleId[moduleId] &&\r\n        keyByModuleId[moduleId].firstItem;\r\n}\r\n\r\nfunction setValueOfActiveTable({ moduleId, activeKey }) {\r\n    let moduleInfo = keyByModuleId[moduleId];\r\n    if (moduleInfo) {\r\n        moduleInfo.activeTable = activeKey;\r\n    }\r\n}\r\n\r\nlet createByModuleType = {\r\n    form: keyMapOfForm,\r\n    table: keyMapOfTable,\r\n    editTable: keyMapOfEditTable,\r\n};\r\n\r\nexport {\r\n    createByModuleType,\r\n    keyByModuleId,\r\n    orderOfHotKey,\r\n    deleteKeyByModuleId,\r\n    setFormDisableAttrCode,\r\n    editTableFieldEditable,\r\n    getFirstItem,\r\n    setValueOfActiveTable,\r\n};","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n"],"sourceRoot":""}