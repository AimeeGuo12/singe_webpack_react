/*! @ncctag content */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("@platform/api/index"),require("@platform/base/index"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","@platform/api/index","@platform/base/index","react-dom"],t):"object"==typeof exports?exports["@platform/template/index"]=t(require("react"),require("@platform/api/index"),require("@platform/base/index"),require("react-dom")):e["@platform/template/index"]=t(e.React,e["@platform/api/index"],e["@platform/base/index"],e.ReactDOM)}(window,(function(e,t,n,r){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="../../../../platform/",n(n.s=1895)}({0:function(t,n){t.exports=e},1:function(e,n){e.exports=t},103:function(e,t,n){var r=n(305),o=n(149);e.exports=function(e){return r(o(e))}},112:function(e,t,n){var r=n(91),o=n(127);e.exports=n(71)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},113:function(e,t,n){var r=n(92);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},12:function(e,t,n){"use strict";t.__esModule=!0;var r,o=n(628),i=(r=o)&&r.__esModule?r:{default:r};t.default=i.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},127:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},128:function(e,t,n){var r=n(375),o=n(309);e.exports=Object.keys||function(e){return r(e,o)}},129:function(e,t,n){var r=n(149);e.exports=function(e){return Object(r(e))}},149:function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},150:function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},151:function(e,t){e.exports=!0},152:function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},153:function(e,t){t.f={}.propertyIsEnumerable},1895:function(e,t,n){"use strict";n.r(t),n.d(t,"itemCreator",(function(){return W})),n.d(t,"ItemContext",(function(){return U})),n.d(t,"ItemProvider",(function(){return Y})),n.d(t,"hookFactory",(function(){return je})),n.d(t,"ArrayData",(function(){return He})),n.d(t,"TreeData",(function(){return We})),n.d(t,"NormalMetaData",(function(){return Ue})),n.d(t,"NormalTreeData",(function(){return Ye})),n.d(t,"validate",(function(){return $e})),n.d(t,"Item",(function(){return re})),n.d(t,"BaseStore",(function(){return we})),n.d(t,"BaseComponent",(function(){return De}));var r=n(0),o=n.n(r),i=n(6),a=n(55),u=n(5),c=n.n(u),l=n(1),f=n(3);function s(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=f.Select.Option,h=f.Refer.ReferLoader,g=Object(l.getLangCode)();function O(e){var t=e.options,n=e.multiple,r=e.attrcode;return{component:o.a.createElement(f.Select,{multiple:n,labelInValue:!0,popData:{fieldid:"".concat(r,"_select")}},Array.isArray(t)?t.map((function(e,t){var n=e.display,r=e.value;return o.a.createElement(b,{value:r,key:t,title:n},n)})):[]),componentValueToFieldValue:function(e){if(n)return{display:(e=e||[]).map((function(e){return e.label})).join(","),value:e.map((function(e){return e.key})).join(",")};var t=e||{},r=t.key;return{display:t.label,value:r}},fieldValueToComponentValue:function(e){var t=e.display,r=e.value;if(n){var o=r?r.split(","):[],i=t?t.split(","):[];return o.map((function(e,t){return{key:e,label:i[t]}}))}return{key:r,label:t}},beforeEventTrigger:"click",afterEventTrigger:n?"onBlur":"onChange",getDisplay:w(e,"display"),focusableElement:n?"input":"div.u-select-selection"}}function E(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.format,i=t.attrcode,a=t.itemtype,u=n.beforeEventTrigger,c=void 0===u?"click":u,f=n.afterEventTrigger,s=void 0===f?"onChange":f;return{component:o.a.createElement(e,{format:r,fieldid:i,autoTriggerChange:!1}),beforeEventTrigger:c,afterEventTrigger:s,getDisplay:function(){var e=w(t,"value")();switch(a){case"datetimepicker":case"NCTZDatePickClientTime":e=Object(l.changeTime)(e,"YYYY-MM-DD HH:mm:ss");break;case"NCTZDatePickerStart":case"NCTZDatePickerEnd":case"NCTZDatePickClientHourTime":case"datepicker":e=Object(l.changeTime)(e,"YYYY-MM-DD")}switch(a){case"NCTZDatePickerStart":case"NCTZDatePickerEnd":case"NCTZDatePickClientHourTime":case"datePickerNoTimeZone":case"datepicker":e=Object(l.formatDatetime)(e,"date");break;case"timepicker":e=Object(l.formatDatetime)(e,"time");break;case"datetimepicker":case"NCTZDatePickClientTime":e=Object(l.formatDatetime)(e,"datetime")}return e}}}function w(e,t){return function(){var n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,o=r.whichKeyToDisplay,i=void 0===o?t:o,a=r.getFieldValue,u=r.attrcode,c=a({attrcode:u});return"auto"===i?void 0===c.display||null===c.display?c.value:c.display:null!==(n=c[i])&&void 0!==n?n:""}}function j(e){var t,n=null===(t=(0,e.getFieldValue)({attrcode:e.attrcode}))||void 0===t?void 0:t.value;return o.a.createElement("span",null,o.a.createElement("i",{style:{width:"8px",height:"8px",display:"inline-block",borderRadius:"4px",marginRight:"6px",backgroundColor:n?"rgba(40,202,66,1)":"rgba(255,95,87,1)"}}),w(e,"display")())}var x={label:function(e){var t;return{component:o.a.createElement("span",{className:c()({label:!0,"with-border":e.withBorder,disabled:e.disabled})}),valuePropName:"children",fieldValueToComponentValue:function(){return w(e,"auto")()},getDisplay:w(e,"auto"),alwaysEmitBeforeEventWhenClick:null===(t=e.alwaysEmitBeforeEventWhenClick)||void 0===t||t}},input:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alwaysEmitBeforeEventWhenClick,n=void 0===t||t;return{component:o.a.createElement(f.Input,{type:"text"}),beforeEventTrigger:"focus",afterEventTrigger:"onBlur",alwaysEmitBeforeEventWhenClick:n}},password:function(){return{component:o.a.createElement(f.Input,{type:"password"}),beforeEventTrigger:"focus",afterEventTrigger:"onBlur",getDisplay:function(){return"*".repeat(8)}}},residtxt:function(e){var t=e.languageMeta,n=e.getFieldValue,r=e.setFieldValue,i=e.attrcode;return{component:o.a.createElement(f.MultiLangText,null),beforeEventTrigger:"focus",afterEventTrigger:"onBlur",componentValueToFieldValue:function(e){var n,r=y({},e),o=(null===(n=t.find((function(e){return 1==e.index||""==e.index})))||void 0===n?void 0:n.index)||"";return e.hasOwnProperty(i)||(r[i]=r[i+o],delete r[i+o]),r},fieldValueToComponentValue:function(e){var n,r=y({},e),o=(null===(n=t.find((function(e){return 1==e.index||""==e.index})))||void 0===n?void 0:n.index)||"";return e.hasOwnProperty(i+o)||(r[i+o]=r[i],delete r[i]),r},getFieldValue:function(e){var r=e.attrcode,o={};return Array.isArray(t)&&(o=t.reduce((function(e,t){var o,i=t.index,a=1==i?r:r+i;return e[a]={value:(null===(o=n({attrcode:a}))||void 0===o?void 0:o.value)||"",index:i},e}),o)),o},setFieldValue:function(e){var n=e.attrcode,o=e.value,i=e.componentValue;Array.isArray(t)&&t.forEach((function(e){var t=e.index,a=1==t?n:n+t;if(o[a].current){var u=o[a],c=(u.current,d(u,["current"]));r({attrcode:a,value:c,componentValue:i})}}))},equal:function(e,t){return Object.keys(e).length===Object.keys(t).length&&Object.keys(t).every((function(n){return t[n].value&&e[n].value&&t[n].value===e[n].value}))},getDisplay:function(){var e,r,o,a;return Array.isArray(t)&&t.map((function(e){var t=e.index;e.languageCode===g&&(o=n({attrcode:1==t?i:i+t}));1!=t&&""!=t||(a=n({attrcode:i}))})),(null===(e=o)||void 0===e?void 0:e.value)||(null===(r=a)||void 0===r?void 0:r.value)||""}}},number:function(e){var t=e.scale;return{component:o.a.createElement(f.NumberInput,null),beforeEventTrigger:"focus",afterEventTrigger:"onBlur",componentValueToFieldValue:function(e){return{display:"",value:e,scale:t}},getDisplay:function(){var n=w(e,"value")();return n=Object(l.formatNumber)(Object(l.formatAcuracy)(n,t))}}},textarea:function(){return{component:o.a.createElement(f.TextArea,null),beforeEventTrigger:"focus",afterEventTrigger:"onBlur",focusableElement:"textarea"}},refer:function(e){return{component:o.a.createElement(h,null),valuePropName:"foolValue",beforeEventTrigger:"click",componentValueToFieldValue:function(e){return{display:e.display,value:e.value}},fieldValueToComponentValue:function(e){return e},normalize:function(e,t){var n;return(n=Array.isArray(e)?s(e):y({},e)).value=t.value,n.display=t.display,n},getDisplay:w(e,"display"),focusableElement:"input.refer-input"}},radio:function(e){return O(y(y({},e),{},{multiple:!1}))},checkbox:function(e){return O(y(y({},e),{},{multiple:!0}))},checkbox_switch:function(e){var t;return{component:o.a.createElement(f.Checkbox,{className:"single-checkbox",colors:"primary",type:"switch"}),componentValueToFieldValue:function(e){return{value:e}},fieldValueToComponentValue:function(e){return!!e.value},valuePropName:"checked",beforeEventTrigger:"click",defaultValue:{value:!1},getDisplay:function(){return j(e)},alwaysEmitBeforeEventWhenClick:null===(t=e.alwaysEmitBeforeEventWhenClick)||void 0===t||t,display:"inline-block",focusableElement:"label.u-checkbox-label",beforeEventMode:"mousedown"}},switch:function(e){var t;return{component:o.a.createElement(f.Switch,null),componentValueToFieldValue:function(e){return{value:e}},fieldValueToComponentValue:function(e){return!!e.value},valuePropName:"checked",beforeEventTrigger:"click",defaultValue:{value:!1},getDisplay:function(){return j(e)},focusableElement:"span.u-switch",alwaysEmitBeforeEventWhenClick:null===(t=e.alwaysEmitBeforeEventWhenClick)||void 0===t||t,display:"inline-block"}},switch_browse:function(e){var t;return{component:e.cancelPSwitch?o.a.createElement(f.Switch,null):o.a.createElement(f.PopconfirmSwitch,null),componentValueToFieldValue:function(e){return{value:e}},fieldValueToComponentValue:function(e){return!!e.value},valuePropName:"checked",beforeEventTrigger:"click",defaultValue:{value:!1},getDisplay:function(){return j(e)},focusableElement:"span.u-switch",alwaysEmitBeforeEventWhenClick:null===(t=e.alwaysEmitBeforeEventWhenClick)||void 0===t||t,display:"inline-block"}},NCTZDatePickerStart:function(e){return E(f.TZDatePickerStart,e)},NCTZDatePickerRangeDay:function(e){return E(f.TZDatePickerRangeDay,e)},NCTZDatePickClientHourTime:function(e){return E(f.TZDatePickClientHourTime,e)},datetimepicker:function(e){return E(f.TZDatePickClientTime,e,{afterEventTrigger:"onClose"})},timepicker:function(e){return E(f.Timepicker,e,{afterEventTrigger:"onClose"})},NCTZDatePickerEnd:function(e){return E(f.TZDatePickerEnd,e)},datePickerNoTimeZone:function(e){return E(f.DatePickerNoTimeZone,e)},datepicker:function(e){return E(f.TZDatePickClientHourTime,e)},rangepicker:function(e){return E(f.RangePickerClient,e)},NCTZDatePickClientTime:function(e){return E(f.TZDatePickClientTime,e,{afterEventTrigger:"onClose"})},monthpicker:function(e){return E(f.MonthPicker,e)},yearpicker:function(e){return E(f.YearPicker,e)},select:function(e){return O(e)},attachment:function(){return{component:o.a.createElement(f.Attachment,null),valuePropName:"fieldValue",valueChangePropName:"getCount",afterEventTrigger:"onHide",normalize:function(e,t){return t+","+e},beforeEventTrigger:"click"}}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.attrcode,n=e.itemtype,r=e.getFieldValue,o=e.setFieldValue,i=e.alwaysEmitBeforeEventWhenClick,a={defaultValue:{display:"",value:""},component:null,afterEventTrigger:"onChange",beforeEventTrigger:"focus",valuePropName:"value",valueChangePropName:"onChange",normalize:function(e){return e},componentValueToFieldValue:function(e){return{display:"",value:e}},fieldValueToComponentValue:function(e){var t=e.value;return null!=t?t:""},equal:function(e,t){return e&&t&&e.value===t.value},validateTrigger:"onChange",getFieldValue:r,setFieldValue:o,focusableElement:"input",alwaysEmitBeforeEventWhenClick:i,getDisplay:w(e,"value"),beforeEventMode:"auto"},u=!0,c=(x[n]||function(e){var n=e.itemtype;console.warn("无法解析attrcode为".concat(t,"的").concat(n,"类型")),u=!1})(e);return y(y(y({itemtype:n},a),c),{},{isValidType:u})};function P(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.find((function(e){return e&&"function"==typeof e.preventDefault})),o=window.event,i={stopPropagation:function(){console.warn("未找到Event对象")},preventDefault:function(){console.warn("未找到Event对象")}};return r||o||i}function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function V(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function R(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t,n){return t&&_(e.prototype,t),n&&_(e,n),e}function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=L(e);if(t){var o=L(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return q(this,n)}}function q(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?Z(e):t}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var W=k,U=Object(r.createContext)();function Y(e){return function(t){var n=t.itemCreator,r=void 0===n?k:n,i=H(t,["itemCreator"]);return o.a.createElement(U.Provider,{value:{itemCreator:r,store:i.store}},o.a.createElement(e,i))}}var K="undefined"!=typeof window&&window.navigator.userAgent.toLowerCase(),z=K&&K.indexOf("edge/")>0,$=K&&/chrome\/\d+/.test(K)&&!z,G=new Map,Q=new Set([9]),J=!0,X=!1;document.addEventListener("mousedown",(function(){X=!0}),!0),document.addEventListener("mouseup",(function(){X=!1}),!0);var ee=function(e){B(n,e);var t=F(n);function n(e){var o;return R(this,n),(o=t.call(this,e)).itemRef=null,o.oldValue=Object(r.createRef)(null),o.componentValue=Object(r.createRef)(null),o.clickOutside=!1,o.bindItemRef=function(e){o.itemRef=Object(i.findDOMNode)(e)},o.getContainer=function(){if(!o.container){for(var e=o.itemRef,t=null;e&&(t=e.parentNode)&&t!==document.body;)e=t;o.container=e}return o.container},o.handleOutSideClick=function(){var e=function(e){var t;!e.currentTarget.contains(e.target)||null!==(t=o.itemRef)&&void 0!==t&&t.contains(e.target)||(o.clickOutside=!0)},t=function(){o.clickOutside&&o.deactivate()},n=o.getContainer();if(n)return n.addEventListener("mousedown",e,!0),n.addEventListener("mouseup",t,!0),function(){n.removeEventListener("mousedown",e,!0),n.removeEventListener("mouseup",t,!0),o.cancelOutSideClick=null}},o.getComponentValue=function(){var e=o.props.attrcode,t=o.context.itemCreator(o.props);return(0,t.fieldValueToComponentValue)((0,t.getFieldValue)({attrcode:e}))},o.beforeEventHandler=function(e){var t=o.props,n=t.onBeforeEvent,r=t.attrcode;if(t.disabled||o.isEmittingBeforeEvent)return Promise.resolve(!1);o.isActive=!0,o.isEmittingBeforeEvent=!0;var i=o.context.itemCreator(o.props).getFieldValue;if("function"==typeof n){var a=n({value:i({attrcode:r}),event:e});return Promise.resolve(a).then((function(e){return o.isContinue=!1!==e,o.isEmittingBeforeEvent=!1,o.isContinue}))}return o.isContinue=!0,o.isEmittingBeforeEvent=!1,Promise.resolve(!0)},o.afterEventHandler=function(){var e=o.props,t=e.attrcode,n=e.onAfterEvent,r=o.context.itemCreator(o.props),i=r.getFieldValue,a=Z(o),u=a.oldValue,c=a.componentValue,l=P.apply(void 0,arguments),f=i({attrcode:t});o.dirty&&(o.dirty=!1,n({value:f,oldValue:u.current,componentValue:c.current,event:l}),u.current=null,c.current=null)},o.valueChangeEventHandler=function(){var e=o.props.attrcode,t=o.context.itemCreator(o.props),n=t.afterEventTrigger,r=t.valueChangePropName,i=t.normalize,a=t.componentValueToFieldValue,u=t.getFieldValue,c=t.setFieldValue,l=Z(o),f=l.oldValue,s=l.componentValue;!f.current&&(f.current=u({attrcode:e})),s.current=i.apply(void 0,arguments);var p,d=a(s.current);(o.dirty=!0,c({attrcode:e,value:d,componentValue:s.current}),n===r)&&(p=o).afterEventHandler.apply(p,arguments)},o.getDisplay=function(){var e=o.props.renderItem,t=W(o.props).getDisplay,n="function"==typeof e?e({isEdit:!1}):void 0;return void 0!==n?n:t()},o.stopIfNeeded=function(e){var t=e.target;return!e.currentTarget.contains(t)||(o.state.isEditable||(e.preventDefault(),e.stopPropagation()),!!o.isEmittingBeforeEvent||void 0)},o.activate=function(e){var t,n=o.props,r=n.editType,i=n.onStatusChange,a=o.state.isEditable;a||o.setState({isEditable:!0}),o.bindTabIndex();var u=o.context.itemCreator(o.props),c=u.beforeEventTrigger,l=u.focusableElement,f=null===(t=o.itemRef)||void 0===t?void 0:t.querySelector(l);J=!1,"toggle"!==r||a?e?V(new Set([c,"click"])).forEach((function(t){var n;null===(n=e[t])||void 0===n||n.call(e)})):null==f||f.focus():(null==f||f.focus(),"function"==typeof i&&i({isEdit:!0})),J=!0,o.cancelOutSideClick||(o.cancelOutSideClick=o.handleOutSideClick())},o.deactivate=function(){var e,t,n=o.props,r=n.editType,i=n.onStatusChange;o.state.isEditable&&(o.setState({isEditable:!1},(function(){switch(o.bindTabIndex(),r){case"toggle":"function"==typeof i&&i({isEdit:!1})}})),null===(e=(t=o).cancelOutSideClick)||void 0===e||e.call(t));o.isActive=!1},o.handleClickCapture=function(e){J&&e.currentTarget.contains(e.target)&&(e.stopPropagation(),e.preventDefault())},o.handleMouseDownCapture=function(e){var t=e.target,n=e.currentTarget;if(n.contains(t)){if(o.clickOutside=!1,n.contains(document.activeElement)||document.activeElement.blur(),!$||"mousedown"===o.context.itemCreator(o.props).beforeEventMode)if(o.stopIfNeeded(e))return;o.beforeEventHandler(e).then((function(e){setTimeout((function(){e&&o.isActive&&o.activate(t)}),0)}))}},o.handleFocus=function(e){var t=e.target,n=e.currentTarget;o.isActive&&e.stopPropagation(),X||o.isActive||t!==n||o.beforeEventHandler(e).then((function(e){e&&o.isActive&&o.activate()}))},o.handleBlur=function(){o.isPressingTab&&(o.deactivate(),o.isPressingTab=!1)},o.handleKeyDown=function(e){Q.has(e.keyCode||e.which||e.charCode)&&e.currentTarget.contains(e.target)&&(o.isPressingTab=!0)},o.addEventListener=function(){o.itemRef.addEventListener("click",o.handleClickCapture,!0)},o.removeEventListener=function(){o.itemRef.removeEventListener("click",o.handleClickCapture,!0)},o.bindTabIndex=function(){var e,t=o.props,n=t.tabIndex,r=t.disabled,i=o.state.isEditable,a=o.context.itemCreator(o.props).focusableElement,u=null===(e=o.itemRef)||void 0===e?void 0:e.querySelector(a);null==u||u.setAttribute("tabindex",i?n:-1),o.itemRef.setAttribute("tabindex",r?void 0:i?-1:n)},o.state={isEditable:!1},o}return M(n,[{key:"isActive",get:function(){return G.get(this.getContainer())===this},set:function(e){if(e){var t=G.get(this.getContainer());t!==this&&setTimeout((function(){null==t||t.deactivate()}),0),G.set(this.getContainer(),this)}else G.get(this.getContainer())==this&&G.set(this.getContainer(),null)}}]),M(n,[{key:"componentDidMount",value:function(){var e,t=this.props,n=t.path,r=t.browse,o=this.context.store;this.cancelRegister=null==o||null===(e=o.registerField)||void 0===e?void 0:e.call(o,n,this),this.bindTabIndex(),!r&&this.addEventListener()}},{key:"componentDidUpdate",value:function(e){var t=e.disabled,n=e.browse,r=e.tabIndex,o=this.props,i=o.disabled,a=o.browse,u=o.tabIndex;t===i&&u===r||this.bindTabIndex(),n!==a&&(a?this.removeEventListener():this.addEventListener())}},{key:"componentWillUnmount",value:function(){var e,t;null===(e=this.cancelRegister)||void 0===e||e.call(this),null===(t=this.cancelOutSideClick)||void 0===t||t.call(this),this.removeEventListener(),this.itemRef=null}},{key:"render",value:function(){var e=this.context.itemCreator,t=this.props,n=t.browse,i=void 0!==n&&n,u=t.editType,l=void 0===u?"normal":u,f=t.renderItem,s=t.useTitle,p=t.disabled,d=t.autoFocus,v=this.state.isEditable,y=this.getDisplay(),m={style:{width:"100%",display:"inline-block",verticalAlign:"middle"},className:c()({"template-item-wrapper":!0,"template-item-browse":i||"toggle"===l&&!v,"template-item-edit":!(i||"toggle"===l&&!v),"fake-disabled":!p&&!i&&!v&&"normal"===l}),title:s&&"string"==typeof y?y:void 0};if(i)return o.a.createElement(te,D({ref:this.bindItemRef},m),y);var b=e(this.props),h=b.afterEventTrigger,g=b.valueChangePropName,O=b.valuePropName,E=b.component,w=b.beforeEventMode,j=Object(a.default)(this.props,["children","onAfterEvent","onBeforeEvent","getFieldValue","setFieldValue","tabIndex"]);if(m=Object.assign(m,{onMouseDownCapture:this.handleMouseDownCapture,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown}),"toggle"!==l||v){var x,k="function"==typeof f?f({isEdit:!0}):void 0,P=void 0===k?E:k;return o.a.createElement(te,D({ref:this.bindItemRef},m),P&&Object(r.cloneElement)(P,S(S({},j),{},(A(x={},h,this.afterEventHandler),A(x,g,this.valueChangeEventHandler),A(x,O,this.getComponentValue()),A(x,"autoFocus",!!(d||"toggle"===l&&v)||void 0),A(x,"disabled",p||($&&"mousedown"!==w?!v:void 0)),x))))}return o.a.createElement(te,D({ref:this.bindItemRef},m),y)}}]),n}(r.Component);ee.contextType=U,ee.defaultProps={editType:"normal",tabIndex:0};var te=function(e){B(n,e);var t=F(n);function n(){return R(this,n),t.apply(this,arguments)}return M(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=H(e,["children"]);return o.a.createElement("span",n,o.a.createElement("div",{className:"template-item-wrapper-inner"},t))}}]),n}(r.Component),ne=function(e){B(n,e);var t=F(n);function n(e){var r;return R(this,n),(r=t.call(this,e)).transformBetweenValue=function(e){return{display:e.map((function(e){return e?e.display:""})),value:e.map((function(e){return e?e.value:""}))}},r.getSingleValueByIndex=function(e,t){var n=e.attrcode,o=(0,r.props.getFieldValue)({attrcode:n}),i=o.value,a=o.display;return!Array.isArray(i)&&(i=[i]),!Array.isArray(a)&&(a=[a]),{display:a[t],value:i[t]}},r.setSingleValueByIndex=function(e,t){var n=e.attrcode,o=e.value,i=e.componentValue,a=r.props,u=a.getFieldValue,c=a.setFieldValue,l=u({attrcode:n});!Array.isArray(l.display)&&(l.display=[]),!Array.isArray(l.value)&&(l.value=[]),l.display[t]=o.display,l.value[t]=o.value,r.componentValue[t]=i,c({attrcode:n,value:l,componentValue:r.componentValue})},r.value=[void 0,void 0],r.componentValue=[void 0,void 0],r}return M(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.onBeforeEvent,r=t.onAfterEvent,i=t.path;return o.a.createElement(o.a.Fragment,null,o.a.createElement(ee,D({},this.props,{onBeforeEvent:function(t){var r=t.value,o=t.event;return e.value[0]=r,"function"!=typeof n||n({value:e.transformBetweenValue(e.value),event:o})},onAfterEvent:function(t){var n=t.value,o=t.event,i=V(e.value);if(e.value[0]=n,"function"==typeof r)return r({value:e.transformBetweenValue(e.value),oldValue:e.transformBetweenValue(i),event:o,componentValue:e.componentValue,index:0})},setFieldValue:function(t){var n=t.attrcode,r=t.value,o=t.componentValue;e.setSingleValueByIndex({attrcode:n,value:r,componentValue:o},0)},getFieldValue:function(t){var n=t.attrcode;return e.getSingleValueByIndex({attrcode:n},0)},path:i&&i.concat(0)})),o.a.createElement("span",{className:"between-item-sep"},"-"),o.a.createElement(ee,D({},this.props,{onBeforeEvent:function(t){var r=t.value,o=t.event;return e.value[1]=r,"function"!=typeof n||n({value:e.transformBetweenValue(e.value),event:o})},onAfterEvent:function(t){var n=t.value,o=t.event,i=V(e.value);if(e.value[1]=n,"function"==typeof r)return r({value:e.transformBetweenValue(e.value),oldValue:e.transformBetweenValue(i),event:o,componentValue:e.componentValue,index:1})},setFieldValue:function(t){var n=t.attrcode,r=t.value,o=t.componentValue;e.setSingleValueByIndex({attrcode:n,value:r,componentValue:o},1)},getFieldValue:function(t){var n=t.attrcode;return e.getSingleValueByIndex({attrcode:n},1)},path:i&&i.concat(1)})))}}]),n}(r.Component),re=function(e){B(n,e);var t=F(n);function n(){return R(this,n),t.apply(this,arguments)}return M(n,[{key:"render",value:function(){var e=this.props,t=e.between,n=H(e,["between"]);return t?o.a.createElement(ne,n):o.a.createElement(ee,n)}}]),n}(r.Component);function oe(e,t){for(var n=e,r=0;r<t.length;r+=1){if(null==n)return;n=n[t[r]]}return n}function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ue(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||se(e)||le(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e){return function(e){if(Array.isArray(e))return e}(e)||se(e)||le(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){if(e){if("string"==typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fe(e,t):void 0}}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function se(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function pe(e,t,n){if(!t.length)return n;var r,o=ce(t),i=o[0],a=o.slice(1);return(r=e||"number"!=typeof i?Array.isArray(e)?ue(e):function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e):[])[i]=pe(r[i],a,n),r}function de(e){return null==e?[]:Array.isArray(e)?e:[e]}function ve(e,t,n){return(ve=ye()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&me(o,n.prototype),o}).apply(null,arguments)}function ye(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function me(e,t){return(me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){ge(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var we=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.uuid="xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Object(l.getSafeRandom)()|0;return("x"==e?t:3&t|8).toString(16)})),this.store={},this.ctx=null,this.fieldMap={},this.components={},this.updateQueue=[],this.updateItem=function(e){e=de(e);var n=oe(t.fieldMap,e);Array.isArray(n)?n.forEach((function(e){return null==e?void 0:e.forceUpdate()})):n&&"object"===Oe(n)&&Object.keys(n).forEach((function(n){t.updateItem(e.concat(n))}))},this.findDOMNode=function(e){e=de(e);var n=oe(t.fieldMap,e);return Object(i.findDOMNode)(n)},this.forceUpdate=function(e){var n;null===(n=t.ctx)||void 0===n||n.forceUpdate(e)},this.setRef=function(e){t.ctx=e},this.getRef=function(){return t.ctx},this.removeRef=function(e){t.ctx===e&&(t.ctx=null)},this.registerField=function(e,n){if(e){var r=oe(t.fieldMap,e),o=0;return r?o=r.push(n)-1:r=[n],t.fieldMap=pe(t.fieldMap,e,r),function(){var n=oe(t.fieldMap,e);n[o]=null,t.fieldMap=pe(t.fieldMap,e,n)}}},this.register=function(e,n){t.components[e]={current:n,update:function(){n.forceUpdate()},focus:function(){var e;null===(e=n.focus)||void 0===e||e.call(n)},blur:function(){var e;null===(e=n.blur)||void 0===e||e.call(n)}}},this.unregister=function(e){delete t.components[e]},this.getComponent=function(e){return t.components[e]},this.updateComponent=function(e){t.getComponent(e).update()},this.focusComponent=function(e){t.getComponent(e).focus()},this.blurComponent=function(e){t.getComponent(e).blur()},this.getAllHooks=function(){var e=t.getHooks(),n=Object.create(Object.defineProperties({},{registerField:{value:t.registerField,enumerable:!1,configurable:!1,writable:!1}}));return n=Object.assign(n,he(he({},e),{},{setRef:t.setRef,getRef:t.getRef,removeRef:t.removeRef,setMeta:t.setMeta,getMeta:t.getMeta,getInstance:function(){return t}}))}}var t,n,r;return t=e,(n=[{key:"set",value:function(e,t){return e=de(e),this.store=pe(this.store,e,t),this.store}},{key:"get",value:function(e){return e=de(e),oe(this.store,e)}}])&&Ee(t.prototype,n),r&&Ee(t,r),e}();function je(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=ve(e,n);return o.getAllHooks()}}function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ae(e);if(t){var o=Ae(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ce(this,n)}}function Ce(e,t){return!t||"object"!==xe(t)&&"function"!=typeof t?Se(e):t}function Se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var De=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(i,e);var t,n,r,o=Te(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),e.store.setRef(Se(t)),t}return t=i,(n=[{key:"render",value:function(){throw"请复写BaseComponent的render方法！"}},{key:"componentWillUnmount",value:function(){this.props.store.removeRef(this)}}])&&ke(t.prototype,n),r&&ke(t,r),i}(r.Component);function Ve(e){return function(e){if(Array.isArray(e))return Fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ne(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){_e(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(e,t)||Ne(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e,t){if(e){if("string"==typeof e)return Fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fe(e,t):void 0}}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e,t,n){return t&&Ze(e.prototype,t),n&&Ze(e,n),e}var He=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(qe(this,e),this.isArrayData=!0,t.isArrayData)return t;var r=this.dataTranslater(t,de(n)),o=r.data,i=Object.setPrototypeOf([],Object.getPrototypeOf(t));return Object.entries({data:o,keyPath:de(n),isArrayData:this.isArrayData,query:this.query,update:this.update,queryIndexByKey:this.queryIndexByKey,splice:this.splice,pop:this.pop,push:this.push,shift:this.shift,unshift:this.unshift}).forEach((function(e){var n=Be(e,2),r=n[0],o=n[1];Object.defineProperty(i,r,{value:"function"==typeof o?o.bind(t):o,enumerable:!1,writable:"isArrayData"===r,configurable:!1})})),Object.defineProperty(i,"order",{get:function(){var e=this;return this.map((function(t){return oe(t,e.keyPath)}))},enumerable:!1,configurable:!1}),Object.setPrototypeOf(t,i),t}return Le(e,[{key:"dataTranslater",value:function(e,t){var n={};return Array.isArray(e)&&e.map((function(e){var r=oe(e,t);return n[r]=e,r})),{data:n}}},{key:"query",value:function(e){var t,n;return"number"==typeof e?n=e:"string"==typeof e?t=e:e&&"object"===Me(e)&&(t=e.key,n=e.index),void 0!==n?this[n]:void 0!==t?this.data[t]:null}},{key:"update",value:function(e,t){var n=this,r=this.query(e),o=oe(r,this.keyPath),i=t(Re({},r));return Object.keys(this.data[o]).forEach((function(e){delete n.data[o][e]})),Object.assign(this.data[o],i),pe(this.data[o],this.keyPath,o),this}},{key:"queryIndexByKey",value:function(e){var t=this;return Array.isArray(e)?e.map((function(e){return t.queryIndexByKey(e)})):this.findIndex((function(n){return oe(n,t.keyPath)===e}))}},{key:"pop",value:function(){var e=Array.prototype.pop.call(this),t=oe(e,this.keyPath);return void 0!==t&&delete this.data[t],e}},{key:"push",value:function(){for(var e,t=this,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var i=(e=Array.prototype.push).call.apply(e,[this].concat(r));return r.forEach((function(e){var n=oe(e,t.keyPath);t.data[n]=e})),i}},{key:"shift",value:function(){var e=Array.prototype.shift.call(this),t=oe(e,this.keyPath);return void 0!==t&&delete this.data[t],e}},{key:"unshift",value:function(){for(var e,t=this,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var i=(e=Array.prototype.unshift).call.apply(e,[this].concat(r));return r.forEach((function(e){var n=oe(e,t.keyPath);t.data[n]=e})),i}},{key:"splice",value:function(e,t){for(var n,r=this,o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];var u=(n=Array.prototype.splice).call.apply(n,[this,e,t].concat(i));return u.forEach((function(e){var t=oe(e,r.keyPath);delete r.data[t]})),i.forEach((function(e){var t=oe(e,r.keyPath);r.data[t]=e})),u}}]),e}(),We=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(qe(this,e),this.isArrayData=!0,this.query=function(e){var n;return"string"==typeof e?n=e:e&&"object"===Me(e)&&(n=e.key),void 0!==n?t.data[n]:null},this.get=function(){return t.originData},this.getArrayData=function(){return t.arrayData},this.dfs=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.originData;n.forEach((function(n){e(n),Array.isArray(n.children)&&t.dfs(e,n.children)}))},this.bfs=function(){},this.addNode=function(e,t){},this.deleteNode=function(e){},this.editNode=function(e,t){},n.isArrayData)return n;this.arrayData=[],this.data={},this.dataTranslater(n,de(r));var o=Object.setPrototypeOf([],Object.getPrototypeOf(n));return Object.entries({keyPath:de(r),isArrayData:this.isArrayData,arrayData:this.arrayData,query:this.query,update:this.update,getArrayData:this.getArrayData,get:this.get}).forEach((function(e){var t=Be(e,2),r=t[0],i=t[1];Object.defineProperty(o,r,{value:"function"==typeof i?i.bind(n):i,enumerable:!1,writable:"isArrayData"===r,configurable:!1})})),Object.setPrototypeOf(n,o),this.originData=n,n}return Le(e,[{key:"dataTranslater",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Array.isArray(e)&&e.forEach((function(e){var i=oe(e,t);n.data[i]=e,n.arrayData.push(e),e._parentPath=r,e._level=o,n.dataTranslater(e.children,t,[].concat(Ve(r),[i]),o+1)}))}},{key:"update",value:function(e,t){var n=this,r=this.query(e),o=oe(r,this.keyPath),i=t(Re({},r));return Object.keys(this.data[o]).forEach((function(e){delete n.data[o][e]})),Object.assign(this.data[o],i),pe(this.data[o],this.keyPath,o),this}}]),e}();function Ue(e){return new He(e,"attrcode")}function Ye(e){return new We(e,"attrcode")}function Ke(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ze(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.rules,r=void 0===n?[]:n,o=t.stopOnFirstError,i=void 0!==o&&o,a=[];!Array.isArray(r)&&(r=[r]);var u,c=Ke(r);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=l.length,s=void 0===f?1/0:f,p=l.required,d=l.pattern,v=l.type,y=l.max,m=l.min,b=(l.scale,l.validator,l.transform,l.message);if(p&&[void 0,null,""].includes(e)&&(a.push(b),i))return a;if(v&&Object.prototype.toString.call(e).slice(8,-1).toLowerCase()!==v){if(a.push(b),i)return a}else switch(Object.prototype.toString.call(e).slice(8,-1).toLowerCase()){case"string":if(e.length>Number(s)&&(a.push(b),i))return a;if(d&&!d.test(e)&&(a.push(b),i))return a;break;case"number":if(y&&e>Number(y)){if(a.push(b),i)return a}else if(m&&e<Number(m)&&(a.push(b),i))return a;break;case"array":if(e.length>Number(s)&&(a.push(b),i))return a}}}catch(e){c.e(e)}finally{c.f()}return a}},3:function(e,t){e.exports=n},303:function(e,t,n){var r=n(630);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},304:function(e,t,n){var r=n(92);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},305:function(e,t,n){var r=n(306);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},306:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},307:function(e,t,n){var r=n(308)("keys"),o=n(152);e.exports=function(e){return r[e]||(r[e]=o(e))}},308:function(e,t,n){var r=n(52),o=n(77),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(151)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},309:function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},310:function(e,t){t.f=Object.getOwnPropertySymbols},372:function(e,t,n){n(629),e.exports=n(52).Object.assign},373:function(e,t,n){e.exports=!n(71)&&!n(93)((function(){return 7!=Object.defineProperty(n(374)("div"),"a",{get:function(){return 7}}).a}))},374:function(e,t,n){var r=n(92),o=n(77).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},375:function(e,t,n){var r=n(94),o=n(103),i=n(632)(!1),a=n(307)("IE_PROTO");e.exports=function(e,t){var n,u=o(e),c=0,l=[];for(n in u)n!=a&&r(u,n)&&l.push(n);for(;t.length>c;)r(u,n=t[c++])&&(~i(l,n)||l.push(n));return l}},376:function(e,t,n){var r=n(150),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},5:function(e,t,n){var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)&&r.length){var a=o.apply(null,r);a&&e.push(a)}else if("object"===i)for(var u in r)n.call(r,u)&&r[u]&&e.push(u)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},52:function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},55:function(e,t,n){"use strict";n.r(t);var r=n(12),o=n.n(r);t.default=function(e,t){for(var n=o()({},e),r=0;r<t.length;r++){delete n[t[r]]}return n}},6:function(e,t){e.exports=r},628:function(e,t,n){e.exports={default:n(372),__esModule:!0}},629:function(e,t,n){var r=n(90);r(r.S+r.F,"Object",{assign:n(631)})},630:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},631:function(e,t,n){"use strict";var r=n(71),o=n(128),i=n(310),a=n(153),u=n(129),c=n(305),l=Object.assign;e.exports=!l||n(93)((function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=r}))?function(e,t){for(var n=u(e),l=arguments.length,f=1,s=i.f,p=a.f;l>f;)for(var d,v=c(arguments[f++]),y=s?o(v).concat(s(v)):o(v),m=y.length,b=0;m>b;)d=y[b++],r&&!p.call(v,d)||(n[d]=v[d]);return n}:l},632:function(e,t,n){var r=n(103),o=n(376),i=n(633);e.exports=function(e){return function(t,n,a){var u,c=r(t),l=o(c.length),f=i(a,l);if(e&&n!=n){for(;l>f;)if((u=c[f++])!=u)return!0}else for(;l>f;f++)if((e||f in c)&&c[f]===n)return e||f||0;return!e&&-1}}},633:function(e,t,n){var r=n(150),o=Math.max,i=Math.min;e.exports=function(e,t){return(e=r(e))<0?o(e+t,0):i(e,t)}},71:function(e,t,n){e.exports=!n(93)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},77:function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},90:function(e,t,n){var r=n(77),o=n(52),i=n(303),a=n(112),u=n(94),c=function(e,t,n){var l,f,s,p=e&c.F,d=e&c.G,v=e&c.S,y=e&c.P,m=e&c.B,b=e&c.W,h=d?o:o[t]||(o[t]={}),g=h.prototype,O=d?r:v?r[t]:(r[t]||{}).prototype;for(l in d&&(n=t),n)(f=!p&&O&&void 0!==O[l])&&u(h,l)||(s=f?O[l]:n[l],h[l]=d&&"function"!=typeof O[l]?n[l]:m&&f?i(s,r):b&&O[l]==s?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(s):y&&"function"==typeof s?i(Function.call,s):s,y&&((h.virtual||(h.virtual={}))[l]=s,e&c.R&&g&&!g[l]&&a(g,l,s)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},91:function(e,t,n){var r=n(113),o=n(373),i=n(304),a=Object.defineProperty;t.f=n(71)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},92:function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},93:function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},94:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}}})}));
//# sourceMappingURL=index.js.map